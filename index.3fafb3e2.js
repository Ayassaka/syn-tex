// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles

(function(modules, entry, mainEntry, parcelRequireName, globalName) {
  /* eslint-disable no-undef */
  var globalObject =
    typeof globalThis !== 'undefined'
      ? globalThis
      : typeof self !== 'undefined'
      ? self
      : typeof window !== 'undefined'
      ? window
      : typeof global !== 'undefined'
      ? global
      : {};
  /* eslint-enable no-undef */

  // Save the require from previous bundle to this closure if any
  var previousRequire =
    typeof globalObject[parcelRequireName] === 'function' &&
    globalObject[parcelRequireName];

  var cache = previousRequire.cache || {};
  // Do not use `require` to prevent Webpack from trying to bundle this call
  var nodeRequire =
    typeof module !== 'undefined' &&
    typeof module.require === 'function' &&
    module.require.bind(module);

  function newRequire(name, jumped) {
    if (!cache[name]) {
      if (!modules[name]) {
        // if we cannot find the module within our internal map or
        // cache jump to the current global require ie. the last bundle
        // that was added to the page.
        var currentRequire =
          typeof globalObject[parcelRequireName] === 'function' &&
          globalObject[parcelRequireName];
        if (!jumped && currentRequire) {
          return currentRequire(name, true);
        }

        // If there are other bundles on this page the require from the
        // previous one is saved to 'previousRequire'. Repeat this as
        // many times as there are bundles until the module is found or
        // we exhaust the require chain.
        if (previousRequire) {
          return previousRequire(name, true);
        }

        // Try the node require function if it exists.
        if (nodeRequire && typeof name === 'string') {
          return nodeRequire(name);
        }

        var err = new Error("Cannot find module '" + name + "'");
        err.code = 'MODULE_NOT_FOUND';
        throw err;
      }

      localRequire.resolve = resolve;
      localRequire.cache = {};

      var module = (cache[name] = new newRequire.Module(name));

      modules[name][0].call(
        module.exports,
        localRequire,
        module,
        module.exports,
        this,
      );
    }

    return cache[name].exports;

    function localRequire(x) {
      return newRequire(localRequire.resolve(x));
    }

    function resolve(x) {
      return modules[name][1][x] || x;
    }
  }

  function Module(moduleName) {
    this.id = moduleName;
    this.bundle = newRequire;
    this.exports = {};
  }

  newRequire.isParcelRequire = true;
  newRequire.Module = Module;
  newRequire.modules = modules;
  newRequire.cache = cache;
  newRequire.parent = previousRequire;
  newRequire.register = function(id, exports) {
    modules[id] = [
      function(require, module) {
        module.exports = exports;
      },
      {},
    ];
  };

  Object.defineProperty(newRequire, 'root', {
    get: function() {
      return globalObject[parcelRequireName];
    },
  });

  globalObject[parcelRequireName] = newRequire;

  for (var i = 0; i < entry.length; i++) {
    newRequire(entry[i]);
  }

  if (mainEntry) {
    // Expose entry point to Node, AMD or browser globals
    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
    var mainExports = newRequire(mainEntry);

    // CommonJS
    if (typeof exports === 'object' && typeof module !== 'undefined') {
      module.exports = mainExports;

      // RequireJS
    } else if (typeof define === 'function' && define.amd) {
      define(function() {
        return mainExports;
      });

      // <script>
    } else if (globalName) {
      this[globalName] = mainExports;
    }
  }
})({"39Mbm":[function(require,module,exports) {
var HMR_HOST = null;
var HMR_PORT = null;
var HMR_SECURE = false;
var HMR_ENV_HASH = "d751713988987e9331980363e24189ce";
module.bundle.HMR_BUNDLE_ID = "0fa2489aa94c8731ee2aee9f3fafb3e2"; // @flow
/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE */ /*::
import type {
  HMRAsset,
  HMRMessage,
} from '@parcel/reporter-dev-server/src/HMRServer.js';
interface ParcelRequire {
  (string): mixed;
  cache: {|[string]: ParcelModule|};
  hotData: mixed;
  Module: any;
  parent: ?ParcelRequire;
  isParcelRequire: true;
  modules: {|[string]: [Function, {|[string]: string|}]|};
  HMR_BUNDLE_ID: string;
  root: ParcelRequire;
}
interface ParcelModule {
  hot: {|
    data: mixed,
    accept(cb: (Function) => void): void,
    dispose(cb: (mixed) => void): void,
    // accept(deps: Array<string> | string, cb: (Function) => void): void,
    // decline(): void,
    _acceptCallbacks: Array<(Function) => void>,
    _disposeCallbacks: Array<(mixed) => void>,
  |};
}
declare var module: {bundle: ParcelRequire, ...};
declare var HMR_HOST: string;
declare var HMR_PORT: string;
declare var HMR_ENV_HASH: string;
declare var HMR_SECURE: boolean;
*/ var OVERLAY_ID = '__parcel__error__overlay__';
var OldModule = module.bundle.Module;
function Module(moduleName) {
    OldModule.call(this, moduleName);
    this.hot = {
        data: module.bundle.hotData,
        _acceptCallbacks: [],
        _disposeCallbacks: [],
        accept: function(fn) {
            this._acceptCallbacks.push(fn || function() {
            });
        },
        dispose: function(fn) {
            this._disposeCallbacks.push(fn);
        }
    };
    module.bundle.hotData = undefined;
}
module.bundle.Module = Module;
var checkedAssets/*: {|[string]: boolean|} */ , acceptedAssets/*: {|[string]: boolean|} */ , assetsToAccept/*: Array<[ParcelRequire, string]> */ ;
function getHostname() {
    return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');
}
function getPort() {
    return HMR_PORT || location.port;
}
// eslint-disable-next-line no-redeclare
var parent = module.bundle.parent;
if ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {
    var hostname = getHostname();
    var port = getPort();
    var protocol = HMR_SECURE || location.protocol == 'https:' && !/localhost|127.0.0.1|0.0.0.0/.test(hostname) ? 'wss' : 'ws';
    var ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');
    // $FlowFixMe
    ws.onmessage = function(event/*: {data: string, ...} */ ) {
        checkedAssets = {
        };
        acceptedAssets = {
        };
        assetsToAccept = [];
        var data = JSON.parse(event.data);
        if (data.type === 'update') {
            // Remove error overlay if there is one
            removeErrorOverlay();
            let assets = data.assets.filter((asset)=>asset.envHash === HMR_ENV_HASH
            );
            // Handle HMR Update
            var handled = false;
            assets.forEach((asset)=>{
                var didAccept = asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);
                if (didAccept) handled = true;
            });
            if (handled) {
                console.clear();
                assets.forEach(function(asset) {
                    hmrApply(module.bundle.root, asset);
                });
                for(var i = 0; i < assetsToAccept.length; i++){
                    var id = assetsToAccept[i][1];
                    if (!acceptedAssets[id]) hmrAcceptRun(assetsToAccept[i][0], id);
                }
            } else window.location.reload();
        }
        if (data.type === 'error') {
            // Log parcel errors to console
            for (let ansiDiagnostic of data.diagnostics.ansi){
                let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;
                console.error('ðŸš¨ [parcel]: ' + ansiDiagnostic.message + '\n' + stack + '\n\n' + ansiDiagnostic.hints.join('\n'));
            }
            // Render the fancy html overlay
            removeErrorOverlay();
            var overlay = createErrorOverlay(data.diagnostics.html);
            // $FlowFixMe
            document.body.appendChild(overlay);
        }
    };
    ws.onerror = function(e) {
        console.error(e.message);
    };
    ws.onclose = function(e) {
        console.warn('[parcel] ðŸš¨ Connection to the HMR server was lost');
    };
}
function removeErrorOverlay() {
    var overlay = document.getElementById(OVERLAY_ID);
    if (overlay) {
        overlay.remove();
        console.log('[parcel] âœ¨ Error resolved');
    }
}
function createErrorOverlay(diagnostics) {
    var overlay = document.createElement('div');
    overlay.id = OVERLAY_ID;
    let errorHTML = '<div style="background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;">';
    for (let diagnostic of diagnostics){
        let stack = diagnostic.codeframe ? diagnostic.codeframe : diagnostic.stack;
        errorHTML += `\n      <div>\n        <div style="font-size: 18px; font-weight: bold; margin-top: 20px;">\n          ðŸš¨ ${diagnostic.message}\n        </div>\n        <pre>\n          ${stack}\n        </pre>\n        <div>\n          ${diagnostic.hints.map((hint)=>'<div>' + hint + '</div>'
        ).join('')}\n        </div>\n      </div>\n    `;
    }
    errorHTML += '</div>';
    overlay.innerHTML = errorHTML;
    return overlay;
}
function getParents(bundle, id) /*: Array<[ParcelRequire, string]> */ {
    var modules = bundle.modules;
    if (!modules) return [];
    var parents = [];
    var k, d, dep;
    for(k in modules)for(d in modules[k][1]){
        dep = modules[k][1][d];
        if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) parents.push([
            bundle,
            k
        ]);
    }
    if (bundle.parent) parents = parents.concat(getParents(bundle.parent, id));
    return parents;
}
function updateLink(link) {
    var newLink = link.cloneNode();
    newLink.onload = function() {
        if (link.parentNode !== null) // $FlowFixMe
        link.parentNode.removeChild(link);
    };
    newLink.setAttribute('href', // $FlowFixMe
    link.getAttribute('href').split('?')[0] + '?' + Date.now());
    // $FlowFixMe
    link.parentNode.insertBefore(newLink, link.nextSibling);
}
var cssTimeout = null;
function reloadCSS() {
    if (cssTimeout) return;
    cssTimeout = setTimeout(function() {
        var links = document.querySelectorAll('link[rel="stylesheet"]');
        for(var i = 0; i < links.length; i++){
            // $FlowFixMe[incompatible-type]
            var href = links[i].getAttribute('href');
            var hostname = getHostname();
            var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\/\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());
            var absolute = /^https?:\/\//i.test(href) && href.indexOf(window.location.origin) !== 0 && !servedFromHMRServer;
            if (!absolute) updateLink(links[i]);
        }
        cssTimeout = null;
    }, 50);
}
function hmrApply(bundle/*: ParcelRequire */ , asset/*:  HMRAsset */ ) {
    var modules = bundle.modules;
    if (!modules) return;
    if (asset.type === 'css') {
        reloadCSS();
        return;
    }
    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];
    if (deps) {
        var fn = new Function('require', 'module', 'exports', asset.output);
        modules[asset.id] = [
            fn,
            deps
        ];
    } else if (bundle.parent) hmrApply(bundle.parent, asset);
}
function hmrAcceptCheck(bundle/*: ParcelRequire */ , id/*: string */ , depsByBundle/*: ?{ [string]: { [string]: string } }*/ ) {
    var modules = bundle.modules;
    if (!modules) return;
    if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {
        // If we reached the root bundle without finding where the asset should go,
        // there's nothing to do. Mark as "accepted" so we don't reload the page.
        if (!bundle.parent) return true;
        return hmrAcceptCheck(bundle.parent, id, depsByBundle);
    }
    if (checkedAssets[id]) return;
    checkedAssets[id] = true;
    var cached = bundle.cache[id];
    assetsToAccept.push([
        bundle,
        id
    ]);
    if (cached && cached.hot && cached.hot._acceptCallbacks.length) return true;
    return getParents(module.bundle.root, id).some(function(v) {
        return hmrAcceptCheck(v[0], v[1], null);
    });
}
function hmrAcceptRun(bundle/*: ParcelRequire */ , id/*: string */ ) {
    var cached = bundle.cache[id];
    bundle.hotData = {
    };
    if (cached && cached.hot) cached.hot.data = bundle.hotData;
    if (cached && cached.hot && cached.hot._disposeCallbacks.length) cached.hot._disposeCallbacks.forEach(function(cb) {
        cb(bundle.hotData);
    });
    delete bundle.cache[id];
    bundle(id);
    cached = bundle.cache[id];
    if (cached && cached.hot && cached.hot._acceptCallbacks.length) cached.hot._acceptCallbacks.forEach(function(cb) {
        var assetsToAlsoAccept = cb(function() {
            return getParents(module.bundle.root, id);
        });
        if (assetsToAlsoAccept && assetsToAccept.length) assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);
    });
    acceptedAssets[id] = true;
}

},{}],"5rkFb":[function(require,module,exports) {
// ***************************** Init MathJax *****************************
var _mathjaxJs = require("mathjax-full/js/mathjax.js");
var _texJs = require("mathjax-full/js/input/tex.js");
var _chtmlJs = require("mathjax-full/js/output/chtml.js");
var _browserAdaptorJs = require("mathjax-full/js/adaptors/browserAdaptor.js");
var _htmlJs = require("mathjax-full/js/handlers/html.js");
var _allPackagesJs = require("mathjax-full/js/input/tex/AllPackages.js");
// index.js
// ******************************* Init Ace *******************************
const ace = require('brace');
const Range1 = ace.acequire('ace/range').Range;
require('brace/mode/latex');
const source = ace.edit('source');
source.session.setMode('ace/mode/latex');
source.setFontSize('14px');
source.session.setUseWrapMode(true);
source.$blockScrolling = Infinity;
// source.setOptions({
//   autoScrollEditorIntoView: true,
//   maxLines: 20
// });
source.renderer.setScrollMargin(10, 10, 10, 10);
const sourceSelection = source.getSelection();
const adaptor = _browserAdaptorJs.browserAdaptor();
_htmlJs.RegisterHTMLHandler(adaptor);
const tex = new _texJs.TeX({
    packages: _allPackagesJs.AllPackages.sort().join(', ').split(/\s*,\s*/)
});
const chtml = new _chtmlJs.CHTML({
    fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
});
const html = _mathjaxJs.mathjax.document('', {
    InputJax: tex,
    OutputJax: chtml
});
// **************************** Render Control ****************************
const preview = document.getElementById('preview');
let renderTime = 0;
let renderCount = 0;
let rendered = false;
function render() {
    let start = performance.now();
    let text = source.getValue();
    const node = html.convert(text, {
        display: true,
        em: 20,
        ex: 12,
        containerWidth: 1280
    });
    preview.innerHTML = '';
    preview.appendChild(node);
    preview.appendChild(chtml.styleSheet(html));
    index.length = text.length;
    index.fill(null);
    indexNode(node, 0, text.length);
    rendered = true;
    forwardSelection();
    renderTime = performance.now() - start;
}
async function sourceUpdate() {
    rendered = false;
    renderCount++;
    let renderId = renderCount;
    await new Promise((resolve)=>setTimeout(resolve, renderTime)
    );
    if (renderCount === renderId) render();
}
source.addEventListener('change', sourceUpdate);
// ************************* Index Construction *************************
let index = [];
function indexNode(node, parentBegin, parentEnd) {
    let thisBegin, thisEnd;
    let realNode = false;
    let loc = node.getAttribute('beginloc');
    if (loc) {
        thisBegin = parseInt(loc);
        thisEnd = parseInt(node.getAttribute('endloc'));
        realNode = thisBegin !== parentBegin || thisEnd !== parentEnd;
        if (realNode) {
            parentBegin = thisBegin;
            parentEnd = thisEnd;
        } else {
            node.removeAttribute('beginloc');
            node.removeAttribute('endloc');
        }
    }
    let childBegin = parentEnd;
    let childEnd = parentBegin;
    for(var i = 0; i < node.children.length; i++){
        var child = node.children[i];
        [b, e] = indexNode(child, parentBegin, parentEnd);
        if (b < childBegin) childBegin = b;
        if (e > childEnd) childEnd = e;
    }
    if (realNode) {
        index.fill(node, thisBegin, childBegin);
        index.fill(node, childEnd, thisEnd);
        return [
            thisBegin,
            thisEnd
        ];
    }
    return [
        childBegin,
        childEnd
    ];
}
// ************************** User Interaction **************************
function positionToIndex(pos) {
    return source.getSession().getDocument().positionToIndex(pos);
}
function indexToPosition(i) {
    return source.getSession().getDocument().indexToPosition(i);
}
sourceSelection.addEventListener('changeCursor', forwardSelection);
sourceSelection.addEventListener('changeSelection', forwardSelection);
source.addEventListener('focus', forwardSelection);
let selectionBegin = 0;
let selectionEnd = 0;
function forwardSelection() {
    if (!rendered) return;
    let b = positionToIndex(sourceSelection.getSelectionLead());
    let e = positionToIndex(sourceSelection.getSelectionAnchor());
    if (b > e) [b, e] = [
        e,
        b
    ];
    else if (b === e) e++;
    for(let i = selectionBegin; i < b && i < selectionEnd; i++)unselectPreviewNode(index[i]);
    for(let i1 = Math.max(e, selectionBegin); i1 < selectionEnd && i1; i1++)unselectPreviewNode(index[i1]);
    for(let i2 = b; i2 < selectionBegin && i2 < e; i2++)selectPreviewNode(index[i2]);
    for(let i3 = Math.max(selectionEnd, b); i3 < e; i3++)selectPreviewNode(index[i3]);
    selectionBegin = b;
    selectionEnd = e;
}
function getPreviewTarget(target) {
    while(target.nodeName !== 'DIV'){
        let beginLoc = target.getAttribute('beginloc');
        if (beginLoc) return target;
        target = target.parentElement;
    }
    return null;
}
function unselectAll() {
    for(let i = selectionBegin; i < selectionEnd; i++)unselectPreviewNode(index[i]);
}
function unselectPreviewNode(node) {
    if (node) node.style.backgroundColor = null;
}
function selectPreviewNode(node) {
    if (node) node.style.backgroundColor = '#ACCEF7';
}
function selectSourceRange(b, e) {
    sourceSelection.setSelectionRange(Range1.fromPoints(indexToPosition(b), indexToPosition(e)));
}
let selectingPreview = false;
let anchorBegin = 0;
let anchorEnd = 0;
preview.addEventListener("mousedown", (e)=>{
    target = getPreviewTarget(e.target);
    if (!target) return;
    selectingPreview = true;
    anchorBegin = parseInt(target.getAttribute('beginloc'));
    anchorEnd = parseInt(target.getAttribute('endloc'));
    selectSourceRange(anchorBegin, anchorEnd);
// let posBegin = indexToPosition(anchorBegin);
// source.moveCursorTo(posBegin.row, posBegin.column);
// let posEnd = indexToPosition(anchorEnd);
// sourceSelection.setSelectionAnchor(posEnd.row, posEnd.column);
});
preview.addEventListener("mouseup", (e)=>{
    if (!selectingPreview) return;
    selectingPreview = false;
    target = getPreviewTarget(e.target);
    source.focus();
});
preview.addEventListener("mousemove", (e)=>{
    if (selectingPreview) {
        let target = getPreviewTarget(e.target);
        if (target) {
            let b = parseInt(target.getAttribute('beginloc'));
            let e1 = parseInt(target.getAttribute('endloc'));
            selectSourceRange(Math.min(b, anchorBegin), Math.max(e1, anchorEnd));
        }
    } else {
        unselectAll();
        let target = getPreviewTarget(e.target);
        if (target) {
            selectPreviewNode(target);
            selectionBegin = parseInt(target.getAttribute('beginloc'));
            selectionEnd = parseInt(target.getAttribute('endloc'));
        }
    }
});
preview.addEventListener("mouseleave", (e)=>{
    selectingPreview = false;
    forwardSelection();
});
// ************************ Start Rendering ************************
render();

},{"brace":"3gXNA","brace/mode/latex":"4dGL7","mathjax-full/js/mathjax.js":"7BASf","mathjax-full/js/input/tex.js":"7c9cR","mathjax-full/js/output/chtml.js":"1Uk2J","mathjax-full/js/adaptors/browserAdaptor.js":"ulyjU","mathjax-full/js/handlers/html.js":"AXdxh","mathjax-full/js/input/tex/AllPackages.js":"6NmSw"}],"3gXNA":[function(require,module,exports) {
/* ***** BEGIN LICENSE BLOCK *****
 * Distributed under the BSD license:
 *
 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * ***** END LICENSE BLOCK ***** */ /**
 * Define a module along with a payload
 * @param module a name for the payload
 * @param payload a function to call with (acequire, exports, module) params
 */ (function() {
    var ACE_NAMESPACE = "ace";
    var global = function() {
        return this;
    }();
    if (!global && typeof window != "undefined") global = window; // strict mode
    if (!ACE_NAMESPACE && typeof acequirejs !== "undefined") return;
    var define = function(module, deps, payload) {
        if (typeof module !== "string") {
            if (define.original) define.original.apply(this, arguments);
            else {
                console.error("dropping module because define wasn\'t a string.");
                console.trace();
            }
            return;
        }
        if (arguments.length == 2) payload = deps;
        if (!define.modules[module]) {
            define.payloads[module] = payload;
            define.modules[module] = null;
        }
    };
    define.modules = {
    };
    define.payloads = {
    };
    /**
 * Get at functionality define()ed using the function above
 */ var _acequire = function(parentId, module, callback) {
        if (typeof module === "string") {
            var payload = lookup(parentId, module);
            if (payload != undefined) {
                callback && callback();
                return payload;
            }
        } else if (Object.prototype.toString.call(module) === "[object Array]") {
            var params = [];
            for(var i = 0, l = module.length; i < l; ++i){
                var dep = lookup(parentId, module[i]);
                if (dep == undefined && acequire.original) return;
                params.push(dep);
            }
            return callback && callback.apply(null, params) || true;
        }
    };
    var acequire = function(module, callback) {
        var packagedModule = _acequire("", module, callback);
        if (packagedModule == undefined && acequire.original) return acequire.original.apply(this, arguments);
        return packagedModule;
    };
    var normalizeModule = function(parentId, moduleName) {
        // normalize plugin acequires
        if (moduleName.indexOf("!") !== -1) {
            var chunks = moduleName.split("!");
            return normalizeModule(parentId, chunks[0]) + "!" + normalizeModule(parentId, chunks[1]);
        }
        // normalize relative acequires
        if (moduleName.charAt(0) == ".") {
            var base = parentId.split("/").slice(0, -1).join("/");
            moduleName = base + "/" + moduleName;
            while(moduleName.indexOf(".") !== -1 && previous != moduleName){
                var previous = moduleName;
                moduleName = moduleName.replace(/\/\.\//, "/").replace(/[^\/]+\/\.\.\//, "");
            }
        }
        return moduleName;
    };
    /**
 * Internal function to lookup moduleNames and resolve them by calling the
 * definition function if needed.
 */ var lookup = function(parentId, moduleName) {
        moduleName = normalizeModule(parentId, moduleName);
        var module = define.modules[moduleName];
        if (!module) {
            module = define.payloads[moduleName];
            if (typeof module === 'function') {
                var exports = {
                };
                var mod = {
                    id: moduleName,
                    uri: '',
                    exports: exports,
                    packaged: true
                };
                var req = function(module1, callback) {
                    return _acequire(moduleName, module1, callback);
                };
                var returnValue = module(req, exports, mod);
                exports = returnValue || mod.exports;
                define.modules[moduleName] = exports;
                delete define.payloads[moduleName];
            }
            module = define.modules[moduleName] = exports || module;
        }
        return module;
    };
    function exportAce(ns) {
        var root = global;
        if (ns) {
            if (!global[ns]) global[ns] = {
            };
            root = global[ns];
        }
        if (!root.define || !root.define.packaged) {
            define.original = root.define;
            root.define = define;
            root.define.packaged = true;
        }
        if (!root.acequire || !root.acequire.packaged) {
            acequire.original = root.acequire;
            root.acequire = acequire;
            root.acequire.packaged = true;
        }
    }
    exportAce(ACE_NAMESPACE);
})();
ace.define("ace/lib/regexp", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    var real = {
        exec: RegExp.prototype.exec,
        test: RegExp.prototype.test,
        match: String.prototype.match,
        replace: String.prototype.replace,
        split: String.prototype.split
    }, compliantExecNpcg = real.exec.call(/()??/, "")[1] === undefined, compliantLastIndexIncrement = function() {
        var x = /^/g;
        real.test.call(x, "");
        return !x.lastIndex;
    }();
    if (compliantLastIndexIncrement && compliantExecNpcg) return;
    RegExp.prototype.exec = function(str) {
        var match = real.exec.apply(this, arguments), name, r2;
        if (typeof str == 'string' && match) {
            if (!compliantExecNpcg && match.length > 1 && indexOf(match, "") > -1) {
                r2 = RegExp(this.source, real.replace.call(getNativeFlags(this), "g", ""));
                real.replace.call(str.slice(match.index), r2, function() {
                    for(var i = 1; i < arguments.length - 2; i++)if (arguments[i] === undefined) match[i] = undefined;
                });
            }
            if (this._xregexp && this._xregexp.captureNames) for(var i = 1; i < match.length; i++){
                name = this._xregexp.captureNames[i - 1];
                if (name) match[name] = match[i];
            }
            if (!compliantLastIndexIncrement && this.global && !match[0].length && this.lastIndex > match.index) this.lastIndex--;
        }
        return match;
    };
    if (!compliantLastIndexIncrement) RegExp.prototype.test = function(str) {
        var match = real.exec.call(this, str);
        if (match && this.global && !match[0].length && this.lastIndex > match.index) this.lastIndex--;
        return !!match;
    };
    function getNativeFlags(regex) {
        return (regex.global ? "g" : "") + (regex.ignoreCase ? "i" : "") + (regex.multiline ? "m" : "") + (regex.extended ? "x" : "") + (regex.sticky ? "y" : "");
    }
    function indexOf(array, item, from) {
        if (Array.prototype.indexOf) return array.indexOf(item, from);
        for(var i = from || 0; i < array.length; i++){
            if (array[i] === item) return i;
        }
        return -1;
    }
});
ace.define("ace/lib/es5-shim", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    function Empty() {
    }
    if (!Function.prototype.bind) Function.prototype.bind = function bind(that) {
        var target = this;
        if (typeof target != "function") throw new TypeError("Function.prototype.bind called on incompatible " + target);
        var args = slice.call(arguments, 1); // for normal call
        var bound = function() {
            if (this instanceof bound) {
                var result = target.apply(this, args.concat(slice.call(arguments)));
                if (Object(result) === result) return result;
                return this;
            } else return target.apply(that, args.concat(slice.call(arguments)));
        };
        if (target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            Empty.prototype = null;
        }
        return bound;
    };
    var call = Function.prototype.call;
    var prototypeOfArray = Array.prototype;
    var prototypeOfObject = Object.prototype;
    var slice = prototypeOfArray.slice;
    var _toString = call.bind(prototypeOfObject.toString);
    var owns = call.bind(prototypeOfObject.hasOwnProperty);
    var defineGetter;
    var defineSetter;
    var lookupGetter;
    var lookupSetter;
    var supportsAccessors;
    if (supportsAccessors = owns(prototypeOfObject, "__defineGetter__")) {
        defineGetter = call.bind(prototypeOfObject.__defineGetter__);
        defineSetter = call.bind(prototypeOfObject.__defineSetter__);
        lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);
        lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);
    }
    if ([
        1,
        2
    ].splice(0).length != 2) {
        if ((function() {
            function makeArray(l) {
                var a = new Array(l + 2);
                a[0] = a[1] = 0;
                return a;
            }
            var array = [], lengthBefore;
            array.splice.apply(array, makeArray(20));
            array.splice.apply(array, makeArray(26));
            lengthBefore = array.length; //46
            array.splice(5, 0, "XXX"); // add one element
            array.length;
            if (lengthBefore + 1 == array.length) return true; // has right splice implementation without bugs
        })()) {
            var array_splice = Array.prototype.splice;
            Array.prototype.splice = function(start, deleteCount) {
                if (!arguments.length) return [];
                else return array_splice.apply(this, [
                    start === void 0 ? 0 : start,
                    deleteCount === void 0 ? this.length - start : deleteCount
                ].concat(slice.call(arguments, 2)));
            };
        } else Array.prototype.splice = function(pos, removeCount) {
            var length = this.length;
            if (pos > 0) {
                if (pos > length) pos = length;
            } else if (pos == void 0) pos = 0;
            else if (pos < 0) pos = Math.max(length + pos, 0);
            if (!(pos + removeCount < length)) removeCount = length - pos;
            var removed = this.slice(pos, pos + removeCount);
            var insert = slice.call(arguments, 2);
            var add = insert.length;
            if (pos === length) {
                if (add) this.push.apply(this, insert);
            } else {
                var remove = Math.min(removeCount, length - pos);
                var tailOldPos = pos + remove;
                var tailNewPos = tailOldPos + add - remove;
                var tailCount = length - tailOldPos;
                var lengthAfterRemove = length - remove;
                if (tailNewPos < tailOldPos) for(var i = 0; i < tailCount; ++i)this[tailNewPos + i] = this[tailOldPos + i];
                else if (tailNewPos > tailOldPos) for(i = tailCount; i--;)this[tailNewPos + i] = this[tailOldPos + i];
                 // else, add == remove (nothing to do)
                if (add && pos === lengthAfterRemove) {
                    this.length = lengthAfterRemove; // truncate array
                    this.push.apply(this, insert);
                } else {
                    this.length = lengthAfterRemove + add; // reserves space
                    for(i = 0; i < add; ++i)this[pos + i] = insert[i];
                }
            }
            return removed;
        };
    }
    if (!Array.isArray) Array.isArray = function isArray(obj) {
        return _toString(obj) == "[object Array]";
    };
    var boxedString = Object("a"), splitString = boxedString[0] != "a" || !(0 in boxedString);
    if (!Array.prototype.forEach) Array.prototype.forEach = function forEach(fun/*, thisp*/ ) {
        var object = toObject(this), self = splitString && _toString(this) == "[object String]" ? this.split("") : object, thisp = arguments[1], i = -1, length = self.length >>> 0;
        if (_toString(fun) != "[object Function]") throw new TypeError(); // TODO message
        while((++i) < length)if (i in self) fun.call(thisp, self[i], i, object);
    };
    if (!Array.prototype.map) Array.prototype.map = function map(fun/*, thisp*/ ) {
        var object = toObject(this), self = splitString && _toString(this) == "[object String]" ? this.split("") : object, length = self.length >>> 0, result = Array(length), thisp = arguments[1];
        if (_toString(fun) != "[object Function]") throw new TypeError(fun + " is not a function");
        for(var i = 0; i < length; i++)if (i in self) result[i] = fun.call(thisp, self[i], i, object);
        return result;
    };
    if (!Array.prototype.filter) Array.prototype.filter = function filter(fun/*, thisp */ ) {
        var object = toObject(this), self = splitString && _toString(this) == "[object String]" ? this.split("") : object, length = self.length >>> 0, result = [], value, thisp = arguments[1];
        if (_toString(fun) != "[object Function]") throw new TypeError(fun + " is not a function");
        for(var i = 0; i < length; i++)if (i in self) {
            value = self[i];
            if (fun.call(thisp, value, i, object)) result.push(value);
        }
        return result;
    };
    if (!Array.prototype.every) Array.prototype.every = function every(fun/*, thisp */ ) {
        var object = toObject(this), self = splitString && _toString(this) == "[object String]" ? this.split("") : object, length = self.length >>> 0, thisp = arguments[1];
        if (_toString(fun) != "[object Function]") throw new TypeError(fun + " is not a function");
        for(var i = 0; i < length; i++){
            if (i in self && !fun.call(thisp, self[i], i, object)) return false;
        }
        return true;
    };
    if (!Array.prototype.some) Array.prototype.some = function some(fun/*, thisp */ ) {
        var object = toObject(this), self = splitString && _toString(this) == "[object String]" ? this.split("") : object, length = self.length >>> 0, thisp = arguments[1];
        if (_toString(fun) != "[object Function]") throw new TypeError(fun + " is not a function");
        for(var i = 0; i < length; i++){
            if (i in self && fun.call(thisp, self[i], i, object)) return true;
        }
        return false;
    };
    if (!Array.prototype.reduce) Array.prototype.reduce = function reduce(fun/*, initial*/ ) {
        var object = toObject(this), self = splitString && _toString(this) == "[object String]" ? this.split("") : object, length = self.length >>> 0;
        if (_toString(fun) != "[object Function]") throw new TypeError(fun + " is not a function");
        if (!length && arguments.length == 1) throw new TypeError("reduce of empty array with no initial value");
        var i = 0;
        var result;
        if (arguments.length >= 2) result = arguments[1];
        else do {
            if (i in self) {
                result = self[i++];
                break;
            }
            if ((++i) >= length) throw new TypeError("reduce of empty array with no initial value");
        }while (true)
        for(; i < length; i++)if (i in self) result = fun.call(void 0, result, self[i], i, object);
        return result;
    };
    if (!Array.prototype.reduceRight) Array.prototype.reduceRight = function reduceRight(fun/*, initial*/ ) {
        var object = toObject(this), self = splitString && _toString(this) == "[object String]" ? this.split("") : object, length = self.length >>> 0;
        if (_toString(fun) != "[object Function]") throw new TypeError(fun + " is not a function");
        if (!length && arguments.length == 1) throw new TypeError("reduceRight of empty array with no initial value");
        var result, i = length - 1;
        if (arguments.length >= 2) result = arguments[1];
        else do {
            if (i in self) {
                result = self[i--];
                break;
            }
            if ((--i) < 0) throw new TypeError("reduceRight of empty array with no initial value");
        }while (true)
        do if (i in this) result = fun.call(void 0, result, self[i], i, object);
        while (i--)
        return result;
    };
    if (!Array.prototype.indexOf || [
        0,
        1
    ].indexOf(1, 2) != -1) Array.prototype.indexOf = function indexOf(sought/*, fromIndex */ ) {
        var self = splitString && _toString(this) == "[object String]" ? this.split("") : toObject(this), length = self.length >>> 0;
        if (!length) return -1;
        var i = 0;
        if (arguments.length > 1) i = toInteger(arguments[1]);
        i = i >= 0 ? i : Math.max(0, length + i);
        for(; i < length; i++){
            if (i in self && self[i] === sought) return i;
        }
        return -1;
    };
    if (!Array.prototype.lastIndexOf || [
        0,
        1
    ].lastIndexOf(0, -3) != -1) Array.prototype.lastIndexOf = function lastIndexOf(sought/*, fromIndex */ ) {
        var self = splitString && _toString(this) == "[object String]" ? this.split("") : toObject(this), length = self.length >>> 0;
        if (!length) return -1;
        var i = length - 1;
        if (arguments.length > 1) i = Math.min(i, toInteger(arguments[1]));
        i = i >= 0 ? i : length - Math.abs(i);
        for(; i >= 0; i--){
            if (i in self && sought === self[i]) return i;
        }
        return -1;
    };
    if (!Object.getPrototypeOf) Object.getPrototypeOf = function getPrototypeOf(object) {
        return object.__proto__ || (object.constructor ? object.constructor.prototype : prototypeOfObject);
    };
    if (!Object.getOwnPropertyDescriptor) {
        var ERR_NON_OBJECT = "Object.getOwnPropertyDescriptor called on a non-object: ";
        Object.getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {
            if (typeof object != "object" && typeof object != "function" || object === null) throw new TypeError(ERR_NON_OBJECT + object);
            if (!owns(object, property)) return;
            var descriptor, getter, setter;
            descriptor = {
                enumerable: true,
                configurable: true
            };
            if (supportsAccessors) {
                var prototype = object.__proto__;
                object.__proto__ = prototypeOfObject;
                var getter = lookupGetter(object, property);
                var setter = lookupSetter(object, property);
                object.__proto__ = prototype;
                if (getter || setter) {
                    if (getter) descriptor.get = getter;
                    if (setter) descriptor.set = setter;
                    return descriptor;
                }
            }
            descriptor.value = object[property];
            return descriptor;
        };
    }
    if (!Object.getOwnPropertyNames) Object.getOwnPropertyNames = function getOwnPropertyNames(object) {
        return Object.keys(object);
    };
    if (!Object.create) {
        var createEmpty;
        if (Object.prototype.__proto__ === null) createEmpty = function() {
            return {
                "__proto__": null
            };
        };
        else createEmpty = function() {
            var empty = {
            };
            for(var i in empty)empty[i] = null;
            empty.constructor = empty.hasOwnProperty = empty.propertyIsEnumerable = empty.isPrototypeOf = empty.toLocaleString = empty.toString = empty.valueOf = empty.__proto__ = null;
            return empty;
        };
        Object.create = function create(prototype, properties) {
            var object;
            if (prototype === null) object = createEmpty();
            else {
                if (typeof prototype != "object") throw new TypeError("typeof prototype[" + typeof prototype + "] != 'object'");
                var Type = function() {
                };
                Type.prototype = prototype;
                object = new Type();
                object.__proto__ = prototype;
            }
            if (properties !== void 0) Object.defineProperties(object, properties);
            return object;
        };
    }
    function doesDefinePropertyWork(object) {
        try {
            Object.defineProperty(object, "sentinel", {
            });
            return "sentinel" in object;
        } catch (exception) {
        }
    }
    if (Object.defineProperty) {
        var definePropertyWorksOnObject = doesDefinePropertyWork({
        });
        var definePropertyWorksOnDom = typeof document == "undefined" || doesDefinePropertyWork(document.createElement("div"));
        if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) var definePropertyFallback = Object.defineProperty;
    }
    if (!Object.defineProperty || definePropertyFallback) {
        var ERR_NON_OBJECT_DESCRIPTOR = "Property description must be an object: ";
        var ERR_NON_OBJECT_TARGET = "Object.defineProperty called on non-object: ";
        var ERR_ACCESSORS_NOT_SUPPORTED = "getters & setters can not be defined on this javascript engine";
        Object.defineProperty = function defineProperty(object, property, descriptor) {
            if (typeof object != "object" && typeof object != "function" || object === null) throw new TypeError(ERR_NON_OBJECT_TARGET + object);
            if (typeof descriptor != "object" && typeof descriptor != "function" || descriptor === null) throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);
            if (definePropertyFallback) try {
                return definePropertyFallback.call(Object, object, property, descriptor);
            } catch (exception) {
            }
            if (owns(descriptor, "value")) {
                if (supportsAccessors && (lookupGetter(object, property) || lookupSetter(object, property))) {
                    var prototype = object.__proto__;
                    object.__proto__ = prototypeOfObject;
                    delete object[property];
                    object[property] = descriptor.value;
                    object.__proto__ = prototype;
                } else object[property] = descriptor.value;
            } else {
                if (!supportsAccessors) throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);
                if (owns(descriptor, "get")) defineGetter(object, property, descriptor.get);
                if (owns(descriptor, "set")) defineSetter(object, property, descriptor.set);
            }
            return object;
        };
    }
    if (!Object.defineProperties) Object.defineProperties = function defineProperties(object, properties) {
        for(var property in properties)if (owns(properties, property)) Object.defineProperty(object, property, properties[property]);
        return object;
    };
    if (!Object.seal) Object.seal = function seal(object) {
        return object;
    };
    if (!Object.freeze) Object.freeze = function freeze(object) {
        return object;
    };
    try {
        Object.freeze(function() {
        });
    } catch (exception) {
        Object.freeze = (function freeze1(freezeObject) {
            return function freeze2(object) {
                if (typeof object == "function") return object;
                else return freezeObject(object);
            };
        })(Object.freeze);
    }
    if (!Object.preventExtensions) Object.preventExtensions = function preventExtensions(object) {
        return object;
    };
    if (!Object.isSealed) Object.isSealed = function isSealed(object) {
        return false;
    };
    if (!Object.isFrozen) Object.isFrozen = function isFrozen(object) {
        return false;
    };
    if (!Object.isExtensible) Object.isExtensible = function isExtensible(object) {
        if (Object(object) === object) throw new TypeError(); // TODO message
        var name = '';
        while(owns(object, name))name += '?';
        object[name] = true;
        var returnValue = owns(object, name);
        delete object[name];
        return returnValue;
    };
    if (!Object.keys) {
        var hasDontEnumBug = true, dontEnums = [
            "toString",
            "toLocaleString",
            "valueOf",
            "hasOwnProperty",
            "isPrototypeOf",
            "propertyIsEnumerable",
            "constructor"
        ], dontEnumsLength = dontEnums.length;
        for(var key in {
            "toString": null
        })hasDontEnumBug = false;
        Object.keys = function keys(object) {
            if (typeof object != "object" && typeof object != "function" || object === null) throw new TypeError("Object.keys called on a non-object");
            var keys = [];
            for(var name in object)if (owns(object, name)) keys.push(name);
            if (hasDontEnumBug) for(var i = 0, ii = dontEnumsLength; i < ii; i++){
                var dontEnum = dontEnums[i];
                if (owns(object, dontEnum)) keys.push(dontEnum);
            }
            return keys;
        };
    }
    if (!Date.now) Date.now = function now() {
        return new Date().getTime();
    };
    var ws = "\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";
    if (!String.prototype.trim || ws.trim()) {
        ws = "[" + ws + "]";
        var trimBeginRegexp = new RegExp("^" + ws + ws + "*"), trimEndRegexp = new RegExp(ws + ws + "*$");
        String.prototype.trim = function trim() {
            return String(this).replace(trimBeginRegexp, "").replace(trimEndRegexp, "");
        };
    }
    function toInteger(n) {
        n = +n;
        if (n !== n) n = 0;
        else if (n !== 0 && n !== 1 / 0 && n !== -(1 / 0)) n = (n > 0 || -1) * Math.floor(Math.abs(n));
        return n;
    }
    function isPrimitive(input) {
        var type = typeof input;
        return input === null || type === "undefined" || type === "boolean" || type === "number" || type === "string";
    }
    function toPrimitive(input) {
        var val, valueOf, toString;
        if (isPrimitive(input)) return input;
        valueOf = input.valueOf;
        if (typeof valueOf === "function") {
            val = valueOf.call(input);
            if (isPrimitive(val)) return val;
        }
        toString = input.toString;
        if (typeof toString === "function") {
            val = toString.call(input);
            if (isPrimitive(val)) return val;
        }
        throw new TypeError();
    }
    var toObject = function(o) {
        if (o == null) throw new TypeError("can't convert " + o + " to object");
        return Object(o);
    };
});
ace.define("ace/lib/fixoldbrowsers", [
    "require",
    "exports",
    "module",
    "ace/lib/regexp",
    "ace/lib/es5-shim"
], function(acequire, exports, module) {
    acequire("./regexp");
    acequire("./es5-shim");
});
ace.define("ace/lib/dom", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    var XHTML_NS = "http://www.w3.org/1999/xhtml";
    exports.getDocumentHead = function(doc) {
        if (!doc) doc = document;
        return doc.head || doc.getElementsByTagName("head")[0] || doc.documentElement;
    };
    exports.createElement = function(tag, ns) {
        return document.createElementNS ? document.createElementNS(ns || XHTML_NS, tag) : document.createElement(tag);
    };
    exports.hasCssClass = function(el, name) {
        var classes = (el.className + "").split(/\s+/g);
        return classes.indexOf(name) !== -1;
    };
    exports.addCssClass = function(el, name) {
        if (!exports.hasCssClass(el, name)) el.className += " " + name;
    };
    exports.removeCssClass = function(el, name) {
        var classes = el.className.split(/\s+/g);
        while(true){
            var index = classes.indexOf(name);
            if (index == -1) break;
            classes.splice(index, 1);
        }
        el.className = classes.join(" ");
    };
    exports.toggleCssClass = function(el, name) {
        var classes = el.className.split(/\s+/g), add = true;
        while(true){
            var index = classes.indexOf(name);
            if (index == -1) break;
            add = false;
            classes.splice(index, 1);
        }
        if (add) classes.push(name);
        el.className = classes.join(" ");
        return add;
    };
    exports.setCssClass = function(node, className, include) {
        if (include) exports.addCssClass(node, className);
        else exports.removeCssClass(node, className);
    };
    exports.hasCssString = function(id, doc) {
        var index = 0, sheets;
        doc = doc || document;
        if (doc.createStyleSheet && (sheets = doc.styleSheets)) {
            while(index < sheets.length)if (sheets[index++].owningElement.id === id) return true;
        } else if (sheets = doc.getElementsByTagName("style")) {
            while(index < sheets.length)if (sheets[index++].id === id) return true;
        }
        return false;
    };
    exports.importCssString = function importCssString(cssText, id, doc) {
        doc = doc || document;
        if (id && exports.hasCssString(id, doc)) return null;
        var style;
        if (id) cssText += "\n/*# sourceURL=ace/css/" + id + " */";
        if (doc.createStyleSheet) {
            style = doc.createStyleSheet();
            style.cssText = cssText;
            if (id) style.owningElement.id = id;
        } else {
            style = exports.createElement("style");
            style.appendChild(doc.createTextNode(cssText));
            if (id) style.id = id;
            exports.getDocumentHead(doc).appendChild(style);
        }
    };
    exports.importCssStylsheet = function(uri, doc) {
        if (doc.createStyleSheet) doc.createStyleSheet(uri);
        else {
            var link = exports.createElement('link');
            link.rel = 'stylesheet';
            link.href = uri;
            exports.getDocumentHead(doc).appendChild(link);
        }
    };
    exports.getInnerWidth = function(element) {
        return parseInt(exports.computedStyle(element, "paddingLeft"), 10) + parseInt(exports.computedStyle(element, "paddingRight"), 10) + element.clientWidth;
    };
    exports.getInnerHeight = function(element) {
        return parseInt(exports.computedStyle(element, "paddingTop"), 10) + parseInt(exports.computedStyle(element, "paddingBottom"), 10) + element.clientHeight;
    };
    exports.scrollbarWidth = function(document) {
        var inner = exports.createElement("ace_inner");
        inner.style.width = "100%";
        inner.style.minWidth = "0px";
        inner.style.height = "200px";
        inner.style.display = "block";
        var outer = exports.createElement("ace_outer");
        var style = outer.style;
        style.position = "absolute";
        style.left = "-10000px";
        style.overflow = "hidden";
        style.width = "200px";
        style.minWidth = "0px";
        style.height = "150px";
        style.display = "block";
        outer.appendChild(inner);
        var body = document.documentElement;
        body.appendChild(outer);
        var noScrollbar = inner.offsetWidth;
        style.overflow = "scroll";
        var withScrollbar = inner.offsetWidth;
        if (noScrollbar == withScrollbar) withScrollbar = outer.clientWidth;
        body.removeChild(outer);
        return noScrollbar - withScrollbar;
    };
    if (typeof document == "undefined") {
        exports.importCssString = function() {
        };
        return;
    }
    if (window.pageYOffset !== undefined) {
        exports.getPageScrollTop = function() {
            return window.pageYOffset;
        };
        exports.getPageScrollLeft = function() {
            return window.pageXOffset;
        };
    } else {
        exports.getPageScrollTop = function() {
            return document.body.scrollTop;
        };
        exports.getPageScrollLeft = function() {
            return document.body.scrollLeft;
        };
    }
    if (window.getComputedStyle) exports.computedStyle = function(element, style) {
        if (style) return (window.getComputedStyle(element, "") || {
        })[style] || "";
        return window.getComputedStyle(element, "") || {
        };
    };
    else exports.computedStyle = function(element, style) {
        if (style) return element.currentStyle[style];
        return element.currentStyle;
    };
    exports.setInnerHtml = function(el, innerHtml) {
        var element = el.cloneNode(false); //document.createElement("div");
        element.innerHTML = innerHtml;
        el.parentNode.replaceChild(element, el);
        return element;
    };
    if ("textContent" in document.documentElement) {
        exports.setInnerText = function(el, innerText) {
            el.textContent = innerText;
        };
        exports.getInnerText = function(el) {
            return el.textContent;
        };
    } else {
        exports.setInnerText = function(el, innerText) {
            el.innerText = innerText;
        };
        exports.getInnerText = function(el) {
            return el.innerText;
        };
    }
    exports.getParentWindow = function(document) {
        return document.defaultView || document.parentWindow;
    };
});
ace.define("ace/lib/oop", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    exports.inherits = function(ctor, superCtor) {
        ctor.super_ = superCtor;
        ctor.prototype = Object.create(superCtor.prototype, {
            constructor: {
                value: ctor,
                enumerable: false,
                writable: true,
                configurable: true
            }
        });
    };
    exports.mixin = function(obj, mixin) {
        for(var key in mixin)obj[key] = mixin[key];
        return obj;
    };
    exports.implement = function(proto, mixin) {
        exports.mixin(proto, mixin);
    };
});
ace.define("ace/lib/keys", [
    "require",
    "exports",
    "module",
    "ace/lib/fixoldbrowsers",
    "ace/lib/oop"
], function(acequire, exports, module) {
    acequire("./fixoldbrowsers");
    var oop = acequire("./oop");
    var Keys = function() {
        var ret = {
            MODIFIER_KEYS: {
                16: 'Shift',
                17: 'Ctrl',
                18: 'Alt',
                224: 'Meta'
            },
            KEY_MODS: {
                "ctrl": 1,
                "alt": 2,
                "option": 2,
                "shift": 4,
                "super": 8,
                "meta": 8,
                "command": 8,
                "cmd": 8
            },
            FUNCTION_KEYS: {
                8: "Backspace",
                9: "Tab",
                13: "Return",
                19: "Pause",
                27: "Esc",
                32: "Space",
                33: "PageUp",
                34: "PageDown",
                35: "End",
                36: "Home",
                37: "Left",
                38: "Up",
                39: "Right",
                40: "Down",
                44: "Print",
                45: "Insert",
                46: "Delete",
                96: "Numpad0",
                97: "Numpad1",
                98: "Numpad2",
                99: "Numpad3",
                100: "Numpad4",
                101: "Numpad5",
                102: "Numpad6",
                103: "Numpad7",
                104: "Numpad8",
                105: "Numpad9",
                '-13': "NumpadEnter",
                112: "F1",
                113: "F2",
                114: "F3",
                115: "F4",
                116: "F5",
                117: "F6",
                118: "F7",
                119: "F8",
                120: "F9",
                121: "F10",
                122: "F11",
                123: "F12",
                144: "Numlock",
                145: "Scrolllock"
            },
            PRINTABLE_KEYS: {
                32: ' ',
                48: '0',
                49: '1',
                50: '2',
                51: '3',
                52: '4',
                53: '5',
                54: '6',
                55: '7',
                56: '8',
                57: '9',
                59: ';',
                61: '=',
                65: 'a',
                66: 'b',
                67: 'c',
                68: 'd',
                69: 'e',
                70: 'f',
                71: 'g',
                72: 'h',
                73: 'i',
                74: 'j',
                75: 'k',
                76: 'l',
                77: 'm',
                78: 'n',
                79: 'o',
                80: 'p',
                81: 'q',
                82: 'r',
                83: 's',
                84: 't',
                85: 'u',
                86: 'v',
                87: 'w',
                88: 'x',
                89: 'y',
                90: 'z',
                107: '+',
                109: '-',
                110: '.',
                186: ';',
                187: '=',
                188: ',',
                189: '-',
                190: '.',
                191: '/',
                192: '`',
                219: '[',
                220: '\\',
                221: ']',
                222: "'",
                111: '/',
                106: '*'
            }
        };
        var name, i;
        for(i in ret.FUNCTION_KEYS){
            name = ret.FUNCTION_KEYS[i].toLowerCase();
            ret[name] = parseInt(i, 10);
        }
        for(i in ret.PRINTABLE_KEYS){
            name = ret.PRINTABLE_KEYS[i].toLowerCase();
            ret[name] = parseInt(i, 10);
        }
        oop.mixin(ret, ret.MODIFIER_KEYS);
        oop.mixin(ret, ret.PRINTABLE_KEYS);
        oop.mixin(ret, ret.FUNCTION_KEYS);
        ret.enter = ret["return"];
        ret.escape = ret.esc;
        ret.del = ret["delete"];
        ret[173] = '-';
        (function() {
            var mods = [
                "cmd",
                "ctrl",
                "alt",
                "shift"
            ];
            for(var i1 = Math.pow(2, mods.length); i1--;)ret.KEY_MODS[i1] = mods.filter(function(x) {
                return i1 & ret.KEY_MODS[x];
            }).join("-") + "-";
        })();
        ret.KEY_MODS[0] = "";
        ret.KEY_MODS[-1] = "input-";
        return ret;
    }();
    oop.mixin(exports, Keys);
    exports.keyCodeToString = function(keyCode) {
        var keyString = Keys[keyCode];
        if (typeof keyString != "string") keyString = String.fromCharCode(keyCode);
        return keyString.toLowerCase();
    };
});
ace.define("ace/lib/useragent", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    exports.OS = {
        LINUX: "LINUX",
        MAC: "MAC",
        WINDOWS: "WINDOWS"
    };
    exports.getOS = function() {
        if (exports.isMac) return exports.OS.MAC;
        else if (exports.isLinux) return exports.OS.LINUX;
        else return exports.OS.WINDOWS;
    };
    if (typeof navigator != "object") return;
    var os = (navigator.platform.match(/mac|win|linux/i) || [
        "other"
    ])[0].toLowerCase();
    var ua = navigator.userAgent;
    exports.isWin = os == "win";
    exports.isMac = os == "mac";
    exports.isLinux = os == "linux";
    exports.isIE = navigator.appName == "Microsoft Internet Explorer" || navigator.appName.indexOf("MSAppHost") >= 0 ? parseFloat((ua.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/) || [])[1]) : parseFloat((ua.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/) || [])[1]); // for ie
    exports.isOldIE = exports.isIE && exports.isIE < 9;
    exports.isGecko = exports.isMozilla = (window.Controllers || window.controllers) && window.navigator.product === "Gecko";
    exports.isOldGecko = exports.isGecko && parseInt((ua.match(/rv:(\d+)/) || [])[1], 10) < 4;
    exports.isOpera = window.opera && Object.prototype.toString.call(window.opera) == "[object Opera]";
    exports.isWebKit = parseFloat(ua.split("WebKit/")[1]) || undefined;
    exports.isChrome = parseFloat(ua.split(" Chrome/")[1]) || undefined;
    exports.isAIR = ua.indexOf("AdobeAIR") >= 0;
    exports.isIPad = ua.indexOf("iPad") >= 0;
    exports.isChromeOS = ua.indexOf(" CrOS ") >= 0;
    exports.isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;
    if (exports.isIOS) exports.isMac = true;
});
ace.define("ace/lib/event", [
    "require",
    "exports",
    "module",
    "ace/lib/keys",
    "ace/lib/useragent"
], function(acequire, exports, module) {
    var keys = acequire("./keys");
    var useragent = acequire("./useragent");
    var pressedKeys = null;
    var ts = 0;
    exports.addListener = function(elem, type, callback) {
        if (elem.addEventListener) return elem.addEventListener(type, callback, false);
        if (elem.attachEvent) {
            var wrapper = function() {
                callback.call(elem, window.event);
            };
            callback._wrapper = wrapper;
            elem.attachEvent("on" + type, wrapper);
        }
    };
    exports.removeListener = function(elem, type, callback) {
        if (elem.removeEventListener) return elem.removeEventListener(type, callback, false);
        if (elem.detachEvent) elem.detachEvent("on" + type, callback._wrapper || callback);
    };
    exports.stopEvent = function(e) {
        exports.stopPropagation(e);
        exports.preventDefault(e);
        return false;
    };
    exports.stopPropagation = function(e) {
        if (e.stopPropagation) e.stopPropagation();
        else e.cancelBubble = true;
    };
    exports.preventDefault = function(e) {
        if (e.preventDefault) e.preventDefault();
        else e.returnValue = false;
    };
    exports.getButton = function(e) {
        if (e.type == "dblclick") return 0;
        if (e.type == "contextmenu" || useragent.isMac && e.ctrlKey && !e.altKey && !e.shiftKey) return 2;
        if (e.preventDefault) return e.button;
        else return ({
            1: 0,
            2: 2,
            4: 1
        })[e.button];
    };
    exports.capture = function(el, eventHandler, releaseCaptureHandler) {
        function onMouseUp(e) {
            eventHandler && eventHandler(e);
            releaseCaptureHandler && releaseCaptureHandler(e);
            exports.removeListener(document, "mousemove", eventHandler, true);
            exports.removeListener(document, "mouseup", onMouseUp, true);
            exports.removeListener(document, "dragstart", onMouseUp, true);
        }
        exports.addListener(document, "mousemove", eventHandler, true);
        exports.addListener(document, "mouseup", onMouseUp, true);
        exports.addListener(document, "dragstart", onMouseUp, true);
        return onMouseUp;
    };
    exports.addTouchMoveListener = function(el, callback) {
        var startx, starty;
        exports.addListener(el, "touchstart", function(e) {
            var touches = e.touches;
            var touchObj = touches[0];
            startx = touchObj.clientX;
            starty = touchObj.clientY;
        });
        exports.addListener(el, "touchmove", function(e) {
            var touches = e.touches;
            if (touches.length > 1) return;
            var touchObj = touches[0];
            e.wheelX = startx - touchObj.clientX;
            e.wheelY = starty - touchObj.clientY;
            startx = touchObj.clientX;
            starty = touchObj.clientY;
            callback(e);
        });
    };
    exports.addMouseWheelListener = function(el, callback) {
        if ("onmousewheel" in el) exports.addListener(el, "mousewheel", function(e) {
            var factor = 8;
            if (e.wheelDeltaX !== undefined) {
                e.wheelX = -e.wheelDeltaX / factor;
                e.wheelY = -e.wheelDeltaY / factor;
            } else {
                e.wheelX = 0;
                e.wheelY = -e.wheelDelta / factor;
            }
            callback(e);
        });
        else if ("onwheel" in el) exports.addListener(el, "wheel", function(e) {
            var factor = 0.35;
            switch(e.deltaMode){
                case e.DOM_DELTA_PIXEL:
                    e.wheelX = e.deltaX * factor || 0;
                    e.wheelY = e.deltaY * factor || 0;
                    break;
                case e.DOM_DELTA_LINE:
                case e.DOM_DELTA_PAGE:
                    e.wheelX = (e.deltaX || 0) * 5;
                    e.wheelY = (e.deltaY || 0) * 5;
                    break;
            }
            callback(e);
        });
        else exports.addListener(el, "DOMMouseScroll", function(e) {
            if (e.axis && e.axis == e.HORIZONTAL_AXIS) {
                e.wheelX = (e.detail || 0) * 5;
                e.wheelY = 0;
            } else {
                e.wheelX = 0;
                e.wheelY = (e.detail || 0) * 5;
            }
            callback(e);
        });
    };
    exports.addMultiMouseDownListener = function(elements, timeouts, eventHandler, callbackName) {
        var clicks = 0;
        var startX, startY, timer;
        var eventNames = {
            2: "dblclick",
            3: "tripleclick",
            4: "quadclick"
        };
        function onMousedown(e) {
            if (exports.getButton(e) !== 0) clicks = 0;
            else if (e.detail > 1) {
                clicks++;
                if (clicks > 4) clicks = 1;
            } else clicks = 1;
            if (useragent.isIE) {
                var isNewClick = Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5;
                if (!timer || isNewClick) clicks = 1;
                if (timer) clearTimeout(timer);
                timer = setTimeout(function() {
                    timer = null;
                }, timeouts[clicks - 1] || 600);
                if (clicks == 1) {
                    startX = e.clientX;
                    startY = e.clientY;
                }
            }
            e._clicks = clicks;
            eventHandler[callbackName]("mousedown", e);
            if (clicks > 4) clicks = 0;
            else if (clicks > 1) return eventHandler[callbackName](eventNames[clicks], e);
        }
        function onDblclick(e) {
            clicks = 2;
            if (timer) clearTimeout(timer);
            timer = setTimeout(function() {
                timer = null;
            }, timeouts[clicks - 1] || 600);
            eventHandler[callbackName]("mousedown", e);
            eventHandler[callbackName](eventNames[clicks], e);
        }
        if (!Array.isArray(elements)) elements = [
            elements
        ];
        elements.forEach(function(el) {
            exports.addListener(el, "mousedown", onMousedown);
            if (useragent.isOldIE) exports.addListener(el, "dblclick", onDblclick);
        });
    };
    var getModifierHash = useragent.isMac && useragent.isOpera && !("KeyboardEvent" in window) ? function(e) {
        return 0 | (e.metaKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.ctrlKey ? 8 : 0);
    } : function(e) {
        return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);
    };
    exports.getModifierString = function(e) {
        return keys.KEY_MODS[getModifierHash(e)];
    };
    function normalizeCommandKeys(callback, e, keyCode) {
        var hashId = getModifierHash(e);
        if (!useragent.isMac && pressedKeys) {
            if (e.getModifierState && (e.getModifierState("OS") || e.getModifierState("Win"))) hashId |= 8;
            if (pressedKeys.altGr) {
                if ((3 & hashId) != 3) pressedKeys.altGr = 0;
                else return;
            }
            if (keyCode === 18 || keyCode === 17) {
                var location = "location" in e ? e.location : e.keyLocation;
                if (keyCode === 17 && location === 1) {
                    if (pressedKeys[keyCode] == 1) ts = e.timeStamp;
                } else if (keyCode === 18 && hashId === 3 && location === 2) {
                    var dt = e.timeStamp - ts;
                    if (dt < 50) pressedKeys.altGr = true;
                }
            }
        }
        if (keyCode in keys.MODIFIER_KEYS) keyCode = -1;
        if (hashId & 8 && keyCode >= 91 && keyCode <= 93) keyCode = -1;
        if (!hashId && keyCode === 13) {
            var location = "location" in e ? e.location : e.keyLocation;
            if (location === 3) {
                callback(e, hashId, -keyCode);
                if (e.defaultPrevented) return;
            }
        }
        if (useragent.isChromeOS && hashId & 8) {
            callback(e, hashId, keyCode);
            if (e.defaultPrevented) return;
            else hashId &= -9;
        }
        if (!hashId && !(keyCode in keys.FUNCTION_KEYS) && !(keyCode in keys.PRINTABLE_KEYS)) return false;
        return callback(e, hashId, keyCode);
    }
    exports.addCommandKeyListener = function(el, callback) {
        var addListener = exports.addListener;
        if (useragent.isOldGecko || useragent.isOpera && !("KeyboardEvent" in window)) {
            var lastKeyDownKeyCode = null;
            addListener(el, "keydown", function(e) {
                lastKeyDownKeyCode = e.keyCode;
            });
            addListener(el, "keypress", function(e) {
                return normalizeCommandKeys(callback, e, lastKeyDownKeyCode);
            });
        } else {
            var lastDefaultPrevented = null;
            addListener(el, "keydown", function(e) {
                pressedKeys[e.keyCode] = (pressedKeys[e.keyCode] || 0) + 1;
                var result = normalizeCommandKeys(callback, e, e.keyCode);
                lastDefaultPrevented = e.defaultPrevented;
                return result;
            });
            addListener(el, "keypress", function(e) {
                if (lastDefaultPrevented && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) {
                    exports.stopEvent(e);
                    lastDefaultPrevented = null;
                }
            });
            addListener(el, "keyup", function(e) {
                pressedKeys[e.keyCode] = null;
            });
            if (!pressedKeys) {
                resetPressedKeys();
                addListener(window, "focus", resetPressedKeys);
            }
        }
    };
    function resetPressedKeys() {
        pressedKeys = Object.create(null);
    }
    if (typeof window == "object" && window.postMessage && !useragent.isOldIE) {
        var postMessageId = 1;
        exports.nextTick = function(callback, win) {
            win = win || window;
            var messageName = "zero-timeout-message-" + postMessageId;
            exports.addListener(win, "message", function listener(e) {
                if (e.data == messageName) {
                    exports.stopPropagation(e);
                    exports.removeListener(win, "message", listener);
                    callback();
                }
            });
            win.postMessage(messageName, "*");
        };
    }
    exports.nextFrame = typeof window == "object" && (window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame);
    if (exports.nextFrame) exports.nextFrame = exports.nextFrame.bind(window);
    else exports.nextFrame = function(callback) {
        setTimeout(callback, 17);
    };
});
ace.define("ace/lib/lang", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    exports.last = function(a) {
        return a[a.length - 1];
    };
    exports.stringReverse = function(string) {
        return string.split("").reverse().join("");
    };
    exports.stringRepeat = function(string, count) {
        var result = '';
        while(count > 0){
            if (count & 1) result += string;
            count >>= 1;
            string += string;
        }
        return result;
    };
    var trimBeginRegexp = /^\s\s*/;
    var trimEndRegexp = /\s\s*$/;
    exports.stringTrimLeft = function(string) {
        return string.replace(trimBeginRegexp, '');
    };
    exports.stringTrimRight = function(string) {
        return string.replace(trimEndRegexp, '');
    };
    exports.copyObject = function(obj) {
        var copy = {
        };
        for(var key in obj)copy[key] = obj[key];
        return copy;
    };
    exports.copyArray = function(array) {
        var copy = [];
        for(var i = 0, l = array.length; i < l; i++)if (array[i] && typeof array[i] == "object") copy[i] = this.copyObject(array[i]);
        else copy[i] = array[i];
        return copy;
    };
    exports.deepCopy = function deepCopy(obj) {
        if (typeof obj !== "object" || !obj) return obj;
        var copy;
        if (Array.isArray(obj)) {
            copy = [];
            for(var key = 0; key < obj.length; key++)copy[key] = deepCopy(obj[key]);
            return copy;
        }
        if (Object.prototype.toString.call(obj) !== "[object Object]") return obj;
        copy = {
        };
        for(var key in obj)copy[key] = deepCopy(obj[key]);
        return copy;
    };
    exports.arrayToMap = function(arr) {
        var map = {
        };
        for(var i = 0; i < arr.length; i++)map[arr[i]] = 1;
        return map;
    };
    exports.createMap = function(props) {
        var map = Object.create(null);
        for(var i in props)map[i] = props[i];
        return map;
    };
    exports.arrayRemove = function(array, value) {
        for(var i = 0; i <= array.length; i++)if (value === array[i]) array.splice(i, 1);
    };
    exports.escapeRegExp = function(str) {
        return str.replace(/([.*+?^${}()|[\]\/\\])/g, '\\$1');
    };
    exports.escapeHTML = function(str) {
        return str.replace(/&/g, "&#38;").replace(/"/g, "&#34;").replace(/'/g, "&#39;").replace(/</g, "&#60;");
    };
    exports.getMatchOffsets = function(string, regExp) {
        var matches = [];
        string.replace(regExp, function(str) {
            matches.push({
                offset: arguments[arguments.length - 2],
                length: str.length
            });
        });
        return matches;
    };
    exports.deferredCall = function(fcn) {
        var timer = null;
        var callback = function() {
            timer = null;
            fcn();
        };
        var deferred = function(timeout) {
            deferred.cancel();
            timer = setTimeout(callback, timeout || 0);
            return deferred;
        };
        deferred.schedule = deferred;
        deferred.call = function() {
            this.cancel();
            fcn();
            return deferred;
        };
        deferred.cancel = function() {
            clearTimeout(timer);
            timer = null;
            return deferred;
        };
        deferred.isPending = function() {
            return timer;
        };
        return deferred;
    };
    exports.delayedCall = function(fcn, defaultTimeout) {
        var timer = null;
        var callback = function() {
            timer = null;
            fcn();
        };
        var _self = function(timeout) {
            if (timer == null) timer = setTimeout(callback, timeout || defaultTimeout);
        };
        _self.delay = function(timeout) {
            timer && clearTimeout(timer);
            timer = setTimeout(callback, timeout || defaultTimeout);
        };
        _self.schedule = _self;
        _self.call = function() {
            this.cancel();
            fcn();
        };
        _self.cancel = function() {
            timer && clearTimeout(timer);
            timer = null;
        };
        _self.isPending = function() {
            return timer;
        };
        return _self;
    };
});
ace.define("ace/keyboard/textinput_ios", [
    "require",
    "exports",
    "module",
    "ace/lib/event",
    "ace/lib/useragent",
    "ace/lib/dom",
    "ace/lib/lang",
    "ace/lib/keys"
], function(acequire, exports, module) {
    var event = acequire("../lib/event");
    var useragent = acequire("../lib/useragent");
    var dom = acequire("../lib/dom");
    var lang = acequire("../lib/lang");
    var KEYS = acequire("../lib/keys");
    var MODS = KEYS.KEY_MODS;
    var BROKEN_SETDATA = useragent.isChrome < 18;
    var USE_IE_MIME_TYPE = useragent.isIE;
    var TextInput = function(parentNode, host) {
        var self = this;
        var text = dom.createElement("textarea");
        text.className = useragent.isIOS ? "ace_text-input ace_text-input-ios" : "ace_text-input";
        if (useragent.isTouchPad) text.setAttribute("x-palm-disable-auto-cap", true);
        text.setAttribute("wrap", "off");
        text.setAttribute("autocorrect", "off");
        text.setAttribute("autocapitalize", "off");
        text.setAttribute("spellcheck", false);
        text.style.opacity = "0";
        parentNode.insertBefore(text, parentNode.firstChild);
        var PLACEHOLDER = "\n aaaa a\n";
        var copied = false;
        var cut = false;
        var pasted = false;
        var inComposition = false;
        var tempStyle = '';
        var isSelectionEmpty = true;
        try {
            var isFocused = document.activeElement === text;
        } catch (e) {
        }
        event.addListener(text, "blur", function(e) {
            host.onBlur(e);
            isFocused = false;
        });
        event.addListener(text, "focus", function(e) {
            isFocused = true;
            host.onFocus(e);
            resetSelection();
        });
        this.focus = function() {
            if (tempStyle) return text.focus();
            text.style.position = "fixed";
            text.focus();
        };
        this.blur = function() {
            text.blur();
        };
        this.isFocused = function() {
            return isFocused;
        };
        var syncSelection = lang.delayedCall(function() {
            isFocused && resetSelection(isSelectionEmpty);
        });
        var syncValue = lang.delayedCall(function() {
            if (!inComposition) {
                text.value = PLACEHOLDER;
                isFocused && resetSelection();
            }
        });
        function resetSelection(isEmpty) {
            if (inComposition) return;
            inComposition = true;
            if (inputHandler) {
                selectionStart = 0;
                selectionEnd = isEmpty ? 0 : text.value.length - 1;
            } else {
                var selectionStart = 4;
                var selectionEnd = 5;
            }
            try {
                text.setSelectionRange(selectionStart, selectionEnd);
            } catch (e) {
            }
            inComposition = false;
        }
        function resetValue() {
            if (inComposition) return;
            text.value = PLACEHOLDER;
            if (useragent.isWebKit) syncValue.schedule();
        }
        useragent.isWebKit || host.addEventListener('changeSelection', function() {
            if (host.selection.isEmpty() != isSelectionEmpty) {
                isSelectionEmpty = !isSelectionEmpty;
                syncSelection.schedule();
            }
        });
        resetValue();
        if (isFocused) host.onFocus();
        var isAllSelected = function(text1) {
            return text1.selectionStart === 0 && text1.selectionEnd === text1.value.length;
        };
        var onSelect = function(e) {
            if (isAllSelected(text)) {
                host.selectAll();
                resetSelection();
            } else if (inputHandler) resetSelection(host.selection.isEmpty());
        };
        var inputHandler = null;
        this.setInputHandler = function(cb) {
            inputHandler = cb;
        };
        this.getInputHandler = function() {
            return inputHandler;
        };
        var afterContextMenu = false;
        var sendText = function(data) {
            if (text.selectionStart === 4 && text.selectionEnd === 5) return;
            if (inputHandler) {
                data = inputHandler(data);
                inputHandler = null;
            }
            if (pasted) {
                resetSelection();
                if (data) host.onPaste(data);
                pasted = false;
            } else if (data == PLACEHOLDER.substr(0) && text.selectionStart === 4) {
                if (afterContextMenu) host.execCommand("del", {
                    source: "ace"
                });
                else host.execCommand("backspace", {
                    source: "ace"
                });
            } else if (!copied) {
                if (data.substring(0, 9) == PLACEHOLDER && data.length > PLACEHOLDER.length) data = data.substr(9);
                else if (data.substr(0, 4) == PLACEHOLDER.substr(0, 4)) data = data.substr(4, data.length - PLACEHOLDER.length + 1);
                else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0)) data = data.slice(0, -1);
                if (data == PLACEHOLDER.charAt(0)) ;
                else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0)) data = data.slice(0, -1);
                if (data) host.onTextInput(data);
            }
            if (copied) copied = false;
            if (afterContextMenu) afterContextMenu = false;
        };
        var onInput = function(e) {
            if (inComposition) return;
            var data = text.value;
            sendText(data);
            resetValue();
        };
        var handleClipboardData = function(e, data, forceIEMime) {
            var clipboardData = e.clipboardData || window.clipboardData;
            if (!clipboardData || BROKEN_SETDATA) return;
            var mime = USE_IE_MIME_TYPE || forceIEMime ? "Text" : "text/plain";
            try {
                if (data) return clipboardData.setData(mime, data) !== false;
                else return clipboardData.getData(mime);
            } catch (e1) {
                if (!forceIEMime) return handleClipboardData(e1, data, true);
            }
        };
        var doCopy = function(e, isCut) {
            var data = host.getCopyText();
            if (!data) return event.preventDefault(e);
            if (handleClipboardData(e, data)) {
                if (useragent.isIOS) {
                    cut = isCut;
                    text.value = "\n aa" + data + "a a\n";
                    text.setSelectionRange(4, 4 + data.length);
                    copied = {
                        value: data
                    };
                }
                isCut ? host.onCut() : host.onCopy();
                if (!useragent.isIOS) event.preventDefault(e);
            } else {
                copied = true;
                text.value = data;
                text.select();
                setTimeout(function() {
                    copied = false;
                    resetValue();
                    resetSelection();
                    isCut ? host.onCut() : host.onCopy();
                });
            }
        };
        var onCut = function(e) {
            doCopy(e, true);
        };
        var onCopy = function(e) {
            doCopy(e, false);
        };
        var onPaste = function(e) {
            var data = handleClipboardData(e);
            if (typeof data == "string") {
                if (data) host.onPaste(data, e);
                if (useragent.isIE) setTimeout(resetSelection);
                event.preventDefault(e);
            } else {
                text.value = "";
                pasted = true;
            }
        };
        event.addCommandKeyListener(text, host.onCommandKey.bind(host));
        event.addListener(text, "select", onSelect);
        event.addListener(text, "input", onInput);
        event.addListener(text, "cut", onCut);
        event.addListener(text, "copy", onCopy);
        event.addListener(text, "paste", onPaste);
        var onCompositionStart = function(e) {
            if (inComposition || !host.onCompositionStart || host.$readOnly) return;
            inComposition = {
            };
            inComposition.canUndo = host.session.$undoManager;
            host.onCompositionStart();
            setTimeout(onCompositionUpdate, 0);
            host.on("mousedown", onCompositionEnd);
            if (inComposition.canUndo && !host.selection.isEmpty()) {
                host.insert("");
                host.session.markUndoGroup();
                host.selection.clearSelection();
            }
            host.session.markUndoGroup();
        };
        var onCompositionUpdate = function() {
            if (!inComposition || !host.onCompositionUpdate || host.$readOnly) return;
            var val = text.value.replace(/\x01/g, "");
            if (inComposition.lastValue === val) return;
            host.onCompositionUpdate(val);
            if (inComposition.lastValue) host.undo();
            if (inComposition.canUndo) inComposition.lastValue = val;
            if (inComposition.lastValue) {
                var r = host.selection.getRange();
                host.insert(inComposition.lastValue);
                host.session.markUndoGroup();
                inComposition.range = host.selection.getRange();
                host.selection.setRange(r);
                host.selection.clearSelection();
            }
        };
        var onCompositionEnd = function(e) {
            if (!host.onCompositionEnd || host.$readOnly) return;
            var c = inComposition;
            inComposition = false;
            var timer = setTimeout(function() {
                timer = null;
                var str = text.value.replace(/\x01/g, "");
                if (inComposition) return;
                else if (str == c.lastValue) resetValue();
                else if (!c.lastValue && str) {
                    resetValue();
                    sendText(str);
                }
            });
            inputHandler = function compositionInputHandler(str) {
                if (timer) clearTimeout(timer);
                str = str.replace(/\x01/g, "");
                if (str == c.lastValue) return "";
                if (c.lastValue && timer) host.undo();
                return str;
            };
            host.onCompositionEnd();
            host.removeListener("mousedown", onCompositionEnd);
            if (e.type == "compositionend" && c.range) host.selection.setRange(c.range);
            var needsOnInput = !!useragent.isChrome && useragent.isChrome >= 53 || !!useragent.isWebKit && useragent.isWebKit >= 603;
            if (needsOnInput) onInput();
        };
        var syncComposition = lang.delayedCall(onCompositionUpdate, 50);
        event.addListener(text, "compositionstart", onCompositionStart);
        if (useragent.isGecko) event.addListener(text, "text", function() {
            syncComposition.schedule();
        });
        else {
            event.addListener(text, "keyup", function() {
                syncComposition.schedule();
            });
            event.addListener(text, "keydown", function() {
                syncComposition.schedule();
            });
        }
        event.addListener(text, "compositionend", onCompositionEnd);
        this.getElement = function() {
            return text;
        };
        this.setReadOnly = function(readOnly) {
            text.readOnly = readOnly;
        };
        this.onContextMenu = function(e) {
            afterContextMenu = true;
            resetSelection(host.selection.isEmpty());
            host._emit("nativecontextmenu", {
                target: host,
                domEvent: e
            });
            this.moveToMouse(e, true);
        };
        this.moveToMouse = function(e, bringToFront) {
            if (!tempStyle) tempStyle = text.style.cssText;
            text.style.cssText = (bringToFront ? "z-index:100000;" : "") + "height:" + text.style.height + ";" + (useragent.isIE ? "opacity:0.1;" : "");
            var rect = host.container.getBoundingClientRect();
            var style = dom.computedStyle(host.container);
            var top = rect.top + (parseInt(style.borderTopWidth) || 0);
            var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);
            var maxTop = rect.bottom - top - text.clientHeight - 2;
            var move = function(e1) {
                text.style.left = e1.clientX - left - 2 + "px";
                text.style.top = Math.min(e1.clientY - top - 2, maxTop) + "px";
            };
            move(e);
            if (e.type != "mousedown") return;
            if (host.renderer.$keepTextAreaAtCursor) host.renderer.$keepTextAreaAtCursor = null;
            clearTimeout(closeTimeout);
            if (useragent.isWin) event.capture(host.container, move, onContextMenuClose);
        };
        this.onContextMenuClose = onContextMenuClose;
        var closeTimeout;
        function onContextMenuClose() {
            clearTimeout(closeTimeout);
            closeTimeout = setTimeout(function() {
                if (tempStyle) {
                    text.style.cssText = tempStyle;
                    tempStyle = '';
                }
                if (host.renderer.$keepTextAreaAtCursor == null) {
                    host.renderer.$keepTextAreaAtCursor = true;
                    host.renderer.$moveTextAreaToCursor();
                }
            }, 0);
        }
        var onContextMenu = function(e) {
            host.textInput.onContextMenu(e);
            onContextMenuClose();
        };
        event.addListener(text, "mouseup", onContextMenu);
        event.addListener(text, "mousedown", function(e) {
            e.preventDefault();
            onContextMenuClose();
        });
        event.addListener(host.renderer.scroller, "contextmenu", onContextMenu);
        event.addListener(text, "contextmenu", onContextMenu);
        if (useragent.isIOS) {
            var typingResetTimeout = null;
            var typing = false;
            parentNode.addEventListener("keydown", function(e) {
                if (typingResetTimeout) clearTimeout(typingResetTimeout);
                typing = true;
            });
            parentNode.addEventListener("keyup", function(e) {
                typingResetTimeout = setTimeout(function() {
                    typing = false;
                }, 100);
            });
            var detectArrowKeys = function(e) {
                if (document.activeElement !== text) return;
                if (typing) return;
                if (cut) return setTimeout(function() {
                    cut = false;
                }, 100);
                var selectionStart = text.selectionStart;
                var selectionEnd = text.selectionEnd;
                text.setSelectionRange(4, 5);
                if (selectionStart == selectionEnd) switch(selectionStart){
                    case 0:
                        host.onCommandKey(null, 0, KEYS.up);
                        break;
                    case 1:
                        host.onCommandKey(null, 0, KEYS.home);
                        break;
                    case 2:
                        host.onCommandKey(null, MODS.option, KEYS.left);
                        break;
                    case 4:
                        host.onCommandKey(null, 0, KEYS.left);
                        break;
                    case 5:
                        host.onCommandKey(null, 0, KEYS.right);
                        break;
                    case 7:
                        host.onCommandKey(null, MODS.option, KEYS.right);
                        break;
                    case 8:
                        host.onCommandKey(null, 0, KEYS.end);
                        break;
                    case 9:
                        host.onCommandKey(null, 0, KEYS.down);
                        break;
                }
                else {
                    switch(selectionEnd){
                        case 6:
                            host.onCommandKey(null, MODS.shift, KEYS.right);
                            break;
                        case 7:
                            host.onCommandKey(null, MODS.shift | MODS.option, KEYS.right);
                            break;
                        case 8:
                            host.onCommandKey(null, MODS.shift, KEYS.end);
                            break;
                        case 9:
                            host.onCommandKey(null, MODS.shift, KEYS.down);
                            break;
                    }
                    switch(selectionStart){
                        case 0:
                            host.onCommandKey(null, MODS.shift, KEYS.up);
                            break;
                        case 1:
                            host.onCommandKey(null, MODS.shift, KEYS.home);
                            break;
                        case 2:
                            host.onCommandKey(null, MODS.shift | MODS.option, KEYS.left);
                            break;
                        case 3:
                            host.onCommandKey(null, MODS.shift, KEYS.left);
                            break;
                    }
                }
            };
            document.addEventListener("selectionchange", detectArrowKeys);
            host.on("destroy", function() {
                document.removeEventListener("selectionchange", detectArrowKeys);
            });
        }
    };
    exports.TextInput = TextInput;
});
ace.define("ace/keyboard/textinput", [
    "require",
    "exports",
    "module",
    "ace/lib/event",
    "ace/lib/useragent",
    "ace/lib/dom",
    "ace/lib/lang",
    "ace/keyboard/textinput_ios"
], function(acequire, exports, module) {
    var event = acequire("../lib/event");
    var useragent = acequire("../lib/useragent");
    var dom = acequire("../lib/dom");
    var lang = acequire("../lib/lang");
    var BROKEN_SETDATA = useragent.isChrome < 18;
    var USE_IE_MIME_TYPE = useragent.isIE;
    var TextInputIOS = acequire("./textinput_ios").TextInput;
    var TextInput = function(parentNode, host) {
        if (useragent.isIOS) return TextInputIOS.call(this, parentNode, host);
        var text = dom.createElement("textarea");
        text.className = "ace_text-input";
        text.setAttribute("wrap", "off");
        text.setAttribute("autocorrect", "off");
        text.setAttribute("autocapitalize", "off");
        text.setAttribute("spellcheck", false);
        text.style.opacity = "0";
        parentNode.insertBefore(text, parentNode.firstChild);
        var PLACEHOLDER = "\u2028\u2028";
        var copied = false;
        var pasted = false;
        var inComposition = false;
        var tempStyle = '';
        var isSelectionEmpty = true;
        try {
            var isFocused = document.activeElement === text;
        } catch (e) {
        }
        event.addListener(text, "blur", function(e) {
            host.onBlur(e);
            isFocused = false;
        });
        event.addListener(text, "focus", function(e) {
            isFocused = true;
            host.onFocus(e);
            resetSelection();
        });
        this.focus = function() {
            if (tempStyle) return text.focus();
            var top = text.style.top;
            text.style.position = "fixed";
            text.style.top = "0px";
            text.focus();
            setTimeout(function() {
                text.style.position = "";
                if (text.style.top == "0px") text.style.top = top;
            }, 0);
        };
        this.blur = function() {
            text.blur();
        };
        this.isFocused = function() {
            return isFocused;
        };
        var syncSelection = lang.delayedCall(function() {
            isFocused && resetSelection(isSelectionEmpty);
        });
        var syncValue = lang.delayedCall(function() {
            if (!inComposition) {
                text.value = PLACEHOLDER;
                isFocused && resetSelection();
            }
        });
        function resetSelection(isEmpty) {
            if (inComposition) return;
            inComposition = true;
            if (inputHandler) {
                var selectionStart = 0;
                var selectionEnd = isEmpty ? 0 : text.value.length - 1;
            } else {
                var selectionStart = isEmpty ? 2 : 1;
                var selectionEnd = 2;
            }
            try {
                text.setSelectionRange(selectionStart, selectionEnd);
            } catch (e) {
            }
            inComposition = false;
        }
        function resetValue() {
            if (inComposition) return;
            text.value = PLACEHOLDER;
            if (useragent.isWebKit) syncValue.schedule();
        }
        useragent.isWebKit || host.addEventListener('changeSelection', function() {
            if (host.selection.isEmpty() != isSelectionEmpty) {
                isSelectionEmpty = !isSelectionEmpty;
                syncSelection.schedule();
            }
        });
        resetValue();
        if (isFocused) host.onFocus();
        var isAllSelected = function(text1) {
            return text1.selectionStart === 0 && text1.selectionEnd === text1.value.length;
        };
        var onSelect = function(e) {
            if (copied) copied = false;
            else if (isAllSelected(text)) {
                host.selectAll();
                resetSelection();
            } else if (inputHandler) resetSelection(host.selection.isEmpty());
        };
        var inputHandler = null;
        this.setInputHandler = function(cb) {
            inputHandler = cb;
        };
        this.getInputHandler = function() {
            return inputHandler;
        };
        var afterContextMenu = false;
        var sendText = function(data) {
            if (inputHandler) {
                data = inputHandler(data);
                inputHandler = null;
            }
            if (pasted) {
                resetSelection();
                if (data) host.onPaste(data);
                pasted = false;
            } else if (data == PLACEHOLDER.charAt(0)) {
                if (afterContextMenu) host.execCommand("del", {
                    source: "ace"
                });
                else host.execCommand("backspace", {
                    source: "ace"
                });
            } else {
                if (data.substring(0, 2) == PLACEHOLDER) data = data.substr(2);
                else if (data.charAt(0) == PLACEHOLDER.charAt(0)) data = data.substr(1);
                else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0)) data = data.slice(0, -1);
                if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0)) data = data.slice(0, -1);
                if (data) host.onTextInput(data);
            }
            if (afterContextMenu) afterContextMenu = false;
        };
        var onInput = function(e) {
            if (inComposition) return;
            var data = text.value;
            sendText(data);
            resetValue();
        };
        var handleClipboardData = function(e, data, forceIEMime) {
            var clipboardData = e.clipboardData || window.clipboardData;
            if (!clipboardData || BROKEN_SETDATA) return;
            var mime = USE_IE_MIME_TYPE || forceIEMime ? "Text" : "text/plain";
            try {
                if (data) return clipboardData.setData(mime, data) !== false;
                else return clipboardData.getData(mime);
            } catch (e1) {
                if (!forceIEMime) return handleClipboardData(e1, data, true);
            }
        };
        var doCopy = function(e, isCut) {
            var data = host.getCopyText();
            if (!data) return event.preventDefault(e);
            if (handleClipboardData(e, data)) {
                isCut ? host.onCut() : host.onCopy();
                event.preventDefault(e);
            } else {
                copied = true;
                text.value = data;
                text.select();
                setTimeout(function() {
                    copied = false;
                    resetValue();
                    resetSelection();
                    isCut ? host.onCut() : host.onCopy();
                });
            }
        };
        var onCut = function(e) {
            doCopy(e, true);
        };
        var onCopy = function(e) {
            doCopy(e, false);
        };
        var onPaste = function(e) {
            var data = handleClipboardData(e);
            if (typeof data == "string") {
                if (data) host.onPaste(data, e);
                if (useragent.isIE) setTimeout(resetSelection);
                event.preventDefault(e);
            } else {
                text.value = "";
                pasted = true;
            }
        };
        event.addCommandKeyListener(text, host.onCommandKey.bind(host));
        event.addListener(text, "select", onSelect);
        event.addListener(text, "input", onInput);
        event.addListener(text, "cut", onCut);
        event.addListener(text, "copy", onCopy);
        event.addListener(text, "paste", onPaste);
        if (!('oncut' in text) || !('oncopy' in text) || !('onpaste' in text)) event.addListener(parentNode, "keydown", function(e) {
            if (useragent.isMac && !e.metaKey || !e.ctrlKey) return;
            switch(e.keyCode){
                case 67:
                    onCopy(e);
                    break;
                case 86:
                    onPaste(e);
                    break;
                case 88:
                    onCut(e);
                    break;
            }
        });
        var onCompositionStart = function(e) {
            if (inComposition || !host.onCompositionStart || host.$readOnly) return;
            inComposition = {
            };
            inComposition.canUndo = host.session.$undoManager;
            host.onCompositionStart();
            setTimeout(onCompositionUpdate, 0);
            host.on("mousedown", onCompositionEnd);
            if (inComposition.canUndo && !host.selection.isEmpty()) {
                host.insert("");
                host.session.markUndoGroup();
                host.selection.clearSelection();
            }
            host.session.markUndoGroup();
        };
        var onCompositionUpdate = function() {
            if (!inComposition || !host.onCompositionUpdate || host.$readOnly) return;
            var val = text.value.replace(/\u2028/g, "");
            if (inComposition.lastValue === val) return;
            host.onCompositionUpdate(val);
            if (inComposition.lastValue) host.undo();
            if (inComposition.canUndo) inComposition.lastValue = val;
            if (inComposition.lastValue) {
                var r = host.selection.getRange();
                host.insert(inComposition.lastValue);
                host.session.markUndoGroup();
                inComposition.range = host.selection.getRange();
                host.selection.setRange(r);
                host.selection.clearSelection();
            }
        };
        var onCompositionEnd = function(e) {
            if (!host.onCompositionEnd || host.$readOnly) return;
            var c = inComposition;
            inComposition = false;
            var timer = setTimeout(function() {
                timer = null;
                var str = text.value.replace(/\u2028/g, "");
                if (inComposition) return;
                else if (str == c.lastValue) resetValue();
                else if (!c.lastValue && str) {
                    resetValue();
                    sendText(str);
                }
            });
            inputHandler = function compositionInputHandler(str) {
                if (timer) clearTimeout(timer);
                str = str.replace(/\u2028/g, "");
                if (str == c.lastValue) return "";
                if (c.lastValue && timer) host.undo();
                return str;
            };
            host.onCompositionEnd();
            host.removeListener("mousedown", onCompositionEnd);
            if (e.type == "compositionend" && c.range) host.selection.setRange(c.range);
            var needsOnInput = !!useragent.isChrome && useragent.isChrome >= 53 || !!useragent.isWebKit && useragent.isWebKit >= 603;
            if (needsOnInput) onInput();
        };
        var syncComposition = lang.delayedCall(onCompositionUpdate, 50);
        event.addListener(text, "compositionstart", onCompositionStart);
        if (useragent.isGecko) event.addListener(text, "text", function() {
            syncComposition.schedule();
        });
        else {
            event.addListener(text, "keyup", function() {
                syncComposition.schedule();
            });
            event.addListener(text, "keydown", function() {
                syncComposition.schedule();
            });
        }
        event.addListener(text, "compositionend", onCompositionEnd);
        this.getElement = function() {
            return text;
        };
        this.setReadOnly = function(readOnly) {
            text.readOnly = readOnly;
        };
        this.onContextMenu = function(e) {
            afterContextMenu = true;
            resetSelection(host.selection.isEmpty());
            host._emit("nativecontextmenu", {
                target: host,
                domEvent: e
            });
            this.moveToMouse(e, true);
        };
        this.moveToMouse = function(e, bringToFront) {
            if (!tempStyle) tempStyle = text.style.cssText;
            text.style.cssText = (bringToFront ? "z-index:100000;" : "") + "height:" + text.style.height + ";" + (useragent.isIE ? "opacity:0.1;" : "");
            var rect = host.container.getBoundingClientRect();
            var style = dom.computedStyle(host.container);
            var top = rect.top + (parseInt(style.borderTopWidth) || 0);
            var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);
            var maxTop = rect.bottom - top - text.clientHeight - 2;
            var move = function(e1) {
                text.style.left = e1.clientX - left - 2 + "px";
                text.style.top = Math.min(e1.clientY - top - 2, maxTop) + "px";
            };
            move(e);
            if (e.type != "mousedown") return;
            if (host.renderer.$keepTextAreaAtCursor) host.renderer.$keepTextAreaAtCursor = null;
            clearTimeout(closeTimeout);
            if (useragent.isWin) event.capture(host.container, move, onContextMenuClose);
        };
        this.onContextMenuClose = onContextMenuClose;
        var closeTimeout;
        function onContextMenuClose() {
            clearTimeout(closeTimeout);
            closeTimeout = setTimeout(function() {
                if (tempStyle) {
                    text.style.cssText = tempStyle;
                    tempStyle = '';
                }
                if (host.renderer.$keepTextAreaAtCursor == null) {
                    host.renderer.$keepTextAreaAtCursor = true;
                    host.renderer.$moveTextAreaToCursor();
                }
            }, 0);
        }
        var onContextMenu = function(e) {
            host.textInput.onContextMenu(e);
            onContextMenuClose();
        };
        event.addListener(text, "mouseup", onContextMenu);
        event.addListener(text, "mousedown", function(e) {
            e.preventDefault();
            onContextMenuClose();
        });
        event.addListener(host.renderer.scroller, "contextmenu", onContextMenu);
        event.addListener(text, "contextmenu", onContextMenu);
    };
    exports.TextInput = TextInput;
});
ace.define("ace/mouse/default_handlers", [
    "require",
    "exports",
    "module",
    "ace/lib/dom",
    "ace/lib/event",
    "ace/lib/useragent"
], function(acequire, exports, module) {
    var dom = acequire("../lib/dom");
    var event = acequire("../lib/event");
    var useragent = acequire("../lib/useragent");
    var DRAG_OFFSET = 0; // pixels
    var SCROLL_COOLDOWN_T = 250; // milliseconds
    function DefaultHandlers(mouseHandler) {
        mouseHandler.$clickSelection = null;
        var editor = mouseHandler.editor;
        editor.setDefaultHandler("mousedown", this.onMouseDown.bind(mouseHandler));
        editor.setDefaultHandler("dblclick", this.onDoubleClick.bind(mouseHandler));
        editor.setDefaultHandler("tripleclick", this.onTripleClick.bind(mouseHandler));
        editor.setDefaultHandler("quadclick", this.onQuadClick.bind(mouseHandler));
        editor.setDefaultHandler("mousewheel", this.onMouseWheel.bind(mouseHandler));
        editor.setDefaultHandler("touchmove", this.onTouchMove.bind(mouseHandler));
        var exports1 = [
            "select",
            "startSelect",
            "selectEnd",
            "selectAllEnd",
            "selectByWordsEnd",
            "selectByLinesEnd",
            "dragWait",
            "dragWaitEnd",
            "focusWait"
        ];
        exports1.forEach(function(x) {
            mouseHandler[x] = this[x];
        }, this);
        mouseHandler.selectByLines = this.extendSelectionBy.bind(mouseHandler, "getLineRange");
        mouseHandler.selectByWords = this.extendSelectionBy.bind(mouseHandler, "getWordRange");
    }
    (function() {
        this.onMouseDown = function(ev) {
            var inSelection = ev.inSelection();
            var pos = ev.getDocumentPosition();
            this.mousedownEvent = ev;
            var editor = this.editor;
            var button = ev.getButton();
            if (button !== 0) {
                var selectionRange = editor.getSelectionRange();
                var selectionEmpty = selectionRange.isEmpty();
                editor.$blockScrolling++;
                if (selectionEmpty || button == 1) editor.selection.moveToPosition(pos);
                editor.$blockScrolling--;
                if (button == 2) {
                    editor.textInput.onContextMenu(ev.domEvent);
                    if (!useragent.isMozilla) ev.preventDefault();
                }
                return;
            }
            this.mousedownEvent.time = Date.now();
            if (inSelection && !editor.isFocused()) {
                editor.focus();
                if (this.$focusTimout && !this.$clickSelection && !editor.inMultiSelectMode) {
                    this.setState("focusWait");
                    this.captureMouse(ev);
                    return;
                }
            }
            this.captureMouse(ev);
            this.startSelect(pos, ev.domEvent._clicks > 1);
            return ev.preventDefault();
        };
        this.startSelect = function(pos, waitForClickSelection) {
            pos = pos || this.editor.renderer.screenToTextCoordinates(this.x, this.y);
            var editor = this.editor;
            editor.$blockScrolling++;
            if (this.mousedownEvent.getShiftKey()) editor.selection.selectToPosition(pos);
            else if (!waitForClickSelection) editor.selection.moveToPosition(pos);
            if (!waitForClickSelection) this.select();
            if (editor.renderer.scroller.setCapture) editor.renderer.scroller.setCapture();
            editor.setStyle("ace_selecting");
            this.setState("select");
            editor.$blockScrolling--;
        };
        this.select = function() {
            var anchor, editor = this.editor;
            var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);
            editor.$blockScrolling++;
            if (this.$clickSelection) {
                var cmp = this.$clickSelection.comparePoint(cursor);
                if (cmp == -1) anchor = this.$clickSelection.end;
                else if (cmp == 1) anchor = this.$clickSelection.start;
                else {
                    var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);
                    cursor = orientedRange.cursor;
                    anchor = orientedRange.anchor;
                }
                editor.selection.setSelectionAnchor(anchor.row, anchor.column);
            }
            editor.selection.selectToPosition(cursor);
            editor.$blockScrolling--;
            editor.renderer.scrollCursorIntoView();
        };
        this.extendSelectionBy = function(unitName) {
            var anchor, editor = this.editor;
            var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);
            var range = editor.selection[unitName](cursor.row, cursor.column);
            editor.$blockScrolling++;
            if (this.$clickSelection) {
                var cmpStart = this.$clickSelection.comparePoint(range.start);
                var cmpEnd = this.$clickSelection.comparePoint(range.end);
                if (cmpStart == -1 && cmpEnd <= 0) {
                    anchor = this.$clickSelection.end;
                    if (range.end.row != cursor.row || range.end.column != cursor.column) cursor = range.start;
                } else if (cmpEnd == 1 && cmpStart >= 0) {
                    anchor = this.$clickSelection.start;
                    if (range.start.row != cursor.row || range.start.column != cursor.column) cursor = range.end;
                } else if (cmpStart == -1 && cmpEnd == 1) {
                    cursor = range.end;
                    anchor = range.start;
                } else {
                    var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);
                    cursor = orientedRange.cursor;
                    anchor = orientedRange.anchor;
                }
                editor.selection.setSelectionAnchor(anchor.row, anchor.column);
            }
            editor.selection.selectToPosition(cursor);
            editor.$blockScrolling--;
            editor.renderer.scrollCursorIntoView();
        };
        this.selectEnd = this.selectAllEnd = this.selectByWordsEnd = this.selectByLinesEnd = function() {
            this.$clickSelection = null;
            this.editor.unsetStyle("ace_selecting");
            if (this.editor.renderer.scroller.releaseCapture) this.editor.renderer.scroller.releaseCapture();
        };
        this.focusWait = function() {
            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);
            var time = Date.now();
            if (distance > DRAG_OFFSET || time - this.mousedownEvent.time > this.$focusTimout) this.startSelect(this.mousedownEvent.getDocumentPosition());
        };
        this.onDoubleClick = function(ev) {
            var pos = ev.getDocumentPosition();
            var editor = this.editor;
            var session = editor.session;
            var range = session.getBracketRange(pos);
            if (range) {
                if (range.isEmpty()) {
                    range.start.column--;
                    range.end.column++;
                }
                this.setState("select");
            } else {
                range = editor.selection.getWordRange(pos.row, pos.column);
                this.setState("selectByWords");
            }
            this.$clickSelection = range;
            this.select();
        };
        this.onTripleClick = function(ev) {
            var pos = ev.getDocumentPosition();
            var editor = this.editor;
            this.setState("selectByLines");
            var range = editor.getSelectionRange();
            if (range.isMultiLine() && range.contains(pos.row, pos.column)) {
                this.$clickSelection = editor.selection.getLineRange(range.start.row);
                this.$clickSelection.end = editor.selection.getLineRange(range.end.row).end;
            } else this.$clickSelection = editor.selection.getLineRange(pos.row);
            this.select();
        };
        this.onQuadClick = function(ev) {
            var editor = this.editor;
            editor.selectAll();
            this.$clickSelection = editor.getSelectionRange();
            this.setState("selectAll");
        };
        this.onMouseWheel = function(ev) {
            if (ev.getAccelKey()) return;
            if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {
                ev.wheelX = ev.wheelY;
                ev.wheelY = 0;
            }
            var editor = this.editor;
            if (!this.$lastScroll) this.$lastScroll = {
                t: 0,
                vx: 0,
                vy: 0,
                allowed: 0
            };
            var prevScroll = this.$lastScroll;
            var t = ev.domEvent.timeStamp;
            var dt = t - prevScroll.t;
            var vx = ev.wheelX / dt;
            var vy = ev.wheelY / dt;
            if (dt < SCROLL_COOLDOWN_T) {
                vx = (vx + prevScroll.vx) / 2;
                vy = (vy + prevScroll.vy) / 2;
            }
            var direction = Math.abs(vx / vy);
            var canScroll = false;
            if (direction >= 1 && editor.renderer.isScrollableBy(ev.wheelX * ev.speed, 0)) canScroll = true;
            if (direction <= 1 && editor.renderer.isScrollableBy(0, ev.wheelY * ev.speed)) canScroll = true;
            if (canScroll) prevScroll.allowed = t;
            else if (t - prevScroll.allowed < SCROLL_COOLDOWN_T) {
                var isSlower = Math.abs(vx) <= 1.1 * Math.abs(prevScroll.vx) && Math.abs(vy) <= 1.1 * Math.abs(prevScroll.vy);
                if (isSlower) {
                    canScroll = true;
                    prevScroll.allowed = t;
                } else prevScroll.allowed = 0;
            }
            prevScroll.t = t;
            prevScroll.vx = vx;
            prevScroll.vy = vy;
            if (canScroll) {
                editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);
                return ev.stop();
            }
        };
        this.onTouchMove = function(ev) {
            this.editor._emit("mousewheel", ev);
        };
    }).call(DefaultHandlers.prototype);
    exports.DefaultHandlers = DefaultHandlers;
    function calcDistance(ax, ay, bx, by) {
        return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));
    }
    function calcRangeOrientation(range, cursor) {
        if (range.start.row == range.end.row) var cmp = 2 * cursor.column - range.start.column - range.end.column;
        else if (range.start.row == range.end.row - 1 && !range.start.column && !range.end.column) var cmp = cursor.column - 4;
        else var cmp = 2 * cursor.row - range.start.row - range.end.row;
        if (cmp < 0) return {
            cursor: range.start,
            anchor: range.end
        };
        else return {
            cursor: range.end,
            anchor: range.start
        };
    }
});
ace.define("ace/tooltip", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/dom"
], function(acequire, exports, module) {
    var oop = acequire("./lib/oop");
    var dom = acequire("./lib/dom");
    function Tooltip(parentNode) {
        this.isOpen = false;
        this.$element = null;
        this.$parentNode = parentNode;
    }
    (function() {
        this.$init = function() {
            this.$element = dom.createElement("div");
            this.$element.className = "ace_tooltip";
            this.$element.style.display = "none";
            this.$parentNode.appendChild(this.$element);
            return this.$element;
        };
        this.getElement = function() {
            return this.$element || this.$init();
        };
        this.setText = function(text) {
            dom.setInnerText(this.getElement(), text);
        };
        this.setHtml = function(html) {
            this.getElement().innerHTML = html;
        };
        this.setPosition = function(x, y) {
            this.getElement().style.left = x + "px";
            this.getElement().style.top = y + "px";
        };
        this.setClassName = function(className) {
            dom.addCssClass(this.getElement(), className);
        };
        this.show = function(text, x, y) {
            if (text != null) this.setText(text);
            if (x != null && y != null) this.setPosition(x, y);
            if (!this.isOpen) {
                this.getElement().style.display = "block";
                this.isOpen = true;
            }
        };
        this.hide = function() {
            if (this.isOpen) {
                this.getElement().style.display = "none";
                this.isOpen = false;
            }
        };
        this.getHeight = function() {
            return this.getElement().offsetHeight;
        };
        this.getWidth = function() {
            return this.getElement().offsetWidth;
        };
        this.destroy = function() {
            this.isOpen = false;
            if (this.$element && this.$element.parentNode) this.$element.parentNode.removeChild(this.$element);
        };
    }).call(Tooltip.prototype);
    exports.Tooltip = Tooltip;
});
ace.define("ace/mouse/default_gutter_handler", [
    "require",
    "exports",
    "module",
    "ace/lib/dom",
    "ace/lib/oop",
    "ace/lib/event",
    "ace/tooltip"
], function(acequire, exports, module) {
    var dom = acequire("../lib/dom");
    var oop = acequire("../lib/oop");
    var event = acequire("../lib/event");
    var Tooltip = acequire("../tooltip").Tooltip;
    function GutterHandler(mouseHandler) {
        var editor = mouseHandler.editor;
        var gutter = editor.renderer.$gutterLayer;
        var tooltip = new GutterTooltip(editor.container);
        mouseHandler.editor.setDefaultHandler("guttermousedown", function(e) {
            if (!editor.isFocused() || e.getButton() != 0) return;
            var gutterRegion = gutter.getRegion(e);
            if (gutterRegion == "foldWidgets") return;
            var row = e.getDocumentPosition().row;
            var selection = editor.session.selection;
            if (e.getShiftKey()) selection.selectTo(row, 0);
            else {
                if (e.domEvent.detail == 2) {
                    editor.selectAll();
                    return e.preventDefault();
                }
                mouseHandler.$clickSelection = editor.selection.getLineRange(row);
            }
            mouseHandler.setState("selectByLines");
            mouseHandler.captureMouse(e);
            return e.preventDefault();
        });
        var tooltipTimeout, mouseEvent, tooltipAnnotation;
        function showTooltip() {
            var row = mouseEvent.getDocumentPosition().row;
            var annotation = gutter.$annotations[row];
            if (!annotation) return hideTooltip();
            var maxRow = editor.session.getLength();
            if (row == maxRow) {
                var screenRow = editor.renderer.pixelToScreenCoordinates(0, mouseEvent.y).row;
                var pos = mouseEvent.$pos;
                if (screenRow > editor.session.documentToScreenRow(pos.row, pos.column)) return hideTooltip();
            }
            if (tooltipAnnotation == annotation) return;
            tooltipAnnotation = annotation.text.join("<br/>");
            tooltip.setHtml(tooltipAnnotation);
            tooltip.show();
            editor._signal("showGutterTooltip", tooltip);
            editor.on("mousewheel", hideTooltip);
            if (mouseHandler.$tooltipFollowsMouse) moveTooltip(mouseEvent);
            else {
                var gutterElement = mouseEvent.domEvent.target;
                var rect = gutterElement.getBoundingClientRect();
                var style = tooltip.getElement().style;
                style.left = rect.right + "px";
                style.top = rect.bottom + "px";
            }
        }
        function hideTooltip() {
            if (tooltipTimeout) tooltipTimeout = clearTimeout(tooltipTimeout);
            if (tooltipAnnotation) {
                tooltip.hide();
                tooltipAnnotation = null;
                editor._signal("hideGutterTooltip", tooltip);
                editor.removeEventListener("mousewheel", hideTooltip);
            }
        }
        function moveTooltip(e) {
            tooltip.setPosition(e.x, e.y);
        }
        mouseHandler.editor.setDefaultHandler("guttermousemove", function(e) {
            var target = e.domEvent.target || e.domEvent.srcElement;
            if (dom.hasCssClass(target, "ace_fold-widget")) return hideTooltip();
            if (tooltipAnnotation && mouseHandler.$tooltipFollowsMouse) moveTooltip(e);
            mouseEvent = e;
            if (tooltipTimeout) return;
            tooltipTimeout = setTimeout(function() {
                tooltipTimeout = null;
                if (mouseEvent && !mouseHandler.isMousePressed) showTooltip();
                else hideTooltip();
            }, 50);
        });
        event.addListener(editor.renderer.$gutter, "mouseout", function(e) {
            mouseEvent = null;
            if (!tooltipAnnotation || tooltipTimeout) return;
            tooltipTimeout = setTimeout(function() {
                tooltipTimeout = null;
                hideTooltip();
            }, 50);
        });
        editor.on("changeSession", hideTooltip);
    }
    function GutterTooltip(parentNode) {
        Tooltip.call(this, parentNode);
    }
    oop.inherits(GutterTooltip, Tooltip);
    (function() {
        this.setPosition = function(x, y) {
            var windowWidth = window.innerWidth || document.documentElement.clientWidth;
            var windowHeight = window.innerHeight || document.documentElement.clientHeight;
            var width = this.getWidth();
            var height = this.getHeight();
            x += 15;
            y += 15;
            if (x + width > windowWidth) x -= x + width - windowWidth;
            if (y + height > windowHeight) y -= 20 + height;
            Tooltip.prototype.setPosition.call(this, x, y);
        };
    }).call(GutterTooltip.prototype);
    exports.GutterHandler = GutterHandler;
});
ace.define("ace/mouse/mouse_event", [
    "require",
    "exports",
    "module",
    "ace/lib/event",
    "ace/lib/useragent"
], function(acequire, exports, module) {
    var event = acequire("../lib/event");
    var useragent = acequire("../lib/useragent");
    var MouseEvent1 = exports.MouseEvent = function(domEvent, editor) {
        this.domEvent = domEvent;
        this.editor = editor;
        this.x = this.clientX = domEvent.clientX;
        this.y = this.clientY = domEvent.clientY;
        this.$pos = null;
        this.$inSelection = null;
        this.propagationStopped = false;
        this.defaultPrevented = false;
    };
    (function() {
        this.stopPropagation = function() {
            event.stopPropagation(this.domEvent);
            this.propagationStopped = true;
        };
        this.preventDefault = function() {
            event.preventDefault(this.domEvent);
            this.defaultPrevented = true;
        };
        this.stop = function() {
            this.stopPropagation();
            this.preventDefault();
        };
        this.getDocumentPosition = function() {
            if (this.$pos) return this.$pos;
            this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);
            return this.$pos;
        };
        this.inSelection = function() {
            if (this.$inSelection !== null) return this.$inSelection;
            var editor = this.editor;
            var selectionRange = editor.getSelectionRange();
            if (selectionRange.isEmpty()) this.$inSelection = false;
            else {
                var pos = this.getDocumentPosition();
                this.$inSelection = selectionRange.contains(pos.row, pos.column);
            }
            return this.$inSelection;
        };
        this.getButton = function() {
            return event.getButton(this.domEvent);
        };
        this.getShiftKey = function() {
            return this.domEvent.shiftKey;
        };
        this.getAccelKey = useragent.isMac ? function() {
            return this.domEvent.metaKey;
        } : function() {
            return this.domEvent.ctrlKey;
        };
    }).call(MouseEvent1.prototype);
});
ace.define("ace/mouse/dragdrop_handler", [
    "require",
    "exports",
    "module",
    "ace/lib/dom",
    "ace/lib/event",
    "ace/lib/useragent"
], function(acequire, exports, module) {
    var dom = acequire("../lib/dom");
    var event = acequire("../lib/event");
    var useragent = acequire("../lib/useragent");
    var AUTOSCROLL_DELAY = 200;
    var SCROLL_CURSOR_DELAY = 200;
    var SCROLL_CURSOR_HYSTERESIS = 5;
    function DragdropHandler(mouseHandler) {
        var editor = mouseHandler.editor;
        var blankImage = dom.createElement("img");
        blankImage.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
        if (useragent.isOpera) blankImage.style.cssText = "width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;";
        var exports1 = [
            "dragWait",
            "dragWaitEnd",
            "startDrag",
            "dragReadyEnd",
            "onMouseDrag"
        ];
        exports1.forEach(function(x) {
            mouseHandler[x] = this[x];
        }, this);
        editor.addEventListener("mousedown", this.onMouseDown.bind(mouseHandler));
        var mouseTarget = editor.container;
        var dragSelectionMarker, x, y;
        var timerId, range;
        var dragCursor, counter = 0;
        var dragOperation;
        var isInternal;
        var autoScrollStartTime;
        var cursorMovedTime;
        var cursorPointOnCaretMoved;
        this.onDragStart = function(e) {
            if (this.cancelDrag || !mouseTarget.draggable) {
                var self = this;
                setTimeout(function() {
                    self.startSelect();
                    self.captureMouse(e);
                }, 0);
                return e.preventDefault();
            }
            range = editor.getSelectionRange();
            var dataTransfer = e.dataTransfer;
            dataTransfer.effectAllowed = editor.getReadOnly() ? "copy" : "copyMove";
            if (useragent.isOpera) {
                editor.container.appendChild(blankImage);
                blankImage.scrollTop = 0;
            }
            dataTransfer.setDragImage && dataTransfer.setDragImage(blankImage, 0, 0);
            if (useragent.isOpera) editor.container.removeChild(blankImage);
            dataTransfer.clearData();
            dataTransfer.setData("Text", editor.session.getTextRange());
            isInternal = true;
            this.setState("drag");
        };
        this.onDragEnd = function(e) {
            mouseTarget.draggable = false;
            isInternal = false;
            this.setState(null);
            if (!editor.getReadOnly()) {
                var dropEffect = e.dataTransfer.dropEffect;
                if (!dragOperation && dropEffect == "move") editor.session.remove(editor.getSelectionRange());
                editor.renderer.$cursorLayer.setBlinking(true);
            }
            this.editor.unsetStyle("ace_dragging");
            this.editor.renderer.setCursorStyle("");
        };
        this.onDragEnter = function(e) {
            if (editor.getReadOnly() || !canAccept(e.dataTransfer)) return;
            x = e.clientX;
            y = e.clientY;
            if (!dragSelectionMarker) addDragMarker();
            counter++;
            e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);
            return event.preventDefault(e);
        };
        this.onDragOver = function(e) {
            if (editor.getReadOnly() || !canAccept(e.dataTransfer)) return;
            x = e.clientX;
            y = e.clientY;
            if (!dragSelectionMarker) {
                addDragMarker();
                counter++;
            }
            if (onMouseMoveTimer !== null) onMouseMoveTimer = null;
            e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);
            return event.preventDefault(e);
        };
        this.onDragLeave = function(e) {
            counter--;
            if (counter <= 0 && dragSelectionMarker) {
                clearDragMarker();
                dragOperation = null;
                return event.preventDefault(e);
            }
        };
        this.onDrop = function(e) {
            if (!dragCursor) return;
            var dataTransfer = e.dataTransfer;
            if (isInternal) switch(dragOperation){
                case "move":
                    if (range.contains(dragCursor.row, dragCursor.column)) range = {
                        start: dragCursor,
                        end: dragCursor
                    };
                    else range = editor.moveText(range, dragCursor);
                    break;
                case "copy":
                    range = editor.moveText(range, dragCursor, true);
                    break;
            }
            else {
                var dropData = dataTransfer.getData('Text');
                range = {
                    start: dragCursor,
                    end: editor.session.insert(dragCursor, dropData)
                };
                editor.focus();
                dragOperation = null;
            }
            clearDragMarker();
            return event.preventDefault(e);
        };
        event.addListener(mouseTarget, "dragstart", this.onDragStart.bind(mouseHandler));
        event.addListener(mouseTarget, "dragend", this.onDragEnd.bind(mouseHandler));
        event.addListener(mouseTarget, "dragenter", this.onDragEnter.bind(mouseHandler));
        event.addListener(mouseTarget, "dragover", this.onDragOver.bind(mouseHandler));
        event.addListener(mouseTarget, "dragleave", this.onDragLeave.bind(mouseHandler));
        event.addListener(mouseTarget, "drop", this.onDrop.bind(mouseHandler));
        function scrollCursorIntoView(cursor, prevCursor) {
            var now = Date.now();
            var vMovement = !prevCursor || cursor.row != prevCursor.row;
            var hMovement = !prevCursor || cursor.column != prevCursor.column;
            if (!cursorMovedTime || vMovement || hMovement) {
                editor.$blockScrolling += 1;
                editor.moveCursorToPosition(cursor);
                editor.$blockScrolling -= 1;
                cursorMovedTime = now;
                cursorPointOnCaretMoved = {
                    x: x,
                    y: y
                };
            } else {
                var distance = calcDistance(cursorPointOnCaretMoved.x, cursorPointOnCaretMoved.y, x, y);
                if (distance > SCROLL_CURSOR_HYSTERESIS) cursorMovedTime = null;
                else if (now - cursorMovedTime >= SCROLL_CURSOR_DELAY) {
                    editor.renderer.scrollCursorIntoView();
                    cursorMovedTime = null;
                }
            }
        }
        function autoScroll(cursor, prevCursor) {
            var now = Date.now();
            var lineHeight = editor.renderer.layerConfig.lineHeight;
            var characterWidth = editor.renderer.layerConfig.characterWidth;
            var editorRect = editor.renderer.scroller.getBoundingClientRect();
            var offsets = {
                x: {
                    left: x - editorRect.left,
                    right: editorRect.right - x
                },
                y: {
                    top: y - editorRect.top,
                    bottom: editorRect.bottom - y
                }
            };
            var nearestXOffset = Math.min(offsets.x.left, offsets.x.right);
            var nearestYOffset = Math.min(offsets.y.top, offsets.y.bottom);
            var scrollCursor = {
                row: cursor.row,
                column: cursor.column
            };
            if (nearestXOffset / characterWidth <= 2) scrollCursor.column += offsets.x.left < offsets.x.right ? -3 : 2;
            if (nearestYOffset / lineHeight <= 1) scrollCursor.row += offsets.y.top < offsets.y.bottom ? -1 : 1;
            var vScroll = cursor.row != scrollCursor.row;
            var hScroll = cursor.column != scrollCursor.column;
            var vMovement = !prevCursor || cursor.row != prevCursor.row;
            if (vScroll || hScroll && !vMovement) {
                if (!autoScrollStartTime) autoScrollStartTime = now;
                else if (now - autoScrollStartTime >= AUTOSCROLL_DELAY) editor.renderer.scrollCursorIntoView(scrollCursor);
            } else autoScrollStartTime = null;
        }
        function onDragInterval() {
            var prevCursor = dragCursor;
            dragCursor = editor.renderer.screenToTextCoordinates(x, y);
            scrollCursorIntoView(dragCursor, prevCursor);
            autoScroll(dragCursor, prevCursor);
        }
        function addDragMarker() {
            range = editor.selection.toOrientedRange();
            dragSelectionMarker = editor.session.addMarker(range, "ace_selection", editor.getSelectionStyle());
            editor.clearSelection();
            if (editor.isFocused()) editor.renderer.$cursorLayer.setBlinking(false);
            clearInterval(timerId);
            onDragInterval();
            timerId = setInterval(onDragInterval, 20);
            counter = 0;
            event.addListener(document, "mousemove", onMouseMove);
        }
        function clearDragMarker() {
            clearInterval(timerId);
            editor.session.removeMarker(dragSelectionMarker);
            dragSelectionMarker = null;
            editor.$blockScrolling += 1;
            editor.selection.fromOrientedRange(range);
            editor.$blockScrolling -= 1;
            if (editor.isFocused() && !isInternal) editor.renderer.$cursorLayer.setBlinking(!editor.getReadOnly());
            range = null;
            dragCursor = null;
            counter = 0;
            autoScrollStartTime = null;
            cursorMovedTime = null;
            event.removeListener(document, "mousemove", onMouseMove);
        }
        var onMouseMoveTimer = null;
        function onMouseMove() {
            if (onMouseMoveTimer == null) onMouseMoveTimer = setTimeout(function() {
                if (onMouseMoveTimer != null && dragSelectionMarker) clearDragMarker();
            }, 20);
        }
        function canAccept(dataTransfer) {
            var types = dataTransfer.types;
            return !types || Array.prototype.some.call(types, function(type) {
                return type == 'text/plain' || type == 'Text';
            });
        }
        function getDropEffect(e) {
            var copyAllowed = [
                'copy',
                'copymove',
                'all',
                'uninitialized'
            ];
            var moveAllowed = [
                'move',
                'copymove',
                'linkmove',
                'all',
                'uninitialized'
            ];
            var copyModifierState = useragent.isMac ? e.altKey : e.ctrlKey;
            var effectAllowed = "uninitialized";
            try {
                effectAllowed = e.dataTransfer.effectAllowed.toLowerCase();
            } catch (e1) {
            }
            var dropEffect = "none";
            if (copyModifierState && copyAllowed.indexOf(effectAllowed) >= 0) dropEffect = "copy";
            else if (moveAllowed.indexOf(effectAllowed) >= 0) dropEffect = "move";
            else if (copyAllowed.indexOf(effectAllowed) >= 0) dropEffect = "copy";
            return dropEffect;
        }
    }
    (function() {
        this.dragWait = function() {
            var interval = Date.now() - this.mousedownEvent.time;
            if (interval > this.editor.getDragDelay()) this.startDrag();
        };
        this.dragWaitEnd = function() {
            var target = this.editor.container;
            target.draggable = false;
            this.startSelect(this.mousedownEvent.getDocumentPosition());
            this.selectEnd();
        };
        this.dragReadyEnd = function(e) {
            this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly());
            this.editor.unsetStyle("ace_dragging");
            this.editor.renderer.setCursorStyle("");
            this.dragWaitEnd();
        };
        this.startDrag = function() {
            this.cancelDrag = false;
            var editor = this.editor;
            var target = editor.container;
            target.draggable = true;
            editor.renderer.$cursorLayer.setBlinking(false);
            editor.setStyle("ace_dragging");
            var cursorStyle = useragent.isWin ? "default" : "move";
            editor.renderer.setCursorStyle(cursorStyle);
            this.setState("dragReady");
        };
        this.onMouseDrag = function(e) {
            var target = this.editor.container;
            if (useragent.isIE && this.state == "dragReady") {
                var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);
                if (distance > 3) target.dragDrop();
            }
            if (this.state === "dragWait") {
                var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);
                if (distance > 0) {
                    target.draggable = false;
                    this.startSelect(this.mousedownEvent.getDocumentPosition());
                }
            }
        };
        this.onMouseDown = function(e) {
            if (!this.$dragEnabled) return;
            this.mousedownEvent = e;
            var editor = this.editor;
            var inSelection = e.inSelection();
            var button = e.getButton();
            var clickCount = e.domEvent.detail || 1;
            if (clickCount === 1 && button === 0 && inSelection) {
                if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey())) return;
                this.mousedownEvent.time = Date.now();
                var eventTarget = e.domEvent.target || e.domEvent.srcElement;
                if ("unselectable" in eventTarget) eventTarget.unselectable = "on";
                if (editor.getDragDelay()) {
                    if (useragent.isWebKit) {
                        this.cancelDrag = true;
                        var mouseTarget = editor.container;
                        mouseTarget.draggable = true;
                    }
                    this.setState("dragWait");
                } else this.startDrag();
                this.captureMouse(e, this.onMouseDrag.bind(this));
                e.defaultPrevented = true;
            }
        };
    }).call(DragdropHandler.prototype);
    function calcDistance(ax, ay, bx, by) {
        return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));
    }
    exports.DragdropHandler = DragdropHandler;
});
ace.define("ace/lib/net", [
    "require",
    "exports",
    "module",
    "ace/lib/dom"
], function(acequire, exports, module) {
    var dom = acequire("./dom");
    exports.get = function(url, callback) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', url, true);
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4) callback(xhr.responseText);
        };
        xhr.send(null);
    };
    exports.loadScript = function(path, callback) {
        var head = dom.getDocumentHead();
        var s = document.createElement('script');
        s.src = path;
        head.appendChild(s);
        s.onload = s.onreadystatechange = function(_, isAbort) {
            if (isAbort || !s.readyState || s.readyState == "loaded" || s.readyState == "complete") {
                s = s.onload = s.onreadystatechange = null;
                if (!isAbort) callback();
            }
        };
    };
    exports.qualifyURL = function(url) {
        var a = document.createElement('a');
        a.href = url;
        return a.href;
    };
});
ace.define("ace/lib/event_emitter", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    var EventEmitter = {
    };
    var stopPropagation = function() {
        this.propagationStopped = true;
    };
    var preventDefault = function() {
        this.defaultPrevented = true;
    };
    EventEmitter._emit = EventEmitter._dispatchEvent = function(eventName, e) {
        this._eventRegistry || (this._eventRegistry = {
        });
        this._defaultHandlers || (this._defaultHandlers = {
        });
        var listeners = this._eventRegistry[eventName] || [];
        var defaultHandler = this._defaultHandlers[eventName];
        if (!listeners.length && !defaultHandler) return;
        if (typeof e != "object" || !e) e = {
        };
        if (!e.type) e.type = eventName;
        if (!e.stopPropagation) e.stopPropagation = stopPropagation;
        if (!e.preventDefault) e.preventDefault = preventDefault;
        listeners = listeners.slice();
        for(var i = 0; i < listeners.length; i++){
            listeners[i](e, this);
            if (e.propagationStopped) break;
        }
        if (defaultHandler && !e.defaultPrevented) return defaultHandler(e, this);
    };
    EventEmitter._signal = function(eventName, e) {
        var listeners = (this._eventRegistry || {
        })[eventName];
        if (!listeners) return;
        listeners = listeners.slice();
        for(var i = 0; i < listeners.length; i++)listeners[i](e, this);
    };
    EventEmitter.once = function(eventName, callback) {
        var _self = this;
        callback && this.addEventListener(eventName, function newCallback() {
            _self.removeEventListener(eventName, newCallback);
            callback.apply(null, arguments);
        });
    };
    EventEmitter.setDefaultHandler = function(eventName, callback) {
        var handlers = this._defaultHandlers;
        if (!handlers) handlers = this._defaultHandlers = {
            _disabled_: {
            }
        };
        if (handlers[eventName]) {
            var old = handlers[eventName];
            var disabled = handlers._disabled_[eventName];
            if (!disabled) handlers._disabled_[eventName] = disabled = [];
            disabled.push(old);
            var i = disabled.indexOf(callback);
            if (i != -1) disabled.splice(i, 1);
        }
        handlers[eventName] = callback;
    };
    EventEmitter.removeDefaultHandler = function(eventName, callback) {
        var handlers = this._defaultHandlers;
        if (!handlers) return;
        var disabled = handlers._disabled_[eventName];
        if (handlers[eventName] == callback) {
            var old = handlers[eventName];
            if (disabled) this.setDefaultHandler(eventName, disabled.pop());
        } else if (disabled) {
            var i = disabled.indexOf(callback);
            if (i != -1) disabled.splice(i, 1);
        }
    };
    EventEmitter.on = EventEmitter.addEventListener = function(eventName, callback, capturing) {
        this._eventRegistry = this._eventRegistry || {
        };
        var listeners = this._eventRegistry[eventName];
        if (!listeners) listeners = this._eventRegistry[eventName] = [];
        if (listeners.indexOf(callback) == -1) listeners[capturing ? "unshift" : "push"](callback);
        return callback;
    };
    EventEmitter.off = EventEmitter.removeListener = EventEmitter.removeEventListener = function(eventName, callback) {
        this._eventRegistry = this._eventRegistry || {
        };
        var listeners = this._eventRegistry[eventName];
        if (!listeners) return;
        var index = listeners.indexOf(callback);
        if (index !== -1) listeners.splice(index, 1);
    };
    EventEmitter.removeAllListeners = function(eventName) {
        if (this._eventRegistry) this._eventRegistry[eventName] = [];
    };
    exports.EventEmitter = EventEmitter;
});
ace.define("ace/lib/app_config", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/event_emitter"
], function(acequire, exports, module) {
    var oop = acequire("./oop");
    var EventEmitter = acequire("./event_emitter").EventEmitter;
    var optionsProvider = {
        setOptions: function(optList) {
            Object.keys(optList).forEach(function(key) {
                this.setOption(key, optList[key]);
            }, this);
        },
        getOptions: function(optionNames) {
            var result = {
            };
            if (!optionNames) optionNames = Object.keys(this.$options);
            else if (!Array.isArray(optionNames)) {
                result = optionNames;
                optionNames = Object.keys(result);
            }
            optionNames.forEach(function(key) {
                result[key] = this.getOption(key);
            }, this);
            return result;
        },
        setOption: function(name, value) {
            if (this["$" + name] === value) return;
            var opt = this.$options[name];
            if (!opt) return warn('misspelled option "' + name + '"');
            if (opt.forwardTo) return this[opt.forwardTo] && this[opt.forwardTo].setOption(name, value);
            if (!opt.handlesSet) this["$" + name] = value;
            if (opt && opt.set) opt.set.call(this, value);
        },
        getOption: function(name) {
            var opt = this.$options[name];
            if (!opt) return warn('misspelled option "' + name + '"');
            if (opt.forwardTo) return this[opt.forwardTo] && this[opt.forwardTo].getOption(name);
            return opt && opt.get ? opt.get.call(this) : this["$" + name];
        }
    };
    function warn(message) {
        if (typeof console != "undefined" && console.warn) console.warn.apply(console, arguments);
    }
    function reportError(msg, data) {
        var e = new Error(msg);
        e.data = data;
        if (typeof console == "object" && console.error) console.error(e);
        setTimeout(function() {
            throw e;
        });
    }
    var AppConfig = function() {
        this.$defaultOptions = {
        };
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.defineOptions = function(obj, path, options) {
            if (!obj.$options) this.$defaultOptions[path] = obj.$options = {
            };
            Object.keys(options).forEach(function(key) {
                var opt = options[key];
                if (typeof opt == "string") opt = {
                    forwardTo: opt
                };
                opt.name || (opt.name = key);
                obj.$options[opt.name] = opt;
                if ("initialValue" in opt) obj["$" + opt.name] = opt.initialValue;
            });
            oop.implement(obj, optionsProvider);
            return this;
        };
        this.resetOptions = function(obj) {
            Object.keys(obj.$options).forEach(function(key) {
                var opt = obj.$options[key];
                if ("value" in opt) obj.setOption(key, opt.value);
            });
        };
        this.setDefaultValue = function(path, name, value) {
            var opts = this.$defaultOptions[path] || (this.$defaultOptions[path] = {
            });
            if (opts[name]) {
                if (opts.forwardTo) this.setDefaultValue(opts.forwardTo, name, value);
                else opts[name].value = value;
            }
        };
        this.setDefaultValues = function(path, optionHash) {
            Object.keys(optionHash).forEach(function(key) {
                this.setDefaultValue(path, key, optionHash[key]);
            }, this);
        };
        this.warn = warn;
        this.reportError = reportError;
    }).call(AppConfig.prototype);
    exports.AppConfig = AppConfig;
});
ace.define("ace/config", [
    "require",
    "exports",
    "module",
    "ace/lib/lang",
    "ace/lib/oop",
    "ace/lib/net",
    "ace/lib/app_config"
], function(acequire, exports, module) {
    var lang = acequire("./lib/lang");
    var oop = acequire("./lib/oop");
    var net = acequire("./lib/net");
    var AppConfig = acequire("./lib/app_config").AppConfig;
    module.exports = exports = new AppConfig();
    var global = function() {
        return this || typeof window != "undefined" && window;
    }();
    var options = {
        packaged: false,
        workerPath: null,
        modePath: null,
        themePath: null,
        basePath: "",
        suffix: ".js",
        $moduleUrls: {
        }
    };
    exports.get = function(key) {
        if (!options.hasOwnProperty(key)) throw new Error("Unknown config key: " + key);
        return options[key];
    };
    exports.set = function(key, value) {
        if (!options.hasOwnProperty(key)) throw new Error("Unknown config key: " + key);
        options[key] = value;
    };
    exports.all = function() {
        return lang.copyObject(options);
    };
    exports.moduleUrl = function(name, component) {
        if (options.$moduleUrls[name]) return options.$moduleUrls[name];
        var parts = name.split("/");
        component = component || parts[parts.length - 2] || "";
        var sep = component == "snippets" ? "/" : "-";
        var base = parts[parts.length - 1];
        if (component == "worker" && sep == "-") {
            var re = new RegExp("^" + component + "[\\-_]|[\\-_]" + component + "$", "g");
            base = base.replace(re, "");
        }
        if ((!base || base == component) && parts.length > 1) base = parts[parts.length - 2];
        var path = options[component + "Path"];
        if (path == null) path = options.basePath;
        else if (sep == "/") component = sep = "";
        if (path && path.slice(-1) != "/") path += "/";
        return path + component + sep + base + this.get("suffix");
    };
    exports.setModuleUrl = function(name, subst) {
        return options.$moduleUrls[name] = subst;
    };
    exports.$loading = {
    };
    exports.loadModule = function(moduleName, onLoad) {
        var module1, moduleType;
        if (Array.isArray(moduleName)) {
            moduleType = moduleName[0];
            moduleName = moduleName[1];
        }
        try {
            module1 = acequire(moduleName);
        } catch (e) {
        }
        if (module1 && !exports.$loading[moduleName]) return onLoad && onLoad(module1);
        if (!exports.$loading[moduleName]) exports.$loading[moduleName] = [];
        exports.$loading[moduleName].push(onLoad);
        if (exports.$loading[moduleName].length > 1) return;
        var afterLoad = function() {
            acequire([
                moduleName
            ], function(module2) {
                exports._emit("load.module", {
                    name: moduleName,
                    module: module2
                });
                var listeners = exports.$loading[moduleName];
                exports.$loading[moduleName] = null;
                listeners.forEach(function(onLoad1) {
                    onLoad1 && onLoad1(module2);
                });
            });
        };
        if (!exports.get("packaged")) return afterLoad();
        net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);
    };
    init(true);
    function init(packaged) {
        if (!global || !global.document) return;
        options.packaged = packaged || acequire.packaged || module.packaged || global.define && define.packaged;
        var scriptOptions = {
        };
        var scriptUrl = "";
        var currentScript = document.currentScript || document._currentScript; // native or polyfill
        var currentDocument = currentScript && currentScript.ownerDocument || document;
        var scripts = currentDocument.getElementsByTagName("script");
        for(var i = 0; i < scripts.length; i++){
            var script = scripts[i];
            var src = script.src || script.getAttribute("src");
            if (!src) continue;
            var attributes = script.attributes;
            for(var j = 0, l = attributes.length; j < l; j++){
                var attr = attributes[j];
                if (attr.name.indexOf("data-ace-") === 0) scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/, ""))] = attr.value;
            }
            var m = src.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);
            if (m) scriptUrl = m[1];
        }
        if (scriptUrl) {
            scriptOptions.base = scriptOptions.base || scriptUrl;
            scriptOptions.packaged = true;
        }
        scriptOptions.basePath = scriptOptions.base;
        scriptOptions.workerPath = scriptOptions.workerPath || scriptOptions.base;
        scriptOptions.modePath = scriptOptions.modePath || scriptOptions.base;
        scriptOptions.themePath = scriptOptions.themePath || scriptOptions.base;
        delete scriptOptions.base;
        for(var key in scriptOptions)if (typeof scriptOptions[key] !== "undefined") exports.set(key, scriptOptions[key]);
    }
    exports.init = init;
    function deHyphenate(str) {
        return str.replace(/-(.)/g, function(m, m1) {
            return m1.toUpperCase();
        });
    }
});
ace.define("ace/mouse/mouse_handler", [
    "require",
    "exports",
    "module",
    "ace/lib/event",
    "ace/lib/useragent",
    "ace/mouse/default_handlers",
    "ace/mouse/default_gutter_handler",
    "ace/mouse/mouse_event",
    "ace/mouse/dragdrop_handler",
    "ace/config"
], function(acequire, exports, module) {
    var event = acequire("../lib/event");
    var useragent = acequire("../lib/useragent");
    var DefaultHandlers = acequire("./default_handlers").DefaultHandlers;
    var DefaultGutterHandler = acequire("./default_gutter_handler").GutterHandler;
    var MouseEvent1 = acequire("./mouse_event").MouseEvent;
    var DragdropHandler = acequire("./dragdrop_handler").DragdropHandler;
    var config = acequire("../config");
    var MouseHandler = function(editor) {
        var _self = this;
        this.editor = editor;
        new DefaultHandlers(this);
        new DefaultGutterHandler(this);
        new DragdropHandler(this);
        var focusEditor = function(e) {
            var windowBlurred = !document.hasFocus || !document.hasFocus() || !editor.isFocused() && document.activeElement == (editor.textInput && editor.textInput.getElement());
            if (windowBlurred) window.focus();
            editor.focus();
        };
        var mouseTarget = editor.renderer.getMouseEventTarget();
        event.addListener(mouseTarget, "click", this.onMouseEvent.bind(this, "click"));
        event.addListener(mouseTarget, "mousemove", this.onMouseMove.bind(this, "mousemove"));
        event.addMultiMouseDownListener([
            mouseTarget,
            editor.renderer.scrollBarV && editor.renderer.scrollBarV.inner,
            editor.renderer.scrollBarH && editor.renderer.scrollBarH.inner,
            editor.textInput && editor.textInput.getElement()
        ].filter(Boolean), [
            400,
            300,
            250
        ], this, "onMouseEvent");
        event.addMouseWheelListener(editor.container, this.onMouseWheel.bind(this, "mousewheel"));
        event.addTouchMoveListener(editor.container, this.onTouchMove.bind(this, "touchmove"));
        var gutterEl = editor.renderer.$gutter;
        event.addListener(gutterEl, "mousedown", this.onMouseEvent.bind(this, "guttermousedown"));
        event.addListener(gutterEl, "click", this.onMouseEvent.bind(this, "gutterclick"));
        event.addListener(gutterEl, "dblclick", this.onMouseEvent.bind(this, "gutterdblclick"));
        event.addListener(gutterEl, "mousemove", this.onMouseEvent.bind(this, "guttermousemove"));
        event.addListener(mouseTarget, "mousedown", focusEditor);
        event.addListener(gutterEl, "mousedown", focusEditor);
        if (useragent.isIE && editor.renderer.scrollBarV) {
            event.addListener(editor.renderer.scrollBarV.element, "mousedown", focusEditor);
            event.addListener(editor.renderer.scrollBarH.element, "mousedown", focusEditor);
        }
        editor.on("mousemove", function(e) {
            if (_self.state || _self.$dragDelay || !_self.$dragEnabled) return;
            var character = editor.renderer.screenToTextCoordinates(e.x, e.y);
            var range = editor.session.selection.getRange();
            var renderer = editor.renderer;
            if (!range.isEmpty() && range.insideStart(character.row, character.column)) renderer.setCursorStyle("default");
            else renderer.setCursorStyle("");
        });
    };
    (function() {
        this.onMouseEvent = function(name, e) {
            this.editor._emit(name, new MouseEvent1(e, this.editor));
        };
        this.onMouseMove = function(name, e) {
            var listeners = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;
            if (!listeners || !listeners.length) return;
            this.editor._emit(name, new MouseEvent1(e, this.editor));
        };
        this.onMouseWheel = function(name, e) {
            var mouseEvent = new MouseEvent1(e, this.editor);
            mouseEvent.speed = this.$scrollSpeed * 2;
            mouseEvent.wheelX = e.wheelX;
            mouseEvent.wheelY = e.wheelY;
            this.editor._emit(name, mouseEvent);
        };
        this.onTouchMove = function(name, e) {
            var mouseEvent = new MouseEvent1(e, this.editor);
            mouseEvent.speed = 1; //this.$scrollSpeed * 2;
            mouseEvent.wheelX = e.wheelX;
            mouseEvent.wheelY = e.wheelY;
            this.editor._emit(name, mouseEvent);
        };
        this.setState = function(state) {
            this.state = state;
        };
        this.captureMouse = function(ev, mouseMoveHandler) {
            this.x = ev.x;
            this.y = ev.y;
            this.isMousePressed = true;
            var renderer = this.editor.renderer;
            if (renderer.$keepTextAreaAtCursor) renderer.$keepTextAreaAtCursor = null;
            var self = this;
            var onMouseMove = function(e) {
                if (!e) return;
                if (useragent.isWebKit && !e.which && self.releaseMouse) return self.releaseMouse();
                self.x = e.clientX;
                self.y = e.clientY;
                mouseMoveHandler && mouseMoveHandler(e);
                self.mouseEvent = new MouseEvent1(e, self.editor);
                self.$mouseMoved = true;
            };
            var onCaptureEnd = function(e) {
                clearInterval(timerId);
                onCaptureInterval();
                self[self.state + "End"] && self[self.state + "End"](e);
                self.state = "";
                if (renderer.$keepTextAreaAtCursor == null) {
                    renderer.$keepTextAreaAtCursor = true;
                    renderer.$moveTextAreaToCursor();
                }
                self.isMousePressed = false;
                self.$onCaptureMouseMove = self.releaseMouse = null;
                e && self.onMouseEvent("mouseup", e);
            };
            var onCaptureInterval = function() {
                self[self.state] && self[self.state]();
                self.$mouseMoved = false;
            };
            if (useragent.isOldIE && ev.domEvent.type == "dblclick") return setTimeout(function() {
                onCaptureEnd(ev);
            });
            self.$onCaptureMouseMove = onMouseMove;
            self.releaseMouse = event.capture(this.editor.container, onMouseMove, onCaptureEnd);
            var timerId = setInterval(onCaptureInterval, 20);
        };
        this.releaseMouse = null;
        this.cancelContextMenu = function() {
            var stop = (function(e) {
                if (e && e.domEvent && e.domEvent.type != "contextmenu") return;
                this.editor.off("nativecontextmenu", stop);
                if (e && e.domEvent) event.stopEvent(e.domEvent);
            }).bind(this);
            setTimeout(stop, 10);
            this.editor.on("nativecontextmenu", stop);
        };
    }).call(MouseHandler.prototype);
    config.defineOptions(MouseHandler.prototype, "mouseHandler", {
        scrollSpeed: {
            initialValue: 2
        },
        dragDelay: {
            initialValue: useragent.isMac ? 150 : 0
        },
        dragEnabled: {
            initialValue: true
        },
        focusTimout: {
            initialValue: 0
        },
        tooltipFollowsMouse: {
            initialValue: true
        }
    });
    exports.MouseHandler = MouseHandler;
});
ace.define("ace/mouse/fold_handler", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    function FoldHandler(editor) {
        editor.on("click", function(e) {
            var position = e.getDocumentPosition();
            var session = editor.session;
            var fold = session.getFoldAt(position.row, position.column, 1);
            if (fold) {
                if (e.getAccelKey()) session.removeFold(fold);
                else session.expandFold(fold);
                e.stop();
            }
        });
        editor.on("gutterclick", function(e) {
            var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);
            if (gutterRegion == "foldWidgets") {
                var row = e.getDocumentPosition().row;
                var session = editor.session;
                if (session.foldWidgets && session.foldWidgets[row]) editor.session.onFoldWidgetClick(row, e);
                if (!editor.isFocused()) editor.focus();
                e.stop();
            }
        });
        editor.on("gutterdblclick", function(e) {
            var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);
            if (gutterRegion == "foldWidgets") {
                var row = e.getDocumentPosition().row;
                var session = editor.session;
                var data = session.getParentFoldRangeData(row, true);
                var range = data.range || data.firstRange;
                if (range) {
                    row = range.start.row;
                    var fold = session.getFoldAt(row, session.getLine(row).length, 1);
                    if (fold) session.removeFold(fold);
                    else {
                        session.addFold("...", range);
                        editor.renderer.scrollCursorIntoView({
                            row: range.start.row,
                            column: 0
                        });
                    }
                }
                e.stop();
            }
        });
    }
    exports.FoldHandler = FoldHandler;
});
ace.define("ace/keyboard/keybinding", [
    "require",
    "exports",
    "module",
    "ace/lib/keys",
    "ace/lib/event"
], function(acequire, exports, module) {
    var keyUtil = acequire("../lib/keys");
    var event = acequire("../lib/event");
    var KeyBinding = function(editor) {
        this.$editor = editor;
        this.$data = {
            editor: editor
        };
        this.$handlers = [];
        this.setDefaultHandler(editor.commands);
    };
    (function() {
        this.setDefaultHandler = function(kb) {
            this.removeKeyboardHandler(this.$defaultHandler);
            this.$defaultHandler = kb;
            this.addKeyboardHandler(kb, 0);
        };
        this.setKeyboardHandler = function(kb) {
            var h = this.$handlers;
            if (h[h.length - 1] == kb) return;
            while(h[h.length - 1] && h[h.length - 1] != this.$defaultHandler)this.removeKeyboardHandler(h[h.length - 1]);
            this.addKeyboardHandler(kb, 1);
        };
        this.addKeyboardHandler = function(kb, pos) {
            if (!kb) return;
            if (typeof kb == "function" && !kb.handleKeyboard) kb.handleKeyboard = kb;
            var i = this.$handlers.indexOf(kb);
            if (i != -1) this.$handlers.splice(i, 1);
            if (pos == undefined) this.$handlers.push(kb);
            else this.$handlers.splice(pos, 0, kb);
            if (i == -1 && kb.attach) kb.attach(this.$editor);
        };
        this.removeKeyboardHandler = function(kb) {
            var i = this.$handlers.indexOf(kb);
            if (i == -1) return false;
            this.$handlers.splice(i, 1);
            kb.detach && kb.detach(this.$editor);
            return true;
        };
        this.getKeyboardHandler = function() {
            return this.$handlers[this.$handlers.length - 1];
        };
        this.getStatusText = function() {
            var data = this.$data;
            var editor = data.editor;
            return this.$handlers.map(function(h) {
                return h.getStatusText && h.getStatusText(editor, data) || "";
            }).filter(Boolean).join(" ");
        };
        this.$callKeyboardHandlers = function(hashId, keyString, keyCode, e) {
            var toExecute;
            var success = false;
            var commands = this.$editor.commands;
            for(var i = this.$handlers.length; i--;){
                toExecute = this.$handlers[i].handleKeyboard(this.$data, hashId, keyString, keyCode, e);
                if (!toExecute || !toExecute.command) continue;
                if (toExecute.command == "null") success = true;
                else success = commands.exec(toExecute.command, this.$editor, toExecute.args, e);
                if (success && e && hashId != -1 && toExecute.passEvent != true && toExecute.command.passEvent != true) event.stopEvent(e);
                if (success) break;
            }
            if (!success && hashId == -1) {
                toExecute = {
                    command: "insertstring"
                };
                success = commands.exec("insertstring", this.$editor, keyString);
            }
            if (success && this.$editor._signal) this.$editor._signal("keyboardActivity", toExecute);
            return success;
        };
        this.onCommandKey = function(e, hashId, keyCode) {
            var keyString = keyUtil.keyCodeToString(keyCode);
            this.$callKeyboardHandlers(hashId, keyString, keyCode, e);
        };
        this.onTextInput = function(text) {
            this.$callKeyboardHandlers(-1, text);
        };
    }).call(KeyBinding.prototype);
    exports.KeyBinding = KeyBinding;
});
ace.define("ace/lib/bidiutil", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    var ArabicAlefBetIntervalsBegine = [
        '\u0621',
        '\u0641'
    ];
    var ArabicAlefBetIntervalsEnd = [
        '\u063A',
        '\u064a'
    ];
    var dir = 0, hiLevel = 0;
    var lastArabic = false, hasUBAT_AL = false, hasUBAT_B = false, hasUBAT_S = false, hasBlockSep = false, hasSegSep = false;
    var impTab_LTR = [
        [
            0,
            3,
            0,
            1,
            0,
            0,
            0
        ],
        [
            0,
            3,
            0,
            1,
            2,
            2,
            0
        ],
        [
            0,
            3,
            0,
            17,
            2,
            0,
            1
        ],
        [
            0,
            3,
            5,
            5,
            4,
            1,
            0
        ],
        [
            0,
            3,
            21,
            21,
            4,
            0,
            1
        ],
        [
            0,
            3,
            5,
            5,
            4,
            2,
            0
        ]
    ];
    var impTab_RTL = [
        [
            2,
            0,
            1,
            1,
            0,
            1,
            0
        ],
        [
            2,
            0,
            1,
            1,
            0,
            2,
            0
        ],
        [
            2,
            0,
            2,
            1,
            3,
            2,
            0
        ],
        [
            2,
            0,
            2,
            33,
            3,
            1,
            1
        ]
    ];
    var LTR = 0, RTL = 1;
    var L = 0;
    var R = 1;
    var EN = 2;
    var AN = 3;
    var ON = 4;
    var B = 5;
    var S = 6;
    var AL = 7;
    var WS = 8;
    var CS = 9;
    var ES = 10;
    var ET = 11;
    var NSM = 12;
    var LRE = 13;
    var RLE = 14;
    var PDF = 15;
    var LRO = 16;
    var RLO = 17;
    var BN = 18;
    var UnicodeTBL00 = [
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        S,
        B,
        S,
        WS,
        B,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        B,
        B,
        B,
        S,
        WS,
        ON,
        ON,
        ET,
        ET,
        ET,
        ON,
        ON,
        ON,
        ON,
        ON,
        ES,
        CS,
        ES,
        CS,
        CS,
        EN,
        EN,
        EN,
        EN,
        EN,
        EN,
        EN,
        EN,
        EN,
        EN,
        CS,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        L,
        ON,
        ON,
        ON,
        ON,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        B,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        BN,
        CS,
        ON,
        ET,
        ET,
        ET,
        ET,
        ON,
        ON,
        ON,
        ON,
        L,
        ON,
        ON,
        BN,
        ON,
        ON,
        ET,
        ET,
        EN,
        EN,
        ON,
        L,
        ON,
        ON,
        ON,
        EN,
        L,
        ON,
        ON,
        ON,
        ON,
        ON
    ];
    var UnicodeTBL20 = [
        WS,
        WS,
        WS,
        WS,
        WS,
        WS,
        WS,
        WS,
        WS,
        WS,
        WS,
        BN,
        BN,
        BN,
        L,
        R,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        WS,
        B,
        LRE,
        RLE,
        PDF,
        LRO,
        RLO,
        CS,
        ET,
        ET,
        ET,
        ET,
        ET,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        CS,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        ON,
        WS
    ];
    function _computeLevels(chars, levels, len, charTypes) {
        var impTab = dir ? impTab_RTL : impTab_LTR, prevState = null, newClass = null, newLevel = null, newState = 0, action = null, cond = null, condPos = -1, i = null, ix = null, classes = [];
        if (!charTypes) for(i = 0, charTypes = []; i < len; i++)charTypes[i] = _getCharacterType(chars[i]);
        hiLevel = dir;
        lastArabic = false;
        hasUBAT_AL = false;
        hasUBAT_B = false;
        hasUBAT_S = false;
        for(ix = 0; ix < len; ix++){
            prevState = newState;
            classes[ix] = newClass = _getCharClass(chars, charTypes, classes, ix);
            newState = impTab[prevState][newClass];
            action = newState & 240;
            newState &= 15;
            levels[ix] = newLevel = impTab[newState][5];
            if (action > 0) {
                if (action == 16) {
                    for(i = condPos; i < ix; i++)levels[i] = 1;
                    condPos = -1;
                } else condPos = -1;
            }
            cond = impTab[newState][6];
            if (cond) {
                if (condPos == -1) condPos = ix;
            } else if (condPos > -1) {
                for(i = condPos; i < ix; i++)levels[i] = newLevel;
                condPos = -1;
            }
            if (charTypes[ix] == B) levels[ix] = 0;
            hiLevel |= newLevel;
        }
        if (hasUBAT_S) {
            for(i = 0; i < len; i++)if (charTypes[i] == S) {
                levels[i] = dir;
                for(var j = i - 1; j >= 0; j--){
                    if (charTypes[j] == WS) levels[j] = dir;
                    else break;
                }
            }
        }
    }
    function _invertLevel(lev, levels, _array) {
        if (hiLevel < lev) return;
        if (lev == 1 && dir == RTL && !hasUBAT_B) {
            _array.reverse();
            return;
        }
        var len = _array.length, start = 0, end, lo, hi, tmp;
        while(start < len){
            if (levels[start] >= lev) {
                end = start + 1;
                while(end < len && levels[end] >= lev)end++;
                for(lo = start, hi = end - 1; lo < hi; lo++, hi--){
                    tmp = _array[lo];
                    _array[lo] = _array[hi];
                    _array[hi] = tmp;
                }
                start = end;
            }
            start++;
        }
    }
    function _getCharClass(chars, types, classes, ix) {
        var cType = types[ix], wType, nType, len, i;
        switch(cType){
            case L:
            case R:
                lastArabic = false;
            case ON:
            case AN:
                return cType;
            case EN:
                return lastArabic ? AN : EN;
            case AL:
                lastArabic = true;
                hasUBAT_AL = true;
                return R;
            case WS:
                return ON;
            case CS:
                if (ix < 1 || ix + 1 >= types.length || (wType = classes[ix - 1]) != EN && wType != AN || (nType = types[ix + 1]) != EN && nType != AN) return ON;
                if (lastArabic) nType = AN;
                return nType == wType ? nType : ON;
            case ES:
                wType = ix > 0 ? classes[ix - 1] : B;
                if (wType == EN && ix + 1 < types.length && types[ix + 1] == EN) return EN;
                return ON;
            case ET:
                if (ix > 0 && classes[ix - 1] == EN) return EN;
                if (lastArabic) return ON;
                i = ix + 1;
                len = types.length;
                while(i < len && types[i] == ET)i++;
                if (i < len && types[i] == EN) return EN;
                return ON;
            case NSM:
                len = types.length;
                i = ix + 1;
                while(i < len && types[i] == NSM)i++;
                if (i < len) {
                    var c = chars[ix], rtlCandidate = c >= 1425 && c <= 2303 || c == 64286;
                    wType = types[i];
                    if (rtlCandidate && (wType == R || wType == AL)) return R;
                }
                if (ix < 1 || (wType = types[ix - 1]) == B) return ON;
                return classes[ix - 1];
            case B:
                lastArabic = false;
                hasUBAT_B = true;
                return dir;
            case S:
                hasUBAT_S = true;
                return ON;
            case LRE:
            case RLE:
            case LRO:
            case RLO:
            case PDF:
                lastArabic = false;
            case BN:
                return ON;
        }
    }
    function _getCharacterType(ch) {
        var uc = ch.charCodeAt(0), hi = uc >> 8;
        if (hi == 0) return uc > 191 ? L : UnicodeTBL00[uc];
        else if (hi == 5) return /[\u0591-\u05f4]/.test(ch) ? R : L;
        else if (hi == 6) {
            if (/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(ch)) return NSM;
            else if (/[\u0660-\u0669\u066b-\u066c]/.test(ch)) return AN;
            else if (uc == 1642) return ET;
            else if (/[\u06f0-\u06f9]/.test(ch)) return EN;
            else return AL;
        } else if (hi == 32 && uc <= 8287) return UnicodeTBL20[uc & 255];
        else if (hi == 254) return uc >= 65136 ? AL : ON;
        return ON;
    }
    function _isArabicDiacritics(ch) {
        return ch >= '\u064b' && ch <= '\u0655';
    }
    exports.L = L;
    exports.R = R;
    exports.EN = EN;
    exports.ON_R = 3;
    exports.AN = 4;
    exports.R_H = 5;
    exports.B = 6;
    exports.DOT = "\xB7";
    exports.doBidiReorder = function(text, textCharTypes, isRtl) {
        if (text.length < 2) return {
        };
        var chars = text.split(""), logicalFromVisual = new Array(chars.length), bidiLevels = new Array(chars.length), levels = [];
        dir = isRtl ? RTL : LTR;
        _computeLevels(chars, levels, chars.length, textCharTypes);
        for(var i = 0; i < logicalFromVisual.length; logicalFromVisual[i] = i, i++);
        _invertLevel(2, levels, logicalFromVisual);
        _invertLevel(1, levels, logicalFromVisual);
        for(var i = 0; i < logicalFromVisual.length - 1; i++){
            if (textCharTypes[i] === AN) levels[i] = exports.AN;
            else if (levels[i] === R && (textCharTypes[i] > AL && textCharTypes[i] < LRE || textCharTypes[i] === ON || textCharTypes[i] === BN)) levels[i] = exports.ON_R;
            else if (i > 0 && chars[i - 1] === '\u0644' && /\u0622|\u0623|\u0625|\u0627/.test(chars[i])) {
                levels[i - 1] = levels[i] = exports.R_H;
                i++;
            }
        }
        if (chars[chars.length - 1] === exports.DOT) levels[chars.length - 1] = exports.B;
        for(var i = 0; i < logicalFromVisual.length; i++)bidiLevels[i] = levels[logicalFromVisual[i]];
        return {
            'logicalFromVisual': logicalFromVisual,
            'bidiLevels': bidiLevels
        };
    };
    exports.hasBidiCharacters = function(text, textCharTypes) {
        var ret = false;
        for(var i = 0; i < text.length; i++){
            textCharTypes[i] = _getCharacterType(text.charAt(i));
            if (!ret && (textCharTypes[i] == R || textCharTypes[i] == AL)) ret = true;
        }
        return ret;
    };
    exports.getVisualFromLogicalIdx = function(logIdx, rowMap) {
        for(var i = 0; i < rowMap.logicalFromVisual.length; i++){
            if (rowMap.logicalFromVisual[i] == logIdx) return i;
        }
        return 0;
    };
});
ace.define("ace/bidihandler", [
    "require",
    "exports",
    "module",
    "ace/lib/bidiutil",
    "ace/lib/lang",
    "ace/lib/useragent"
], function(acequire, exports, module) {
    var bidiUtil = acequire("./lib/bidiutil");
    var lang = acequire("./lib/lang");
    var useragent = acequire("./lib/useragent");
    var bidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
    var BidiHandler = function(session) {
        this.session = session;
        this.bidiMap = {
        };
        this.currentRow = null;
        this.bidiUtil = bidiUtil;
        this.charWidths = [];
        this.EOL = "\xAC";
        this.showInvisibles = true;
        this.isRtlDir = false;
        this.line = "";
        this.wrapIndent = 0;
        this.isLastRow = false;
        this.EOF = "\xB6";
        this.seenBidi = false;
    };
    (function() {
        this.isBidiRow = function(screenRow, docRow, splitIndex) {
            if (!this.seenBidi) return false;
            if (screenRow !== this.currentRow) {
                this.currentRow = screenRow;
                this.updateRowLine(docRow, splitIndex);
                this.updateBidiMap();
            }
            return this.bidiMap.bidiLevels;
        };
        this.onChange = function(delta) {
            if (!this.seenBidi) {
                if (delta.action == "insert" && bidiRE.test(delta.lines.join("\n"))) {
                    this.seenBidi = true;
                    this.currentRow = null;
                }
            } else this.currentRow = null;
        };
        this.getDocumentRow = function() {
            var docRow = 0;
            var rowCache = this.session.$screenRowCache;
            if (rowCache.length) {
                var index = this.session.$getRowCacheIndex(rowCache, this.currentRow);
                if (index >= 0) docRow = this.session.$docRowCache[index];
            }
            return docRow;
        };
        this.getSplitIndex = function() {
            var splitIndex = 0;
            var rowCache = this.session.$screenRowCache;
            if (rowCache.length) {
                var currentIndex, prevIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow);
                while(this.currentRow - splitIndex > 0){
                    currentIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow - splitIndex - 1);
                    if (currentIndex !== prevIndex) break;
                    prevIndex = currentIndex;
                    splitIndex++;
                }
            }
            return splitIndex;
        };
        this.updateRowLine = function(docRow, splitIndex) {
            if (docRow === undefined) docRow = this.getDocumentRow();
            this.wrapIndent = 0;
            this.isLastRow = docRow === this.session.getLength() - 1;
            this.line = this.session.getLine(docRow);
            if (this.session.$useWrapMode) {
                var splits = this.session.$wrapData[docRow];
                if (splits) {
                    if (splitIndex === undefined) splitIndex = this.getSplitIndex();
                    if (splitIndex > 0 && splits.length) {
                        this.wrapIndent = splits.indent;
                        this.line = splitIndex < splits.length ? this.line.substring(splits[splitIndex - 1], splits[splits.length - 1]) : this.line.substring(splits[splits.length - 1]);
                    } else this.line = this.line.substring(0, splits[splitIndex]);
                }
            }
            var session = this.session, shift = 0, size;
            this.line = this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g, function(ch, i) {
                if (ch === '\t' || session.isFullWidth(ch.charCodeAt(0))) {
                    size = ch === '\t' ? session.getScreenTabSize(i + shift) : 2;
                    shift += size - 1;
                    return lang.stringRepeat(bidiUtil.DOT, size);
                }
                return ch;
            });
        };
        this.updateBidiMap = function() {
            var textCharTypes = [], endOfLine = this.isLastRow ? this.EOF : this.EOL;
            var line = this.line + (this.showInvisibles ? endOfLine : bidiUtil.DOT);
            if (bidiUtil.hasBidiCharacters(line, textCharTypes)) this.bidiMap = bidiUtil.doBidiReorder(line, textCharTypes, this.isRtlDir);
            else this.bidiMap = {
            };
        };
        this.markAsDirty = function() {
            this.currentRow = null;
        };
        this.updateCharacterWidths = function(fontMetrics) {
            if (!this.seenBidi) return;
            if (this.characterWidth === fontMetrics.$characterSize.width) return;
            var characterWidth = this.characterWidth = fontMetrics.$characterSize.width;
            var bidiCharWidth = fontMetrics.$measureCharWidth("\u05d4");
            this.charWidths[bidiUtil.L] = this.charWidths[bidiUtil.EN] = this.charWidths[bidiUtil.ON_R] = characterWidth;
            this.charWidths[bidiUtil.R] = this.charWidths[bidiUtil.AN] = bidiCharWidth;
            this.charWidths[bidiUtil.R_H] = useragent.isChrome ? bidiCharWidth : bidiCharWidth * 0.45;
            this.charWidths[bidiUtil.B] = 0;
            this.currentRow = null;
        };
        this.getShowInvisibles = function() {
            return this.showInvisibles;
        };
        this.setShowInvisibles = function(showInvisibles) {
            this.showInvisibles = showInvisibles;
            this.currentRow = null;
        };
        this.setEolChar = function(eolChar) {
            this.EOL = eolChar;
        };
        this.setTextDir = function(isRtlDir) {
            this.isRtlDir = isRtlDir;
        };
        this.getPosLeft = function(col) {
            col -= this.wrapIndent;
            var visualIdx = bidiUtil.getVisualFromLogicalIdx(col > 0 ? col - 1 : 0, this.bidiMap), levels = this.bidiMap.bidiLevels, left = 0;
            if (col === 0 && levels[visualIdx] % 2 !== 0) visualIdx++;
            for(var i = 0; i < visualIdx; i++)left += this.charWidths[levels[i]];
            if (col !== 0 && levels[visualIdx] % 2 === 0) left += this.charWidths[levels[visualIdx]];
            if (this.wrapIndent) left += this.wrapIndent * this.charWidths[bidiUtil.L];
            return left;
        };
        this.getSelections = function(startCol, endCol) {
            var map = this.bidiMap, levels = map.bidiLevels, level, offset = this.wrapIndent * this.charWidths[bidiUtil.L], selections = [], selColMin = Math.min(startCol, endCol) - this.wrapIndent, selColMax = Math.max(startCol, endCol) - this.wrapIndent, isSelected = false, isSelectedPrev = false, selectionStart = 0;
            for(var logIdx, visIdx = 0; visIdx < levels.length; visIdx++){
                logIdx = map.logicalFromVisual[visIdx];
                level = levels[visIdx];
                isSelected = logIdx >= selColMin && logIdx < selColMax;
                if (isSelected && !isSelectedPrev) selectionStart = offset;
                else if (!isSelected && isSelectedPrev) selections.push({
                    left: selectionStart,
                    width: offset - selectionStart
                });
                offset += this.charWidths[level];
                isSelectedPrev = isSelected;
            }
            if (isSelected && visIdx === levels.length) selections.push({
                left: selectionStart,
                width: offset - selectionStart
            });
            return selections;
        };
        this.offsetToCol = function(posX) {
            var logicalIdx = 0, posX = Math.max(posX, 0), offset = 0, visualIdx = 0, levels = this.bidiMap.bidiLevels, charWidth = this.charWidths[levels[visualIdx]];
            if (this.wrapIndent) posX -= this.wrapIndent * this.charWidths[bidiUtil.L];
            while(posX > offset + charWidth / 2){
                offset += charWidth;
                if (visualIdx === levels.length - 1) {
                    charWidth = 0;
                    break;
                }
                charWidth = this.charWidths[levels[++visualIdx]];
            }
            if (visualIdx > 0 && levels[visualIdx - 1] % 2 !== 0 && levels[visualIdx] % 2 === 0) {
                if (posX < offset) visualIdx--;
                logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];
            } else if (visualIdx > 0 && levels[visualIdx - 1] % 2 === 0 && levels[visualIdx] % 2 !== 0) logicalIdx = 1 + (posX > offset ? this.bidiMap.logicalFromVisual[visualIdx] : this.bidiMap.logicalFromVisual[visualIdx - 1]);
            else if (this.isRtlDir && visualIdx === levels.length - 1 && charWidth === 0 && levels[visualIdx - 1] % 2 === 0 || !this.isRtlDir && visualIdx === 0 && levels[visualIdx] % 2 !== 0) logicalIdx = 1 + this.bidiMap.logicalFromVisual[visualIdx];
            else {
                if (visualIdx > 0 && levels[visualIdx - 1] % 2 !== 0 && charWidth !== 0) visualIdx--;
                logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];
            }
            return logicalIdx + this.wrapIndent;
        };
    }).call(BidiHandler.prototype);
    exports.BidiHandler = BidiHandler;
});
ace.define("ace/range", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    var comparePoints = function(p1, p2) {
        return p1.row - p2.row || p1.column - p2.column;
    };
    var Range1 = function(startRow, startColumn, endRow, endColumn) {
        this.start = {
            row: startRow,
            column: startColumn
        };
        this.end = {
            row: endRow,
            column: endColumn
        };
    };
    (function() {
        this.isEqual = function(range) {
            return this.start.row === range.start.row && this.end.row === range.end.row && this.start.column === range.start.column && this.end.column === range.end.column;
        };
        this.toString = function() {
            return "Range: [" + this.start.row + "/" + this.start.column + "] -> [" + this.end.row + "/" + this.end.column + "]";
        };
        this.contains = function(row, column) {
            return this.compare(row, column) == 0;
        };
        this.compareRange = function(range) {
            var cmp, end = range.end, start = range.start;
            cmp = this.compare(end.row, end.column);
            if (cmp == 1) {
                cmp = this.compare(start.row, start.column);
                if (cmp == 1) return 2;
                else if (cmp == 0) return 1;
                else return 0;
            } else if (cmp == -1) return -2;
            else {
                cmp = this.compare(start.row, start.column);
                if (cmp == -1) return -1;
                else if (cmp == 1) return 42;
                else return 0;
            }
        };
        this.comparePoint = function(p) {
            return this.compare(p.row, p.column);
        };
        this.containsRange = function(range) {
            return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;
        };
        this.intersects = function(range) {
            var cmp = this.compareRange(range);
            return cmp == -1 || cmp == 0 || cmp == 1;
        };
        this.isEnd = function(row, column) {
            return this.end.row == row && this.end.column == column;
        };
        this.isStart = function(row, column) {
            return this.start.row == row && this.start.column == column;
        };
        this.setStart = function(row, column) {
            if (typeof row == "object") {
                this.start.column = row.column;
                this.start.row = row.row;
            } else {
                this.start.row = row;
                this.start.column = column;
            }
        };
        this.setEnd = function(row, column) {
            if (typeof row == "object") {
                this.end.column = row.column;
                this.end.row = row.row;
            } else {
                this.end.row = row;
                this.end.column = column;
            }
        };
        this.inside = function(row, column) {
            if (this.compare(row, column) == 0) {
                if (this.isEnd(row, column) || this.isStart(row, column)) return false;
                else return true;
            }
            return false;
        };
        this.insideStart = function(row, column) {
            if (this.compare(row, column) == 0) {
                if (this.isEnd(row, column)) return false;
                else return true;
            }
            return false;
        };
        this.insideEnd = function(row, column) {
            if (this.compare(row, column) == 0) {
                if (this.isStart(row, column)) return false;
                else return true;
            }
            return false;
        };
        this.compare = function(row, column) {
            if (!this.isMultiLine()) {
                if (row === this.start.row) return column < this.start.column ? -1 : column > this.end.column ? 1 : 0;
            }
            if (row < this.start.row) return -1;
            if (row > this.end.row) return 1;
            if (this.start.row === row) return column >= this.start.column ? 0 : -1;
            if (this.end.row === row) return column <= this.end.column ? 0 : 1;
            return 0;
        };
        this.compareStart = function(row, column) {
            if (this.start.row == row && this.start.column == column) return -1;
            else return this.compare(row, column);
        };
        this.compareEnd = function(row, column) {
            if (this.end.row == row && this.end.column == column) return 1;
            else return this.compare(row, column);
        };
        this.compareInside = function(row, column) {
            if (this.end.row == row && this.end.column == column) return 1;
            else if (this.start.row == row && this.start.column == column) return -1;
            else return this.compare(row, column);
        };
        this.clipRows = function(firstRow, lastRow) {
            if (this.end.row > lastRow) var end = {
                row: lastRow + 1,
                column: 0
            };
            else if (this.end.row < firstRow) var end = {
                row: firstRow,
                column: 0
            };
            if (this.start.row > lastRow) var start = {
                row: lastRow + 1,
                column: 0
            };
            else if (this.start.row < firstRow) var start = {
                row: firstRow,
                column: 0
            };
            return Range1.fromPoints(start || this.start, end || this.end);
        };
        this.extend = function(row, column) {
            var cmp = this.compare(row, column);
            if (cmp == 0) return this;
            else if (cmp == -1) var start = {
                row: row,
                column: column
            };
            else var end = {
                row: row,
                column: column
            };
            return Range1.fromPoints(start || this.start, end || this.end);
        };
        this.isEmpty = function() {
            return this.start.row === this.end.row && this.start.column === this.end.column;
        };
        this.isMultiLine = function() {
            return this.start.row !== this.end.row;
        };
        this.clone = function() {
            return Range1.fromPoints(this.start, this.end);
        };
        this.collapseRows = function() {
            if (this.end.column == 0) return new Range1(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0);
            else return new Range1(this.start.row, 0, this.end.row, 0);
        };
        this.toScreenRange = function(session) {
            var screenPosStart = session.documentToScreenPosition(this.start);
            var screenPosEnd = session.documentToScreenPosition(this.end);
            return new Range1(screenPosStart.row, screenPosStart.column, screenPosEnd.row, screenPosEnd.column);
        };
        this.moveBy = function(row, column) {
            this.start.row += row;
            this.start.column += column;
            this.end.row += row;
            this.end.column += column;
        };
    }).call(Range1.prototype);
    Range1.fromPoints = function(start, end) {
        return new Range1(start.row, start.column, end.row, end.column);
    };
    Range1.comparePoints = comparePoints;
    Range1.comparePoints = function(p1, p2) {
        return p1.row - p2.row || p1.column - p2.column;
    };
    exports.Range = Range1;
});
ace.define("ace/selection", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/lang",
    "ace/lib/event_emitter",
    "ace/range"
], function(acequire, exports, module) {
    var oop = acequire("./lib/oop");
    var lang = acequire("./lib/lang");
    var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
    var Range1 = acequire("./range").Range;
    var Selection1 = function(session) {
        this.session = session;
        this.doc = session.getDocument();
        this.clearSelection();
        this.lead = this.selectionLead = this.doc.createAnchor(0, 0);
        this.anchor = this.selectionAnchor = this.doc.createAnchor(0, 0);
        var self = this;
        this.lead.on("change", function(e) {
            self._emit("changeCursor");
            if (!self.$isEmpty) self._emit("changeSelection");
            if (!self.$keepDesiredColumnOnChange && e.old.column != e.value.column) self.$desiredColumn = null;
        });
        this.selectionAnchor.on("change", function() {
            if (!self.$isEmpty) self._emit("changeSelection");
        });
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.isEmpty = function() {
            return this.$isEmpty || this.anchor.row == this.lead.row && this.anchor.column == this.lead.column;
        };
        this.isMultiLine = function() {
            if (this.isEmpty()) return false;
            return this.getRange().isMultiLine();
        };
        this.getCursor = function() {
            return this.lead.getPosition();
        };
        this.setSelectionAnchor = function(row, column) {
            this.anchor.setPosition(row, column);
            if (this.$isEmpty) {
                this.$isEmpty = false;
                this._emit("changeSelection");
            }
        };
        this.getSelectionAnchor = function() {
            if (this.$isEmpty) return this.getSelectionLead();
            else return this.anchor.getPosition();
        };
        this.getSelectionLead = function() {
            return this.lead.getPosition();
        };
        this.shiftSelection = function(columns) {
            if (this.$isEmpty) {
                this.moveCursorTo(this.lead.row, this.lead.column + columns);
                return;
            }
            var anchor = this.getSelectionAnchor();
            var lead = this.getSelectionLead();
            var isBackwards = this.isBackwards();
            if (!isBackwards || anchor.column !== 0) this.setSelectionAnchor(anchor.row, anchor.column + columns);
            if (isBackwards || lead.column !== 0) this.$moveSelection(function() {
                this.moveCursorTo(lead.row, lead.column + columns);
            });
        };
        this.isBackwards = function() {
            var anchor = this.anchor;
            var lead = this.lead;
            return anchor.row > lead.row || anchor.row == lead.row && anchor.column > lead.column;
        };
        this.getRange = function() {
            var anchor = this.anchor;
            var lead = this.lead;
            if (this.isEmpty()) return Range1.fromPoints(lead, lead);
            if (this.isBackwards()) return Range1.fromPoints(lead, anchor);
            else return Range1.fromPoints(anchor, lead);
        };
        this.clearSelection = function() {
            if (!this.$isEmpty) {
                this.$isEmpty = true;
                this._emit("changeSelection");
            }
        };
        this.selectAll = function() {
            var lastRow = this.doc.getLength() - 1;
            this.setSelectionAnchor(0, 0);
            this.moveCursorTo(lastRow, this.doc.getLine(lastRow).length);
        };
        this.setRange = this.setSelectionRange = function(range, reverse) {
            if (reverse) {
                this.setSelectionAnchor(range.end.row, range.end.column);
                this.selectTo(range.start.row, range.start.column);
            } else {
                this.setSelectionAnchor(range.start.row, range.start.column);
                this.selectTo(range.end.row, range.end.column);
            }
            if (this.getRange().isEmpty()) this.$isEmpty = true;
            this.$desiredColumn = null;
        };
        this.$moveSelection = function(mover) {
            var lead = this.lead;
            if (this.$isEmpty) this.setSelectionAnchor(lead.row, lead.column);
            mover.call(this);
        };
        this.selectTo = function(row, column) {
            this.$moveSelection(function() {
                this.moveCursorTo(row, column);
            });
        };
        this.selectToPosition = function(pos) {
            this.$moveSelection(function() {
                this.moveCursorToPosition(pos);
            });
        };
        this.moveTo = function(row, column) {
            this.clearSelection();
            this.moveCursorTo(row, column);
        };
        this.moveToPosition = function(pos) {
            this.clearSelection();
            this.moveCursorToPosition(pos);
        };
        this.selectUp = function() {
            this.$moveSelection(this.moveCursorUp);
        };
        this.selectDown = function() {
            this.$moveSelection(this.moveCursorDown);
        };
        this.selectRight = function() {
            this.$moveSelection(this.moveCursorRight);
        };
        this.selectLeft = function() {
            this.$moveSelection(this.moveCursorLeft);
        };
        this.selectLineStart = function() {
            this.$moveSelection(this.moveCursorLineStart);
        };
        this.selectLineEnd = function() {
            this.$moveSelection(this.moveCursorLineEnd);
        };
        this.selectFileEnd = function() {
            this.$moveSelection(this.moveCursorFileEnd);
        };
        this.selectFileStart = function() {
            this.$moveSelection(this.moveCursorFileStart);
        };
        this.selectWordRight = function() {
            this.$moveSelection(this.moveCursorWordRight);
        };
        this.selectWordLeft = function() {
            this.$moveSelection(this.moveCursorWordLeft);
        };
        this.getWordRange = function(row, column) {
            if (typeof column == "undefined") {
                var cursor = row || this.lead;
                row = cursor.row;
                column = cursor.column;
            }
            return this.session.getWordRange(row, column);
        };
        this.selectWord = function() {
            this.setSelectionRange(this.getWordRange());
        };
        this.selectAWord = function() {
            var cursor = this.getCursor();
            var range = this.session.getAWordRange(cursor.row, cursor.column);
            this.setSelectionRange(range);
        };
        this.getLineRange = function(row, excludeLastChar) {
            var rowStart = typeof row == "number" ? row : this.lead.row;
            var rowEnd;
            var foldLine = this.session.getFoldLine(rowStart);
            if (foldLine) {
                rowStart = foldLine.start.row;
                rowEnd = foldLine.end.row;
            } else rowEnd = rowStart;
            if (excludeLastChar === true) return new Range1(rowStart, 0, rowEnd, this.session.getLine(rowEnd).length);
            else return new Range1(rowStart, 0, rowEnd + 1, 0);
        };
        this.selectLine = function() {
            this.setSelectionRange(this.getLineRange());
        };
        this.moveCursorUp = function() {
            this.moveCursorBy(-1, 0);
        };
        this.moveCursorDown = function() {
            this.moveCursorBy(1, 0);
        };
        this.wouldMoveIntoSoftTab = function(cursor, tabSize, direction) {
            var start = cursor.column;
            var end = cursor.column + tabSize;
            if (direction < 0) {
                start = cursor.column - tabSize;
                end = cursor.column;
            }
            return this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(start, end).split(" ").length - 1 == tabSize;
        };
        this.moveCursorLeft = function() {
            var cursor = this.lead.getPosition(), fold;
            if (fold = this.session.getFoldAt(cursor.row, cursor.column, -1)) this.moveCursorTo(fold.start.row, fold.start.column);
            else if (cursor.column === 0) {
                if (cursor.row > 0) this.moveCursorTo(cursor.row - 1, this.doc.getLine(cursor.row - 1).length);
            } else {
                var tabSize = this.session.getTabSize();
                if (this.wouldMoveIntoSoftTab(cursor, tabSize, -1) && !this.session.getNavigateWithinSoftTabs()) this.moveCursorBy(0, -tabSize);
                else this.moveCursorBy(0, -1);
            }
        };
        this.moveCursorRight = function() {
            var cursor = this.lead.getPosition(), fold;
            if (fold = this.session.getFoldAt(cursor.row, cursor.column, 1)) this.moveCursorTo(fold.end.row, fold.end.column);
            else if (this.lead.column == this.doc.getLine(this.lead.row).length) {
                if (this.lead.row < this.doc.getLength() - 1) this.moveCursorTo(this.lead.row + 1, 0);
            } else {
                var tabSize = this.session.getTabSize();
                var cursor = this.lead;
                if (this.wouldMoveIntoSoftTab(cursor, tabSize, 1) && !this.session.getNavigateWithinSoftTabs()) this.moveCursorBy(0, tabSize);
                else this.moveCursorBy(0, 1);
            }
        };
        this.moveCursorLineStart = function() {
            var row = this.lead.row;
            var column = this.lead.column;
            var screenRow = this.session.documentToScreenRow(row, column);
            var firstColumnPosition = this.session.screenToDocumentPosition(screenRow, 0);
            var beforeCursor = this.session.getDisplayLine(row, null, firstColumnPosition.row, firstColumnPosition.column);
            var leadingSpace = beforeCursor.match(/^\s*/);
            if (leadingSpace[0].length != column && !this.session.$useEmacsStyleLineStart) firstColumnPosition.column += leadingSpace[0].length;
            this.moveCursorToPosition(firstColumnPosition);
        };
        this.moveCursorLineEnd = function() {
            var lead = this.lead;
            var lineEnd = this.session.getDocumentLastRowColumnPosition(lead.row, lead.column);
            if (this.lead.column == lineEnd.column) {
                var line = this.session.getLine(lineEnd.row);
                if (lineEnd.column == line.length) {
                    var textEnd = line.search(/\s+$/);
                    if (textEnd > 0) lineEnd.column = textEnd;
                }
            }
            this.moveCursorTo(lineEnd.row, lineEnd.column);
        };
        this.moveCursorFileEnd = function() {
            var row = this.doc.getLength() - 1;
            var column = this.doc.getLine(row).length;
            this.moveCursorTo(row, column);
        };
        this.moveCursorFileStart = function() {
            this.moveCursorTo(0, 0);
        };
        this.moveCursorLongWordRight = function() {
            var row = this.lead.row;
            var column = this.lead.column;
            var line = this.doc.getLine(row);
            var rightOfCursor = line.substring(column);
            var match;
            this.session.nonTokenRe.lastIndex = 0;
            this.session.tokenRe.lastIndex = 0;
            var fold = this.session.getFoldAt(row, column, 1);
            if (fold) {
                this.moveCursorTo(fold.end.row, fold.end.column);
                return;
            }
            if (match = this.session.nonTokenRe.exec(rightOfCursor)) {
                column += this.session.nonTokenRe.lastIndex;
                this.session.nonTokenRe.lastIndex = 0;
                rightOfCursor = line.substring(column);
            }
            if (column >= line.length) {
                this.moveCursorTo(row, line.length);
                this.moveCursorRight();
                if (row < this.doc.getLength() - 1) this.moveCursorWordRight();
                return;
            }
            if (match = this.session.tokenRe.exec(rightOfCursor)) {
                column += this.session.tokenRe.lastIndex;
                this.session.tokenRe.lastIndex = 0;
            }
            this.moveCursorTo(row, column);
        };
        this.moveCursorLongWordLeft = function() {
            var row = this.lead.row;
            var column = this.lead.column;
            var fold;
            if (fold = this.session.getFoldAt(row, column, -1)) {
                this.moveCursorTo(fold.start.row, fold.start.column);
                return;
            }
            var str = this.session.getFoldStringAt(row, column, -1);
            if (str == null) str = this.doc.getLine(row).substring(0, column);
            var leftOfCursor = lang.stringReverse(str);
            var match;
            this.session.nonTokenRe.lastIndex = 0;
            this.session.tokenRe.lastIndex = 0;
            if (match = this.session.nonTokenRe.exec(leftOfCursor)) {
                column -= this.session.nonTokenRe.lastIndex;
                leftOfCursor = leftOfCursor.slice(this.session.nonTokenRe.lastIndex);
                this.session.nonTokenRe.lastIndex = 0;
            }
            if (column <= 0) {
                this.moveCursorTo(row, 0);
                this.moveCursorLeft();
                if (row > 0) this.moveCursorWordLeft();
                return;
            }
            if (match = this.session.tokenRe.exec(leftOfCursor)) {
                column -= this.session.tokenRe.lastIndex;
                this.session.tokenRe.lastIndex = 0;
            }
            this.moveCursorTo(row, column);
        };
        this.$shortWordEndIndex = function(rightOfCursor) {
            var match, index = 0, ch;
            var whitespaceRe = /\s/;
            var tokenRe = this.session.tokenRe;
            tokenRe.lastIndex = 0;
            if (match = this.session.tokenRe.exec(rightOfCursor)) index = this.session.tokenRe.lastIndex;
            else {
                while((ch = rightOfCursor[index]) && whitespaceRe.test(ch))index++;
                if (index < 1) {
                    tokenRe.lastIndex = 0;
                    while((ch = rightOfCursor[index]) && !tokenRe.test(ch)){
                        tokenRe.lastIndex = 0;
                        index++;
                        if (whitespaceRe.test(ch)) {
                            if (index > 2) {
                                index--;
                                break;
                            } else {
                                while((ch = rightOfCursor[index]) && whitespaceRe.test(ch))index++;
                                if (index > 2) break;
                            }
                        }
                    }
                }
            }
            tokenRe.lastIndex = 0;
            return index;
        };
        this.moveCursorShortWordRight = function() {
            var row = this.lead.row;
            var column = this.lead.column;
            var line = this.doc.getLine(row);
            var rightOfCursor = line.substring(column);
            var fold = this.session.getFoldAt(row, column, 1);
            if (fold) return this.moveCursorTo(fold.end.row, fold.end.column);
            if (column == line.length) {
                var l = this.doc.getLength();
                do {
                    row++;
                    rightOfCursor = this.doc.getLine(row);
                }while (row < l && /^\s*$/.test(rightOfCursor))
                if (!/^\s+/.test(rightOfCursor)) rightOfCursor = "";
                column = 0;
            }
            var index = this.$shortWordEndIndex(rightOfCursor);
            this.moveCursorTo(row, column + index);
        };
        this.moveCursorShortWordLeft = function() {
            var row = this.lead.row;
            var column = this.lead.column;
            var fold;
            if (fold = this.session.getFoldAt(row, column, -1)) return this.moveCursorTo(fold.start.row, fold.start.column);
            var line = this.session.getLine(row).substring(0, column);
            if (column === 0) {
                do {
                    row--;
                    line = this.doc.getLine(row);
                }while (row > 0 && /^\s*$/.test(line))
                column = line.length;
                if (!/\s+$/.test(line)) line = "";
            }
            var leftOfCursor = lang.stringReverse(line);
            var index = this.$shortWordEndIndex(leftOfCursor);
            return this.moveCursorTo(row, column - index);
        };
        this.moveCursorWordRight = function() {
            if (this.session.$selectLongWords) this.moveCursorLongWordRight();
            else this.moveCursorShortWordRight();
        };
        this.moveCursorWordLeft = function() {
            if (this.session.$selectLongWords) this.moveCursorLongWordLeft();
            else this.moveCursorShortWordLeft();
        };
        this.moveCursorBy = function(rows, chars) {
            var screenPos = this.session.documentToScreenPosition(this.lead.row, this.lead.column);
            var offsetX;
            if (chars === 0) {
                if (rows !== 0) {
                    if (this.session.$bidiHandler.isBidiRow(screenPos.row, this.lead.row)) {
                        offsetX = this.session.$bidiHandler.getPosLeft(screenPos.column);
                        screenPos.column = Math.round(offsetX / this.session.$bidiHandler.charWidths[0]);
                    } else offsetX = screenPos.column * this.session.$bidiHandler.charWidths[0];
                }
                if (this.$desiredColumn) screenPos.column = this.$desiredColumn;
                else this.$desiredColumn = screenPos.column;
            }
            var docPos = this.session.screenToDocumentPosition(screenPos.row + rows, screenPos.column, offsetX);
            if (rows !== 0 && chars === 0 && docPos.row === this.lead.row && docPos.column === this.lead.column) {
                if (this.session.lineWidgets && this.session.lineWidgets[docPos.row]) {
                    if (docPos.row > 0 || rows > 0) docPos.row++;
                }
            }
            this.moveCursorTo(docPos.row, docPos.column + chars, chars === 0);
        };
        this.moveCursorToPosition = function(position) {
            this.moveCursorTo(position.row, position.column);
        };
        this.moveCursorTo = function(row, column, keepDesiredColumn) {
            var fold = this.session.getFoldAt(row, column, 1);
            if (fold) {
                row = fold.start.row;
                column = fold.start.column;
            }
            this.$keepDesiredColumnOnChange = true;
            var line = this.session.getLine(row);
            if (/[\uDC00-\uDFFF]/.test(line.charAt(column)) && line.charAt(column - 1)) {
                if (this.lead.row == row && this.lead.column == column + 1) column = column - 1;
                else column = column + 1;
            }
            this.lead.setPosition(row, column);
            this.$keepDesiredColumnOnChange = false;
            if (!keepDesiredColumn) this.$desiredColumn = null;
        };
        this.moveCursorToScreen = function(row, column, keepDesiredColumn) {
            var pos = this.session.screenToDocumentPosition(row, column);
            this.moveCursorTo(pos.row, pos.column, keepDesiredColumn);
        };
        this.detach = function() {
            this.lead.detach();
            this.anchor.detach();
            this.session = this.doc = null;
        };
        this.fromOrientedRange = function(range) {
            this.setSelectionRange(range, range.cursor == range.start);
            this.$desiredColumn = range.desiredColumn || this.$desiredColumn;
        };
        this.toOrientedRange = function(range) {
            var r = this.getRange();
            if (range) {
                range.start.column = r.start.column;
                range.start.row = r.start.row;
                range.end.column = r.end.column;
                range.end.row = r.end.row;
            } else range = r;
            range.cursor = this.isBackwards() ? range.start : range.end;
            range.desiredColumn = this.$desiredColumn;
            return range;
        };
        this.getRangeOfMovements = function(func) {
            var start = this.getCursor();
            try {
                func(this);
                var end = this.getCursor();
                return Range1.fromPoints(start, end);
            } catch (e) {
                return Range1.fromPoints(start, start);
            } finally{
                this.moveCursorToPosition(start);
            }
        };
        this.toJSON = function() {
            if (this.rangeCount) var data = this.ranges.map(function(r) {
                var r1 = r.clone();
                r1.isBackwards = r.cursor == r.start;
                return r1;
            });
            else {
                var data = this.getRange();
                data.isBackwards = this.isBackwards();
            }
            return data;
        };
        this.fromJSON = function(data) {
            if (data.start == undefined) {
                if (this.rangeList) {
                    this.toSingleRange(data[0]);
                    for(var i = data.length; i--;){
                        var r = Range1.fromPoints(data[i].start, data[i].end);
                        if (data[i].isBackwards) r.cursor = r.start;
                        this.addRange(r, true);
                    }
                    return;
                } else data = data[0];
            }
            if (this.rangeList) this.toSingleRange(data);
            this.setSelectionRange(data, data.isBackwards);
        };
        this.isEqual = function(data) {
            if ((data.length || this.rangeCount) && data.length != this.rangeCount) return false;
            if (!data.length || !this.ranges) return this.getRange().isEqual(data);
            for(var i = this.ranges.length; i--;){
                if (!this.ranges[i].isEqual(data[i])) return false;
            }
            return true;
        };
    }).call(Selection1.prototype);
    exports.Selection = Selection1;
});
ace.define("ace/tokenizer", [
    "require",
    "exports",
    "module",
    "ace/config"
], function(acequire, exports, module) {
    var config = acequire("./config");
    var MAX_TOKEN_COUNT = 2000;
    var Tokenizer = function(rules) {
        this.states = rules;
        this.regExps = {
        };
        this.matchMappings = {
        };
        for(var key in this.states){
            var state = this.states[key];
            var ruleRegExps = [];
            var matchTotal = 0;
            var mapping = this.matchMappings[key] = {
                defaultToken: "text"
            };
            var flag = "g";
            var splitterRurles = [];
            for(var i = 0; i < state.length; i++){
                var rule = state[i];
                if (rule.defaultToken) mapping.defaultToken = rule.defaultToken;
                if (rule.caseInsensitive) flag = "gi";
                if (rule.regex == null) continue;
                if (rule.regex instanceof RegExp) rule.regex = rule.regex.toString().slice(1, -1);
                var adjustedregex = rule.regex;
                var matchcount = new RegExp("(?:(" + adjustedregex + ")|(.))").exec("a").length - 2;
                if (Array.isArray(rule.token)) {
                    if (rule.token.length == 1 || matchcount == 1) rule.token = rule.token[0];
                    else if (matchcount - 1 != rule.token.length) {
                        this.reportError("number of classes and regexp groups doesn't match", {
                            rule: rule,
                            groupCount: matchcount - 1
                        });
                        rule.token = rule.token[0];
                    } else {
                        rule.tokenArray = rule.token;
                        rule.token = null;
                        rule.onMatch = this.$arrayTokens;
                    }
                } else if (typeof rule.token == "function" && !rule.onMatch) {
                    if (matchcount > 1) rule.onMatch = this.$applyToken;
                    else rule.onMatch = rule.token;
                }
                if (matchcount > 1) {
                    if (/\\\d/.test(rule.regex)) adjustedregex = rule.regex.replace(/\\([0-9]+)/g, function(match, digit) {
                        return "\\" + (parseInt(digit, 10) + matchTotal + 1);
                    });
                    else {
                        matchcount = 1;
                        adjustedregex = this.removeCapturingGroups(rule.regex);
                    }
                    if (!rule.splitRegex && typeof rule.token != "string") splitterRurles.push(rule); // flag will be known only at the very end
                }
                mapping[matchTotal] = i;
                matchTotal += matchcount;
                ruleRegExps.push(adjustedregex);
                if (!rule.onMatch) rule.onMatch = null;
            }
            if (!ruleRegExps.length) {
                mapping[0] = 0;
                ruleRegExps.push("$");
            }
            splitterRurles.forEach(function(rule) {
                rule.splitRegex = this.createSplitterRegexp(rule.regex, flag);
            }, this);
            this.regExps[key] = new RegExp("(" + ruleRegExps.join(")|(") + ")|($)", flag);
        }
    };
    (function() {
        this.$setMaxTokenCount = function(m) {
            MAX_TOKEN_COUNT = m | 0;
        };
        this.$applyToken = function(str) {
            var values = this.splitRegex.exec(str).slice(1);
            var types = this.token.apply(this, values);
            if (typeof types === "string") return [
                {
                    type: types,
                    value: str
                }
            ];
            var tokens = [];
            for(var i = 0, l = types.length; i < l; i++)if (values[i]) tokens[tokens.length] = {
                type: types[i],
                value: values[i]
            };
            return tokens;
        };
        this.$arrayTokens = function(str) {
            if (!str) return [];
            var values = this.splitRegex.exec(str);
            if (!values) return "text";
            var tokens = [];
            var types = this.tokenArray;
            for(var i = 0, l = types.length; i < l; i++)if (values[i + 1]) tokens[tokens.length] = {
                type: types[i],
                value: values[i + 1]
            };
            return tokens;
        };
        this.removeCapturingGroups = function(src) {
            var r = src.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g, function(x, y) {
                return y ? "(?:" : x;
            });
            return r;
        };
        this.createSplitterRegexp = function(src, flag) {
            if (src.indexOf("(?=") != -1) {
                var stack = 0;
                var inChClass = false;
                var lastCapture = {
                };
                src.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g, function(m, esc, parenOpen, parenClose, square, index) {
                    if (inChClass) inChClass = square != "]";
                    else if (square) inChClass = true;
                    else if (parenClose) {
                        if (stack == lastCapture.stack) {
                            lastCapture.end = index + 1;
                            lastCapture.stack = -1;
                        }
                        stack--;
                    } else if (parenOpen) {
                        stack++;
                        if (parenOpen.length != 1) {
                            lastCapture.stack = stack;
                            lastCapture.start = index;
                        }
                    }
                    return m;
                });
                if (lastCapture.end != null && /^\)*$/.test(src.substr(lastCapture.end))) src = src.substring(0, lastCapture.start) + src.substr(lastCapture.end);
            }
            if (src.charAt(0) != "^") src = "^" + src;
            if (src.charAt(src.length - 1) != "$") src += "$";
            return new RegExp(src, (flag || "").replace("g", ""));
        };
        this.getLineTokens = function(line, startState) {
            if (startState && typeof startState != "string") {
                var stack = startState.slice(0);
                startState = stack[0];
                if (startState === "#tmp") {
                    stack.shift();
                    startState = stack.shift();
                }
            } else var stack = [];
            var currentState = startState || "start";
            var state = this.states[currentState];
            if (!state) {
                currentState = "start";
                state = this.states[currentState];
            }
            var mapping = this.matchMappings[currentState];
            var re = this.regExps[currentState];
            re.lastIndex = 0;
            var match, tokens = [];
            var lastIndex = 0;
            var matchAttempts = 0;
            var token = {
                type: null,
                value: ""
            };
            while(match = re.exec(line)){
                var type = mapping.defaultToken;
                var rule = null;
                var value = match[0];
                var index = re.lastIndex;
                if (index - value.length > lastIndex) {
                    var skipped = line.substring(lastIndex, index - value.length);
                    if (token.type == type) token.value += skipped;
                    else {
                        if (token.type) tokens.push(token);
                        token = {
                            type: type,
                            value: skipped
                        };
                    }
                }
                for(var i = 0; i < match.length - 2; i++){
                    if (match[i + 1] === undefined) continue;
                    rule = state[mapping[i]];
                    if (rule.onMatch) type = rule.onMatch(value, currentState, stack, line);
                    else type = rule.token;
                    if (rule.next) {
                        if (typeof rule.next == "string") currentState = rule.next;
                        else currentState = rule.next(currentState, stack);
                        state = this.states[currentState];
                        if (!state) {
                            this.reportError("state doesn't exist", currentState);
                            currentState = "start";
                            state = this.states[currentState];
                        }
                        mapping = this.matchMappings[currentState];
                        lastIndex = index;
                        re = this.regExps[currentState];
                        re.lastIndex = index;
                    }
                    if (rule.consumeLineEnd) lastIndex = index;
                    break;
                }
                if (value) {
                    if (typeof type === "string") {
                        if ((!rule || rule.merge !== false) && token.type === type) token.value += value;
                        else {
                            if (token.type) tokens.push(token);
                            token = {
                                type: type,
                                value: value
                            };
                        }
                    } else if (type) {
                        if (token.type) tokens.push(token);
                        token = {
                            type: null,
                            value: ""
                        };
                        for(var i = 0; i < type.length; i++)tokens.push(type[i]);
                    }
                }
                if (lastIndex == line.length) break;
                lastIndex = index;
                if ((matchAttempts++) > MAX_TOKEN_COUNT) {
                    if (matchAttempts > 2 * line.length) this.reportError("infinite loop with in ace tokenizer", {
                        startState: startState,
                        line: line
                    });
                    while(lastIndex < line.length){
                        if (token.type) tokens.push(token);
                        token = {
                            value: line.substring(lastIndex, lastIndex += 2000),
                            type: "overflow"
                        };
                    }
                    currentState = "start";
                    stack = [];
                    break;
                }
            }
            if (token.type) tokens.push(token);
            if (stack.length > 1) {
                if (stack[0] !== currentState) stack.unshift("#tmp", currentState);
            }
            return {
                tokens: tokens,
                state: stack.length ? stack : currentState
            };
        };
        this.reportError = config.reportError;
    }).call(Tokenizer.prototype);
    exports.Tokenizer = Tokenizer;
});
ace.define("ace/mode/text_highlight_rules", [
    "require",
    "exports",
    "module",
    "ace/lib/lang"
], function(acequire, exports, module) {
    var lang = acequire("../lib/lang");
    var TextHighlightRules = function() {
        this.$rules = {
            "start": [
                {
                    token: "empty_line",
                    regex: '^$'
                },
                {
                    defaultToken: "text"
                }
            ]
        };
    };
    (function() {
        this.addRules = function(rules, prefix) {
            if (!prefix) {
                for(var key in rules)this.$rules[key] = rules[key];
                return;
            }
            for(var key in rules){
                var state = rules[key];
                for(var i = 0; i < state.length; i++){
                    var rule = state[i];
                    if (rule.next || rule.onMatch) {
                        if (typeof rule.next == "string") {
                            if (rule.next.indexOf(prefix) !== 0) rule.next = prefix + rule.next;
                        }
                        if (rule.nextState && rule.nextState.indexOf(prefix) !== 0) rule.nextState = prefix + rule.nextState;
                    }
                }
                this.$rules[prefix + key] = state;
            }
        };
        this.getRules = function() {
            return this.$rules;
        };
        this.embedRules = function(HighlightRules, prefix, escapeRules, states, append) {
            var embedRules = typeof HighlightRules == "function" ? new HighlightRules().getRules() : HighlightRules;
            if (states) for(var i = 0; i < states.length; i++)states[i] = prefix + states[i];
            else {
                states = [];
                for(var key in embedRules)states.push(prefix + key);
            }
            this.addRules(embedRules, prefix);
            if (escapeRules) {
                var addRules = Array.prototype[append ? "push" : "unshift"];
                for(var i = 0; i < states.length; i++)addRules.apply(this.$rules[states[i]], lang.deepCopy(escapeRules));
            }
            if (!this.$embeds) this.$embeds = [];
            this.$embeds.push(prefix);
        };
        this.getEmbeds = function() {
            return this.$embeds;
        };
        var pushState = function(currentState, stack) {
            if (currentState != "start" || stack.length) stack.unshift(this.nextState, currentState);
            return this.nextState;
        };
        var popState = function(currentState, stack) {
            stack.shift();
            return stack.shift() || "start";
        };
        this.normalizeRules = function() {
            var id = 0;
            var rules = this.$rules;
            function processState(key) {
                var state = rules[key];
                state.processed = true;
                for(var i = 0; i < state.length; i++){
                    var rule = state[i];
                    var toInsert = null;
                    if (Array.isArray(rule)) {
                        toInsert = rule;
                        rule = {
                        };
                    }
                    if (!rule.regex && rule.start) {
                        rule.regex = rule.start;
                        if (!rule.next) rule.next = [];
                        rule.next.push({
                            defaultToken: rule.token
                        }, {
                            token: rule.token + ".end",
                            regex: rule.end || rule.start,
                            next: "pop"
                        });
                        rule.token = rule.token + ".start";
                        rule.push = true;
                    }
                    var next = rule.next || rule.push;
                    if (next && Array.isArray(next)) {
                        var stateName = rule.stateName;
                        if (!stateName) {
                            stateName = rule.token;
                            if (typeof stateName != "string") stateName = stateName[0] || "";
                            if (rules[stateName]) stateName += id++;
                        }
                        rules[stateName] = next;
                        rule.next = stateName;
                        processState(stateName);
                    } else if (next == "pop") rule.next = popState;
                    if (rule.push) {
                        rule.nextState = rule.next || rule.push;
                        rule.next = pushState;
                        delete rule.push;
                    }
                    if (rule.rules) for(var r in rule.rules){
                        if (rules[r]) {
                            if (rules[r].push) rules[r].push.apply(rules[r], rule.rules[r]);
                        } else rules[r] = rule.rules[r];
                    }
                    var includeName = typeof rule == "string" ? rule : rule.include;
                    if (includeName) {
                        if (Array.isArray(includeName)) toInsert = includeName.map(function(x) {
                            return rules[x];
                        });
                        else toInsert = rules[includeName];
                    }
                    if (toInsert) {
                        var args = [
                            i,
                            1
                        ].concat(toInsert);
                        if (rule.noEscape) args = args.filter(function(x) {
                            return !x.next;
                        });
                        state.splice.apply(state, args);
                        i--;
                    }
                    if (rule.keywordMap) {
                        rule.token = this.createKeywordMapper(rule.keywordMap, rule.defaultToken || "text", rule.caseInsensitive);
                        delete rule.defaultToken;
                    }
                }
            }
            Object.keys(rules).forEach(processState, this);
        };
        this.createKeywordMapper = function(map, defaultToken, ignoreCase, splitChar) {
            var keywords = Object.create(null);
            Object.keys(map).forEach(function(className) {
                var a = map[className];
                if (ignoreCase) a = a.toLowerCase();
                var list = a.split(splitChar || "|");
                for(var i = list.length; i--;)keywords[list[i]] = className;
            });
            if (Object.getPrototypeOf(keywords)) keywords.__proto__ = null;
            this.$keywordList = Object.keys(keywords);
            map = null;
            return ignoreCase ? function(value) {
                return keywords[value.toLowerCase()] || defaultToken;
            } : function(value) {
                return keywords[value] || defaultToken;
            };
        };
        this.getKeywords = function() {
            return this.$keywords;
        };
    }).call(TextHighlightRules.prototype);
    exports.TextHighlightRules = TextHighlightRules;
});
ace.define("ace/mode/behaviour", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    var Behaviour = function() {
        this.$behaviours = {
        };
    };
    (function() {
        this.add = function(name, action, callback) {
            switch(undefined){
                case this.$behaviours:
                    this.$behaviours = {
                    };
                case this.$behaviours[name]:
                    this.$behaviours[name] = {
                    };
            }
            this.$behaviours[name][action] = callback;
        };
        this.addBehaviours = function(behaviours) {
            for(var key in behaviours)for(var action in behaviours[key])this.add(key, action, behaviours[key][action]);
        };
        this.remove = function(name) {
            if (this.$behaviours && this.$behaviours[name]) delete this.$behaviours[name];
        };
        this.inherit = function(mode, filter) {
            if (typeof mode === "function") var behaviours = new mode().getBehaviours(filter);
            else var behaviours = mode.getBehaviours(filter);
            this.addBehaviours(behaviours);
        };
        this.getBehaviours = function(filter) {
            if (!filter) return this.$behaviours;
            else {
                var ret = {
                };
                for(var i = 0; i < filter.length; i++)if (this.$behaviours[filter[i]]) ret[filter[i]] = this.$behaviours[filter[i]];
                return ret;
            }
        };
    }).call(Behaviour.prototype);
    exports.Behaviour = Behaviour;
});
ace.define("ace/token_iterator", [
    "require",
    "exports",
    "module",
    "ace/range"
], function(acequire, exports, module) {
    var Range1 = acequire("./range").Range;
    var TokenIterator = function(session, initialRow, initialColumn) {
        this.$session = session;
        this.$row = initialRow;
        this.$rowTokens = session.getTokens(initialRow);
        var token = session.getTokenAt(initialRow, initialColumn);
        this.$tokenIndex = token ? token.index : -1;
    };
    (function() {
        this.stepBackward = function() {
            this.$tokenIndex -= 1;
            while(this.$tokenIndex < 0){
                this.$row -= 1;
                if (this.$row < 0) {
                    this.$row = 0;
                    return null;
                }
                this.$rowTokens = this.$session.getTokens(this.$row);
                this.$tokenIndex = this.$rowTokens.length - 1;
            }
            return this.$rowTokens[this.$tokenIndex];
        };
        this.stepForward = function() {
            this.$tokenIndex += 1;
            var rowCount;
            while(this.$tokenIndex >= this.$rowTokens.length){
                this.$row += 1;
                if (!rowCount) rowCount = this.$session.getLength();
                if (this.$row >= rowCount) {
                    this.$row = rowCount - 1;
                    return null;
                }
                this.$rowTokens = this.$session.getTokens(this.$row);
                this.$tokenIndex = 0;
            }
            return this.$rowTokens[this.$tokenIndex];
        };
        this.getCurrentToken = function() {
            return this.$rowTokens[this.$tokenIndex];
        };
        this.getCurrentTokenRow = function() {
            return this.$row;
        };
        this.getCurrentTokenColumn = function() {
            var rowTokens = this.$rowTokens;
            var tokenIndex = this.$tokenIndex;
            var column = rowTokens[tokenIndex].start;
            if (column !== undefined) return column;
            column = 0;
            while(tokenIndex > 0){
                tokenIndex -= 1;
                column += rowTokens[tokenIndex].value.length;
            }
            return column;
        };
        this.getCurrentTokenPosition = function() {
            return {
                row: this.$row,
                column: this.getCurrentTokenColumn()
            };
        };
        this.getCurrentTokenRange = function() {
            var token = this.$rowTokens[this.$tokenIndex];
            var column = this.getCurrentTokenColumn();
            return new Range1(this.$row, column, this.$row, column + token.value.length);
        };
    }).call(TokenIterator.prototype);
    exports.TokenIterator = TokenIterator;
});
ace.define("ace/mode/behaviour/cstyle", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/mode/behaviour",
    "ace/token_iterator",
    "ace/lib/lang"
], function(acequire, exports, module) {
    var oop = acequire("../../lib/oop");
    var Behaviour = acequire("../behaviour").Behaviour;
    var TokenIterator = acequire("../../token_iterator").TokenIterator;
    var lang = acequire("../../lib/lang");
    var SAFE_INSERT_IN_TOKENS = [
        "text",
        "paren.rparen",
        "punctuation.operator"
    ];
    var SAFE_INSERT_BEFORE_TOKENS = [
        "text",
        "paren.rparen",
        "punctuation.operator",
        "comment"
    ];
    var context;
    var contextCache = {
    };
    var defaultQuotes = {
        '"': '"',
        "'": "'"
    };
    var initContext = function(editor) {
        var id = -1;
        if (editor.multiSelect) {
            id = editor.selection.index;
            if (contextCache.rangeCount != editor.multiSelect.rangeCount) contextCache = {
                rangeCount: editor.multiSelect.rangeCount
            };
        }
        if (contextCache[id]) return context = contextCache[id];
        context = contextCache[id] = {
            autoInsertedBrackets: 0,
            autoInsertedRow: -1,
            autoInsertedLineEnd: "",
            maybeInsertedBrackets: 0,
            maybeInsertedRow: -1,
            maybeInsertedLineStart: "",
            maybeInsertedLineEnd: ""
        };
    };
    var getWrapped = function(selection, selected, opening, closing) {
        var rowDiff = selection.end.row - selection.start.row;
        return {
            text: opening + selected + closing,
            selection: [
                0,
                selection.start.column + 1,
                rowDiff,
                selection.end.column + (rowDiff ? 0 : 1)
            ]
        };
    };
    var CstyleBehaviour = function(options) {
        this.add("braces", "insertion", function(state, action, editor, session, text) {
            var cursor = editor.getCursorPosition();
            var line = session.doc.getLine(cursor.row);
            if (text == '{') {
                initContext(editor);
                var selection = editor.getSelectionRange();
                var selected = session.doc.getTextRange(selection);
                if (selected !== "" && selected !== "{" && editor.getWrapBehavioursEnabled()) return getWrapped(selection, selected, '{', '}');
                else if (CstyleBehaviour.isSaneInsertion(editor, session)) {
                    if (/[\]\}\)]/.test(line[cursor.column]) || editor.inMultiSelectMode || options && options.braces) {
                        CstyleBehaviour.recordAutoInsert(editor, session, "}");
                        return {
                            text: '{}',
                            selection: [
                                1,
                                1
                            ]
                        };
                    } else {
                        CstyleBehaviour.recordMaybeInsert(editor, session, "{");
                        return {
                            text: '{',
                            selection: [
                                1,
                                1
                            ]
                        };
                    }
                }
            } else if (text == '}') {
                initContext(editor);
                var rightChar = line.substring(cursor.column, cursor.column + 1);
                if (rightChar == '}') {
                    var matching = session.$findOpeningBracket('}', {
                        column: cursor.column + 1,
                        row: cursor.row
                    });
                    if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {
                        CstyleBehaviour.popAutoInsertedClosing();
                        return {
                            text: '',
                            selection: [
                                1,
                                1
                            ]
                        };
                    }
                }
            } else if (text == "\n" || text == "\r\n") {
                initContext(editor);
                var closing = "";
                if (CstyleBehaviour.isMaybeInsertedClosing(cursor, line)) {
                    closing = lang.stringRepeat("}", context.maybeInsertedBrackets);
                    CstyleBehaviour.clearMaybeInsertedClosing();
                }
                var rightChar = line.substring(cursor.column, cursor.column + 1);
                if (rightChar === '}') {
                    var openBracePos = session.findMatchingBracket({
                        row: cursor.row,
                        column: cursor.column + 1
                    }, '}');
                    if (!openBracePos) return null;
                    var next_indent = this.$getIndent(session.getLine(openBracePos.row));
                } else if (closing) var next_indent = this.$getIndent(line);
                else {
                    CstyleBehaviour.clearMaybeInsertedClosing();
                    return;
                }
                var indent = next_indent + session.getTabString();
                return {
                    text: '\n' + indent + '\n' + next_indent + closing,
                    selection: [
                        1,
                        indent.length,
                        1,
                        indent.length
                    ]
                };
            } else CstyleBehaviour.clearMaybeInsertedClosing();
        });
        this.add("braces", "deletion", function(state, action, editor, session, range) {
            var selected = session.doc.getTextRange(range);
            if (!range.isMultiLine() && selected == '{') {
                initContext(editor);
                var line = session.doc.getLine(range.start.row);
                var rightChar = line.substring(range.end.column, range.end.column + 1);
                if (rightChar == '}') {
                    range.end.column++;
                    return range;
                } else context.maybeInsertedBrackets--;
            }
        });
        this.add("parens", "insertion", function(state, action, editor, session, text) {
            if (text == '(') {
                initContext(editor);
                var selection = editor.getSelectionRange();
                var selected = session.doc.getTextRange(selection);
                if (selected !== "" && editor.getWrapBehavioursEnabled()) return getWrapped(selection, selected, '(', ')');
                else if (CstyleBehaviour.isSaneInsertion(editor, session)) {
                    CstyleBehaviour.recordAutoInsert(editor, session, ")");
                    return {
                        text: '()',
                        selection: [
                            1,
                            1
                        ]
                    };
                }
            } else if (text == ')') {
                initContext(editor);
                var cursor = editor.getCursorPosition();
                var line = session.doc.getLine(cursor.row);
                var rightChar = line.substring(cursor.column, cursor.column + 1);
                if (rightChar == ')') {
                    var matching = session.$findOpeningBracket(')', {
                        column: cursor.column + 1,
                        row: cursor.row
                    });
                    if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {
                        CstyleBehaviour.popAutoInsertedClosing();
                        return {
                            text: '',
                            selection: [
                                1,
                                1
                            ]
                        };
                    }
                }
            }
        });
        this.add("parens", "deletion", function(state, action, editor, session, range) {
            var selected = session.doc.getTextRange(range);
            if (!range.isMultiLine() && selected == '(') {
                initContext(editor);
                var line = session.doc.getLine(range.start.row);
                var rightChar = line.substring(range.start.column + 1, range.start.column + 2);
                if (rightChar == ')') {
                    range.end.column++;
                    return range;
                }
            }
        });
        this.add("brackets", "insertion", function(state, action, editor, session, text) {
            if (text == '[') {
                initContext(editor);
                var selection = editor.getSelectionRange();
                var selected = session.doc.getTextRange(selection);
                if (selected !== "" && editor.getWrapBehavioursEnabled()) return getWrapped(selection, selected, '[', ']');
                else if (CstyleBehaviour.isSaneInsertion(editor, session)) {
                    CstyleBehaviour.recordAutoInsert(editor, session, "]");
                    return {
                        text: '[]',
                        selection: [
                            1,
                            1
                        ]
                    };
                }
            } else if (text == ']') {
                initContext(editor);
                var cursor = editor.getCursorPosition();
                var line = session.doc.getLine(cursor.row);
                var rightChar = line.substring(cursor.column, cursor.column + 1);
                if (rightChar == ']') {
                    var matching = session.$findOpeningBracket(']', {
                        column: cursor.column + 1,
                        row: cursor.row
                    });
                    if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {
                        CstyleBehaviour.popAutoInsertedClosing();
                        return {
                            text: '',
                            selection: [
                                1,
                                1
                            ]
                        };
                    }
                }
            }
        });
        this.add("brackets", "deletion", function(state, action, editor, session, range) {
            var selected = session.doc.getTextRange(range);
            if (!range.isMultiLine() && selected == '[') {
                initContext(editor);
                var line = session.doc.getLine(range.start.row);
                var rightChar = line.substring(range.start.column + 1, range.start.column + 2);
                if (rightChar == ']') {
                    range.end.column++;
                    return range;
                }
            }
        });
        this.add("string_dquotes", "insertion", function(state, action, editor, session, text) {
            var quotes = session.$mode.$quotes || defaultQuotes;
            if (text.length == 1 && quotes[text]) {
                if (this.lineCommentStart && this.lineCommentStart.indexOf(text) != -1) return;
                initContext(editor);
                var quote = text;
                var selection = editor.getSelectionRange();
                var selected = session.doc.getTextRange(selection);
                if (selected !== "" && (selected.length != 1 || !quotes[selected]) && editor.getWrapBehavioursEnabled()) return getWrapped(selection, selected, quote, quote);
                else if (!selected) {
                    var cursor = editor.getCursorPosition();
                    var line = session.doc.getLine(cursor.row);
                    var leftChar = line.substring(cursor.column - 1, cursor.column);
                    var rightChar = line.substring(cursor.column, cursor.column + 1);
                    var token = session.getTokenAt(cursor.row, cursor.column);
                    var rightToken = session.getTokenAt(cursor.row, cursor.column + 1);
                    if (leftChar == "\\" && token && /escape/.test(token.type)) return null;
                    var stringBefore = token && /string|escape/.test(token.type);
                    var stringAfter = !rightToken || /string|escape/.test(rightToken.type);
                    var pair;
                    if (rightChar == quote) {
                        pair = stringBefore !== stringAfter;
                        if (pair && /string\.end/.test(rightToken.type)) pair = false;
                    } else {
                        if (stringBefore && !stringAfter) return null; // wrap string with different quote
                        if (stringBefore && stringAfter) return null; // do not pair quotes inside strings
                        var wordRe = session.$mode.tokenRe;
                        wordRe.lastIndex = 0;
                        var isWordBefore = wordRe.test(leftChar);
                        wordRe.lastIndex = 0;
                        var isWordAfter = wordRe.test(leftChar);
                        if (isWordBefore || isWordAfter) return null; // before or after alphanumeric
                        if (rightChar && !/[\s;,.})\]\\]/.test(rightChar)) return null; // there is rightChar and it isn't closing
                        pair = true;
                    }
                    return {
                        text: pair ? quote + quote : "",
                        selection: [
                            1,
                            1
                        ]
                    };
                }
            }
        });
        this.add("string_dquotes", "deletion", function(state, action, editor, session, range) {
            var selected = session.doc.getTextRange(range);
            if (!range.isMultiLine() && (selected == '"' || selected == "'")) {
                initContext(editor);
                var line = session.doc.getLine(range.start.row);
                var rightChar = line.substring(range.start.column + 1, range.start.column + 2);
                if (rightChar == selected) {
                    range.end.column++;
                    return range;
                }
            }
        });
    };
    CstyleBehaviour.isSaneInsertion = function(editor, session) {
        var cursor = editor.getCursorPosition();
        var iterator = new TokenIterator(session, cursor.row, cursor.column);
        if (!this.$matchTokenType(iterator.getCurrentToken() || "text", SAFE_INSERT_IN_TOKENS)) {
            var iterator2 = new TokenIterator(session, cursor.row, cursor.column + 1);
            if (!this.$matchTokenType(iterator2.getCurrentToken() || "text", SAFE_INSERT_IN_TOKENS)) return false;
        }
        iterator.stepForward();
        return iterator.getCurrentTokenRow() !== cursor.row || this.$matchTokenType(iterator.getCurrentToken() || "text", SAFE_INSERT_BEFORE_TOKENS);
    };
    CstyleBehaviour.$matchTokenType = function(token, types) {
        return types.indexOf(token.type || token) > -1;
    };
    CstyleBehaviour.recordAutoInsert = function(editor, session, bracket) {
        var cursor = editor.getCursorPosition();
        var line = session.doc.getLine(cursor.row);
        if (!this.isAutoInsertedClosing(cursor, line, context.autoInsertedLineEnd[0])) context.autoInsertedBrackets = 0;
        context.autoInsertedRow = cursor.row;
        context.autoInsertedLineEnd = bracket + line.substr(cursor.column);
        context.autoInsertedBrackets++;
    };
    CstyleBehaviour.recordMaybeInsert = function(editor, session, bracket) {
        var cursor = editor.getCursorPosition();
        var line = session.doc.getLine(cursor.row);
        if (!this.isMaybeInsertedClosing(cursor, line)) context.maybeInsertedBrackets = 0;
        context.maybeInsertedRow = cursor.row;
        context.maybeInsertedLineStart = line.substr(0, cursor.column) + bracket;
        context.maybeInsertedLineEnd = line.substr(cursor.column);
        context.maybeInsertedBrackets++;
    };
    CstyleBehaviour.isAutoInsertedClosing = function(cursor, line, bracket) {
        return context.autoInsertedBrackets > 0 && cursor.row === context.autoInsertedRow && bracket === context.autoInsertedLineEnd[0] && line.substr(cursor.column) === context.autoInsertedLineEnd;
    };
    CstyleBehaviour.isMaybeInsertedClosing = function(cursor, line) {
        return context.maybeInsertedBrackets > 0 && cursor.row === context.maybeInsertedRow && line.substr(cursor.column) === context.maybeInsertedLineEnd && line.substr(0, cursor.column) == context.maybeInsertedLineStart;
    };
    CstyleBehaviour.popAutoInsertedClosing = function() {
        context.autoInsertedLineEnd = context.autoInsertedLineEnd.substr(1);
        context.autoInsertedBrackets--;
    };
    CstyleBehaviour.clearMaybeInsertedClosing = function() {
        if (context) {
            context.maybeInsertedBrackets = 0;
            context.maybeInsertedRow = -1;
        }
    };
    oop.inherits(CstyleBehaviour, Behaviour);
    exports.CstyleBehaviour = CstyleBehaviour;
});
ace.define("ace/unicode", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    exports.packages = {
    };
    addUnicodePackage({
        L: "0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
        Ll: "0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",
        Lu: "0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",
        Lt: "01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",
        Lm: "02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",
        Lo: "01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
        M: "0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",
        Mn: "0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",
        Mc: "0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",
        Me: "0488048906DE20DD-20E020E2-20E4A670-A672",
        N: "0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
        Nd: "0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
        Nl: "16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",
        No: "00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",
        P: "0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",
        Pd: "002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",
        Ps: "0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",
        Pe: "0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",
        Pi: "00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",
        Pf: "00BB2019201D203A2E032E052E0A2E0D2E1D2E21",
        Pc: "005F203F20402054FE33FE34FE4D-FE4FFF3F",
        Po: "0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",
        S: "0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",
        Sm: "002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",
        Sc: "002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",
        Sk: "005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",
        So: "00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",
        Z: "002000A01680180E2000-200A20282029202F205F3000",
        Zs: "002000A01680180E2000-200A202F205F3000",
        Zl: "2028",
        Zp: "2029",
        C: "0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",
        Cc: "0000-001F007F-009F",
        Cf: "00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",
        Co: "E000-F8FF",
        Cs: "D800-DFFF",
        Cn: "03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"
    });
    function addUnicodePackage(pack) {
        var codePoint = /\w{4}/g;
        for(var name in pack)exports.packages[name] = pack[name].replace(codePoint, "\\u$&");
    }
});
ace.define("ace/mode/text", [
    "require",
    "exports",
    "module",
    "ace/tokenizer",
    "ace/mode/text_highlight_rules",
    "ace/mode/behaviour/cstyle",
    "ace/unicode",
    "ace/lib/lang",
    "ace/token_iterator",
    "ace/range"
], function(acequire, exports, module) {
    var Tokenizer = acequire("../tokenizer").Tokenizer;
    var TextHighlightRules = acequire("./text_highlight_rules").TextHighlightRules;
    var CstyleBehaviour = acequire("./behaviour/cstyle").CstyleBehaviour;
    var unicode = acequire("../unicode");
    var lang = acequire("../lib/lang");
    var TokenIterator = acequire("../token_iterator").TokenIterator;
    var Range1 = acequire("../range").Range;
    var Mode = function() {
        this.HighlightRules = TextHighlightRules;
    };
    (function() {
        this.$defaultBehaviour = new CstyleBehaviour();
        this.tokenRe = new RegExp("^[" + unicode.packages.L + unicode.packages.Mn + unicode.packages.Mc + unicode.packages.Nd + unicode.packages.Pc + "\\$_]+", "g");
        this.nonTokenRe = new RegExp("^(?:[^" + unicode.packages.L + unicode.packages.Mn + unicode.packages.Mc + unicode.packages.Nd + unicode.packages.Pc + "\\$_]|\\s])+", "g");
        this.getTokenizer = function() {
            if (!this.$tokenizer) {
                this.$highlightRules = this.$highlightRules || new this.HighlightRules(this.$highlightRuleConfig);
                this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());
            }
            return this.$tokenizer;
        };
        this.lineCommentStart = "";
        this.blockComment = "";
        this.toggleCommentLines = function(state, session, startRow, endRow) {
            var doc = session.doc;
            var ignoreBlankLines = true;
            var shouldRemove = true;
            var minIndent = Infinity;
            var tabSize = session.getTabSize();
            var insertAtTabStop = false;
            if (!this.lineCommentStart) {
                if (!this.blockComment) return false;
                var lineCommentStart = this.blockComment.start;
                var lineCommentEnd = this.blockComment.end;
                var regexpStart = new RegExp("^(\\s*)(?:" + lang.escapeRegExp(lineCommentStart) + ")");
                var regexpEnd = new RegExp("(?:" + lang.escapeRegExp(lineCommentEnd) + ")\\s*$");
                var comment = function(line, i) {
                    if (testRemove(line, i)) return;
                    if (!ignoreBlankLines || /\S/.test(line)) {
                        doc.insertInLine({
                            row: i,
                            column: line.length
                        }, lineCommentEnd);
                        doc.insertInLine({
                            row: i,
                            column: minIndent
                        }, lineCommentStart);
                    }
                };
                var uncomment = function(line, i) {
                    var m;
                    if (m = line.match(regexpEnd)) doc.removeInLine(i, line.length - m[0].length, line.length);
                    if (m = line.match(regexpStart)) doc.removeInLine(i, m[1].length, m[0].length);
                };
                var testRemove = function(line, row) {
                    if (regexpStart.test(line)) return true;
                    var tokens = session.getTokens(row);
                    for(var i = 0; i < tokens.length; i++){
                        if (tokens[i].type === "comment") return true;
                    }
                };
            } else {
                if (Array.isArray(this.lineCommentStart)) {
                    var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join("|");
                    var lineCommentStart = this.lineCommentStart[0];
                } else {
                    var regexpStart = lang.escapeRegExp(this.lineCommentStart);
                    var lineCommentStart = this.lineCommentStart;
                }
                regexpStart = new RegExp("^(\\s*)(?:" + regexpStart + ") ?");
                insertAtTabStop = session.getUseSoftTabs();
                var uncomment = function(line, i) {
                    var m = line.match(regexpStart);
                    if (!m) return;
                    var start = m[1].length, end = m[0].length;
                    if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == " ") end--;
                    doc.removeInLine(i, start, end);
                };
                var commentWithSpace = lineCommentStart + " ";
                var comment = function(line, i) {
                    if (!ignoreBlankLines || /\S/.test(line)) {
                        if (shouldInsertSpace(line, minIndent, minIndent)) doc.insertInLine({
                            row: i,
                            column: minIndent
                        }, commentWithSpace);
                        else doc.insertInLine({
                            row: i,
                            column: minIndent
                        }, lineCommentStart);
                    }
                };
                var testRemove = function(line, i) {
                    return regexpStart.test(line);
                };
                var shouldInsertSpace = function(line, before, after) {
                    var spaces = 0;
                    while((before--) && line.charAt(before) == " ")spaces++;
                    if (spaces % tabSize != 0) return false;
                    var spaces = 0;
                    while(line.charAt(after++) == " ")spaces++;
                    if (tabSize > 2) return spaces % tabSize != tabSize - 1;
                    else return spaces % tabSize == 0;
                    return true;
                };
            }
            function iter(fun) {
                for(var i = startRow; i <= endRow; i++)fun(doc.getLine(i), i);
            }
            var minEmptyLength = Infinity;
            iter(function(line, i) {
                var indent = line.search(/\S/);
                if (indent !== -1) {
                    if (indent < minIndent) minIndent = indent;
                    if (shouldRemove && !testRemove(line, i)) shouldRemove = false;
                } else if (minEmptyLength > line.length) minEmptyLength = line.length;
            });
            if (minIndent == Infinity) {
                minIndent = minEmptyLength;
                ignoreBlankLines = false;
                shouldRemove = false;
            }
            if (insertAtTabStop && minIndent % tabSize != 0) minIndent = Math.floor(minIndent / tabSize) * tabSize;
            iter(shouldRemove ? uncomment : comment);
        };
        this.toggleBlockComment = function(state, session, range, cursor) {
            var comment = this.blockComment;
            if (!comment) return;
            if (!comment.start && comment[0]) comment = comment[0];
            var iterator = new TokenIterator(session, cursor.row, cursor.column);
            var token = iterator.getCurrentToken();
            var sel = session.selection;
            var initialRange = session.selection.toOrientedRange();
            var startRow, colDiff;
            if (token && /comment/.test(token.type)) {
                var startRange, endRange;
                while(token && /comment/.test(token.type)){
                    var i = token.value.indexOf(comment.start);
                    if (i != -1) {
                        var row = iterator.getCurrentTokenRow();
                        var column = iterator.getCurrentTokenColumn() + i;
                        startRange = new Range1(row, column, row, column + comment.start.length);
                        break;
                    }
                    token = iterator.stepBackward();
                }
                var iterator = new TokenIterator(session, cursor.row, cursor.column);
                var token = iterator.getCurrentToken();
                while(token && /comment/.test(token.type)){
                    var i = token.value.indexOf(comment.end);
                    if (i != -1) {
                        var row = iterator.getCurrentTokenRow();
                        var column = iterator.getCurrentTokenColumn() + i;
                        endRange = new Range1(row, column, row, column + comment.end.length);
                        break;
                    }
                    token = iterator.stepForward();
                }
                if (endRange) session.remove(endRange);
                if (startRange) {
                    session.remove(startRange);
                    startRow = startRange.start.row;
                    colDiff = -comment.start.length;
                }
            } else {
                colDiff = comment.start.length;
                startRow = range.start.row;
                session.insert(range.end, comment.end);
                session.insert(range.start, comment.start);
            }
            if (initialRange.start.row == startRow) initialRange.start.column += colDiff;
            if (initialRange.end.row == startRow) initialRange.end.column += colDiff;
            session.selection.fromOrientedRange(initialRange);
        };
        this.getNextLineIndent = function(state, line, tab) {
            return this.$getIndent(line);
        };
        this.checkOutdent = function(state, line, input) {
            return false;
        };
        this.autoOutdent = function(state, doc, row) {
        };
        this.$getIndent = function(line) {
            return line.match(/^\s*/)[0];
        };
        this.createWorker = function(session) {
            return null;
        };
        this.createModeDelegates = function(mapping) {
            this.$embeds = [];
            this.$modes = {
            };
            for(var i in mapping)if (mapping[i]) {
                this.$embeds.push(i);
                this.$modes[i] = new mapping[i]();
            }
            var delegations = [
                "toggleBlockComment",
                "toggleCommentLines",
                "getNextLineIndent",
                "checkOutdent",
                "autoOutdent",
                "transformAction",
                "getCompletions"
            ];
            for(var i = 0; i < delegations.length; i++)(function(scope) {
                var functionName = delegations[i];
                var defaultHandler = scope[functionName];
                scope[delegations[i]] = function() {
                    return this.$delegator(functionName, arguments, defaultHandler);
                };
            })(this);
        };
        this.$delegator = function(method, args, defaultHandler) {
            var state = args[0];
            if (typeof state != "string") state = state[0];
            for(var i = 0; i < this.$embeds.length; i++){
                if (!this.$modes[this.$embeds[i]]) continue;
                var split = state.split(this.$embeds[i]);
                if (!split[0] && split[1]) {
                    args[0] = split[1];
                    var mode = this.$modes[this.$embeds[i]];
                    return mode[method].apply(mode, args);
                }
            }
            var ret = defaultHandler.apply(this, args);
            return defaultHandler ? ret : undefined;
        };
        this.transformAction = function(state, action, editor, session, param) {
            if (this.$behaviour) {
                var behaviours = this.$behaviour.getBehaviours();
                for(var key in behaviours)if (behaviours[key][action]) {
                    var ret = behaviours[key][action].apply(this, arguments);
                    if (ret) return ret;
                }
            }
        };
        this.getKeywords = function(append) {
            if (!this.completionKeywords) {
                var rules = this.$tokenizer.rules;
                var completionKeywords = [];
                for(var rule in rules){
                    var ruleItr = rules[rule];
                    for(var r = 0, l = ruleItr.length; r < l; r++){
                        if (typeof ruleItr[r].token === "string") {
                            if (/keyword|support|storage/.test(ruleItr[r].token)) completionKeywords.push(ruleItr[r].regex);
                        } else if (typeof ruleItr[r].token === "object") {
                            for(var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++)if (/keyword|support|storage/.test(ruleItr[r].token[a])) {
                                var rule = ruleItr[r].regex.match(/\(.+?\)/g)[a];
                                completionKeywords.push(rule.substr(1, rule.length - 2));
                            }
                        }
                    }
                }
                this.completionKeywords = completionKeywords;
            }
            if (!append) return this.$keywordList;
            return completionKeywords.concat(this.$keywordList || []);
        };
        this.$createKeywordList = function() {
            if (!this.$highlightRules) this.getTokenizer();
            return this.$keywordList = this.$highlightRules.$keywordList || [];
        };
        this.getCompletions = function(state, session, pos, prefix) {
            var keywords = this.$keywordList || this.$createKeywordList();
            return keywords.map(function(word) {
                return {
                    name: word,
                    value: word,
                    score: 0,
                    meta: "keyword"
                };
            });
        };
        this.$id = "ace/mode/text";
    }).call(Mode.prototype);
    exports.Mode = Mode;
});
ace.define("ace/apply_delta", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    function throwDeltaError(delta, errorText) {
        console.log("Invalid Delta:", delta);
        throw "Invalid Delta: " + errorText;
    }
    function positionInDocument(docLines, position) {
        return position.row >= 0 && position.row < docLines.length && position.column >= 0 && position.column <= docLines[position.row].length;
    }
    function validateDelta(docLines, delta) {
        if (delta.action != "insert" && delta.action != "remove") throwDeltaError(delta, "delta.action must be 'insert' or 'remove'");
        if (!(delta.lines instanceof Array)) throwDeltaError(delta, "delta.lines must be an Array");
        if (!delta.start || !delta.end) throwDeltaError(delta, "delta.start/end must be an present");
        var start = delta.start;
        if (!positionInDocument(docLines, delta.start)) throwDeltaError(delta, "delta.start must be contained in document");
        var end = delta.end;
        if (delta.action == "remove" && !positionInDocument(docLines, end)) throwDeltaError(delta, "delta.end must contained in document for 'remove' actions");
        var numRangeRows = end.row - start.row;
        var numRangeLastLineChars = end.column - (numRangeRows == 0 ? start.column : 0);
        if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars) throwDeltaError(delta, "delta.range must match delta lines");
    }
    exports.applyDelta = function(docLines, delta, doNotValidate) {
        var row = delta.start.row;
        var startColumn = delta.start.column;
        var line = docLines[row] || "";
        switch(delta.action){
            case "insert":
                var lines = delta.lines;
                if (lines.length === 1) docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);
                else {
                    var args = [
                        row,
                        1
                    ].concat(delta.lines);
                    docLines.splice.apply(docLines, args);
                    docLines[row] = line.substring(0, startColumn) + docLines[row];
                    docLines[row + delta.lines.length - 1] += line.substring(startColumn);
                }
                break;
            case "remove":
                var endColumn = delta.end.column;
                var endRow = delta.end.row;
                if (row === endRow) docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);
                else docLines.splice(row, endRow - row + 1, line.substring(0, startColumn) + docLines[endRow].substring(endColumn));
                break;
        }
    };
});
ace.define("ace/anchor", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/event_emitter"
], function(acequire, exports, module) {
    var oop = acequire("./lib/oop");
    var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
    var Anchor = exports.Anchor = function(doc, row, column) {
        this.$onChange = this.onChange.bind(this);
        this.attach(doc);
        if (typeof column == "undefined") this.setPosition(row.row, row.column);
        else this.setPosition(row, column);
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.getPosition = function() {
            return this.$clipPositionToDocument(this.row, this.column);
        };
        this.getDocument = function() {
            return this.document;
        };
        this.$insertRight = false;
        this.onChange = function(delta) {
            if (delta.start.row == delta.end.row && delta.start.row != this.row) return;
            if (delta.start.row > this.row) return;
            var point = $getTransformedPoint(delta, {
                row: this.row,
                column: this.column
            }, this.$insertRight);
            this.setPosition(point.row, point.column, true);
        };
        function $pointsInOrder(point1, point2, equalPointsInOrder) {
            var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;
            return point1.row < point2.row || point1.row == point2.row && bColIsAfter;
        }
        function $getTransformedPoint(delta, point, moveIfEqual) {
            var deltaIsInsert = delta.action == "insert";
            var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row);
            var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);
            var deltaStart = delta.start;
            var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.
            if ($pointsInOrder(point, deltaStart, moveIfEqual)) return {
                row: point.row,
                column: point.column
            };
            if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) return {
                row: point.row + deltaRowShift,
                column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)
            };
            return {
                row: deltaStart.row,
                column: deltaStart.column
            };
        }
        this.setPosition = function(row, column, noClip) {
            var pos;
            if (noClip) pos = {
                row: row,
                column: column
            };
            else pos = this.$clipPositionToDocument(row, column);
            if (this.row == pos.row && this.column == pos.column) return;
            var old = {
                row: this.row,
                column: this.column
            };
            this.row = pos.row;
            this.column = pos.column;
            this._signal("change", {
                old: old,
                value: pos
            });
        };
        this.detach = function() {
            this.document.removeEventListener("change", this.$onChange);
        };
        this.attach = function(doc) {
            this.document = doc || this.document;
            this.document.on("change", this.$onChange);
        };
        this.$clipPositionToDocument = function(row, column) {
            var pos = {
            };
            if (row >= this.document.getLength()) {
                pos.row = Math.max(0, this.document.getLength() - 1);
                pos.column = this.document.getLine(pos.row).length;
            } else if (row < 0) {
                pos.row = 0;
                pos.column = 0;
            } else {
                pos.row = row;
                pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));
            }
            if (column < 0) pos.column = 0;
            return pos;
        };
    }).call(Anchor.prototype);
});
ace.define("ace/document", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/apply_delta",
    "ace/lib/event_emitter",
    "ace/range",
    "ace/anchor"
], function(acequire, exports, module) {
    var oop = acequire("./lib/oop");
    var applyDelta = acequire("./apply_delta").applyDelta;
    var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
    var Range1 = acequire("./range").Range;
    var Anchor = acequire("./anchor").Anchor;
    var Document1 = function(textOrLines) {
        this.$lines = [
            ""
        ];
        if (textOrLines.length === 0) this.$lines = [
            ""
        ];
        else if (Array.isArray(textOrLines)) this.insertMergedLines({
            row: 0,
            column: 0
        }, textOrLines);
        else this.insert({
            row: 0,
            column: 0
        }, textOrLines);
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.setValue = function(text) {
            var len = this.getLength() - 1;
            this.remove(new Range1(0, 0, len, this.getLine(len).length));
            this.insert({
                row: 0,
                column: 0
            }, text);
        };
        this.getValue = function() {
            return this.getAllLines().join(this.getNewLineCharacter());
        };
        this.createAnchor = function(row, column) {
            return new Anchor(this, row, column);
        };
        if ("aaa".split(/a/).length === 0) this.$split = function(text) {
            return text.replace(/\r\n|\r/g, "\n").split("\n");
        };
        else this.$split = function(text) {
            return text.split(/\r\n|\r|\n/);
        };
        this.$detectNewLine = function(text) {
            var match = text.match(/^.*?(\r\n|\r|\n)/m);
            this.$autoNewLine = match ? match[1] : "\n";
            this._signal("changeNewLineMode");
        };
        this.getNewLineCharacter = function() {
            switch(this.$newLineMode){
                case "windows":
                    return "\r\n";
                case "unix":
                    return "\n";
                default:
                    return this.$autoNewLine || "\n";
            }
        };
        this.$autoNewLine = "";
        this.$newLineMode = "auto";
        this.setNewLineMode = function(newLineMode) {
            if (this.$newLineMode === newLineMode) return;
            this.$newLineMode = newLineMode;
            this._signal("changeNewLineMode");
        };
        this.getNewLineMode = function() {
            return this.$newLineMode;
        };
        this.isNewLine = function(text) {
            return text == "\r\n" || text == "\r" || text == "\n";
        };
        this.getLine = function(row) {
            return this.$lines[row] || "";
        };
        this.getLines = function(firstRow, lastRow) {
            return this.$lines.slice(firstRow, lastRow + 1);
        };
        this.getAllLines = function() {
            return this.getLines(0, this.getLength());
        };
        this.getLength = function() {
            return this.$lines.length;
        };
        this.getTextRange = function(range) {
            return this.getLinesForRange(range).join(this.getNewLineCharacter());
        };
        this.getLinesForRange = function(range) {
            var lines;
            if (range.start.row === range.end.row) lines = [
                this.getLine(range.start.row).substring(range.start.column, range.end.column)
            ];
            else {
                lines = this.getLines(range.start.row, range.end.row);
                lines[0] = (lines[0] || "").substring(range.start.column);
                var l = lines.length - 1;
                if (range.end.row - range.start.row == l) lines[l] = lines[l].substring(0, range.end.column);
            }
            return lines;
        };
        this.insertLines = function(row, lines) {
            console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead.");
            return this.insertFullLines(row, lines);
        };
        this.removeLines = function(firstRow, lastRow) {
            console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead.");
            return this.removeFullLines(firstRow, lastRow);
        };
        this.insertNewLine = function(position) {
            console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.");
            return this.insertMergedLines(position, [
                "",
                ""
            ]);
        };
        this.insert = function(position, text) {
            if (this.getLength() <= 1) this.$detectNewLine(text);
            return this.insertMergedLines(position, this.$split(text));
        };
        this.insertInLine = function(position, text) {
            var start = this.clippedPos(position.row, position.column);
            var end = this.pos(position.row, position.column + text.length);
            this.applyDelta({
                start: start,
                end: end,
                action: "insert",
                lines: [
                    text
                ]
            }, true);
            return this.clonePos(end);
        };
        this.clippedPos = function(row, column) {
            var length = this.getLength();
            if (row === undefined) row = length;
            else if (row < 0) row = 0;
            else if (row >= length) {
                row = length - 1;
                column = undefined;
            }
            var line = this.getLine(row);
            if (column == undefined) column = line.length;
            column = Math.min(Math.max(column, 0), line.length);
            return {
                row: row,
                column: column
            };
        };
        this.clonePos = function(pos) {
            return {
                row: pos.row,
                column: pos.column
            };
        };
        this.pos = function(row, column) {
            return {
                row: row,
                column: column
            };
        };
        this.$clipPosition = function(position) {
            var length = this.getLength();
            if (position.row >= length) {
                position.row = Math.max(0, length - 1);
                position.column = this.getLine(length - 1).length;
            } else {
                position.row = Math.max(0, position.row);
                position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);
            }
            return position;
        };
        this.insertFullLines = function(row, lines) {
            row = Math.min(Math.max(row, 0), this.getLength());
            var column = 0;
            if (row < this.getLength()) {
                lines = lines.concat([
                    ""
                ]);
                column = 0;
            } else {
                lines = [
                    ""
                ].concat(lines);
                row--;
                column = this.$lines[row].length;
            }
            this.insertMergedLines({
                row: row,
                column: column
            }, lines);
        };
        this.insertMergedLines = function(position, lines) {
            var start = this.clippedPos(position.row, position.column);
            var end = {
                row: start.row + lines.length - 1,
                column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length
            };
            this.applyDelta({
                start: start,
                end: end,
                action: "insert",
                lines: lines
            });
            return this.clonePos(end);
        };
        this.remove = function(range) {
            var start = this.clippedPos(range.start.row, range.start.column);
            var end = this.clippedPos(range.end.row, range.end.column);
            this.applyDelta({
                start: start,
                end: end,
                action: "remove",
                lines: this.getLinesForRange({
                    start: start,
                    end: end
                })
            });
            return this.clonePos(start);
        };
        this.removeInLine = function(row, startColumn, endColumn) {
            var start = this.clippedPos(row, startColumn);
            var end = this.clippedPos(row, endColumn);
            this.applyDelta({
                start: start,
                end: end,
                action: "remove",
                lines: this.getLinesForRange({
                    start: start,
                    end: end
                })
            }, true);
            return this.clonePos(start);
        };
        this.removeFullLines = function(firstRow, lastRow) {
            firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);
            lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1);
            var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;
            var deleteLastNewLine = lastRow < this.getLength() - 1;
            var startRow = deleteFirstNewLine ? firstRow - 1 : firstRow;
            var startCol = deleteFirstNewLine ? this.getLine(startRow).length : 0;
            var endRow = deleteLastNewLine ? lastRow + 1 : lastRow;
            var endCol = deleteLastNewLine ? 0 : this.getLine(endRow).length;
            var range = new Range1(startRow, startCol, endRow, endCol);
            var deletedLines = this.$lines.slice(firstRow, lastRow + 1);
            this.applyDelta({
                start: range.start,
                end: range.end,
                action: "remove",
                lines: this.getLinesForRange(range)
            });
            return deletedLines;
        };
        this.removeNewLine = function(row) {
            if (row < this.getLength() - 1 && row >= 0) this.applyDelta({
                start: this.pos(row, this.getLine(row).length),
                end: this.pos(row + 1, 0),
                action: "remove",
                lines: [
                    "",
                    ""
                ]
            });
        };
        this.replace = function(range, text) {
            if (!(range instanceof Range1)) range = Range1.fromPoints(range.start, range.end);
            if (text.length === 0 && range.isEmpty()) return range.start;
            if (text == this.getTextRange(range)) return range.end;
            this.remove(range);
            var end;
            if (text) end = this.insert(range.start, text);
            else end = range.start;
            return end;
        };
        this.applyDeltas = function(deltas) {
            for(var i = 0; i < deltas.length; i++)this.applyDelta(deltas[i]);
        };
        this.revertDeltas = function(deltas) {
            for(var i = deltas.length - 1; i >= 0; i--)this.revertDelta(deltas[i]);
        };
        this.applyDelta = function(delta, doNotValidate) {
            var isInsert = delta.action == "insert";
            if (isInsert ? delta.lines.length <= 1 && !delta.lines[0] : !Range1.comparePoints(delta.start, delta.end)) return;
            if (isInsert && delta.lines.length > 20000) this.$splitAndapplyLargeDelta(delta, 20000);
            applyDelta(this.$lines, delta, doNotValidate);
            this._signal("change", delta);
        };
        this.$splitAndapplyLargeDelta = function(delta, MAX) {
            var lines = delta.lines;
            var l = lines.length;
            var row = delta.start.row;
            var column = delta.start.column;
            var from = 0, to = 0;
            do {
                from = to;
                to += MAX - 1;
                var chunk = lines.slice(from, to);
                if (to > l) {
                    delta.lines = chunk;
                    delta.start.row = row + from;
                    delta.start.column = column;
                    break;
                }
                chunk.push("");
                this.applyDelta({
                    start: this.pos(row + from, column),
                    end: this.pos(row + to, column = 0),
                    action: delta.action,
                    lines: chunk
                }, true);
            }while (true)
        };
        this.revertDelta = function(delta) {
            this.applyDelta({
                start: this.clonePos(delta.start),
                end: this.clonePos(delta.end),
                action: delta.action == "insert" ? "remove" : "insert",
                lines: delta.lines.slice()
            });
        };
        this.indexToPosition = function(index, startRow) {
            var lines = this.$lines || this.getAllLines();
            var newlineLength = this.getNewLineCharacter().length;
            for(var i = startRow || 0, l = lines.length; i < l; i++){
                index -= lines[i].length + newlineLength;
                if (index < 0) return {
                    row: i,
                    column: index + lines[i].length + newlineLength
                };
            }
            return {
                row: l - 1,
                column: lines[l - 1].length
            };
        };
        this.positionToIndex = function(pos, startRow) {
            var lines = this.$lines || this.getAllLines();
            var newlineLength = this.getNewLineCharacter().length;
            var index = 0;
            var row = Math.min(pos.row, lines.length);
            for(var i = startRow || 0; i < row; ++i)index += lines[i].length + newlineLength;
            return index + pos.column;
        };
    }).call(Document1.prototype);
    exports.Document = Document1;
});
ace.define("ace/background_tokenizer", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/event_emitter"
], function(acequire, exports, module) {
    var oop = acequire("./lib/oop");
    var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
    var BackgroundTokenizer = function(tokenizer, editor) {
        this.running = false;
        this.lines = [];
        this.states = [];
        this.currentLine = 0;
        this.tokenizer = tokenizer;
        var self = this;
        this.$worker = function() {
            if (!self.running) return;
            var workerStart = new Date();
            var currentLine = self.currentLine;
            var endLine = -1;
            var doc = self.doc;
            var startLine = currentLine;
            while(self.lines[currentLine])currentLine++;
            var len = doc.getLength();
            var processedLines = 0;
            self.running = false;
            while(currentLine < len){
                self.$tokenizeRow(currentLine);
                endLine = currentLine;
                do currentLine++;
                while (self.lines[currentLine])
                processedLines++;
                if (processedLines % 5 === 0 && new Date() - workerStart > 20) {
                    self.running = setTimeout(self.$worker, 20);
                    break;
                }
            }
            self.currentLine = currentLine;
            if (endLine == -1) endLine = currentLine;
            if (startLine <= endLine) self.fireUpdateEvent(startLine, endLine);
        };
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.setTokenizer = function(tokenizer) {
            this.tokenizer = tokenizer;
            this.lines = [];
            this.states = [];
            this.start(0);
        };
        this.setDocument = function(doc) {
            this.doc = doc;
            this.lines = [];
            this.states = [];
            this.stop();
        };
        this.fireUpdateEvent = function(firstRow, lastRow) {
            var data = {
                first: firstRow,
                last: lastRow
            };
            this._signal("update", {
                data: data
            });
        };
        this.start = function(startRow) {
            this.currentLine = Math.min(startRow || 0, this.currentLine, this.doc.getLength());
            this.lines.splice(this.currentLine, this.lines.length);
            this.states.splice(this.currentLine, this.states.length);
            this.stop();
            this.running = setTimeout(this.$worker, 700);
        };
        this.scheduleStart = function() {
            if (!this.running) this.running = setTimeout(this.$worker, 700);
        };
        this.$updateOnChange = function(delta) {
            var startRow = delta.start.row;
            var len = delta.end.row - startRow;
            if (len === 0) this.lines[startRow] = null;
            else if (delta.action == "remove") {
                this.lines.splice(startRow, len + 1, null);
                this.states.splice(startRow, len + 1, null);
            } else {
                var args = Array(len + 1);
                args.unshift(startRow, 1);
                this.lines.splice.apply(this.lines, args);
                this.states.splice.apply(this.states, args);
            }
            this.currentLine = Math.min(startRow, this.currentLine, this.doc.getLength());
            this.stop();
        };
        this.stop = function() {
            if (this.running) clearTimeout(this.running);
            this.running = false;
        };
        this.getTokens = function(row) {
            return this.lines[row] || this.$tokenizeRow(row);
        };
        this.getState = function(row) {
            if (this.currentLine == row) this.$tokenizeRow(row);
            return this.states[row] || "start";
        };
        this.$tokenizeRow = function(row) {
            var line = this.doc.getLine(row);
            var state = this.states[row - 1];
            var data = this.tokenizer.getLineTokens(line, state, row);
            if (this.states[row] + "" !== data.state + "") {
                this.states[row] = data.state;
                this.lines[row + 1] = null;
                if (this.currentLine > row + 1) this.currentLine = row + 1;
            } else if (this.currentLine == row) this.currentLine = row + 1;
            return this.lines[row] = data.tokens;
        };
    }).call(BackgroundTokenizer.prototype);
    exports.BackgroundTokenizer = BackgroundTokenizer;
});
ace.define("ace/search_highlight", [
    "require",
    "exports",
    "module",
    "ace/lib/lang",
    "ace/lib/oop",
    "ace/range"
], function(acequire, exports, module) {
    var lang = acequire("./lib/lang");
    var oop = acequire("./lib/oop");
    var Range1 = acequire("./range").Range;
    var SearchHighlight = function(regExp, clazz, type) {
        this.setRegexp(regExp);
        this.clazz = clazz;
        this.type = type || "text";
    };
    (function() {
        this.MAX_RANGES = 500;
        this.setRegexp = function(regExp) {
            if (this.regExp + "" == regExp + "") return;
            this.regExp = regExp;
            this.cache = [];
        };
        this.update = function(html, markerLayer, session, config) {
            if (!this.regExp) return;
            var start = config.firstRow, end = config.lastRow;
            for(var i = start; i <= end; i++){
                var ranges = this.cache[i];
                if (ranges == null) {
                    ranges = lang.getMatchOffsets(session.getLine(i), this.regExp);
                    if (ranges.length > this.MAX_RANGES) ranges = ranges.slice(0, this.MAX_RANGES);
                    ranges = ranges.map(function(match) {
                        return new Range1(i, match.offset, i, match.offset + match.length);
                    });
                    this.cache[i] = ranges.length ? ranges : "";
                }
                for(var j = ranges.length; j--;)markerLayer.drawSingleLineMarker(html, ranges[j].toScreenRange(session), this.clazz, config);
            }
        };
    }).call(SearchHighlight.prototype);
    exports.SearchHighlight = SearchHighlight;
});
ace.define("ace/edit_session/fold_line", [
    "require",
    "exports",
    "module",
    "ace/range"
], function(acequire, exports, module) {
    var Range1 = acequire("../range").Range;
    function FoldLine(foldData, folds) {
        this.foldData = foldData;
        if (Array.isArray(folds)) this.folds = folds;
        else folds = this.folds = [
            folds
        ];
        var last = folds[folds.length - 1];
        this.range = new Range1(folds[0].start.row, folds[0].start.column, last.end.row, last.end.column);
        this.start = this.range.start;
        this.end = this.range.end;
        this.folds.forEach(function(fold) {
            fold.setFoldLine(this);
        }, this);
    }
    (function() {
        this.shiftRow = function(shift) {
            this.start.row += shift;
            this.end.row += shift;
            this.folds.forEach(function(fold) {
                fold.start.row += shift;
                fold.end.row += shift;
            });
        };
        this.addFold = function(fold) {
            if (fold.sameRow) {
                if (fold.start.row < this.startRow || fold.endRow > this.endRow) throw new Error("Can't add a fold to this FoldLine as it has no connection");
                this.folds.push(fold);
                this.folds.sort(function(a, b) {
                    return -a.range.compareEnd(b.start.row, b.start.column);
                });
                if (this.range.compareEnd(fold.start.row, fold.start.column) > 0) {
                    this.end.row = fold.end.row;
                    this.end.column = fold.end.column;
                } else if (this.range.compareStart(fold.end.row, fold.end.column) < 0) {
                    this.start.row = fold.start.row;
                    this.start.column = fold.start.column;
                }
            } else if (fold.start.row == this.end.row) {
                this.folds.push(fold);
                this.end.row = fold.end.row;
                this.end.column = fold.end.column;
            } else if (fold.end.row == this.start.row) {
                this.folds.unshift(fold);
                this.start.row = fold.start.row;
                this.start.column = fold.start.column;
            } else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");
            fold.foldLine = this;
        };
        this.containsRow = function(row) {
            return row >= this.start.row && row <= this.end.row;
        };
        this.walk = function(callback, endRow, endColumn) {
            var lastEnd = 0, folds = this.folds, fold, cmp, stop, isNewRow = true;
            if (endRow == null) {
                endRow = this.end.row;
                endColumn = this.end.column;
            }
            for(var i = 0; i < folds.length; i++){
                fold = folds[i];
                cmp = fold.range.compareStart(endRow, endColumn);
                if (cmp == -1) {
                    callback(null, endRow, endColumn, lastEnd, isNewRow);
                    return;
                }
                stop = callback(null, fold.start.row, fold.start.column, lastEnd, isNewRow);
                stop = !stop && callback(fold.placeholder, fold.start.row, fold.start.column, lastEnd);
                if (stop || cmp === 0) return;
                isNewRow = !fold.sameRow;
                lastEnd = fold.end.column;
            }
            callback(null, endRow, endColumn, lastEnd, isNewRow);
        };
        this.getNextFoldTo = function(row, column) {
            var fold, cmp;
            for(var i = 0; i < this.folds.length; i++){
                fold = this.folds[i];
                cmp = fold.range.compareEnd(row, column);
                if (cmp == -1) return {
                    fold: fold,
                    kind: "after"
                };
                else if (cmp === 0) return {
                    fold: fold,
                    kind: "inside"
                };
            }
            return null;
        };
        this.addRemoveChars = function(row, column, len) {
            var ret = this.getNextFoldTo(row, column), fold, folds;
            if (ret) {
                fold = ret.fold;
                if (ret.kind == "inside" && fold.start.column != column && fold.start.row != row) window.console && window.console.log(row, column, fold);
                else if (fold.start.row == row) {
                    folds = this.folds;
                    var i = folds.indexOf(fold);
                    if (i === 0) this.start.column += len;
                    for(; i < folds.length; i++){
                        fold = folds[i];
                        fold.start.column += len;
                        if (!fold.sameRow) return;
                        fold.end.column += len;
                    }
                    this.end.column += len;
                }
            }
        };
        this.split = function(row, column) {
            var pos = this.getNextFoldTo(row, column);
            if (!pos || pos.kind == "inside") return null;
            var fold = pos.fold;
            var folds = this.folds;
            var foldData = this.foldData;
            var i = folds.indexOf(fold);
            var foldBefore = folds[i - 1];
            this.end.row = foldBefore.end.row;
            this.end.column = foldBefore.end.column;
            folds = folds.splice(i, folds.length - i);
            var newFoldLine = new FoldLine(foldData, folds);
            foldData.splice(foldData.indexOf(this) + 1, 0, newFoldLine);
            return newFoldLine;
        };
        this.merge = function(foldLineNext) {
            var folds = foldLineNext.folds;
            for(var i = 0; i < folds.length; i++)this.addFold(folds[i]);
            var foldData = this.foldData;
            foldData.splice(foldData.indexOf(foldLineNext), 1);
        };
        this.toString = function() {
            var ret = [
                this.range.toString() + ": ["
            ];
            this.folds.forEach(function(fold) {
                ret.push("  " + fold.toString());
            });
            ret.push("]");
            return ret.join("\n");
        };
        this.idxToPosition = function(idx) {
            var lastFoldEndColumn = 0;
            for(var i = 0; i < this.folds.length; i++){
                var fold = this.folds[i];
                idx -= fold.start.column - lastFoldEndColumn;
                if (idx < 0) return {
                    row: fold.start.row,
                    column: fold.start.column + idx
                };
                idx -= fold.placeholder.length;
                if (idx < 0) return fold.start;
                lastFoldEndColumn = fold.end.column;
            }
            return {
                row: this.end.row,
                column: this.end.column + idx
            };
        };
    }).call(FoldLine.prototype);
    exports.FoldLine = FoldLine;
});
ace.define("ace/range_list", [
    "require",
    "exports",
    "module",
    "ace/range"
], function(acequire, exports, module) {
    var Range1 = acequire("./range").Range;
    var comparePoints = Range1.comparePoints;
    var RangeList = function() {
        this.ranges = [];
    };
    (function() {
        this.comparePoints = comparePoints;
        this.pointIndex = function(pos, excludeEdges, startIndex) {
            var list = this.ranges;
            for(var i = startIndex || 0; i < list.length; i++){
                var range = list[i];
                var cmpEnd = comparePoints(pos, range.end);
                if (cmpEnd > 0) continue;
                var cmpStart = comparePoints(pos, range.start);
                if (cmpEnd === 0) return excludeEdges && cmpStart !== 0 ? -i - 2 : i;
                if (cmpStart > 0 || cmpStart === 0 && !excludeEdges) return i;
                return -i - 1;
            }
            return -i - 1;
        };
        this.add = function(range) {
            var excludeEdges = !range.isEmpty();
            var startIndex = this.pointIndex(range.start, excludeEdges);
            if (startIndex < 0) startIndex = -startIndex - 1;
            var endIndex = this.pointIndex(range.end, excludeEdges, startIndex);
            if (endIndex < 0) endIndex = -endIndex - 1;
            else endIndex++;
            return this.ranges.splice(startIndex, endIndex - startIndex, range);
        };
        this.addList = function(list) {
            var removed = [];
            for(var i = list.length; i--;)removed.push.apply(removed, this.add(list[i]));
            return removed;
        };
        this.substractPoint = function(pos) {
            var i = this.pointIndex(pos);
            if (i >= 0) return this.ranges.splice(i, 1);
        };
        this.merge = function() {
            var removed = [];
            var list = this.ranges;
            list = list.sort(function(a, b) {
                return comparePoints(a.start, b.start);
            });
            var next = list[0], range;
            for(var i = 1; i < list.length; i++){
                range = next;
                next = list[i];
                var cmp = comparePoints(range.end, next.start);
                if (cmp < 0) continue;
                if (cmp == 0 && !range.isEmpty() && !next.isEmpty()) continue;
                if (comparePoints(range.end, next.end) < 0) {
                    range.end.row = next.end.row;
                    range.end.column = next.end.column;
                }
                list.splice(i, 1);
                removed.push(next);
                next = range;
                i--;
            }
            this.ranges = list;
            return removed;
        };
        this.contains = function(row, column) {
            return this.pointIndex({
                row: row,
                column: column
            }) >= 0;
        };
        this.containsPoint = function(pos) {
            return this.pointIndex(pos) >= 0;
        };
        this.rangeAtPoint = function(pos) {
            var i = this.pointIndex(pos);
            if (i >= 0) return this.ranges[i];
        };
        this.clipRows = function(startRow, endRow) {
            var list = this.ranges;
            if (list[0].start.row > endRow || list[list.length - 1].start.row < startRow) return [];
            var startIndex = this.pointIndex({
                row: startRow,
                column: 0
            });
            if (startIndex < 0) startIndex = -startIndex - 1;
            var endIndex = this.pointIndex({
                row: endRow,
                column: 0
            }, startIndex);
            if (endIndex < 0) endIndex = -endIndex - 1;
            var clipped = [];
            for(var i = startIndex; i < endIndex; i++)clipped.push(list[i]);
            return clipped;
        };
        this.removeAll = function() {
            return this.ranges.splice(0, this.ranges.length);
        };
        this.attach = function(session) {
            if (this.session) this.detach();
            this.session = session;
            this.onChange = this.$onChange.bind(this);
            this.session.on('change', this.onChange);
        };
        this.detach = function() {
            if (!this.session) return;
            this.session.removeListener('change', this.onChange);
            this.session = null;
        };
        this.$onChange = function(delta) {
            if (delta.action == "insert") {
                var start = delta.start;
                var end = delta.end;
            } else {
                var end = delta.start;
                var start = delta.end;
            }
            var startRow = start.row;
            var endRow = end.row;
            var lineDif = endRow - startRow;
            var colDiff = -start.column + end.column;
            var ranges = this.ranges;
            for(var i = 0, n = ranges.length; i < n; i++){
                var r = ranges[i];
                if (r.end.row < startRow) continue;
                if (r.start.row > startRow) break;
                if (r.start.row == startRow && r.start.column >= start.column) {
                    if (r.start.column == start.column && this.$insertRight) ;
                    else {
                        r.start.column += colDiff;
                        r.start.row += lineDif;
                    }
                }
                if (r.end.row == startRow && r.end.column >= start.column) {
                    if (r.end.column == start.column && this.$insertRight) continue;
                    if (r.end.column == start.column && colDiff > 0 && i < n - 1) {
                        if (r.end.column > r.start.column && r.end.column == ranges[i + 1].start.column) r.end.column -= colDiff;
                    }
                    r.end.column += colDiff;
                    r.end.row += lineDif;
                }
            }
            if (lineDif != 0 && i < n) for(; i < n; i++){
                var r = ranges[i];
                r.start.row += lineDif;
                r.end.row += lineDif;
            }
        };
    }).call(RangeList.prototype);
    exports.RangeList = RangeList;
});
ace.define("ace/edit_session/fold", [
    "require",
    "exports",
    "module",
    "ace/range",
    "ace/range_list",
    "ace/lib/oop"
], function(acequire, exports, module) {
    var Range1 = acequire("../range").Range;
    var RangeList = acequire("../range_list").RangeList;
    var oop = acequire("../lib/oop");
    var Fold = exports.Fold = function(range, placeholder) {
        this.foldLine = null;
        this.placeholder = placeholder;
        this.range = range;
        this.start = range.start;
        this.end = range.end;
        this.sameRow = range.start.row == range.end.row;
        this.subFolds = this.ranges = [];
    };
    oop.inherits(Fold, RangeList);
    (function() {
        this.toString = function() {
            return '"' + this.placeholder + '" ' + this.range.toString();
        };
        this.setFoldLine = function(foldLine) {
            this.foldLine = foldLine;
            this.subFolds.forEach(function(fold) {
                fold.setFoldLine(foldLine);
            });
        };
        this.clone = function() {
            var range = this.range.clone();
            var fold = new Fold(range, this.placeholder);
            this.subFolds.forEach(function(subFold) {
                fold.subFolds.push(subFold.clone());
            });
            fold.collapseChildren = this.collapseChildren;
            return fold;
        };
        this.addSubFold = function(fold) {
            if (this.range.isEqual(fold)) return;
            if (!this.range.containsRange(fold)) throw new Error("A fold can't intersect already existing fold" + fold.range + this.range);
            consumeRange(fold, this.start);
            var row = fold.start.row, column = fold.start.column;
            for(var i = 0, cmp = -1; i < this.subFolds.length; i++){
                cmp = this.subFolds[i].range.compare(row, column);
                if (cmp != 1) break;
            }
            var afterStart = this.subFolds[i];
            if (cmp == 0) return afterStart.addSubFold(fold);
            var row = fold.range.end.row, column = fold.range.end.column;
            for(var j = i, cmp = -1; j < this.subFolds.length; j++){
                cmp = this.subFolds[j].range.compare(row, column);
                if (cmp != 1) break;
            }
            var afterEnd = this.subFolds[j];
            if (cmp == 0) throw new Error("A fold can't intersect already existing fold" + fold.range + this.range);
            var consumedFolds = this.subFolds.splice(i, j - i, fold);
            fold.setFoldLine(this.foldLine);
            return fold;
        };
        this.restoreRange = function(range) {
            return restoreRange(range, this.start);
        };
    }).call(Fold.prototype);
    function consumePoint(point, anchor) {
        point.row -= anchor.row;
        if (point.row == 0) point.column -= anchor.column;
    }
    function consumeRange(range, anchor) {
        consumePoint(range.start, anchor);
        consumePoint(range.end, anchor);
    }
    function restorePoint(point, anchor) {
        if (point.row == 0) point.column += anchor.column;
        point.row += anchor.row;
    }
    function restoreRange(range, anchor) {
        restorePoint(range.start, anchor);
        restorePoint(range.end, anchor);
    }
});
ace.define("ace/edit_session/folding", [
    "require",
    "exports",
    "module",
    "ace/range",
    "ace/edit_session/fold_line",
    "ace/edit_session/fold",
    "ace/token_iterator"
], function(acequire, exports, module) {
    var Range1 = acequire("../range").Range;
    var FoldLine = acequire("./fold_line").FoldLine;
    var Fold = acequire("./fold").Fold;
    var TokenIterator = acequire("../token_iterator").TokenIterator;
    function Folding() {
        this.getFoldAt = function(row, column, side) {
            var foldLine = this.getFoldLine(row);
            if (!foldLine) return null;
            var folds = foldLine.folds;
            for(var i = 0; i < folds.length; i++){
                var fold = folds[i];
                if (fold.range.contains(row, column)) {
                    if (side == 1 && fold.range.isEnd(row, column)) continue;
                    else if (side == -1 && fold.range.isStart(row, column)) continue;
                    return fold;
                }
            }
        };
        this.getFoldsInRange = function(range) {
            var start = range.start;
            var end = range.end;
            var foldLines = this.$foldData;
            var foundFolds = [];
            start.column += 1;
            end.column -= 1;
            for(var i = 0; i < foldLines.length; i++){
                var cmp = foldLines[i].range.compareRange(range);
                if (cmp == 2) continue;
                else if (cmp == -2) break;
                var folds = foldLines[i].folds;
                for(var j = 0; j < folds.length; j++){
                    var fold = folds[j];
                    cmp = fold.range.compareRange(range);
                    if (cmp == -2) break;
                    else if (cmp == 2) continue;
                    else if (cmp == 42) break;
                    foundFolds.push(fold);
                }
            }
            start.column -= 1;
            end.column += 1;
            return foundFolds;
        };
        this.getFoldsInRangeList = function(ranges) {
            if (Array.isArray(ranges)) {
                var folds = [];
                ranges.forEach(function(range) {
                    folds = folds.concat(this.getFoldsInRange(range));
                }, this);
            } else var folds = this.getFoldsInRange(ranges);
            return folds;
        };
        this.getAllFolds = function() {
            var folds = [];
            var foldLines = this.$foldData;
            for(var i = 0; i < foldLines.length; i++)for(var j = 0; j < foldLines[i].folds.length; j++)folds.push(foldLines[i].folds[j]);
            return folds;
        };
        this.getFoldStringAt = function(row, column, trim, foldLine) {
            foldLine = foldLine || this.getFoldLine(row);
            if (!foldLine) return null;
            var lastFold = {
                end: {
                    column: 0
                }
            };
            var str, fold;
            for(var i = 0; i < foldLine.folds.length; i++){
                fold = foldLine.folds[i];
                var cmp = fold.range.compareEnd(row, column);
                if (cmp == -1) {
                    str = this.getLine(fold.start.row).substring(lastFold.end.column, fold.start.column);
                    break;
                } else if (cmp === 0) return null;
                lastFold = fold;
            }
            if (!str) str = this.getLine(fold.start.row).substring(lastFold.end.column);
            if (trim == -1) return str.substring(0, column - lastFold.end.column);
            else if (trim == 1) return str.substring(column - lastFold.end.column);
            else return str;
        };
        this.getFoldLine = function(docRow, startFoldLine) {
            var foldData = this.$foldData;
            var i = 0;
            if (startFoldLine) i = foldData.indexOf(startFoldLine);
            if (i == -1) i = 0;
            for(; i < foldData.length; i++){
                var foldLine = foldData[i];
                if (foldLine.start.row <= docRow && foldLine.end.row >= docRow) return foldLine;
                else if (foldLine.end.row > docRow) return null;
            }
            return null;
        };
        this.getNextFoldLine = function(docRow, startFoldLine) {
            var foldData = this.$foldData;
            var i = 0;
            if (startFoldLine) i = foldData.indexOf(startFoldLine);
            if (i == -1) i = 0;
            for(; i < foldData.length; i++){
                var foldLine = foldData[i];
                if (foldLine.end.row >= docRow) return foldLine;
            }
            return null;
        };
        this.getFoldedRowCount = function(first, last) {
            var foldData = this.$foldData, rowCount = last - first + 1;
            for(var i = 0; i < foldData.length; i++){
                var foldLine = foldData[i], end = foldLine.end.row, start = foldLine.start.row;
                if (end >= last) {
                    if (start < last) {
                        if (start >= first) rowCount -= last - start;
                        else rowCount = 0; // in one fold
                    }
                    break;
                } else if (end >= first) {
                    if (start >= first) rowCount -= end - start;
                    else rowCount -= end - first + 1;
                }
            }
            return rowCount;
        };
        this.$addFoldLine = function(foldLine) {
            this.$foldData.push(foldLine);
            this.$foldData.sort(function(a, b) {
                return a.start.row - b.start.row;
            });
            return foldLine;
        };
        this.addFold = function(placeholder, range) {
            var foldData = this.$foldData;
            var added = false;
            var fold;
            if (placeholder instanceof Fold) fold = placeholder;
            else {
                fold = new Fold(range, placeholder);
                fold.collapseChildren = range.collapseChildren;
            }
            this.$clipRangeToDocument(fold.range);
            var startRow = fold.start.row;
            var startColumn = fold.start.column;
            var endRow = fold.end.row;
            var endColumn = fold.end.column;
            if (!(startRow < endRow || startRow == endRow && startColumn <= endColumn - 2)) throw new Error("The range has to be at least 2 characters width");
            var startFold = this.getFoldAt(startRow, startColumn, 1);
            var endFold = this.getFoldAt(endRow, endColumn, -1);
            if (startFold && endFold == startFold) return startFold.addSubFold(fold);
            if (startFold && !startFold.range.isStart(startRow, startColumn)) this.removeFold(startFold);
            if (endFold && !endFold.range.isEnd(endRow, endColumn)) this.removeFold(endFold);
            var folds = this.getFoldsInRange(fold.range);
            if (folds.length > 0) {
                this.removeFolds(folds);
                folds.forEach(function(subFold) {
                    fold.addSubFold(subFold);
                });
            }
            for(var i = 0; i < foldData.length; i++){
                var foldLine = foldData[i];
                if (endRow == foldLine.start.row) {
                    foldLine.addFold(fold);
                    added = true;
                    break;
                } else if (startRow == foldLine.end.row) {
                    foldLine.addFold(fold);
                    added = true;
                    if (!fold.sameRow) {
                        var foldLineNext = foldData[i + 1];
                        if (foldLineNext && foldLineNext.start.row == endRow) {
                            foldLine.merge(foldLineNext);
                            break;
                        }
                    }
                    break;
                } else if (endRow <= foldLine.start.row) break;
            }
            if (!added) foldLine = this.$addFoldLine(new FoldLine(this.$foldData, fold));
            if (this.$useWrapMode) this.$updateWrapData(foldLine.start.row, foldLine.start.row);
            else this.$updateRowLengthCache(foldLine.start.row, foldLine.start.row);
            this.$modified = true;
            this._signal("changeFold", {
                data: fold,
                action: "add"
            });
            return fold;
        };
        this.addFolds = function(folds) {
            folds.forEach(function(fold) {
                this.addFold(fold);
            }, this);
        };
        this.removeFold = function(fold) {
            var foldLine = fold.foldLine;
            var startRow = foldLine.start.row;
            var endRow = foldLine.end.row;
            var foldLines = this.$foldData;
            var folds = foldLine.folds;
            if (folds.length == 1) foldLines.splice(foldLines.indexOf(foldLine), 1);
            else if (foldLine.range.isEnd(fold.end.row, fold.end.column)) {
                folds.pop();
                foldLine.end.row = folds[folds.length - 1].end.row;
                foldLine.end.column = folds[folds.length - 1].end.column;
            } else if (foldLine.range.isStart(fold.start.row, fold.start.column)) {
                folds.shift();
                foldLine.start.row = folds[0].start.row;
                foldLine.start.column = folds[0].start.column;
            } else if (fold.sameRow) folds.splice(folds.indexOf(fold), 1);
            else {
                var newFoldLine = foldLine.split(fold.start.row, fold.start.column);
                folds = newFoldLine.folds;
                folds.shift();
                newFoldLine.start.row = folds[0].start.row;
                newFoldLine.start.column = folds[0].start.column;
            }
            if (!this.$updating) {
                if (this.$useWrapMode) this.$updateWrapData(startRow, endRow);
                else this.$updateRowLengthCache(startRow, endRow);
            }
            this.$modified = true;
            this._signal("changeFold", {
                data: fold,
                action: "remove"
            });
        };
        this.removeFolds = function(folds) {
            var cloneFolds = [];
            for(var i = 0; i < folds.length; i++)cloneFolds.push(folds[i]);
            cloneFolds.forEach(function(fold) {
                this.removeFold(fold);
            }, this);
            this.$modified = true;
        };
        this.expandFold = function(fold) {
            this.removeFold(fold);
            fold.subFolds.forEach(function(subFold) {
                fold.restoreRange(subFold);
                this.addFold(subFold);
            }, this);
            if (fold.collapseChildren > 0) this.foldAll(fold.start.row + 1, fold.end.row, fold.collapseChildren - 1);
            fold.subFolds = [];
        };
        this.expandFolds = function(folds) {
            folds.forEach(function(fold) {
                this.expandFold(fold);
            }, this);
        };
        this.unfold = function(location, expandInner) {
            var range, folds;
            if (location == null) {
                range = new Range1(0, 0, this.getLength(), 0);
                expandInner = true;
            } else if (typeof location == "number") range = new Range1(location, 0, location, this.getLine(location).length);
            else if ("row" in location) range = Range1.fromPoints(location, location);
            else range = location;
            folds = this.getFoldsInRangeList(range);
            if (expandInner) this.removeFolds(folds);
            else {
                var subFolds = folds;
                while(subFolds.length){
                    this.expandFolds(subFolds);
                    subFolds = this.getFoldsInRangeList(range);
                }
            }
            if (folds.length) return folds;
        };
        this.isRowFolded = function(docRow, startFoldRow) {
            return !!this.getFoldLine(docRow, startFoldRow);
        };
        this.getRowFoldEnd = function(docRow, startFoldRow) {
            var foldLine = this.getFoldLine(docRow, startFoldRow);
            return foldLine ? foldLine.end.row : docRow;
        };
        this.getRowFoldStart = function(docRow, startFoldRow) {
            var foldLine = this.getFoldLine(docRow, startFoldRow);
            return foldLine ? foldLine.start.row : docRow;
        };
        this.getFoldDisplayLine = function(foldLine, endRow, endColumn, startRow, startColumn) {
            if (startRow == null) startRow = foldLine.start.row;
            if (startColumn == null) startColumn = 0;
            if (endRow == null) endRow = foldLine.end.row;
            if (endColumn == null) endColumn = this.getLine(endRow).length;
            var doc = this.doc;
            var textLine = "";
            foldLine.walk(function(placeholder, row, column, lastColumn) {
                if (row < startRow) return;
                if (row == startRow) {
                    if (column < startColumn) return;
                    lastColumn = Math.max(startColumn, lastColumn);
                }
                if (placeholder != null) textLine += placeholder;
                else textLine += doc.getLine(row).substring(lastColumn, column);
            }, endRow, endColumn);
            return textLine;
        };
        this.getDisplayLine = function(row, endColumn, startRow, startColumn) {
            var foldLine = this.getFoldLine(row);
            if (!foldLine) {
                var line;
                line = this.doc.getLine(row);
                return line.substring(startColumn || 0, endColumn || line.length);
            } else return this.getFoldDisplayLine(foldLine, row, endColumn, startRow, startColumn);
        };
        this.$cloneFoldData = function() {
            var fd = [];
            fd = this.$foldData.map(function(foldLine) {
                var folds = foldLine.folds.map(function(fold) {
                    return fold.clone();
                });
                return new FoldLine(fd, folds);
            });
            return fd;
        };
        this.toggleFold = function(tryToUnfold) {
            var selection = this.selection;
            var range = selection.getRange();
            var fold;
            var bracketPos;
            if (range.isEmpty()) {
                var cursor = range.start;
                fold = this.getFoldAt(cursor.row, cursor.column);
                if (fold) {
                    this.expandFold(fold);
                    return;
                } else if (bracketPos = this.findMatchingBracket(cursor)) {
                    if (range.comparePoint(bracketPos) == 1) range.end = bracketPos;
                    else {
                        range.start = bracketPos;
                        range.start.column++;
                        range.end.column--;
                    }
                } else if (bracketPos = this.findMatchingBracket({
                    row: cursor.row,
                    column: cursor.column + 1
                })) {
                    if (range.comparePoint(bracketPos) == 1) range.end = bracketPos;
                    else range.start = bracketPos;
                    range.start.column++;
                } else range = this.getCommentFoldRange(cursor.row, cursor.column) || range;
            } else {
                var folds = this.getFoldsInRange(range);
                if (tryToUnfold && folds.length) {
                    this.expandFolds(folds);
                    return;
                } else if (folds.length == 1) fold = folds[0];
            }
            if (!fold) fold = this.getFoldAt(range.start.row, range.start.column);
            if (fold && fold.range.toString() == range.toString()) {
                this.expandFold(fold);
                return;
            }
            var placeholder = "...";
            if (!range.isMultiLine()) {
                placeholder = this.getTextRange(range);
                if (placeholder.length < 4) return;
                placeholder = placeholder.trim().substring(0, 2) + "..";
            }
            this.addFold(placeholder, range);
        };
        this.getCommentFoldRange = function(row, column, dir) {
            var iterator = new TokenIterator(this, row, column);
            var token = iterator.getCurrentToken();
            var type = token.type;
            if (token && /^comment|string/.test(type)) {
                type = type.match(/comment|string/)[0];
                if (type == "comment") type += "|doc-start";
                var re = new RegExp(type);
                var range = new Range1();
                if (dir != 1) {
                    do token = iterator.stepBackward();
                    while (token && re.test(token.type))
                    iterator.stepForward();
                }
                range.start.row = iterator.getCurrentTokenRow();
                range.start.column = iterator.getCurrentTokenColumn() + 2;
                iterator = new TokenIterator(this, row, column);
                if (dir != -1) {
                    var lastRow = -1;
                    do {
                        token = iterator.stepForward();
                        if (lastRow == -1) {
                            var state = this.getState(iterator.$row);
                            if (!re.test(state)) lastRow = iterator.$row;
                        } else if (iterator.$row > lastRow) break;
                    }while (token && re.test(token.type))
                    token = iterator.stepBackward();
                } else token = iterator.getCurrentToken();
                range.end.row = iterator.getCurrentTokenRow();
                range.end.column = iterator.getCurrentTokenColumn() + token.value.length - 2;
                return range;
            }
        };
        this.foldAll = function(startRow, endRow, depth) {
            if (depth == undefined) depth = 100000; // JSON.stringify doesn't hanle Infinity
            var foldWidgets = this.foldWidgets;
            if (!foldWidgets) return; // mode doesn't support folding
            endRow = endRow || this.getLength();
            startRow = startRow || 0;
            for(var row = startRow; row < endRow; row++){
                if (foldWidgets[row] == null) foldWidgets[row] = this.getFoldWidget(row);
                if (foldWidgets[row] != "start") continue;
                var range = this.getFoldWidgetRange(row);
                if (range && range.isMultiLine() && range.end.row <= endRow && range.start.row >= startRow) {
                    row = range.end.row;
                    try {
                        var fold = this.addFold("...", range);
                        if (fold) fold.collapseChildren = depth;
                    } catch (e) {
                    }
                }
            }
        };
        this.$foldStyles = {
            "manual": 1,
            "markbegin": 1,
            "markbeginend": 1
        };
        this.$foldStyle = "markbegin";
        this.setFoldStyle = function(style) {
            if (!this.$foldStyles[style]) throw new Error("invalid fold style: " + style + "[" + Object.keys(this.$foldStyles).join(", ") + "]");
            if (this.$foldStyle == style) return;
            this.$foldStyle = style;
            if (style == "manual") this.unfold();
            var mode = this.$foldMode;
            this.$setFolding(null);
            this.$setFolding(mode);
        };
        this.$setFolding = function(foldMode) {
            if (this.$foldMode == foldMode) return;
            this.$foldMode = foldMode;
            this.off('change', this.$updateFoldWidgets);
            this.off('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);
            this._signal("changeAnnotation");
            if (!foldMode || this.$foldStyle == "manual") {
                this.foldWidgets = null;
                return;
            }
            this.foldWidgets = [];
            this.getFoldWidget = foldMode.getFoldWidget.bind(foldMode, this, this.$foldStyle);
            this.getFoldWidgetRange = foldMode.getFoldWidgetRange.bind(foldMode, this, this.$foldStyle);
            this.$updateFoldWidgets = this.updateFoldWidgets.bind(this);
            this.$tokenizerUpdateFoldWidgets = this.tokenizerUpdateFoldWidgets.bind(this);
            this.on('change', this.$updateFoldWidgets);
            this.on('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);
        };
        this.getParentFoldRangeData = function(row, ignoreCurrent) {
            var fw = this.foldWidgets;
            if (!fw || ignoreCurrent && fw[row]) return {
            };
            var i = row - 1, firstRange;
            while(i >= 0){
                var c = fw[i];
                if (c == null) c = fw[i] = this.getFoldWidget(i);
                if (c == "start") {
                    var range = this.getFoldWidgetRange(i);
                    if (!firstRange) firstRange = range;
                    if (range && range.end.row >= row) break;
                }
                i--;
            }
            return {
                range: i !== -1 && range,
                firstRange: firstRange
            };
        };
        this.onFoldWidgetClick = function(row, e) {
            e = e.domEvent;
            var options = {
                children: e.shiftKey,
                all: e.ctrlKey || e.metaKey,
                siblings: e.altKey
            };
            var range = this.$toggleFoldWidget(row, options);
            if (!range) {
                var el = e.target || e.srcElement;
                if (el && /ace_fold-widget/.test(el.className)) el.className += " ace_invalid";
            }
        };
        this.$toggleFoldWidget = function(row, options) {
            if (!this.getFoldWidget) return;
            var type = this.getFoldWidget(row);
            var line = this.getLine(row);
            var dir = type === "end" ? -1 : 1;
            var fold = this.getFoldAt(row, dir === -1 ? 0 : line.length, dir);
            if (fold) {
                if (options.children || options.all) this.removeFold(fold);
                else this.expandFold(fold);
                return fold;
            }
            var range = this.getFoldWidgetRange(row, true);
            if (range && !range.isMultiLine()) {
                fold = this.getFoldAt(range.start.row, range.start.column, 1);
                if (fold && range.isEqual(fold.range)) {
                    this.removeFold(fold);
                    return fold;
                }
            }
            if (options.siblings) {
                var data = this.getParentFoldRangeData(row);
                if (data.range) {
                    var startRow = data.range.start.row + 1;
                    var endRow = data.range.end.row;
                }
                this.foldAll(startRow, endRow, options.all ? 10000 : 0);
            } else if (options.children) {
                endRow = range ? range.end.row : this.getLength();
                this.foldAll(row + 1, endRow, options.all ? 10000 : 0);
            } else if (range) {
                if (options.all) range.collapseChildren = 10000;
                this.addFold("...", range);
            }
            return range;
        };
        this.toggleFoldWidget = function(toggleParent) {
            var row = this.selection.getCursor().row;
            row = this.getRowFoldStart(row);
            var range = this.$toggleFoldWidget(row, {
            });
            if (range) return;
            var data = this.getParentFoldRangeData(row, true);
            range = data.range || data.firstRange;
            if (range) {
                row = range.start.row;
                var fold = this.getFoldAt(row, this.getLine(row).length, 1);
                if (fold) this.removeFold(fold);
                else this.addFold("...", range);
            }
        };
        this.updateFoldWidgets = function(delta) {
            var firstRow = delta.start.row;
            var len = delta.end.row - firstRow;
            if (len === 0) this.foldWidgets[firstRow] = null;
            else if (delta.action == 'remove') this.foldWidgets.splice(firstRow, len + 1, null);
            else {
                var args = Array(len + 1);
                args.unshift(firstRow, 1);
                this.foldWidgets.splice.apply(this.foldWidgets, args);
            }
        };
        this.tokenizerUpdateFoldWidgets = function(e) {
            var rows = e.data;
            if (rows.first != rows.last) {
                if (this.foldWidgets.length > rows.first) this.foldWidgets.splice(rows.first, this.foldWidgets.length);
            }
        };
    }
    exports.Folding = Folding;
});
ace.define("ace/edit_session/bracket_match", [
    "require",
    "exports",
    "module",
    "ace/token_iterator",
    "ace/range"
], function(acequire, exports, module) {
    var TokenIterator = acequire("../token_iterator").TokenIterator;
    var Range1 = acequire("../range").Range;
    function BracketMatch() {
        this.findMatchingBracket = function(position, chr) {
            if (position.column == 0) return null;
            var charBeforeCursor = chr || this.getLine(position.row).charAt(position.column - 1);
            if (charBeforeCursor == "") return null;
            var match = charBeforeCursor.match(/([\(\[\{])|([\)\]\}])/);
            if (!match) return null;
            if (match[1]) return this.$findClosingBracket(match[1], position);
            else return this.$findOpeningBracket(match[2], position);
        };
        this.getBracketRange = function(pos) {
            var line = this.getLine(pos.row);
            var before = true, range;
            var chr = line.charAt(pos.column - 1);
            var match = chr && chr.match(/([\(\[\{])|([\)\]\}])/);
            if (!match) {
                chr = line.charAt(pos.column);
                pos = {
                    row: pos.row,
                    column: pos.column + 1
                };
                match = chr && chr.match(/([\(\[\{])|([\)\]\}])/);
                before = false;
            }
            if (!match) return null;
            if (match[1]) {
                var bracketPos = this.$findClosingBracket(match[1], pos);
                if (!bracketPos) return null;
                range = Range1.fromPoints(pos, bracketPos);
                if (!before) {
                    range.end.column++;
                    range.start.column--;
                }
                range.cursor = range.end;
            } else {
                var bracketPos = this.$findOpeningBracket(match[2], pos);
                if (!bracketPos) return null;
                range = Range1.fromPoints(bracketPos, pos);
                if (!before) {
                    range.start.column++;
                    range.end.column--;
                }
                range.cursor = range.start;
            }
            return range;
        };
        this.$brackets = {
            ")": "(",
            "(": ")",
            "]": "[",
            "[": "]",
            "{": "}",
            "}": "{"
        };
        this.$findOpeningBracket = function(bracket, position, typeRe) {
            var openBracket = this.$brackets[bracket];
            var depth = 1;
            var iterator = new TokenIterator(this, position.row, position.column);
            var token = iterator.getCurrentToken();
            if (!token) token = iterator.stepForward();
            if (!token) return;
            if (!typeRe) typeRe = new RegExp("(\\.?" + token.type.replace(".", "\\.").replace("rparen", ".paren").replace(/\b(?:end)\b/, "(?:start|begin|end)") + ")+");
            var valueIndex = position.column - iterator.getCurrentTokenColumn() - 2;
            var value = token.value;
            while(true){
                while(valueIndex >= 0){
                    var chr = value.charAt(valueIndex);
                    if (chr == openBracket) {
                        depth -= 1;
                        if (depth == 0) return {
                            row: iterator.getCurrentTokenRow(),
                            column: valueIndex + iterator.getCurrentTokenColumn()
                        };
                    } else if (chr == bracket) depth += 1;
                    valueIndex -= 1;
                }
                do token = iterator.stepBackward();
                while (token && !typeRe.test(token.type))
                if (token == null) break;
                value = token.value;
                valueIndex = value.length - 1;
            }
            return null;
        };
        this.$findClosingBracket = function(bracket, position, typeRe) {
            var closingBracket = this.$brackets[bracket];
            var depth = 1;
            var iterator = new TokenIterator(this, position.row, position.column);
            var token = iterator.getCurrentToken();
            if (!token) token = iterator.stepForward();
            if (!token) return;
            if (!typeRe) typeRe = new RegExp("(\\.?" + token.type.replace(".", "\\.").replace("lparen", ".paren").replace(/\b(?:start|begin)\b/, "(?:start|begin|end)") + ")+");
            var valueIndex = position.column - iterator.getCurrentTokenColumn();
            while(true){
                var value = token.value;
                var valueLength = value.length;
                while(valueIndex < valueLength){
                    var chr = value.charAt(valueIndex);
                    if (chr == closingBracket) {
                        depth -= 1;
                        if (depth == 0) return {
                            row: iterator.getCurrentTokenRow(),
                            column: valueIndex + iterator.getCurrentTokenColumn()
                        };
                    } else if (chr == bracket) depth += 1;
                    valueIndex += 1;
                }
                do token = iterator.stepForward();
                while (token && !typeRe.test(token.type))
                if (token == null) break;
                valueIndex = 0;
            }
            return null;
        };
    }
    exports.BracketMatch = BracketMatch;
});
ace.define("ace/edit_session", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/lang",
    "ace/bidihandler",
    "ace/config",
    "ace/lib/event_emitter",
    "ace/selection",
    "ace/mode/text",
    "ace/range",
    "ace/document",
    "ace/background_tokenizer",
    "ace/search_highlight",
    "ace/edit_session/folding",
    "ace/edit_session/bracket_match"
], function(acequire, exports, module) {
    var oop = acequire("./lib/oop");
    var lang = acequire("./lib/lang");
    var BidiHandler = acequire("./bidihandler").BidiHandler;
    var config = acequire("./config");
    var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
    var Selection1 = acequire("./selection").Selection;
    var TextMode = acequire("./mode/text").Mode;
    var Range1 = acequire("./range").Range;
    var Document1 = acequire("./document").Document;
    var BackgroundTokenizer = acequire("./background_tokenizer").BackgroundTokenizer;
    var SearchHighlight = acequire("./search_highlight").SearchHighlight;
    var EditSession = function(text, mode) {
        this.$breakpoints = [];
        this.$decorations = [];
        this.$frontMarkers = {
        };
        this.$backMarkers = {
        };
        this.$markerId = 1;
        this.$undoSelect = true;
        this.$foldData = [];
        this.id = "session" + ++EditSession.$uid;
        this.$foldData.toString = function() {
            return this.join("\n");
        };
        this.on("changeFold", this.onChangeFold.bind(this));
        this.$onChange = this.onChange.bind(this);
        if (typeof text != "object" || !text.getLine) text = new Document1(text);
        this.$bidiHandler = new BidiHandler(this);
        this.setDocument(text);
        this.selection = new Selection1(this);
        config.resetOptions(this);
        this.setMode(mode);
        config._signal("session", this);
    };
    EditSession.$uid = 0;
    (function() {
        oop.implement(this, EventEmitter);
        this.setDocument = function(doc) {
            if (this.doc) this.doc.removeListener("change", this.$onChange);
            this.doc = doc;
            doc.on("change", this.$onChange);
            if (this.bgTokenizer) this.bgTokenizer.setDocument(this.getDocument());
            this.resetCaches();
        };
        this.getDocument = function() {
            return this.doc;
        };
        this.$resetRowCache = function(docRow) {
            if (!docRow) {
                this.$docRowCache = [];
                this.$screenRowCache = [];
                return;
            }
            var l = this.$docRowCache.length;
            var i = this.$getRowCacheIndex(this.$docRowCache, docRow) + 1;
            if (l > i) {
                this.$docRowCache.splice(i, l);
                this.$screenRowCache.splice(i, l);
            }
        };
        this.$getRowCacheIndex = function(cacheArray, val) {
            var low = 0;
            var hi = cacheArray.length - 1;
            while(low <= hi){
                var mid = low + hi >> 1;
                var c = cacheArray[mid];
                if (val > c) low = mid + 1;
                else if (val < c) hi = mid - 1;
                else return mid;
            }
            return low - 1;
        };
        this.resetCaches = function() {
            this.$modified = true;
            this.$wrapData = [];
            this.$rowLengthCache = [];
            this.$resetRowCache(0);
            if (this.bgTokenizer) this.bgTokenizer.start(0);
        };
        this.onChangeFold = function(e) {
            var fold = e.data;
            this.$resetRowCache(fold.start.row);
        };
        this.onChange = function(delta) {
            this.$modified = true;
            this.$bidiHandler.onChange(delta);
            this.$resetRowCache(delta.start.row);
            var removedFolds = this.$updateInternalDataOnChange(delta);
            if (!this.$fromUndo && this.$undoManager && !delta.ignore) {
                this.$deltasDoc.push(delta);
                if (removedFolds && removedFolds.length != 0) this.$deltasFold.push({
                    action: "removeFolds",
                    folds: removedFolds
                });
                this.$informUndoManager.schedule();
            }
            this.bgTokenizer && this.bgTokenizer.$updateOnChange(delta);
            this._signal("change", delta);
        };
        this.setValue = function(text) {
            this.doc.setValue(text);
            this.selection.moveTo(0, 0);
            this.$resetRowCache(0);
            this.$deltas = [];
            this.$deltasDoc = [];
            this.$deltasFold = [];
            this.setUndoManager(this.$undoManager);
            this.getUndoManager().reset();
        };
        this.getValue = this.toString = function() {
            return this.doc.getValue();
        };
        this.getSelection = function() {
            return this.selection;
        };
        this.getState = function(row) {
            return this.bgTokenizer.getState(row);
        };
        this.getTokens = function(row) {
            return this.bgTokenizer.getTokens(row);
        };
        this.getTokenAt = function(row, column) {
            var tokens = this.bgTokenizer.getTokens(row);
            var token, c = 0;
            if (column == null) {
                var i = tokens.length - 1;
                c = this.getLine(row).length;
            } else for(var i = 0; i < tokens.length; i++){
                c += tokens[i].value.length;
                if (c >= column) break;
            }
            token = tokens[i];
            if (!token) return null;
            token.index = i;
            token.start = c - token.value.length;
            return token;
        };
        this.setUndoManager = function(undoManager) {
            this.$undoManager = undoManager;
            this.$deltas = [];
            this.$deltasDoc = [];
            this.$deltasFold = [];
            if (this.$informUndoManager) this.$informUndoManager.cancel();
            if (undoManager) {
                var self = this;
                this.$syncInformUndoManager = function() {
                    self.$informUndoManager.cancel();
                    if (self.$deltasFold.length) {
                        self.$deltas.push({
                            group: "fold",
                            deltas: self.$deltasFold
                        });
                        self.$deltasFold = [];
                    }
                    if (self.$deltasDoc.length) {
                        self.$deltas.push({
                            group: "doc",
                            deltas: self.$deltasDoc
                        });
                        self.$deltasDoc = [];
                    }
                    if (self.$deltas.length > 0) undoManager.execute({
                        action: "aceupdate",
                        args: [
                            self.$deltas,
                            self
                        ],
                        merge: self.mergeUndoDeltas
                    });
                    self.mergeUndoDeltas = false;
                    self.$deltas = [];
                };
                this.$informUndoManager = lang.delayedCall(this.$syncInformUndoManager);
            }
        };
        this.markUndoGroup = function() {
            if (this.$syncInformUndoManager) this.$syncInformUndoManager();
        };
        this.$defaultUndoManager = {
            undo: function() {
            },
            redo: function() {
            },
            reset: function() {
            }
        };
        this.getUndoManager = function() {
            return this.$undoManager || this.$defaultUndoManager;
        };
        this.getTabString = function() {
            if (this.getUseSoftTabs()) return lang.stringRepeat(" ", this.getTabSize());
            else return "\t";
        };
        this.setUseSoftTabs = function(val) {
            this.setOption("useSoftTabs", val);
        };
        this.getUseSoftTabs = function() {
            return this.$useSoftTabs && !this.$mode.$indentWithTabs;
        };
        this.setTabSize = function(tabSize) {
            this.setOption("tabSize", tabSize);
        };
        this.getTabSize = function() {
            return this.$tabSize;
        };
        this.isTabStop = function(position) {
            return this.$useSoftTabs && position.column % this.$tabSize === 0;
        };
        this.setNavigateWithinSoftTabs = function(navigateWithinSoftTabs) {
            this.setOption("navigateWithinSoftTabs", navigateWithinSoftTabs);
        };
        this.getNavigateWithinSoftTabs = function() {
            return this.$navigateWithinSoftTabs;
        };
        this.$overwrite = false;
        this.setOverwrite = function(overwrite) {
            this.setOption("overwrite", overwrite);
        };
        this.getOverwrite = function() {
            return this.$overwrite;
        };
        this.toggleOverwrite = function() {
            this.setOverwrite(!this.$overwrite);
        };
        this.addGutterDecoration = function(row, className) {
            if (!this.$decorations[row]) this.$decorations[row] = "";
            this.$decorations[row] += " " + className;
            this._signal("changeBreakpoint", {
            });
        };
        this.removeGutterDecoration = function(row, className) {
            this.$decorations[row] = (this.$decorations[row] || "").replace(" " + className, "");
            this._signal("changeBreakpoint", {
            });
        };
        this.getBreakpoints = function() {
            return this.$breakpoints;
        };
        this.setBreakpoints = function(rows) {
            this.$breakpoints = [];
            for(var i = 0; i < rows.length; i++)this.$breakpoints[rows[i]] = "ace_breakpoint";
            this._signal("changeBreakpoint", {
            });
        };
        this.clearBreakpoints = function() {
            this.$breakpoints = [];
            this._signal("changeBreakpoint", {
            });
        };
        this.setBreakpoint = function(row, className) {
            if (className === undefined) className = "ace_breakpoint";
            if (className) this.$breakpoints[row] = className;
            else delete this.$breakpoints[row];
            this._signal("changeBreakpoint", {
            });
        };
        this.clearBreakpoint = function(row) {
            delete this.$breakpoints[row];
            this._signal("changeBreakpoint", {
            });
        };
        this.addMarker = function(range, clazz, type, inFront) {
            var id = this.$markerId++;
            var marker = {
                range: range,
                type: type || "line",
                renderer: typeof type == "function" ? type : null,
                clazz: clazz,
                inFront: !!inFront,
                id: id
            };
            if (inFront) {
                this.$frontMarkers[id] = marker;
                this._signal("changeFrontMarker");
            } else {
                this.$backMarkers[id] = marker;
                this._signal("changeBackMarker");
            }
            return id;
        };
        this.addDynamicMarker = function(marker, inFront) {
            if (!marker.update) return;
            var id = this.$markerId++;
            marker.id = id;
            marker.inFront = !!inFront;
            if (inFront) {
                this.$frontMarkers[id] = marker;
                this._signal("changeFrontMarker");
            } else {
                this.$backMarkers[id] = marker;
                this._signal("changeBackMarker");
            }
            return marker;
        };
        this.removeMarker = function(markerId) {
            var marker = this.$frontMarkers[markerId] || this.$backMarkers[markerId];
            if (!marker) return;
            var markers = marker.inFront ? this.$frontMarkers : this.$backMarkers;
            if (marker) {
                delete markers[markerId];
                this._signal(marker.inFront ? "changeFrontMarker" : "changeBackMarker");
            }
        };
        this.getMarkers = function(inFront) {
            return inFront ? this.$frontMarkers : this.$backMarkers;
        };
        this.highlight = function(re) {
            if (!this.$searchHighlight) {
                var highlight = new SearchHighlight(null, "ace_selected-word", "text");
                this.$searchHighlight = this.addDynamicMarker(highlight);
            }
            this.$searchHighlight.setRegexp(re);
        };
        this.highlightLines = function(startRow, endRow, clazz, inFront) {
            if (typeof endRow != "number") {
                clazz = endRow;
                endRow = startRow;
            }
            if (!clazz) clazz = "ace_step";
            var range = new Range1(startRow, 0, endRow, Infinity);
            range.id = this.addMarker(range, clazz, "fullLine", inFront);
            return range;
        };
        this.setAnnotations = function(annotations) {
            this.$annotations = annotations;
            this._signal("changeAnnotation", {
            });
        };
        this.getAnnotations = function() {
            return this.$annotations || [];
        };
        this.clearAnnotations = function() {
            this.setAnnotations([]);
        };
        this.$detectNewLine = function(text) {
            var match = text.match(/^.*?(\r?\n)/m);
            if (match) this.$autoNewLine = match[1];
            else this.$autoNewLine = "\n";
        };
        this.getWordRange = function(row, column) {
            var line = this.getLine(row);
            var inToken = false;
            if (column > 0) inToken = !!line.charAt(column - 1).match(this.tokenRe);
            if (!inToken) inToken = !!line.charAt(column).match(this.tokenRe);
            if (inToken) var re = this.tokenRe;
            else if (/^\s+$/.test(line.slice(column - 1, column + 1))) var re = /\s/;
            else var re = this.nonTokenRe;
            var start = column;
            if (start > 0) {
                do start--;
                while (start >= 0 && line.charAt(start).match(re))
                start++;
            }
            var end = column;
            while(end < line.length && line.charAt(end).match(re))end++;
            return new Range1(row, start, row, end);
        };
        this.getAWordRange = function(row, column) {
            var wordRange = this.getWordRange(row, column);
            var line = this.getLine(wordRange.end.row);
            while(line.charAt(wordRange.end.column).match(/[ \t]/))wordRange.end.column += 1;
            return wordRange;
        };
        this.setNewLineMode = function(newLineMode) {
            this.doc.setNewLineMode(newLineMode);
        };
        this.getNewLineMode = function() {
            return this.doc.getNewLineMode();
        };
        this.setUseWorker = function(useWorker) {
            this.setOption("useWorker", useWorker);
        };
        this.getUseWorker = function() {
            return this.$useWorker;
        };
        this.onReloadTokenizer = function(e) {
            var rows = e.data;
            this.bgTokenizer.start(rows.first);
            this._signal("tokenizerUpdate", e);
        };
        this.$modes = {
        };
        this.$mode = null;
        this.$modeId = null;
        this.setMode = function(mode, cb) {
            if (mode && typeof mode === "object") {
                if (mode.getTokenizer) return this.$onChangeMode(mode);
                var options = mode;
                var path = options.path;
            } else path = mode || "ace/mode/text";
            if (!this.$modes["ace/mode/text"]) this.$modes["ace/mode/text"] = new TextMode();
            if (this.$modes[path] && !options) {
                this.$onChangeMode(this.$modes[path]);
                cb && cb();
                return;
            }
            this.$modeId = path;
            config.loadModule([
                "mode",
                path
            ], (function(m) {
                if (this.$modeId !== path) return cb && cb();
                if (this.$modes[path] && !options) this.$onChangeMode(this.$modes[path]);
                else if (m && m.Mode) {
                    m = new m.Mode(options);
                    if (!options) {
                        this.$modes[path] = m;
                        m.$id = path;
                    }
                    this.$onChangeMode(m);
                }
                cb && cb();
            }).bind(this));
            if (!this.$mode) this.$onChangeMode(this.$modes["ace/mode/text"], true);
        };
        this.$onChangeMode = function(mode, $isPlaceholder) {
            if (!$isPlaceholder) this.$modeId = mode.$id;
            if (this.$mode === mode) return;
            this.$mode = mode;
            this.$stopWorker();
            if (this.$useWorker) this.$startWorker();
            var tokenizer = mode.getTokenizer();
            if (tokenizer.addEventListener !== undefined) {
                var onReloadTokenizer = this.onReloadTokenizer.bind(this);
                tokenizer.addEventListener("update", onReloadTokenizer);
            }
            if (!this.bgTokenizer) {
                this.bgTokenizer = new BackgroundTokenizer(tokenizer);
                var _self = this;
                this.bgTokenizer.addEventListener("update", function(e) {
                    _self._signal("tokenizerUpdate", e);
                });
            } else this.bgTokenizer.setTokenizer(tokenizer);
            this.bgTokenizer.setDocument(this.getDocument());
            this.tokenRe = mode.tokenRe;
            this.nonTokenRe = mode.nonTokenRe;
            if (!$isPlaceholder) {
                if (mode.attachToSession) mode.attachToSession(this);
                this.$options.wrapMethod.set.call(this, this.$wrapMethod);
                this.$setFolding(mode.foldingRules);
                this.bgTokenizer.start(0);
                this._emit("changeMode");
            }
        };
        this.$stopWorker = function() {
            if (this.$worker) {
                this.$worker.terminate();
                this.$worker = null;
            }
        };
        this.$startWorker = function() {
            try {
                this.$worker = this.$mode.createWorker(this);
            } catch (e) {
                config.warn("Could not load worker", e);
                this.$worker = null;
            }
        };
        this.getMode = function() {
            return this.$mode;
        };
        this.$scrollTop = 0;
        this.setScrollTop = function(scrollTop) {
            if (this.$scrollTop === scrollTop || isNaN(scrollTop)) return;
            this.$scrollTop = scrollTop;
            this._signal("changeScrollTop", scrollTop);
        };
        this.getScrollTop = function() {
            return this.$scrollTop;
        };
        this.$scrollLeft = 0;
        this.setScrollLeft = function(scrollLeft) {
            if (this.$scrollLeft === scrollLeft || isNaN(scrollLeft)) return;
            this.$scrollLeft = scrollLeft;
            this._signal("changeScrollLeft", scrollLeft);
        };
        this.getScrollLeft = function() {
            return this.$scrollLeft;
        };
        this.getScreenWidth = function() {
            this.$computeWidth();
            if (this.lineWidgets) return Math.max(this.getLineWidgetMaxWidth(), this.screenWidth);
            return this.screenWidth;
        };
        this.getLineWidgetMaxWidth = function() {
            if (this.lineWidgetsWidth != null) return this.lineWidgetsWidth;
            var width = 0;
            this.lineWidgets.forEach(function(w) {
                if (w && w.screenWidth > width) width = w.screenWidth;
            });
            return this.lineWidgetWidth = width;
        };
        this.$computeWidth = function(force) {
            if (this.$modified || force) {
                this.$modified = false;
                if (this.$useWrapMode) return this.screenWidth = this.$wrapLimit;
                var lines = this.doc.getAllLines();
                var cache = this.$rowLengthCache;
                var longestScreenLine = 0;
                var foldIndex = 0;
                var foldLine = this.$foldData[foldIndex];
                var foldStart = foldLine ? foldLine.start.row : Infinity;
                var len = lines.length;
                for(var i = 0; i < len; i++){
                    if (i > foldStart) {
                        i = foldLine.end.row + 1;
                        if (i >= len) break;
                        foldLine = this.$foldData[foldIndex++];
                        foldStart = foldLine ? foldLine.start.row : Infinity;
                    }
                    if (cache[i] == null) cache[i] = this.$getStringScreenWidth(lines[i])[0];
                    if (cache[i] > longestScreenLine) longestScreenLine = cache[i];
                }
                this.screenWidth = longestScreenLine;
            }
        };
        this.getLine = function(row) {
            return this.doc.getLine(row);
        };
        this.getLines = function(firstRow, lastRow) {
            return this.doc.getLines(firstRow, lastRow);
        };
        this.getLength = function() {
            return this.doc.getLength();
        };
        this.getTextRange = function(range) {
            return this.doc.getTextRange(range || this.selection.getRange());
        };
        this.insert = function(position, text) {
            return this.doc.insert(position, text);
        };
        this.remove = function(range) {
            return this.doc.remove(range);
        };
        this.removeFullLines = function(firstRow, lastRow) {
            return this.doc.removeFullLines(firstRow, lastRow);
        };
        this.undoChanges = function(deltas, dontSelect) {
            if (!deltas.length) return;
            this.$fromUndo = true;
            var lastUndoRange = null;
            for(var i = deltas.length - 1; i != -1; i--){
                var delta = deltas[i];
                if (delta.group == "doc") {
                    this.doc.revertDeltas(delta.deltas);
                    lastUndoRange = this.$getUndoSelection(delta.deltas, true, lastUndoRange);
                } else delta.deltas.forEach(function(foldDelta) {
                    this.addFolds(foldDelta.folds);
                }, this);
            }
            this.$fromUndo = false;
            lastUndoRange && this.$undoSelect && !dontSelect && this.selection.setSelectionRange(lastUndoRange);
            return lastUndoRange;
        };
        this.redoChanges = function(deltas, dontSelect) {
            if (!deltas.length) return;
            this.$fromUndo = true;
            var lastUndoRange = null;
            for(var i = 0; i < deltas.length; i++){
                var delta = deltas[i];
                if (delta.group == "doc") {
                    this.doc.applyDeltas(delta.deltas);
                    lastUndoRange = this.$getUndoSelection(delta.deltas, false, lastUndoRange);
                }
            }
            this.$fromUndo = false;
            lastUndoRange && this.$undoSelect && !dontSelect && this.selection.setSelectionRange(lastUndoRange);
            return lastUndoRange;
        };
        this.setUndoSelect = function(enable) {
            this.$undoSelect = enable;
        };
        this.$getUndoSelection = function(deltas, isUndo, lastUndoRange) {
            function isInsert(delta) {
                return isUndo ? delta.action !== "insert" : delta.action === "insert";
            }
            var delta = deltas[0];
            var range, point;
            var lastDeltaIsInsert = false;
            if (isInsert(delta)) {
                range = Range1.fromPoints(delta.start, delta.end);
                lastDeltaIsInsert = true;
            } else {
                range = Range1.fromPoints(delta.start, delta.start);
                lastDeltaIsInsert = false;
            }
            for(var i = 1; i < deltas.length; i++){
                delta = deltas[i];
                if (isInsert(delta)) {
                    point = delta.start;
                    if (range.compare(point.row, point.column) == -1) range.setStart(point);
                    point = delta.end;
                    if (range.compare(point.row, point.column) == 1) range.setEnd(point);
                    lastDeltaIsInsert = true;
                } else {
                    point = delta.start;
                    if (range.compare(point.row, point.column) == -1) range = Range1.fromPoints(delta.start, delta.start);
                    lastDeltaIsInsert = false;
                }
            }
            if (lastUndoRange != null) {
                if (Range1.comparePoints(lastUndoRange.start, range.start) === 0) {
                    lastUndoRange.start.column += range.end.column - range.start.column;
                    lastUndoRange.end.column += range.end.column - range.start.column;
                }
                var cmp = lastUndoRange.compareRange(range);
                if (cmp == 1) range.setStart(lastUndoRange.start);
                else if (cmp == -1) range.setEnd(lastUndoRange.end);
            }
            return range;
        };
        this.replace = function(range, text) {
            return this.doc.replace(range, text);
        };
        this.moveText = function(fromRange, toPosition, copy) {
            var text = this.getTextRange(fromRange);
            var folds = this.getFoldsInRange(fromRange);
            var toRange = Range1.fromPoints(toPosition, toPosition);
            if (!copy) {
                this.remove(fromRange);
                var rowDiff = fromRange.start.row - fromRange.end.row;
                var collDiff = rowDiff ? -fromRange.end.column : fromRange.start.column - fromRange.end.column;
                if (collDiff) {
                    if (toRange.start.row == fromRange.end.row && toRange.start.column > fromRange.end.column) toRange.start.column += collDiff;
                    if (toRange.end.row == fromRange.end.row && toRange.end.column > fromRange.end.column) toRange.end.column += collDiff;
                }
                if (rowDiff && toRange.start.row >= fromRange.end.row) {
                    toRange.start.row += rowDiff;
                    toRange.end.row += rowDiff;
                }
            }
            toRange.end = this.insert(toRange.start, text);
            if (folds.length) {
                var oldStart = fromRange.start;
                var newStart = toRange.start;
                var rowDiff = newStart.row - oldStart.row;
                var collDiff = newStart.column - oldStart.column;
                this.addFolds(folds.map(function(x) {
                    x = x.clone();
                    if (x.start.row == oldStart.row) x.start.column += collDiff;
                    if (x.end.row == oldStart.row) x.end.column += collDiff;
                    x.start.row += rowDiff;
                    x.end.row += rowDiff;
                    return x;
                }));
            }
            return toRange;
        };
        this.indentRows = function(startRow, endRow, indentString) {
            indentString = indentString.replace(/\t/g, this.getTabString());
            for(var row = startRow; row <= endRow; row++)this.doc.insertInLine({
                row: row,
                column: 0
            }, indentString);
        };
        this.outdentRows = function(range) {
            var rowRange = range.collapseRows();
            var deleteRange = new Range1(0, 0, 0, 0);
            var size = this.getTabSize();
            for(var i = rowRange.start.row; i <= rowRange.end.row; ++i){
                var line = this.getLine(i);
                deleteRange.start.row = i;
                deleteRange.end.row = i;
                for(var j = 0; j < size; ++j)if (line.charAt(j) != ' ') break;
                if (j < size && line.charAt(j) == '\t') {
                    deleteRange.start.column = j;
                    deleteRange.end.column = j + 1;
                } else {
                    deleteRange.start.column = 0;
                    deleteRange.end.column = j;
                }
                this.remove(deleteRange);
            }
        };
        this.$moveLines = function(firstRow, lastRow, dir) {
            firstRow = this.getRowFoldStart(firstRow);
            lastRow = this.getRowFoldEnd(lastRow);
            if (dir < 0) {
                var row = this.getRowFoldStart(firstRow + dir);
                if (row < 0) return 0;
                var diff = row - firstRow;
            } else if (dir > 0) {
                var row = this.getRowFoldEnd(lastRow + dir);
                if (row > this.doc.getLength() - 1) return 0;
                var diff = row - lastRow;
            } else {
                firstRow = this.$clipRowToDocument(firstRow);
                lastRow = this.$clipRowToDocument(lastRow);
                var diff = lastRow - firstRow + 1;
            }
            var range = new Range1(firstRow, 0, lastRow, Number.MAX_VALUE);
            var folds = this.getFoldsInRange(range).map(function(x) {
                x = x.clone();
                x.start.row += diff;
                x.end.row += diff;
                return x;
            });
            var lines = dir == 0 ? this.doc.getLines(firstRow, lastRow) : this.doc.removeFullLines(firstRow, lastRow);
            this.doc.insertFullLines(firstRow + diff, lines);
            folds.length && this.addFolds(folds);
            return diff;
        };
        this.moveLinesUp = function(firstRow, lastRow) {
            return this.$moveLines(firstRow, lastRow, -1);
        };
        this.moveLinesDown = function(firstRow, lastRow) {
            return this.$moveLines(firstRow, lastRow, 1);
        };
        this.duplicateLines = function(firstRow, lastRow) {
            return this.$moveLines(firstRow, lastRow, 0);
        };
        this.$clipRowToDocument = function(row) {
            return Math.max(0, Math.min(row, this.doc.getLength() - 1));
        };
        this.$clipColumnToRow = function(row, column) {
            if (column < 0) return 0;
            return Math.min(this.doc.getLine(row).length, column);
        };
        this.$clipPositionToDocument = function(row, column) {
            column = Math.max(0, column);
            if (row < 0) {
                row = 0;
                column = 0;
            } else {
                var len = this.doc.getLength();
                if (row >= len) {
                    row = len - 1;
                    column = this.doc.getLine(len - 1).length;
                } else column = Math.min(this.doc.getLine(row).length, column);
            }
            return {
                row: row,
                column: column
            };
        };
        this.$clipRangeToDocument = function(range) {
            if (range.start.row < 0) {
                range.start.row = 0;
                range.start.column = 0;
            } else range.start.column = this.$clipColumnToRow(range.start.row, range.start.column);
            var len = this.doc.getLength() - 1;
            if (range.end.row > len) {
                range.end.row = len;
                range.end.column = this.doc.getLine(len).length;
            } else range.end.column = this.$clipColumnToRow(range.end.row, range.end.column);
            return range;
        };
        this.$wrapLimit = 80;
        this.$useWrapMode = false;
        this.$wrapLimitRange = {
            min: null,
            max: null
        };
        this.setUseWrapMode = function(useWrapMode) {
            if (useWrapMode != this.$useWrapMode) {
                this.$useWrapMode = useWrapMode;
                this.$modified = true;
                this.$resetRowCache(0);
                if (useWrapMode) {
                    var len = this.getLength();
                    this.$wrapData = Array(len);
                    this.$updateWrapData(0, len - 1);
                }
                this._signal("changeWrapMode");
            }
        };
        this.getUseWrapMode = function() {
            return this.$useWrapMode;
        };
        this.setWrapLimitRange = function(min, max) {
            if (this.$wrapLimitRange.min !== min || this.$wrapLimitRange.max !== max) {
                this.$wrapLimitRange = {
                    min: min,
                    max: max
                };
                this.$modified = true;
                this.$bidiHandler.markAsDirty();
                if (this.$useWrapMode) this._signal("changeWrapMode");
            }
        };
        this.adjustWrapLimit = function(desiredLimit, $printMargin) {
            var limits = this.$wrapLimitRange;
            if (limits.max < 0) limits = {
                min: $printMargin,
                max: $printMargin
            };
            var wrapLimit = this.$constrainWrapLimit(desiredLimit, limits.min, limits.max);
            if (wrapLimit != this.$wrapLimit && wrapLimit > 1) {
                this.$wrapLimit = wrapLimit;
                this.$modified = true;
                if (this.$useWrapMode) {
                    this.$updateWrapData(0, this.getLength() - 1);
                    this.$resetRowCache(0);
                    this._signal("changeWrapLimit");
                }
                return true;
            }
            return false;
        };
        this.$constrainWrapLimit = function(wrapLimit, min, max) {
            if (min) wrapLimit = Math.max(min, wrapLimit);
            if (max) wrapLimit = Math.min(max, wrapLimit);
            return wrapLimit;
        };
        this.getWrapLimit = function() {
            return this.$wrapLimit;
        };
        this.setWrapLimit = function(limit) {
            this.setWrapLimitRange(limit, limit);
        };
        this.getWrapLimitRange = function() {
            return {
                min: this.$wrapLimitRange.min,
                max: this.$wrapLimitRange.max
            };
        };
        this.$updateInternalDataOnChange = function(delta) {
            var useWrapMode = this.$useWrapMode;
            var action = delta.action;
            var start = delta.start;
            var end = delta.end;
            var firstRow = start.row;
            var lastRow = end.row;
            var len = lastRow - firstRow;
            var removedFolds = null;
            this.$updating = true;
            if (len != 0) {
                if (action === "remove") {
                    this[useWrapMode ? "$wrapData" : "$rowLengthCache"].splice(firstRow, len);
                    var foldLines = this.$foldData;
                    removedFolds = this.getFoldsInRange(delta);
                    this.removeFolds(removedFolds);
                    var foldLine = this.getFoldLine(end.row);
                    var idx = 0;
                    if (foldLine) {
                        foldLine.addRemoveChars(end.row, end.column, start.column - end.column);
                        foldLine.shiftRow(-len);
                        var foldLineBefore = this.getFoldLine(firstRow);
                        if (foldLineBefore && foldLineBefore !== foldLine) {
                            foldLineBefore.merge(foldLine);
                            foldLine = foldLineBefore;
                        }
                        idx = foldLines.indexOf(foldLine) + 1;
                    }
                    for(; idx < foldLines.length; idx++){
                        var foldLine = foldLines[idx];
                        if (foldLine.start.row >= end.row) foldLine.shiftRow(-len);
                    }
                    lastRow = firstRow;
                } else {
                    var args = Array(len);
                    args.unshift(firstRow, 0);
                    var arr = useWrapMode ? this.$wrapData : this.$rowLengthCache;
                    arr.splice.apply(arr, args);
                    var foldLines = this.$foldData;
                    var foldLine = this.getFoldLine(firstRow);
                    var idx = 0;
                    if (foldLine) {
                        var cmp = foldLine.range.compareInside(start.row, start.column);
                        if (cmp == 0) {
                            foldLine = foldLine.split(start.row, start.column);
                            if (foldLine) {
                                foldLine.shiftRow(len);
                                foldLine.addRemoveChars(lastRow, 0, end.column - start.column);
                            }
                        } else if (cmp == -1) {
                            foldLine.addRemoveChars(firstRow, 0, end.column - start.column);
                            foldLine.shiftRow(len);
                        }
                        idx = foldLines.indexOf(foldLine) + 1;
                    }
                    for(; idx < foldLines.length; idx++){
                        var foldLine = foldLines[idx];
                        if (foldLine.start.row >= firstRow) foldLine.shiftRow(len);
                    }
                }
            } else {
                len = Math.abs(delta.start.column - delta.end.column);
                if (action === "remove") {
                    removedFolds = this.getFoldsInRange(delta);
                    this.removeFolds(removedFolds);
                    len = -len;
                }
                var foldLine = this.getFoldLine(firstRow);
                if (foldLine) foldLine.addRemoveChars(firstRow, start.column, len);
            }
            if (useWrapMode && this.$wrapData.length != this.doc.getLength()) console.error("doc.getLength() and $wrapData.length have to be the same!");
            this.$updating = false;
            if (useWrapMode) this.$updateWrapData(firstRow, lastRow);
            else this.$updateRowLengthCache(firstRow, lastRow);
            return removedFolds;
        };
        this.$updateRowLengthCache = function(firstRow, lastRow, b) {
            this.$rowLengthCache[firstRow] = null;
            this.$rowLengthCache[lastRow] = null;
        };
        this.$updateWrapData = function(firstRow, lastRow) {
            var lines = this.doc.getAllLines();
            var tabSize = this.getTabSize();
            var wrapData = this.$wrapData;
            var wrapLimit = this.$wrapLimit;
            var tokens;
            var foldLine;
            var row = firstRow;
            lastRow = Math.min(lastRow, lines.length - 1);
            while(row <= lastRow){
                foldLine = this.getFoldLine(row, foldLine);
                if (!foldLine) {
                    tokens = this.$getDisplayTokens(lines[row]);
                    wrapData[row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);
                    row++;
                } else {
                    tokens = [];
                    foldLine.walk((function(placeholder, row1, column, lastColumn) {
                        var walkTokens;
                        if (placeholder != null) {
                            walkTokens = this.$getDisplayTokens(placeholder, tokens.length);
                            walkTokens[0] = PLACEHOLDER_START;
                            for(var i = 1; i < walkTokens.length; i++)walkTokens[i] = PLACEHOLDER_BODY;
                        } else walkTokens = this.$getDisplayTokens(lines[row1].substring(lastColumn, column), tokens.length);
                        tokens = tokens.concat(walkTokens);
                    }).bind(this), foldLine.end.row, lines[foldLine.end.row].length + 1);
                    wrapData[foldLine.start.row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);
                    row = foldLine.end.row + 1;
                }
            }
        };
        var CHAR = 1, CHAR_EXT = 2, PLACEHOLDER_START = 3, PLACEHOLDER_BODY = 4, PUNCTUATION = 9, SPACE = 10, TAB = 11, TAB_SPACE = 12;
        this.$computeWrapSplits = function(tokens, wrapLimit, tabSize) {
            if (tokens.length == 0) return [];
            var splits = [];
            var displayLength = tokens.length;
            var lastSplit = 0, lastDocSplit = 0;
            var isCode = this.$wrapAsCode;
            var indentedSoftWrap = this.$indentedSoftWrap;
            var maxIndent = wrapLimit <= Math.max(2 * tabSize, 8) || indentedSoftWrap === false ? 0 : Math.floor(wrapLimit / 2);
            function getWrapIndent() {
                var indentation = 0;
                if (maxIndent === 0) return indentation;
                if (indentedSoftWrap) for(var i = 0; i < tokens.length; i++){
                    var token = tokens[i];
                    if (token == SPACE) indentation += 1;
                    else if (token == TAB) indentation += tabSize;
                    else if (token == TAB_SPACE) continue;
                    else break;
                }
                if (isCode && indentedSoftWrap !== false) indentation += tabSize;
                return Math.min(indentation, maxIndent);
            }
            function addSplit(screenPos) {
                var displayed = tokens.slice(lastSplit, screenPos);
                var len = displayed.length;
                displayed.join("").replace(/12/g, function() {
                    len -= 1;
                }).replace(/2/g, function() {
                    len -= 1;
                });
                if (!splits.length) {
                    indent = getWrapIndent();
                    splits.indent = indent;
                }
                lastDocSplit += len;
                splits.push(lastDocSplit);
                lastSplit = screenPos;
            }
            var indent = 0;
            while(displayLength - lastSplit > wrapLimit - indent){
                var split = lastSplit + wrapLimit - indent;
                if (tokens[split - 1] >= SPACE && tokens[split] >= SPACE) {
                    addSplit(split);
                    continue;
                }
                if (tokens[split] == PLACEHOLDER_START || tokens[split] == PLACEHOLDER_BODY) {
                    for(; split != lastSplit - 1; split--){
                        if (tokens[split] == PLACEHOLDER_START) break;
                    }
                    if (split > lastSplit) {
                        addSplit(split);
                        continue;
                    }
                    split = lastSplit + wrapLimit;
                    for(; split < tokens.length; split++){
                        if (tokens[split] != PLACEHOLDER_BODY) break;
                    }
                    if (split == tokens.length) break; // Breaks the while-loop.
                    addSplit(split);
                    continue;
                }
                var minSplit = Math.max(split - (wrapLimit - (wrapLimit >> 2)), lastSplit - 1);
                while(split > minSplit && tokens[split] < PLACEHOLDER_START)split--;
                if (isCode) {
                    while(split > minSplit && tokens[split] < PLACEHOLDER_START)split--;
                    while(split > minSplit && tokens[split] == PUNCTUATION)split--;
                } else while(split > minSplit && tokens[split] < SPACE)split--;
                if (split > minSplit) {
                    addSplit(++split);
                    continue;
                }
                split = lastSplit + wrapLimit;
                if (tokens[split] == CHAR_EXT) split--;
                addSplit(split - indent);
            }
            return splits;
        };
        this.$getDisplayTokens = function(str, offset) {
            var arr = [];
            var tabSize;
            offset = offset || 0;
            for(var i = 0; i < str.length; i++){
                var c = str.charCodeAt(i);
                if (c == 9) {
                    tabSize = this.getScreenTabSize(arr.length + offset);
                    arr.push(TAB);
                    for(var n = 1; n < tabSize; n++)arr.push(TAB_SPACE);
                } else if (c == 32) arr.push(SPACE);
                else if (c > 39 && c < 48 || c > 57 && c < 64) arr.push(PUNCTUATION);
                else if (c >= 4352 && isFullWidth(c)) arr.push(CHAR, CHAR_EXT);
                else arr.push(CHAR);
            }
            return arr;
        };
        this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {
            if (maxScreenColumn == 0) return [
                0,
                0
            ];
            if (maxScreenColumn == null) maxScreenColumn = Infinity;
            screenColumn = screenColumn || 0;
            var c, column;
            for(column = 0; column < str.length; column++){
                c = str.charCodeAt(column);
                if (c == 9) screenColumn += this.getScreenTabSize(screenColumn);
                else if (c >= 4352 && isFullWidth(c)) screenColumn += 2;
                else screenColumn += 1;
                if (screenColumn > maxScreenColumn) break;
            }
            return [
                screenColumn,
                column
            ];
        };
        this.lineWidgets = null;
        this.getRowLength = function(row) {
            if (this.lineWidgets) var h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;
            else h = 0;
            if (!this.$useWrapMode || !this.$wrapData[row]) return 1 + h;
            else return this.$wrapData[row].length + 1 + h;
        };
        this.getRowLineCount = function(row) {
            if (!this.$useWrapMode || !this.$wrapData[row]) return 1;
            else return this.$wrapData[row].length + 1;
        };
        this.getRowWrapIndent = function(screenRow) {
            if (this.$useWrapMode) {
                var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);
                var splits = this.$wrapData[pos.row];
                return splits.length && splits[0] < pos.column ? splits.indent : 0;
            } else return 0;
        };
        this.getScreenLastRowColumn = function(screenRow) {
            var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);
            return this.documentToScreenColumn(pos.row, pos.column);
        };
        this.getDocumentLastRowColumn = function(docRow, docColumn) {
            var screenRow = this.documentToScreenRow(docRow, docColumn);
            return this.getScreenLastRowColumn(screenRow);
        };
        this.getDocumentLastRowColumnPosition = function(docRow, docColumn) {
            var screenRow = this.documentToScreenRow(docRow, docColumn);
            return this.screenToDocumentPosition(screenRow, Number.MAX_VALUE / 10);
        };
        this.getRowSplitData = function(row) {
            if (!this.$useWrapMode) return undefined;
            else return this.$wrapData[row];
        };
        this.getScreenTabSize = function(screenColumn) {
            return this.$tabSize - screenColumn % this.$tabSize;
        };
        this.screenToDocumentRow = function(screenRow, screenColumn) {
            return this.screenToDocumentPosition(screenRow, screenColumn).row;
        };
        this.screenToDocumentColumn = function(screenRow, screenColumn) {
            return this.screenToDocumentPosition(screenRow, screenColumn).column;
        };
        this.screenToDocumentPosition = function(screenRow, screenColumn, offsetX) {
            if (screenRow < 0) return {
                row: 0,
                column: 0
            };
            var line;
            var docRow = 0;
            var docColumn = 0;
            var column;
            var row = 0;
            var rowLength = 0;
            var rowCache = this.$screenRowCache;
            var i = this.$getRowCacheIndex(rowCache, screenRow);
            var l = rowCache.length;
            if (l && i >= 0) {
                var row = rowCache[i];
                var docRow = this.$docRowCache[i];
                var doCache = screenRow > rowCache[l - 1];
            } else var doCache = !l;
            var maxRow = this.getLength() - 1;
            var foldLine = this.getNextFoldLine(docRow);
            var foldStart = foldLine ? foldLine.start.row : Infinity;
            while(row <= screenRow){
                rowLength = this.getRowLength(docRow);
                if (row + rowLength > screenRow || docRow >= maxRow) break;
                else {
                    row += rowLength;
                    docRow++;
                    if (docRow > foldStart) {
                        docRow = foldLine.end.row + 1;
                        foldLine = this.getNextFoldLine(docRow, foldLine);
                        foldStart = foldLine ? foldLine.start.row : Infinity;
                    }
                }
                if (doCache) {
                    this.$docRowCache.push(docRow);
                    this.$screenRowCache.push(row);
                }
            }
            if (foldLine && foldLine.start.row <= docRow) {
                line = this.getFoldDisplayLine(foldLine);
                docRow = foldLine.start.row;
            } else if (row + rowLength <= screenRow || docRow > maxRow) return {
                row: maxRow,
                column: this.getLine(maxRow).length
            };
            else {
                line = this.getLine(docRow);
                foldLine = null;
            }
            var wrapIndent = 0, splitIndex = Math.floor(screenRow - row);
            if (this.$useWrapMode) {
                var splits = this.$wrapData[docRow];
                if (splits) {
                    column = splits[splitIndex];
                    if (splitIndex > 0 && splits.length) {
                        wrapIndent = splits.indent;
                        docColumn = splits[splitIndex - 1] || splits[splits.length - 1];
                        line = line.substring(docColumn);
                    }
                }
            }
            if (offsetX !== undefined && this.$bidiHandler.isBidiRow(row + splitIndex, docRow, splitIndex)) screenColumn = this.$bidiHandler.offsetToCol(offsetX);
            docColumn += this.$getStringScreenWidth(line, screenColumn - wrapIndent)[1];
            if (this.$useWrapMode && docColumn >= column) docColumn = column - 1;
            if (foldLine) return foldLine.idxToPosition(docColumn);
            return {
                row: docRow,
                column: docColumn
            };
        };
        this.documentToScreenPosition = function(docRow, docColumn) {
            if (typeof docColumn === "undefined") var pos = this.$clipPositionToDocument(docRow.row, docRow.column);
            else pos = this.$clipPositionToDocument(docRow, docColumn);
            docRow = pos.row;
            docColumn = pos.column;
            var screenRow = 0;
            var foldStartRow = null;
            var fold = null;
            fold = this.getFoldAt(docRow, docColumn, 1);
            if (fold) {
                docRow = fold.start.row;
                docColumn = fold.start.column;
            }
            var rowEnd, row = 0;
            var rowCache = this.$docRowCache;
            var i = this.$getRowCacheIndex(rowCache, docRow);
            var l = rowCache.length;
            if (l && i >= 0) {
                var row = rowCache[i];
                var screenRow = this.$screenRowCache[i];
                var doCache = docRow > rowCache[l - 1];
            } else var doCache = !l;
            var foldLine = this.getNextFoldLine(row);
            var foldStart = foldLine ? foldLine.start.row : Infinity;
            while(row < docRow){
                if (row >= foldStart) {
                    rowEnd = foldLine.end.row + 1;
                    if (rowEnd > docRow) break;
                    foldLine = this.getNextFoldLine(rowEnd, foldLine);
                    foldStart = foldLine ? foldLine.start.row : Infinity;
                } else rowEnd = row + 1;
                screenRow += this.getRowLength(row);
                row = rowEnd;
                if (doCache) {
                    this.$docRowCache.push(row);
                    this.$screenRowCache.push(screenRow);
                }
            }
            var textLine = "";
            if (foldLine && row >= foldStart) {
                textLine = this.getFoldDisplayLine(foldLine, docRow, docColumn);
                foldStartRow = foldLine.start.row;
            } else {
                textLine = this.getLine(docRow).substring(0, docColumn);
                foldStartRow = docRow;
            }
            var wrapIndent = 0;
            if (this.$useWrapMode) {
                var wrapRow = this.$wrapData[foldStartRow];
                if (wrapRow) {
                    var screenRowOffset = 0;
                    while(textLine.length >= wrapRow[screenRowOffset]){
                        screenRow++;
                        screenRowOffset++;
                    }
                    textLine = textLine.substring(wrapRow[screenRowOffset - 1] || 0, textLine.length);
                    wrapIndent = screenRowOffset > 0 ? wrapRow.indent : 0;
                }
            }
            return {
                row: screenRow,
                column: wrapIndent + this.$getStringScreenWidth(textLine)[0]
            };
        };
        this.documentToScreenColumn = function(row, docColumn) {
            return this.documentToScreenPosition(row, docColumn).column;
        };
        this.documentToScreenRow = function(docRow, docColumn) {
            return this.documentToScreenPosition(docRow, docColumn).row;
        };
        this.getScreenLength = function() {
            var screenRows = 0;
            var fold = null;
            if (!this.$useWrapMode) {
                screenRows = this.getLength();
                var foldData = this.$foldData;
                for(var i = 0; i < foldData.length; i++){
                    fold = foldData[i];
                    screenRows -= fold.end.row - fold.start.row;
                }
            } else {
                var lastRow = this.$wrapData.length;
                var row = 0, i = 0;
                var fold = this.$foldData[i++];
                var foldStart = fold ? fold.start.row : Infinity;
                while(row < lastRow){
                    var splits = this.$wrapData[row];
                    screenRows += splits ? splits.length + 1 : 1;
                    row++;
                    if (row > foldStart) {
                        row = fold.end.row + 1;
                        fold = this.$foldData[i++];
                        foldStart = fold ? fold.start.row : Infinity;
                    }
                }
            }
            if (this.lineWidgets) screenRows += this.$getWidgetScreenLength();
            return screenRows;
        };
        this.$setFontMetrics = function(fm) {
            if (!this.$enableVarChar) return;
            this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {
                if (maxScreenColumn === 0) return [
                    0,
                    0
                ];
                if (!maxScreenColumn) maxScreenColumn = Infinity;
                screenColumn = screenColumn || 0;
                var c, column;
                for(column = 0; column < str.length; column++){
                    c = str.charAt(column);
                    if (c === "\t") screenColumn += this.getScreenTabSize(screenColumn);
                    else screenColumn += fm.getCharacterWidth(c);
                    if (screenColumn > maxScreenColumn) break;
                }
                return [
                    screenColumn,
                    column
                ];
            };
        };
        this.destroy = function() {
            if (this.bgTokenizer) {
                this.bgTokenizer.setDocument(null);
                this.bgTokenizer = null;
            }
            this.$stopWorker();
        };
        this.isFullWidth = isFullWidth;
        function isFullWidth(c) {
            if (c < 4352) return false;
            return c >= 4352 && c <= 4447 || c >= 4515 && c <= 4519 || c >= 4602 && c <= 4607 || c >= 9001 && c <= 9002 || c >= 11904 && c <= 11929 || c >= 11931 && c <= 12019 || c >= 12032 && c <= 12245 || c >= 12272 && c <= 12283 || c >= 12288 && c <= 12350 || c >= 12353 && c <= 12438 || c >= 12441 && c <= 12543 || c >= 12549 && c <= 12589 || c >= 12593 && c <= 12686 || c >= 12688 && c <= 12730 || c >= 12736 && c <= 12771 || c >= 12784 && c <= 12830 || c >= 12832 && c <= 12871 || c >= 12880 && c <= 13054 || c >= 13056 && c <= 19903 || c >= 19968 && c <= 42124 || c >= 42128 && c <= 42182 || c >= 43360 && c <= 43388 || c >= 44032 && c <= 55203 || c >= 55216 && c <= 55238 || c >= 55243 && c <= 55291 || c >= 63744 && c <= 64255 || c >= 65040 && c <= 65049 || c >= 65072 && c <= 65106 || c >= 65108 && c <= 65126 || c >= 65128 && c <= 65131 || c >= 65281 && c <= 65376 || c >= 65504 && c <= 65510;
        }
    }).call(EditSession.prototype);
    acequire("./edit_session/folding").Folding.call(EditSession.prototype);
    acequire("./edit_session/bracket_match").BracketMatch.call(EditSession.prototype);
    config.defineOptions(EditSession.prototype, "session", {
        wrap: {
            set: function(value) {
                if (!value || value == "off") value = false;
                else if (value == "free") value = true;
                else if (value == "printMargin") value = -1;
                else if (typeof value == "string") value = parseInt(value, 10) || false;
                if (this.$wrap == value) return;
                this.$wrap = value;
                if (!value) this.setUseWrapMode(false);
                else {
                    var col = typeof value == "number" ? value : null;
                    this.setWrapLimitRange(col, col);
                    this.setUseWrapMode(true);
                }
            },
            get: function() {
                if (this.getUseWrapMode()) {
                    if (this.$wrap == -1) return "printMargin";
                    if (!this.getWrapLimitRange().min) return "free";
                    return this.$wrap;
                }
                return "off";
            },
            handlesSet: true
        },
        wrapMethod: {
            set: function(val) {
                val = val == "auto" ? this.$mode.type != "text" : val != "text";
                if (val != this.$wrapAsCode) {
                    this.$wrapAsCode = val;
                    if (this.$useWrapMode) {
                        this.$modified = true;
                        this.$resetRowCache(0);
                        this.$updateWrapData(0, this.getLength() - 1);
                    }
                }
            },
            initialValue: "auto"
        },
        indentedSoftWrap: {
            initialValue: true
        },
        firstLineNumber: {
            set: function() {
                this._signal("changeBreakpoint");
            },
            initialValue: 1
        },
        useWorker: {
            set: function(useWorker) {
                this.$useWorker = useWorker;
                this.$stopWorker();
                if (useWorker) this.$startWorker();
            },
            initialValue: true
        },
        useSoftTabs: {
            initialValue: true
        },
        tabSize: {
            set: function(tabSize) {
                if (isNaN(tabSize) || this.$tabSize === tabSize) return;
                this.$modified = true;
                this.$rowLengthCache = [];
                this.$tabSize = tabSize;
                this._signal("changeTabSize");
            },
            initialValue: 4,
            handlesSet: true
        },
        navigateWithinSoftTabs: {
            initialValue: false
        },
        overwrite: {
            set: function(val) {
                this._signal("changeOverwrite");
            },
            initialValue: false
        },
        newLineMode: {
            set: function(val) {
                this.doc.setNewLineMode(val);
            },
            get: function() {
                return this.doc.getNewLineMode();
            },
            handlesSet: true
        },
        mode: {
            set: function(val) {
                this.setMode(val);
            },
            get: function() {
                return this.$modeId;
            }
        }
    });
    exports.EditSession = EditSession;
});
ace.define("ace/search", [
    "require",
    "exports",
    "module",
    "ace/lib/lang",
    "ace/lib/oop",
    "ace/range"
], function(acequire, exports, module) {
    var lang = acequire("./lib/lang");
    var oop = acequire("./lib/oop");
    var Range1 = acequire("./range").Range;
    var Search = function() {
        this.$options = {
        };
    };
    (function() {
        this.set = function(options) {
            oop.mixin(this.$options, options);
            return this;
        };
        this.getOptions = function() {
            return lang.copyObject(this.$options);
        };
        this.setOptions = function(options) {
            this.$options = options;
        };
        this.find = function(session) {
            var options = this.$options;
            var iterator = this.$matchIterator(session, options);
            if (!iterator) return false;
            var firstRange = null;
            iterator.forEach(function(sr, sc, er, ec) {
                firstRange = new Range1(sr, sc, er, ec);
                if (sc == ec && options.start && options.start.start && options.skipCurrent != false && firstRange.isEqual(options.start)) {
                    firstRange = null;
                    return false;
                }
                return true;
            });
            return firstRange;
        };
        this.findAll = function(session) {
            var options = this.$options;
            if (!options.needle) return [];
            this.$assembleRegExp(options);
            var range = options.range;
            var lines = range ? session.getLines(range.start.row, range.end.row) : session.doc.getAllLines();
            var ranges = [];
            var re = options.re;
            if (options.$isMultiLine) {
                var len = re.length;
                var maxRow = lines.length - len;
                var prevRange;
                outer: for(var row = re.offset || 0; row <= maxRow; row++){
                    for(var j = 0; j < len; j++)if (lines[row + j].search(re[j]) == -1) continue outer;
                    var startLine = lines[row];
                    var line = lines[row + len - 1];
                    var startIndex = startLine.length - startLine.match(re[0])[0].length;
                    var endIndex = line.match(re[len - 1])[0].length;
                    if (prevRange && prevRange.end.row === row && prevRange.end.column > startIndex) continue;
                    ranges.push(prevRange = new Range1(row, startIndex, row + len - 1, endIndex));
                    if (len > 2) row = row + len - 2;
                }
            } else for(var i = 0; i < lines.length; i++){
                var matches = lang.getMatchOffsets(lines[i], re);
                for(var j = 0; j < matches.length; j++){
                    var match = matches[j];
                    ranges.push(new Range1(i, match.offset, i, match.offset + match.length));
                }
            }
            if (range) {
                var startColumn = range.start.column;
                var endColumn = range.start.column;
                var i = 0, j = ranges.length - 1;
                while(i < j && ranges[i].start.column < startColumn && ranges[i].start.row == range.start.row)i++;
                while(i < j && ranges[j].end.column > endColumn && ranges[j].end.row == range.end.row)j--;
                ranges = ranges.slice(i, j + 1);
                for(i = 0, j = ranges.length; i < j; i++){
                    ranges[i].start.row += range.start.row;
                    ranges[i].end.row += range.start.row;
                }
            }
            return ranges;
        };
        this.replace = function(input, replacement) {
            var options = this.$options;
            var re = this.$assembleRegExp(options);
            if (options.$isMultiLine) return replacement;
            if (!re) return;
            var match = re.exec(input);
            if (!match || match[0].length != input.length) return null;
            replacement = input.replace(re, replacement);
            if (options.preserveCase) {
                replacement = replacement.split("");
                for(var i = Math.min(input.length, input.length); i--;){
                    var ch = input[i];
                    if (ch && ch.toLowerCase() != ch) replacement[i] = replacement[i].toUpperCase();
                    else replacement[i] = replacement[i].toLowerCase();
                }
                replacement = replacement.join("");
            }
            return replacement;
        };
        this.$assembleRegExp = function(options, $disableFakeMultiline) {
            if (options.needle instanceof RegExp) return options.re = options.needle;
            var needle = options.needle;
            if (!options.needle) return options.re = false;
            if (!options.regExp) needle = lang.escapeRegExp(needle);
            if (options.wholeWord) needle = addWordBoundary(needle, options);
            var modifier = options.caseSensitive ? "gm" : "gmi";
            options.$isMultiLine = !$disableFakeMultiline && /[\n\r]/.test(needle);
            if (options.$isMultiLine) return options.re = this.$assembleMultilineRegExp(needle, modifier);
            try {
                var re = new RegExp(needle, modifier);
            } catch (e) {
                re = false;
            }
            return options.re = re;
        };
        this.$assembleMultilineRegExp = function(needle, modifier) {
            var parts = needle.replace(/\r\n|\r|\n/g, "$\n^").split("\n");
            var re = [];
            for(var i = 0; i < parts.length; i++)try {
                re.push(new RegExp(parts[i], modifier));
            } catch (e) {
                return false;
            }
            return re;
        };
        this.$matchIterator = function(session, options) {
            var re = this.$assembleRegExp(options);
            if (!re) return false;
            var backwards = options.backwards == true;
            var skipCurrent = options.skipCurrent != false;
            var range = options.range;
            var start = options.start;
            if (!start) start = range ? range[backwards ? "end" : "start"] : session.selection.getRange();
            if (start.start) start = start[skipCurrent != backwards ? "end" : "start"];
            var firstRow = range ? range.start.row : 0;
            var lastRow = range ? range.end.row : session.getLength() - 1;
            if (backwards) var forEach = function(callback) {
                var row = start.row;
                if (forEachInLine(row, start.column, callback)) return;
                for(row--; row >= firstRow; row--)if (forEachInLine(row, Number.MAX_VALUE, callback)) return;
                if (options.wrap == false) return;
                for(row = lastRow, firstRow = start.row; row >= firstRow; row--)if (forEachInLine(row, Number.MAX_VALUE, callback)) return;
            };
            else var forEach = function(callback) {
                var row = start.row;
                if (forEachInLine(row, start.column, callback)) return;
                for(row = row + 1; row <= lastRow; row++)if (forEachInLine(row, 0, callback)) return;
                if (options.wrap == false) return;
                for(row = firstRow, lastRow = start.row; row <= lastRow; row++)if (forEachInLine(row, 0, callback)) return;
            };
            if (options.$isMultiLine) {
                var len = re.length;
                var forEachInLine = function(row, offset, callback) {
                    var startRow = backwards ? row - len + 1 : row;
                    if (startRow < 0) return;
                    var line = session.getLine(startRow);
                    var startIndex = line.search(re[0]);
                    if (!backwards && startIndex < offset || startIndex === -1) return;
                    for(var i = 1; i < len; i++){
                        line = session.getLine(startRow + i);
                        if (line.search(re[i]) == -1) return;
                    }
                    var endIndex = line.match(re[len - 1])[0].length;
                    if (backwards && endIndex > offset) return;
                    if (callback(startRow, startIndex, startRow + len - 1, endIndex)) return true;
                };
            } else if (backwards) var forEachInLine = function(row, endIndex, callback) {
                var line = session.getLine(row);
                var matches = [];
                var m, last = 0;
                re.lastIndex = 0;
                while(m = re.exec(line)){
                    var length = m[0].length;
                    last = m.index;
                    if (!length) {
                        if (last >= line.length) break;
                        re.lastIndex = last += 1;
                    }
                    if (m.index + length > endIndex) break;
                    matches.push(m.index, length);
                }
                for(var i = matches.length - 1; i >= 0; i -= 2){
                    var column = matches[i - 1];
                    var length = matches[i];
                    if (callback(row, column, row, column + length)) return true;
                }
            };
            else var forEachInLine = function(row, startIndex, callback) {
                var line = session.getLine(row);
                var m;
                var last = startIndex;
                re.lastIndex = startIndex;
                while(m = re.exec(line)){
                    var length = m[0].length;
                    last = m.index;
                    if (callback(row, last, row, last + length)) return true;
                    if (!length) {
                        re.lastIndex = last += 1;
                        if (last >= line.length) return false;
                    }
                }
            };
            return {
                forEach: forEach
            };
        };
    }).call(Search.prototype);
    function addWordBoundary(needle, options) {
        function wordBoundary(c) {
            if (/\w/.test(c) || options.regExp) return "\\b";
            return "";
        }
        return wordBoundary(needle[0]) + needle + wordBoundary(needle[needle.length - 1]);
    }
    exports.Search = Search;
});
ace.define("ace/keyboard/hash_handler", [
    "require",
    "exports",
    "module",
    "ace/lib/keys",
    "ace/lib/useragent"
], function(acequire, exports, module) {
    var keyUtil = acequire("../lib/keys");
    var useragent = acequire("../lib/useragent");
    var KEY_MODS = keyUtil.KEY_MODS;
    function HashHandler(config, platform) {
        this.platform = platform || (useragent.isMac ? "mac" : "win");
        this.commands = {
        };
        this.commandKeyBinding = {
        };
        this.addCommands(config);
        this.$singleCommand = true;
    }
    function MultiHashHandler(config, platform) {
        HashHandler.call(this, config, platform);
        this.$singleCommand = false;
    }
    MultiHashHandler.prototype = HashHandler.prototype;
    (function() {
        this.addCommand = function(command) {
            if (this.commands[command.name]) this.removeCommand(command);
            this.commands[command.name] = command;
            if (command.bindKey) this._buildKeyHash(command);
        };
        this.removeCommand = function(command, keepCommand) {
            var name = command && (typeof command === 'string' ? command : command.name);
            command = this.commands[name];
            if (!keepCommand) delete this.commands[name];
            var ckb = this.commandKeyBinding;
            for(var keyId in ckb){
                var cmdGroup = ckb[keyId];
                if (cmdGroup == command) delete ckb[keyId];
                else if (Array.isArray(cmdGroup)) {
                    var i = cmdGroup.indexOf(command);
                    if (i != -1) {
                        cmdGroup.splice(i, 1);
                        if (cmdGroup.length == 1) ckb[keyId] = cmdGroup[0];
                    }
                }
            }
        };
        this.bindKey = function(key, command, position) {
            if (typeof key == "object" && key) {
                if (position == undefined) position = key.position;
                key = key[this.platform];
            }
            if (!key) return;
            if (typeof command == "function") return this.addCommand({
                exec: command,
                bindKey: key,
                name: command.name || key
            });
            key.split("|").forEach(function(keyPart) {
                var chain = "";
                if (keyPart.indexOf(" ") != -1) {
                    var parts = keyPart.split(/\s+/);
                    keyPart = parts.pop();
                    parts.forEach(function(keyPart1) {
                        var binding = this.parseKeys(keyPart1);
                        var id = KEY_MODS[binding.hashId] + binding.key;
                        chain += (chain ? " " : "") + id;
                        this._addCommandToBinding(chain, "chainKeys");
                    }, this);
                    chain += " ";
                }
                var binding = this.parseKeys(keyPart);
                var id = KEY_MODS[binding.hashId] + binding.key;
                this._addCommandToBinding(chain + id, command, position);
            }, this);
        };
        function getPosition(command) {
            return typeof command == "object" && command.bindKey && command.bindKey.position || (command.isDefault ? -100 : 0);
        }
        this._addCommandToBinding = function(keyId, command, position) {
            var ckb = this.commandKeyBinding, i;
            if (!command) delete ckb[keyId];
            else if (!ckb[keyId] || this.$singleCommand) ckb[keyId] = command;
            else {
                if (!Array.isArray(ckb[keyId])) ckb[keyId] = [
                    ckb[keyId]
                ];
                else if ((i = ckb[keyId].indexOf(command)) != -1) ckb[keyId].splice(i, 1);
                if (typeof position != "number") position = getPosition(command);
                var commands = ckb[keyId];
                for(i = 0; i < commands.length; i++){
                    var other = commands[i];
                    var otherPos = getPosition(other);
                    if (otherPos > position) break;
                }
                commands.splice(i, 0, command);
            }
        };
        this.addCommands = function(commands) {
            commands && Object.keys(commands).forEach(function(name) {
                var command = commands[name];
                if (!command) return;
                if (typeof command === "string") return this.bindKey(command, name);
                if (typeof command === "function") command = {
                    exec: command
                };
                if (typeof command !== "object") return;
                if (!command.name) command.name = name;
                this.addCommand(command);
            }, this);
        };
        this.removeCommands = function(commands) {
            Object.keys(commands).forEach(function(name) {
                this.removeCommand(commands[name]);
            }, this);
        };
        this.bindKeys = function(keyList) {
            Object.keys(keyList).forEach(function(key) {
                this.bindKey(key, keyList[key]);
            }, this);
        };
        this._buildKeyHash = function(command) {
            this.bindKey(command.bindKey, command);
        };
        this.parseKeys = function(keys) {
            var parts = keys.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(x) {
                return x;
            });
            var key = parts.pop();
            var keyCode = keyUtil[key];
            if (keyUtil.FUNCTION_KEYS[keyCode]) key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();
            else if (!parts.length) return {
                key: key,
                hashId: -1
            };
            else if (parts.length == 1 && parts[0] == "shift") return {
                key: key.toUpperCase(),
                hashId: -1
            };
            var hashId = 0;
            for(var i = parts.length; i--;){
                var modifier = keyUtil.KEY_MODS[parts[i]];
                if (modifier == null) {
                    if (typeof console != "undefined") console.error("invalid modifier " + parts[i] + " in " + keys);
                    return false;
                }
                hashId |= modifier;
            }
            return {
                key: key,
                hashId: hashId
            };
        };
        this.findKeyCommand = function findKeyCommand(hashId, keyString) {
            var key = KEY_MODS[hashId] + keyString;
            return this.commandKeyBinding[key];
        };
        this.handleKeyboard = function(data, hashId, keyString, keyCode) {
            if (keyCode < 0) return;
            var key = KEY_MODS[hashId] + keyString;
            var command = this.commandKeyBinding[key];
            if (data.$keyChain) {
                data.$keyChain += " " + key;
                command = this.commandKeyBinding[data.$keyChain] || command;
            }
            if (command) {
                if (command == "chainKeys" || command[command.length - 1] == "chainKeys") {
                    data.$keyChain = data.$keyChain || key;
                    return {
                        command: "null"
                    };
                }
            }
            if (data.$keyChain) {
                if ((!hashId || hashId == 4) && keyString.length == 1) data.$keyChain = data.$keyChain.slice(0, -key.length - 1); // wait for input
                else if (hashId == -1 || keyCode > 0) data.$keyChain = ""; // reset keyChain
            }
            return {
                command: command
            };
        };
        this.getStatusText = function(editor, data) {
            return data.$keyChain || "";
        };
    }).call(HashHandler.prototype);
    exports.HashHandler = HashHandler;
    exports.MultiHashHandler = MultiHashHandler;
});
ace.define("ace/commands/command_manager", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/keyboard/hash_handler",
    "ace/lib/event_emitter"
], function(acequire, exports, module) {
    var oop = acequire("../lib/oop");
    var MultiHashHandler = acequire("../keyboard/hash_handler").MultiHashHandler;
    var EventEmitter = acequire("../lib/event_emitter").EventEmitter;
    var CommandManager = function(platform, commands) {
        MultiHashHandler.call(this, commands, platform);
        this.byName = this.commands;
        this.setDefaultHandler("exec", function(e) {
            return e.command.exec(e.editor, e.args || {
            });
        });
    };
    oop.inherits(CommandManager, MultiHashHandler);
    (function() {
        oop.implement(this, EventEmitter);
        this.exec = function(command, editor, args) {
            if (Array.isArray(command)) {
                for(var i = command.length; i--;){
                    if (this.exec(command[i], editor, args)) return true;
                }
                return false;
            }
            if (typeof command === "string") command = this.commands[command];
            if (!command) return false;
            if (editor && editor.$readOnly && !command.readOnly) return false;
            if (command.isAvailable && !command.isAvailable(editor)) return false;
            var e = {
                editor: editor,
                command: command,
                args: args
            };
            e.returnValue = this._emit("exec", e);
            this._signal("afterExec", e);
            return e.returnValue === false ? false : true;
        };
        this.toggleRecording = function(editor) {
            if (this.$inReplay) return;
            editor && editor._emit("changeStatus");
            if (this.recording) {
                this.macro.pop();
                this.removeEventListener("exec", this.$addCommandToMacro);
                if (!this.macro.length) this.macro = this.oldMacro;
                return this.recording = false;
            }
            if (!this.$addCommandToMacro) this.$addCommandToMacro = (function(e) {
                this.macro.push([
                    e.command,
                    e.args
                ]);
            }).bind(this);
            this.oldMacro = this.macro;
            this.macro = [];
            this.on("exec", this.$addCommandToMacro);
            return this.recording = true;
        };
        this.replay = function(editor) {
            if (this.$inReplay || !this.macro) return;
            if (this.recording) return this.toggleRecording(editor);
            try {
                this.$inReplay = true;
                this.macro.forEach(function(x) {
                    if (typeof x == "string") this.exec(x, editor);
                    else this.exec(x[0], editor, x[1]);
                }, this);
            } finally{
                this.$inReplay = false;
            }
        };
        this.trimMacro = function(m) {
            return m.map(function(x) {
                if (typeof x[0] != "string") x[0] = x[0].name;
                if (!x[1]) x = x[0];
                return x;
            });
        };
    }).call(CommandManager.prototype);
    exports.CommandManager = CommandManager;
});
ace.define("ace/commands/default_commands", [
    "require",
    "exports",
    "module",
    "ace/lib/lang",
    "ace/config",
    "ace/range"
], function(acequire, exports, module) {
    var lang = acequire("../lib/lang");
    var config = acequire("../config");
    var Range1 = acequire("../range").Range;
    function bindKey(win, mac) {
        return {
            win: win,
            mac: mac
        };
    }
    exports.commands = [
        {
            name: "showSettingsMenu",
            bindKey: bindKey("Ctrl-,", "Command-,"),
            exec: function(editor) {
                config.loadModule("ace/ext/settings_menu", function(module1) {
                    module1.init(editor);
                    editor.showSettingsMenu();
                });
            },
            readOnly: true
        },
        {
            name: "goToNextError",
            bindKey: bindKey("Alt-E", "F4"),
            exec: function(editor) {
                config.loadModule("ace/ext/error_marker", function(module1) {
                    module1.showErrorMarker(editor, 1);
                });
            },
            scrollIntoView: "animate",
            readOnly: true
        },
        {
            name: "goToPreviousError",
            bindKey: bindKey("Alt-Shift-E", "Shift-F4"),
            exec: function(editor) {
                config.loadModule("ace/ext/error_marker", function(module1) {
                    module1.showErrorMarker(editor, -1);
                });
            },
            scrollIntoView: "animate",
            readOnly: true
        },
        {
            name: "selectall",
            bindKey: bindKey("Ctrl-A", "Command-A"),
            exec: function(editor) {
                editor.selectAll();
            },
            readOnly: true
        },
        {
            name: "centerselection",
            bindKey: bindKey(null, "Ctrl-L"),
            exec: function(editor) {
                editor.centerSelection();
            },
            readOnly: true
        },
        {
            name: "gotoline",
            bindKey: bindKey("Ctrl-L", "Command-L"),
            exec: function(editor) {
                var line = parseInt(prompt("Enter line number:"), 10);
                if (!isNaN(line)) editor.gotoLine(line);
            },
            readOnly: true
        },
        {
            name: "fold",
            bindKey: bindKey("Alt-L|Ctrl-F1", "Command-Alt-L|Command-F1"),
            exec: function(editor) {
                editor.session.toggleFold(false);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "center",
            readOnly: true
        },
        {
            name: "unfold",
            bindKey: bindKey("Alt-Shift-L|Ctrl-Shift-F1", "Command-Alt-Shift-L|Command-Shift-F1"),
            exec: function(editor) {
                editor.session.toggleFold(true);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "center",
            readOnly: true
        },
        {
            name: "toggleFoldWidget",
            bindKey: bindKey("F2", "F2"),
            exec: function(editor) {
                editor.session.toggleFoldWidget();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "center",
            readOnly: true
        },
        {
            name: "toggleParentFoldWidget",
            bindKey: bindKey("Alt-F2", "Alt-F2"),
            exec: function(editor) {
                editor.session.toggleFoldWidget(true);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "center",
            readOnly: true
        },
        {
            name: "foldall",
            bindKey: bindKey(null, "Ctrl-Command-Option-0"),
            exec: function(editor) {
                editor.session.foldAll();
            },
            scrollIntoView: "center",
            readOnly: true
        },
        {
            name: "foldOther",
            bindKey: bindKey("Alt-0", "Command-Option-0"),
            exec: function(editor) {
                editor.session.foldAll();
                editor.session.unfold(editor.selection.getAllRanges());
            },
            scrollIntoView: "center",
            readOnly: true
        },
        {
            name: "unfoldall",
            bindKey: bindKey("Alt-Shift-0", "Command-Option-Shift-0"),
            exec: function(editor) {
                editor.session.unfold();
            },
            scrollIntoView: "center",
            readOnly: true
        },
        {
            name: "findnext",
            bindKey: bindKey("Ctrl-K", "Command-G"),
            exec: function(editor) {
                editor.findNext();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "center",
            readOnly: true
        },
        {
            name: "findprevious",
            bindKey: bindKey("Ctrl-Shift-K", "Command-Shift-G"),
            exec: function(editor) {
                editor.findPrevious();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "center",
            readOnly: true
        },
        {
            name: "selectOrFindNext",
            bindKey: bindKey("Alt-K", "Ctrl-G"),
            exec: function(editor) {
                if (editor.selection.isEmpty()) editor.selection.selectWord();
                else editor.findNext();
            },
            readOnly: true
        },
        {
            name: "selectOrFindPrevious",
            bindKey: bindKey("Alt-Shift-K", "Ctrl-Shift-G"),
            exec: function(editor) {
                if (editor.selection.isEmpty()) editor.selection.selectWord();
                else editor.findPrevious();
            },
            readOnly: true
        },
        {
            name: "find",
            bindKey: bindKey("Ctrl-F", "Command-F"),
            exec: function(editor) {
                config.loadModule("ace/ext/searchbox", function(e) {
                    e.Search(editor);
                });
            },
            readOnly: true
        },
        {
            name: "overwrite",
            bindKey: "Insert",
            exec: function(editor) {
                editor.toggleOverwrite();
            },
            readOnly: true
        },
        {
            name: "selecttostart",
            bindKey: bindKey("Ctrl-Shift-Home", "Command-Shift-Home|Command-Shift-Up"),
            exec: function(editor) {
                editor.getSelection().selectFileStart();
            },
            multiSelectAction: "forEach",
            readOnly: true,
            scrollIntoView: "animate",
            aceCommandGroup: "fileJump"
        },
        {
            name: "gotostart",
            bindKey: bindKey("Ctrl-Home", "Command-Home|Command-Up"),
            exec: function(editor) {
                editor.navigateFileStart();
            },
            multiSelectAction: "forEach",
            readOnly: true,
            scrollIntoView: "animate",
            aceCommandGroup: "fileJump"
        },
        {
            name: "selectup",
            bindKey: bindKey("Shift-Up", "Shift-Up|Ctrl-Shift-P"),
            exec: function(editor) {
                editor.getSelection().selectUp();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "golineup",
            bindKey: bindKey("Up", "Up|Ctrl-P"),
            exec: function(editor, args) {
                editor.navigateUp(args.times);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selecttoend",
            bindKey: bindKey("Ctrl-Shift-End", "Command-Shift-End|Command-Shift-Down"),
            exec: function(editor) {
                editor.getSelection().selectFileEnd();
            },
            multiSelectAction: "forEach",
            readOnly: true,
            scrollIntoView: "animate",
            aceCommandGroup: "fileJump"
        },
        {
            name: "gotoend",
            bindKey: bindKey("Ctrl-End", "Command-End|Command-Down"),
            exec: function(editor) {
                editor.navigateFileEnd();
            },
            multiSelectAction: "forEach",
            readOnly: true,
            scrollIntoView: "animate",
            aceCommandGroup: "fileJump"
        },
        {
            name: "selectdown",
            bindKey: bindKey("Shift-Down", "Shift-Down|Ctrl-Shift-N"),
            exec: function(editor) {
                editor.getSelection().selectDown();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "golinedown",
            bindKey: bindKey("Down", "Down|Ctrl-N"),
            exec: function(editor, args) {
                editor.navigateDown(args.times);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selectwordleft",
            bindKey: bindKey("Ctrl-Shift-Left", "Option-Shift-Left"),
            exec: function(editor) {
                editor.getSelection().selectWordLeft();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "gotowordleft",
            bindKey: bindKey("Ctrl-Left", "Option-Left"),
            exec: function(editor) {
                editor.navigateWordLeft();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selecttolinestart",
            bindKey: bindKey("Alt-Shift-Left", "Command-Shift-Left|Ctrl-Shift-A"),
            exec: function(editor) {
                editor.getSelection().selectLineStart();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "gotolinestart",
            bindKey: bindKey("Alt-Left|Home", "Command-Left|Home|Ctrl-A"),
            exec: function(editor) {
                editor.navigateLineStart();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selectleft",
            bindKey: bindKey("Shift-Left", "Shift-Left|Ctrl-Shift-B"),
            exec: function(editor) {
                editor.getSelection().selectLeft();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "gotoleft",
            bindKey: bindKey("Left", "Left|Ctrl-B"),
            exec: function(editor, args) {
                editor.navigateLeft(args.times);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selectwordright",
            bindKey: bindKey("Ctrl-Shift-Right", "Option-Shift-Right"),
            exec: function(editor) {
                editor.getSelection().selectWordRight();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "gotowordright",
            bindKey: bindKey("Ctrl-Right", "Option-Right"),
            exec: function(editor) {
                editor.navigateWordRight();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selecttolineend",
            bindKey: bindKey("Alt-Shift-Right", "Command-Shift-Right|Shift-End|Ctrl-Shift-E"),
            exec: function(editor) {
                editor.getSelection().selectLineEnd();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "gotolineend",
            bindKey: bindKey("Alt-Right|End", "Command-Right|End|Ctrl-E"),
            exec: function(editor) {
                editor.navigateLineEnd();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selectright",
            bindKey: bindKey("Shift-Right", "Shift-Right"),
            exec: function(editor) {
                editor.getSelection().selectRight();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "gotoright",
            bindKey: bindKey("Right", "Right|Ctrl-F"),
            exec: function(editor, args) {
                editor.navigateRight(args.times);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selectpagedown",
            bindKey: "Shift-PageDown",
            exec: function(editor) {
                editor.selectPageDown();
            },
            readOnly: true
        },
        {
            name: "pagedown",
            bindKey: bindKey(null, "Option-PageDown"),
            exec: function(editor) {
                editor.scrollPageDown();
            },
            readOnly: true
        },
        {
            name: "gotopagedown",
            bindKey: bindKey("PageDown", "PageDown|Ctrl-V"),
            exec: function(editor) {
                editor.gotoPageDown();
            },
            readOnly: true
        },
        {
            name: "selectpageup",
            bindKey: "Shift-PageUp",
            exec: function(editor) {
                editor.selectPageUp();
            },
            readOnly: true
        },
        {
            name: "pageup",
            bindKey: bindKey(null, "Option-PageUp"),
            exec: function(editor) {
                editor.scrollPageUp();
            },
            readOnly: true
        },
        {
            name: "gotopageup",
            bindKey: "PageUp",
            exec: function(editor) {
                editor.gotoPageUp();
            },
            readOnly: true
        },
        {
            name: "scrollup",
            bindKey: bindKey("Ctrl-Up", null),
            exec: function(e) {
                e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight);
            },
            readOnly: true
        },
        {
            name: "scrolldown",
            bindKey: bindKey("Ctrl-Down", null),
            exec: function(e) {
                e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight);
            },
            readOnly: true
        },
        {
            name: "selectlinestart",
            bindKey: "Shift-Home",
            exec: function(editor) {
                editor.getSelection().selectLineStart();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selectlineend",
            bindKey: "Shift-End",
            exec: function(editor) {
                editor.getSelection().selectLineEnd();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "togglerecording",
            bindKey: bindKey("Ctrl-Alt-E", "Command-Option-E"),
            exec: function(editor) {
                editor.commands.toggleRecording(editor);
            },
            readOnly: true
        },
        {
            name: "replaymacro",
            bindKey: bindKey("Ctrl-Shift-E", "Command-Shift-E"),
            exec: function(editor) {
                editor.commands.replay(editor);
            },
            readOnly: true
        },
        {
            name: "jumptomatching",
            bindKey: bindKey("Ctrl-P", "Ctrl-P"),
            exec: function(editor) {
                editor.jumpToMatching();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "animate",
            readOnly: true
        },
        {
            name: "selecttomatching",
            bindKey: bindKey("Ctrl-Shift-P", "Ctrl-Shift-P"),
            exec: function(editor) {
                editor.jumpToMatching(true);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "animate",
            readOnly: true
        },
        {
            name: "expandToMatching",
            bindKey: bindKey("Ctrl-Shift-M", "Ctrl-Shift-M"),
            exec: function(editor) {
                editor.jumpToMatching(true, true);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "animate",
            readOnly: true
        },
        {
            name: "passKeysToBrowser",
            bindKey: bindKey(null, null),
            exec: function() {
            },
            passEvent: true,
            readOnly: true
        },
        {
            name: "copy",
            exec: function(editor) {
            },
            readOnly: true
        },
        {
            name: "cut",
            exec: function(editor) {
                var range = editor.getSelectionRange();
                editor._emit("cut", range);
                if (!editor.selection.isEmpty()) {
                    editor.session.remove(range);
                    editor.clearSelection();
                }
            },
            scrollIntoView: "cursor",
            multiSelectAction: "forEach"
        },
        {
            name: "paste",
            exec: function(editor, args) {
                editor.$handlePaste(args);
            },
            scrollIntoView: "cursor"
        },
        {
            name: "removeline",
            bindKey: bindKey("Ctrl-D", "Command-D"),
            exec: function(editor) {
                editor.removeLines();
            },
            scrollIntoView: "cursor",
            multiSelectAction: "forEachLine"
        },
        {
            name: "duplicateSelection",
            bindKey: bindKey("Ctrl-Shift-D", "Command-Shift-D"),
            exec: function(editor) {
                editor.duplicateSelection();
            },
            scrollIntoView: "cursor",
            multiSelectAction: "forEach"
        },
        {
            name: "sortlines",
            bindKey: bindKey("Ctrl-Alt-S", "Command-Alt-S"),
            exec: function(editor) {
                editor.sortLines();
            },
            scrollIntoView: "selection",
            multiSelectAction: "forEachLine"
        },
        {
            name: "togglecomment",
            bindKey: bindKey("Ctrl-/", "Command-/"),
            exec: function(editor) {
                editor.toggleCommentLines();
            },
            multiSelectAction: "forEachLine",
            scrollIntoView: "selectionPart"
        },
        {
            name: "toggleBlockComment",
            bindKey: bindKey("Ctrl-Shift-/", "Command-Shift-/"),
            exec: function(editor) {
                editor.toggleBlockComment();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "selectionPart"
        },
        {
            name: "modifyNumberUp",
            bindKey: bindKey("Ctrl-Shift-Up", "Alt-Shift-Up"),
            exec: function(editor) {
                editor.modifyNumber(1);
            },
            scrollIntoView: "cursor",
            multiSelectAction: "forEach"
        },
        {
            name: "modifyNumberDown",
            bindKey: bindKey("Ctrl-Shift-Down", "Alt-Shift-Down"),
            exec: function(editor) {
                editor.modifyNumber(-1);
            },
            scrollIntoView: "cursor",
            multiSelectAction: "forEach"
        },
        {
            name: "replace",
            bindKey: bindKey("Ctrl-H", "Command-Option-F"),
            exec: function(editor) {
                config.loadModule("ace/ext/searchbox", function(e) {
                    e.Search(editor, true);
                });
            }
        },
        {
            name: "undo",
            bindKey: bindKey("Ctrl-Z", "Command-Z"),
            exec: function(editor) {
                editor.undo();
            }
        },
        {
            name: "redo",
            bindKey: bindKey("Ctrl-Shift-Z|Ctrl-Y", "Command-Shift-Z|Command-Y"),
            exec: function(editor) {
                editor.redo();
            }
        },
        {
            name: "copylinesup",
            bindKey: bindKey("Alt-Shift-Up", "Command-Option-Up"),
            exec: function(editor) {
                editor.copyLinesUp();
            },
            scrollIntoView: "cursor"
        },
        {
            name: "movelinesup",
            bindKey: bindKey("Alt-Up", "Option-Up"),
            exec: function(editor) {
                editor.moveLinesUp();
            },
            scrollIntoView: "cursor"
        },
        {
            name: "copylinesdown",
            bindKey: bindKey("Alt-Shift-Down", "Command-Option-Down"),
            exec: function(editor) {
                editor.copyLinesDown();
            },
            scrollIntoView: "cursor"
        },
        {
            name: "movelinesdown",
            bindKey: bindKey("Alt-Down", "Option-Down"),
            exec: function(editor) {
                editor.moveLinesDown();
            },
            scrollIntoView: "cursor"
        },
        {
            name: "del",
            bindKey: bindKey("Delete", "Delete|Ctrl-D|Shift-Delete"),
            exec: function(editor) {
                editor.remove("right");
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "backspace",
            bindKey: bindKey("Shift-Backspace|Backspace", "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),
            exec: function(editor) {
                editor.remove("left");
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "cut_or_delete",
            bindKey: bindKey("Shift-Delete", null),
            exec: function(editor) {
                if (editor.selection.isEmpty()) editor.remove("left");
                else return false;
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "removetolinestart",
            bindKey: bindKey("Alt-Backspace", "Command-Backspace"),
            exec: function(editor) {
                editor.removeToLineStart();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "removetolineend",
            bindKey: bindKey("Alt-Delete", "Ctrl-K|Command-Delete"),
            exec: function(editor) {
                editor.removeToLineEnd();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "removetolinestarthard",
            bindKey: bindKey("Ctrl-Shift-Backspace", null),
            exec: function(editor) {
                var range = editor.selection.getRange();
                range.start.column = 0;
                editor.session.remove(range);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "removetolineendhard",
            bindKey: bindKey("Ctrl-Shift-Delete", null),
            exec: function(editor) {
                var range = editor.selection.getRange();
                range.end.column = Number.MAX_VALUE;
                editor.session.remove(range);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "removewordleft",
            bindKey: bindKey("Ctrl-Backspace", "Alt-Backspace|Ctrl-Alt-Backspace"),
            exec: function(editor) {
                editor.removeWordLeft();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "removewordright",
            bindKey: bindKey("Ctrl-Delete", "Alt-Delete"),
            exec: function(editor) {
                editor.removeWordRight();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "outdent",
            bindKey: bindKey("Shift-Tab", "Shift-Tab"),
            exec: function(editor) {
                editor.blockOutdent();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "selectionPart"
        },
        {
            name: "indent",
            bindKey: bindKey("Tab", "Tab"),
            exec: function(editor) {
                editor.indent();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "selectionPart"
        },
        {
            name: "blockoutdent",
            bindKey: bindKey("Ctrl-[", "Ctrl-["),
            exec: function(editor) {
                editor.blockOutdent();
            },
            multiSelectAction: "forEachLine",
            scrollIntoView: "selectionPart"
        },
        {
            name: "blockindent",
            bindKey: bindKey("Ctrl-]", "Ctrl-]"),
            exec: function(editor) {
                editor.blockIndent();
            },
            multiSelectAction: "forEachLine",
            scrollIntoView: "selectionPart"
        },
        {
            name: "insertstring",
            exec: function(editor, str) {
                editor.insert(str);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "inserttext",
            exec: function(editor, args) {
                editor.insert(lang.stringRepeat(args.text || "", args.times || 1));
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "splitline",
            bindKey: bindKey(null, "Ctrl-O"),
            exec: function(editor) {
                editor.splitLine();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "transposeletters",
            bindKey: bindKey("Alt-Shift-X", "Ctrl-T"),
            exec: function(editor) {
                editor.transposeLetters();
            },
            multiSelectAction: function(editor) {
                editor.transposeSelections(1);
            },
            scrollIntoView: "cursor"
        },
        {
            name: "touppercase",
            bindKey: bindKey("Ctrl-U", "Ctrl-U"),
            exec: function(editor) {
                editor.toUpperCase();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "tolowercase",
            bindKey: bindKey("Ctrl-Shift-U", "Ctrl-Shift-U"),
            exec: function(editor) {
                editor.toLowerCase();
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor"
        },
        {
            name: "expandtoline",
            bindKey: bindKey("Ctrl-Shift-L", "Command-Shift-L"),
            exec: function(editor) {
                var range = editor.selection.getRange();
                range.start.column = range.end.column = 0;
                range.end.row++;
                editor.selection.setRange(range, false);
            },
            multiSelectAction: "forEach",
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "joinlines",
            bindKey: bindKey(null, null),
            exec: function(editor) {
                var isBackwards = editor.selection.isBackwards();
                var selectionStart = isBackwards ? editor.selection.getSelectionLead() : editor.selection.getSelectionAnchor();
                var selectionEnd = isBackwards ? editor.selection.getSelectionAnchor() : editor.selection.getSelectionLead();
                var firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length;
                var selectedText = editor.session.doc.getTextRange(editor.selection.getRange());
                var selectedCount = selectedText.replace(/\n\s*/, " ").length;
                var insertLine = editor.session.doc.getLine(selectionStart.row);
                for(var i = selectionStart.row + 1; i <= selectionEnd.row + 1; i++){
                    var curLine = lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));
                    if (curLine.length !== 0) curLine = " " + curLine;
                    insertLine += curLine;
                }
                if (selectionEnd.row + 1 < editor.session.doc.getLength() - 1) insertLine += editor.session.doc.getNewLineCharacter();
                editor.clearSelection();
                editor.session.doc.replace(new Range1(selectionStart.row, 0, selectionEnd.row + 2, 0), insertLine);
                if (selectedCount > 0) {
                    editor.selection.moveCursorTo(selectionStart.row, selectionStart.column);
                    editor.selection.selectTo(selectionStart.row, selectionStart.column + selectedCount);
                } else {
                    firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length > firstLineEndCol ? firstLineEndCol + 1 : firstLineEndCol;
                    editor.selection.moveCursorTo(selectionStart.row, firstLineEndCol);
                }
            },
            multiSelectAction: "forEach",
            readOnly: true
        },
        {
            name: "invertSelection",
            bindKey: bindKey(null, null),
            exec: function(editor) {
                var endRow = editor.session.doc.getLength() - 1;
                var endCol = editor.session.doc.getLine(endRow).length;
                var ranges = editor.selection.rangeList.ranges;
                var newRanges = [];
                if (ranges.length < 1) ranges = [
                    editor.selection.getRange()
                ];
                for(var i = 0; i < ranges.length; i++){
                    if (i == ranges.length - 1) {
                        if (!(ranges[i].end.row === endRow && ranges[i].end.column === endCol)) newRanges.push(new Range1(ranges[i].end.row, ranges[i].end.column, endRow, endCol));
                    }
                    if (i === 0) {
                        if (!(ranges[i].start.row === 0 && ranges[i].start.column === 0)) newRanges.push(new Range1(0, 0, ranges[i].start.row, ranges[i].start.column));
                    } else newRanges.push(new Range1(ranges[i - 1].end.row, ranges[i - 1].end.column, ranges[i].start.row, ranges[i].start.column));
                }
                editor.exitMultiSelectMode();
                editor.clearSelection();
                for(var i = 0; i < newRanges.length; i++)editor.selection.addRange(newRanges[i], false);
            },
            readOnly: true,
            scrollIntoView: "none"
        }
    ];
});
ace.define("ace/editor", [
    "require",
    "exports",
    "module",
    "ace/lib/fixoldbrowsers",
    "ace/lib/oop",
    "ace/lib/dom",
    "ace/lib/lang",
    "ace/lib/useragent",
    "ace/keyboard/textinput",
    "ace/mouse/mouse_handler",
    "ace/mouse/fold_handler",
    "ace/keyboard/keybinding",
    "ace/edit_session",
    "ace/search",
    "ace/range",
    "ace/lib/event_emitter",
    "ace/commands/command_manager",
    "ace/commands/default_commands",
    "ace/config",
    "ace/token_iterator"
], function(acequire, exports, module) {
    acequire("./lib/fixoldbrowsers");
    var oop = acequire("./lib/oop");
    var dom = acequire("./lib/dom");
    var lang = acequire("./lib/lang");
    var useragent = acequire("./lib/useragent");
    var TextInput = acequire("./keyboard/textinput").TextInput;
    var MouseHandler = acequire("./mouse/mouse_handler").MouseHandler;
    var FoldHandler = acequire("./mouse/fold_handler").FoldHandler;
    var KeyBinding = acequire("./keyboard/keybinding").KeyBinding;
    var EditSession = acequire("./edit_session").EditSession;
    var Search = acequire("./search").Search;
    var Range1 = acequire("./range").Range;
    var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
    var CommandManager = acequire("./commands/command_manager").CommandManager;
    var defaultCommands = acequire("./commands/default_commands").commands;
    var config = acequire("./config");
    var TokenIterator = acequire("./token_iterator").TokenIterator;
    var Editor = function(renderer, session) {
        var container = renderer.getContainerElement();
        this.container = container;
        this.renderer = renderer;
        this.id = "editor" + ++Editor.$uid;
        this.commands = new CommandManager(useragent.isMac ? "mac" : "win", defaultCommands);
        if (typeof document == "object") {
            this.textInput = new TextInput(renderer.getTextAreaContainer(), this);
            this.renderer.textarea = this.textInput.getElement();
            this.$mouseHandler = new MouseHandler(this);
            new FoldHandler(this);
        }
        this.keyBinding = new KeyBinding(this);
        this.$blockScrolling = 0;
        this.$search = new Search().set({
            wrap: true
        });
        this.$historyTracker = this.$historyTracker.bind(this);
        this.commands.on("exec", this.$historyTracker);
        this.$initOperationListeners();
        this._$emitInputEvent = lang.delayedCall((function() {
            this._signal("input", {
            });
            if (this.session && this.session.bgTokenizer) this.session.bgTokenizer.scheduleStart();
        }).bind(this));
        this.on("change", function(_, _self) {
            _self._$emitInputEvent.schedule(31);
        });
        this.setSession(session || new EditSession(""));
        config.resetOptions(this);
        config._signal("editor", this);
    };
    Editor.$uid = 0;
    (function() {
        oop.implement(this, EventEmitter);
        this.$initOperationListeners = function() {
            function last(a) {
                return a[a.length - 1];
            }
            this.selections = [];
            this.commands.on("exec", this.startOperation.bind(this), true);
            this.commands.on("afterExec", this.endOperation.bind(this), true);
            this.$opResetTimer = lang.delayedCall(this.endOperation.bind(this));
            this.on("change", (function() {
                this.curOp || this.startOperation();
                this.curOp.docChanged = true;
            }).bind(this), true);
            this.on("changeSelection", (function() {
                this.curOp || this.startOperation();
                this.curOp.selectionChanged = true;
            }).bind(this), true);
        };
        this.curOp = null;
        this.prevOp = {
        };
        this.startOperation = function(commadEvent) {
            if (this.curOp) {
                if (!commadEvent || this.curOp.command) return;
                this.prevOp = this.curOp;
            }
            if (!commadEvent) {
                this.previousCommand = null;
                commadEvent = {
                };
            }
            this.$opResetTimer.schedule();
            this.curOp = {
                command: commadEvent.command || {
                },
                args: commadEvent.args,
                scrollTop: this.renderer.scrollTop
            };
            if (this.curOp.command.name && this.curOp.command.scrollIntoView !== undefined) this.$blockScrolling++;
        };
        this.endOperation = function(e) {
            if (this.curOp) {
                if (e && e.returnValue === false) return this.curOp = null;
                this._signal("beforeEndOperation");
                var command = this.curOp.command;
                if (command.name && this.$blockScrolling > 0) this.$blockScrolling--;
                var scrollIntoView = command && command.scrollIntoView;
                if (scrollIntoView) {
                    switch(scrollIntoView){
                        case "center-animate":
                            scrollIntoView = "animate";
                        case "center":
                            this.renderer.scrollCursorIntoView(null, 0.5);
                            break;
                        case "animate":
                        case "cursor":
                            this.renderer.scrollCursorIntoView();
                            break;
                        case "selectionPart":
                            var range = this.selection.getRange();
                            var config1 = this.renderer.layerConfig;
                            if (range.start.row >= config1.lastRow || range.end.row <= config1.firstRow) this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);
                            break;
                        default:
                            break;
                    }
                    if (scrollIntoView == "animate") this.renderer.animateScrolling(this.curOp.scrollTop);
                }
                this.prevOp = this.curOp;
                this.curOp = null;
            }
        };
        this.$mergeableCommands = [
            "backspace",
            "del",
            "insertstring"
        ];
        this.$historyTracker = function(e) {
            if (!this.$mergeUndoDeltas) return;
            var prev = this.prevOp;
            var mergeableCommands = this.$mergeableCommands;
            var shouldMerge = prev.command && e.command.name == prev.command.name;
            if (e.command.name == "insertstring") {
                var text = e.args;
                if (this.mergeNextCommand === undefined) this.mergeNextCommand = true;
                shouldMerge = shouldMerge && this.mergeNextCommand && (!/\s/.test(text) || /\s/.test(prev.args)); // previous insertion was of same type
                this.mergeNextCommand = true;
            } else shouldMerge = shouldMerge && mergeableCommands.indexOf(e.command.name) !== -1; // the command is mergeable
            if (this.$mergeUndoDeltas != "always" && Date.now() - this.sequenceStartTime > 2000) shouldMerge = false; // the sequence is too long
            if (shouldMerge) this.session.mergeUndoDeltas = true;
            else if (mergeableCommands.indexOf(e.command.name) !== -1) this.sequenceStartTime = Date.now();
        };
        this.setKeyboardHandler = function(keyboardHandler, cb) {
            if (keyboardHandler && typeof keyboardHandler === "string") {
                this.$keybindingId = keyboardHandler;
                var _self = this;
                config.loadModule([
                    "keybinding",
                    keyboardHandler
                ], function(module1) {
                    if (_self.$keybindingId == keyboardHandler) _self.keyBinding.setKeyboardHandler(module1 && module1.handler);
                    cb && cb();
                });
            } else {
                this.$keybindingId = null;
                this.keyBinding.setKeyboardHandler(keyboardHandler);
                cb && cb();
            }
        };
        this.getKeyboardHandler = function() {
            return this.keyBinding.getKeyboardHandler();
        };
        this.setSession = function(session) {
            if (this.session == session) return;
            if (this.curOp) this.endOperation();
            this.curOp = {
            };
            var oldSession = this.session;
            if (oldSession) {
                this.session.off("change", this.$onDocumentChange);
                this.session.off("changeMode", this.$onChangeMode);
                this.session.off("tokenizerUpdate", this.$onTokenizerUpdate);
                this.session.off("changeTabSize", this.$onChangeTabSize);
                this.session.off("changeWrapLimit", this.$onChangeWrapLimit);
                this.session.off("changeWrapMode", this.$onChangeWrapMode);
                this.session.off("changeFold", this.$onChangeFold);
                this.session.off("changeFrontMarker", this.$onChangeFrontMarker);
                this.session.off("changeBackMarker", this.$onChangeBackMarker);
                this.session.off("changeBreakpoint", this.$onChangeBreakpoint);
                this.session.off("changeAnnotation", this.$onChangeAnnotation);
                this.session.off("changeOverwrite", this.$onCursorChange);
                this.session.off("changeScrollTop", this.$onScrollTopChange);
                this.session.off("changeScrollLeft", this.$onScrollLeftChange);
                var selection = this.session.getSelection();
                selection.off("changeCursor", this.$onCursorChange);
                selection.off("changeSelection", this.$onSelectionChange);
            }
            this.session = session;
            if (session) {
                this.$onDocumentChange = this.onDocumentChange.bind(this);
                session.on("change", this.$onDocumentChange);
                this.renderer.setSession(session);
                this.$onChangeMode = this.onChangeMode.bind(this);
                session.on("changeMode", this.$onChangeMode);
                this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this);
                session.on("tokenizerUpdate", this.$onTokenizerUpdate);
                this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer);
                session.on("changeTabSize", this.$onChangeTabSize);
                this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this);
                session.on("changeWrapLimit", this.$onChangeWrapLimit);
                this.$onChangeWrapMode = this.onChangeWrapMode.bind(this);
                session.on("changeWrapMode", this.$onChangeWrapMode);
                this.$onChangeFold = this.onChangeFold.bind(this);
                session.on("changeFold", this.$onChangeFold);
                this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this);
                this.session.on("changeFrontMarker", this.$onChangeFrontMarker);
                this.$onChangeBackMarker = this.onChangeBackMarker.bind(this);
                this.session.on("changeBackMarker", this.$onChangeBackMarker);
                this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this);
                this.session.on("changeBreakpoint", this.$onChangeBreakpoint);
                this.$onChangeAnnotation = this.onChangeAnnotation.bind(this);
                this.session.on("changeAnnotation", this.$onChangeAnnotation);
                this.$onCursorChange = this.onCursorChange.bind(this);
                this.session.on("changeOverwrite", this.$onCursorChange);
                this.$onScrollTopChange = this.onScrollTopChange.bind(this);
                this.session.on("changeScrollTop", this.$onScrollTopChange);
                this.$onScrollLeftChange = this.onScrollLeftChange.bind(this);
                this.session.on("changeScrollLeft", this.$onScrollLeftChange);
                this.selection = session.getSelection();
                this.selection.on("changeCursor", this.$onCursorChange);
                this.$onSelectionChange = this.onSelectionChange.bind(this);
                this.selection.on("changeSelection", this.$onSelectionChange);
                this.onChangeMode();
                this.$blockScrolling += 1;
                this.onCursorChange();
                this.$blockScrolling -= 1;
                this.onScrollTopChange();
                this.onScrollLeftChange();
                this.onSelectionChange();
                this.onChangeFrontMarker();
                this.onChangeBackMarker();
                this.onChangeBreakpoint();
                this.onChangeAnnotation();
                this.session.getUseWrapMode() && this.renderer.adjustWrapLimit();
                this.renderer.updateFull();
            } else {
                this.selection = null;
                this.renderer.setSession(session);
            }
            this._signal("changeSession", {
                session: session,
                oldSession: oldSession
            });
            this.curOp = null;
            oldSession && oldSession._signal("changeEditor", {
                oldEditor: this
            });
            session && session._signal("changeEditor", {
                editor: this
            });
            if (session && session.bgTokenizer) session.bgTokenizer.scheduleStart();
        };
        this.getSession = function() {
            return this.session;
        };
        this.setValue = function(val, cursorPos) {
            this.session.doc.setValue(val);
            if (!cursorPos) this.selectAll();
            else if (cursorPos == 1) this.navigateFileEnd();
            else if (cursorPos == -1) this.navigateFileStart();
            return val;
        };
        this.getValue = function() {
            return this.session.getValue();
        };
        this.getSelection = function() {
            return this.selection;
        };
        this.resize = function(force) {
            this.renderer.onResize(force);
        };
        this.setTheme = function(theme, cb) {
            this.renderer.setTheme(theme, cb);
        };
        this.getTheme = function() {
            return this.renderer.getTheme();
        };
        this.setStyle = function(style) {
            this.renderer.setStyle(style);
        };
        this.unsetStyle = function(style) {
            this.renderer.unsetStyle(style);
        };
        this.getFontSize = function() {
            return this.getOption("fontSize") || dom.computedStyle(this.container, "fontSize");
        };
        this.setFontSize = function(size) {
            this.setOption("fontSize", size);
        };
        this.$highlightBrackets = function() {
            if (this.session.$bracketHighlight) {
                this.session.removeMarker(this.session.$bracketHighlight);
                this.session.$bracketHighlight = null;
            }
            if (this.$highlightPending) return;
            var self = this;
            this.$highlightPending = true;
            setTimeout(function() {
                self.$highlightPending = false;
                var session = self.session;
                if (!session || !session.bgTokenizer) return;
                var pos = session.findMatchingBracket(self.getCursorPosition());
                if (pos) var range = new Range1(pos.row, pos.column, pos.row, pos.column + 1);
                else if (session.$mode.getMatching) var range = session.$mode.getMatching(self.session);
                if (range) session.$bracketHighlight = session.addMarker(range, "ace_bracket", "text");
            }, 50);
        };
        this.$highlightTags = function() {
            if (this.$highlightTagPending) return;
            var self = this;
            this.$highlightTagPending = true;
            setTimeout(function() {
                self.$highlightTagPending = false;
                var session = self.session;
                if (!session || !session.bgTokenizer) return;
                var pos = self.getCursorPosition();
                var iterator = new TokenIterator(self.session, pos.row, pos.column);
                var token = iterator.getCurrentToken();
                if (!token || !/\b(?:tag-open|tag-name)/.test(token.type)) {
                    session.removeMarker(session.$tagHighlight);
                    session.$tagHighlight = null;
                    return;
                }
                if (token.type.indexOf("tag-open") != -1) {
                    token = iterator.stepForward();
                    if (!token) return;
                }
                var tag = token.value;
                var depth = 0;
                var prevToken = iterator.stepBackward();
                if (prevToken.value == '<') do {
                    prevToken = token;
                    token = iterator.stepForward();
                    if (token && token.value === tag && token.type.indexOf('tag-name') !== -1) {
                        if (prevToken.value === '<') depth++;
                        else if (prevToken.value === '</') depth--;
                    }
                }while (token && depth >= 0)
                else {
                    do {
                        token = prevToken;
                        prevToken = iterator.stepBackward();
                        if (token && token.value === tag && token.type.indexOf('tag-name') !== -1) {
                            if (prevToken.value === '<') depth++;
                            else if (prevToken.value === '</') depth--;
                        }
                    }while (prevToken && depth <= 0)
                    iterator.stepForward();
                }
                if (!token) {
                    session.removeMarker(session.$tagHighlight);
                    session.$tagHighlight = null;
                    return;
                }
                var row = iterator.getCurrentTokenRow();
                var column = iterator.getCurrentTokenColumn();
                var range = new Range1(row, column, row, column + token.value.length);
                var sbm = session.$backMarkers[session.$tagHighlight];
                if (session.$tagHighlight && sbm != undefined && range.compareRange(sbm.range) !== 0) {
                    session.removeMarker(session.$tagHighlight);
                    session.$tagHighlight = null;
                }
                if (range && !session.$tagHighlight) session.$tagHighlight = session.addMarker(range, "ace_bracket", "text");
            }, 50);
        };
        this.focus = function() {
            var _self = this;
            setTimeout(function() {
                _self.textInput.focus();
            });
            this.textInput.focus();
        };
        this.isFocused = function() {
            return this.textInput.isFocused();
        };
        this.blur = function() {
            this.textInput.blur();
        };
        this.onFocus = function(e) {
            if (this.$isFocused) return;
            this.$isFocused = true;
            this.renderer.showCursor();
            this.renderer.visualizeFocus();
            this._emit("focus", e);
        };
        this.onBlur = function(e) {
            if (!this.$isFocused) return;
            this.$isFocused = false;
            this.renderer.hideCursor();
            this.renderer.visualizeBlur();
            this._emit("blur", e);
        };
        this.$cursorChange = function() {
            this.renderer.updateCursor();
        };
        this.onDocumentChange = function(delta) {
            var wrap = this.session.$useWrapMode;
            var lastRow = delta.start.row == delta.end.row ? delta.end.row : Infinity;
            this.renderer.updateLines(delta.start.row, lastRow, wrap);
            this._signal("change", delta);
            this.$cursorChange();
            this.$updateHighlightActiveLine();
        };
        this.onTokenizerUpdate = function(e) {
            var rows = e.data;
            this.renderer.updateLines(rows.first, rows.last);
        };
        this.onScrollTopChange = function() {
            this.renderer.scrollToY(this.session.getScrollTop());
        };
        this.onScrollLeftChange = function() {
            this.renderer.scrollToX(this.session.getScrollLeft());
        };
        this.onCursorChange = function() {
            this.$cursorChange();
            if (!this.$blockScrolling) {
                config.warn("Automatically scrolling cursor into view after selection change", "this will be disabled in the next version", "set editor.$blockScrolling = Infinity to disable this message");
                this.renderer.scrollCursorIntoView();
            }
            this.$highlightBrackets();
            this.$highlightTags();
            this.$updateHighlightActiveLine();
            this._signal("changeSelection");
        };
        this.$updateHighlightActiveLine = function() {
            var session = this.getSession();
            var highlight;
            if (this.$highlightActiveLine) {
                if (this.$selectionStyle != "line" || !this.selection.isMultiLine()) highlight = this.getCursorPosition();
                if (this.renderer.$maxLines && this.session.getLength() === 1 && !(this.renderer.$minLines > 1)) highlight = false;
            }
            if (session.$highlightLineMarker && !highlight) {
                session.removeMarker(session.$highlightLineMarker.id);
                session.$highlightLineMarker = null;
            } else if (!session.$highlightLineMarker && highlight) {
                var range = new Range1(highlight.row, highlight.column, highlight.row, Infinity);
                range.id = session.addMarker(range, "ace_active-line", "screenLine");
                session.$highlightLineMarker = range;
            } else if (highlight) {
                session.$highlightLineMarker.start.row = highlight.row;
                session.$highlightLineMarker.end.row = highlight.row;
                session.$highlightLineMarker.start.column = highlight.column;
                session._signal("changeBackMarker");
            }
        };
        this.onSelectionChange = function(e) {
            var session = this.session;
            if (session.$selectionMarker) session.removeMarker(session.$selectionMarker);
            session.$selectionMarker = null;
            if (!this.selection.isEmpty()) {
                var range = this.selection.getRange();
                var style = this.getSelectionStyle();
                session.$selectionMarker = session.addMarker(range, "ace_selection", style);
            } else this.$updateHighlightActiveLine();
            var re = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();
            this.session.highlight(re);
            this._signal("changeSelection");
        };
        this.$getSelectionHighLightRegexp = function() {
            var session = this.session;
            var selection = this.getSelectionRange();
            if (selection.isEmpty() || selection.isMultiLine()) return;
            var startOuter = selection.start.column - 1;
            var endOuter = selection.end.column + 1;
            var line = session.getLine(selection.start.row);
            var lineCols = line.length;
            var needle = line.substring(Math.max(startOuter, 0), Math.min(endOuter, lineCols));
            if (startOuter >= 0 && /^[\w\d]/.test(needle) || endOuter <= lineCols && /[\w\d]$/.test(needle)) return;
            needle = line.substring(selection.start.column, selection.end.column);
            if (!/^[\w\d]+$/.test(needle)) return;
            var re = this.$search.$assembleRegExp({
                wholeWord: true,
                caseSensitive: true,
                needle: needle
            });
            return re;
        };
        this.onChangeFrontMarker = function() {
            this.renderer.updateFrontMarkers();
        };
        this.onChangeBackMarker = function() {
            this.renderer.updateBackMarkers();
        };
        this.onChangeBreakpoint = function() {
            this.renderer.updateBreakpoints();
        };
        this.onChangeAnnotation = function() {
            this.renderer.setAnnotations(this.session.getAnnotations());
        };
        this.onChangeMode = function(e) {
            this.renderer.updateText();
            this._emit("changeMode", e);
        };
        this.onChangeWrapLimit = function() {
            this.renderer.updateFull();
        };
        this.onChangeWrapMode = function() {
            this.renderer.onResize(true);
        };
        this.onChangeFold = function() {
            this.$updateHighlightActiveLine();
            this.renderer.updateFull();
        };
        this.getSelectedText = function() {
            return this.session.getTextRange(this.getSelectionRange());
        };
        this.getCopyText = function() {
            var text = this.getSelectedText();
            this._signal("copy", text);
            return text;
        };
        this.onCopy = function() {
            this.commands.exec("copy", this);
        };
        this.onCut = function() {
            this.commands.exec("cut", this);
        };
        this.onPaste = function(text, event) {
            var e = {
                text: text,
                event: event
            };
            this.commands.exec("paste", this, e);
        };
        this.$handlePaste = function(e) {
            if (typeof e == "string") e = {
                text: e
            };
            this._signal("paste", e);
            var text = e.text;
            if (!this.inMultiSelectMode || this.inVirtualSelectionMode) this.insert(text);
            else {
                var lines = text.split(/\r\n|\r|\n/);
                var ranges = this.selection.rangeList.ranges;
                if (lines.length > ranges.length || lines.length < 2 || !lines[1]) return this.commands.exec("insertstring", this, text);
                for(var i = ranges.length; i--;){
                    var range = ranges[i];
                    if (!range.isEmpty()) this.session.remove(range);
                    this.session.insert(range.start, lines[i]);
                }
            }
        };
        this.execCommand = function(command, args) {
            return this.commands.exec(command, this, args);
        };
        this.insert = function(text, pasted) {
            var session = this.session;
            var mode = session.getMode();
            var cursor = this.getCursorPosition();
            if (this.getBehavioursEnabled() && !pasted) {
                var transform = mode.transformAction(session.getState(cursor.row), 'insertion', this, session, text);
                if (transform) {
                    if (text !== transform.text) {
                        this.session.mergeUndoDeltas = false;
                        this.$mergeNextCommand = false;
                    }
                    text = transform.text;
                }
            }
            if (text == "\t") text = this.session.getTabString();
            if (!this.selection.isEmpty()) {
                var range = this.getSelectionRange();
                cursor = this.session.remove(range);
                this.clearSelection();
            } else if (this.session.getOverwrite() && text.indexOf("\n") == -1) {
                var range = new Range1.fromPoints(cursor, cursor);
                range.end.column += text.length;
                this.session.remove(range);
            }
            if (text == "\n" || text == "\r\n") {
                var line = session.getLine(cursor.row);
                if (cursor.column > line.search(/\S|$/)) {
                    var d = line.substr(cursor.column).search(/\S|$/);
                    session.doc.removeInLine(cursor.row, cursor.column, cursor.column + d);
                }
            }
            this.clearSelection();
            var start = cursor.column;
            var lineState = session.getState(cursor.row);
            var line = session.getLine(cursor.row);
            var shouldOutdent = mode.checkOutdent(lineState, line, text);
            var end = session.insert(cursor, text);
            if (transform && transform.selection) {
                if (transform.selection.length == 2) this.selection.setSelectionRange(new Range1(cursor.row, start + transform.selection[0], cursor.row, start + transform.selection[1]));
                else this.selection.setSelectionRange(new Range1(cursor.row + transform.selection[0], transform.selection[1], cursor.row + transform.selection[2], transform.selection[3]));
            }
            if (session.getDocument().isNewLine(text)) {
                var lineIndent = mode.getNextLineIndent(lineState, line.slice(0, cursor.column), session.getTabString());
                session.insert({
                    row: cursor.row + 1,
                    column: 0
                }, lineIndent);
            }
            if (shouldOutdent) mode.autoOutdent(lineState, session, cursor.row);
        };
        this.onTextInput = function(text) {
            this.keyBinding.onTextInput(text);
        };
        this.onCommandKey = function(e, hashId, keyCode) {
            this.keyBinding.onCommandKey(e, hashId, keyCode);
        };
        this.setOverwrite = function(overwrite) {
            this.session.setOverwrite(overwrite);
        };
        this.getOverwrite = function() {
            return this.session.getOverwrite();
        };
        this.toggleOverwrite = function() {
            this.session.toggleOverwrite();
        };
        this.setScrollSpeed = function(speed) {
            this.setOption("scrollSpeed", speed);
        };
        this.getScrollSpeed = function() {
            return this.getOption("scrollSpeed");
        };
        this.setDragDelay = function(dragDelay) {
            this.setOption("dragDelay", dragDelay);
        };
        this.getDragDelay = function() {
            return this.getOption("dragDelay");
        };
        this.setSelectionStyle = function(val) {
            this.setOption("selectionStyle", val);
        };
        this.getSelectionStyle = function() {
            return this.getOption("selectionStyle");
        };
        this.setHighlightActiveLine = function(shouldHighlight) {
            this.setOption("highlightActiveLine", shouldHighlight);
        };
        this.getHighlightActiveLine = function() {
            return this.getOption("highlightActiveLine");
        };
        this.setHighlightGutterLine = function(shouldHighlight) {
            this.setOption("highlightGutterLine", shouldHighlight);
        };
        this.getHighlightGutterLine = function() {
            return this.getOption("highlightGutterLine");
        };
        this.setHighlightSelectedWord = function(shouldHighlight) {
            this.setOption("highlightSelectedWord", shouldHighlight);
        };
        this.getHighlightSelectedWord = function() {
            return this.$highlightSelectedWord;
        };
        this.setAnimatedScroll = function(shouldAnimate) {
            this.renderer.setAnimatedScroll(shouldAnimate);
        };
        this.getAnimatedScroll = function() {
            return this.renderer.getAnimatedScroll();
        };
        this.setShowInvisibles = function(showInvisibles) {
            this.renderer.setShowInvisibles(showInvisibles);
        };
        this.getShowInvisibles = function() {
            return this.renderer.getShowInvisibles();
        };
        this.setDisplayIndentGuides = function(display) {
            this.renderer.setDisplayIndentGuides(display);
        };
        this.getDisplayIndentGuides = function() {
            return this.renderer.getDisplayIndentGuides();
        };
        this.setShowPrintMargin = function(showPrintMargin) {
            this.renderer.setShowPrintMargin(showPrintMargin);
        };
        this.getShowPrintMargin = function() {
            return this.renderer.getShowPrintMargin();
        };
        this.setPrintMarginColumn = function(showPrintMargin) {
            this.renderer.setPrintMarginColumn(showPrintMargin);
        };
        this.getPrintMarginColumn = function() {
            return this.renderer.getPrintMarginColumn();
        };
        this.setReadOnly = function(readOnly) {
            this.setOption("readOnly", readOnly);
        };
        this.getReadOnly = function() {
            return this.getOption("readOnly");
        };
        this.setBehavioursEnabled = function(enabled) {
            this.setOption("behavioursEnabled", enabled);
        };
        this.getBehavioursEnabled = function() {
            return this.getOption("behavioursEnabled");
        };
        this.setWrapBehavioursEnabled = function(enabled) {
            this.setOption("wrapBehavioursEnabled", enabled);
        };
        this.getWrapBehavioursEnabled = function() {
            return this.getOption("wrapBehavioursEnabled");
        };
        this.setShowFoldWidgets = function(show) {
            this.setOption("showFoldWidgets", show);
        };
        this.getShowFoldWidgets = function() {
            return this.getOption("showFoldWidgets");
        };
        this.setFadeFoldWidgets = function(fade) {
            this.setOption("fadeFoldWidgets", fade);
        };
        this.getFadeFoldWidgets = function() {
            return this.getOption("fadeFoldWidgets");
        };
        this.remove = function(dir) {
            if (this.selection.isEmpty()) {
                if (dir == "left") this.selection.selectLeft();
                else this.selection.selectRight();
            }
            var range = this.getSelectionRange();
            if (this.getBehavioursEnabled()) {
                var session = this.session;
                var state = session.getState(range.start.row);
                var new_range = session.getMode().transformAction(state, 'deletion', this, session, range);
                if (range.end.column === 0) {
                    var text = session.getTextRange(range);
                    if (text[text.length - 1] == "\n") {
                        var line = session.getLine(range.end.row);
                        if (/^\s+$/.test(line)) range.end.column = line.length;
                    }
                }
                if (new_range) range = new_range;
            }
            this.session.remove(range);
            this.clearSelection();
        };
        this.removeWordRight = function() {
            if (this.selection.isEmpty()) this.selection.selectWordRight();
            this.session.remove(this.getSelectionRange());
            this.clearSelection();
        };
        this.removeWordLeft = function() {
            if (this.selection.isEmpty()) this.selection.selectWordLeft();
            this.session.remove(this.getSelectionRange());
            this.clearSelection();
        };
        this.removeToLineStart = function() {
            if (this.selection.isEmpty()) this.selection.selectLineStart();
            this.session.remove(this.getSelectionRange());
            this.clearSelection();
        };
        this.removeToLineEnd = function() {
            if (this.selection.isEmpty()) this.selection.selectLineEnd();
            var range = this.getSelectionRange();
            if (range.start.column == range.end.column && range.start.row == range.end.row) {
                range.end.column = 0;
                range.end.row++;
            }
            this.session.remove(range);
            this.clearSelection();
        };
        this.splitLine = function() {
            if (!this.selection.isEmpty()) {
                this.session.remove(this.getSelectionRange());
                this.clearSelection();
            }
            var cursor = this.getCursorPosition();
            this.insert("\n");
            this.moveCursorToPosition(cursor);
        };
        this.transposeLetters = function() {
            if (!this.selection.isEmpty()) return;
            var cursor = this.getCursorPosition();
            var column = cursor.column;
            if (column === 0) return;
            var line = this.session.getLine(cursor.row);
            var swap, range;
            if (column < line.length) {
                swap = line.charAt(column) + line.charAt(column - 1);
                range = new Range1(cursor.row, column - 1, cursor.row, column + 1);
            } else {
                swap = line.charAt(column - 1) + line.charAt(column - 2);
                range = new Range1(cursor.row, column - 2, cursor.row, column);
            }
            this.session.replace(range, swap);
            this.session.selection.moveToPosition(range.end);
        };
        this.toLowerCase = function() {
            var originalRange = this.getSelectionRange();
            if (this.selection.isEmpty()) this.selection.selectWord();
            var range = this.getSelectionRange();
            var text = this.session.getTextRange(range);
            this.session.replace(range, text.toLowerCase());
            this.selection.setSelectionRange(originalRange);
        };
        this.toUpperCase = function() {
            var originalRange = this.getSelectionRange();
            if (this.selection.isEmpty()) this.selection.selectWord();
            var range = this.getSelectionRange();
            var text = this.session.getTextRange(range);
            this.session.replace(range, text.toUpperCase());
            this.selection.setSelectionRange(originalRange);
        };
        this.indent = function() {
            var session = this.session;
            var range = this.getSelectionRange();
            if (range.start.row < range.end.row) {
                var rows = this.$getSelectedRows();
                session.indentRows(rows.first, rows.last, "\t");
                return;
            } else if (range.start.column < range.end.column) {
                var text = session.getTextRange(range);
                if (!/^\s+$/.test(text)) {
                    var rows = this.$getSelectedRows();
                    session.indentRows(rows.first, rows.last, "\t");
                    return;
                }
            }
            var line = session.getLine(range.start.row);
            var position = range.start;
            var size = session.getTabSize();
            var column = session.documentToScreenColumn(position.row, position.column);
            if (this.session.getUseSoftTabs()) {
                var count = size - column % size;
                var indentString = lang.stringRepeat(" ", count);
            } else {
                var count = column % size;
                while(line[range.start.column - 1] == " " && count){
                    range.start.column--;
                    count--;
                }
                this.selection.setSelectionRange(range);
                indentString = "\t";
            }
            return this.insert(indentString);
        };
        this.blockIndent = function() {
            var rows = this.$getSelectedRows();
            this.session.indentRows(rows.first, rows.last, "\t");
        };
        this.blockOutdent = function() {
            var selection = this.session.getSelection();
            this.session.outdentRows(selection.getRange());
        };
        this.sortLines = function() {
            var rows = this.$getSelectedRows();
            var session = this.session;
            var lines = [];
            for(var i = rows.first; i <= rows.last; i++)lines.push(session.getLine(i));
            lines.sort(function(a, b) {
                if (a.toLowerCase() < b.toLowerCase()) return -1;
                if (a.toLowerCase() > b.toLowerCase()) return 1;
                return 0;
            });
            var deleteRange = new Range1(0, 0, 0, 0);
            for(var i = rows.first; i <= rows.last; i++){
                var line = session.getLine(i);
                deleteRange.start.row = i;
                deleteRange.end.row = i;
                deleteRange.end.column = line.length;
                session.replace(deleteRange, lines[i - rows.first]);
            }
        };
        this.toggleCommentLines = function() {
            var state = this.session.getState(this.getCursorPosition().row);
            var rows = this.$getSelectedRows();
            this.session.getMode().toggleCommentLines(state, this.session, rows.first, rows.last);
        };
        this.toggleBlockComment = function() {
            var cursor = this.getCursorPosition();
            var state = this.session.getState(cursor.row);
            var range = this.getSelectionRange();
            this.session.getMode().toggleBlockComment(state, this.session, range, cursor);
        };
        this.getNumberAt = function(row, column) {
            var _numberRx = /[\-]?[0-9]+(?:\.[0-9]+)?/g;
            _numberRx.lastIndex = 0;
            var s = this.session.getLine(row);
            while(_numberRx.lastIndex < column){
                var m = _numberRx.exec(s);
                if (m.index <= column && m.index + m[0].length >= column) {
                    var number = {
                        value: m[0],
                        start: m.index,
                        end: m.index + m[0].length
                    };
                    return number;
                }
            }
            return null;
        };
        this.modifyNumber = function(amount) {
            var row = this.selection.getCursor().row;
            var column = this.selection.getCursor().column;
            var charRange = new Range1(row, column - 1, row, column);
            var c = this.session.getTextRange(charRange);
            if (!isNaN(parseFloat(c)) && isFinite(c)) {
                var nr = this.getNumberAt(row, column);
                if (nr) {
                    var fp = nr.value.indexOf(".") >= 0 ? nr.start + nr.value.indexOf(".") + 1 : nr.end;
                    var decimals = nr.start + nr.value.length - fp;
                    var t = parseFloat(nr.value);
                    t *= Math.pow(10, decimals);
                    if (fp !== nr.end && column < fp) amount *= Math.pow(10, nr.end - column - 1);
                    else amount *= Math.pow(10, nr.end - column);
                    t += amount;
                    t /= Math.pow(10, decimals);
                    var nnr = t.toFixed(decimals);
                    var replaceRange = new Range1(row, nr.start, row, nr.end);
                    this.session.replace(replaceRange, nnr);
                    this.moveCursorTo(row, Math.max(nr.start + 1, column + nnr.length - nr.value.length));
                }
            }
        };
        this.removeLines = function() {
            var rows = this.$getSelectedRows();
            this.session.removeFullLines(rows.first, rows.last);
            this.clearSelection();
        };
        this.duplicateSelection = function() {
            var sel = this.selection;
            var doc = this.session;
            var range = sel.getRange();
            var reverse = sel.isBackwards();
            if (range.isEmpty()) {
                var row = range.start.row;
                doc.duplicateLines(row, row);
            } else {
                var point = reverse ? range.start : range.end;
                var endPoint = doc.insert(point, doc.getTextRange(range), false);
                range.start = point;
                range.end = endPoint;
                sel.setSelectionRange(range, reverse);
            }
        };
        this.moveLinesDown = function() {
            this.$moveLines(1, false);
        };
        this.moveLinesUp = function() {
            this.$moveLines(-1, false);
        };
        this.moveText = function(range, toPosition, copy) {
            return this.session.moveText(range, toPosition, copy);
        };
        this.copyLinesUp = function() {
            this.$moveLines(-1, true);
        };
        this.copyLinesDown = function() {
            this.$moveLines(1, true);
        };
        this.$moveLines = function(dir, copy) {
            var rows, moved;
            var selection = this.selection;
            if (!selection.inMultiSelectMode || this.inVirtualSelectionMode) {
                var range = selection.toOrientedRange();
                rows = this.$getSelectedRows(range);
                moved = this.session.$moveLines(rows.first, rows.last, copy ? 0 : dir);
                if (copy && dir == -1) moved = 0;
                range.moveBy(moved, 0);
                selection.fromOrientedRange(range);
            } else {
                var ranges = selection.rangeList.ranges;
                selection.rangeList.detach(this.session);
                this.inVirtualSelectionMode = true;
                var diff = 0;
                var totalDiff = 0;
                var l = ranges.length;
                for(var i = 0; i < l; i++){
                    var rangeIndex = i;
                    ranges[i].moveBy(diff, 0);
                    rows = this.$getSelectedRows(ranges[i]);
                    var first = rows.first;
                    var last = rows.last;
                    while((++i) < l){
                        if (totalDiff) ranges[i].moveBy(totalDiff, 0);
                        var subRows = this.$getSelectedRows(ranges[i]);
                        if (copy && subRows.first != last) break;
                        else if (!copy && subRows.first > last + 1) break;
                        last = subRows.last;
                    }
                    i--;
                    diff = this.session.$moveLines(first, last, copy ? 0 : dir);
                    if (copy && dir == -1) rangeIndex = i + 1;
                    while(rangeIndex <= i){
                        ranges[rangeIndex].moveBy(diff, 0);
                        rangeIndex++;
                    }
                    if (!copy) diff = 0;
                    totalDiff += diff;
                }
                selection.fromOrientedRange(selection.ranges[0]);
                selection.rangeList.attach(this.session);
                this.inVirtualSelectionMode = false;
            }
        };
        this.$getSelectedRows = function(range) {
            range = (range || this.getSelectionRange()).collapseRows();
            return {
                first: this.session.getRowFoldStart(range.start.row),
                last: this.session.getRowFoldEnd(range.end.row)
            };
        };
        this.onCompositionStart = function(text) {
            this.renderer.showComposition(this.getCursorPosition());
        };
        this.onCompositionUpdate = function(text) {
            this.renderer.setCompositionText(text);
        };
        this.onCompositionEnd = function() {
            this.renderer.hideComposition();
        };
        this.getFirstVisibleRow = function() {
            return this.renderer.getFirstVisibleRow();
        };
        this.getLastVisibleRow = function() {
            return this.renderer.getLastVisibleRow();
        };
        this.isRowVisible = function(row) {
            return row >= this.getFirstVisibleRow() && row <= this.getLastVisibleRow();
        };
        this.isRowFullyVisible = function(row) {
            return row >= this.renderer.getFirstFullyVisibleRow() && row <= this.renderer.getLastFullyVisibleRow();
        };
        this.$getVisibleRowCount = function() {
            return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;
        };
        this.$moveByPage = function(dir, select) {
            var renderer = this.renderer;
            var config2 = this.renderer.layerConfig;
            var rows = dir * Math.floor(config2.height / config2.lineHeight);
            this.$blockScrolling++;
            if (select === true) this.selection.$moveSelection(function() {
                this.moveCursorBy(rows, 0);
            });
            else if (select === false) {
                this.selection.moveCursorBy(rows, 0);
                this.selection.clearSelection();
            }
            this.$blockScrolling--;
            var scrollTop = renderer.scrollTop;
            renderer.scrollBy(0, rows * config2.lineHeight);
            if (select != null) renderer.scrollCursorIntoView(null, 0.5);
            renderer.animateScrolling(scrollTop);
        };
        this.selectPageDown = function() {
            this.$moveByPage(1, true);
        };
        this.selectPageUp = function() {
            this.$moveByPage(-1, true);
        };
        this.gotoPageDown = function() {
            this.$moveByPage(1, false);
        };
        this.gotoPageUp = function() {
            this.$moveByPage(-1, false);
        };
        this.scrollPageDown = function() {
            this.$moveByPage(1);
        };
        this.scrollPageUp = function() {
            this.$moveByPage(-1);
        };
        this.scrollToRow = function(row) {
            this.renderer.scrollToRow(row);
        };
        this.scrollToLine = function(line, center, animate, callback) {
            this.renderer.scrollToLine(line, center, animate, callback);
        };
        this.centerSelection = function() {
            var range = this.getSelectionRange();
            var pos = {
                row: Math.floor(range.start.row + (range.end.row - range.start.row) / 2),
                column: Math.floor(range.start.column + (range.end.column - range.start.column) / 2)
            };
            this.renderer.alignCursor(pos, 0.5);
        };
        this.getCursorPosition = function() {
            return this.selection.getCursor();
        };
        this.getCursorPositionScreen = function() {
            return this.session.documentToScreenPosition(this.getCursorPosition());
        };
        this.getSelectionRange = function() {
            return this.selection.getRange();
        };
        this.selectAll = function() {
            this.$blockScrolling += 1;
            this.selection.selectAll();
            this.$blockScrolling -= 1;
        };
        this.clearSelection = function() {
            this.selection.clearSelection();
        };
        this.moveCursorTo = function(row, column) {
            this.selection.moveCursorTo(row, column);
        };
        this.moveCursorToPosition = function(pos) {
            this.selection.moveCursorToPosition(pos);
        };
        this.jumpToMatching = function(select, expand) {
            var cursor = this.getCursorPosition();
            var iterator = new TokenIterator(this.session, cursor.row, cursor.column);
            var prevToken = iterator.getCurrentToken();
            var token = prevToken || iterator.stepForward();
            if (!token) return;
            var matchType;
            var found = false;
            var depth = {
            };
            var i = cursor.column - token.start;
            var bracketType;
            var brackets = {
                ")": "(",
                "(": "(",
                "]": "[",
                "[": "[",
                "{": "{",
                "}": "{"
            };
            do {
                if (token.value.match(/[{}()\[\]]/g)) for(; i < token.value.length && !found; i++){
                    if (!brackets[token.value[i]]) continue;
                    bracketType = brackets[token.value[i]] + '.' + token.type.replace("rparen", "lparen");
                    if (isNaN(depth[bracketType])) depth[bracketType] = 0;
                    switch(token.value[i]){
                        case '(':
                        case '[':
                        case '{':
                            depth[bracketType]++;
                            break;
                        case ')':
                        case ']':
                        case '}':
                            depth[bracketType]--;
                            if (depth[bracketType] === -1) {
                                matchType = 'bracket';
                                found = true;
                            }
                            break;
                    }
                }
                else if (token && token.type.indexOf('tag-name') !== -1) {
                    if (isNaN(depth[token.value])) depth[token.value] = 0;
                    if (prevToken.value === '<') depth[token.value]++;
                    else if (prevToken.value === '</') depth[token.value]--;
                    if (depth[token.value] === -1) {
                        matchType = 'tag';
                        found = true;
                    }
                }
                if (!found) {
                    prevToken = token;
                    token = iterator.stepForward();
                    i = 0;
                }
            }while (token && !found)
            if (!matchType) return;
            var range, pos;
            if (matchType === 'bracket') {
                range = this.session.getBracketRange(cursor);
                if (!range) {
                    range = new Range1(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + i - 1, iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + i - 1);
                    pos = range.start;
                    if (expand || pos.row === cursor.row && Math.abs(pos.column - cursor.column) < 2) range = this.session.getBracketRange(pos);
                }
            } else if (matchType === 'tag') {
                if (token && token.type.indexOf('tag-name') !== -1) var tag = token.value;
                else return;
                range = new Range1(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() - 2, iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() - 2);
                if (range.compare(cursor.row, cursor.column) === 0) {
                    found = false;
                    do {
                        token = prevToken;
                        prevToken = iterator.stepBackward();
                        if (prevToken) {
                            if (prevToken.type.indexOf('tag-close') !== -1) range.setEnd(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1);
                            if (token.value === tag && token.type.indexOf('tag-name') !== -1) {
                                if (prevToken.value === '<') depth[tag]++;
                                else if (prevToken.value === '</') depth[tag]--;
                                if (depth[tag] === 0) found = true;
                            }
                        }
                    }while (prevToken && !found)
                }
                if (token && token.type.indexOf('tag-name')) {
                    pos = range.start;
                    if (pos.row == cursor.row && Math.abs(pos.column - cursor.column) < 2) pos = range.end;
                }
            }
            pos = range && range.cursor || pos;
            if (pos) {
                if (select) {
                    if (range && expand) this.selection.setRange(range);
                    else if (range && range.isEqual(this.getSelectionRange())) this.clearSelection();
                    else this.selection.selectTo(pos.row, pos.column);
                } else this.selection.moveTo(pos.row, pos.column);
            }
        };
        this.gotoLine = function(lineNumber, column, animate) {
            this.selection.clearSelection();
            this.session.unfold({
                row: lineNumber - 1,
                column: column || 0
            });
            this.$blockScrolling += 1;
            this.exitMultiSelectMode && this.exitMultiSelectMode();
            this.moveCursorTo(lineNumber - 1, column || 0);
            this.$blockScrolling -= 1;
            if (!this.isRowFullyVisible(lineNumber - 1)) this.scrollToLine(lineNumber - 1, true, animate);
        };
        this.navigateTo = function(row, column) {
            this.selection.moveTo(row, column);
        };
        this.navigateUp = function(times) {
            if (this.selection.isMultiLine() && !this.selection.isBackwards()) {
                var selectionStart = this.selection.anchor.getPosition();
                return this.moveCursorToPosition(selectionStart);
            }
            this.selection.clearSelection();
            this.selection.moveCursorBy(-times || -1, 0);
        };
        this.navigateDown = function(times) {
            if (this.selection.isMultiLine() && this.selection.isBackwards()) {
                var selectionEnd = this.selection.anchor.getPosition();
                return this.moveCursorToPosition(selectionEnd);
            }
            this.selection.clearSelection();
            this.selection.moveCursorBy(times || 1, 0);
        };
        this.navigateLeft = function(times) {
            if (!this.selection.isEmpty()) {
                var selectionStart = this.getSelectionRange().start;
                this.moveCursorToPosition(selectionStart);
            } else {
                times = times || 1;
                while(times--)this.selection.moveCursorLeft();
            }
            this.clearSelection();
        };
        this.navigateRight = function(times) {
            if (!this.selection.isEmpty()) {
                var selectionEnd = this.getSelectionRange().end;
                this.moveCursorToPosition(selectionEnd);
            } else {
                times = times || 1;
                while(times--)this.selection.moveCursorRight();
            }
            this.clearSelection();
        };
        this.navigateLineStart = function() {
            this.selection.moveCursorLineStart();
            this.clearSelection();
        };
        this.navigateLineEnd = function() {
            this.selection.moveCursorLineEnd();
            this.clearSelection();
        };
        this.navigateFileEnd = function() {
            this.selection.moveCursorFileEnd();
            this.clearSelection();
        };
        this.navigateFileStart = function() {
            this.selection.moveCursorFileStart();
            this.clearSelection();
        };
        this.navigateWordRight = function() {
            this.selection.moveCursorWordRight();
            this.clearSelection();
        };
        this.navigateWordLeft = function() {
            this.selection.moveCursorWordLeft();
            this.clearSelection();
        };
        this.replace = function(replacement, options) {
            if (options) this.$search.set(options);
            var range = this.$search.find(this.session);
            var replaced = 0;
            if (!range) return replaced;
            if (this.$tryReplace(range, replacement)) replaced = 1;
            if (range !== null) {
                this.selection.setSelectionRange(range);
                this.renderer.scrollSelectionIntoView(range.start, range.end);
            }
            return replaced;
        };
        this.replaceAll = function(replacement, options) {
            if (options) this.$search.set(options);
            var ranges = this.$search.findAll(this.session);
            var replaced = 0;
            if (!ranges.length) return replaced;
            this.$blockScrolling += 1;
            var selection = this.getSelectionRange();
            this.selection.moveTo(0, 0);
            for(var i = ranges.length - 1; i >= 0; --i)if (this.$tryReplace(ranges[i], replacement)) replaced++;
            this.selection.setSelectionRange(selection);
            this.$blockScrolling -= 1;
            return replaced;
        };
        this.$tryReplace = function(range, replacement) {
            var input = this.session.getTextRange(range);
            replacement = this.$search.replace(input, replacement);
            if (replacement !== null) {
                range.end = this.session.replace(range, replacement);
                return range;
            } else return null;
        };
        this.getLastSearchOptions = function() {
            return this.$search.getOptions();
        };
        this.find = function(needle, options, animate) {
            if (!options) options = {
            };
            if (typeof needle == "string" || needle instanceof RegExp) options.needle = needle;
            else if (typeof needle == "object") oop.mixin(options, needle);
            var range = this.selection.getRange();
            if (options.needle == null) {
                needle = this.session.getTextRange(range) || this.$search.$options.needle;
                if (!needle) {
                    range = this.session.getWordRange(range.start.row, range.start.column);
                    needle = this.session.getTextRange(range);
                }
                this.$search.set({
                    needle: needle
                });
            }
            this.$search.set(options);
            if (!options.start) this.$search.set({
                start: range
            });
            var newRange = this.$search.find(this.session);
            if (options.preventScroll) return newRange;
            if (newRange) {
                this.revealRange(newRange, animate);
                return newRange;
            }
            if (options.backwards) range.start = range.end;
            else range.end = range.start;
            this.selection.setRange(range);
        };
        this.findNext = function(options, animate) {
            this.find({
                skipCurrent: true,
                backwards: false
            }, options, animate);
        };
        this.findPrevious = function(options, animate) {
            this.find(options, {
                skipCurrent: true,
                backwards: true
            }, animate);
        };
        this.revealRange = function(range, animate) {
            this.$blockScrolling += 1;
            this.session.unfold(range);
            this.selection.setSelectionRange(range);
            this.$blockScrolling -= 1;
            var scrollTop = this.renderer.scrollTop;
            this.renderer.scrollSelectionIntoView(range.start, range.end, 0.5);
            if (animate !== false) this.renderer.animateScrolling(scrollTop);
        };
        this.undo = function() {
            this.$blockScrolling++;
            this.session.getUndoManager().undo();
            this.$blockScrolling--;
            this.renderer.scrollCursorIntoView(null, 0.5);
        };
        this.redo = function() {
            this.$blockScrolling++;
            this.session.getUndoManager().redo();
            this.$blockScrolling--;
            this.renderer.scrollCursorIntoView(null, 0.5);
        };
        this.destroy = function() {
            this.renderer.destroy();
            this._signal("destroy", this);
            if (this.session) this.session.destroy();
        };
        this.setAutoScrollEditorIntoView = function(enable) {
            if (!enable) return;
            var rect;
            var self = this;
            var shouldScroll = false;
            if (!this.$scrollAnchor) this.$scrollAnchor = document.createElement("div");
            var scrollAnchor = this.$scrollAnchor;
            scrollAnchor.style.cssText = "position:absolute";
            this.container.insertBefore(scrollAnchor, this.container.firstChild);
            var onChangeSelection = this.on("changeSelection", function() {
                shouldScroll = true;
            });
            var onBeforeRender = this.renderer.on("beforeRender", function() {
                if (shouldScroll) rect = self.renderer.container.getBoundingClientRect();
            });
            var onAfterRender = this.renderer.on("afterRender", function() {
                if (shouldScroll && rect && (self.isFocused() || self.searchBox && self.searchBox.isFocused())) {
                    var renderer = self.renderer;
                    var pos = renderer.$cursorLayer.$pixelPos;
                    var config2 = renderer.layerConfig;
                    var top = pos.top - config2.offset;
                    if (pos.top >= 0 && top + rect.top < 0) shouldScroll = true;
                    else if (pos.top < config2.height && pos.top + rect.top + config2.lineHeight > window.innerHeight) shouldScroll = false;
                    else shouldScroll = null;
                    if (shouldScroll != null) {
                        scrollAnchor.style.top = top + "px";
                        scrollAnchor.style.left = pos.left + "px";
                        scrollAnchor.style.height = config2.lineHeight + "px";
                        scrollAnchor.scrollIntoView(shouldScroll);
                    }
                    shouldScroll = rect = null;
                }
            });
            this.setAutoScrollEditorIntoView = function(enable1) {
                if (enable1) return;
                delete this.setAutoScrollEditorIntoView;
                this.off("changeSelection", onChangeSelection);
                this.renderer.off("afterRender", onAfterRender);
                this.renderer.off("beforeRender", onBeforeRender);
            };
        };
        this.$resetCursorStyle = function() {
            var style = this.$cursorStyle || "ace";
            var cursorLayer = this.renderer.$cursorLayer;
            if (!cursorLayer) return;
            cursorLayer.setSmoothBlinking(/smooth/.test(style));
            cursorLayer.isBlinking = !this.$readOnly && style != "wide";
            dom.setCssClass(cursorLayer.element, "ace_slim-cursors", /slim/.test(style));
        };
    }).call(Editor.prototype);
    config.defineOptions(Editor.prototype, "editor", {
        selectionStyle: {
            set: function(style) {
                this.onSelectionChange();
                this._signal("changeSelectionStyle", {
                    data: style
                });
            },
            initialValue: "line"
        },
        highlightActiveLine: {
            set: function() {
                this.$updateHighlightActiveLine();
            },
            initialValue: true
        },
        highlightSelectedWord: {
            set: function(shouldHighlight) {
                this.$onSelectionChange();
            },
            initialValue: true
        },
        readOnly: {
            set: function(readOnly) {
                this.$resetCursorStyle();
            },
            initialValue: false
        },
        cursorStyle: {
            set: function(val) {
                this.$resetCursorStyle();
            },
            values: [
                "ace",
                "slim",
                "smooth",
                "wide"
            ],
            initialValue: "ace"
        },
        mergeUndoDeltas: {
            values: [
                false,
                true,
                "always"
            ],
            initialValue: true
        },
        behavioursEnabled: {
            initialValue: true
        },
        wrapBehavioursEnabled: {
            initialValue: true
        },
        autoScrollEditorIntoView: {
            set: function(val) {
                this.setAutoScrollEditorIntoView(val);
            }
        },
        keyboardHandler: {
            set: function(val) {
                this.setKeyboardHandler(val);
            },
            get: function() {
                return this.keybindingId;
            },
            handlesSet: true
        },
        hScrollBarAlwaysVisible: "renderer",
        vScrollBarAlwaysVisible: "renderer",
        highlightGutterLine: "renderer",
        animatedScroll: "renderer",
        showInvisibles: "renderer",
        showPrintMargin: "renderer",
        printMarginColumn: "renderer",
        printMargin: "renderer",
        fadeFoldWidgets: "renderer",
        showFoldWidgets: "renderer",
        showLineNumbers: "renderer",
        showGutter: "renderer",
        displayIndentGuides: "renderer",
        fontSize: "renderer",
        fontFamily: "renderer",
        maxLines: "renderer",
        minLines: "renderer",
        scrollPastEnd: "renderer",
        fixedWidthGutter: "renderer",
        theme: "renderer",
        scrollSpeed: "$mouseHandler",
        dragDelay: "$mouseHandler",
        dragEnabled: "$mouseHandler",
        focusTimout: "$mouseHandler",
        tooltipFollowsMouse: "$mouseHandler",
        firstLineNumber: "session",
        overwrite: "session",
        newLineMode: "session",
        useWorker: "session",
        useSoftTabs: "session",
        tabSize: "session",
        wrap: "session",
        indentedSoftWrap: "session",
        foldStyle: "session",
        mode: "session"
    });
    exports.Editor = Editor;
});
ace.define("ace/undomanager", [
    "require",
    "exports",
    "module"
], function(acequire, exports, module) {
    var UndoManager = function() {
        this.reset();
    };
    (function() {
        this.execute = function(options) {
            var deltaSets = options.args[0];
            this.$doc = options.args[1];
            if (options.merge && this.hasUndo()) {
                this.dirtyCounter--;
                deltaSets = this.$undoStack.pop().concat(deltaSets);
            }
            this.$undoStack.push(deltaSets);
            this.$redoStack = [];
            if (this.dirtyCounter < 0) this.dirtyCounter = NaN;
            this.dirtyCounter++;
        };
        this.undo = function(dontSelect) {
            var deltaSets = this.$undoStack.pop();
            var undoSelectionRange = null;
            if (deltaSets) {
                undoSelectionRange = this.$doc.undoChanges(deltaSets, dontSelect);
                this.$redoStack.push(deltaSets);
                this.dirtyCounter--;
            }
            return undoSelectionRange;
        };
        this.redo = function(dontSelect) {
            var deltaSets = this.$redoStack.pop();
            var redoSelectionRange = null;
            if (deltaSets) {
                redoSelectionRange = this.$doc.redoChanges(this.$deserializeDeltas(deltaSets), dontSelect);
                this.$undoStack.push(deltaSets);
                this.dirtyCounter++;
            }
            return redoSelectionRange;
        };
        this.reset = function() {
            this.$undoStack = [];
            this.$redoStack = [];
            this.dirtyCounter = 0;
        };
        this.hasUndo = function() {
            return this.$undoStack.length > 0;
        };
        this.hasRedo = function() {
            return this.$redoStack.length > 0;
        };
        this.markClean = function() {
            this.dirtyCounter = 0;
        };
        this.isClean = function() {
            return this.dirtyCounter === 0;
        };
        this.$serializeDeltas = function(deltaSets) {
            return cloneDeltaSetsObj(deltaSets, $serializeDelta);
        };
        this.$deserializeDeltas = function(deltaSets) {
            return cloneDeltaSetsObj(deltaSets, $deserializeDelta);
        };
        function $serializeDelta(delta) {
            return {
                action: delta.action,
                start: delta.start,
                end: delta.end,
                lines: delta.lines.length == 1 ? null : delta.lines,
                text: delta.lines.length == 1 ? delta.lines[0] : null
            };
        }
        function $deserializeDelta(delta) {
            return {
                action: delta.action,
                start: delta.start,
                end: delta.end,
                lines: delta.lines || [
                    delta.text
                ]
            };
        }
        function cloneDeltaSetsObj(deltaSets_old, fnGetModifiedDelta) {
            var deltaSets_new = new Array(deltaSets_old.length);
            for(var i = 0; i < deltaSets_old.length; i++){
                var deltaSet_old = deltaSets_old[i];
                var deltaSet_new = {
                    group: deltaSet_old.group,
                    deltas: new Array(deltaSet_old.length)
                };
                for(var j = 0; j < deltaSet_old.deltas.length; j++){
                    var delta_old = deltaSet_old.deltas[j];
                    deltaSet_new.deltas[j] = fnGetModifiedDelta(delta_old);
                }
                deltaSets_new[i] = deltaSet_new;
            }
            return deltaSets_new;
        }
    }).call(UndoManager.prototype);
    exports.UndoManager = UndoManager;
});
ace.define("ace/layer/gutter", [
    "require",
    "exports",
    "module",
    "ace/lib/dom",
    "ace/lib/oop",
    "ace/lib/lang",
    "ace/lib/event_emitter"
], function(acequire, exports, module) {
    var dom = acequire("../lib/dom");
    var oop = acequire("../lib/oop");
    var lang = acequire("../lib/lang");
    var EventEmitter = acequire("../lib/event_emitter").EventEmitter;
    var Gutter = function(parentEl) {
        this.element = dom.createElement("div");
        this.element.className = "ace_layer ace_gutter-layer";
        parentEl.appendChild(this.element);
        this.setShowFoldWidgets(this.$showFoldWidgets);
        this.gutterWidth = 0;
        this.$annotations = [];
        this.$updateAnnotations = this.$updateAnnotations.bind(this);
        this.$cells = [];
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.setSession = function(session) {
            if (this.session) this.session.removeEventListener("change", this.$updateAnnotations);
            this.session = session;
            if (session) session.on("change", this.$updateAnnotations);
        };
        this.addGutterDecoration = function(row, className) {
            if (window.console) console.warn && console.warn("deprecated use session.addGutterDecoration");
            this.session.addGutterDecoration(row, className);
        };
        this.removeGutterDecoration = function(row, className) {
            if (window.console) console.warn && console.warn("deprecated use session.removeGutterDecoration");
            this.session.removeGutterDecoration(row, className);
        };
        this.setAnnotations = function(annotations) {
            this.$annotations = [];
            for(var i = 0; i < annotations.length; i++){
                var annotation = annotations[i];
                var row = annotation.row;
                var rowInfo = this.$annotations[row];
                if (!rowInfo) rowInfo = this.$annotations[row] = {
                    text: []
                };
                var annoText = annotation.text;
                annoText = annoText ? lang.escapeHTML(annoText) : annotation.html || "";
                if (rowInfo.text.indexOf(annoText) === -1) rowInfo.text.push(annoText);
                var type = annotation.type;
                if (type == "error") rowInfo.className = " ace_error";
                else if (type == "warning" && rowInfo.className != " ace_error") rowInfo.className = " ace_warning";
                else if (type == "info" && !rowInfo.className) rowInfo.className = " ace_info";
            }
        };
        this.$updateAnnotations = function(delta) {
            if (!this.$annotations.length) return;
            var firstRow = delta.start.row;
            var len = delta.end.row - firstRow;
            if (len === 0) ;
            else if (delta.action == 'remove') this.$annotations.splice(firstRow, len + 1, null);
            else {
                var args = new Array(len + 1);
                args.unshift(firstRow, 1);
                this.$annotations.splice.apply(this.$annotations, args);
            }
        };
        this.update = function(config3) {
            var session = this.session;
            var firstRow = config3.firstRow;
            var lastRow = Math.min(config3.lastRow + config3.gutterOffset, session.getLength() - 1);
            var fold = session.getNextFoldLine(firstRow);
            var foldStart = fold ? fold.start.row : Infinity;
            var foldWidgets = this.$showFoldWidgets && session.foldWidgets;
            var breakpoints = session.$breakpoints;
            var decorations = session.$decorations;
            var firstLineNumber = session.$firstLineNumber;
            var lastLineNumber = 0;
            var gutterRenderer = session.gutterRenderer || this.$renderer;
            var cell = null;
            var index = -1;
            var row = firstRow;
            while(true){
                if (row > foldStart) {
                    row = fold.end.row + 1;
                    fold = session.getNextFoldLine(row, fold);
                    foldStart = fold ? fold.start.row : Infinity;
                }
                if (row > lastRow) {
                    while(this.$cells.length > index + 1){
                        cell = this.$cells.pop();
                        this.element.removeChild(cell.element);
                    }
                    break;
                }
                cell = this.$cells[++index];
                if (!cell) {
                    cell = {
                        element: null,
                        textNode: null,
                        foldWidget: null
                    };
                    cell.element = dom.createElement("div");
                    cell.textNode = document.createTextNode('');
                    cell.element.appendChild(cell.textNode);
                    this.element.appendChild(cell.element);
                    this.$cells[index] = cell;
                }
                var className = "ace_gutter-cell ";
                if (breakpoints[row]) className += breakpoints[row];
                if (decorations[row]) className += decorations[row];
                if (this.$annotations[row]) className += this.$annotations[row].className;
                if (cell.element.className != className) cell.element.className = className;
                var height = session.getRowLength(row) * config3.lineHeight + "px";
                if (height != cell.element.style.height) cell.element.style.height = height;
                if (foldWidgets) {
                    var c = foldWidgets[row];
                    if (c == null) c = foldWidgets[row] = session.getFoldWidget(row);
                }
                if (c) {
                    if (!cell.foldWidget) {
                        cell.foldWidget = dom.createElement("span");
                        cell.element.appendChild(cell.foldWidget);
                    }
                    var className = "ace_fold-widget ace_" + c;
                    if (c == "start" && row == foldStart && row < fold.end.row) className += " ace_closed";
                    else className += " ace_open";
                    if (cell.foldWidget.className != className) cell.foldWidget.className = className;
                    var height = config3.lineHeight + "px";
                    if (cell.foldWidget.style.height != height) cell.foldWidget.style.height = height;
                } else if (cell.foldWidget) {
                    cell.element.removeChild(cell.foldWidget);
                    cell.foldWidget = null;
                }
                var text = lastLineNumber = gutterRenderer ? gutterRenderer.getText(session, row) : row + firstLineNumber;
                if (text !== cell.textNode.data) cell.textNode.data = text;
                row++;
            }
            this.element.style.height = config3.minHeight + "px";
            if (this.$fixedWidth || session.$useWrapMode) lastLineNumber = session.getLength() + firstLineNumber;
            var gutterWidth = gutterRenderer ? gutterRenderer.getWidth(session, lastLineNumber, config3) : lastLineNumber.toString().length * config3.characterWidth;
            var padding = this.$padding || this.$computePadding();
            gutterWidth += padding.left + padding.right;
            if (gutterWidth !== this.gutterWidth && !isNaN(gutterWidth)) {
                this.gutterWidth = gutterWidth;
                this.element.style.width = Math.ceil(this.gutterWidth) + "px";
                this._emit("changeGutterWidth", gutterWidth);
            }
        };
        this.$fixedWidth = false;
        this.$showLineNumbers = true;
        this.$renderer = "";
        this.setShowLineNumbers = function(show) {
            this.$renderer = !show && {
                getWidth: function() {
                    return "";
                },
                getText: function() {
                    return "";
                }
            };
        };
        this.getShowLineNumbers = function() {
            return this.$showLineNumbers;
        };
        this.$showFoldWidgets = true;
        this.setShowFoldWidgets = function(show) {
            if (show) dom.addCssClass(this.element, "ace_folding-enabled");
            else dom.removeCssClass(this.element, "ace_folding-enabled");
            this.$showFoldWidgets = show;
            this.$padding = null;
        };
        this.getShowFoldWidgets = function() {
            return this.$showFoldWidgets;
        };
        this.$computePadding = function() {
            if (!this.element.firstChild) return {
                left: 0,
                right: 0
            };
            var style = dom.computedStyle(this.element.firstChild);
            this.$padding = {
            };
            this.$padding.left = parseInt(style.paddingLeft) + 1 || 0;
            this.$padding.right = parseInt(style.paddingRight) || 0;
            return this.$padding;
        };
        this.getRegion = function(point) {
            var padding = this.$padding || this.$computePadding();
            var rect = this.element.getBoundingClientRect();
            if (point.x < padding.left + rect.left) return "markers";
            if (this.$showFoldWidgets && point.x > rect.right - padding.right) return "foldWidgets";
        };
    }).call(Gutter.prototype);
    exports.Gutter = Gutter;
});
ace.define("ace/layer/marker", [
    "require",
    "exports",
    "module",
    "ace/range",
    "ace/lib/dom"
], function(acequire, exports, module) {
    var Range1 = acequire("../range").Range;
    var dom = acequire("../lib/dom");
    var Marker = function(parentEl) {
        this.element = dom.createElement("div");
        this.element.className = "ace_layer ace_marker-layer";
        parentEl.appendChild(this.element);
    };
    (function() {
        this.$padding = 0;
        this.setPadding = function(padding) {
            this.$padding = padding;
        };
        this.setSession = function(session) {
            this.session = session;
        };
        this.setMarkers = function(markers) {
            this.markers = markers;
        };
        this.update = function(config3) {
            if (!config3) return;
            this.config = config3;
            var html = [];
            for(var key in this.markers){
                var marker = this.markers[key];
                if (!marker.range) {
                    marker.update(html, this, this.session, config3);
                    continue;
                }
                var range = marker.range.clipRows(config3.firstRow, config3.lastRow);
                if (range.isEmpty()) continue;
                range = range.toScreenRange(this.session);
                if (marker.renderer) {
                    var top = this.$getTop(range.start.row, config3);
                    var left = this.$padding + (this.session.$bidiHandler.isBidiRow(range.start.row) ? this.session.$bidiHandler.getPosLeft(range.start.column) : range.start.column * config3.characterWidth);
                    marker.renderer(html, range, left, top, config3);
                } else if (marker.type == "fullLine") this.drawFullLineMarker(html, range, marker.clazz, config3);
                else if (marker.type == "screenLine") this.drawScreenLineMarker(html, range, marker.clazz, config3);
                else if (range.isMultiLine()) {
                    if (marker.type == "text") this.drawTextMarker(html, range, marker.clazz, config3);
                    else this.drawMultiLineMarker(html, range, marker.clazz, config3);
                } else if (this.session.$bidiHandler.isBidiRow(range.start.row)) this.drawBidiSingleLineMarker(html, range, marker.clazz + " ace_start" + " ace_br15", config3);
                else this.drawSingleLineMarker(html, range, marker.clazz + " ace_start" + " ace_br15", config3);
            }
            this.element.innerHTML = html.join("");
        };
        this.$getTop = function(row, layerConfig) {
            return (row - layerConfig.firstRowScreen) * layerConfig.lineHeight;
        };
        function getBorderClass(tl, tr, br, bl) {
            return (tl ? 1 : 0) | (tr ? 2 : 0) | (br ? 4 : 0) | (bl ? 8 : 0);
        }
        this.drawTextMarker = function(stringBuilder, range, clazz, layerConfig, extraStyle) {
            var session = this.session;
            var start = range.start.row;
            var end = range.end.row;
            var row = start;
            var prev = 0;
            var curr = 0;
            var next = session.getScreenLastRowColumn(row);
            var clazzModified = null;
            var lineRange = new Range1(row, range.start.column, row, curr);
            for(; row <= end; row++){
                lineRange.start.row = lineRange.end.row = row;
                lineRange.start.column = row == start ? range.start.column : session.getRowWrapIndent(row);
                lineRange.end.column = next;
                prev = curr;
                curr = next;
                next = row + 1 < end ? session.getScreenLastRowColumn(row + 1) : row == end ? 0 : range.end.column;
                clazzModified = clazz + (row == start ? " ace_start" : "") + " ace_br" + getBorderClass(row == start || row == start + 1 && range.start.column, prev < curr, curr > next, row == end);
                if (this.session.$bidiHandler.isBidiRow(row)) this.drawBidiSingleLineMarker(stringBuilder, lineRange, clazzModified, layerConfig, row == end ? 0 : 1, extraStyle);
                else this.drawSingleLineMarker(stringBuilder, lineRange, clazzModified, layerConfig, row == end ? 0 : 1, extraStyle);
            }
        };
        this.drawMultiLineMarker = function(stringBuilder, range, clazz, config3, extraStyle) {
            var padding = this.$padding;
            var height, top, left;
            extraStyle = extraStyle || "";
            if (this.session.$bidiHandler.isBidiRow(range.start.row)) {
                var range1 = range.clone();
                range1.end.row = range1.start.row;
                range1.end.column = this.session.getLine(range1.start.row).length;
                this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + " ace_br1 ace_start", config3, null, extraStyle);
            } else {
                height = config3.lineHeight;
                top = this.$getTop(range.start.row, config3);
                left = padding + range.start.column * config3.characterWidth;
                stringBuilder.push("<div class='", clazz, " ace_br1 ace_start' style='", "height:", height, "px;", "right:0;", "top:", top, "px;", "left:", left, "px;", extraStyle, "'></div>");
            }
            if (this.session.$bidiHandler.isBidiRow(range.end.row)) {
                var range1 = range.clone();
                range1.start.row = range1.end.row;
                range1.start.column = 0;
                this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + " ace_br12", config3, null, extraStyle);
            } else {
                var width = range.end.column * config3.characterWidth;
                height = config3.lineHeight;
                top = this.$getTop(range.end.row, config3);
                stringBuilder.push("<div class='", clazz, " ace_br12' style='", "height:", height, "px;", "width:", width, "px;", "top:", top, "px;", "left:", padding, "px;", extraStyle, "'></div>");
            }
            height = (range.end.row - range.start.row - 1) * config3.lineHeight;
            if (height <= 0) return;
            top = this.$getTop(range.start.row + 1, config3);
            var radiusClass = (range.start.column ? 1 : 0) | (range.end.column ? 0 : 8);
            stringBuilder.push("<div class='", clazz, radiusClass ? " ace_br" + radiusClass : "", "' style='", "height:", height, "px;", "right:0;", "top:", top, "px;", "left:", padding, "px;", extraStyle, "'></div>");
        };
        this.drawSingleLineMarker = function(stringBuilder, range, clazz, config3, extraLength, extraStyle) {
            var height = config3.lineHeight;
            var width = (range.end.column + (extraLength || 0) - range.start.column) * config3.characterWidth;
            var top = this.$getTop(range.start.row, config3);
            var left = this.$padding + range.start.column * config3.characterWidth;
            stringBuilder.push("<div class='", clazz, "' style='", "height:", height, "px;", "width:", width, "px;", "top:", top, "px;", "left:", left, "px;", extraStyle || "", "'></div>");
        };
        this.drawBidiSingleLineMarker = function(stringBuilder, range, clazz, config3, extraLength, extraStyle) {
            var height = config3.lineHeight, top = this.$getTop(range.start.row, config3), padding = this.$padding;
            var selections = this.session.$bidiHandler.getSelections(range.start.column, range.end.column);
            selections.forEach(function(selection) {
                stringBuilder.push("<div class='", clazz, "' style='", "height:", height, "px;", "width:", selection.width + (extraLength || 0), "px;", "top:", top, "px;", "left:", padding + selection.left, "px;", extraStyle || "", "'></div>");
            });
        };
        this.drawFullLineMarker = function(stringBuilder, range, clazz, config3, extraStyle) {
            var top = this.$getTop(range.start.row, config3);
            var height = config3.lineHeight;
            if (range.start.row != range.end.row) height += this.$getTop(range.end.row, config3) - top;
            stringBuilder.push("<div class='", clazz, "' style='", "height:", height, "px;", "top:", top, "px;", "left:0;right:0;", extraStyle || "", "'></div>");
        };
        this.drawScreenLineMarker = function(stringBuilder, range, clazz, config3, extraStyle) {
            var top = this.$getTop(range.start.row, config3);
            var height = config3.lineHeight;
            stringBuilder.push("<div class='", clazz, "' style='", "height:", height, "px;", "top:", top, "px;", "left:0;right:0;", extraStyle || "", "'></div>");
        };
    }).call(Marker.prototype);
    exports.Marker = Marker;
});
ace.define("ace/layer/text", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/dom",
    "ace/lib/lang",
    "ace/lib/useragent",
    "ace/lib/event_emitter"
], function(acequire, exports, module) {
    var oop = acequire("../lib/oop");
    var dom = acequire("../lib/dom");
    var lang = acequire("../lib/lang");
    var useragent = acequire("../lib/useragent");
    var EventEmitter = acequire("../lib/event_emitter").EventEmitter;
    var Text1 = function(parentEl) {
        this.element = dom.createElement("div");
        this.element.className = "ace_layer ace_text-layer";
        parentEl.appendChild(this.element);
        this.$updateEolChar = this.$updateEolChar.bind(this);
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.EOF_CHAR = "\xB6";
        this.EOL_CHAR_LF = "\xAC";
        this.EOL_CHAR_CRLF = "\xa4";
        this.EOL_CHAR = this.EOL_CHAR_LF;
        this.TAB_CHAR = "\u2014"; //"\u21E5";
        this.SPACE_CHAR = "\xB7";
        this.$padding = 0;
        this.$updateEolChar = function() {
            var EOL_CHAR = this.session.doc.getNewLineCharacter() == "\n" ? this.EOL_CHAR_LF : this.EOL_CHAR_CRLF;
            if (this.EOL_CHAR != EOL_CHAR) {
                this.EOL_CHAR = EOL_CHAR;
                return true;
            }
        };
        this.setPadding = function(padding) {
            this.$padding = padding;
            this.element.style.padding = "0 " + padding + "px";
        };
        this.getLineHeight = function() {
            return this.$fontMetrics.$characterSize.height || 0;
        };
        this.getCharacterWidth = function() {
            return this.$fontMetrics.$characterSize.width || 0;
        };
        this.$setFontMetrics = function(measure) {
            this.$fontMetrics = measure;
            this.$fontMetrics.on("changeCharacterSize", (function(e) {
                this._signal("changeCharacterSize", e);
            }).bind(this));
            this.$pollSizeChanges();
        };
        this.checkForSizeChanges = function() {
            this.$fontMetrics.checkForSizeChanges();
        };
        this.$pollSizeChanges = function() {
            return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();
        };
        this.setSession = function(session) {
            this.session = session;
            if (session) this.$computeTabString();
        };
        this.showInvisibles = false;
        this.setShowInvisibles = function(showInvisibles) {
            if (this.showInvisibles == showInvisibles) return false;
            this.showInvisibles = showInvisibles;
            this.$computeTabString();
            return true;
        };
        this.displayIndentGuides = true;
        this.setDisplayIndentGuides = function(display) {
            if (this.displayIndentGuides == display) return false;
            this.displayIndentGuides = display;
            this.$computeTabString();
            return true;
        };
        this.$tabStrings = [];
        this.onChangeTabSize = this.$computeTabString = function() {
            var tabSize = this.session.getTabSize();
            this.tabSize = tabSize;
            var tabStr = this.$tabStrings = [
                0
            ];
            for(var i = 1; i < tabSize + 1; i++)if (this.showInvisibles) tabStr.push("<span class='ace_invisible ace_invisible_tab'>" + lang.stringRepeat(this.TAB_CHAR, i) + "</span>");
            else tabStr.push(lang.stringRepeat(" ", i));
            if (this.displayIndentGuides) {
                this.$indentGuideRe = /\s\S| \t|\t |\s$/;
                var className = "ace_indent-guide";
                var spaceClass = "";
                var tabClass = "";
                if (this.showInvisibles) {
                    className += " ace_invisible";
                    spaceClass = " ace_invisible_space";
                    tabClass = " ace_invisible_tab";
                    var spaceContent = lang.stringRepeat(this.SPACE_CHAR, this.tabSize);
                    var tabContent = lang.stringRepeat(this.TAB_CHAR, this.tabSize);
                } else {
                    var spaceContent = lang.stringRepeat(" ", this.tabSize);
                    var tabContent = spaceContent;
                }
                this.$tabStrings[" "] = "<span class='" + className + spaceClass + "'>" + spaceContent + "</span>";
                this.$tabStrings["\t"] = "<span class='" + className + tabClass + "'>" + tabContent + "</span>";
            }
        };
        this.updateLines = function(config3, firstRow, lastRow) {
            if (this.config.lastRow != config3.lastRow || this.config.firstRow != config3.firstRow) this.scrollLines(config3);
            this.config = config3;
            var first = Math.max(firstRow, config3.firstRow);
            var last = Math.min(lastRow, config3.lastRow);
            var lineElements = this.element.childNodes;
            var lineElementsIdx = 0;
            for(var row = config3.firstRow; row < first; row++){
                var foldLine = this.session.getFoldLine(row);
                if (foldLine) {
                    if (foldLine.containsRow(first)) {
                        first = foldLine.start.row;
                        break;
                    } else row = foldLine.end.row;
                }
                lineElementsIdx++;
            }
            var row = first;
            var foldLine = this.session.getNextFoldLine(row);
            var foldStart = foldLine ? foldLine.start.row : Infinity;
            while(true){
                if (row > foldStart) {
                    row = foldLine.end.row + 1;
                    foldLine = this.session.getNextFoldLine(row, foldLine);
                    foldStart = foldLine ? foldLine.start.row : Infinity;
                }
                if (row > last) break;
                var lineElement = lineElements[lineElementsIdx++];
                if (lineElement) {
                    var html = [];
                    this.$renderLine(html, row, !this.$useLineGroups(), row == foldStart ? foldLine : false);
                    lineElement.style.height = config3.lineHeight * this.session.getRowLength(row) + "px";
                    lineElement.innerHTML = html.join("");
                }
                row++;
            }
        };
        this.scrollLines = function(config3) {
            var oldConfig = this.config;
            this.config = config3;
            if (!oldConfig || oldConfig.lastRow < config3.firstRow) return this.update(config3);
            if (config3.lastRow < oldConfig.firstRow) return this.update(config3);
            var el = this.element;
            if (oldConfig.firstRow < config3.firstRow) for(var row = this.session.getFoldedRowCount(oldConfig.firstRow, config3.firstRow - 1); row > 0; row--)el.removeChild(el.firstChild);
            if (oldConfig.lastRow > config3.lastRow) for(var row = this.session.getFoldedRowCount(config3.lastRow + 1, oldConfig.lastRow); row > 0; row--)el.removeChild(el.lastChild);
            if (config3.firstRow < oldConfig.firstRow) {
                var fragment = this.$renderLinesFragment(config3, config3.firstRow, oldConfig.firstRow - 1);
                if (el.firstChild) el.insertBefore(fragment, el.firstChild);
                else el.appendChild(fragment);
            }
            if (config3.lastRow > oldConfig.lastRow) {
                var fragment = this.$renderLinesFragment(config3, oldConfig.lastRow + 1, config3.lastRow);
                el.appendChild(fragment);
            }
        };
        this.$renderLinesFragment = function(config3, firstRow, lastRow) {
            var fragment = this.element.ownerDocument.createDocumentFragment();
            var row = firstRow;
            var foldLine = this.session.getNextFoldLine(row);
            var foldStart = foldLine ? foldLine.start.row : Infinity;
            while(true){
                if (row > foldStart) {
                    row = foldLine.end.row + 1;
                    foldLine = this.session.getNextFoldLine(row, foldLine);
                    foldStart = foldLine ? foldLine.start.row : Infinity;
                }
                if (row > lastRow) break;
                var container = dom.createElement("div");
                var html = [];
                this.$renderLine(html, row, false, row == foldStart ? foldLine : false);
                container.innerHTML = html.join("");
                if (this.$useLineGroups()) {
                    container.className = 'ace_line_group';
                    fragment.appendChild(container);
                    container.style.height = config3.lineHeight * this.session.getRowLength(row) + "px";
                } else while(container.firstChild)fragment.appendChild(container.firstChild);
                row++;
            }
            return fragment;
        };
        this.update = function(config3) {
            this.config = config3;
            var html = [];
            var firstRow = config3.firstRow, lastRow = config3.lastRow;
            var row = firstRow;
            var foldLine = this.session.getNextFoldLine(row);
            var foldStart = foldLine ? foldLine.start.row : Infinity;
            while(true){
                if (row > foldStart) {
                    row = foldLine.end.row + 1;
                    foldLine = this.session.getNextFoldLine(row, foldLine);
                    foldStart = foldLine ? foldLine.start.row : Infinity;
                }
                if (row > lastRow) break;
                if (this.$useLineGroups()) html.push("<div class='ace_line_group' style='height:", config3.lineHeight * this.session.getRowLength(row), "px'>");
                this.$renderLine(html, row, false, row == foldStart ? foldLine : false);
                if (this.$useLineGroups()) html.push("</div>"); // end the line group
                row++;
            }
            this.element.innerHTML = html.join("");
        };
        this.$textToken = {
            "text": true,
            "rparen": true,
            "lparen": true
        };
        this.$renderToken = function(stringBuilder, screenColumn, token, value) {
            var self = this;
            var replaceReg = /\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g;
            var replaceFunc = function(c, a, b, tabIdx, idx4) {
                if (a) return self.showInvisibles ? "<span class='ace_invisible ace_invisible_space'>" + lang.stringRepeat(self.SPACE_CHAR, c.length) + "</span>" : c;
                else if (c == "&") return "&#38;";
                else if (c == "<") return "&#60;";
                else if (c == ">") return "&#62;";
                else if (c == "\t") {
                    var tabSize = self.session.getScreenTabSize(screenColumn + tabIdx);
                    screenColumn += tabSize - 1;
                    return self.$tabStrings[tabSize];
                } else if (c == "\u3000") {
                    var classToUse = self.showInvisibles ? "ace_cjk ace_invisible ace_invisible_space" : "ace_cjk";
                    var space = self.showInvisibles ? self.SPACE_CHAR : "";
                    screenColumn += 1;
                    return "<span class='" + classToUse + "' style='width:" + self.config.characterWidth * 2 + "px'>" + space + "</span>";
                } else if (b) return "<span class='ace_invisible ace_invisible_space ace_invalid'>" + self.SPACE_CHAR + "</span>";
                else {
                    screenColumn += 1;
                    return "<span class='ace_cjk' style='width:" + self.config.characterWidth * 2 + "px'>" + c + "</span>";
                }
            };
            var output = value.replace(replaceReg, replaceFunc);
            if (!this.$textToken[token.type]) {
                var classes = "ace_" + token.type.replace(/\./g, " ace_");
                var style = "";
                if (token.type == "fold") style = " style='width:" + token.value.length * this.config.characterWidth + "px;' ";
                stringBuilder.push("<span class='", classes, "'", style, ">", output, "</span>");
            } else stringBuilder.push(output);
            return screenColumn + value.length;
        };
        this.renderIndentGuide = function(stringBuilder, value, max) {
            var cols = value.search(this.$indentGuideRe);
            if (cols <= 0 || cols >= max) return value;
            if (value[0] == " ") {
                cols -= cols % this.tabSize;
                stringBuilder.push(lang.stringRepeat(this.$tabStrings[" "], cols / this.tabSize));
                return value.substr(cols);
            } else if (value[0] == "\t") {
                stringBuilder.push(lang.stringRepeat(this.$tabStrings["\t"], cols));
                return value.substr(cols);
            }
            return value;
        };
        this.$renderWrappedLine = function(stringBuilder, tokens, splits, onlyContents) {
            var chars = 0;
            var split = 0;
            var splitChars = splits[0];
            var screenColumn = 0;
            for(var i = 0; i < tokens.length; i++){
                var token = tokens[i];
                var value = token.value;
                if (i == 0 && this.displayIndentGuides) {
                    chars = value.length;
                    value = this.renderIndentGuide(stringBuilder, value, splitChars);
                    if (!value) continue;
                    chars -= value.length;
                }
                if (chars + value.length < splitChars) {
                    screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);
                    chars += value.length;
                } else {
                    while(chars + value.length >= splitChars){
                        screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value.substring(0, splitChars - chars));
                        value = value.substring(splitChars - chars);
                        chars = splitChars;
                        if (!onlyContents) stringBuilder.push("</div>", "<div class='ace_line' style='height:", this.config.lineHeight, "px'>");
                        stringBuilder.push(lang.stringRepeat("\xa0", splits.indent));
                        split++;
                        screenColumn = 0;
                        splitChars = splits[split] || Number.MAX_VALUE;
                    }
                    if (value.length != 0) {
                        chars += value.length;
                        screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);
                    }
                }
            }
        };
        this.$renderSimpleLine = function(stringBuilder, tokens) {
            var screenColumn = 0;
            var token = tokens[0];
            var value = token.value;
            if (this.displayIndentGuides) value = this.renderIndentGuide(stringBuilder, value);
            if (value) screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);
            for(var i = 1; i < tokens.length; i++){
                token = tokens[i];
                value = token.value;
                screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);
            }
        };
        this.$renderLine = function(stringBuilder, row, onlyContents, foldLine) {
            if (!foldLine && foldLine != false) foldLine = this.session.getFoldLine(row);
            if (foldLine) var tokens = this.$getFoldLineTokens(row, foldLine);
            else var tokens = this.session.getTokens(row);
            if (!onlyContents) stringBuilder.push("<div class='ace_line' style='height:", this.config.lineHeight * (this.$useLineGroups() ? 1 : this.session.getRowLength(row)), "px'>");
            if (tokens.length) {
                var splits = this.session.getRowSplitData(row);
                if (splits && splits.length) this.$renderWrappedLine(stringBuilder, tokens, splits, onlyContents);
                else this.$renderSimpleLine(stringBuilder, tokens);
            }
            if (this.showInvisibles) {
                if (foldLine) row = foldLine.end.row;
                stringBuilder.push("<span class='ace_invisible ace_invisible_eol'>", row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR, "</span>");
            }
            if (!onlyContents) stringBuilder.push("</div>");
        };
        this.$getFoldLineTokens = function(row, foldLine) {
            var session = this.session;
            var renderTokens = [];
            function addTokens(tokens, from, to) {
                var idx = 0, col = 0;
                while(col + tokens[idx].value.length < from){
                    col += tokens[idx].value.length;
                    idx++;
                    if (idx == tokens.length) return;
                }
                if (col != from) {
                    var value = tokens[idx].value.substring(from - col);
                    if (value.length > to - from) value = value.substring(0, to - from);
                    renderTokens.push({
                        type: tokens[idx].type,
                        value: value
                    });
                    col = from + value.length;
                    idx += 1;
                }
                while(col < to && idx < tokens.length){
                    var value = tokens[idx].value;
                    if (value.length + col > to) renderTokens.push({
                        type: tokens[idx].type,
                        value: value.substring(0, to - col)
                    });
                    else renderTokens.push(tokens[idx]);
                    col += value.length;
                    idx += 1;
                }
            }
            var tokens = session.getTokens(row);
            foldLine.walk(function(placeholder, row1, column, lastColumn, isNewRow) {
                if (placeholder != null) renderTokens.push({
                    type: "fold",
                    value: placeholder
                });
                else {
                    if (isNewRow) tokens = session.getTokens(row1);
                    if (tokens.length) addTokens(tokens, lastColumn, column);
                }
            }, foldLine.end.row, this.session.getLine(foldLine.end.row).length);
            return renderTokens;
        };
        this.$useLineGroups = function() {
            return this.session.getUseWrapMode();
        };
        this.destroy = function() {
            clearInterval(this.$pollSizeChangesTimer);
            if (this.$measureNode) this.$measureNode.parentNode.removeChild(this.$measureNode);
            delete this.$measureNode;
        };
    }).call(Text1.prototype);
    exports.Text = Text1;
});
ace.define("ace/layer/cursor", [
    "require",
    "exports",
    "module",
    "ace/lib/dom"
], function(acequire, exports, module) {
    var dom = acequire("../lib/dom");
    var isIE8;
    var Cursor = function(parentEl) {
        this.element = dom.createElement("div");
        this.element.className = "ace_layer ace_cursor-layer";
        parentEl.appendChild(this.element);
        if (isIE8 === undefined) isIE8 = !("opacity" in this.element.style);
        this.isVisible = false;
        this.isBlinking = true;
        this.blinkInterval = 1000;
        this.smoothBlinking = false;
        this.cursors = [];
        this.cursor = this.addCursor();
        dom.addCssClass(this.element, "ace_hidden-cursors");
        this.$updateCursors = (isIE8 ? this.$updateVisibility : this.$updateOpacity).bind(this);
    };
    (function() {
        this.$updateVisibility = function(val) {
            var cursors = this.cursors;
            for(var i = cursors.length; i--;)cursors[i].style.visibility = val ? "" : "hidden";
        };
        this.$updateOpacity = function(val) {
            var cursors = this.cursors;
            for(var i = cursors.length; i--;)cursors[i].style.opacity = val ? "" : "0";
        };
        this.$padding = 0;
        this.setPadding = function(padding) {
            this.$padding = padding;
        };
        this.setSession = function(session) {
            this.session = session;
        };
        this.setBlinking = function(blinking) {
            if (blinking != this.isBlinking) {
                this.isBlinking = blinking;
                this.restartTimer();
            }
        };
        this.setBlinkInterval = function(blinkInterval) {
            if (blinkInterval != this.blinkInterval) {
                this.blinkInterval = blinkInterval;
                this.restartTimer();
            }
        };
        this.setSmoothBlinking = function(smoothBlinking) {
            if (smoothBlinking != this.smoothBlinking && !isIE8) {
                this.smoothBlinking = smoothBlinking;
                dom.setCssClass(this.element, "ace_smooth-blinking", smoothBlinking);
                this.$updateCursors(true);
                this.$updateCursors = this.$updateOpacity.bind(this);
                this.restartTimer();
            }
        };
        this.addCursor = function() {
            var el = dom.createElement("div");
            el.className = "ace_cursor";
            this.element.appendChild(el);
            this.cursors.push(el);
            return el;
        };
        this.removeCursor = function() {
            if (this.cursors.length > 1) {
                var el = this.cursors.pop();
                el.parentNode.removeChild(el);
                return el;
            }
        };
        this.hideCursor = function() {
            this.isVisible = false;
            dom.addCssClass(this.element, "ace_hidden-cursors");
            this.restartTimer();
        };
        this.showCursor = function() {
            this.isVisible = true;
            dom.removeCssClass(this.element, "ace_hidden-cursors");
            this.restartTimer();
        };
        this.restartTimer = function() {
            var update = this.$updateCursors;
            clearInterval(this.intervalId);
            clearTimeout(this.timeoutId);
            if (this.smoothBlinking) dom.removeCssClass(this.element, "ace_smooth-blinking");
            update(true);
            if (!this.isBlinking || !this.blinkInterval || !this.isVisible) return;
            if (this.smoothBlinking) setTimeout((function() {
                dom.addCssClass(this.element, "ace_smooth-blinking");
            }).bind(this));
            var blink = (function() {
                this.timeoutId = setTimeout(function() {
                    update(false);
                }, 0.6 * this.blinkInterval);
            }).bind(this);
            this.intervalId = setInterval(function() {
                update(true);
                blink();
            }, this.blinkInterval);
            blink();
        };
        this.getPixelPosition = function(position, onScreen) {
            if (!this.config || !this.session) return {
                left: 0,
                top: 0
            };
            if (!position) position = this.session.selection.getCursor();
            var pos = this.session.documentToScreenPosition(position);
            var cursorLeft = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, position.row) ? this.session.$bidiHandler.getPosLeft(pos.column) : pos.column * this.config.characterWidth);
            var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) * this.config.lineHeight;
            return {
                left: cursorLeft,
                top: cursorTop
            };
        };
        this.update = function(config3) {
            this.config = config3;
            var selections = this.session.$selectionMarkers;
            var i = 0, cursorIndex = 0;
            if (selections === undefined || selections.length === 0) selections = [
                {
                    cursor: null
                }
            ];
            for(var i = 0, n = selections.length; i < n; i++){
                var pixelPos = this.getPixelPosition(selections[i].cursor, true);
                if ((pixelPos.top > config3.height + config3.offset || pixelPos.top < 0) && i > 1) continue;
                var style = (this.cursors[cursorIndex++] || this.addCursor()).style;
                if (!this.drawCursor) {
                    style.left = pixelPos.left + "px";
                    style.top = pixelPos.top + "px";
                    style.width = config3.characterWidth + "px";
                    style.height = config3.lineHeight + "px";
                } else this.drawCursor(style, pixelPos, config3, selections[i], this.session);
            }
            while(this.cursors.length > cursorIndex)this.removeCursor();
            var overwrite = this.session.getOverwrite();
            this.$setOverwrite(overwrite);
            this.$pixelPos = pixelPos;
            this.restartTimer();
        };
        this.drawCursor = null;
        this.$setOverwrite = function(overwrite) {
            if (overwrite != this.overwrite) {
                this.overwrite = overwrite;
                if (overwrite) dom.addCssClass(this.element, "ace_overwrite-cursors");
                else dom.removeCssClass(this.element, "ace_overwrite-cursors");
            }
        };
        this.destroy = function() {
            clearInterval(this.intervalId);
            clearTimeout(this.timeoutId);
        };
    }).call(Cursor.prototype);
    exports.Cursor = Cursor;
});
ace.define("ace/scrollbar", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/dom",
    "ace/lib/event",
    "ace/lib/event_emitter"
], function(acequire, exports, module) {
    var oop = acequire("./lib/oop");
    var dom = acequire("./lib/dom");
    var event = acequire("./lib/event");
    var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
    var MAX_SCROLL_H = 32768;
    var ScrollBar = function(parent) {
        this.element = dom.createElement("div");
        this.element.className = "ace_scrollbar ace_scrollbar" + this.classSuffix;
        this.inner = dom.createElement("div");
        this.inner.className = "ace_scrollbar-inner";
        this.element.appendChild(this.inner);
        parent.appendChild(this.element);
        this.setVisible(false);
        this.skipEvent = false;
        event.addListener(this.element, "scroll", this.onScroll.bind(this));
        event.addListener(this.element, "mousedown", event.preventDefault);
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.setVisible = function(isVisible) {
            this.element.style.display = isVisible ? "" : "none";
            this.isVisible = isVisible;
            this.coeff = 1;
        };
    }).call(ScrollBar.prototype);
    var VScrollBar = function(parent, renderer) {
        ScrollBar.call(this, parent);
        this.scrollTop = 0;
        this.scrollHeight = 0;
        renderer.$scrollbarWidth = this.width = dom.scrollbarWidth(parent.ownerDocument);
        this.inner.style.width = this.element.style.width = (this.width || 15) + 5 + "px";
        this.$minWidth = 0;
    };
    oop.inherits(VScrollBar, ScrollBar);
    (function() {
        this.classSuffix = '-v';
        this.onScroll = function() {
            if (!this.skipEvent) {
                this.scrollTop = this.element.scrollTop;
                if (this.coeff != 1) {
                    var h = this.element.clientHeight / this.scrollHeight;
                    this.scrollTop = this.scrollTop * (1 - h) / (this.coeff - h);
                }
                this._emit("scroll", {
                    data: this.scrollTop
                });
            }
            this.skipEvent = false;
        };
        this.getWidth = function() {
            return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);
        };
        this.setHeight = function(height) {
            this.element.style.height = height + "px";
        };
        this.setInnerHeight = this.setScrollHeight = function(height) {
            this.scrollHeight = height;
            if (height > MAX_SCROLL_H) {
                this.coeff = MAX_SCROLL_H / height;
                height = MAX_SCROLL_H;
            } else if (this.coeff != 1) this.coeff = 1;
            this.inner.style.height = height + "px";
        };
        this.setScrollTop = function(scrollTop) {
            if (this.scrollTop != scrollTop) {
                this.skipEvent = true;
                this.scrollTop = scrollTop;
                this.element.scrollTop = scrollTop * this.coeff;
            }
        };
    }).call(VScrollBar.prototype);
    var HScrollBar = function(parent, renderer) {
        ScrollBar.call(this, parent);
        this.scrollLeft = 0;
        this.height = renderer.$scrollbarWidth;
        this.inner.style.height = this.element.style.height = (this.height || 15) + 5 + "px";
    };
    oop.inherits(HScrollBar, ScrollBar);
    (function() {
        this.classSuffix = '-h';
        this.onScroll = function() {
            if (!this.skipEvent) {
                this.scrollLeft = this.element.scrollLeft;
                this._emit("scroll", {
                    data: this.scrollLeft
                });
            }
            this.skipEvent = false;
        };
        this.getHeight = function() {
            return this.isVisible ? this.height : 0;
        };
        this.setWidth = function(width) {
            this.element.style.width = width + "px";
        };
        this.setInnerWidth = function(width) {
            this.inner.style.width = width + "px";
        };
        this.setScrollWidth = function(width) {
            this.inner.style.width = width + "px";
        };
        this.setScrollLeft = function(scrollLeft) {
            if (this.scrollLeft != scrollLeft) {
                this.skipEvent = true;
                this.scrollLeft = this.element.scrollLeft = scrollLeft;
            }
        };
    }).call(HScrollBar.prototype);
    exports.ScrollBar = VScrollBar; // backward compatibility
    exports.ScrollBarV = VScrollBar; // backward compatibility
    exports.ScrollBarH = HScrollBar; // backward compatibility
    exports.VScrollBar = VScrollBar;
    exports.HScrollBar = HScrollBar;
});
ace.define("ace/renderloop", [
    "require",
    "exports",
    "module",
    "ace/lib/event"
], function(acequire, exports, module) {
    var event = acequire("./lib/event");
    var RenderLoop = function(onRender, win) {
        this.onRender = onRender;
        this.pending = false;
        this.changes = 0;
        this.window = win || window;
    };
    (function() {
        this.schedule = function(change) {
            this.changes = this.changes | change;
            if (!this.pending && this.changes) {
                this.pending = true;
                var _self = this;
                event.nextFrame(function() {
                    _self.pending = false;
                    var changes;
                    while(changes = _self.changes){
                        _self.changes = 0;
                        _self.onRender(changes);
                    }
                }, this.window);
            }
        };
    }).call(RenderLoop.prototype);
    exports.RenderLoop = RenderLoop;
});
ace.define("ace/layer/font_metrics", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/dom",
    "ace/lib/lang",
    "ace/lib/useragent",
    "ace/lib/event_emitter"
], function(acequire, exports, module) {
    var oop = acequire("../lib/oop");
    var dom = acequire("../lib/dom");
    var lang = acequire("../lib/lang");
    var useragent = acequire("../lib/useragent");
    var EventEmitter = acequire("../lib/event_emitter").EventEmitter;
    var CHAR_COUNT = 0;
    var FontMetrics = exports.FontMetrics = function(parentEl) {
        this.el = dom.createElement("div");
        this.$setMeasureNodeStyles(this.el.style, true);
        this.$main = dom.createElement("div");
        this.$setMeasureNodeStyles(this.$main.style);
        this.$measureNode = dom.createElement("div");
        this.$setMeasureNodeStyles(this.$measureNode.style);
        this.el.appendChild(this.$main);
        this.el.appendChild(this.$measureNode);
        parentEl.appendChild(this.el);
        if (!CHAR_COUNT) this.$testFractionalRect();
        this.$measureNode.innerHTML = lang.stringRepeat("X", CHAR_COUNT);
        this.$characterSize = {
            width: 0,
            height: 0
        };
        this.checkForSizeChanges();
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.$characterSize = {
            width: 0,
            height: 0
        };
        this.$testFractionalRect = function() {
            var el = dom.createElement("div");
            this.$setMeasureNodeStyles(el.style);
            el.style.width = "0.2px";
            document.documentElement.appendChild(el);
            var w = el.getBoundingClientRect().width;
            if (w > 0 && w < 1) CHAR_COUNT = 50;
            else CHAR_COUNT = 100;
            el.parentNode.removeChild(el);
        };
        this.$setMeasureNodeStyles = function(style, isRoot) {
            style.width = style.height = "auto";
            style.left = style.top = "0px";
            style.visibility = "hidden";
            style.position = "absolute";
            style.whiteSpace = "pre";
            if (useragent.isIE < 8) style["font-family"] = "inherit";
            else style.font = "inherit";
            style.overflow = isRoot ? "hidden" : "visible";
        };
        this.checkForSizeChanges = function() {
            var size = this.$measureSizes();
            if (size && (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) {
                this.$measureNode.style.fontWeight = "bold";
                var boldSize = this.$measureSizes();
                this.$measureNode.style.fontWeight = "";
                this.$characterSize = size;
                this.charSizes = Object.create(null);
                this.allowBoldFonts = boldSize && boldSize.width === size.width && boldSize.height === size.height;
                this._emit("changeCharacterSize", {
                    data: size
                });
            }
        };
        this.$pollSizeChanges = function() {
            if (this.$pollSizeChangesTimer) return this.$pollSizeChangesTimer;
            var self = this;
            return this.$pollSizeChangesTimer = setInterval(function() {
                self.checkForSizeChanges();
            }, 500);
        };
        this.setPolling = function(val) {
            if (val) this.$pollSizeChanges();
            else if (this.$pollSizeChangesTimer) {
                clearInterval(this.$pollSizeChangesTimer);
                this.$pollSizeChangesTimer = 0;
            }
        };
        this.$measureSizes = function() {
            if (CHAR_COUNT === 50) {
                var rect = null;
                try {
                    rect = this.$measureNode.getBoundingClientRect();
                } catch (e) {
                    rect = {
                        width: 0,
                        height: 0
                    };
                }
                var size = {
                    height: rect.height,
                    width: rect.width / CHAR_COUNT
                };
            } else var size = {
                height: this.$measureNode.clientHeight,
                width: this.$measureNode.clientWidth / CHAR_COUNT
            };
            if (size.width === 0 || size.height === 0) return null;
            return size;
        };
        this.$measureCharWidth = function(ch) {
            this.$main.innerHTML = lang.stringRepeat(ch, CHAR_COUNT);
            var rect = this.$main.getBoundingClientRect();
            return rect.width / CHAR_COUNT;
        };
        this.getCharacterWidth = function(ch) {
            var w = this.charSizes[ch];
            if (w === undefined) w = this.charSizes[ch] = this.$measureCharWidth(ch) / this.$characterSize.width;
            return w;
        };
        this.destroy = function() {
            clearInterval(this.$pollSizeChangesTimer);
            if (this.el && this.el.parentNode) this.el.parentNode.removeChild(this.el);
        };
    }).call(FontMetrics.prototype);
});
ace.define("ace/virtual_renderer", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/dom",
    "ace/config",
    "ace/lib/useragent",
    "ace/layer/gutter",
    "ace/layer/marker",
    "ace/layer/text",
    "ace/layer/cursor",
    "ace/scrollbar",
    "ace/scrollbar",
    "ace/renderloop",
    "ace/layer/font_metrics",
    "ace/lib/event_emitter"
], function(acequire, exports, module) {
    var oop = acequire("./lib/oop");
    var dom = acequire("./lib/dom");
    var config3 = acequire("./config");
    var useragent = acequire("./lib/useragent");
    var GutterLayer = acequire("./layer/gutter").Gutter;
    var MarkerLayer = acequire("./layer/marker").Marker;
    var TextLayer = acequire("./layer/text").Text;
    var CursorLayer = acequire("./layer/cursor").Cursor;
    var HScrollBar = acequire("./scrollbar").HScrollBar;
    var VScrollBar = acequire("./scrollbar").VScrollBar;
    var RenderLoop = acequire("./renderloop").RenderLoop;
    var FontMetrics = acequire("./layer/font_metrics").FontMetrics;
    var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
    var editorCss = ".ace_editor {\
position: relative;\
overflow: hidden;\
font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;\
direction: ltr;\
text-align: left;\
-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\
}\
.ace_scroller {\
position: absolute;\
overflow: hidden;\
top: 0;\
bottom: 0;\
background-color: inherit;\
-ms-user-select: none;\
-moz-user-select: none;\
-webkit-user-select: none;\
user-select: none;\
cursor: text;\
}\
.ace_content {\
position: absolute;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
min-width: 100%;\
}\
.ace_dragging .ace_scroller:before{\
position: absolute;\
top: 0;\
left: 0;\
right: 0;\
bottom: 0;\
content: '';\
background: rgba(250, 250, 250, 0.01);\
z-index: 1000;\
}\
.ace_dragging.ace_dark .ace_scroller:before{\
background: rgba(0, 0, 0, 0.01);\
}\
.ace_selecting, .ace_selecting * {\
cursor: text !important;\
}\
.ace_gutter {\
position: absolute;\
overflow : hidden;\
width: auto;\
top: 0;\
bottom: 0;\
left: 0;\
cursor: default;\
z-index: 4;\
-ms-user-select: none;\
-moz-user-select: none;\
-webkit-user-select: none;\
user-select: none;\
}\
.ace_gutter-active-line {\
position: absolute;\
left: 0;\
right: 0;\
}\
.ace_scroller.ace_scroll-left {\
box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\
}\
.ace_gutter-cell {\
padding-left: 19px;\
padding-right: 6px;\
background-repeat: no-repeat;\
}\
.ace_gutter-cell.ace_error {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\");\
background-repeat: no-repeat;\
background-position: 2px center;\
}\
.ace_gutter-cell.ace_warning {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\");\
background-position: 2px center;\
}\
.ace_gutter-cell.ace_info {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\");\
background-position: 2px center;\
}\
.ace_dark .ace_gutter-cell.ace_info {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\");\
}\
.ace_scrollbar {\
position: absolute;\
right: 0;\
bottom: 0;\
z-index: 6;\
}\
.ace_scrollbar-inner {\
position: absolute;\
cursor: text;\
left: 0;\
top: 0;\
}\
.ace_scrollbar-v{\
overflow-x: hidden;\
overflow-y: scroll;\
top: 0;\
}\
.ace_scrollbar-h {\
overflow-x: scroll;\
overflow-y: hidden;\
left: 0;\
}\
.ace_print-margin {\
position: absolute;\
height: 100%;\
}\
.ace_text-input {\
position: absolute;\
z-index: 0;\
width: 0.5em;\
height: 1em;\
opacity: 0;\
background: transparent;\
-moz-appearance: none;\
appearance: none;\
border: none;\
resize: none;\
outline: none;\
overflow: hidden;\
font: inherit;\
padding: 0 1px;\
margin: 0 -1px;\
text-indent: -1em;\
-ms-user-select: text;\
-moz-user-select: text;\
-webkit-user-select: text;\
user-select: text;\
white-space: pre!important;\
}\
.ace_text-input.ace_composition {\
background: inherit;\
color: inherit;\
z-index: 1000;\
opacity: 1;\
text-indent: 0;\
}\
.ace_layer {\
z-index: 1;\
position: absolute;\
overflow: hidden;\
word-wrap: normal;\
white-space: pre;\
height: 100%;\
width: 100%;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
pointer-events: none;\
}\
.ace_gutter-layer {\
position: relative;\
width: auto;\
text-align: right;\
pointer-events: auto;\
}\
.ace_text-layer {\
font: inherit !important;\
}\
.ace_cjk {\
display: inline-block;\
text-align: center;\
}\
.ace_cursor-layer {\
z-index: 4;\
}\
.ace_cursor {\
z-index: 4;\
position: absolute;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
border-left: 2px solid;\
transform: translatez(0);\
}\
.ace_multiselect .ace_cursor {\
border-left-width: 1px;\
}\
.ace_slim-cursors .ace_cursor {\
border-left-width: 1px;\
}\
.ace_overwrite-cursors .ace_cursor {\
border-left-width: 0;\
border-bottom: 1px solid;\
}\
.ace_hidden-cursors .ace_cursor {\
opacity: 0.2;\
}\
.ace_smooth-blinking .ace_cursor {\
-webkit-transition: opacity 0.18s;\
transition: opacity 0.18s;\
}\
.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\
position: absolute;\
z-index: 3;\
}\
.ace_marker-layer .ace_selection {\
position: absolute;\
z-index: 5;\
}\
.ace_marker-layer .ace_bracket {\
position: absolute;\
z-index: 6;\
}\
.ace_marker-layer .ace_active-line {\
position: absolute;\
z-index: 2;\
}\
.ace_marker-layer .ace_selected-word {\
position: absolute;\
z-index: 4;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
}\
.ace_line .ace_fold {\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
display: inline-block;\
height: 11px;\
margin-top: -2px;\
vertical-align: middle;\
background-image:\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\");\
background-repeat: no-repeat, repeat-x;\
background-position: center center, top left;\
color: transparent;\
border: 1px solid black;\
border-radius: 2px;\
cursor: pointer;\
pointer-events: auto;\
}\
.ace_dark .ace_fold {\
}\
.ace_fold:hover{\
background-image:\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\");\
}\
.ace_tooltip {\
background-color: #FFF;\
background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));\
background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\
border: 1px solid gray;\
border-radius: 1px;\
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\
color: black;\
max-width: 100%;\
padding: 3px 4px;\
position: fixed;\
z-index: 999999;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
cursor: default;\
white-space: pre;\
word-wrap: break-word;\
line-height: normal;\
font-style: normal;\
font-weight: normal;\
letter-spacing: normal;\
pointer-events: none;\
}\
.ace_folding-enabled > .ace_gutter-cell {\
padding-right: 13px;\
}\
.ace_fold-widget {\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
margin: 0 -12px 0 1px;\
display: none;\
width: 11px;\
vertical-align: top;\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\");\
background-repeat: no-repeat;\
background-position: center;\
border-radius: 3px;\
border: 1px solid transparent;\
cursor: pointer;\
}\
.ace_folding-enabled .ace_fold-widget {\
display: inline-block;   \
}\
.ace_fold-widget.ace_end {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\");\
}\
.ace_fold-widget.ace_closed {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\");\
}\
.ace_fold-widget:hover {\
border: 1px solid rgba(0, 0, 0, 0.3);\
background-color: rgba(255, 255, 255, 0.2);\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\
}\
.ace_fold-widget:active {\
border: 1px solid rgba(0, 0, 0, 0.4);\
background-color: rgba(0, 0, 0, 0.05);\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\
}\
.ace_dark .ace_fold-widget {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\");\
}\
.ace_dark .ace_fold-widget.ace_end {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\");\
}\
.ace_dark .ace_fold-widget.ace_closed {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\");\
}\
.ace_dark .ace_fold-widget:hover {\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\
background-color: rgba(255, 255, 255, 0.1);\
}\
.ace_dark .ace_fold-widget:active {\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\
}\
.ace_fold-widget.ace_invalid {\
background-color: #FFB4B4;\
border-color: #DE5555;\
}\
.ace_fade-fold-widgets .ace_fold-widget {\
-webkit-transition: opacity 0.4s ease 0.05s;\
transition: opacity 0.4s ease 0.05s;\
opacity: 0;\
}\
.ace_fade-fold-widgets:hover .ace_fold-widget {\
-webkit-transition: opacity 0.05s ease 0.05s;\
transition: opacity 0.05s ease 0.05s;\
opacity:1;\
}\
.ace_underline {\
text-decoration: underline;\
}\
.ace_bold {\
font-weight: bold;\
}\
.ace_nobold .ace_bold {\
font-weight: normal;\
}\
.ace_italic {\
font-style: italic;\
}\
.ace_error-marker {\
background-color: rgba(255, 0, 0,0.2);\
position: absolute;\
z-index: 9;\
}\
.ace_highlight-marker {\
background-color: rgba(255, 255, 0,0.2);\
position: absolute;\
z-index: 8;\
}\
.ace_br1 {border-top-left-radius    : 3px;}\
.ace_br2 {border-top-right-radius   : 3px;}\
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\
.ace_br4 {border-bottom-right-radius: 3px;}\
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\
.ace_br8 {border-bottom-left-radius : 3px;}\
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\
.ace_text-input-ios {\
position: absolute !important;\
top: -100000px !important;\
left: -100000px !important;\
}\
";
    dom.importCssString(editorCss, "ace_editor.css");
    var VirtualRenderer = function(container, theme) {
        var _self = this;
        this.container = container || dom.createElement("div");
        this.$keepTextAreaAtCursor = !useragent.isOldIE;
        dom.addCssClass(this.container, "ace_editor");
        this.setTheme(theme);
        this.$gutter = dom.createElement("div");
        this.$gutter.className = "ace_gutter";
        this.container.appendChild(this.$gutter);
        this.$gutter.setAttribute("aria-hidden", true);
        this.scroller = dom.createElement("div");
        this.scroller.className = "ace_scroller";
        this.container.appendChild(this.scroller);
        this.content = dom.createElement("div");
        this.content.className = "ace_content";
        this.scroller.appendChild(this.content);
        this.$gutterLayer = new GutterLayer(this.$gutter);
        this.$gutterLayer.on("changeGutterWidth", this.onGutterResize.bind(this));
        this.$markerBack = new MarkerLayer(this.content);
        var textLayer = this.$textLayer = new TextLayer(this.content);
        this.canvas = textLayer.element;
        this.$markerFront = new MarkerLayer(this.content);
        this.$cursorLayer = new CursorLayer(this.content);
        this.$horizScroll = false;
        this.$vScroll = false;
        this.scrollBar = this.scrollBarV = new VScrollBar(this.container, this);
        this.scrollBarH = new HScrollBar(this.container, this);
        this.scrollBarV.addEventListener("scroll", function(e) {
            if (!_self.$scrollAnimation) _self.session.setScrollTop(e.data - _self.scrollMargin.top);
        });
        this.scrollBarH.addEventListener("scroll", function(e) {
            if (!_self.$scrollAnimation) _self.session.setScrollLeft(e.data - _self.scrollMargin.left);
        });
        this.scrollTop = 0;
        this.scrollLeft = 0;
        this.cursorPos = {
            row: 0,
            column: 0
        };
        this.$fontMetrics = new FontMetrics(this.container);
        this.$textLayer.$setFontMetrics(this.$fontMetrics);
        this.$textLayer.addEventListener("changeCharacterSize", function(e) {
            _self.updateCharacterSize();
            _self.onResize(true, _self.gutterWidth, _self.$size.width, _self.$size.height);
            _self._signal("changeCharacterSize", e);
        });
        this.$size = {
            width: 0,
            height: 0,
            scrollerHeight: 0,
            scrollerWidth: 0,
            $dirty: true
        };
        this.layerConfig = {
            width: 1,
            padding: 0,
            firstRow: 0,
            firstRowScreen: 0,
            lastRow: 0,
            lineHeight: 0,
            characterWidth: 0,
            minHeight: 1,
            maxHeight: 1,
            offset: 0,
            height: 1,
            gutterOffset: 1
        };
        this.scrollMargin = {
            left: 0,
            right: 0,
            top: 0,
            bottom: 0,
            v: 0,
            h: 0
        };
        this.$loop = new RenderLoop(this.$renderChanges.bind(this), this.container.ownerDocument.defaultView);
        this.$loop.schedule(this.CHANGE_FULL);
        this.updateCharacterSize();
        this.setPadding(4);
        config3.resetOptions(this);
        config3._emit("renderer", this);
    };
    (function() {
        this.CHANGE_CURSOR = 1;
        this.CHANGE_MARKER = 2;
        this.CHANGE_GUTTER = 4;
        this.CHANGE_SCROLL = 8;
        this.CHANGE_LINES = 16;
        this.CHANGE_TEXT = 32;
        this.CHANGE_SIZE = 64;
        this.CHANGE_MARKER_BACK = 128;
        this.CHANGE_MARKER_FRONT = 256;
        this.CHANGE_FULL = 512;
        this.CHANGE_H_SCROLL = 1024;
        oop.implement(this, EventEmitter);
        this.updateCharacterSize = function() {
            if (this.$textLayer.allowBoldFonts != this.$allowBoldFonts) {
                this.$allowBoldFonts = this.$textLayer.allowBoldFonts;
                this.setStyle("ace_nobold", !this.$allowBoldFonts);
            }
            this.layerConfig.characterWidth = this.characterWidth = this.$textLayer.getCharacterWidth();
            this.layerConfig.lineHeight = this.lineHeight = this.$textLayer.getLineHeight();
            this.$updatePrintMargin();
        };
        this.setSession = function(session) {
            if (this.session) this.session.doc.off("changeNewLineMode", this.onChangeNewLineMode);
            this.session = session;
            if (session && this.scrollMargin.top && session.getScrollTop() <= 0) session.setScrollTop(-this.scrollMargin.top);
            this.$cursorLayer.setSession(session);
            this.$markerBack.setSession(session);
            this.$markerFront.setSession(session);
            this.$gutterLayer.setSession(session);
            this.$textLayer.setSession(session);
            if (!session) return;
            this.$loop.schedule(this.CHANGE_FULL);
            this.session.$setFontMetrics(this.$fontMetrics);
            this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;
            this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this);
            this.onChangeNewLineMode();
            this.session.doc.on("changeNewLineMode", this.onChangeNewLineMode);
        };
        this.updateLines = function(firstRow, lastRow, force) {
            if (lastRow === undefined) lastRow = Infinity;
            if (!this.$changedLines) this.$changedLines = {
                firstRow: firstRow,
                lastRow: lastRow
            };
            else {
                if (this.$changedLines.firstRow > firstRow) this.$changedLines.firstRow = firstRow;
                if (this.$changedLines.lastRow < lastRow) this.$changedLines.lastRow = lastRow;
            }
            if (this.$changedLines.lastRow < this.layerConfig.firstRow) {
                if (force) this.$changedLines.lastRow = this.layerConfig.lastRow;
                else return;
            }
            if (this.$changedLines.firstRow > this.layerConfig.lastRow) return;
            this.$loop.schedule(this.CHANGE_LINES);
        };
        this.onChangeNewLineMode = function() {
            this.$loop.schedule(this.CHANGE_TEXT);
            this.$textLayer.$updateEolChar();
            this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR);
        };
        this.onChangeTabSize = function() {
            this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER);
            this.$textLayer.onChangeTabSize();
        };
        this.updateText = function() {
            this.$loop.schedule(this.CHANGE_TEXT);
        };
        this.updateFull = function(force) {
            if (force) this.$renderChanges(this.CHANGE_FULL, true);
            else this.$loop.schedule(this.CHANGE_FULL);
        };
        this.updateFontSize = function() {
            this.$textLayer.checkForSizeChanges();
        };
        this.$changes = 0;
        this.$updateSizeAsync = function() {
            if (this.$loop.pending) this.$size.$dirty = true;
            else this.onResize();
        };
        this.onResize = function(force, gutterWidth, width, height) {
            if (this.resizing > 2) return;
            else if (this.resizing > 0) this.resizing++;
            else this.resizing = force ? 1 : 0;
            var el = this.container;
            if (!height) height = el.clientHeight || el.scrollHeight;
            if (!width) width = el.clientWidth || el.scrollWidth;
            var changes = this.$updateCachedSize(force, gutterWidth, width, height);
            if (!this.$size.scrollerHeight || !width && !height) return this.resizing = 0;
            if (force) this.$gutterLayer.$padding = null;
            if (force) this.$renderChanges(changes | this.$changes, true);
            else this.$loop.schedule(changes | this.$changes);
            if (this.resizing) this.resizing = 0;
            this.scrollBarV.scrollLeft = this.scrollBarV.scrollTop = null;
        };
        this.$updateCachedSize = function(force, gutterWidth, width, height) {
            height -= this.$extraHeight || 0;
            var changes = 0;
            var size = this.$size;
            var oldSize = {
                width: size.width,
                height: size.height,
                scrollerHeight: size.scrollerHeight,
                scrollerWidth: size.scrollerWidth
            };
            if (height && (force || size.height != height)) {
                size.height = height;
                changes |= this.CHANGE_SIZE;
                size.scrollerHeight = size.height;
                if (this.$horizScroll) size.scrollerHeight -= this.scrollBarH.getHeight();
                this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + "px";
                changes = changes | this.CHANGE_SCROLL;
            }
            if (width && (force || size.width != width)) {
                changes |= this.CHANGE_SIZE;
                size.width = width;
                if (gutterWidth == null) gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;
                this.gutterWidth = gutterWidth;
                this.scrollBarH.element.style.left = this.scroller.style.left = gutterWidth + "px";
                size.scrollerWidth = Math.max(0, width - gutterWidth - this.scrollBarV.getWidth());
                this.scrollBarH.element.style.right = this.scroller.style.right = this.scrollBarV.getWidth() + "px";
                this.scroller.style.bottom = this.scrollBarH.getHeight() + "px";
                if (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || force) changes |= this.CHANGE_FULL;
            }
            size.$dirty = !width || !height;
            if (changes) this._signal("resize", oldSize);
            return changes;
        };
        this.onGutterResize = function() {
            var gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;
            if (gutterWidth != this.gutterWidth) this.$changes |= this.$updateCachedSize(true, gutterWidth, this.$size.width, this.$size.height);
            if (this.session.getUseWrapMode() && this.adjustWrapLimit()) this.$loop.schedule(this.CHANGE_FULL);
            else if (this.$size.$dirty) this.$loop.schedule(this.CHANGE_FULL);
            else {
                this.$computeLayerConfig();
                this.$loop.schedule(this.CHANGE_MARKER);
            }
        };
        this.adjustWrapLimit = function() {
            var availableWidth = this.$size.scrollerWidth - this.$padding * 2;
            var limit = Math.floor(availableWidth / this.characterWidth);
            return this.session.adjustWrapLimit(limit, this.$showPrintMargin && this.$printMarginColumn);
        };
        this.setAnimatedScroll = function(shouldAnimate) {
            this.setOption("animatedScroll", shouldAnimate);
        };
        this.getAnimatedScroll = function() {
            return this.$animatedScroll;
        };
        this.setShowInvisibles = function(showInvisibles) {
            this.setOption("showInvisibles", showInvisibles);
            this.session.$bidiHandler.setShowInvisibles(showInvisibles);
        };
        this.getShowInvisibles = function() {
            return this.getOption("showInvisibles");
        };
        this.getDisplayIndentGuides = function() {
            return this.getOption("displayIndentGuides");
        };
        this.setDisplayIndentGuides = function(display) {
            this.setOption("displayIndentGuides", display);
        };
        this.setShowPrintMargin = function(showPrintMargin) {
            this.setOption("showPrintMargin", showPrintMargin);
        };
        this.getShowPrintMargin = function() {
            return this.getOption("showPrintMargin");
        };
        this.setPrintMarginColumn = function(showPrintMargin) {
            this.setOption("printMarginColumn", showPrintMargin);
        };
        this.getPrintMarginColumn = function() {
            return this.getOption("printMarginColumn");
        };
        this.getShowGutter = function() {
            return this.getOption("showGutter");
        };
        this.setShowGutter = function(show) {
            return this.setOption("showGutter", show);
        };
        this.getFadeFoldWidgets = function() {
            return this.getOption("fadeFoldWidgets");
        };
        this.setFadeFoldWidgets = function(show) {
            this.setOption("fadeFoldWidgets", show);
        };
        this.setHighlightGutterLine = function(shouldHighlight) {
            this.setOption("highlightGutterLine", shouldHighlight);
        };
        this.getHighlightGutterLine = function() {
            return this.getOption("highlightGutterLine");
        };
        this.$updateGutterLineHighlight = function() {
            var pos = this.$cursorLayer.$pixelPos;
            var height = this.layerConfig.lineHeight;
            if (this.session.getUseWrapMode()) {
                var cursor = this.session.selection.getCursor();
                cursor.column = 0;
                pos = this.$cursorLayer.getPixelPosition(cursor, true);
                height *= this.session.getRowLength(cursor.row);
            }
            this.$gutterLineHighlight.style.top = pos.top - this.layerConfig.offset + "px";
            this.$gutterLineHighlight.style.height = height + "px";
        };
        this.$updatePrintMargin = function() {
            if (!this.$showPrintMargin && !this.$printMarginEl) return;
            if (!this.$printMarginEl) {
                var containerEl = dom.createElement("div");
                containerEl.className = "ace_layer ace_print-margin-layer";
                this.$printMarginEl = dom.createElement("div");
                this.$printMarginEl.className = "ace_print-margin";
                containerEl.appendChild(this.$printMarginEl);
                this.content.insertBefore(containerEl, this.content.firstChild);
            }
            var style = this.$printMarginEl.style;
            style.left = this.characterWidth * this.$printMarginColumn + this.$padding + "px";
            style.visibility = this.$showPrintMargin ? "visible" : "hidden";
            if (this.session && this.session.$wrap == -1) this.adjustWrapLimit();
        };
        this.getContainerElement = function() {
            return this.container;
        };
        this.getMouseEventTarget = function() {
            return this.scroller;
        };
        this.getTextAreaContainer = function() {
            return this.container;
        };
        this.$moveTextAreaToCursor = function() {
            if (!this.$keepTextAreaAtCursor) return;
            var config4 = this.layerConfig;
            var posTop = this.$cursorLayer.$pixelPos.top;
            var posLeft = this.$cursorLayer.$pixelPos.left;
            posTop -= config4.offset;
            var style = this.textarea.style;
            var h = this.lineHeight;
            if (posTop < 0 || posTop > config4.height - h) {
                style.top = style.left = "0";
                return;
            }
            var w = this.characterWidth;
            if (this.$composition) {
                var val = this.textarea.value.replace(/^\x01+/, "");
                w *= this.session.$getStringScreenWidth(val)[0] + 2;
                h += 2;
            }
            posLeft -= this.scrollLeft;
            if (posLeft > this.$size.scrollerWidth - w) posLeft = this.$size.scrollerWidth - w;
            posLeft += this.gutterWidth;
            style.height = h + "px";
            style.width = w + "px";
            style.left = Math.min(posLeft, this.$size.scrollerWidth - w) + "px";
            style.top = Math.min(posTop, this.$size.height - h) + "px";
        };
        this.getFirstVisibleRow = function() {
            return this.layerConfig.firstRow;
        };
        this.getFirstFullyVisibleRow = function() {
            return this.layerConfig.firstRow + (this.layerConfig.offset === 0 ? 0 : 1);
        };
        this.getLastFullyVisibleRow = function() {
            var config4 = this.layerConfig;
            var lastRow = config4.lastRow;
            var top = this.session.documentToScreenRow(lastRow, 0) * config4.lineHeight;
            if (top - this.session.getScrollTop() > config4.height - config4.lineHeight) return lastRow - 1;
            return lastRow;
        };
        this.getLastVisibleRow = function() {
            return this.layerConfig.lastRow;
        };
        this.$padding = null;
        this.setPadding = function(padding) {
            this.$padding = padding;
            this.$textLayer.setPadding(padding);
            this.$cursorLayer.setPadding(padding);
            this.$markerFront.setPadding(padding);
            this.$markerBack.setPadding(padding);
            this.$loop.schedule(this.CHANGE_FULL);
            this.$updatePrintMargin();
        };
        this.setScrollMargin = function(top, bottom, left, right) {
            var sm = this.scrollMargin;
            sm.top = top | 0;
            sm.bottom = bottom | 0;
            sm.right = right | 0;
            sm.left = left | 0;
            sm.v = sm.top + sm.bottom;
            sm.h = sm.left + sm.right;
            if (sm.top && this.scrollTop <= 0 && this.session) this.session.setScrollTop(-sm.top);
            this.updateFull();
        };
        this.getHScrollBarAlwaysVisible = function() {
            return this.$hScrollBarAlwaysVisible;
        };
        this.setHScrollBarAlwaysVisible = function(alwaysVisible) {
            this.setOption("hScrollBarAlwaysVisible", alwaysVisible);
        };
        this.getVScrollBarAlwaysVisible = function() {
            return this.$vScrollBarAlwaysVisible;
        };
        this.setVScrollBarAlwaysVisible = function(alwaysVisible) {
            this.setOption("vScrollBarAlwaysVisible", alwaysVisible);
        };
        this.$updateScrollBarV = function() {
            var scrollHeight = this.layerConfig.maxHeight;
            var scrollerHeight = this.$size.scrollerHeight;
            if (!this.$maxLines && this.$scrollPastEnd) {
                scrollHeight -= (scrollerHeight - this.lineHeight) * this.$scrollPastEnd;
                if (this.scrollTop > scrollHeight - scrollerHeight) {
                    scrollHeight = this.scrollTop + scrollerHeight;
                    this.scrollBarV.scrollTop = null;
                }
            }
            this.scrollBarV.setScrollHeight(scrollHeight + this.scrollMargin.v);
            this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);
        };
        this.$updateScrollBarH = function() {
            this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h);
            this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);
        };
        this.$frozen = false;
        this.freeze = function() {
            this.$frozen = true;
        };
        this.unfreeze = function() {
            this.$frozen = false;
        };
        this.$renderChanges = function(changes, force) {
            if (this.$changes) {
                changes |= this.$changes;
                this.$changes = 0;
            }
            if (!this.session || !this.container.offsetWidth || this.$frozen || !changes && !force) {
                this.$changes |= changes;
                return;
            }
            if (this.$size.$dirty) {
                this.$changes |= changes;
                return this.onResize(true);
            }
            if (!this.lineHeight) this.$textLayer.checkForSizeChanges();
            this._signal("beforeRender");
            if (this.session && this.session.$bidiHandler) this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);
            var config4 = this.layerConfig;
            if (changes & this.CHANGE_FULL || changes & this.CHANGE_SIZE || changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES || changes & this.CHANGE_SCROLL || changes & this.CHANGE_H_SCROLL) {
                changes |= this.$computeLayerConfig();
                if (config4.firstRow != this.layerConfig.firstRow && config4.firstRowScreen == this.layerConfig.firstRowScreen) {
                    var st = this.scrollTop + (config4.firstRow - this.layerConfig.firstRow) * this.lineHeight;
                    if (st > 0) {
                        this.scrollTop = st;
                        changes = changes | this.CHANGE_SCROLL;
                        changes |= this.$computeLayerConfig();
                    }
                }
                config4 = this.layerConfig;
                this.$updateScrollBarV();
                if (changes & this.CHANGE_H_SCROLL) this.$updateScrollBarH();
                this.$gutterLayer.element.style.marginTop = -config4.offset + "px";
                this.content.style.marginTop = -config4.offset + "px";
                this.content.style.width = config4.width + 2 * this.$padding + "px";
                this.content.style.height = config4.minHeight + "px";
            }
            if (changes & this.CHANGE_H_SCROLL) {
                this.content.style.marginLeft = -this.scrollLeft + "px";
                this.scroller.className = this.scrollLeft <= 0 ? "ace_scroller" : "ace_scroller ace_scroll-left";
            }
            if (changes & this.CHANGE_FULL) {
                this.$textLayer.update(config4);
                if (this.$showGutter) this.$gutterLayer.update(config4);
                this.$markerBack.update(config4);
                this.$markerFront.update(config4);
                this.$cursorLayer.update(config4);
                this.$moveTextAreaToCursor();
                this.$highlightGutterLine && this.$updateGutterLineHighlight();
                this._signal("afterRender");
                return;
            }
            if (changes & this.CHANGE_SCROLL) {
                if (changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES) this.$textLayer.update(config4);
                else this.$textLayer.scrollLines(config4);
                if (this.$showGutter) this.$gutterLayer.update(config4);
                this.$markerBack.update(config4);
                this.$markerFront.update(config4);
                this.$cursorLayer.update(config4);
                this.$highlightGutterLine && this.$updateGutterLineHighlight();
                this.$moveTextAreaToCursor();
                this._signal("afterRender");
                return;
            }
            if (changes & this.CHANGE_TEXT) {
                this.$textLayer.update(config4);
                if (this.$showGutter) this.$gutterLayer.update(config4);
            } else if (changes & this.CHANGE_LINES) {
                if (this.$updateLines() || changes & this.CHANGE_GUTTER && this.$showGutter) this.$gutterLayer.update(config4);
            } else if (changes & this.CHANGE_TEXT || changes & this.CHANGE_GUTTER) {
                if (this.$showGutter) this.$gutterLayer.update(config4);
            }
            if (changes & this.CHANGE_CURSOR) {
                this.$cursorLayer.update(config4);
                this.$moveTextAreaToCursor();
                this.$highlightGutterLine && this.$updateGutterLineHighlight();
            }
            if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT)) this.$markerFront.update(config4);
            if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK)) this.$markerBack.update(config4);
            this._signal("afterRender");
        };
        this.$autosize = function() {
            var height = this.session.getScreenLength() * this.lineHeight;
            var maxHeight = this.$maxLines * this.lineHeight;
            var desiredHeight = Math.min(maxHeight, Math.max((this.$minLines || 1) * this.lineHeight, height)) + this.scrollMargin.v + (this.$extraHeight || 0);
            if (this.$horizScroll) desiredHeight += this.scrollBarH.getHeight();
            if (this.$maxPixelHeight && desiredHeight > this.$maxPixelHeight) desiredHeight = this.$maxPixelHeight;
            var vScroll = height > maxHeight;
            if (desiredHeight != this.desiredHeight || this.$size.height != this.desiredHeight || vScroll != this.$vScroll) {
                if (vScroll != this.$vScroll) {
                    this.$vScroll = vScroll;
                    this.scrollBarV.setVisible(vScroll);
                }
                var w = this.container.clientWidth;
                this.container.style.height = desiredHeight + "px";
                this.$updateCachedSize(true, this.$gutterWidth, w, desiredHeight);
                this.desiredHeight = desiredHeight;
                this._signal("autosize");
            }
        };
        this.$computeLayerConfig = function() {
            var session = this.session;
            var size = this.$size;
            var hideScrollbars = size.height <= 2 * this.lineHeight;
            var screenLines = this.session.getScreenLength();
            var maxHeight = screenLines * this.lineHeight;
            var longestLine = this.$getLongestLine();
            var horizScroll = !hideScrollbars && (this.$hScrollBarAlwaysVisible || size.scrollerWidth - longestLine - 2 * this.$padding < 0);
            var hScrollChanged = this.$horizScroll !== horizScroll;
            if (hScrollChanged) {
                this.$horizScroll = horizScroll;
                this.scrollBarH.setVisible(horizScroll);
            }
            var vScrollBefore = this.$vScroll; // autosize can change vscroll value in which case we need to update longestLine
            if (this.$maxLines && this.lineHeight > 1) this.$autosize();
            var offset = this.scrollTop % this.lineHeight;
            var minHeight = size.scrollerHeight + this.lineHeight;
            var scrollPastEnd = !this.$maxLines && this.$scrollPastEnd ? (size.scrollerHeight - this.lineHeight) * this.$scrollPastEnd : 0;
            maxHeight += scrollPastEnd;
            var sm = this.scrollMargin;
            this.session.setScrollTop(Math.max(-sm.top, Math.min(this.scrollTop, maxHeight - size.scrollerHeight + sm.bottom)));
            this.session.setScrollLeft(Math.max(-sm.left, Math.min(this.scrollLeft, longestLine + 2 * this.$padding - size.scrollerWidth + sm.right)));
            var vScroll = !hideScrollbars && (this.$vScrollBarAlwaysVisible || size.scrollerHeight - maxHeight + scrollPastEnd < 0 || this.scrollTop > sm.top);
            var vScrollChanged = vScrollBefore !== vScroll;
            if (vScrollChanged) {
                this.$vScroll = vScroll;
                this.scrollBarV.setVisible(vScroll);
            }
            var lineCount = Math.ceil(minHeight / this.lineHeight) - 1;
            var firstRow = Math.max(0, Math.round((this.scrollTop - offset) / this.lineHeight));
            var lastRow = firstRow + lineCount;
            var firstRowScreen, firstRowHeight;
            var lineHeight = this.lineHeight;
            firstRow = session.screenToDocumentRow(firstRow, 0);
            var foldLine = session.getFoldLine(firstRow);
            if (foldLine) firstRow = foldLine.start.row;
            firstRowScreen = session.documentToScreenRow(firstRow, 0);
            firstRowHeight = session.getRowLength(firstRow) * lineHeight;
            lastRow = Math.min(session.screenToDocumentRow(lastRow, 0), session.getLength() - 1);
            minHeight = size.scrollerHeight + session.getRowLength(lastRow) * lineHeight + firstRowHeight;
            offset = this.scrollTop - firstRowScreen * lineHeight;
            var changes = 0;
            if (this.layerConfig.width != longestLine) changes = this.CHANGE_H_SCROLL;
            if (hScrollChanged || vScrollChanged) {
                changes = this.$updateCachedSize(true, this.gutterWidth, size.width, size.height);
                this._signal("scrollbarVisibilityChanged");
                if (vScrollChanged) longestLine = this.$getLongestLine();
            }
            this.layerConfig = {
                width: longestLine,
                padding: this.$padding,
                firstRow: firstRow,
                firstRowScreen: firstRowScreen,
                lastRow: lastRow,
                lineHeight: lineHeight,
                characterWidth: this.characterWidth,
                minHeight: minHeight,
                maxHeight: maxHeight,
                offset: offset,
                gutterOffset: lineHeight ? Math.max(0, Math.ceil((offset + size.height - size.scrollerHeight) / lineHeight)) : 0,
                height: this.$size.scrollerHeight
            };
            return changes;
        };
        this.$updateLines = function() {
            if (!this.$changedLines) return;
            var firstRow = this.$changedLines.firstRow;
            var lastRow = this.$changedLines.lastRow;
            this.$changedLines = null;
            var layerConfig = this.layerConfig;
            if (firstRow > layerConfig.lastRow + 1) return;
            if (lastRow < layerConfig.firstRow) return;
            if (lastRow === Infinity) {
                if (this.$showGutter) this.$gutterLayer.update(layerConfig);
                this.$textLayer.update(layerConfig);
                return;
            }
            this.$textLayer.updateLines(layerConfig, firstRow, lastRow);
            return true;
        };
        this.$getLongestLine = function() {
            var charCount = this.session.getScreenWidth();
            if (this.showInvisibles && !this.session.$useWrapMode) charCount += 1;
            return Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(charCount * this.characterWidth));
        };
        this.updateFrontMarkers = function() {
            this.$markerFront.setMarkers(this.session.getMarkers(true));
            this.$loop.schedule(this.CHANGE_MARKER_FRONT);
        };
        this.updateBackMarkers = function() {
            this.$markerBack.setMarkers(this.session.getMarkers());
            this.$loop.schedule(this.CHANGE_MARKER_BACK);
        };
        this.addGutterDecoration = function(row, className) {
            this.$gutterLayer.addGutterDecoration(row, className);
        };
        this.removeGutterDecoration = function(row, className) {
            this.$gutterLayer.removeGutterDecoration(row, className);
        };
        this.updateBreakpoints = function(rows) {
            this.$loop.schedule(this.CHANGE_GUTTER);
        };
        this.setAnnotations = function(annotations) {
            this.$gutterLayer.setAnnotations(annotations);
            this.$loop.schedule(this.CHANGE_GUTTER);
        };
        this.updateCursor = function() {
            this.$loop.schedule(this.CHANGE_CURSOR);
        };
        this.hideCursor = function() {
            this.$cursorLayer.hideCursor();
        };
        this.showCursor = function() {
            this.$cursorLayer.showCursor();
        };
        this.scrollSelectionIntoView = function(anchor, lead, offset) {
            this.scrollCursorIntoView(anchor, offset);
            this.scrollCursorIntoView(lead, offset);
        };
        this.scrollCursorIntoView = function(cursor, offset, $viewMargin) {
            if (this.$size.scrollerHeight === 0) return;
            var pos = this.$cursorLayer.getPixelPosition(cursor);
            var left = pos.left;
            var top = pos.top;
            var topMargin = $viewMargin && $viewMargin.top || 0;
            var bottomMargin = $viewMargin && $viewMargin.bottom || 0;
            var scrollTop = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;
            if (scrollTop + topMargin > top) {
                if (offset && scrollTop + topMargin > top + this.lineHeight) top -= offset * this.$size.scrollerHeight;
                if (top === 0) top = -this.scrollMargin.top;
                this.session.setScrollTop(top);
            } else if (scrollTop + this.$size.scrollerHeight - bottomMargin < top + this.lineHeight) {
                if (offset && scrollTop + this.$size.scrollerHeight - bottomMargin < top - this.lineHeight) top += offset * this.$size.scrollerHeight;
                this.session.setScrollTop(top + this.lineHeight - this.$size.scrollerHeight);
            }
            var scrollLeft = this.scrollLeft;
            if (scrollLeft > left) {
                if (left < this.$padding + 2 * this.layerConfig.characterWidth) left = -this.scrollMargin.left;
                this.session.setScrollLeft(left);
            } else if (scrollLeft + this.$size.scrollerWidth < left + this.characterWidth) this.session.setScrollLeft(Math.round(left + this.characterWidth - this.$size.scrollerWidth));
            else if (scrollLeft <= this.$padding && left - scrollLeft < this.characterWidth) this.session.setScrollLeft(0);
        };
        this.getScrollTop = function() {
            return this.session.getScrollTop();
        };
        this.getScrollLeft = function() {
            return this.session.getScrollLeft();
        };
        this.getScrollTopRow = function() {
            return this.scrollTop / this.lineHeight;
        };
        this.getScrollBottomRow = function() {
            return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);
        };
        this.scrollToRow = function(row) {
            this.session.setScrollTop(row * this.lineHeight);
        };
        this.alignCursor = function(cursor, alignment) {
            if (typeof cursor == "number") cursor = {
                row: cursor,
                column: 0
            };
            var pos = this.$cursorLayer.getPixelPosition(cursor);
            var h = this.$size.scrollerHeight - this.lineHeight;
            var offset = pos.top - h * (alignment || 0);
            this.session.setScrollTop(offset);
            return offset;
        };
        this.STEPS = 8;
        this.$calcSteps = function(fromValue, toValue) {
            var i = 0;
            var l = this.STEPS;
            var steps = [];
            var func = function(t, x_min, dx) {
                return dx * (Math.pow(t - 1, 3) + 1) + x_min;
            };
            for(i = 0; i < l; ++i)steps.push(func(i / this.STEPS, fromValue, toValue - fromValue));
            return steps;
        };
        this.scrollToLine = function(line, center, animate, callback) {
            var pos = this.$cursorLayer.getPixelPosition({
                row: line,
                column: 0
            });
            var offset = pos.top;
            if (center) offset -= this.$size.scrollerHeight / 2;
            var initialScroll = this.scrollTop;
            this.session.setScrollTop(offset);
            if (animate !== false) this.animateScrolling(initialScroll, callback);
        };
        this.animateScrolling = function(fromValue, callback) {
            var toValue = this.scrollTop;
            if (!this.$animatedScroll) return;
            var _self = this;
            if (fromValue == toValue) return;
            if (this.$scrollAnimation) {
                var oldSteps = this.$scrollAnimation.steps;
                if (oldSteps.length) {
                    fromValue = oldSteps[0];
                    if (fromValue == toValue) return;
                }
            }
            var steps = _self.$calcSteps(fromValue, toValue);
            this.$scrollAnimation = {
                from: fromValue,
                to: toValue,
                steps: steps
            };
            clearInterval(this.$timer);
            _self.session.setScrollTop(steps.shift());
            _self.session.$scrollTop = toValue;
            this.$timer = setInterval(function() {
                if (steps.length) {
                    _self.session.setScrollTop(steps.shift());
                    _self.session.$scrollTop = toValue;
                } else if (toValue != null) {
                    _self.session.$scrollTop = -1;
                    _self.session.setScrollTop(toValue);
                    toValue = null;
                } else {
                    _self.$timer = clearInterval(_self.$timer);
                    _self.$scrollAnimation = null;
                    callback && callback();
                }
            }, 10);
        };
        this.scrollToY = function(scrollTop) {
            if (this.scrollTop !== scrollTop) {
                this.$loop.schedule(this.CHANGE_SCROLL);
                this.scrollTop = scrollTop;
            }
        };
        this.scrollToX = function(scrollLeft) {
            if (this.scrollLeft !== scrollLeft) this.scrollLeft = scrollLeft;
            this.$loop.schedule(this.CHANGE_H_SCROLL);
        };
        this.scrollTo = function(x, y) {
            this.session.setScrollTop(y);
            this.session.setScrollLeft(y);
        };
        this.scrollBy = function(deltaX, deltaY) {
            deltaY && this.session.setScrollTop(this.session.getScrollTop() + deltaY);
            deltaX && this.session.setScrollLeft(this.session.getScrollLeft() + deltaX);
        };
        this.isScrollableBy = function(deltaX, deltaY) {
            if (deltaY < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top) return true;
            if (deltaY > 0 && this.session.getScrollTop() + this.$size.scrollerHeight - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom) return true;
            if (deltaX < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left) return true;
            if (deltaX > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth - this.layerConfig.width < -1 + this.scrollMargin.right) return true;
        };
        this.pixelToScreenCoordinates = function(x, y) {
            var canvasPos = this.scroller.getBoundingClientRect();
            var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;
            var offset = offsetX / this.characterWidth;
            var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);
            var col = Math.round(offset);
            return {
                row: row,
                column: col,
                side: offset - col > 0 ? 1 : -1,
                offsetX: offsetX
            };
        };
        this.screenToTextCoordinates = function(x, y) {
            var canvasPos = this.scroller.getBoundingClientRect();
            var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;
            var col = Math.round(offsetX / this.characterWidth);
            var row = (y + this.scrollTop - canvasPos.top) / this.lineHeight;
            return this.session.screenToDocumentPosition(row, Math.max(col, 0), offsetX);
        };
        this.textToScreenCoordinates = function(row, column) {
            var canvasPos = this.scroller.getBoundingClientRect();
            var pos = this.session.documentToScreenPosition(row, column);
            var x = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, row) ? this.session.$bidiHandler.getPosLeft(pos.column) : Math.round(pos.column * this.characterWidth));
            var y = pos.row * this.lineHeight;
            return {
                pageX: canvasPos.left + x - this.scrollLeft,
                pageY: canvasPos.top + y - this.scrollTop
            };
        };
        this.visualizeFocus = function() {
            dom.addCssClass(this.container, "ace_focus");
        };
        this.visualizeBlur = function() {
            dom.removeCssClass(this.container, "ace_focus");
        };
        this.showComposition = function(position) {
            if (!this.$composition) this.$composition = {
                keepTextAreaAtCursor: this.$keepTextAreaAtCursor,
                cssText: this.textarea.style.cssText
            };
            this.$keepTextAreaAtCursor = true;
            dom.addCssClass(this.textarea, "ace_composition");
            this.textarea.style.cssText = "";
            this.$moveTextAreaToCursor();
        };
        this.setCompositionText = function(text) {
            this.$moveTextAreaToCursor();
        };
        this.hideComposition = function() {
            if (!this.$composition) return;
            dom.removeCssClass(this.textarea, "ace_composition");
            this.$keepTextAreaAtCursor = this.$composition.keepTextAreaAtCursor;
            this.textarea.style.cssText = this.$composition.cssText;
            this.$composition = null;
        };
        this.setTheme = function(theme, cb) {
            var _self = this;
            this.$themeId = theme;
            _self._dispatchEvent('themeChange', {
                theme: theme
            });
            if (!theme || typeof theme == "string") {
                var moduleName = theme || this.$options.theme.initialValue;
                config3.loadModule([
                    "theme",
                    moduleName
                ], afterLoad);
            } else afterLoad(theme);
            function afterLoad(module1) {
                if (_self.$themeId != theme) return cb && cb();
                if (!module1 || !module1.cssClass) throw new Error("couldn't load module " + theme + " or it didn't call define");
                dom.importCssString(module1.cssText, module1.cssClass, _self.container.ownerDocument);
                if (_self.theme) dom.removeCssClass(_self.container, _self.theme.cssClass);
                var padding = "padding" in module1 ? module1.padding : "padding" in (_self.theme || {
                }) ? 4 : _self.$padding;
                if (_self.$padding && padding != _self.$padding) _self.setPadding(padding);
                _self.$theme = module1.cssClass;
                _self.theme = module1;
                dom.addCssClass(_self.container, module1.cssClass);
                dom.setCssClass(_self.container, "ace_dark", module1.isDark);
                if (_self.$size) {
                    _self.$size.width = 0;
                    _self.$updateSizeAsync();
                }
                _self._dispatchEvent('themeLoaded', {
                    theme: module1
                });
                cb && cb();
            }
        };
        this.getTheme = function() {
            return this.$themeId;
        };
        this.setStyle = function(style, include) {
            dom.setCssClass(this.container, style, include !== false);
        };
        this.unsetStyle = function(style) {
            dom.removeCssClass(this.container, style);
        };
        this.setCursorStyle = function(style) {
            if (this.scroller.style.cursor != style) this.scroller.style.cursor = style;
        };
        this.setMouseCursor = function(cursorStyle) {
            this.scroller.style.cursor = cursorStyle;
        };
        this.destroy = function() {
            this.$textLayer.destroy();
            this.$cursorLayer.destroy();
        };
    }).call(VirtualRenderer.prototype);
    config3.defineOptions(VirtualRenderer.prototype, "renderer", {
        animatedScroll: {
            initialValue: false
        },
        showInvisibles: {
            set: function(value) {
                if (this.$textLayer.setShowInvisibles(value)) this.$loop.schedule(this.CHANGE_TEXT);
            },
            initialValue: false
        },
        showPrintMargin: {
            set: function() {
                this.$updatePrintMargin();
            },
            initialValue: true
        },
        printMarginColumn: {
            set: function() {
                this.$updatePrintMargin();
            },
            initialValue: 80
        },
        printMargin: {
            set: function(val) {
                if (typeof val == "number") this.$printMarginColumn = val;
                this.$showPrintMargin = !!val;
                this.$updatePrintMargin();
            },
            get: function() {
                return this.$showPrintMargin && this.$printMarginColumn;
            }
        },
        showGutter: {
            set: function(show) {
                this.$gutter.style.display = show ? "block" : "none";
                this.$loop.schedule(this.CHANGE_FULL);
                this.onGutterResize();
            },
            initialValue: true
        },
        fadeFoldWidgets: {
            set: function(show) {
                dom.setCssClass(this.$gutter, "ace_fade-fold-widgets", show);
            },
            initialValue: false
        },
        showFoldWidgets: {
            set: function(show) {
                this.$gutterLayer.setShowFoldWidgets(show);
            },
            initialValue: true
        },
        showLineNumbers: {
            set: function(show) {
                this.$gutterLayer.setShowLineNumbers(show);
                this.$loop.schedule(this.CHANGE_GUTTER);
            },
            initialValue: true
        },
        displayIndentGuides: {
            set: function(show) {
                if (this.$textLayer.setDisplayIndentGuides(show)) this.$loop.schedule(this.CHANGE_TEXT);
            },
            initialValue: true
        },
        highlightGutterLine: {
            set: function(shouldHighlight) {
                if (!this.$gutterLineHighlight) {
                    this.$gutterLineHighlight = dom.createElement("div");
                    this.$gutterLineHighlight.className = "ace_gutter-active-line";
                    this.$gutter.appendChild(this.$gutterLineHighlight);
                    return;
                }
                this.$gutterLineHighlight.style.display = shouldHighlight ? "" : "none";
                if (this.$cursorLayer.$pixelPos) this.$updateGutterLineHighlight();
            },
            initialValue: false,
            value: true
        },
        hScrollBarAlwaysVisible: {
            set: function(val) {
                if (!this.$hScrollBarAlwaysVisible || !this.$horizScroll) this.$loop.schedule(this.CHANGE_SCROLL);
            },
            initialValue: false
        },
        vScrollBarAlwaysVisible: {
            set: function(val) {
                if (!this.$vScrollBarAlwaysVisible || !this.$vScroll) this.$loop.schedule(this.CHANGE_SCROLL);
            },
            initialValue: false
        },
        fontSize: {
            set: function(size) {
                if (typeof size == "number") size = size + "px";
                this.container.style.fontSize = size;
                this.updateFontSize();
            },
            initialValue: 12
        },
        fontFamily: {
            set: function(name) {
                this.container.style.fontFamily = name;
                this.updateFontSize();
            }
        },
        maxLines: {
            set: function(val) {
                this.updateFull();
            }
        },
        minLines: {
            set: function(val) {
                this.updateFull();
            }
        },
        maxPixelHeight: {
            set: function(val) {
                this.updateFull();
            },
            initialValue: 0
        },
        scrollPastEnd: {
            set: function(val) {
                val = +val || 0;
                if (this.$scrollPastEnd == val) return;
                this.$scrollPastEnd = val;
                this.$loop.schedule(this.CHANGE_SCROLL);
            },
            initialValue: 0,
            handlesSet: true
        },
        fixedWidthGutter: {
            set: function(val) {
                this.$gutterLayer.$fixedWidth = !!val;
                this.$loop.schedule(this.CHANGE_GUTTER);
            }
        },
        theme: {
            set: function(val) {
                this.setTheme(val);
            },
            get: function() {
                return this.$themeId || this.theme;
            },
            initialValue: "./theme/textmate",
            handlesSet: true
        }
    });
    exports.VirtualRenderer = VirtualRenderer;
});
ace.define("ace/worker/worker_client", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/net",
    "ace/lib/event_emitter",
    "ace/config"
], function(acequire, exports, module) {
    var oop = acequire("../lib/oop");
    var net = acequire("../lib/net");
    var EventEmitter = acequire("../lib/event_emitter").EventEmitter;
    var config3 = acequire("../config");
    function $workerBlob(workerUrl, mod) {
        var script = mod.src;
        net.qualifyURL(workerUrl);
        try {
            return new Blob([
                script
            ], {
                "type": "application/javascript"
            });
        } catch (e) {
            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;
            var blobBuilder = new BlobBuilder();
            blobBuilder.append(script);
            return blobBuilder.getBlob("application/javascript");
        }
    }
    function createWorker(workerUrl, mod) {
        var blob = $workerBlob(workerUrl, mod);
        var URL1 = window.URL || window.webkitURL;
        var blobURL = URL1.createObjectURL(blob);
        return new Worker(blobURL);
    }
    var WorkerClient = function(topLevelNamespaces, mod, classname, workerUrl, importScripts) {
        this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);
        this.changeListener = this.changeListener.bind(this);
        this.onMessage = this.onMessage.bind(this);
        if (acequire.nameToUrl && !acequire.toUrl) acequire.toUrl = acequire.nameToUrl;
        if (config3.get("packaged") || !acequire.toUrl) workerUrl = workerUrl || config3.moduleUrl(mod.id, "worker");
        else {
            var normalizePath = this.$normalizePath;
            workerUrl = workerUrl || normalizePath(acequire.toUrl("ace/worker/worker.js", null, "_"));
            var tlns = {
            };
            topLevelNamespaces.forEach(function(ns) {
                tlns[ns] = normalizePath(acequire.toUrl(ns, null, "_").replace(/(\.js)?(\?.*)?$/, ""));
            });
        }
        this.$worker = createWorker(workerUrl, mod);
        if (importScripts) this.send("importScripts", importScripts);
        this.$worker.postMessage({
            init: true,
            tlns: tlns,
            module: mod.id,
            classname: classname
        });
        this.callbackId = 1;
        this.callbacks = {
        };
        this.$worker.onmessage = this.onMessage;
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.onMessage = function(e) {
            var msg = e.data;
            switch(msg.type){
                case "event":
                    this._signal(msg.name, {
                        data: msg.data
                    });
                    break;
                case "call":
                    var callback = this.callbacks[msg.id];
                    if (callback) {
                        callback(msg.data);
                        delete this.callbacks[msg.id];
                    }
                    break;
                case "error":
                    this.reportError(msg.data);
                    break;
                case "log":
                    window.console && console.log && console.log.apply(console, msg.data);
                    break;
            }
        };
        this.reportError = function(err) {
            window.console && console.error && console.error(err);
        };
        this.$normalizePath = function(path) {
            return net.qualifyURL(path);
        };
        this.terminate = function() {
            this._signal("terminate", {
            });
            this.deltaQueue = null;
            this.$worker.terminate();
            this.$worker = null;
            if (this.$doc) this.$doc.off("change", this.changeListener);
            this.$doc = null;
        };
        this.send = function(cmd, args) {
            this.$worker.postMessage({
                command: cmd,
                args: args
            });
        };
        this.call = function(cmd, args, callback) {
            if (callback) {
                var id = this.callbackId++;
                this.callbacks[id] = callback;
                args.push(id);
            }
            this.send(cmd, args);
        };
        this.emit = function(event, data) {
            try {
                this.$worker.postMessage({
                    event: event,
                    data: {
                        data: data.data
                    }
                });
            } catch (ex) {
                console.error(ex.stack);
            }
        };
        this.attachToDocument = function(doc) {
            if (this.$doc) this.terminate();
            this.$doc = doc;
            this.call("setValue", [
                doc.getValue()
            ]);
            doc.on("change", this.changeListener);
        };
        this.changeListener = function(delta) {
            if (!this.deltaQueue) {
                this.deltaQueue = [];
                setTimeout(this.$sendDeltaQueue, 0);
            }
            if (delta.action == "insert") this.deltaQueue.push(delta.start, delta.lines);
            else this.deltaQueue.push(delta.start, delta.end);
        };
        this.$sendDeltaQueue = function() {
            var q = this.deltaQueue;
            if (!q) return;
            this.deltaQueue = null;
            if (q.length > 50 && q.length > this.$doc.getLength() >> 1) this.call("setValue", [
                this.$doc.getValue()
            ]);
            else this.emit("change", {
                data: q
            });
        };
    }).call(WorkerClient.prototype);
    var UIWorkerClient = function(topLevelNamespaces, mod, classname) {
        this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);
        this.changeListener = this.changeListener.bind(this);
        this.callbackId = 1;
        this.callbacks = {
        };
        this.messageBuffer = [];
        var main = null;
        var emitSync = false;
        var sender = Object.create(EventEmitter);
        var _self = this;
        this.$worker = {
        };
        this.$worker.terminate = function() {
        };
        this.$worker.postMessage = function(e) {
            _self.messageBuffer.push(e);
            if (main) {
                if (emitSync) setTimeout(processNext);
                else processNext();
            }
        };
        this.setEmitSync = function(val) {
            emitSync = val;
        };
        var processNext = function() {
            var msg = _self.messageBuffer.shift();
            if (msg.command) main[msg.command].apply(main, msg.args);
            else if (msg.event) sender._signal(msg.event, msg.data);
        };
        sender.postMessage = function(msg) {
            _self.onMessage({
                data: msg
            });
        };
        sender.callback = function(data, callbackId) {
            this.postMessage({
                type: "call",
                id: callbackId,
                data: data
            });
        };
        sender.emit = function(name, data) {
            this.postMessage({
                type: "event",
                name: name,
                data: data
            });
        };
        config3.loadModule([
            "worker",
            mod
        ], function(Main) {
            main = new Main[classname](sender);
            while(_self.messageBuffer.length)processNext();
        });
    };
    UIWorkerClient.prototype = WorkerClient.prototype;
    exports.UIWorkerClient = UIWorkerClient;
    exports.WorkerClient = WorkerClient;
    exports.createWorker = createWorker;
});
ace.define("ace/placeholder", [
    "require",
    "exports",
    "module",
    "ace/range",
    "ace/lib/event_emitter",
    "ace/lib/oop"
], function(acequire, exports, module) {
    var Range1 = acequire("./range").Range;
    var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
    var oop = acequire("./lib/oop");
    var PlaceHolder = function(session, length, pos, others, mainClass, othersClass) {
        var _self = this;
        this.length = length;
        this.session = session;
        this.doc = session.getDocument();
        this.mainClass = mainClass;
        this.othersClass = othersClass;
        this.$onUpdate = this.onUpdate.bind(this);
        this.doc.on("change", this.$onUpdate);
        this.$others = others;
        this.$onCursorChange = function() {
            setTimeout(function() {
                _self.onCursorChange();
            });
        };
        this.$pos = pos;
        var undoStack = session.getUndoManager().$undoStack || session.getUndoManager().$undostack || {
            length: -1
        };
        this.$undoStackDepth = undoStack.length;
        this.setup();
        session.selection.on("changeCursor", this.$onCursorChange);
    };
    (function() {
        oop.implement(this, EventEmitter);
        this.setup = function() {
            var _self = this;
            var doc = this.doc;
            var session = this.session;
            this.selectionBefore = session.selection.toJSON();
            if (session.selection.inMultiSelectMode) session.selection.toSingleRange();
            this.pos = doc.createAnchor(this.$pos.row, this.$pos.column);
            var pos = this.pos;
            pos.$insertRight = true;
            pos.detach();
            pos.markerId = session.addMarker(new Range1(pos.row, pos.column, pos.row, pos.column + this.length), this.mainClass, null, false);
            this.others = [];
            this.$others.forEach(function(other) {
                var anchor = doc.createAnchor(other.row, other.column);
                anchor.$insertRight = true;
                anchor.detach();
                _self.others.push(anchor);
            });
            session.setUndoSelect(false);
        };
        this.showOtherMarkers = function() {
            if (this.othersActive) return;
            var session = this.session;
            var _self = this;
            this.othersActive = true;
            this.others.forEach(function(anchor) {
                anchor.markerId = session.addMarker(new Range1(anchor.row, anchor.column, anchor.row, anchor.column + _self.length), _self.othersClass, null, false);
            });
        };
        this.hideOtherMarkers = function() {
            if (!this.othersActive) return;
            this.othersActive = false;
            for(var i = 0; i < this.others.length; i++)this.session.removeMarker(this.others[i].markerId);
        };
        this.onUpdate = function(delta) {
            if (this.$updating) return this.updateAnchors(delta);
            var range = delta;
            if (range.start.row !== range.end.row) return;
            if (range.start.row !== this.pos.row) return;
            this.$updating = true;
            var lengthDiff = delta.action === "insert" ? range.end.column - range.start.column : range.start.column - range.end.column;
            var inMainRange = range.start.column >= this.pos.column && range.start.column <= this.pos.column + this.length + 1;
            var distanceFromStart = range.start.column - this.pos.column;
            this.updateAnchors(delta);
            if (inMainRange) this.length += lengthDiff;
            if (inMainRange && !this.session.$fromUndo) {
                if (delta.action === 'insert') for(var i = this.others.length - 1; i >= 0; i--){
                    var otherPos = this.others[i];
                    var newPos = {
                        row: otherPos.row,
                        column: otherPos.column + distanceFromStart
                    };
                    this.doc.insertMergedLines(newPos, delta.lines);
                }
                else if (delta.action === 'remove') for(var i = this.others.length - 1; i >= 0; i--){
                    var otherPos = this.others[i];
                    var newPos = {
                        row: otherPos.row,
                        column: otherPos.column + distanceFromStart
                    };
                    this.doc.remove(new Range1(newPos.row, newPos.column, newPos.row, newPos.column - lengthDiff));
                }
            }
            this.$updating = false;
            this.updateMarkers();
        };
        this.updateAnchors = function(delta) {
            this.pos.onChange(delta);
            for(var i = this.others.length; i--;)this.others[i].onChange(delta);
            this.updateMarkers();
        };
        this.updateMarkers = function() {
            if (this.$updating) return;
            var _self = this;
            var session = this.session;
            var updateMarker = function(pos, className) {
                session.removeMarker(pos.markerId);
                pos.markerId = session.addMarker(new Range1(pos.row, pos.column, pos.row, pos.column + _self.length), className, null, false);
            };
            updateMarker(this.pos, this.mainClass);
            for(var i = this.others.length; i--;)updateMarker(this.others[i], this.othersClass);
        };
        this.onCursorChange = function(event) {
            if (this.$updating || !this.session) return;
            var pos = this.session.selection.getCursor();
            if (pos.row === this.pos.row && pos.column >= this.pos.column && pos.column <= this.pos.column + this.length) {
                this.showOtherMarkers();
                this._emit("cursorEnter", event);
            } else {
                this.hideOtherMarkers();
                this._emit("cursorLeave", event);
            }
        };
        this.detach = function() {
            this.session.removeMarker(this.pos && this.pos.markerId);
            this.hideOtherMarkers();
            this.doc.removeEventListener("change", this.$onUpdate);
            this.session.selection.removeEventListener("changeCursor", this.$onCursorChange);
            this.session.setUndoSelect(true);
            this.session = null;
        };
        this.cancel = function() {
            if (this.$undoStackDepth === -1) return;
            var undoManager = this.session.getUndoManager();
            var undosRequired = (undoManager.$undoStack || undoManager.$undostack).length - this.$undoStackDepth;
            for(var i = 0; i < undosRequired; i++)undoManager.undo(true);
            if (this.selectionBefore) this.session.selection.fromJSON(this.selectionBefore);
        };
    }).call(PlaceHolder.prototype);
    exports.PlaceHolder = PlaceHolder;
});
ace.define("ace/mouse/multi_select_handler", [
    "require",
    "exports",
    "module",
    "ace/lib/event",
    "ace/lib/useragent"
], function(acequire, exports, module) {
    var event = acequire("../lib/event");
    var useragent = acequire("../lib/useragent");
    function isSamePoint(p1, p2) {
        return p1.row == p2.row && p1.column == p2.column;
    }
    function onMouseDown(e) {
        var ev = e.domEvent;
        var alt = ev.altKey;
        var shift = ev.shiftKey;
        var ctrl = ev.ctrlKey;
        var accel = e.getAccelKey();
        var button = e.getButton();
        if (ctrl && useragent.isMac) button = ev.button;
        if (e.editor.inMultiSelectMode && button == 2) {
            e.editor.textInput.onContextMenu(e.domEvent);
            return;
        }
        if (!ctrl && !alt && !accel) {
            if (button === 0 && e.editor.inMultiSelectMode) e.editor.exitMultiSelectMode();
            return;
        }
        if (button !== 0) return;
        var editor = e.editor;
        var selection = editor.selection;
        var isMultiSelect = editor.inMultiSelectMode;
        var pos = e.getDocumentPosition();
        var cursor = selection.getCursor();
        var inSelection = e.inSelection() || selection.isEmpty() && isSamePoint(pos, cursor);
        var mouseX = e.x, mouseY = e.y;
        var onMouseSelection = function(e1) {
            mouseX = e1.clientX;
            mouseY = e1.clientY;
        };
        var session = editor.session;
        var screenAnchor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);
        var screenCursor = screenAnchor;
        var selectionMode;
        if (editor.$mouseHandler.$enableJumpToDef) {
            if (ctrl && alt || accel && alt) selectionMode = shift ? "block" : "add";
            else if (alt && editor.$blockSelectEnabled) selectionMode = "block";
        } else {
            if (accel && !alt) {
                selectionMode = "add";
                if (!isMultiSelect && shift) return;
            } else if (alt && editor.$blockSelectEnabled) selectionMode = "block";
        }
        if (selectionMode && useragent.isMac && ev.ctrlKey) editor.$mouseHandler.cancelContextMenu();
        if (selectionMode == "add") {
            if (!isMultiSelect && inSelection) return; // dragging
            if (!isMultiSelect) {
                var range = selection.toOrientedRange();
                editor.addSelectionMarker(range);
            }
            var oldRange = selection.rangeList.rangeAtPoint(pos);
            editor.$blockScrolling++;
            editor.inVirtualSelectionMode = true;
            if (shift) {
                oldRange = null;
                range = selection.ranges[0] || range;
                editor.removeSelectionMarker(range);
            }
            editor.once("mouseup", function() {
                var tmpSel = selection.toOrientedRange();
                if (oldRange && tmpSel.isEmpty() && isSamePoint(oldRange.cursor, tmpSel.cursor)) selection.substractPoint(tmpSel.cursor);
                else {
                    if (shift) selection.substractPoint(range.cursor);
                    else if (range) {
                        editor.removeSelectionMarker(range);
                        selection.addRange(range);
                    }
                    selection.addRange(tmpSel);
                }
                editor.$blockScrolling--;
                editor.inVirtualSelectionMode = false;
            });
        } else if (selectionMode == "block") {
            e.stop();
            editor.inVirtualSelectionMode = true;
            var initialRange;
            var rectSel = [];
            var blockSelect = function() {
                var newCursor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);
                var cursor1 = session.screenToDocumentPosition(newCursor.row, newCursor.column, newCursor.offsetX);
                if (isSamePoint(screenCursor, newCursor) && isSamePoint(cursor1, selection.lead)) return;
                screenCursor = newCursor;
                editor.$blockScrolling++;
                editor.selection.moveToPosition(cursor1);
                editor.renderer.scrollCursorIntoView();
                editor.removeSelectionMarkers(rectSel);
                rectSel = selection.rectangularRangeBlock(screenCursor, screenAnchor);
                if (editor.$mouseHandler.$clickSelection && rectSel.length == 1 && rectSel[0].isEmpty()) rectSel[0] = editor.$mouseHandler.$clickSelection.clone();
                rectSel.forEach(editor.addSelectionMarker, editor);
                editor.updateSelectionMarkers();
                editor.$blockScrolling--;
            };
            editor.$blockScrolling++;
            if (isMultiSelect && !accel) selection.toSingleRange();
            else if (!isMultiSelect && accel) {
                initialRange = selection.toOrientedRange();
                editor.addSelectionMarker(initialRange);
            }
            if (shift) screenAnchor = session.documentToScreenPosition(selection.lead);
            else selection.moveToPosition(pos);
            editor.$blockScrolling--;
            screenCursor = {
                row: -1,
                column: -1
            };
            var onMouseSelectionEnd = function(e1) {
                clearInterval(timerId);
                editor.removeSelectionMarkers(rectSel);
                if (!rectSel.length) rectSel = [
                    selection.toOrientedRange()
                ];
                editor.$blockScrolling++;
                if (initialRange) {
                    editor.removeSelectionMarker(initialRange);
                    selection.toSingleRange(initialRange);
                }
                for(var i = 0; i < rectSel.length; i++)selection.addRange(rectSel[i]);
                editor.inVirtualSelectionMode = false;
                editor.$mouseHandler.$clickSelection = null;
                editor.$blockScrolling--;
            };
            var onSelectionInterval = blockSelect;
            event.capture(editor.container, onMouseSelection, onMouseSelectionEnd);
            var timerId = setInterval(function() {
                onSelectionInterval();
            }, 20);
            return e.preventDefault();
        }
    }
    exports.onMouseDown = onMouseDown;
});
ace.define("ace/commands/multi_select_commands", [
    "require",
    "exports",
    "module",
    "ace/keyboard/hash_handler"
], function(acequire, exports, module) {
    exports.defaultCommands = [
        {
            name: "addCursorAbove",
            exec: function(editor) {
                editor.selectMoreLines(-1);
            },
            bindKey: {
                win: "Ctrl-Alt-Up",
                mac: "Ctrl-Alt-Up"
            },
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "addCursorBelow",
            exec: function(editor) {
                editor.selectMoreLines(1);
            },
            bindKey: {
                win: "Ctrl-Alt-Down",
                mac: "Ctrl-Alt-Down"
            },
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "addCursorAboveSkipCurrent",
            exec: function(editor) {
                editor.selectMoreLines(-1, true);
            },
            bindKey: {
                win: "Ctrl-Alt-Shift-Up",
                mac: "Ctrl-Alt-Shift-Up"
            },
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "addCursorBelowSkipCurrent",
            exec: function(editor) {
                editor.selectMoreLines(1, true);
            },
            bindKey: {
                win: "Ctrl-Alt-Shift-Down",
                mac: "Ctrl-Alt-Shift-Down"
            },
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selectMoreBefore",
            exec: function(editor) {
                editor.selectMore(-1);
            },
            bindKey: {
                win: "Ctrl-Alt-Left",
                mac: "Ctrl-Alt-Left"
            },
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selectMoreAfter",
            exec: function(editor) {
                editor.selectMore(1);
            },
            bindKey: {
                win: "Ctrl-Alt-Right",
                mac: "Ctrl-Alt-Right"
            },
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selectNextBefore",
            exec: function(editor) {
                editor.selectMore(-1, true);
            },
            bindKey: {
                win: "Ctrl-Alt-Shift-Left",
                mac: "Ctrl-Alt-Shift-Left"
            },
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "selectNextAfter",
            exec: function(editor) {
                editor.selectMore(1, true);
            },
            bindKey: {
                win: "Ctrl-Alt-Shift-Right",
                mac: "Ctrl-Alt-Shift-Right"
            },
            scrollIntoView: "cursor",
            readOnly: true
        },
        {
            name: "splitIntoLines",
            exec: function(editor) {
                editor.multiSelect.splitIntoLines();
            },
            bindKey: {
                win: "Ctrl-Alt-L",
                mac: "Ctrl-Alt-L"
            },
            readOnly: true
        },
        {
            name: "alignCursors",
            exec: function(editor) {
                editor.alignCursors();
            },
            bindKey: {
                win: "Ctrl-Alt-A",
                mac: "Ctrl-Alt-A"
            },
            scrollIntoView: "cursor"
        },
        {
            name: "findAll",
            exec: function(editor) {
                editor.findAll();
            },
            bindKey: {
                win: "Ctrl-Alt-K",
                mac: "Ctrl-Alt-G"
            },
            scrollIntoView: "cursor",
            readOnly: true
        }
    ];
    exports.multiSelectCommands = [
        {
            name: "singleSelection",
            bindKey: "esc",
            exec: function(editor) {
                editor.exitMultiSelectMode();
            },
            scrollIntoView: "cursor",
            readOnly: true,
            isAvailable: function(editor) {
                return editor && editor.inMultiSelectMode;
            }
        }
    ];
    var HashHandler = acequire("../keyboard/hash_handler").HashHandler;
    exports.keyboardHandler = new HashHandler(exports.multiSelectCommands);
});
ace.define("ace/multi_select", [
    "require",
    "exports",
    "module",
    "ace/range_list",
    "ace/range",
    "ace/selection",
    "ace/mouse/multi_select_handler",
    "ace/lib/event",
    "ace/lib/lang",
    "ace/commands/multi_select_commands",
    "ace/search",
    "ace/edit_session",
    "ace/editor",
    "ace/config"
], function(acequire, exports, module) {
    var RangeList = acequire("./range_list").RangeList;
    var Range1 = acequire("./range").Range;
    var Selection1 = acequire("./selection").Selection;
    var onMouseDown = acequire("./mouse/multi_select_handler").onMouseDown;
    var event = acequire("./lib/event");
    var lang = acequire("./lib/lang");
    var commands = acequire("./commands/multi_select_commands");
    exports.commands = commands.defaultCommands.concat(commands.multiSelectCommands);
    var Search = acequire("./search").Search;
    var search = new Search();
    function find(session, needle, dir) {
        search.$options.wrap = true;
        search.$options.needle = needle;
        search.$options.backwards = dir == -1;
        return search.find(session);
    }
    var EditSession = acequire("./edit_session").EditSession;
    (function() {
        this.getSelectionMarkers = function() {
            return this.$selectionMarkers;
        };
    }).call(EditSession.prototype);
    (function() {
        this.ranges = null;
        this.rangeList = null;
        this.addRange = function(range, $blockChangeEvents) {
            if (!range) return;
            if (!this.inMultiSelectMode && this.rangeCount === 0) {
                var oldRange = this.toOrientedRange();
                this.rangeList.add(oldRange);
                this.rangeList.add(range);
                if (this.rangeList.ranges.length != 2) {
                    this.rangeList.removeAll();
                    return $blockChangeEvents || this.fromOrientedRange(range);
                }
                this.rangeList.removeAll();
                this.rangeList.add(oldRange);
                this.$onAddRange(oldRange);
            }
            if (!range.cursor) range.cursor = range.end;
            var removed = this.rangeList.add(range);
            this.$onAddRange(range);
            if (removed.length) this.$onRemoveRange(removed);
            if (this.rangeCount > 1 && !this.inMultiSelectMode) {
                this._signal("multiSelect");
                this.inMultiSelectMode = true;
                this.session.$undoSelect = false;
                this.rangeList.attach(this.session);
            }
            return $blockChangeEvents || this.fromOrientedRange(range);
        };
        this.toSingleRange = function(range) {
            range = range || this.ranges[0];
            var removed = this.rangeList.removeAll();
            if (removed.length) this.$onRemoveRange(removed);
            range && this.fromOrientedRange(range);
        };
        this.substractPoint = function(pos) {
            var removed = this.rangeList.substractPoint(pos);
            if (removed) {
                this.$onRemoveRange(removed);
                return removed[0];
            }
        };
        this.mergeOverlappingRanges = function() {
            var removed = this.rangeList.merge();
            if (removed.length) this.$onRemoveRange(removed);
            else if (this.ranges[0]) this.fromOrientedRange(this.ranges[0]);
        };
        this.$onAddRange = function(range) {
            this.rangeCount = this.rangeList.ranges.length;
            this.ranges.unshift(range);
            this._signal("addRange", {
                range: range
            });
        };
        this.$onRemoveRange = function(removed) {
            this.rangeCount = this.rangeList.ranges.length;
            if (this.rangeCount == 1 && this.inMultiSelectMode) {
                var lastRange = this.rangeList.ranges.pop();
                removed.push(lastRange);
                this.rangeCount = 0;
            }
            for(var i = removed.length; i--;){
                var index = this.ranges.indexOf(removed[i]);
                this.ranges.splice(index, 1);
            }
            this._signal("removeRange", {
                ranges: removed
            });
            if (this.rangeCount === 0 && this.inMultiSelectMode) {
                this.inMultiSelectMode = false;
                this._signal("singleSelect");
                this.session.$undoSelect = true;
                this.rangeList.detach(this.session);
            }
            lastRange = lastRange || this.ranges[0];
            if (lastRange && !lastRange.isEqual(this.getRange())) this.fromOrientedRange(lastRange);
        };
        this.$initRangeList = function() {
            if (this.rangeList) return;
            this.rangeList = new RangeList();
            this.ranges = [];
            this.rangeCount = 0;
        };
        this.getAllRanges = function() {
            return this.rangeCount ? this.rangeList.ranges.concat() : [
                this.getRange()
            ];
        };
        this.splitIntoLines = function() {
            if (this.rangeCount > 1) {
                var ranges = this.rangeList.ranges;
                var lastRange = ranges[ranges.length - 1];
                var range = Range1.fromPoints(ranges[0].start, lastRange.end);
                this.toSingleRange();
                this.setSelectionRange(range, lastRange.cursor == lastRange.start);
            } else {
                var range = this.getRange();
                var isBackwards = this.isBackwards();
                var startRow = range.start.row;
                var endRow = range.end.row;
                if (startRow == endRow) {
                    if (isBackwards) var start = range.end, end = range.start;
                    else var start = range.start, end = range.end;
                    this.addRange(Range1.fromPoints(end, end));
                    this.addRange(Range1.fromPoints(start, start));
                    return;
                }
                var rectSel = [];
                var r = this.getLineRange(startRow, true);
                r.start.column = range.start.column;
                rectSel.push(r);
                for(var i = startRow + 1; i < endRow; i++)rectSel.push(this.getLineRange(i, true));
                r = this.getLineRange(endRow, true);
                r.end.column = range.end.column;
                rectSel.push(r);
                rectSel.forEach(this.addRange, this);
            }
        };
        this.toggleBlockSelection = function() {
            if (this.rangeCount > 1) {
                var ranges = this.rangeList.ranges;
                var lastRange = ranges[ranges.length - 1];
                var range = Range1.fromPoints(ranges[0].start, lastRange.end);
                this.toSingleRange();
                this.setSelectionRange(range, lastRange.cursor == lastRange.start);
            } else {
                var cursor = this.session.documentToScreenPosition(this.selectionLead);
                var anchor = this.session.documentToScreenPosition(this.selectionAnchor);
                var rectSel = this.rectangularRangeBlock(cursor, anchor);
                rectSel.forEach(this.addRange, this);
            }
        };
        this.rectangularRangeBlock = function(screenCursor, screenAnchor, includeEmptyLines) {
            var rectSel = [];
            var xBackwards = screenCursor.column < screenAnchor.column;
            if (xBackwards) {
                var startColumn = screenCursor.column;
                var endColumn = screenAnchor.column;
                var startOffsetX = screenCursor.offsetX;
                var endOffsetX = screenAnchor.offsetX;
            } else {
                var startColumn = screenAnchor.column;
                var endColumn = screenCursor.column;
                var startOffsetX = screenAnchor.offsetX;
                var endOffsetX = screenCursor.offsetX;
            }
            var yBackwards = screenCursor.row < screenAnchor.row;
            if (yBackwards) {
                var startRow = screenCursor.row;
                var endRow = screenAnchor.row;
            } else {
                var startRow = screenAnchor.row;
                var endRow = screenCursor.row;
            }
            if (startColumn < 0) startColumn = 0;
            if (startRow < 0) startRow = 0;
            if (startRow == endRow) includeEmptyLines = true;
            for(var row = startRow; row <= endRow; row++){
                var range = Range1.fromPoints(this.session.screenToDocumentPosition(row, startColumn, startOffsetX), this.session.screenToDocumentPosition(row, endColumn, endOffsetX));
                if (range.isEmpty()) {
                    if (docEnd && isSamePoint(range.end, docEnd)) break;
                    var docEnd = range.end;
                }
                range.cursor = xBackwards ? range.start : range.end;
                rectSel.push(range);
            }
            if (yBackwards) rectSel.reverse();
            if (!includeEmptyLines) {
                var end = rectSel.length - 1;
                while(rectSel[end].isEmpty() && end > 0)end--;
                if (end > 0) {
                    var start = 0;
                    while(rectSel[start].isEmpty())start++;
                }
                for(var i = end; i >= start; i--)if (rectSel[i].isEmpty()) rectSel.splice(i, 1);
            }
            return rectSel;
        };
    }).call(Selection1.prototype);
    var Editor = acequire("./editor").Editor;
    (function() {
        this.updateSelectionMarkers = function() {
            this.renderer.updateCursor();
            this.renderer.updateBackMarkers();
        };
        this.addSelectionMarker = function(orientedRange) {
            if (!orientedRange.cursor) orientedRange.cursor = orientedRange.end;
            var style = this.getSelectionStyle();
            orientedRange.marker = this.session.addMarker(orientedRange, "ace_selection", style);
            this.session.$selectionMarkers.push(orientedRange);
            this.session.selectionMarkerCount = this.session.$selectionMarkers.length;
            return orientedRange;
        };
        this.removeSelectionMarker = function(range) {
            if (!range.marker) return;
            this.session.removeMarker(range.marker);
            var index = this.session.$selectionMarkers.indexOf(range);
            if (index != -1) this.session.$selectionMarkers.splice(index, 1);
            this.session.selectionMarkerCount = this.session.$selectionMarkers.length;
        };
        this.removeSelectionMarkers = function(ranges) {
            var markerList = this.session.$selectionMarkers;
            for(var i = ranges.length; i--;){
                var range = ranges[i];
                if (!range.marker) continue;
                this.session.removeMarker(range.marker);
                var index = markerList.indexOf(range);
                if (index != -1) markerList.splice(index, 1);
            }
            this.session.selectionMarkerCount = markerList.length;
        };
        this.$onAddRange = function(e) {
            this.addSelectionMarker(e.range);
            this.renderer.updateCursor();
            this.renderer.updateBackMarkers();
        };
        this.$onRemoveRange = function(e) {
            this.removeSelectionMarkers(e.ranges);
            this.renderer.updateCursor();
            this.renderer.updateBackMarkers();
        };
        this.$onMultiSelect = function(e) {
            if (this.inMultiSelectMode) return;
            this.inMultiSelectMode = true;
            this.setStyle("ace_multiselect");
            this.keyBinding.addKeyboardHandler(commands.keyboardHandler);
            this.commands.setDefaultHandler("exec", this.$onMultiSelectExec);
            this.renderer.updateCursor();
            this.renderer.updateBackMarkers();
        };
        this.$onSingleSelect = function(e) {
            if (this.session.multiSelect.inVirtualMode) return;
            this.inMultiSelectMode = false;
            this.unsetStyle("ace_multiselect");
            this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);
            this.commands.removeDefaultHandler("exec", this.$onMultiSelectExec);
            this.renderer.updateCursor();
            this.renderer.updateBackMarkers();
            this._emit("changeSelection");
        };
        this.$onMultiSelectExec = function(e) {
            var command = e.command;
            var editor = e.editor;
            if (!editor.multiSelect) return;
            if (!command.multiSelectAction) {
                var result = command.exec(editor, e.args || {
                });
                editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());
                editor.multiSelect.mergeOverlappingRanges();
            } else if (command.multiSelectAction == "forEach") result = editor.forEachSelection(command, e.args);
            else if (command.multiSelectAction == "forEachLine") result = editor.forEachSelection(command, e.args, true);
            else if (command.multiSelectAction == "single") {
                editor.exitMultiSelectMode();
                result = command.exec(editor, e.args || {
                });
            } else result = command.multiSelectAction(editor, e.args || {
            });
            return result;
        };
        this.forEachSelection = function(cmd, args, options) {
            if (this.inVirtualSelectionMode) return;
            var keepOrder = options && options.keepOrder;
            var $byLines = options == true || options && options.$byLines;
            var session = this.session;
            var selection = this.selection;
            var rangeList = selection.rangeList;
            var ranges = (keepOrder ? selection : rangeList).ranges;
            var result;
            if (!ranges.length) return cmd.exec ? cmd.exec(this, args || {
            }) : cmd(this, args || {
            });
            var reg = selection._eventRegistry;
            selection._eventRegistry = {
            };
            var tmpSel = new Selection1(session);
            this.inVirtualSelectionMode = true;
            for(var i = ranges.length; i--;){
                if ($byLines) while(i > 0 && ranges[i].start.row == ranges[i - 1].end.row)i--;
                tmpSel.fromOrientedRange(ranges[i]);
                tmpSel.index = i;
                this.selection = session.selection = tmpSel;
                var cmdResult = cmd.exec ? cmd.exec(this, args || {
                }) : cmd(this, args || {
                });
                if (!result && cmdResult !== undefined) result = cmdResult;
                tmpSel.toOrientedRange(ranges[i]);
            }
            tmpSel.detach();
            this.selection = session.selection = selection;
            this.inVirtualSelectionMode = false;
            selection._eventRegistry = reg;
            selection.mergeOverlappingRanges();
            var anim = this.renderer.$scrollAnimation;
            this.onCursorChange();
            this.onSelectionChange();
            if (anim && anim.from == anim.to) this.renderer.animateScrolling(anim.from);
            return result;
        };
        this.exitMultiSelectMode = function() {
            if (!this.inMultiSelectMode || this.inVirtualSelectionMode) return;
            this.multiSelect.toSingleRange();
        };
        this.getSelectedText = function() {
            var text = "";
            if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {
                var ranges = this.multiSelect.rangeList.ranges;
                var buf = [];
                for(var i = 0; i < ranges.length; i++)buf.push(this.session.getTextRange(ranges[i]));
                var nl = this.session.getDocument().getNewLineCharacter();
                text = buf.join(nl);
                if (text.length == (buf.length - 1) * nl.length) text = "";
            } else if (!this.selection.isEmpty()) text = this.session.getTextRange(this.getSelectionRange());
            return text;
        };
        this.$checkMultiselectChange = function(e, anchor) {
            if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {
                var range = this.multiSelect.ranges[0];
                if (this.multiSelect.isEmpty() && anchor == this.multiSelect.anchor) return;
                var pos = anchor == this.multiSelect.anchor ? range.cursor == range.start ? range.end : range.start : range.cursor;
                if (pos.row != anchor.row || this.session.$clipPositionToDocument(pos.row, pos.column).column != anchor.column) this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());
            }
        };
        this.findAll = function(needle, options, additive) {
            options = options || {
            };
            options.needle = needle || options.needle;
            if (options.needle == undefined) {
                var range = this.selection.isEmpty() ? this.selection.getWordRange() : this.selection.getRange();
                options.needle = this.session.getTextRange(range);
            }
            this.$search.set(options);
            var ranges = this.$search.findAll(this.session);
            if (!ranges.length) return 0;
            this.$blockScrolling += 1;
            var selection = this.multiSelect;
            if (!additive) selection.toSingleRange(ranges[0]);
            for(var i = ranges.length; i--;)selection.addRange(ranges[i], true);
            if (range && selection.rangeList.rangeAtPoint(range.start)) selection.addRange(range, true);
            this.$blockScrolling -= 1;
            return ranges.length;
        };
        this.selectMoreLines = function(dir, skip) {
            var range = this.selection.toOrientedRange();
            var isBackwards = range.cursor == range.end;
            var screenLead = this.session.documentToScreenPosition(range.cursor);
            if (this.selection.$desiredColumn) screenLead.column = this.selection.$desiredColumn;
            var lead = this.session.screenToDocumentPosition(screenLead.row + dir, screenLead.column);
            if (!range.isEmpty()) {
                var screenAnchor = this.session.documentToScreenPosition(isBackwards ? range.end : range.start);
                var anchor = this.session.screenToDocumentPosition(screenAnchor.row + dir, screenAnchor.column);
            } else var anchor = lead;
            if (isBackwards) {
                var newRange = Range1.fromPoints(lead, anchor);
                newRange.cursor = newRange.start;
            } else {
                var newRange = Range1.fromPoints(anchor, lead);
                newRange.cursor = newRange.end;
            }
            newRange.desiredColumn = screenLead.column;
            if (!this.selection.inMultiSelectMode) this.selection.addRange(range);
            else if (skip) var toRemove = range.cursor;
            this.selection.addRange(newRange);
            if (toRemove) this.selection.substractPoint(toRemove);
        };
        this.transposeSelections = function(dir) {
            var session = this.session;
            var sel = session.multiSelect;
            var all = sel.ranges;
            for(var i = all.length; i--;){
                var range = all[i];
                if (range.isEmpty()) {
                    var tmp = session.getWordRange(range.start.row, range.start.column);
                    range.start.row = tmp.start.row;
                    range.start.column = tmp.start.column;
                    range.end.row = tmp.end.row;
                    range.end.column = tmp.end.column;
                }
            }
            sel.mergeOverlappingRanges();
            var words = [];
            for(var i = all.length; i--;){
                var range = all[i];
                words.unshift(session.getTextRange(range));
            }
            if (dir < 0) words.unshift(words.pop());
            else words.push(words.shift());
            for(var i = all.length; i--;){
                var range = all[i];
                var tmp = range.clone();
                session.replace(range, words[i]);
                range.start.row = tmp.start.row;
                range.start.column = tmp.start.column;
            }
        };
        this.selectMore = function(dir, skip, stopAtFirst) {
            var session = this.session;
            var sel = session.multiSelect;
            var range = sel.toOrientedRange();
            if (range.isEmpty()) {
                range = session.getWordRange(range.start.row, range.start.column);
                range.cursor = dir == -1 ? range.start : range.end;
                this.multiSelect.addRange(range);
                if (stopAtFirst) return;
            }
            var needle = session.getTextRange(range);
            var newRange = find(session, needle, dir);
            if (newRange) {
                newRange.cursor = dir == -1 ? newRange.start : newRange.end;
                this.$blockScrolling += 1;
                this.session.unfold(newRange);
                this.multiSelect.addRange(newRange);
                this.$blockScrolling -= 1;
                this.renderer.scrollCursorIntoView(null, 0.5);
            }
            if (skip) this.multiSelect.substractPoint(range.cursor);
        };
        this.alignCursors = function() {
            var session = this.session;
            var sel = session.multiSelect;
            var ranges = sel.ranges;
            var row = -1;
            var sameRowRanges = ranges.filter(function(r) {
                if (r.cursor.row == row) return true;
                row = r.cursor.row;
            });
            if (!ranges.length || sameRowRanges.length == ranges.length - 1) {
                var range = this.selection.getRange();
                var fr = range.start.row, lr = range.end.row;
                var guessRange = fr == lr;
                if (guessRange) {
                    var max = this.session.getLength();
                    var line;
                    do line = this.session.getLine(lr);
                    while (/[=:]/.test(line) && (++lr) < max)
                    do line = this.session.getLine(fr);
                    while (/[=:]/.test(line) && (--fr) > 0)
                    if (fr < 0) fr = 0;
                    if (lr >= max) lr = max - 1;
                }
                var lines = this.session.removeFullLines(fr, lr);
                lines = this.$reAlignText(lines, guessRange);
                this.session.insert({
                    row: fr,
                    column: 0
                }, lines.join("\n") + "\n");
                if (!guessRange) {
                    range.start.column = 0;
                    range.end.column = lines[lines.length - 1].length;
                }
                this.selection.setRange(range);
            } else {
                sameRowRanges.forEach(function(r) {
                    sel.substractPoint(r.cursor);
                });
                var maxCol = 0;
                var minSpace = Infinity;
                var spaceOffsets = ranges.map(function(r) {
                    var p = r.cursor;
                    var line = session.getLine(p.row);
                    var spaceOffset = line.substr(p.column).search(/\S/g);
                    if (spaceOffset == -1) spaceOffset = 0;
                    if (p.column > maxCol) maxCol = p.column;
                    if (spaceOffset < minSpace) minSpace = spaceOffset;
                    return spaceOffset;
                });
                ranges.forEach(function(r, i) {
                    var p = r.cursor;
                    var l = maxCol - p.column;
                    var d = spaceOffsets[i] - minSpace;
                    if (l > d) session.insert(p, lang.stringRepeat(" ", l - d));
                    else session.remove(new Range1(p.row, p.column, p.row, p.column - l + d));
                    r.start.column = r.end.column = maxCol;
                    r.start.row = r.end.row = p.row;
                    r.cursor = r.end;
                });
                sel.fromOrientedRange(ranges[0]);
                this.renderer.updateCursor();
                this.renderer.updateBackMarkers();
            }
        };
        this.$reAlignText = function(lines, forceLeft) {
            var isLeftAligned = true, isRightAligned = true;
            var startW, textW, endW;
            function spaces(n) {
                return lang.stringRepeat(" ", n);
            }
            function alignLeft(m) {
                return !m[2] ? m[0] : spaces(startW) + m[2] + spaces(textW - m[2].length + endW) + m[4].replace(/^([=:])\s+/, "$1 ");
            }
            function alignRight(m) {
                return !m[2] ? m[0] : spaces(startW + textW - m[2].length) + m[2] + spaces(endW, " ") + m[4].replace(/^([=:])\s+/, "$1 ");
            }
            function unAlign(m) {
                return !m[2] ? m[0] : spaces(startW) + m[2] + spaces(endW) + m[4].replace(/^([=:])\s+/, "$1 ");
            }
            return lines.map(function(line) {
                var m = line.match(/(\s*)(.*?)(\s*)([=:].*)/);
                if (!m) return [
                    line
                ];
                if (startW == null) {
                    startW = m[1].length;
                    textW = m[2].length;
                    endW = m[3].length;
                    return m;
                }
                if (startW + textW + endW != m[1].length + m[2].length + m[3].length) isRightAligned = false;
                if (startW != m[1].length) isLeftAligned = false;
                if (startW > m[1].length) startW = m[1].length;
                if (textW < m[2].length) textW = m[2].length;
                if (endW > m[3].length) endW = m[3].length;
                return m;
            }).map(forceLeft ? alignLeft : isLeftAligned ? isRightAligned ? alignRight : alignLeft : unAlign);
        };
    }).call(Editor.prototype);
    function isSamePoint(p1, p2) {
        return p1.row == p2.row && p1.column == p2.column;
    }
    exports.onSessionChange = function(e) {
        var session = e.session;
        if (session && !session.multiSelect) {
            session.$selectionMarkers = [];
            session.selection.$initRangeList();
            session.multiSelect = session.selection;
        }
        this.multiSelect = session && session.multiSelect;
        var oldSession = e.oldSession;
        if (oldSession) {
            oldSession.multiSelect.off("addRange", this.$onAddRange);
            oldSession.multiSelect.off("removeRange", this.$onRemoveRange);
            oldSession.multiSelect.off("multiSelect", this.$onMultiSelect);
            oldSession.multiSelect.off("singleSelect", this.$onSingleSelect);
            oldSession.multiSelect.lead.off("change", this.$checkMultiselectChange);
            oldSession.multiSelect.anchor.off("change", this.$checkMultiselectChange);
        }
        if (session) {
            session.multiSelect.on("addRange", this.$onAddRange);
            session.multiSelect.on("removeRange", this.$onRemoveRange);
            session.multiSelect.on("multiSelect", this.$onMultiSelect);
            session.multiSelect.on("singleSelect", this.$onSingleSelect);
            session.multiSelect.lead.on("change", this.$checkMultiselectChange);
            session.multiSelect.anchor.on("change", this.$checkMultiselectChange);
        }
        if (session && this.inMultiSelectMode != session.selection.inMultiSelectMode) {
            if (session.selection.inMultiSelectMode) this.$onMultiSelect();
            else this.$onSingleSelect();
        }
    };
    function MultiSelect(editor) {
        if (editor.$multiselectOnSessionChange) return;
        editor.$onAddRange = editor.$onAddRange.bind(editor);
        editor.$onRemoveRange = editor.$onRemoveRange.bind(editor);
        editor.$onMultiSelect = editor.$onMultiSelect.bind(editor);
        editor.$onSingleSelect = editor.$onSingleSelect.bind(editor);
        editor.$multiselectOnSessionChange = exports.onSessionChange.bind(editor);
        editor.$checkMultiselectChange = editor.$checkMultiselectChange.bind(editor);
        editor.$multiselectOnSessionChange(editor);
        editor.on("changeSession", editor.$multiselectOnSessionChange);
        editor.on("mousedown", onMouseDown);
        editor.commands.addCommands(commands.defaultCommands);
        addAltCursorListeners(editor);
    }
    function addAltCursorListeners(editor) {
        var el = editor.textInput.getElement();
        var altCursor = false;
        event.addListener(el, "keydown", function(e) {
            var altDown = e.keyCode == 18 && !(e.ctrlKey || e.shiftKey || e.metaKey);
            if (editor.$blockSelectEnabled && altDown) {
                if (!altCursor) {
                    editor.renderer.setMouseCursor("crosshair");
                    altCursor = true;
                }
            } else if (altCursor) reset();
        });
        event.addListener(el, "keyup", reset);
        event.addListener(el, "blur", reset);
        function reset(e) {
            if (altCursor) {
                editor.renderer.setMouseCursor("");
                altCursor = false;
            }
        }
    }
    exports.MultiSelect = MultiSelect;
    acequire("./config").defineOptions(Editor.prototype, "editor", {
        enableMultiselect: {
            set: function(val) {
                MultiSelect(this);
                if (val) {
                    this.on("changeSession", this.$multiselectOnSessionChange);
                    this.on("mousedown", onMouseDown);
                } else {
                    this.off("changeSession", this.$multiselectOnSessionChange);
                    this.off("mousedown", onMouseDown);
                }
            },
            value: true
        },
        enableBlockSelect: {
            set: function(val) {
                this.$blockSelectEnabled = val;
            },
            value: true
        }
    });
});
ace.define("ace/mode/folding/fold_mode", [
    "require",
    "exports",
    "module",
    "ace/range"
], function(acequire, exports, module) {
    var Range1 = acequire("../../range").Range;
    var FoldMode = exports.FoldMode = function() {
    };
    (function() {
        this.foldingStartMarker = null;
        this.foldingStopMarker = null;
        this.getFoldWidget = function(session, foldStyle, row) {
            var line = session.getLine(row);
            if (this.foldingStartMarker.test(line)) return "start";
            if (foldStyle == "markbeginend" && this.foldingStopMarker && this.foldingStopMarker.test(line)) return "end";
            return "";
        };
        this.getFoldWidgetRange = function(session, foldStyle, row) {
            return null;
        };
        this.indentationBlock = function(session, row, column) {
            var re = /\S/;
            var line = session.getLine(row);
            var startLevel = line.search(re);
            if (startLevel == -1) return;
            var startColumn = column || line.length;
            var maxRow = session.getLength();
            var startRow = row;
            var endRow = row;
            while((++row) < maxRow){
                var level = session.getLine(row).search(re);
                if (level == -1) continue;
                if (level <= startLevel) break;
                endRow = row;
            }
            if (endRow > startRow) {
                var endColumn = session.getLine(endRow).length;
                return new Range1(startRow, startColumn, endRow, endColumn);
            }
        };
        this.openingBracketBlock = function(session, bracket, row, column, typeRe) {
            var start = {
                row: row,
                column: column + 1
            };
            var end = session.$findClosingBracket(bracket, start, typeRe);
            if (!end) return;
            var fw = session.foldWidgets[end.row];
            if (fw == null) fw = session.getFoldWidget(end.row);
            if (fw == "start" && end.row > start.row) {
                end.row--;
                end.column = session.getLine(end.row).length;
            }
            return Range1.fromPoints(start, end);
        };
        this.closingBracketBlock = function(session, bracket, row, column, typeRe) {
            var end = {
                row: row,
                column: column
            };
            var start = session.$findOpeningBracket(bracket, end);
            if (!start) return;
            start.column++;
            end.column--;
            return Range1.fromPoints(start, end);
        };
    }).call(FoldMode.prototype);
});
ace.define("ace/theme/textmate", [
    "require",
    "exports",
    "module",
    "ace/lib/dom"
], function(acequire, exports, module) {
    exports.isDark = false;
    exports.cssClass = "ace-tm";
    exports.cssText = ".ace-tm .ace_gutter {\
background: #f0f0f0;\
color: #333;\
}\
.ace-tm .ace_print-margin {\
width: 1px;\
background: #e8e8e8;\
}\
.ace-tm .ace_fold {\
background-color: #6B72E6;\
}\
.ace-tm {\
background-color: #FFFFFF;\
color: black;\
}\
.ace-tm .ace_cursor {\
color: black;\
}\
.ace-tm .ace_invisible {\
color: rgb(191, 191, 191);\
}\
.ace-tm .ace_storage,\
.ace-tm .ace_keyword {\
color: blue;\
}\
.ace-tm .ace_constant {\
color: rgb(197, 6, 11);\
}\
.ace-tm .ace_constant.ace_buildin {\
color: rgb(88, 72, 246);\
}\
.ace-tm .ace_constant.ace_language {\
color: rgb(88, 92, 246);\
}\
.ace-tm .ace_constant.ace_library {\
color: rgb(6, 150, 14);\
}\
.ace-tm .ace_invalid {\
background-color: rgba(255, 0, 0, 0.1);\
color: red;\
}\
.ace-tm .ace_support.ace_function {\
color: rgb(60, 76, 114);\
}\
.ace-tm .ace_support.ace_constant {\
color: rgb(6, 150, 14);\
}\
.ace-tm .ace_support.ace_type,\
.ace-tm .ace_support.ace_class {\
color: rgb(109, 121, 222);\
}\
.ace-tm .ace_keyword.ace_operator {\
color: rgb(104, 118, 135);\
}\
.ace-tm .ace_string {\
color: rgb(3, 106, 7);\
}\
.ace-tm .ace_comment {\
color: rgb(76, 136, 107);\
}\
.ace-tm .ace_comment.ace_doc {\
color: rgb(0, 102, 255);\
}\
.ace-tm .ace_comment.ace_doc.ace_tag {\
color: rgb(128, 159, 191);\
}\
.ace-tm .ace_constant.ace_numeric {\
color: rgb(0, 0, 205);\
}\
.ace-tm .ace_variable {\
color: rgb(49, 132, 149);\
}\
.ace-tm .ace_xml-pe {\
color: rgb(104, 104, 91);\
}\
.ace-tm .ace_entity.ace_name.ace_function {\
color: #0000A2;\
}\
.ace-tm .ace_heading {\
color: rgb(12, 7, 255);\
}\
.ace-tm .ace_list {\
color:rgb(185, 6, 144);\
}\
.ace-tm .ace_meta.ace_tag {\
color:rgb(0, 22, 142);\
}\
.ace-tm .ace_string.ace_regex {\
color: rgb(255, 0, 0)\
}\
.ace-tm .ace_marker-layer .ace_selection {\
background: rgb(181, 213, 255);\
}\
.ace-tm.ace_multiselect .ace_selection.ace_start {\
box-shadow: 0 0 3px 0px white;\
}\
.ace-tm .ace_marker-layer .ace_step {\
background: rgb(252, 255, 0);\
}\
.ace-tm .ace_marker-layer .ace_stack {\
background: rgb(164, 229, 101);\
}\
.ace-tm .ace_marker-layer .ace_bracket {\
margin: -1px 0 0 -1px;\
border: 1px solid rgb(192, 192, 192);\
}\
.ace-tm .ace_marker-layer .ace_active-line {\
background: rgba(0, 0, 0, 0.07);\
}\
.ace-tm .ace_gutter-active-line {\
background-color : #dcdcdc;\
}\
.ace-tm .ace_marker-layer .ace_selected-word {\
background: rgb(250, 250, 255);\
border: 1px solid rgb(200, 200, 250);\
}\
.ace-tm .ace_indent-guide {\
background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\
}\
";
    var dom = acequire("../lib/dom");
    dom.importCssString(exports.cssText, exports.cssClass);
});
ace.define("ace/line_widgets", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/lib/dom",
    "ace/range"
], function(acequire, exports, module) {
    var oop = acequire("./lib/oop");
    var dom = acequire("./lib/dom");
    var Range1 = acequire("./range").Range;
    function LineWidgets(session) {
        this.session = session;
        this.session.widgetManager = this;
        this.session.getRowLength = this.getRowLength;
        this.session.$getWidgetScreenLength = this.$getWidgetScreenLength;
        this.updateOnChange = this.updateOnChange.bind(this);
        this.renderWidgets = this.renderWidgets.bind(this);
        this.measureWidgets = this.measureWidgets.bind(this);
        this.session._changedWidgets = [];
        this.$onChangeEditor = this.$onChangeEditor.bind(this);
        this.session.on("change", this.updateOnChange);
        this.session.on("changeFold", this.updateOnFold);
        this.session.on("changeEditor", this.$onChangeEditor);
    }
    (function() {
        this.getRowLength = function(row) {
            var h;
            if (this.lineWidgets) h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;
            else h = 0;
            if (!this.$useWrapMode || !this.$wrapData[row]) return 1 + h;
            else return this.$wrapData[row].length + 1 + h;
        };
        this.$getWidgetScreenLength = function() {
            var screenRows = 0;
            this.lineWidgets.forEach(function(w) {
                if (w && w.rowCount && !w.hidden) screenRows += w.rowCount;
            });
            return screenRows;
        };
        this.$onChangeEditor = function(e) {
            this.attach(e.editor);
        };
        this.attach = function(editor) {
            if (editor && editor.widgetManager && editor.widgetManager != this) editor.widgetManager.detach();
            if (this.editor == editor) return;
            this.detach();
            this.editor = editor;
            if (editor) {
                editor.widgetManager = this;
                editor.renderer.on("beforeRender", this.measureWidgets);
                editor.renderer.on("afterRender", this.renderWidgets);
            }
        };
        this.detach = function(e) {
            var editor = this.editor;
            if (!editor) return;
            this.editor = null;
            editor.widgetManager = null;
            editor.renderer.off("beforeRender", this.measureWidgets);
            editor.renderer.off("afterRender", this.renderWidgets);
            var lineWidgets = this.session.lineWidgets;
            lineWidgets && lineWidgets.forEach(function(w) {
                if (w && w.el && w.el.parentNode) {
                    w._inDocument = false;
                    w.el.parentNode.removeChild(w.el);
                }
            });
        };
        this.updateOnFold = function(e, session) {
            var lineWidgets = session.lineWidgets;
            if (!lineWidgets || !e.action) return;
            var fold = e.data;
            var start = fold.start.row;
            var end = fold.end.row;
            var hide = e.action == "add";
            for(var i = start + 1; i < end; i++)if (lineWidgets[i]) lineWidgets[i].hidden = hide;
            if (lineWidgets[end]) {
                if (hide) {
                    if (!lineWidgets[start]) lineWidgets[start] = lineWidgets[end];
                    else lineWidgets[end].hidden = hide;
                } else {
                    if (lineWidgets[start] == lineWidgets[end]) lineWidgets[start] = undefined;
                    lineWidgets[end].hidden = hide;
                }
            }
        };
        this.updateOnChange = function(delta) {
            var lineWidgets = this.session.lineWidgets;
            if (!lineWidgets) return;
            var startRow = delta.start.row;
            var len = delta.end.row - startRow;
            if (len === 0) ;
            else if (delta.action == 'remove') {
                var removed = lineWidgets.splice(startRow + 1, len);
                removed.forEach(function(w) {
                    w && this.removeLineWidget(w);
                }, this);
                this.$updateRows();
            } else {
                var args = new Array(len);
                args.unshift(startRow, 0);
                lineWidgets.splice.apply(lineWidgets, args);
                this.$updateRows();
            }
        };
        this.$updateRows = function() {
            var lineWidgets = this.session.lineWidgets;
            if (!lineWidgets) return;
            var noWidgets = true;
            lineWidgets.forEach(function(w, i) {
                if (w) {
                    noWidgets = false;
                    w.row = i;
                    while(w.$oldWidget){
                        w.$oldWidget.row = i;
                        w = w.$oldWidget;
                    }
                }
            });
            if (noWidgets) this.session.lineWidgets = null;
        };
        this.addLineWidget = function(w) {
            if (!this.session.lineWidgets) this.session.lineWidgets = new Array(this.session.getLength());
            var old = this.session.lineWidgets[w.row];
            if (old) {
                w.$oldWidget = old;
                if (old.el && old.el.parentNode) {
                    old.el.parentNode.removeChild(old.el);
                    old._inDocument = false;
                }
            }
            this.session.lineWidgets[w.row] = w;
            w.session = this.session;
            var renderer = this.editor.renderer;
            if (w.html && !w.el) {
                w.el = dom.createElement("div");
                w.el.innerHTML = w.html;
            }
            if (w.el) {
                dom.addCssClass(w.el, "ace_lineWidgetContainer");
                w.el.style.position = "absolute";
                w.el.style.zIndex = 5;
                renderer.container.appendChild(w.el);
                w._inDocument = true;
            }
            if (!w.coverGutter) w.el.style.zIndex = 3;
            if (w.pixelHeight == null) w.pixelHeight = w.el.offsetHeight;
            if (w.rowCount == null) w.rowCount = w.pixelHeight / renderer.layerConfig.lineHeight;
            var fold = this.session.getFoldAt(w.row, 0);
            w.$fold = fold;
            if (fold) {
                var lineWidgets = this.session.lineWidgets;
                if (w.row == fold.end.row && !lineWidgets[fold.start.row]) lineWidgets[fold.start.row] = w;
                else w.hidden = true;
            }
            this.session._emit("changeFold", {
                data: {
                    start: {
                        row: w.row
                    }
                }
            });
            this.$updateRows();
            this.renderWidgets(null, renderer);
            this.onWidgetChanged(w);
            return w;
        };
        this.removeLineWidget = function(w) {
            w._inDocument = false;
            w.session = null;
            if (w.el && w.el.parentNode) w.el.parentNode.removeChild(w.el);
            if (w.editor && w.editor.destroy) try {
                w.editor.destroy();
            } catch (e) {
            }
            if (this.session.lineWidgets) {
                var w1 = this.session.lineWidgets[w.row];
                if (w1 == w) {
                    this.session.lineWidgets[w.row] = w.$oldWidget;
                    if (w.$oldWidget) this.onWidgetChanged(w.$oldWidget);
                } else while(w1){
                    if (w1.$oldWidget == w) {
                        w1.$oldWidget = w.$oldWidget;
                        break;
                    }
                    w1 = w1.$oldWidget;
                }
            }
            this.session._emit("changeFold", {
                data: {
                    start: {
                        row: w.row
                    }
                }
            });
            this.$updateRows();
        };
        this.getWidgetsAtRow = function(row) {
            var lineWidgets = this.session.lineWidgets;
            var w = lineWidgets && lineWidgets[row];
            var list = [];
            while(w){
                list.push(w);
                w = w.$oldWidget;
            }
            return list;
        };
        this.onWidgetChanged = function(w) {
            this.session._changedWidgets.push(w);
            this.editor && this.editor.renderer.updateFull();
        };
        this.measureWidgets = function(e, renderer) {
            var changedWidgets = this.session._changedWidgets;
            var config3 = renderer.layerConfig;
            if (!changedWidgets || !changedWidgets.length) return;
            var min = Infinity;
            for(var i = 0; i < changedWidgets.length; i++){
                var w = changedWidgets[i];
                if (!w || !w.el) continue;
                if (w.session != this.session) continue;
                if (!w._inDocument) {
                    if (this.session.lineWidgets[w.row] != w) continue;
                    w._inDocument = true;
                    renderer.container.appendChild(w.el);
                }
                w.h = w.el.offsetHeight;
                if (!w.fixedWidth) {
                    w.w = w.el.offsetWidth;
                    w.screenWidth = Math.ceil(w.w / config3.characterWidth);
                }
                var rowCount = w.h / config3.lineHeight;
                if (w.coverLine) {
                    rowCount -= this.session.getRowLineCount(w.row);
                    if (rowCount < 0) rowCount = 0;
                }
                if (w.rowCount != rowCount) {
                    w.rowCount = rowCount;
                    if (w.row < min) min = w.row;
                }
            }
            if (min != Infinity) {
                this.session._emit("changeFold", {
                    data: {
                        start: {
                            row: min
                        }
                    }
                });
                this.session.lineWidgetWidth = null;
            }
            this.session._changedWidgets = [];
        };
        this.renderWidgets = function(e, renderer) {
            var config3 = renderer.layerConfig;
            var lineWidgets = this.session.lineWidgets;
            if (!lineWidgets) return;
            var first = Math.min(this.firstRow, config3.firstRow);
            var last = Math.max(this.lastRow, config3.lastRow, lineWidgets.length);
            while(first > 0 && !lineWidgets[first])first--;
            this.firstRow = config3.firstRow;
            this.lastRow = config3.lastRow;
            renderer.$cursorLayer.config = config3;
            for(var i = first; i <= last; i++){
                var w = lineWidgets[i];
                if (!w || !w.el) continue;
                if (w.hidden) {
                    w.el.style.top = -100 - (w.pixelHeight || 0) + "px";
                    continue;
                }
                if (!w._inDocument) {
                    w._inDocument = true;
                    renderer.container.appendChild(w.el);
                }
                var top = renderer.$cursorLayer.getPixelPosition({
                    row: i,
                    column: 0
                }, true).top;
                if (!w.coverLine) top += config3.lineHeight * this.session.getRowLineCount(w.row);
                w.el.style.top = top - config3.offset + "px";
                var left = w.coverGutter ? 0 : renderer.gutterWidth;
                if (!w.fixedWidth) left -= renderer.scrollLeft;
                w.el.style.left = left + "px";
                if (w.fullWidth && w.screenWidth) w.el.style.minWidth = config3.width + 2 * config3.padding + "px";
                if (w.fixedWidth) w.el.style.right = renderer.scrollBar.getWidth() + "px";
                else w.el.style.right = "";
            }
        };
    }).call(LineWidgets.prototype);
    exports.LineWidgets = LineWidgets;
});
ace.define("ace/ext/error_marker", [
    "require",
    "exports",
    "module",
    "ace/line_widgets",
    "ace/lib/dom",
    "ace/range"
], function(acequire, exports, module) {
    var LineWidgets = acequire("../line_widgets").LineWidgets;
    var dom = acequire("../lib/dom");
    var Range1 = acequire("../range").Range;
    function binarySearch(array, needle, comparator) {
        var first = 0;
        var last = array.length - 1;
        while(first <= last){
            var mid = first + last >> 1;
            var c = comparator(needle, array[mid]);
            if (c > 0) first = mid + 1;
            else if (c < 0) last = mid - 1;
            else return mid;
        }
        return -(first + 1);
    }
    function findAnnotations(session, row, dir) {
        var annotations = session.getAnnotations().sort(Range1.comparePoints);
        if (!annotations.length) return;
        var i = binarySearch(annotations, {
            row: row,
            column: -1
        }, Range1.comparePoints);
        if (i < 0) i = -i - 1;
        if (i >= annotations.length) i = dir > 0 ? 0 : annotations.length - 1;
        else if (i === 0 && dir < 0) i = annotations.length - 1;
        var annotation = annotations[i];
        if (!annotation || !dir) return;
        if (annotation.row === row) {
            do annotation = annotations[i += dir];
            while (annotation && annotation.row === row)
            if (!annotation) return annotations.slice();
        }
        var matched = [];
        row = annotation.row;
        do {
            matched[dir < 0 ? "unshift" : "push"](annotation);
            annotation = annotations[i += dir];
        }while (annotation && annotation.row == row)
        return matched.length && matched;
    }
    exports.showErrorMarker = function(editor, dir) {
        var session = editor.session;
        if (!session.widgetManager) {
            session.widgetManager = new LineWidgets(session);
            session.widgetManager.attach(editor);
        }
        var pos = editor.getCursorPosition();
        var row = pos.row;
        var oldWidget = session.widgetManager.getWidgetsAtRow(row).filter(function(w) {
            return w.type == "errorMarker";
        })[0];
        if (oldWidget) oldWidget.destroy();
        else row -= dir;
        var annotations = findAnnotations(session, row, dir);
        var gutterAnno;
        if (annotations) {
            var annotation = annotations[0];
            pos.column = (annotation.pos && typeof annotation.column != "number" ? annotation.pos.sc : annotation.column) || 0;
            pos.row = annotation.row;
            gutterAnno = editor.renderer.$gutterLayer.$annotations[pos.row];
        } else if (oldWidget) return;
        else gutterAnno = {
            text: [
                "Looks good!"
            ],
            className: "ace_ok"
        };
        editor.session.unfold(pos.row);
        editor.selection.moveToPosition(pos);
        var w = {
            row: pos.row,
            fixedWidth: true,
            coverGutter: true,
            el: dom.createElement("div"),
            type: "errorMarker"
        };
        var el = w.el.appendChild(dom.createElement("div"));
        var arrow = w.el.appendChild(dom.createElement("div"));
        arrow.className = "error_widget_arrow " + gutterAnno.className;
        var left = editor.renderer.$cursorLayer.getPixelPosition(pos).left;
        arrow.style.left = left + editor.renderer.gutterWidth - 5 + "px";
        w.el.className = "error_widget_wrapper";
        el.className = "error_widget " + gutterAnno.className;
        el.innerHTML = gutterAnno.text.join("<br>");
        el.appendChild(dom.createElement("div"));
        var kb = function(_, hashId, keyString) {
            if (hashId === 0 && (keyString === "esc" || keyString === "return")) {
                w.destroy();
                return {
                    command: "null"
                };
            }
        };
        w.destroy = function() {
            if (editor.$mouseHandler.isMousePressed) return;
            editor.keyBinding.removeKeyboardHandler(kb);
            session.widgetManager.removeLineWidget(w);
            editor.off("changeSelection", w.destroy);
            editor.off("changeSession", w.destroy);
            editor.off("mouseup", w.destroy);
            editor.off("change", w.destroy);
        };
        editor.keyBinding.addKeyboardHandler(kb);
        editor.on("changeSelection", w.destroy);
        editor.on("changeSession", w.destroy);
        editor.on("mouseup", w.destroy);
        editor.on("change", w.destroy);
        editor.session.widgetManager.addLineWidget(w);
        w.el.onmousedown = editor.focus.bind(editor);
        editor.renderer.scrollCursorIntoView(null, 0.5, {
            bottom: w.el.offsetHeight
        });
    };
    dom.importCssString("\
    .error_widget_wrapper {\
        background: inherit;\
        color: inherit;\
        border:none\
    }\
    .error_widget {\
        border-top: solid 2px;\
        border-bottom: solid 2px;\
        margin: 5px 0;\
        padding: 10px 40px;\
        white-space: pre-wrap;\
    }\
    .error_widget.ace_error, .error_widget_arrow.ace_error{\
        border-color: #ff5a5a\
    }\
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\
        border-color: #F1D817\
    }\
    .error_widget.ace_info, .error_widget_arrow.ace_info{\
        border-color: #5a5a5a\
    }\
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\
        border-color: #5aaa5a\
    }\
    .error_widget_arrow {\
        position: absolute;\
        border: solid 5px;\
        border-top-color: transparent!important;\
        border-right-color: transparent!important;\
        border-left-color: transparent!important;\
        top: -5px;\
    }\
", "");
});
ace.define("ace/ace", [
    "require",
    "exports",
    "module",
    "ace/lib/fixoldbrowsers",
    "ace/lib/dom",
    "ace/lib/event",
    "ace/editor",
    "ace/edit_session",
    "ace/undomanager",
    "ace/virtual_renderer",
    "ace/worker/worker_client",
    "ace/keyboard/hash_handler",
    "ace/placeholder",
    "ace/multi_select",
    "ace/mode/folding/fold_mode",
    "ace/theme/textmate",
    "ace/ext/error_marker",
    "ace/config"
], function(acequire, exports, module) {
    acequire("./lib/fixoldbrowsers");
    var dom = acequire("./lib/dom");
    var event = acequire("./lib/event");
    var Editor = acequire("./editor").Editor;
    var EditSession = acequire("./edit_session").EditSession;
    var UndoManager = acequire("./undomanager").UndoManager;
    var Renderer = acequire("./virtual_renderer").VirtualRenderer;
    acequire("./worker/worker_client");
    acequire("./keyboard/hash_handler");
    acequire("./placeholder");
    acequire("./multi_select");
    acequire("./mode/folding/fold_mode");
    acequire("./theme/textmate");
    acequire("./ext/error_marker");
    exports.config = acequire("./config");
    exports.acequire = acequire;
    if (typeof define === "function") exports.define = define;
    exports.edit = function(el) {
        if (typeof el == "string") {
            var _id = el;
            el = document.getElementById(_id);
            if (!el) throw new Error("ace.edit can't find div #" + _id);
        }
        if (el && el.env && el.env.editor instanceof Editor) return el.env.editor;
        var value = "";
        if (el && /input|textarea/i.test(el.tagName)) {
            var oldNode = el;
            value = oldNode.value;
            el = dom.createElement("pre");
            oldNode.parentNode.replaceChild(el, oldNode);
        } else if (el) {
            value = dom.getInnerText(el);
            el.innerHTML = "";
        }
        var doc = exports.createEditSession(value);
        var editor = new Editor(new Renderer(el));
        editor.setSession(doc);
        var env = {
            document: doc,
            editor: editor,
            onResize: editor.resize.bind(editor, null)
        };
        if (oldNode) env.textarea = oldNode;
        event.addListener(window, "resize", env.onResize);
        editor.on("destroy", function() {
            event.removeListener(window, "resize", env.onResize);
            env.editor.container.env = null; // prevent memory leak on old ie
        });
        editor.container.env = editor.env = env;
        return editor;
    };
    exports.createEditSession = function(text, mode) {
        var doc = new EditSession(text, mode);
        doc.setUndoManager(new UndoManager());
        return doc;
    };
    exports.EditSession = EditSession;
    exports.UndoManager = UndoManager;
    exports.version = "1.2.9";
});
(function() {
    ace.acequire([
        "ace/ace"
    ], function(a) {
        if (a) {
            a.config.init(true);
            a.define = ace.define;
        }
        if (!window.ace) window.ace = a;
        for(var key in a)if (a.hasOwnProperty(key)) window.ace[key] = a[key];
    });
})();
module.exports = window.ace.acequire("ace/ace");

},{}],"4dGL7":[function(require,module,exports) {
ace.define("ace/mode/latex_highlight_rules", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/mode/text_highlight_rules"
], function(acequire, exports, module) {
    var oop = acequire("../lib/oop");
    var TextHighlightRules = acequire("./text_highlight_rules").TextHighlightRules;
    var LatexHighlightRules = function() {
        this.$rules = {
            "start": [
                {
                    token: "comment",
                    regex: "%.*$"
                },
                {
                    token: [
                        "keyword",
                        "lparen",
                        "variable.parameter",
                        "rparen",
                        "lparen",
                        "storage.type",
                        "rparen"
                    ],
                    regex: "(\\\\(?:documentclass|usepackage|input))(?:(\\[)([^\\]]*)(\\]))?({)([^}]*)(})"
                },
                {
                    token: [
                        "keyword",
                        "lparen",
                        "variable.parameter",
                        "rparen"
                    ],
                    regex: "(\\\\(?:label|v?ref|cite(?:[^{]*)))(?:({)([^}]*)(}))?"
                },
                {
                    token: [
                        "storage.type",
                        "lparen",
                        "variable.parameter",
                        "rparen"
                    ],
                    regex: "(\\\\begin)({)(verbatim)(})",
                    next: "verbatim"
                },
                {
                    token: [
                        "storage.type",
                        "lparen",
                        "variable.parameter",
                        "rparen"
                    ],
                    regex: "(\\\\begin)({)(lstlisting)(})",
                    next: "lstlisting"
                },
                {
                    token: [
                        "storage.type",
                        "lparen",
                        "variable.parameter",
                        "rparen"
                    ],
                    regex: "(\\\\(?:begin|end))({)([\\w*]*)(})"
                },
                {
                    token: "storage.type",
                    regex: /\\verb\b\*?/,
                    next: [
                        {
                            token: [
                                "keyword.operator",
                                "string",
                                "keyword.operator"
                            ],
                            regex: "(.)(.*?)(\\1|$)|",
                            next: "start"
                        }
                    ]
                },
                {
                    token: "storage.type",
                    regex: "\\\\[a-zA-Z]+"
                },
                {
                    token: "lparen",
                    regex: "[[({]"
                },
                {
                    token: "rparen",
                    regex: "[\\])}]"
                },
                {
                    token: "constant.character.escape",
                    regex: "\\\\[^a-zA-Z]?"
                },
                {
                    token: "string",
                    regex: "\\${1,2}",
                    next: "equation"
                }
            ],
            "equation": [
                {
                    token: "comment",
                    regex: "%.*$"
                },
                {
                    token: "string",
                    regex: "\\${1,2}",
                    next: "start"
                },
                {
                    token: "constant.character.escape",
                    regex: "\\\\(?:[^a-zA-Z]|[a-zA-Z]+)"
                },
                {
                    token: "error",
                    regex: "^\\s*$",
                    next: "start"
                },
                {
                    defaultToken: "string"
                }
            ],
            "verbatim": [
                {
                    token: [
                        "storage.type",
                        "lparen",
                        "variable.parameter",
                        "rparen"
                    ],
                    regex: "(\\\\end)({)(verbatim)(})",
                    next: "start"
                },
                {
                    defaultToken: "text"
                }
            ],
            "lstlisting": [
                {
                    token: [
                        "storage.type",
                        "lparen",
                        "variable.parameter",
                        "rparen"
                    ],
                    regex: "(\\\\end)({)(lstlisting)(})",
                    next: "start"
                },
                {
                    defaultToken: "text"
                }
            ]
        };
        this.normalizeRules();
    };
    oop.inherits(LatexHighlightRules, TextHighlightRules);
    exports.LatexHighlightRules = LatexHighlightRules;
});
ace.define("ace/mode/folding/latex", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/mode/folding/fold_mode",
    "ace/range",
    "ace/token_iterator"
], function(acequire, exports, module) {
    var oop = acequire("../../lib/oop");
    var BaseFoldMode = acequire("./fold_mode").FoldMode;
    var Range1 = acequire("../../range").Range;
    var TokenIterator = acequire("../../token_iterator").TokenIterator;
    var keywordLevels = {
        "\\subparagraph": 1,
        "\\paragraph": 2,
        "\\subsubsubsection": 3,
        "\\subsubsection": 4,
        "\\subsection": 5,
        "\\section": 6,
        "\\chapter": 7,
        "\\part": 8,
        "\\begin": 9,
        "\\end": 10
    };
    var FoldMode = exports.FoldMode = function() {
    };
    oop.inherits(FoldMode, BaseFoldMode);
    (function() {
        this.foldingStartMarker = /^\s*\\(begin)|\s*\\(part|chapter|(?:sub)*(?:section|paragraph))\b|{\s*$/;
        this.foldingStopMarker = /^\s*\\(end)\b|^\s*}/;
        this.getFoldWidgetRange = function(session, foldStyle, row) {
            var line = session.doc.getLine(row);
            var match = this.foldingStartMarker.exec(line);
            if (match) {
                if (match[1]) return this.latexBlock(session, row, match[0].length - 1);
                if (match[2]) return this.latexSection(session, row, match[0].length - 1);
                return this.openingBracketBlock(session, "{", row, match.index);
            }
            var match = this.foldingStopMarker.exec(line);
            if (match) {
                if (match[1]) return this.latexBlock(session, row, match[0].length - 1);
                return this.closingBracketBlock(session, "}", row, match.index + match[0].length);
            }
        };
        this.latexBlock = function(session, row, column, returnRange) {
            var keywords = {
                "\\begin": 1,
                "\\end": -1
            };
            var stream = new TokenIterator(session, row, column);
            var token = stream.getCurrentToken();
            if (!token || !(token.type == "storage.type" || token.type == "constant.character.escape")) return;
            var val = token.value;
            var dir = keywords[val];
            var getType = function() {
                var token1 = stream.stepForward();
                var type = token1.type == "lparen" ? stream.stepForward().value : "";
                if (dir === -1) {
                    stream.stepBackward();
                    if (type) stream.stepBackward();
                }
                return type;
            };
            var stack = [
                getType()
            ];
            var startColumn = dir === -1 ? stream.getCurrentTokenColumn() : session.getLine(row).length;
            var startRow = row;
            stream.step = dir === -1 ? stream.stepBackward : stream.stepForward;
            while(token = stream.step()){
                if (!token || !(token.type == "storage.type" || token.type == "constant.character.escape")) continue;
                var level = keywords[token.value];
                if (!level) continue;
                var type = getType();
                if (level === dir) stack.unshift(type);
                else if (stack.shift() !== type || !stack.length) break;
            }
            if (stack.length) return;
            if (dir == 1) {
                stream.stepBackward();
                stream.stepBackward();
            }
            if (returnRange) return stream.getCurrentTokenRange();
            var row = stream.getCurrentTokenRow();
            if (dir === -1) return new Range1(row, session.getLine(row).length, startRow, startColumn);
            else return new Range1(startRow, startColumn, row, stream.getCurrentTokenColumn());
        };
        this.latexSection = function(session, row, column) {
            var stream = new TokenIterator(session, row, column);
            var token = stream.getCurrentToken();
            if (!token || token.type != "storage.type") return;
            var startLevel = keywordLevels[token.value] || 0;
            var stackDepth = 0;
            var endRow = row;
            while(token = stream.stepForward()){
                if (token.type !== "storage.type") continue;
                var level = keywordLevels[token.value] || 0;
                if (level >= 9) {
                    if (!stackDepth) endRow = stream.getCurrentTokenRow() - 1;
                    stackDepth += level == 9 ? 1 : -1;
                    if (stackDepth < 0) break;
                } else if (level >= startLevel) break;
            }
            if (!stackDepth) endRow = stream.getCurrentTokenRow() - 1;
            while(endRow > row && !/\S/.test(session.getLine(endRow)))endRow--;
            return new Range1(row, session.getLine(row).length, endRow, session.getLine(endRow).length);
        };
    }).call(FoldMode.prototype);
});
ace.define("ace/mode/latex", [
    "require",
    "exports",
    "module",
    "ace/lib/oop",
    "ace/mode/text",
    "ace/mode/latex_highlight_rules",
    "ace/mode/behaviour/cstyle",
    "ace/mode/folding/latex"
], function(acequire, exports, module) {
    var oop = acequire("../lib/oop");
    var TextMode = acequire("./text").Mode;
    var LatexHighlightRules = acequire("./latex_highlight_rules").LatexHighlightRules;
    var CstyleBehaviour = acequire("./behaviour/cstyle").CstyleBehaviour;
    var LatexFoldMode = acequire("./folding/latex").FoldMode;
    var Mode = function() {
        this.HighlightRules = LatexHighlightRules;
        this.foldingRules = new LatexFoldMode();
        this.$behaviour = new CstyleBehaviour({
            braces: true
        });
    };
    oop.inherits(Mode, TextMode);
    (function() {
        this.type = "text";
        this.lineCommentStart = "%";
        this.$id = "ace/mode/latex";
        this.getMatching = function(session, row, column) {
            if (row == undefined) row = session.selection.lead;
            if (typeof row == "object") {
                column = row.column;
                row = row.row;
            }
            var startToken = session.getTokenAt(row, column);
            if (!startToken) return;
            if (startToken.value == "\\begin" || startToken.value == "\\end") return this.foldingRules.latexBlock(session, row, column, true);
        };
    }).call(Mode.prototype);
    exports.Mode = Mode;
});

},{}],"7BASf":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.mathjax = void 0;
var HandlerList_js_1 = require("./core/HandlerList.js");
var Retries_js_1 = require("./util/Retries.js");
exports.mathjax = {
    version: '3.1.4',
    handlers: new HandlerList_js_1.HandlerList(),
    document: function(document, options) {
        return exports.mathjax.handlers.document(document, options);
    },
    handleRetriesFor: Retries_js_1.handleRetriesFor,
    retryAfter: Retries_js_1.retryAfter,
    asyncLoad: null
};

},{"./core/HandlerList.js":"COnBd","./util/Retries.js":"6iIJ2"}],"COnBd":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.HandlerList = void 0;
var PrioritizedList_js_1 = require("../util/PrioritizedList.js");
var HandlerList1 = function(_super) {
    __extends(HandlerList2, _super);
    function HandlerList2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HandlerList2.prototype.register = function(handler) {
        return this.add(handler, handler.priority);
    };
    HandlerList2.prototype.unregister = function(handler) {
        this.remove(handler);
    };
    HandlerList2.prototype.handlesDocument = function(document) {
        var e_1, _a;
        try {
            for(var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()){
                var item = _c.value;
                var handler = item.item;
                if (handler.handlesDocument(document)) return handler;
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        throw new Error("Can't find handler for document");
    };
    HandlerList2.prototype.document = function(document, options) {
        if (options === void 0) options = null;
        return this.handlesDocument(document).create(document, options);
    };
    return HandlerList2;
}(PrioritizedList_js_1.PrioritizedList);
exports.HandlerList = HandlerList1;

},{"../util/PrioritizedList.js":"2BcDG"}],"2BcDG":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.PrioritizedList = void 0;
var PrioritizedList = function() {
    function PrioritizedList1() {
        this.items = [];
        this.items = [];
    }
    PrioritizedList1.prototype[Symbol.iterator] = function() {
        var i = 0;
        var items = this.items;
        return {
            next: function() {
                return {
                    value: items[i++],
                    done: i > items.length
                };
            }
        };
    };
    PrioritizedList1.prototype.add = function(item, priority) {
        if (priority === void 0) priority = PrioritizedList1.DEFAULTPRIORITY;
        var i = this.items.length;
        do i--;
        while (i >= 0 && priority < this.items[i].priority)
        this.items.splice(i + 1, 0, {
            item: item,
            priority: priority
        });
        return item;
    };
    PrioritizedList1.prototype.remove = function(item) {
        var i = this.items.length;
        do i--;
        while (i >= 0 && this.items[i].item !== item)
        if (i >= 0) this.items.splice(i, 1);
    };
    PrioritizedList1.prototype.toArray = function() {
        return Array.from(this);
    };
    PrioritizedList1.DEFAULTPRIORITY = 5;
    return PrioritizedList1;
}();
exports.PrioritizedList = PrioritizedList;

},{}],"6iIJ2":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.retryAfter = exports.handleRetriesFor = void 0;
function handleRetriesFor(code) {
    return new Promise(function run(ok, fail) {
        try {
            ok(code());
        } catch (err) {
            if (err.retry && err.retry instanceof Promise) err.retry.then(function() {
                return run(ok, fail);
            }).catch(function(perr) {
                return fail(perr);
            });
            else if (err.restart && err.restart.isCallback) MathJax.Callback.After(function() {
                return run(ok, fail);
            }, err.restart);
            else fail(err);
        }
    });
}
exports.handleRetriesFor = handleRetriesFor;
function retryAfter(promise) {
    var err = new Error('MathJax retry');
    err.retry = promise;
    throw err;
}
exports.retryAfter = retryAfter;

},{}],"7c9cR":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.TeX = void 0;
var InputJax_js_1 = require("../core/InputJax.js");
var Options_js_1 = require("../util/Options.js");
var FindTeX_js_1 = require("./tex/FindTeX.js");
var FilterUtil_js_1 = require("./tex/FilterUtil.js");
var NodeUtil_js_1 = require("./tex/NodeUtil.js");
var TexParser_js_1 = require("./tex/TexParser.js");
var TexError_js_1 = require("./tex/TexError.js");
var ParseOptions_js_1 = require("./tex/ParseOptions.js");
var Tags_js_1 = require("./tex/Tags.js");
var Configuration_js_1 = require("./tex/Configuration.js");
require("./tex/base/BaseConfiguration.js");
var TeX1 = function(_super) {
    __extends(TeX2, _super);
    function TeX2(options) {
        if (options === void 0) options = {
        };
        var _this = this;
        var _a = __read(Options_js_1.separateOptions(options, TeX2.OPTIONS, FindTeX_js_1.FindTeX.OPTIONS), 3), rest = _a[0], tex = _a[1], find = _a[2];
        _this = _super.call(this, tex) || this;
        _this.findTeX = _this.options['FindTeX'] || new FindTeX_js_1.FindTeX(find);
        var packages = _this.options.packages;
        var configuration = _this.configuration = TeX2.configure(packages);
        var parseOptions = _this._parseOptions = new ParseOptions_js_1.default(configuration, [
            _this.options,
            Tags_js_1.TagsFactory.OPTIONS
        ]);
        Options_js_1.userOptions(parseOptions.options, rest);
        configuration.config(_this);
        TeX2.tags(parseOptions, configuration);
        _this.postFilters.add(FilterUtil_js_1.default.cleanSubSup, -6);
        _this.postFilters.add(FilterUtil_js_1.default.setInherited, -5);
        _this.postFilters.add(FilterUtil_js_1.default.moveLimits, -4);
        _this.postFilters.add(FilterUtil_js_1.default.cleanStretchy, -3);
        _this.postFilters.add(FilterUtil_js_1.default.cleanAttributes, -2);
        _this.postFilters.add(FilterUtil_js_1.default.combineRelations, -1);
        return _this;
    }
    TeX2.configure = function(packages) {
        var configuration = new Configuration_js_1.ParserConfiguration(packages);
        configuration.init();
        return configuration;
    };
    TeX2.tags = function(options, configuration) {
        Tags_js_1.TagsFactory.addTags(configuration.tags);
        Tags_js_1.TagsFactory.setDefault(options.options.tags);
        options.tags = Tags_js_1.TagsFactory.getDefault();
        options.tags.configuration = options;
    };
    TeX2.prototype.setMmlFactory = function(mmlFactory) {
        _super.prototype.setMmlFactory.call(this, mmlFactory);
        this._parseOptions.nodeFactory.setMmlFactory(mmlFactory);
    };
    Object.defineProperty(TeX2.prototype, "parseOptions", {
        get: function() {
            return this._parseOptions;
        },
        enumerable: false,
        configurable: true
    });
    TeX2.prototype.reset = function(tag) {
        if (tag === void 0) tag = 0;
        this.parseOptions.tags.reset(tag);
    };
    TeX2.prototype.compile = function(math, document) {
        this.parseOptions.clear();
        this.executeFilters(this.preFilters, math, document, this.parseOptions);
        var display = math.display;
        this.latex = math.math;
        var node;
        this.parseOptions.tags.startEquation(math);
        try {
            var parser = new TexParser_js_1.default(this.latex, {
                display: display,
                isInner: false
            }, this.parseOptions);
            node = parser.mml();
        } catch (err) {
            if (!(err instanceof TexError_js_1.default)) throw err;
            this.parseOptions.error = true;
            node = this.options.formatError(this, err);
        }
        node = this.parseOptions.nodeFactory.create('node', 'math', [
            node
        ]);
        if (display) NodeUtil_js_1.default.setAttribute(node, 'display', 'block');
        this.parseOptions.tags.finishEquation(math);
        this.parseOptions.root = node;
        this.executeFilters(this.postFilters, math, document, this.parseOptions);
        this.mathNode = this.parseOptions.root;
        return this.mathNode;
    };
    TeX2.prototype.findMath = function(strings) {
        return this.findTeX.findMath(strings);
    };
    TeX2.prototype.formatError = function(err) {
        var message = err.message.replace(/\n.*/, '');
        return this.parseOptions.nodeFactory.create('error', message, err.id, this.latex);
    };
    TeX2.NAME = 'TeX';
    TeX2.OPTIONS = __assign(__assign({
    }, InputJax_js_1.AbstractInputJax.OPTIONS), {
        FindTeX: null,
        packages: [
            'base'
        ],
        digits: /^(?:[0-9]+(?:\{,\}[0-9]{3})*(?:\.[0-9]*)?|\.[0-9]+)/,
        maxBuffer: 5120,
        formatError: function(jax, err) {
            return jax.formatError(err);
        }
    });
    return TeX2;
}(InputJax_js_1.AbstractInputJax);
exports.TeX = TeX1;

},{"../core/InputJax.js":"2OAtQ","../util/Options.js":"3Dh3w","./tex/FindTeX.js":"1wGo3","./tex/FilterUtil.js":"2NMaT","./tex/NodeUtil.js":"If5yR","./tex/TexParser.js":"RI8aV","./tex/TexError.js":"7EfV4","./tex/ParseOptions.js":"7bnKU","./tex/Tags.js":"5I8xM","./tex/Configuration.js":"2ZNEp","./tex/base/BaseConfiguration.js":"1cNwT"}],"2OAtQ":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractInputJax = void 0;
var Options_js_1 = require("../util/Options.js");
var FunctionList_js_1 = require("../util/FunctionList.js");
var AbstractInputJax = function() {
    function AbstractInputJax1(options) {
        if (options === void 0) options = {
        };
        this.adaptor = null;
        this.mmlFactory = null;
        var CLASS = this.constructor;
        this.options = Options_js_1.userOptions(Options_js_1.defaultOptions({
        }, CLASS.OPTIONS), options);
        this.preFilters = new FunctionList_js_1.FunctionList();
        this.postFilters = new FunctionList_js_1.FunctionList();
    }
    Object.defineProperty(AbstractInputJax1.prototype, "name", {
        get: function() {
            return this.constructor.NAME;
        },
        enumerable: false,
        configurable: true
    });
    AbstractInputJax1.prototype.setAdaptor = function(adaptor) {
        this.adaptor = adaptor;
    };
    AbstractInputJax1.prototype.setMmlFactory = function(mmlFactory) {
        this.mmlFactory = mmlFactory;
    };
    AbstractInputJax1.prototype.initialize = function() {
    };
    AbstractInputJax1.prototype.reset = function() {
        var _args = [];
        for(var _i = 0; _i < arguments.length; _i++)_args[_i] = arguments[_i];
    };
    Object.defineProperty(AbstractInputJax1.prototype, "processStrings", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    AbstractInputJax1.prototype.findMath = function(_node, _options) {
        return [];
    };
    AbstractInputJax1.prototype.executeFilters = function(filters, math, document, data) {
        var args = {
            math: math,
            document: document,
            data: data
        };
        filters.execute(args);
        return args.data;
    };
    AbstractInputJax1.NAME = 'generic';
    AbstractInputJax1.OPTIONS = {
    };
    return AbstractInputJax1;
}();
exports.AbstractInputJax = AbstractInputJax;

},{"../util/Options.js":"3Dh3w","../util/FunctionList.js":"2ed3w"}],"3Dh3w":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.separateOptions = exports.selectOptionsFromKeys = exports.selectOptions = exports.userOptions = exports.defaultOptions = exports.insert = exports.copy = exports.keys = exports.makeArray = exports.expandable = exports.Expandable = exports.REMOVE = exports.APPEND = void 0;
var OBJECT = {
}.constructor;
function isObject(obj) {
    return typeof obj === 'object' && obj !== null && (obj.constructor === OBJECT || obj.constructor === Expandable);
}
exports.APPEND = '[+]';
exports.REMOVE = '[-]';
var Expandable = function() {
    function Expandable1() {
    }
    return Expandable1;
}();
exports.Expandable = Expandable;
function expandable(def) {
    return Object.assign(Object.create(Expandable.prototype), def);
}
exports.expandable = expandable;
function makeArray(x) {
    return Array.isArray(x) ? x : [
        x
    ];
}
exports.makeArray = makeArray;
function keys(def) {
    if (!def) return [];
    return Object.keys(def).concat(Object.getOwnPropertySymbols(def));
}
exports.keys = keys;
function copy(def) {
    var e_1, _a;
    var props = {
    };
    try {
        for(var _b = __values(keys(def)), _c = _b.next(); !_c.done; _c = _b.next()){
            var key = _c.value;
            var prop = Object.getOwnPropertyDescriptor(def, key);
            var value = prop.value;
            if (Array.isArray(value)) prop.value = insert([], value, false);
            else if (isObject(value)) prop.value = copy(value);
            if (prop.enumerable) props[key] = prop;
        }
    } catch (e_1_1) {
        e_1 = {
            error: e_1_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        } finally{
            if (e_1) throw e_1.error;
        }
    }
    return Object.defineProperties(def.constructor === Expandable ? expandable({
    }) : {
    }, props);
}
exports.copy = copy;
function insert(dst, src, warn) {
    var e_2, _a;
    if (warn === void 0) warn = true;
    var _loop_1 = function(key) {
        if (warn && dst[key] === undefined && dst.constructor !== Expandable) {
            if (typeof key === 'symbol') key = key.toString();
            throw new Error('Invalid option "' + key + '" (no default value).');
        }
        var sval = src[key], dval = dst[key];
        if (isObject(sval) && dval !== null && (typeof dval === 'object' || typeof dval === 'function')) {
            var ids = keys(sval);
            if (Array.isArray(dval) && (ids.length === 1 && (ids[0] === exports.APPEND || ids[0] === exports.REMOVE) && Array.isArray(sval[ids[0]]) || ids.length === 2 && ids.sort().join(',') === exports.APPEND + ',' + exports.REMOVE && Array.isArray(sval[exports.APPEND]) && Array.isArray(sval[exports.REMOVE]))) {
                if (sval[exports.REMOVE]) dval = dst[key] = dval.filter(function(x) {
                    return sval[exports.REMOVE].indexOf(x) < 0;
                });
                if (sval[exports.APPEND]) dst[key] = __spreadArray(__spreadArray([], __read(dval)), __read(sval[exports.APPEND]));
            } else insert(dval, sval, warn);
        } else if (Array.isArray(sval)) {
            dst[key] = [];
            insert(dst[key], sval, false);
        } else if (isObject(sval)) dst[key] = copy(sval);
        else dst[key] = sval;
    };
    try {
        for(var _b = __values(keys(src)), _c = _b.next(); !_c.done; _c = _b.next()){
            var key = _c.value;
            _loop_1(key);
        }
    } catch (e_2_1) {
        e_2 = {
            error: e_2_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        } finally{
            if (e_2) throw e_2.error;
        }
    }
    return dst;
}
exports.insert = insert;
function defaultOptions(options) {
    var defs = [];
    for(var _i = 1; _i < arguments.length; _i++)defs[_i - 1] = arguments[_i];
    defs.forEach(function(def) {
        return insert(options, def, false);
    });
    return options;
}
exports.defaultOptions = defaultOptions;
function userOptions(options) {
    var defs = [];
    for(var _i = 1; _i < arguments.length; _i++)defs[_i - 1] = arguments[_i];
    defs.forEach(function(def) {
        return insert(options, def, true);
    });
    return options;
}
exports.userOptions = userOptions;
function selectOptions(options) {
    var e_3, _a;
    var keys1 = [];
    for(var _i = 1; _i < arguments.length; _i++)keys1[_i - 1] = arguments[_i];
    var subset = {
    };
    try {
        for(var keys_1 = __values(keys1), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()){
            var key = keys_1_1.value;
            if (options.hasOwnProperty(key)) subset[key] = options[key];
        }
    } catch (e_3_1) {
        e_3 = {
            error: e_3_1
        };
    } finally{
        try {
            if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);
        } finally{
            if (e_3) throw e_3.error;
        }
    }
    return subset;
}
exports.selectOptions = selectOptions;
function selectOptionsFromKeys(options, object) {
    return selectOptions.apply(void 0, __spreadArray([
        options
    ], __read(Object.keys(object))));
}
exports.selectOptionsFromKeys = selectOptionsFromKeys;
function separateOptions(options) {
    var e_4, _a, e_5, _b;
    var objects = [];
    for(var _i = 1; _i < arguments.length; _i++)objects[_i - 1] = arguments[_i];
    var results = [];
    try {
        for(var objects_1 = __values(objects), objects_1_1 = objects_1.next(); !objects_1_1.done; objects_1_1 = objects_1.next()){
            var object = objects_1_1.value;
            var exists = {
            }, missing = {
            };
            try {
                for(var _c = (e_5 = void 0, __values(Object.keys(options || {
                }))), _d = _c.next(); !_d.done; _d = _c.next()){
                    var key = _d.value;
                    (object[key] === undefined ? missing : exists)[key] = options[key];
                }
            } catch (e_5_1) {
                e_5 = {
                    error: e_5_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                } finally{
                    if (e_5) throw e_5.error;
                }
            }
            results.push(exists);
            options = missing;
        }
    } catch (e_4_1) {
        e_4 = {
            error: e_4_1
        };
    } finally{
        try {
            if (objects_1_1 && !objects_1_1.done && (_a = objects_1.return)) _a.call(objects_1);
        } finally{
            if (e_4) throw e_4.error;
        }
    }
    results.unshift(options);
    return results;
}
exports.separateOptions = separateOptions;

},{}],"2ed3w":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.FunctionList = void 0;
var PrioritizedList_js_1 = require("./PrioritizedList.js");
var FunctionList1 = function(_super) {
    __extends(FunctionList2, _super);
    function FunctionList2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FunctionList2.prototype.execute = function() {
        var e_1, _a;
        var data = [];
        for(var _i = 0; _i < arguments.length; _i++)data[_i] = arguments[_i];
        try {
            for(var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()){
                var item = _c.value;
                var result = item.item.apply(item, __spreadArray([], __read(data)));
                if (result === false) return false;
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        return true;
    };
    FunctionList2.prototype.asyncExecute = function() {
        var data = [];
        for(var _i = 0; _i < arguments.length; _i++)data[_i] = arguments[_i];
        var i = -1;
        var items = this.items;
        return new Promise(function(ok, fail) {
            (function execute() {
                var _a;
                while((++i) < items.length){
                    var result = (_a = items[i]).item.apply(_a, __spreadArray([], __read(data)));
                    if (result instanceof Promise) {
                        result.then(execute).catch(function(err) {
                            return fail(err);
                        });
                        return;
                    }
                    if (result === false) {
                        ok(false);
                        return;
                    }
                }
                ok(true);
            })();
        });
    };
    return FunctionList2;
}(PrioritizedList_js_1.PrioritizedList);
exports.FunctionList = FunctionList1;

},{"./PrioritizedList.js":"2BcDG"}],"1wGo3":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.FindTeX = void 0;
var FindMath_js_1 = require("../../core/FindMath.js");
var string_js_1 = require("../../util/string.js");
var MathItem_js_1 = require("../../core/MathItem.js");
var FindTeX1 = function(_super) {
    __extends(FindTeX2, _super);
    function FindTeX2(options) {
        var _this = _super.call(this, options) || this;
        _this.getPatterns();
        return _this;
    }
    FindTeX2.prototype.getPatterns = function() {
        var _this = this;
        var options = this.options;
        var starts = [], parts = [], subparts = [];
        this.end = {
        };
        this.env = this.sub = 0;
        var i = 1;
        options['inlineMath'].forEach(function(delims) {
            return _this.addPattern(starts, delims, false);
        });
        options['displayMath'].forEach(function(delims) {
            return _this.addPattern(starts, delims, true);
        });
        if (starts.length) parts.push(starts.sort(string_js_1.sortLength).join('|'));
        if (options['processEnvironments']) {
            parts.push('\\\\begin\\s*\\{([^}]*)\\}');
            this.env = i;
            i++;
        }
        if (options['processEscapes']) subparts.push('\\\\([\\\\$])');
        if (options['processRefs']) subparts.push('(\\\\(?:eq)?ref\\s*\\{[^}]*\\})');
        if (subparts.length) {
            parts.push('(' + subparts.join('|') + ')');
            this.sub = i;
        }
        this.start = new RegExp(parts.join('|'), 'g');
        this.hasPatterns = parts.length > 0;
    };
    FindTeX2.prototype.addPattern = function(starts, delims, display) {
        var _a = __read(delims, 2), open = _a[0], close = _a[1];
        starts.push(string_js_1.quotePattern(open));
        this.end[open] = [
            close,
            display,
            this.endPattern(close)
        ];
    };
    FindTeX2.prototype.endPattern = function(end, endp) {
        return new RegExp((endp || string_js_1.quotePattern(end)) + '|\\\\(?:[a-zA-Z]|.)|[{}]', 'g');
    };
    FindTeX2.prototype.findEnd = function(text, n, start, end) {
        var _a = __read(end, 3), close = _a[0], display = _a[1], pattern = _a[2];
        var i = pattern.lastIndex = start.index + start[0].length;
        var match, braces = 0;
        while(match = pattern.exec(text)){
            if ((match[1] || match[0]) === close && braces === 0) return MathItem_js_1.protoItem(start[0], text.substr(i, match.index - i), match[0], n, start.index, match.index + match[0].length, display);
            else if (match[0] === '{') braces++;
            else if (match[0] === '}' && braces) braces--;
        }
        return null;
    };
    FindTeX2.prototype.findMathInString = function(math, n, text) {
        var start, match;
        this.start.lastIndex = 0;
        while(start = this.start.exec(text)){
            if (start[this.env] !== undefined && this.env) {
                var end = '\\\\end\\s*(\\{' + string_js_1.quotePattern(start[this.env]) + '\\})';
                match = this.findEnd(text, n, start, [
                    '{' + start[this.env] + '}',
                    true,
                    this.endPattern(null, end)
                ]);
                if (match) {
                    match.math = match.open + match.math + match.close;
                    match.open = match.close = '';
                }
            } else if (start[this.sub] !== undefined && this.sub) {
                var math_1 = start[this.sub];
                var end = start.index + start[this.sub].length;
                if (math_1.length === 2) match = MathItem_js_1.protoItem('', math_1.substr(1), '', n, start.index, end);
                else match = MathItem_js_1.protoItem('', math_1, '', n, start.index, end, false);
            } else match = this.findEnd(text, n, start, this.end[start[0]]);
            if (match) {
                math.push(match);
                this.start.lastIndex = match.end.n;
            }
        }
    };
    FindTeX2.prototype.findMath = function(strings) {
        var math = [];
        if (this.hasPatterns) for(var i = 0, m = strings.length; i < m; i++)this.findMathInString(math, i, strings[i]);
        return math;
    };
    FindTeX2.OPTIONS = {
        inlineMath: [
            [
                '\\(',
                '\\)'
            ]
        ],
        displayMath: [
            [
                '$$',
                '$$'
            ],
            [
                '\\[',
                '\\]'
            ]
        ],
        processEscapes: true,
        processEnvironments: true,
        processRefs: true
    };
    return FindTeX2;
}(FindMath_js_1.AbstractFindMath);
exports.FindTeX = FindTeX1;

},{"../../core/FindMath.js":"1P8kg","../../util/string.js":"1fFM7","../../core/MathItem.js":"4DW4E"}],"1P8kg":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractFindMath = void 0;
var Options_js_1 = require("../util/Options.js");
var AbstractFindMath = function() {
    function AbstractFindMath1(options) {
        var CLASS = this.constructor;
        this.options = Options_js_1.userOptions(Options_js_1.defaultOptions({
        }, CLASS.OPTIONS), options);
    }
    AbstractFindMath1.OPTIONS = {
    };
    return AbstractFindMath1;
}();
exports.AbstractFindMath = AbstractFindMath;

},{"../util/Options.js":"3Dh3w"}],"1fFM7":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.split = exports.isPercent = exports.unicodeString = exports.unicodeChars = exports.quotePattern = exports.sortLength = void 0;
function sortLength(a, b) {
    return a.length !== b.length ? b.length - a.length : a === b ? 0 : a < b ? -1 : 1;
}
exports.sortLength = sortLength;
function quotePattern(text) {
    return text.replace(/([\^$(){}+*?\-|\[\]\:\\])/g, '\\$1');
}
exports.quotePattern = quotePattern;
function unicodeChars(text) {
    return Array.from(text).map(function(c) {
        return c.codePointAt(0);
    });
}
exports.unicodeChars = unicodeChars;
function unicodeString(data) {
    return String.fromCodePoint.apply(String, __spreadArray([], __read(data)));
}
exports.unicodeString = unicodeString;
function isPercent(x) {
    return !!x.match(/%\s*$/);
}
exports.isPercent = isPercent;
function split(x) {
    return x.trim().split(/\s+/);
}
exports.split = split;

},{}],"4DW4E":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.newState = exports.STATE = exports.AbstractMathItem = exports.protoItem = void 0;
function protoItem(open, math, close, n, start, end, display) {
    if (display === void 0) display = null;
    var item = {
        open: open,
        math: math,
        close: close,
        n: n,
        start: {
            n: start
        },
        end: {
            n: end
        },
        display: display
    };
    return item;
}
exports.protoItem = protoItem;
var AbstractMathItem = function() {
    function AbstractMathItem1(math, jax, display, start, end) {
        if (display === void 0) display = true;
        if (start === void 0) start = {
            i: 0,
            n: 0,
            delim: ''
        };
        if (end === void 0) end = {
            i: 0,
            n: 0,
            delim: ''
        };
        this.root = null;
        this.typesetRoot = null;
        this.metrics = {
        };
        this.inputData = {
        };
        this.outputData = {
        };
        this._state = exports.STATE.UNPROCESSED;
        this.math = math;
        this.inputJax = jax;
        this.display = display;
        this.start = start;
        this.end = end;
        this.root = null;
        this.typesetRoot = null;
        this.metrics = {
        };
        this.inputData = {
        };
        this.outputData = {
        };
    }
    Object.defineProperty(AbstractMathItem1.prototype, "isEscaped", {
        get: function() {
            return this.display === null;
        },
        enumerable: false,
        configurable: true
    });
    AbstractMathItem1.prototype.render = function(document) {
        document.renderActions.renderMath(this, document);
    };
    AbstractMathItem1.prototype.rerender = function(document, start) {
        if (start === void 0) start = exports.STATE.RERENDER;
        if (this.state() >= start) this.state(start - 1);
        document.renderActions.renderMath(this, document, start);
    };
    AbstractMathItem1.prototype.convert = function(document, end) {
        if (end === void 0) end = exports.STATE.LAST;
        document.renderActions.renderConvert(this, document, end);
    };
    AbstractMathItem1.prototype.compile = function(document) {
        if (this.state() < exports.STATE.COMPILED) {
            this.root = this.inputJax.compile(this, document);
            this.state(exports.STATE.COMPILED);
        }
    };
    AbstractMathItem1.prototype.typeset = function(document) {
        if (this.state() < exports.STATE.TYPESET) {
            this.typesetRoot = document.outputJax[this.isEscaped ? 'escaped' : 'typeset'](this, document);
            this.state(exports.STATE.TYPESET);
        }
    };
    AbstractMathItem1.prototype.updateDocument = function(_document) {
    };
    AbstractMathItem1.prototype.removeFromDocument = function(_restore) {
        if (_restore === void 0) _restore = false;
    };
    AbstractMathItem1.prototype.setMetrics = function(em, ex, cwidth, lwidth, scale) {
        this.metrics = {
            em: em,
            ex: ex,
            containerWidth: cwidth,
            lineWidth: lwidth,
            scale: scale
        };
    };
    AbstractMathItem1.prototype.state = function(state, restore) {
        if (state === void 0) state = null;
        if (restore === void 0) restore = false;
        if (state != null) {
            if (state < exports.STATE.INSERTED && this._state >= exports.STATE.INSERTED) this.removeFromDocument(restore);
            if (state < exports.STATE.TYPESET && this._state >= exports.STATE.TYPESET) this.outputData = {
            };
            if (state < exports.STATE.COMPILED && this._state >= exports.STATE.COMPILED) this.inputData = {
            };
            this._state = state;
        }
        return this._state;
    };
    AbstractMathItem1.prototype.reset = function(restore) {
        if (restore === void 0) restore = false;
        this.state(exports.STATE.UNPROCESSED, restore);
    };
    return AbstractMathItem1;
}();
exports.AbstractMathItem = AbstractMathItem;
exports.STATE = {
    UNPROCESSED: 0,
    FINDMATH: 10,
    COMPILED: 20,
    CONVERT: 100,
    METRICS: 110,
    RERENDER: 125,
    TYPESET: 150,
    INSERTED: 200,
    LAST: 10000
};
function newState(name, state) {
    if (name in exports.STATE) throw Error('State ' + name + ' already exists');
    exports.STATE[name] = state;
}
exports.newState = newState;

},{}],"2NMaT":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
var MmlNode_js_1 = require("../../core/MmlTree/MmlNode.js");
var NodeUtil_js_1 = require("./NodeUtil.js");
var FilterUtil;
(function(FilterUtil1) {
    FilterUtil1.cleanStretchy = function(arg) {
        var e_1, _a;
        var options = arg.data;
        try {
            for(var _b = __values(options.getList('fixStretchy')), _c = _b.next(); !_c.done; _c = _b.next()){
                var mo = _c.value;
                if (NodeUtil_js_1.default.getProperty(mo, 'fixStretchy')) {
                    var symbol = NodeUtil_js_1.default.getForm(mo);
                    if (symbol && symbol[3] && symbol[3]['stretchy']) NodeUtil_js_1.default.setAttribute(mo, 'stretchy', false);
                    var parent_1 = mo.parent;
                    if (!NodeUtil_js_1.default.getTexClass(mo) && (!symbol || !symbol[2])) {
                        var texAtom = options.nodeFactory.create('node', 'TeXAtom', [
                            mo
                        ]);
                        parent_1.replaceChild(texAtom, mo);
                        texAtom.inheritAttributesFrom(mo);
                    }
                    NodeUtil_js_1.default.removeProperties(mo, 'fixStretchy');
                }
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    };
    FilterUtil1.cleanAttributes = function(arg) {
        var node = arg.data.root;
        node.walkTree(function(mml, _d) {
            var e_2, _a;
            var attribs = mml.attributes;
            if (!attribs) return;
            try {
                for(var _b = __values(attribs.getExplicitNames()), _c = _b.next(); !_c.done; _c = _b.next()){
                    var key = _c.value;
                    if (attribs.attributes[key] === mml.attributes.getInherited(key)) delete attribs.attributes[key];
                }
            } catch (e_2_1) {
                e_2 = {
                    error: e_2_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_2) throw e_2.error;
                }
            }
        }, {
        });
    };
    FilterUtil1.combineRelations = function(arg) {
        var e_3, _a;
        try {
            for(var _b = __values(arg.data.getList('mo')), _c = _b.next(); !_c.done; _c = _b.next()){
                var mo = _c.value;
                if (mo.getProperty('relationsCombined') || !mo.parent || mo.parent && !NodeUtil_js_1.default.isType(mo.parent, 'mrow') || NodeUtil_js_1.default.getTexClass(mo) !== MmlNode_js_1.TEXCLASS.REL) continue;
                var mml = mo.parent;
                var m2 = void 0;
                var children = mml.childNodes;
                var next = children.indexOf(mo) + 1;
                var variantForm = NodeUtil_js_1.default.getProperty(mo, 'variantForm');
                while(next < children.length && (m2 = children[next]) && NodeUtil_js_1.default.isType(m2, 'mo') && NodeUtil_js_1.default.getTexClass(m2) === MmlNode_js_1.TEXCLASS.REL)if (variantForm === NodeUtil_js_1.default.getProperty(m2, 'variantForm') && _compareExplicit(mo, m2)) {
                    NodeUtil_js_1.default.appendChildren(mo, NodeUtil_js_1.default.getChildren(m2));
                    _copyExplicit([
                        'stretchy',
                        'rspace'
                    ], mo, m2);
                    NodeUtil_js_1.default.setProperties(mo, m2.getAllProperties());
                    children.splice(next, 1);
                    m2.parent = null;
                    m2.setProperty('relationsCombined', true);
                } else {
                    if (mo.attributes.getExplicit('rspace') == null) NodeUtil_js_1.default.setAttribute(mo, 'rspace', '0pt');
                    if (m2.attributes.getExplicit('lspace') == null) NodeUtil_js_1.default.setAttribute(m2, 'lspace', '0pt');
                    break;
                }
                mo.attributes.setInherited('form', mo.getForms()[0]);
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
    };
    var _copyExplicit = function(attrs, node1, node2) {
        var attr1 = node1.attributes;
        var attr2 = node2.attributes;
        attrs.forEach(function(x) {
            var attr = attr2.getExplicit(x);
            if (attr != null) attr1.set(x, attr);
        });
    };
    var _compareExplicit = function(node1, node2) {
        var e_4, _a;
        var filter = function(attr, space) {
            var exp = attr.getExplicitNames();
            return exp.filter(function(x) {
                return x !== space && (x !== 'stretchy' || attr.getExplicit('stretchy'));
            });
        };
        var attr1 = node1.attributes;
        var attr2 = node2.attributes;
        var exp1 = filter(attr1, 'lspace');
        var exp2 = filter(attr2, 'rspace');
        if (exp1.length !== exp2.length) return false;
        try {
            for(var exp1_1 = __values(exp1), exp1_1_1 = exp1_1.next(); !exp1_1_1.done; exp1_1_1 = exp1_1.next()){
                var name_1 = exp1_1_1.value;
                if (attr1.getExplicit(name_1) !== attr2.getExplicit(name_1)) return false;
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (exp1_1_1 && !exp1_1_1.done && (_a = exp1_1.return)) _a.call(exp1_1);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
        return true;
    };
    var _cleanSubSup = function(options, low, up) {
        var e_5, _a;
        try {
            for(var _b = __values(options.getList('m' + low + up)), _c = _b.next(); !_c.done; _c = _b.next()){
                var mml = _c.value;
                var children = mml.childNodes;
                if (children[mml[low]] && children[mml[up]]) continue;
                var parent_2 = mml.parent;
                var newNode = children[mml[low]] ? options.nodeFactory.create('node', 'm' + low, [
                    children[mml.base],
                    children[mml[low]]
                ]) : options.nodeFactory.create('node', 'm' + up, [
                    children[mml.base],
                    children[mml[up]]
                ]);
                NodeUtil_js_1.default.copyAttributes(mml, newNode);
                if (parent_2) parent_2.replaceChild(newNode, mml);
                else options.root = newNode;
            }
        } catch (e_5_1) {
            e_5 = {
                error: e_5_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_5) throw e_5.error;
            }
        }
    };
    FilterUtil1.cleanSubSup = function(arg) {
        var options = arg.data;
        if (options.error) return;
        _cleanSubSup(options, 'sub', 'sup');
        _cleanSubSup(options, 'under', 'over');
    };
    var _moveLimits = function(options, underover, subsup) {
        var e_6, _a;
        try {
            for(var _b = __values(options.getList(underover)), _c = _b.next(); !_c.done; _c = _b.next()){
                var mml = _c.value;
                if (mml.attributes.get('displaystyle')) continue;
                var base = mml.childNodes[mml.base];
                var mo = base.coreMO();
                if (base.getProperty('movablelimits') && !mo.attributes.getExplicit('movablelimits')) {
                    var node = options.nodeFactory.create('node', subsup, mml.childNodes);
                    NodeUtil_js_1.default.copyAttributes(mml, node);
                    if (mml.parent) mml.parent.replaceChild(node, mml);
                    else options.root = node;
                }
            }
        } catch (e_6_1) {
            e_6 = {
                error: e_6_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_6) throw e_6.error;
            }
        }
    };
    FilterUtil1.moveLimits = function(arg) {
        var options = arg.data;
        _moveLimits(options, 'munderover', 'msubsup');
        _moveLimits(options, 'munder', 'msub');
        _moveLimits(options, 'mover', 'msup');
    };
    FilterUtil1.setInherited = function(arg) {
        arg.data.root.setInheritedAttributes({
        }, arg.math['display'], 0, false);
    };
})(FilterUtil || (FilterUtil = {
}));
exports.default = FilterUtil;

},{"../../core/MmlTree/MmlNode.js":"5Ogy3","./NodeUtil.js":"If5yR"}],"5Ogy3":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.XMLNode = exports.TextNode = exports.AbstractMmlEmptyNode = exports.AbstractMmlBaseNode = exports.AbstractMmlLayoutNode = exports.AbstractMmlTokenNode = exports.AbstractMmlNode = exports.indentAttributes = exports.TEXCLASSNAMES = exports.TEXCLASS = void 0;
var Attributes_js_1 = require("./Attributes.js");
var Node_js_1 = require("../Tree/Node.js");
exports.TEXCLASS = {
    ORD: 0,
    OP: 1,
    BIN: 2,
    REL: 3,
    OPEN: 4,
    CLOSE: 5,
    PUNCT: 6,
    INNER: 7,
    VCENTER: 8,
    NONE: -1
};
exports.TEXCLASSNAMES = [
    'ORD',
    'OP',
    'BIN',
    'REL',
    'OPEN',
    'CLOSE',
    'PUNCT',
    'INNER',
    'VCENTER'
];
var TEXSPACELENGTH = [
    '',
    'thinmathspace',
    'mediummathspace',
    'thickmathspace'
];
var TEXSPACE = [
    [
        0,
        -1,
        2,
        3,
        0,
        0,
        0,
        1
    ],
    [
        -1,
        -1,
        0,
        3,
        0,
        0,
        0,
        1
    ],
    [
        2,
        2,
        0,
        0,
        2,
        0,
        0,
        2
    ],
    [
        3,
        3,
        0,
        0,
        3,
        0,
        0,
        3
    ],
    [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
    ],
    [
        0,
        -1,
        2,
        3,
        0,
        0,
        0,
        1
    ],
    [
        1,
        1,
        0,
        1,
        1,
        1,
        1,
        1
    ],
    [
        1,
        -1,
        2,
        3,
        1,
        0,
        1,
        1
    ]
];
exports.indentAttributes = [
    'indentalign',
    'indentalignfirst',
    'indentshift',
    'indentshiftfirst'
];
var AbstractMmlNode1 = function(_super) {
    __extends(AbstractMmlNode2, _super);
    function AbstractMmlNode2(factory, attributes, children) {
        if (attributes === void 0) attributes = {
        };
        if (children === void 0) children = [];
        var _this = _super.call(this, factory) || this;
        _this.prevClass = null;
        _this.prevLevel = null;
        _this.texclass = null;
        _this.beginLoc = null;
        _this.endLoc = null;
        if (_this.arity < 0) {
            _this.childNodes = [
                factory.create('inferredMrow')
            ];
            _this.childNodes[0].parent = _this;
        }
        _this.setChildren(children);
        _this.attributes = new Attributes_js_1.Attributes(factory.getNodeClass(_this.kind).defaults, factory.getNodeClass('math').defaults);
        _this.attributes.setList(attributes);
        return _this;
    }
    Object.defineProperty(AbstractMmlNode2.prototype, "texClass", {
        get: function() {
            return this.texclass;
        },
        set: function(texClass) {
            this.texclass = texClass;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlNode2.prototype, "isToken", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlNode2.prototype, "isEmbellished", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlNode2.prototype, "isSpacelike", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlNode2.prototype, "linebreakContainer", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlNode2.prototype, "hasNewLine", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlNode2.prototype, "arity", {
        get: function() {
            return Infinity;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlNode2.prototype, "isInferred", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlNode2.prototype, "Parent", {
        get: function() {
            var parent = this.parent;
            while(parent && parent.notParent)parent = parent.Parent;
            return parent;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlNode2.prototype, "notParent", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    AbstractMmlNode2.prototype.setChildren = function(children) {
        if (this.arity < 0) return this.childNodes[0].setChildren(children);
        return _super.prototype.setChildren.call(this, children);
    };
    AbstractMmlNode2.prototype.appendChild = function(child) {
        var e_1, _a;
        var _this = this;
        if (this.arity < 0) {
            this.childNodes[0].appendChild(child);
            return child;
        }
        if (child.isInferred) {
            if (this.arity === Infinity) {
                child.childNodes.forEach(function(node) {
                    return _super.prototype.appendChild.call(_this, node);
                });
                return child;
            }
            var original = child;
            child = this.factory.create('mrow');
            child.setChildren(original.childNodes);
            child.attributes = original.attributes;
            try {
                for(var _b = __values(original.getPropertyNames()), _c = _b.next(); !_c.done; _c = _b.next()){
                    var name_1 = _c.value;
                    child.setProperty(name_1, original.getProperty(name_1));
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
        }
        return _super.prototype.appendChild.call(this, child);
    };
    AbstractMmlNode2.prototype.replaceChild = function(newChild, oldChild) {
        if (this.arity < 0) {
            this.childNodes[0].replaceChild(newChild, oldChild);
            return newChild;
        }
        return _super.prototype.replaceChild.call(this, newChild, oldChild);
    };
    AbstractMmlNode2.prototype.core = function() {
        return this;
    };
    AbstractMmlNode2.prototype.coreMO = function() {
        return this;
    };
    AbstractMmlNode2.prototype.coreIndex = function() {
        return 0;
    };
    AbstractMmlNode2.prototype.childPosition = function() {
        var e_2, _a;
        var child = this;
        var parent = child.parent;
        while(parent && parent.notParent){
            child = parent;
            parent = parent.parent;
        }
        if (parent) {
            var i = 0;
            try {
                for(var _b = __values(parent.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                    var node = _c.value;
                    if (node === child) return i;
                    i++;
                }
            } catch (e_2_1) {
                e_2 = {
                    error: e_2_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_2) throw e_2.error;
                }
            }
        }
        return null;
    };
    AbstractMmlNode2.prototype.setTeXclass = function(prev) {
        this.getPrevClass(prev);
        return this.texClass != null ? this : prev;
    };
    AbstractMmlNode2.prototype.updateTeXclass = function(core) {
        if (core) {
            this.prevClass = core.prevClass;
            this.prevLevel = core.prevLevel;
            core.prevClass = core.prevLevel = null;
            this.texClass = core.texClass;
        }
    };
    AbstractMmlNode2.prototype.getPrevClass = function(prev) {
        if (prev) {
            this.prevClass = prev.texClass;
            this.prevLevel = prev.attributes.get('scriptlevel');
        }
    };
    AbstractMmlNode2.prototype.texSpacing = function() {
        var prevClass = this.prevClass != null ? this.prevClass : exports.TEXCLASS.NONE;
        var texClass = this.texClass || exports.TEXCLASS.ORD;
        if (prevClass === exports.TEXCLASS.NONE || texClass === exports.TEXCLASS.NONE) return '';
        if (prevClass === exports.TEXCLASS.VCENTER) prevClass = exports.TEXCLASS.ORD;
        if (texClass === exports.TEXCLASS.VCENTER) texClass = exports.TEXCLASS.ORD;
        var space = TEXSPACE[prevClass][texClass];
        if ((this.prevLevel > 0 || this.attributes.get('scriptlevel') > 0) && space >= 0) return '';
        return TEXSPACELENGTH[Math.abs(space)];
    };
    AbstractMmlNode2.prototype.hasSpacingAttributes = function() {
        return this.isEmbellished && this.coreMO().hasSpacingAttributes();
    };
    AbstractMmlNode2.prototype.setInheritedAttributes = function(attributes, display, level, prime) {
        var e_3, _a;
        if (attributes === void 0) attributes = {
        };
        if (display === void 0) display = false;
        if (level === void 0) level = 0;
        if (prime === void 0) prime = false;
        var defaults = this.attributes.getAllDefaults();
        try {
            for(var _b = __values(Object.keys(attributes)), _c = _b.next(); !_c.done; _c = _b.next()){
                var key = _c.value;
                if (defaults.hasOwnProperty(key) || AbstractMmlNode2.alwaysInherit.hasOwnProperty(key)) {
                    var _d = __read(attributes[key], 2), node = _d[0], value = _d[1];
                    var noinherit = (AbstractMmlNode2.noInherit[node] || {
                    })[this.kind] || {
                    };
                    if (!noinherit[key]) this.attributes.setInherited(key, value);
                }
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        var displaystyle = this.attributes.getExplicit('displaystyle');
        if (displaystyle === undefined) this.attributes.setInherited('displaystyle', display);
        var scriptlevel = this.attributes.getExplicit('scriptlevel');
        if (scriptlevel === undefined) this.attributes.setInherited('scriptlevel', level);
        if (prime) this.setProperty('texprimestyle', prime);
        var arity = this.arity;
        if (arity >= 0 && arity !== Infinity && (arity === 1 && this.childNodes.length === 0 || arity !== 1 && this.childNodes.length !== arity)) {
            if (arity < this.childNodes.length) this.childNodes = this.childNodes.slice(0, arity);
            else while(this.childNodes.length < arity)this.appendChild(this.factory.create('mrow'));
        }
        this.setChildInheritedAttributes(attributes, display, level, prime);
    };
    AbstractMmlNode2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        var e_4, _a;
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                child.setInheritedAttributes(attributes, display, level, prime);
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
    };
    AbstractMmlNode2.prototype.addInheritedAttributes = function(current, attributes) {
        var e_5, _a;
        var updated = __assign({
        }, current);
        try {
            for(var _b = __values(Object.keys(attributes)), _c = _b.next(); !_c.done; _c = _b.next()){
                var name_2 = _c.value;
                if (name_2 !== 'displaystyle' && name_2 !== 'scriptlevel' && name_2 !== 'style') updated[name_2] = [
                    this.kind,
                    attributes[name_2]
                ];
            }
        } catch (e_5_1) {
            e_5 = {
                error: e_5_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_5) throw e_5.error;
            }
        }
        return updated;
    };
    AbstractMmlNode2.prototype.inheritAttributesFrom = function(node) {
        var attributes = node.attributes;
        var display = attributes.get('displaystyle');
        var scriptlevel = attributes.get('scriptlevel');
        var defaults = !attributes.isSet('mathsize') ? {
        } : {
            mathsize: [
                'math',
                attributes.get('mathsize')
            ]
        };
        var prime = node.getProperty('texprimestyle') || false;
        this.setInheritedAttributes(defaults, display, scriptlevel, prime);
    };
    AbstractMmlNode2.prototype.verifyTree = function(options) {
        if (options === void 0) options = null;
        if (options === null) return;
        this.verifyAttributes(options);
        var arity = this.arity;
        if (options['checkArity']) {
            if (arity >= 0 && arity !== Infinity && (arity === 1 && this.childNodes.length === 0 || arity !== 1 && this.childNodes.length !== arity)) this.mError('Wrong number of children for "' + this.kind + '" node', options, true);
        }
        this.verifyChildren(options);
    };
    AbstractMmlNode2.prototype.verifyAttributes = function(options) {
        var e_6, _a;
        if (options['checkAttributes']) {
            var attributes = this.attributes;
            var bad = [];
            try {
                for(var _b = __values(attributes.getExplicitNames()), _c = _b.next(); !_c.done; _c = _b.next()){
                    var name_3 = _c.value;
                    if (name_3.substr(0, 5) !== 'data-' && attributes.getDefault(name_3) === undefined && !name_3.match(/^(?:class|style|id|(?:xlink:)?href)$/)) bad.push(name_3);
                }
            } catch (e_6_1) {
                e_6 = {
                    error: e_6_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_6) throw e_6.error;
                }
            }
            if (bad.length) this.mError('Unknown attributes for ' + this.kind + ' node: ' + bad.join(', '), options);
        }
    };
    AbstractMmlNode2.prototype.verifyChildren = function(options) {
        var e_7, _a;
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                child.verifyTree(options);
            }
        } catch (e_7_1) {
            e_7 = {
                error: e_7_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_7) throw e_7.error;
            }
        }
    };
    AbstractMmlNode2.prototype.mError = function(message, options, short) {
        if (short === void 0) short = false;
        if (this.parent && this.parent.isKind('merror')) return null;
        var merror = this.factory.create('merror');
        if (options['fullErrors'] || short) {
            var mtext = this.factory.create('mtext');
            var text = this.factory.create('text');
            text.setText(options['fullErrors'] ? message : this.kind);
            mtext.appendChild(text);
            merror.appendChild(mtext);
            this.parent.replaceChild(merror, this);
        } else {
            this.parent.replaceChild(merror, this);
            merror.appendChild(this);
        }
        return merror;
    };
    AbstractMmlNode2.defaults = {
        mathbackground: Attributes_js_1.INHERIT,
        mathcolor: Attributes_js_1.INHERIT,
        mathsize: Attributes_js_1.INHERIT,
        dir: Attributes_js_1.INHERIT
    };
    AbstractMmlNode2.noInherit = {
        mstyle: {
            mpadded: {
                width: true,
                height: true,
                depth: true,
                lspace: true,
                voffset: true
            },
            mtable: {
                width: true,
                height: true,
                depth: true,
                align: true
            }
        },
        maligngroup: {
            mrow: {
                groupalign: true
            },
            mtable: {
                groupalign: true
            }
        }
    };
    AbstractMmlNode2.alwaysInherit = {
        scriptminsize: true,
        scriptsizemultiplier: true
    };
    AbstractMmlNode2.verifyDefaults = {
        checkArity: true,
        checkAttributes: false,
        fullErrors: false,
        fixMmultiscripts: true,
        fixMtables: true
    };
    return AbstractMmlNode2;
}(Node_js_1.AbstractNode);
exports.AbstractMmlNode = AbstractMmlNode1;
var AbstractMmlTokenNode1 = function(_super) {
    __extends(AbstractMmlTokenNode2, _super);
    function AbstractMmlTokenNode2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(AbstractMmlTokenNode2.prototype, "isToken", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    AbstractMmlTokenNode2.prototype.getText = function() {
        var e_8, _a;
        var text = '';
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (child instanceof TextNode1) text += child.getText();
            }
        } catch (e_8_1) {
            e_8 = {
                error: e_8_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_8) throw e_8.error;
            }
        }
        return text;
    };
    AbstractMmlTokenNode2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        var e_9, _a;
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (child instanceof AbstractMmlNode1) child.setInheritedAttributes(attributes, display, level, prime);
            }
        } catch (e_9_1) {
            e_9 = {
                error: e_9_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_9) throw e_9.error;
            }
        }
    };
    AbstractMmlTokenNode2.prototype.walkTree = function(func, data) {
        var e_10, _a;
        func(this, data);
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (child instanceof AbstractMmlNode1) child.walkTree(func, data);
            }
        } catch (e_10_1) {
            e_10 = {
                error: e_10_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_10) throw e_10.error;
            }
        }
        return data;
    };
    AbstractMmlTokenNode2.defaults = __assign(__assign({
    }, AbstractMmlNode1.defaults), {
        mathvariant: 'normal',
        mathsize: Attributes_js_1.INHERIT
    });
    return AbstractMmlTokenNode2;
}(AbstractMmlNode1);
exports.AbstractMmlTokenNode = AbstractMmlTokenNode1;
var AbstractMmlLayoutNode1 = function(_super) {
    __extends(AbstractMmlLayoutNode2, _super);
    function AbstractMmlLayoutNode2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(AbstractMmlLayoutNode2.prototype, "isSpacelike", {
        get: function() {
            return this.childNodes[0].isSpacelike;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlLayoutNode2.prototype, "isEmbellished", {
        get: function() {
            return this.childNodes[0].isEmbellished;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlLayoutNode2.prototype, "arity", {
        get: function() {
            return -1;
        },
        enumerable: false,
        configurable: true
    });
    AbstractMmlLayoutNode2.prototype.core = function() {
        return this.childNodes[0];
    };
    AbstractMmlLayoutNode2.prototype.coreMO = function() {
        return this.childNodes[0].coreMO();
    };
    AbstractMmlLayoutNode2.prototype.setTeXclass = function(prev) {
        prev = this.childNodes[0].setTeXclass(prev);
        this.updateTeXclass(this.childNodes[0]);
        return prev;
    };
    AbstractMmlLayoutNode2.defaults = AbstractMmlNode1.defaults;
    return AbstractMmlLayoutNode2;
}(AbstractMmlNode1);
exports.AbstractMmlLayoutNode = AbstractMmlLayoutNode1;
var AbstractMmlBaseNode1 = function(_super) {
    __extends(AbstractMmlBaseNode2, _super);
    function AbstractMmlBaseNode2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(AbstractMmlBaseNode2.prototype, "isEmbellished", {
        get: function() {
            return this.childNodes[0].isEmbellished;
        },
        enumerable: false,
        configurable: true
    });
    AbstractMmlBaseNode2.prototype.core = function() {
        return this.childNodes[0];
    };
    AbstractMmlBaseNode2.prototype.coreMO = function() {
        return this.childNodes[0].coreMO();
    };
    AbstractMmlBaseNode2.prototype.setTeXclass = function(prev) {
        var e_11, _a;
        this.getPrevClass(prev);
        this.texClass = exports.TEXCLASS.ORD;
        var base = this.childNodes[0];
        if (base) {
            if (this.isEmbellished || base.isKind('mi')) {
                prev = base.setTeXclass(prev);
                this.updateTeXclass(this.core());
            } else {
                base.setTeXclass(null);
                prev = this;
            }
        } else prev = this;
        try {
            for(var _b = __values(this.childNodes.slice(1)), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (child) child.setTeXclass(null);
            }
        } catch (e_11_1) {
            e_11 = {
                error: e_11_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_11) throw e_11.error;
            }
        }
        return prev;
    };
    AbstractMmlBaseNode2.defaults = AbstractMmlNode1.defaults;
    return AbstractMmlBaseNode2;
}(AbstractMmlNode1);
exports.AbstractMmlBaseNode = AbstractMmlBaseNode1;
var AbstractMmlEmptyNode1 = function(_super) {
    __extends(AbstractMmlEmptyNode2, _super);
    function AbstractMmlEmptyNode2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "isToken", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "isEmbellished", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "isSpacelike", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "linebreakContainer", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "hasNewLine", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "arity", {
        get: function() {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "isInferred", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "notParent", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "Parent", {
        get: function() {
            return this.parent;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "texClass", {
        get: function() {
            return exports.TEXCLASS.NONE;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "prevClass", {
        get: function() {
            return exports.TEXCLASS.NONE;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "prevLevel", {
        get: function() {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    AbstractMmlEmptyNode2.prototype.hasSpacingAttributes = function() {
        return false;
    };
    Object.defineProperty(AbstractMmlEmptyNode2.prototype, "attributes", {
        get: function() {
            return null;
        },
        enumerable: false,
        configurable: true
    });
    AbstractMmlEmptyNode2.prototype.core = function() {
        return this;
    };
    AbstractMmlEmptyNode2.prototype.coreMO = function() {
        return this;
    };
    AbstractMmlEmptyNode2.prototype.coreIndex = function() {
        return 0;
    };
    AbstractMmlEmptyNode2.prototype.childPosition = function() {
        return 0;
    };
    AbstractMmlEmptyNode2.prototype.setTeXclass = function(prev) {
        return prev;
    };
    AbstractMmlEmptyNode2.prototype.texSpacing = function() {
        return '';
    };
    AbstractMmlEmptyNode2.prototype.setInheritedAttributes = function(_attributes, _display, _level, _prime) {
    };
    AbstractMmlEmptyNode2.prototype.inheritAttributesFrom = function(_node) {
    };
    AbstractMmlEmptyNode2.prototype.verifyTree = function(_options) {
    };
    AbstractMmlEmptyNode2.prototype.mError = function(_message, _options, _short) {
        if (_short === void 0) _short = false;
    };
    return AbstractMmlEmptyNode2;
}(Node_js_1.AbstractEmptyNode);
exports.AbstractMmlEmptyNode = AbstractMmlEmptyNode1;
var TextNode1 = function(_super) {
    __extends(TextNode2, _super);
    function TextNode2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.text = '';
        return _this;
    }
    Object.defineProperty(TextNode2.prototype, "kind", {
        get: function() {
            return 'text';
        },
        enumerable: false,
        configurable: true
    });
    TextNode2.prototype.getText = function() {
        return this.text;
    };
    TextNode2.prototype.setText = function(text) {
        this.text = text;
        return this;
    };
    TextNode2.prototype.toString = function() {
        return this.text;
    };
    return TextNode2;
}(AbstractMmlEmptyNode1);
exports.TextNode = TextNode1;
var XMLNode1 = function(_super) {
    __extends(XMLNode2, _super);
    function XMLNode2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.xml = null;
        _this.adaptor = null;
        return _this;
    }
    Object.defineProperty(XMLNode2.prototype, "kind", {
        get: function() {
            return 'XML';
        },
        enumerable: false,
        configurable: true
    });
    XMLNode2.prototype.getXML = function() {
        return this.xml;
    };
    XMLNode2.prototype.setXML = function(xml, adaptor) {
        if (adaptor === void 0) adaptor = null;
        this.xml = xml;
        this.adaptor = adaptor;
        return this;
    };
    XMLNode2.prototype.getSerializedXML = function() {
        return this.adaptor.serializeXML(this.xml);
    };
    XMLNode2.prototype.toString = function() {
        return 'XML data';
    };
    return XMLNode2;
}(AbstractMmlEmptyNode1);
exports.XMLNode = XMLNode1;

},{"./Attributes.js":"5plfh","../Tree/Node.js":"7r52x"}],"5plfh":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Attributes = exports.INHERIT = void 0;
exports.INHERIT = '_inherit_';
var Attributes = function() {
    function Attributes1(defaults, global) {
        this.global = global;
        this.defaults = Object.create(global);
        this.inherited = Object.create(this.defaults);
        this.attributes = Object.create(this.inherited);
        Object.assign(this.defaults, defaults);
    }
    Attributes1.prototype.set = function(name, value) {
        this.attributes[name] = value;
    };
    Attributes1.prototype.setList = function(list) {
        Object.assign(this.attributes, list);
    };
    Attributes1.prototype.get = function(name) {
        var value = this.attributes[name];
        if (value === exports.INHERIT) value = this.global[name];
        return value;
    };
    Attributes1.prototype.getExplicit = function(name) {
        if (!this.attributes.hasOwnProperty(name)) return undefined;
        return this.attributes[name];
    };
    Attributes1.prototype.getList = function() {
        var e_1, _a;
        var names = [];
        for(var _i = 0; _i < arguments.length; _i++)names[_i] = arguments[_i];
        var values = {
        };
        try {
            for(var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()){
                var name_1 = names_1_1.value;
                values[name_1] = this.get(name_1);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        return values;
    };
    Attributes1.prototype.setInherited = function(name, value) {
        this.inherited[name] = value;
    };
    Attributes1.prototype.getInherited = function(name) {
        return this.inherited[name];
    };
    Attributes1.prototype.getDefault = function(name) {
        return this.defaults[name];
    };
    Attributes1.prototype.isSet = function(name) {
        return this.attributes.hasOwnProperty(name) || this.inherited.hasOwnProperty(name);
    };
    Attributes1.prototype.hasDefault = function(name) {
        return name in this.defaults;
    };
    Attributes1.prototype.getExplicitNames = function() {
        return Object.keys(this.attributes);
    };
    Attributes1.prototype.getInheritedNames = function() {
        return Object.keys(this.inherited);
    };
    Attributes1.prototype.getDefaultNames = function() {
        return Object.keys(this.defaults);
    };
    Attributes1.prototype.getGlobalNames = function() {
        return Object.keys(this.global);
    };
    Attributes1.prototype.getAllAttributes = function() {
        return this.attributes;
    };
    Attributes1.prototype.getAllInherited = function() {
        return this.inherited;
    };
    Attributes1.prototype.getAllDefaults = function() {
        return this.defaults;
    };
    Attributes1.prototype.getAllGlobals = function() {
        return this.global;
    };
    return Attributes1;
}();
exports.Attributes = Attributes;

},{}],"7r52x":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractEmptyNode = exports.AbstractNode = void 0;
var AbstractNode = function() {
    function AbstractNode1(factory, properties, children) {
        var e_1, _a;
        if (properties === void 0) properties = {
        };
        if (children === void 0) children = [];
        this.factory = factory;
        this.parent = null;
        this.properties = {
        };
        this.childNodes = [];
        try {
            for(var _b = __values(Object.keys(properties)), _c = _b.next(); !_c.done; _c = _b.next()){
                var name_1 = _c.value;
                this.setProperty(name_1, properties[name_1]);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        if (children.length) this.setChildren(children);
    }
    Object.defineProperty(AbstractNode1.prototype, "kind", {
        get: function() {
            return 'unknown';
        },
        enumerable: false,
        configurable: true
    });
    AbstractNode1.prototype.setProperty = function(name, value) {
        this.properties[name] = value;
    };
    AbstractNode1.prototype.getProperty = function(name) {
        return this.properties[name];
    };
    AbstractNode1.prototype.getPropertyNames = function() {
        return Object.keys(this.properties);
    };
    AbstractNode1.prototype.getAllProperties = function() {
        return this.properties;
    };
    AbstractNode1.prototype.removeProperty = function() {
        var e_2, _a;
        var names = [];
        for(var _i = 0; _i < arguments.length; _i++)names[_i] = arguments[_i];
        try {
            for(var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()){
                var name_2 = names_1_1.value;
                delete this.properties[name_2];
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    };
    AbstractNode1.prototype.isKind = function(kind) {
        return this.factory.nodeIsKind(this, kind);
    };
    AbstractNode1.prototype.setChildren = function(children) {
        var e_3, _a;
        this.childNodes = [];
        try {
            for(var children_1 = __values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()){
                var child = children_1_1.value;
                this.appendChild(child);
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
    };
    AbstractNode1.prototype.appendChild = function(child) {
        this.childNodes.push(child);
        child.parent = this;
        return child;
    };
    AbstractNode1.prototype.replaceChild = function(newChild, oldChild) {
        var i = this.childIndex(oldChild);
        if (i !== null) {
            this.childNodes[i] = newChild;
            newChild.parent = this;
        }
        return newChild;
    };
    AbstractNode1.prototype.childIndex = function(node) {
        var i = this.childNodes.indexOf(node);
        return i === -1 ? null : i;
    };
    AbstractNode1.prototype.findNodes = function(kind) {
        var nodes = [];
        this.walkTree(function(node) {
            if (node.isKind(kind)) nodes.push(node);
        });
        return nodes;
    };
    AbstractNode1.prototype.walkTree = function(func, data) {
        var e_4, _a;
        func(this, data);
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (child) child.walkTree(func, data);
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
        return data;
    };
    AbstractNode1.prototype.toString = function() {
        return this.kind + '(' + this.childNodes.join(',') + ')';
    };
    return AbstractNode1;
}();
exports.AbstractNode = AbstractNode;
var AbstractEmptyNode1 = function(_super) {
    __extends(AbstractEmptyNode2, _super);
    function AbstractEmptyNode2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AbstractEmptyNode2.prototype.setChildren = function(_children) {
    };
    AbstractEmptyNode2.prototype.appendChild = function(child) {
        return child;
    };
    AbstractEmptyNode2.prototype.replaceChild = function(_newChild, oldChild) {
        return oldChild;
    };
    AbstractEmptyNode2.prototype.childIndex = function(_node) {
        return null;
    };
    AbstractEmptyNode2.prototype.walkTree = function(func, data) {
        func(this, data);
        return data;
    };
    AbstractEmptyNode2.prototype.toString = function() {
        return this.kind;
    };
    return AbstractEmptyNode2;
}(AbstractNode);
exports.AbstractEmptyNode = AbstractEmptyNode1;

},{}],"If5yR":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
var MmlNode_js_1 = require("../../core/MmlTree/MmlNode.js");
var mo_js_1 = require("../../core/MmlTree/MmlNodes/mo.js");
var NodeUtil;
(function(NodeUtil1) {
    var attrs = new Map([
        [
            'autoOP',
            true
        ],
        [
            'fnOP',
            true
        ],
        [
            'movesupsub',
            true
        ],
        [
            'subsupOK',
            true
        ],
        [
            'texprimestyle',
            true
        ],
        [
            'useHeight',
            true
        ],
        [
            'variantForm',
            true
        ],
        [
            'withDelims',
            true
        ],
        [
            'mathaccent',
            true
        ],
        [
            'open',
            true
        ],
        [
            'close',
            true
        ]
    ]);
    function createEntity(code) {
        return String.fromCodePoint(parseInt(code, 16));
    }
    NodeUtil1.createEntity = createEntity;
    function getChildren(node) {
        return node.childNodes;
    }
    NodeUtil1.getChildren = getChildren;
    function getText(node) {
        return node.getText();
    }
    NodeUtil1.getText = getText;
    function appendChildren(node, children) {
        var e_1, _a;
        try {
            for(var children_1 = __values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()){
                var child = children_1_1.value;
                node.appendChild(child);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    }
    NodeUtil1.appendChildren = appendChildren;
    function setAttribute(node, attribute, value) {
        node.attributes.set(attribute, value);
    }
    NodeUtil1.setAttribute = setAttribute;
    function setProperty(node, property, value) {
        node.setProperty(property, value);
    }
    NodeUtil1.setProperty = setProperty;
    function setProperties(node, properties) {
        var e_2, _a;
        try {
            for(var _b = __values(Object.keys(properties)), _c = _b.next(); !_c.done; _c = _b.next()){
                var name_1 = _c.value;
                var value = properties[name_1];
                if (name_1 === 'texClass') {
                    node.texClass = value;
                    node.setProperty(name_1, value);
                } else if (name_1 === 'movablelimits') {
                    node.setProperty('movablelimits', value);
                    if (node.isKind('mo') || node.isKind('mstyle')) node.attributes.set('movablelimits', value);
                } else if (name_1 === 'inferred') ;
                else if (attrs.has(name_1)) node.setProperty(name_1, value);
                else node.attributes.set(name_1, value);
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    }
    NodeUtil1.setProperties = setProperties;
    function getProperty(node, property) {
        return node.getProperty(property);
    }
    NodeUtil1.getProperty = getProperty;
    function getAttribute(node, attr) {
        return node.attributes.get(attr);
    }
    NodeUtil1.getAttribute = getAttribute;
    function removeProperties(node) {
        var properties = [];
        for(var _i = 1; _i < arguments.length; _i++)properties[_i - 1] = arguments[_i];
        node.removeProperty.apply(node, __spreadArray([], __read(properties)));
    }
    NodeUtil1.removeProperties = removeProperties;
    function getChildAt(node, position) {
        return node.childNodes[position];
    }
    NodeUtil1.getChildAt = getChildAt;
    function setChild(node, position, child) {
        var children = node.childNodes;
        children[position] = child;
        if (child) child.parent = node;
    }
    NodeUtil1.setChild = setChild;
    function copyChildren(oldNode, newNode) {
        var children = oldNode.childNodes;
        for(var i = 0; i < children.length; i++)setChild(newNode, i, children[i]);
    }
    NodeUtil1.copyChildren = copyChildren;
    function copyAttributes(oldNode, newNode) {
        newNode.attributes = oldNode.attributes;
        setProperties(newNode, oldNode.getAllProperties());
    }
    NodeUtil1.copyAttributes = copyAttributes;
    function isType(node, kind) {
        return node.isKind(kind);
    }
    NodeUtil1.isType = isType;
    function isEmbellished(node) {
        return node.isEmbellished;
    }
    NodeUtil1.isEmbellished = isEmbellished;
    function getTexClass(node) {
        return node.texClass;
    }
    NodeUtil1.getTexClass = getTexClass;
    function getCoreMO(node) {
        return node.coreMO();
    }
    NodeUtil1.getCoreMO = getCoreMO;
    function isNode(item) {
        return item instanceof MmlNode_js_1.AbstractMmlNode || item instanceof MmlNode_js_1.AbstractMmlEmptyNode;
    }
    NodeUtil1.isNode = isNode;
    function isInferred(node) {
        return node.isInferred;
    }
    NodeUtil1.isInferred = isInferred;
    function getForm(node) {
        var e_3, _a;
        if (!isType(node, 'mo')) return null;
        var mo = node;
        var forms = mo.getForms();
        try {
            for(var forms_1 = __values(forms), forms_1_1 = forms_1.next(); !forms_1_1.done; forms_1_1 = forms_1.next()){
                var form = forms_1_1.value;
                var symbol = mo_js_1.MmlMo.OPTABLE[form][mo.getText()];
                if (symbol) return symbol;
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (forms_1_1 && !forms_1_1.done && (_a = forms_1.return)) _a.call(forms_1);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        return null;
    }
    NodeUtil1.getForm = getForm;
})(NodeUtil || (NodeUtil = {
}));
exports.default = NodeUtil;

},{"../../core/MmlTree/MmlNode.js":"5Ogy3","../../core/MmlTree/MmlNodes/mo.js":"6qwvK"}],"6qwvK":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMo = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var OperatorDictionary_js_1 = require("../OperatorDictionary.js");
var string_js_1 = require("../../../util/string.js");
var MmlMo1 = function(_super) {
    __extends(MmlMo2, _super);
    function MmlMo2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._texClass = null;
        _this.lspace = 5 / 18;
        _this.rspace = 5 / 18;
        return _this;
    }
    Object.defineProperty(MmlMo2.prototype, "texClass", {
        get: function() {
            if (this._texClass === null) {
                var mo = this.getText();
                var _a = __read(this.handleExplicitForm(this.getForms()), 3), form1 = _a[0], form2 = _a[1], form3 = _a[2];
                var OPTABLE_1 = this.constructor.OPTABLE;
                var def = OPTABLE_1[form1][mo] || OPTABLE_1[form2][mo] || OPTABLE_1[form3][mo];
                return def ? def[2] : MmlNode_js_1.TEXCLASS.REL;
            }
            return this._texClass;
        },
        set: function(value) {
            this._texClass = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMo2.prototype, "kind", {
        get: function() {
            return 'mo';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMo2.prototype, "isEmbellished", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMo2.prototype, "hasNewLine", {
        get: function() {
            return this.attributes.get('linebreak') === 'newline';
        },
        enumerable: false,
        configurable: true
    });
    MmlMo2.prototype.coreParent = function() {
        var embellished = this;
        var parent = this;
        var math = this.factory.getNodeClass('math');
        while(parent && parent.isEmbellished && parent.coreMO() === this && !(parent instanceof math)){
            embellished = parent;
            parent = parent.parent;
        }
        return embellished;
    };
    MmlMo2.prototype.coreText = function(parent) {
        if (!parent) return '';
        if (parent.isEmbellished) return parent.coreMO().getText();
        while(((parent.isKind('mrow') || parent.isKind('TeXAtom') || parent.isKind('mstyle') || parent.isKind('mphantom')) && parent.childNodes.length === 1 || parent.isKind('munderover')) && parent.childNodes[0])parent = parent.childNodes[0];
        return parent.isToken ? parent.getText() : '';
    };
    MmlMo2.prototype.hasSpacingAttributes = function() {
        return this.attributes.isSet('lspace') || this.attributes.isSet('rspace');
    };
    Object.defineProperty(MmlMo2.prototype, "isAccent", {
        get: function() {
            var accent = false;
            var node = this.coreParent().parent;
            if (node) {
                var key = node.isKind('mover') ? node.childNodes[node.over].coreMO() ? 'accent' : '' : node.isKind('munder') ? node.childNodes[node.under].coreMO() ? 'accentunder' : '' : node.isKind('munderover') ? this === node.childNodes[node.over].coreMO() ? 'accent' : this === node.childNodes[node.under].coreMO() ? 'accentunder' : '' : '';
                if (key) {
                    var value = node.attributes.getExplicit(key);
                    accent = value !== undefined ? accent : this.attributes.get('accent');
                }
            }
            return accent;
        },
        enumerable: false,
        configurable: true
    });
    MmlMo2.prototype.setTeXclass = function(prev) {
        var _a = this.attributes.getList('form', 'fence'), form = _a.form, fence = _a.fence;
        if (this.getProperty('texClass') === undefined && (this.attributes.isSet('lspace') || this.attributes.isSet('rspace'))) return null;
        if (fence && this.texClass === MmlNode_js_1.TEXCLASS.REL) {
            if (form === 'prefix') this.texClass = MmlNode_js_1.TEXCLASS.OPEN;
            if (form === 'postfix') this.texClass = MmlNode_js_1.TEXCLASS.CLOSE;
        }
        if (this.getText() === '\u2061') {
            if (prev && prev.getProperty('texClass') === undefined && prev.attributes.get('mathvariant') !== 'italic') {
                prev.texClass = MmlNode_js_1.TEXCLASS.OP;
                prev.setProperty('fnOP', true);
            }
            this.texClass = this.prevClass = MmlNode_js_1.TEXCLASS.NONE;
            return prev;
        }
        return this.adjustTeXclass(prev);
    };
    MmlMo2.prototype.adjustTeXclass = function(prev) {
        var texClass = this.texClass;
        var prevClass = this.prevClass;
        if (texClass === MmlNode_js_1.TEXCLASS.NONE) return prev;
        if (prev) {
            if (prev.getProperty('autoOP') && (texClass === MmlNode_js_1.TEXCLASS.BIN || texClass === MmlNode_js_1.TEXCLASS.REL)) prevClass = prev.texClass = MmlNode_js_1.TEXCLASS.ORD;
            prevClass = this.prevClass = prev.texClass || MmlNode_js_1.TEXCLASS.ORD;
            this.prevLevel = this.attributes.getInherited('scriptlevel');
        } else prevClass = this.prevClass = MmlNode_js_1.TEXCLASS.NONE;
        if (texClass === MmlNode_js_1.TEXCLASS.BIN && (prevClass === MmlNode_js_1.TEXCLASS.NONE || prevClass === MmlNode_js_1.TEXCLASS.BIN || prevClass === MmlNode_js_1.TEXCLASS.OP || prevClass === MmlNode_js_1.TEXCLASS.REL || prevClass === MmlNode_js_1.TEXCLASS.OPEN || prevClass === MmlNode_js_1.TEXCLASS.PUNCT)) this.texClass = MmlNode_js_1.TEXCLASS.ORD;
        else if (prevClass === MmlNode_js_1.TEXCLASS.BIN && (texClass === MmlNode_js_1.TEXCLASS.REL || texClass === MmlNode_js_1.TEXCLASS.CLOSE || texClass === MmlNode_js_1.TEXCLASS.PUNCT)) prev.texClass = this.prevClass = MmlNode_js_1.TEXCLASS.ORD;
        else if (texClass === MmlNode_js_1.TEXCLASS.BIN) {
            var child = this;
            var parent_1 = this.parent;
            while(parent_1 && parent_1.parent && parent_1.isEmbellished && (parent_1.childNodes.length === 1 || !parent_1.isKind('mrow') && parent_1.core() === child)){
                child = parent_1;
                parent_1 = parent_1.parent;
            }
            if (parent_1.childNodes[parent_1.childNodes.length - 1] === child) this.texClass = MmlNode_js_1.TEXCLASS.ORD;
        }
        return this;
    };
    MmlMo2.prototype.setInheritedAttributes = function(attributes, display, level, prime) {
        if (attributes === void 0) attributes = {
        };
        if (display === void 0) display = false;
        if (level === void 0) level = 0;
        if (prime === void 0) prime = false;
        _super.prototype.setInheritedAttributes.call(this, attributes, display, level, prime);
        var mo = this.getText();
        this.checkOperatorTable(mo);
        this.checkPseudoScripts(mo);
        this.checkPrimes(mo);
        this.checkMathAccent(mo);
    };
    MmlMo2.prototype.checkOperatorTable = function(mo) {
        var e_1, _a;
        var _b = __read(this.handleExplicitForm(this.getForms()), 3), form1 = _b[0], form2 = _b[1], form3 = _b[2];
        this.attributes.setInherited('form', form1);
        var OPTABLE = this.constructor.OPTABLE;
        var def = OPTABLE[form1][mo] || OPTABLE[form2][mo] || OPTABLE[form3][mo];
        if (def) {
            if (this.getProperty('texClass') === undefined) this.texClass = def[2];
            try {
                for(var _c = __values(Object.keys(def[3] || {
                })), _d = _c.next(); !_d.done; _d = _c.next()){
                    var name_1 = _d.value;
                    this.attributes.setInherited(name_1, def[3][name_1]);
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
            this.lspace = (def[0] + 1) / 18;
            this.rspace = (def[1] + 1) / 18;
        } else {
            var range = this.getRange(mo);
            if (range) {
                if (this.getProperty('texClass') === undefined) this.texClass = range[2];
                var spacing = this.constructor.MMLSPACING[range[2]];
                this.lspace = (spacing[0] + 1) / 18;
                this.rspace = (spacing[1] + 1) / 18;
            }
        }
    };
    MmlMo2.prototype.getForms = function() {
        var core = this;
        var parent = this.parent;
        var Parent = this.Parent;
        while(Parent && Parent.isEmbellished){
            core = parent;
            parent = Parent.parent;
            Parent = Parent.Parent;
        }
        if (parent && parent.isKind('mrow') && parent.nonSpaceLength() !== 1) {
            if (parent.firstNonSpace() === core) return [
                'prefix',
                'infix',
                'postfix'
            ];
            if (parent.lastNonSpace() === core) return [
                'postfix',
                'infix',
                'prefix'
            ];
        }
        return [
            'infix',
            'prefix',
            'postfix'
        ];
    };
    MmlMo2.prototype.handleExplicitForm = function(forms) {
        if (this.attributes.isSet('form')) {
            var form_1 = this.attributes.get('form');
            forms = [
                form_1
            ].concat(forms.filter(function(name) {
                return name !== form_1;
            }));
        }
        return forms;
    };
    MmlMo2.prototype.getRange = function(mo) {
        var e_2, _a;
        if (!mo.match(/^[\uD800-\uDBFF]?.$/)) return null;
        var n = mo.codePointAt(0);
        var ranges = this.constructor.RANGES;
        try {
            for(var ranges_1 = __values(ranges), ranges_1_1 = ranges_1.next(); !ranges_1_1.done; ranges_1_1 = ranges_1.next()){
                var range = ranges_1_1.value;
                if (range[0] <= n && n <= range[1]) return range;
                if (n < range[0]) return null;
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (ranges_1_1 && !ranges_1_1.done && (_a = ranges_1.return)) _a.call(ranges_1);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
        return null;
    };
    MmlMo2.prototype.checkPseudoScripts = function(mo) {
        var PSEUDOSCRIPTS = this.constructor.pseudoScripts;
        if (!mo.match(PSEUDOSCRIPTS)) return;
        var parent = this.coreParent().Parent;
        var isPseudo = !parent || !(parent.isKind('msubsup') && !parent.isKind('msub'));
        this.setProperty('pseudoscript', isPseudo);
        if (isPseudo) {
            this.attributes.setInherited('lspace', 0);
            this.attributes.setInherited('rspace', 0);
        }
    };
    MmlMo2.prototype.checkPrimes = function(mo) {
        var PRIMES = this.constructor.primes;
        if (!mo.match(PRIMES)) return;
        var REMAP = this.constructor.remapPrimes;
        var primes = string_js_1.unicodeString(string_js_1.unicodeChars(mo).map(function(c) {
            return REMAP[c];
        }));
        this.setProperty('primes', primes);
    };
    MmlMo2.prototype.checkMathAccent = function(mo) {
        var parent = this.Parent;
        if (this.getProperty('mathaccent') !== undefined || !parent || !parent.isKind('munderover')) return;
        var base = parent.childNodes[0];
        if (base.isEmbellished && base.coreMO() === this) return;
        var MATHACCENT = this.constructor.mathaccents;
        if (mo.match(MATHACCENT)) this.setProperty('mathaccent', true);
    };
    MmlMo2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlTokenNode.defaults), {
        form: 'infix',
        fence: false,
        separator: false,
        lspace: 'thickmathspace',
        rspace: 'thickmathspace',
        stretchy: false,
        symmetric: false,
        maxsize: 'infinity',
        minsize: '0em',
        largeop: false,
        movablelimits: false,
        accent: false,
        linebreak: 'auto',
        lineleading: '1ex',
        linebreakstyle: 'before',
        indentalign: 'auto',
        indentshift: '0',
        indenttarget: '',
        indentalignfirst: 'indentalign',
        indentshiftfirst: 'indentshift',
        indentalignlast: 'indentalign',
        indentshiftlast: 'indentshift'
    });
    MmlMo2.RANGES = OperatorDictionary_js_1.RANGES;
    MmlMo2.MMLSPACING = OperatorDictionary_js_1.MMLSPACING;
    MmlMo2.OPTABLE = OperatorDictionary_js_1.OPTABLE;
    MmlMo2.pseudoScripts = new RegExp([
        '^["\'*`',
        '\u00AA',
        '\u00B0',
        '\u00B2-\u00B4',
        '\u00B9',
        '\u00BA',
        '\u2018-\u201F',
        '\u2032-\u2037\u2057',
        '\u2070\u2071',
        '\u2074-\u207F',
        '\u2080-\u208E',
        ']+$'
    ].join(''));
    MmlMo2.primes = new RegExp([
        '^["\'`',
        '\u2018-\u201F',
        ']+$'
    ].join(''));
    MmlMo2.remapPrimes = {
        34: 8243,
        39: 8242,
        96: 8245,
        8216: 8245,
        8217: 8242,
        8218: 8242,
        8219: 8245,
        8220: 8246,
        8221: 8243,
        8222: 8243,
        8223: 8246
    };
    MmlMo2.mathaccents = new RegExp([
        '^[',
        '\u00B4\u0301\u02CA',
        '\u0060\u0300\u02CB',
        '\u00A8\u0308',
        '\u007E\u0303\u02DC',
        '\u00AF\u0304\u02C9',
        '\u02D8\u0306',
        '\u02C7\u030C',
        '\u005E\u0302\u02C6',
        '\u2192\u20D7',
        '\u02D9\u0307',
        '\u02DA\u030A',
        '\u20DB',
        '\u20DC',
        ']$'
    ].join(''));
    return MmlMo2;
}(MmlNode_js_1.AbstractMmlTokenNode);
exports.MmlMo = MmlMo1;

},{"../MmlNode.js":"5Ogy3","../OperatorDictionary.js":"TQItp","../../../util/string.js":"1fFM7"}],"TQItp":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.OPTABLE = exports.MMLSPACING = exports.RANGES = exports.MO = exports.OPDEF = void 0;
var MmlNode_js_1 = require("./MmlNode.js");
function OPDEF(lspace, rspace, texClass, properties) {
    if (texClass === void 0) texClass = MmlNode_js_1.TEXCLASS.BIN;
    if (properties === void 0) properties = null;
    return [
        lspace,
        rspace,
        texClass,
        properties
    ];
}
exports.OPDEF = OPDEF;
exports.MO = {
    ORD: OPDEF(0, 0, MmlNode_js_1.TEXCLASS.ORD),
    ORD11: OPDEF(1, 1, MmlNode_js_1.TEXCLASS.ORD),
    ORD21: OPDEF(2, 1, MmlNode_js_1.TEXCLASS.ORD),
    ORD02: OPDEF(0, 2, MmlNode_js_1.TEXCLASS.ORD),
    ORD55: OPDEF(5, 5, MmlNode_js_1.TEXCLASS.ORD),
    OP: OPDEF(1, 2, MmlNode_js_1.TEXCLASS.OP, {
        largeop: true,
        movablelimits: true,
        symmetric: true
    }),
    OPFIXED: OPDEF(1, 2, MmlNode_js_1.TEXCLASS.OP, {
        largeop: true,
        movablelimits: true
    }),
    INTEGRAL: OPDEF(0, 1, MmlNode_js_1.TEXCLASS.OP, {
        largeop: true,
        symmetric: true
    }),
    INTEGRAL2: OPDEF(1, 2, MmlNode_js_1.TEXCLASS.OP, {
        largeop: true,
        symmetric: true
    }),
    BIN3: OPDEF(3, 3, MmlNode_js_1.TEXCLASS.BIN),
    BIN4: OPDEF(4, 4, MmlNode_js_1.TEXCLASS.BIN),
    BIN01: OPDEF(0, 1, MmlNode_js_1.TEXCLASS.BIN),
    BIN5: OPDEF(5, 5, MmlNode_js_1.TEXCLASS.BIN),
    TALLBIN: OPDEF(4, 4, MmlNode_js_1.TEXCLASS.BIN, {
        stretchy: true
    }),
    BINOP: OPDEF(4, 4, MmlNode_js_1.TEXCLASS.BIN, {
        largeop: true,
        movablelimits: true
    }),
    REL: OPDEF(5, 5, MmlNode_js_1.TEXCLASS.REL),
    REL1: OPDEF(1, 1, MmlNode_js_1.TEXCLASS.REL, {
        stretchy: true
    }),
    REL4: OPDEF(4, 4, MmlNode_js_1.TEXCLASS.REL),
    RELSTRETCH: OPDEF(5, 5, MmlNode_js_1.TEXCLASS.REL, {
        stretchy: true
    }),
    RELACCENT: OPDEF(5, 5, MmlNode_js_1.TEXCLASS.REL, {
        accent: true
    }),
    WIDEREL: OPDEF(5, 5, MmlNode_js_1.TEXCLASS.REL, {
        accent: true,
        stretchy: true
    }),
    OPEN: OPDEF(0, 0, MmlNode_js_1.TEXCLASS.OPEN, {
        fence: true,
        stretchy: true,
        symmetric: true
    }),
    CLOSE: OPDEF(0, 0, MmlNode_js_1.TEXCLASS.CLOSE, {
        fence: true,
        stretchy: true,
        symmetric: true
    }),
    INNER: OPDEF(0, 0, MmlNode_js_1.TEXCLASS.INNER),
    PUNCT: OPDEF(0, 3, MmlNode_js_1.TEXCLASS.PUNCT),
    ACCENT: OPDEF(0, 0, MmlNode_js_1.TEXCLASS.ORD, {
        accent: true
    }),
    WIDEACCENT: OPDEF(0, 0, MmlNode_js_1.TEXCLASS.ORD, {
        accent: true,
        stretchy: true
    })
};
exports.RANGES = [
    [
        32,
        127,
        MmlNode_js_1.TEXCLASS.REL,
        'BasicLatin'
    ],
    [
        160,
        255,
        MmlNode_js_1.TEXCLASS.ORD,
        'Latin1Supplement'
    ],
    [
        256,
        383,
        MmlNode_js_1.TEXCLASS.ORD,
        'LatinExtendedA'
    ],
    [
        384,
        591,
        MmlNode_js_1.TEXCLASS.ORD,
        'LatinExtendedB'
    ],
    [
        688,
        767,
        MmlNode_js_1.TEXCLASS.ORD,
        'SpacingModLetters'
    ],
    [
        768,
        879,
        MmlNode_js_1.TEXCLASS.ORD,
        'CombDiacritMarks'
    ],
    [
        880,
        1023,
        MmlNode_js_1.TEXCLASS.ORD,
        'GreekAndCoptic'
    ],
    [
        7680,
        7935,
        MmlNode_js_1.TEXCLASS.ORD,
        'LatinExtendedAdditional'
    ],
    [
        8192,
        8303,
        MmlNode_js_1.TEXCLASS.PUNCT,
        'GeneralPunctuation'
    ],
    [
        8304,
        8351,
        MmlNode_js_1.TEXCLASS.ORD,
        'SuperAndSubscripts'
    ],
    [
        8352,
        8399,
        MmlNode_js_1.TEXCLASS.ORD,
        'Currency'
    ],
    [
        8400,
        8447,
        MmlNode_js_1.TEXCLASS.ORD,
        'CombDiactForSymbols'
    ],
    [
        8448,
        8527,
        MmlNode_js_1.TEXCLASS.ORD,
        'LetterlikeSymbols'
    ],
    [
        8528,
        8591,
        MmlNode_js_1.TEXCLASS.ORD,
        'NumberForms'
    ],
    [
        8592,
        8703,
        MmlNode_js_1.TEXCLASS.REL,
        'Arrows'
    ],
    [
        8704,
        8959,
        MmlNode_js_1.TEXCLASS.BIN,
        'MathOperators'
    ],
    [
        8960,
        9215,
        MmlNode_js_1.TEXCLASS.ORD,
        'MiscTechnical'
    ],
    [
        9312,
        9471,
        MmlNode_js_1.TEXCLASS.ORD,
        'EnclosedAlphaNums'
    ],
    [
        9472,
        9631,
        MmlNode_js_1.TEXCLASS.ORD,
        'BoxDrawing'
    ],
    [
        9632,
        9727,
        MmlNode_js_1.TEXCLASS.ORD,
        'GeometricShapes'
    ],
    [
        9984,
        10175,
        MmlNode_js_1.TEXCLASS.ORD,
        'Dingbats'
    ],
    [
        10176,
        10223,
        MmlNode_js_1.TEXCLASS.ORD,
        'MiscMathSymbolsA'
    ],
    [
        10224,
        10239,
        MmlNode_js_1.TEXCLASS.REL,
        'SupplementalArrowsA'
    ],
    [
        10496,
        10623,
        MmlNode_js_1.TEXCLASS.REL,
        'SupplementalArrowsB'
    ],
    [
        10624,
        10751,
        MmlNode_js_1.TEXCLASS.ORD,
        'MiscMathSymbolsB'
    ],
    [
        10752,
        11007,
        MmlNode_js_1.TEXCLASS.BIN,
        'SuppMathOperators'
    ],
    [
        11008,
        11263,
        MmlNode_js_1.TEXCLASS.ORD,
        'MiscSymbolsAndArrows'
    ],
    [
        119808,
        120831,
        MmlNode_js_1.TEXCLASS.ORD,
        'MathAlphabets'
    ]
];
exports.MMLSPACING = [
    [
        0,
        0
    ],
    [
        1,
        2
    ],
    [
        3,
        3
    ],
    [
        4,
        4
    ],
    [
        0,
        0
    ],
    [
        0,
        0
    ],
    [
        0,
        3
    ]
];
exports.OPTABLE = {
    prefix: {
        '(': exports.MO.OPEN,
        '+': exports.MO.BIN01,
        '-': exports.MO.BIN01,
        '[': exports.MO.OPEN,
        '{': exports.MO.OPEN,
        '|': exports.MO.OPEN,
        '||': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.BIN,
            {
                fence: true,
                stretchy: true,
                symmetric: true
            }
        ],
        '|||': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                fence: true,
                stretchy: true,
                symmetric: true
            }
        ],
        '\u00AC': exports.MO.ORD21,
        '\u00B1': exports.MO.BIN01,
        '\u2016': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                fence: true,
                stretchy: true
            }
        ],
        '\u2018': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.OPEN,
            {
                fence: true
            }
        ],
        '\u201C': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.OPEN,
            {
                fence: true
            }
        ],
        '\u2145': exports.MO.ORD21,
        '\u2146': OPDEF(2, 0, MmlNode_js_1.TEXCLASS.ORD),
        '\u2200': exports.MO.ORD21,
        '\u2202': exports.MO.ORD21,
        '\u2203': exports.MO.ORD21,
        '\u2204': exports.MO.ORD21,
        '\u2207': exports.MO.ORD21,
        '\u220F': exports.MO.OP,
        '\u2210': exports.MO.OP,
        '\u2211': exports.MO.OP,
        '\u2212': exports.MO.BIN01,
        '\u2213': exports.MO.BIN01,
        '\u221A': [
            1,
            1,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                stretchy: true
            }
        ],
        '\u221B': exports.MO.ORD11,
        '\u221C': exports.MO.ORD11,
        '\u2220': exports.MO.ORD,
        '\u2221': exports.MO.ORD,
        '\u2222': exports.MO.ORD,
        '\u222B': exports.MO.INTEGRAL,
        '\u222C': exports.MO.INTEGRAL,
        '\u222D': exports.MO.INTEGRAL,
        '\u222E': exports.MO.INTEGRAL,
        '\u222F': exports.MO.INTEGRAL,
        '\u2230': exports.MO.INTEGRAL,
        '\u2231': exports.MO.INTEGRAL,
        '\u2232': exports.MO.INTEGRAL,
        '\u2233': exports.MO.INTEGRAL,
        '\u22C0': exports.MO.OP,
        '\u22C1': exports.MO.OP,
        '\u22C2': exports.MO.OP,
        '\u22C3': exports.MO.OP,
        '\u2308': exports.MO.OPEN,
        '\u230A': exports.MO.OPEN,
        '\u2329': exports.MO.OPEN,
        '\u2772': exports.MO.OPEN,
        '\u27E6': exports.MO.OPEN,
        '\u27E8': exports.MO.OPEN,
        '\u27EA': exports.MO.OPEN,
        '\u27EC': exports.MO.OPEN,
        '\u27EE': exports.MO.OPEN,
        '\u2980': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                fence: true,
                stretchy: true
            }
        ],
        '\u2983': exports.MO.OPEN,
        '\u2985': exports.MO.OPEN,
        '\u2987': exports.MO.OPEN,
        '\u2989': exports.MO.OPEN,
        '\u298B': exports.MO.OPEN,
        '\u298D': exports.MO.OPEN,
        '\u298F': exports.MO.OPEN,
        '\u2991': exports.MO.OPEN,
        '\u2993': exports.MO.OPEN,
        '\u2995': exports.MO.OPEN,
        '\u2997': exports.MO.OPEN,
        '\u29FC': exports.MO.OPEN,
        '\u2A00': exports.MO.OP,
        '\u2A01': exports.MO.OP,
        '\u2A02': exports.MO.OP,
        '\u2A03': exports.MO.OP,
        '\u2A04': exports.MO.OP,
        '\u2A05': exports.MO.OP,
        '\u2A06': exports.MO.OP,
        '\u2A07': exports.MO.OP,
        '\u2A08': exports.MO.OP,
        '\u2A09': exports.MO.OP,
        '\u2A0A': exports.MO.OP,
        '\u2A0B': exports.MO.INTEGRAL2,
        '\u2A0C': exports.MO.INTEGRAL,
        '\u2A0D': exports.MO.INTEGRAL2,
        '\u2A0E': exports.MO.INTEGRAL2,
        '\u2A0F': exports.MO.INTEGRAL2,
        '\u2A10': exports.MO.OP,
        '\u2A11': exports.MO.OP,
        '\u2A12': exports.MO.OP,
        '\u2A13': exports.MO.OP,
        '\u2A14': exports.MO.OP,
        '\u2A15': exports.MO.INTEGRAL2,
        '\u2A16': exports.MO.INTEGRAL2,
        '\u2A17': exports.MO.INTEGRAL2,
        '\u2A18': exports.MO.INTEGRAL2,
        '\u2A19': exports.MO.INTEGRAL2,
        '\u2A1A': exports.MO.INTEGRAL2,
        '\u2A1B': exports.MO.INTEGRAL2,
        '\u2A1C': exports.MO.INTEGRAL2,
        '\u2AFC': exports.MO.OP,
        '\u2AFF': exports.MO.OP
    },
    postfix: {
        '!!': OPDEF(1, 0),
        '!': [
            1,
            0,
            MmlNode_js_1.TEXCLASS.CLOSE,
            null
        ],
        '"': exports.MO.ACCENT,
        '&': exports.MO.ORD,
        ')': exports.MO.CLOSE,
        '++': OPDEF(0, 0),
        '--': OPDEF(0, 0),
        '..': OPDEF(0, 0),
        '...': exports.MO.ORD,
        '\'': exports.MO.ACCENT,
        ']': exports.MO.CLOSE,
        '^': exports.MO.WIDEACCENT,
        '_': exports.MO.WIDEACCENT,
        '`': exports.MO.ACCENT,
        '|': exports.MO.CLOSE,
        '}': exports.MO.CLOSE,
        '~': exports.MO.WIDEACCENT,
        '||': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.BIN,
            {
                fence: true,
                stretchy: true,
                symmetric: true
            }
        ],
        '|||': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                fence: true,
                stretchy: true,
                symmetric: true
            }
        ],
        '\u00A8': exports.MO.ACCENT,
        '\u00AA': exports.MO.ACCENT,
        '\u00AF': exports.MO.WIDEACCENT,
        '\u00B0': exports.MO.ORD,
        '\u00B2': exports.MO.ACCENT,
        '\u00B3': exports.MO.ACCENT,
        '\u00B4': exports.MO.ACCENT,
        '\u00B8': exports.MO.ACCENT,
        '\u00B9': exports.MO.ACCENT,
        '\u00BA': exports.MO.ACCENT,
        '\u02C6': exports.MO.WIDEACCENT,
        '\u02C7': exports.MO.WIDEACCENT,
        '\u02C9': exports.MO.WIDEACCENT,
        '\u02CA': exports.MO.ACCENT,
        '\u02CB': exports.MO.ACCENT,
        '\u02CD': exports.MO.WIDEACCENT,
        '\u02D8': exports.MO.ACCENT,
        '\u02D9': exports.MO.ACCENT,
        '\u02DA': exports.MO.ACCENT,
        '\u02DC': exports.MO.WIDEACCENT,
        '\u02DD': exports.MO.ACCENT,
        '\u02F7': exports.MO.WIDEACCENT,
        '\u0302': exports.MO.WIDEACCENT,
        '\u0311': exports.MO.ACCENT,
        '\u03F6': exports.MO.REL,
        '\u2016': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                fence: true,
                stretchy: true
            }
        ],
        '\u2019': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.CLOSE,
            {
                fence: true
            }
        ],
        '\u201A': exports.MO.ACCENT,
        '\u201B': exports.MO.ACCENT,
        '\u201D': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.CLOSE,
            {
                fence: true
            }
        ],
        '\u201E': exports.MO.ACCENT,
        '\u201F': exports.MO.ACCENT,
        '\u2032': exports.MO.ORD,
        '\u2033': exports.MO.ACCENT,
        '\u2034': exports.MO.ACCENT,
        '\u2035': exports.MO.ACCENT,
        '\u2036': exports.MO.ACCENT,
        '\u2037': exports.MO.ACCENT,
        '\u203E': exports.MO.WIDEACCENT,
        '\u2057': exports.MO.ACCENT,
        '\u20DB': exports.MO.ACCENT,
        '\u20DC': exports.MO.ACCENT,
        '\u2309': exports.MO.CLOSE,
        '\u230B': exports.MO.CLOSE,
        '\u232A': exports.MO.CLOSE,
        '\u23B4': exports.MO.WIDEACCENT,
        '\u23B5': exports.MO.WIDEACCENT,
        '\u23DC': exports.MO.WIDEACCENT,
        '\u23DD': exports.MO.WIDEACCENT,
        '\u23DE': exports.MO.WIDEACCENT,
        '\u23DF': exports.MO.WIDEACCENT,
        '\u23E0': exports.MO.WIDEACCENT,
        '\u23E1': exports.MO.WIDEACCENT,
        '\u25A0': exports.MO.BIN3,
        '\u25A1': exports.MO.BIN3,
        '\u25AA': exports.MO.BIN3,
        '\u25AB': exports.MO.BIN3,
        '\u25AD': exports.MO.BIN3,
        '\u25AE': exports.MO.BIN3,
        '\u25AF': exports.MO.BIN3,
        '\u25B0': exports.MO.BIN3,
        '\u25B1': exports.MO.BIN3,
        '\u25B2': exports.MO.BIN4,
        '\u25B4': exports.MO.BIN4,
        '\u25B6': exports.MO.BIN4,
        '\u25B7': exports.MO.BIN4,
        '\u25B8': exports.MO.BIN4,
        '\u25BC': exports.MO.BIN4,
        '\u25BE': exports.MO.BIN4,
        '\u25C0': exports.MO.BIN4,
        '\u25C1': exports.MO.BIN4,
        '\u25C2': exports.MO.BIN4,
        '\u25C4': exports.MO.BIN4,
        '\u25C5': exports.MO.BIN4,
        '\u25C6': exports.MO.BIN4,
        '\u25C7': exports.MO.BIN4,
        '\u25C8': exports.MO.BIN4,
        '\u25C9': exports.MO.BIN4,
        '\u25CC': exports.MO.BIN4,
        '\u25CD': exports.MO.BIN4,
        '\u25CE': exports.MO.BIN4,
        '\u25CF': exports.MO.BIN4,
        '\u25D6': exports.MO.BIN4,
        '\u25D7': exports.MO.BIN4,
        '\u25E6': exports.MO.BIN4,
        '\u266D': exports.MO.ORD02,
        '\u266E': exports.MO.ORD02,
        '\u266F': exports.MO.ORD02,
        '\u2773': exports.MO.CLOSE,
        '\u27E7': exports.MO.CLOSE,
        '\u27E9': exports.MO.CLOSE,
        '\u27EB': exports.MO.CLOSE,
        '\u27ED': exports.MO.CLOSE,
        '\u27EF': exports.MO.CLOSE,
        '\u2980': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                fence: true,
                stretchy: true
            }
        ],
        '\u2984': exports.MO.CLOSE,
        '\u2986': exports.MO.CLOSE,
        '\u2988': exports.MO.CLOSE,
        '\u298A': exports.MO.CLOSE,
        '\u298C': exports.MO.CLOSE,
        '\u298E': exports.MO.CLOSE,
        '\u2990': exports.MO.CLOSE,
        '\u2992': exports.MO.CLOSE,
        '\u2994': exports.MO.CLOSE,
        '\u2996': exports.MO.CLOSE,
        '\u2998': exports.MO.CLOSE,
        '\u29FD': exports.MO.CLOSE
    },
    infix: {
        '!=': exports.MO.BIN4,
        '#': exports.MO.ORD,
        '$': exports.MO.ORD,
        '%': [
            3,
            3,
            MmlNode_js_1.TEXCLASS.ORD,
            null
        ],
        '&&': exports.MO.BIN4,
        '': exports.MO.ORD,
        '*': exports.MO.BIN3,
        '**': OPDEF(1, 1),
        '*=': exports.MO.BIN4,
        '+': exports.MO.BIN4,
        '+=': exports.MO.BIN4,
        ',': [
            0,
            3,
            MmlNode_js_1.TEXCLASS.PUNCT,
            {
                linebreakstyle: 'after',
                separator: true
            }
        ],
        '-': exports.MO.BIN4,
        '-=': exports.MO.BIN4,
        '->': exports.MO.BIN5,
        '.': [
            0,
            3,
            MmlNode_js_1.TEXCLASS.PUNCT,
            {
                separator: true
            }
        ],
        '/': exports.MO.ORD11,
        '//': OPDEF(1, 1),
        '/=': exports.MO.BIN4,
        ':': [
            1,
            2,
            MmlNode_js_1.TEXCLASS.REL,
            null
        ],
        ':=': exports.MO.BIN4,
        ';': [
            0,
            3,
            MmlNode_js_1.TEXCLASS.PUNCT,
            {
                linebreakstyle: 'after',
                separator: true
            }
        ],
        '<': exports.MO.REL,
        '<=': exports.MO.BIN5,
        '<>': OPDEF(1, 1),
        '=': exports.MO.REL,
        '==': exports.MO.BIN4,
        '>': exports.MO.REL,
        '>=': exports.MO.BIN5,
        '?': [
            1,
            1,
            MmlNode_js_1.TEXCLASS.CLOSE,
            null
        ],
        '@': exports.MO.ORD11,
        '\\': exports.MO.ORD,
        '^': exports.MO.ORD11,
        '_': exports.MO.ORD11,
        '|': [
            2,
            2,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                fence: true,
                stretchy: true,
                symmetric: true
            }
        ],
        '||': [
            2,
            2,
            MmlNode_js_1.TEXCLASS.BIN,
            {
                fence: true,
                stretchy: true,
                symmetric: true
            }
        ],
        '|||': [
            2,
            2,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                fence: true,
                stretchy: true,
                symmetric: true
            }
        ],
        '\u00B1': exports.MO.BIN4,
        '\u00B7': exports.MO.BIN4,
        '\u00D7': exports.MO.BIN4,
        '\u00F7': exports.MO.BIN4,
        '\u02B9': exports.MO.ORD,
        '\u0300': exports.MO.ACCENT,
        '\u0301': exports.MO.ACCENT,
        '\u0303': exports.MO.WIDEACCENT,
        '\u0304': exports.MO.ACCENT,
        '\u0306': exports.MO.ACCENT,
        '\u0307': exports.MO.ACCENT,
        '\u0308': exports.MO.ACCENT,
        '\u030C': exports.MO.ACCENT,
        '\u0332': exports.MO.WIDEACCENT,
        '\u0338': exports.MO.REL4,
        '\u2015': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                stretchy: true
            }
        ],
        '\u2017': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                stretchy: true
            }
        ],
        '\u2020': exports.MO.BIN3,
        '\u2021': exports.MO.BIN3,
        '\u2022': exports.MO.BIN4,
        '\u2026': exports.MO.INNER,
        '\u2043': exports.MO.BIN4,
        '\u2044': exports.MO.TALLBIN,
        '\u2061': exports.MO.ORD,
        '\u2062': exports.MO.ORD,
        '\u2063': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                linebreakstyle: 'after',
                separator: true
            }
        ],
        '\u2064': exports.MO.ORD,
        '\u20D7': exports.MO.ACCENT,
        '\u2111': exports.MO.ORD,
        '\u2113': exports.MO.ORD,
        '\u2118': exports.MO.ORD,
        '\u211C': exports.MO.ORD,
        '\u2190': exports.MO.WIDEREL,
        '\u2191': exports.MO.RELSTRETCH,
        '\u2192': exports.MO.WIDEREL,
        '\u2193': exports.MO.RELSTRETCH,
        '\u2194': exports.MO.WIDEREL,
        '\u2195': exports.MO.RELSTRETCH,
        '\u2196': exports.MO.RELSTRETCH,
        '\u2197': exports.MO.RELSTRETCH,
        '\u2198': exports.MO.RELSTRETCH,
        '\u2199': exports.MO.RELSTRETCH,
        '\u219A': exports.MO.RELACCENT,
        '\u219B': exports.MO.RELACCENT,
        '\u219C': exports.MO.WIDEREL,
        '\u219D': exports.MO.WIDEREL,
        '\u219E': exports.MO.WIDEREL,
        '\u219F': exports.MO.WIDEREL,
        '\u21A0': exports.MO.WIDEREL,
        '\u21A1': exports.MO.RELSTRETCH,
        '\u21A2': exports.MO.WIDEREL,
        '\u21A3': exports.MO.WIDEREL,
        '\u21A4': exports.MO.WIDEREL,
        '\u21A5': exports.MO.RELSTRETCH,
        '\u21A6': exports.MO.WIDEREL,
        '\u21A7': exports.MO.RELSTRETCH,
        '\u21A8': exports.MO.RELSTRETCH,
        '\u21A9': exports.MO.WIDEREL,
        '\u21AA': exports.MO.WIDEREL,
        '\u21AB': exports.MO.WIDEREL,
        '\u21AC': exports.MO.WIDEREL,
        '\u21AD': exports.MO.WIDEREL,
        '\u21AE': exports.MO.RELACCENT,
        '\u21AF': exports.MO.RELSTRETCH,
        '\u21B0': exports.MO.RELSTRETCH,
        '\u21B1': exports.MO.RELSTRETCH,
        '\u21B2': exports.MO.RELSTRETCH,
        '\u21B3': exports.MO.RELSTRETCH,
        '\u21B4': exports.MO.RELSTRETCH,
        '\u21B5': exports.MO.RELSTRETCH,
        '\u21B6': exports.MO.RELACCENT,
        '\u21B7': exports.MO.RELACCENT,
        '\u21B8': exports.MO.REL,
        '\u21B9': exports.MO.WIDEREL,
        '\u21BA': exports.MO.REL,
        '\u21BB': exports.MO.REL,
        '\u21BC': exports.MO.WIDEREL,
        '\u21BD': exports.MO.WIDEREL,
        '\u21BE': exports.MO.RELSTRETCH,
        '\u21BF': exports.MO.RELSTRETCH,
        '\u21C0': exports.MO.WIDEREL,
        '\u21C1': exports.MO.WIDEREL,
        '\u21C2': exports.MO.RELSTRETCH,
        '\u21C3': exports.MO.RELSTRETCH,
        '\u21C4': exports.MO.WIDEREL,
        '\u21C5': exports.MO.RELSTRETCH,
        '\u21C6': exports.MO.WIDEREL,
        '\u21C7': exports.MO.WIDEREL,
        '\u21C8': exports.MO.RELSTRETCH,
        '\u21C9': exports.MO.WIDEREL,
        '\u21CA': exports.MO.RELSTRETCH,
        '\u21CB': exports.MO.WIDEREL,
        '\u21CC': exports.MO.WIDEREL,
        '\u21CD': exports.MO.RELACCENT,
        '\u21CE': exports.MO.RELACCENT,
        '\u21CF': exports.MO.RELACCENT,
        '\u21D0': exports.MO.WIDEREL,
        '\u21D1': exports.MO.RELSTRETCH,
        '\u21D2': exports.MO.WIDEREL,
        '\u21D3': exports.MO.RELSTRETCH,
        '\u21D4': exports.MO.WIDEREL,
        '\u21D5': exports.MO.RELSTRETCH,
        '\u21D6': exports.MO.RELSTRETCH,
        '\u21D7': exports.MO.RELSTRETCH,
        '\u21D8': exports.MO.RELSTRETCH,
        '\u21D9': exports.MO.RELSTRETCH,
        '\u21DA': exports.MO.WIDEREL,
        '\u21DB': exports.MO.WIDEREL,
        '\u21DC': exports.MO.WIDEREL,
        '\u21DD': exports.MO.WIDEREL,
        '\u21DE': exports.MO.REL,
        '\u21DF': exports.MO.REL,
        '\u21E0': exports.MO.WIDEREL,
        '\u21E1': exports.MO.RELSTRETCH,
        '\u21E2': exports.MO.WIDEREL,
        '\u21E3': exports.MO.RELSTRETCH,
        '\u21E4': exports.MO.WIDEREL,
        '\u21E5': exports.MO.WIDEREL,
        '\u21E6': exports.MO.WIDEREL,
        '\u21E7': exports.MO.RELSTRETCH,
        '\u21E8': exports.MO.WIDEREL,
        '\u21E9': exports.MO.RELSTRETCH,
        '\u21EA': exports.MO.RELSTRETCH,
        '\u21EB': exports.MO.RELSTRETCH,
        '\u21EC': exports.MO.RELSTRETCH,
        '\u21ED': exports.MO.RELSTRETCH,
        '\u21EE': exports.MO.RELSTRETCH,
        '\u21EF': exports.MO.RELSTRETCH,
        '\u21F0': exports.MO.WIDEREL,
        '\u21F1': exports.MO.REL,
        '\u21F2': exports.MO.REL,
        '\u21F3': exports.MO.RELSTRETCH,
        '\u21F4': exports.MO.RELACCENT,
        '\u21F5': exports.MO.RELSTRETCH,
        '\u21F6': exports.MO.WIDEREL,
        '\u21F7': exports.MO.RELACCENT,
        '\u21F8': exports.MO.RELACCENT,
        '\u21F9': exports.MO.RELACCENT,
        '\u21FA': exports.MO.RELACCENT,
        '\u21FB': exports.MO.RELACCENT,
        '\u21FC': exports.MO.RELACCENT,
        '\u21FD': exports.MO.WIDEREL,
        '\u21FE': exports.MO.WIDEREL,
        '\u21FF': exports.MO.WIDEREL,
        '\u2201': OPDEF(1, 2, MmlNode_js_1.TEXCLASS.ORD),
        '\u2205': exports.MO.ORD,
        '\u2206': exports.MO.BIN3,
        '\u2208': exports.MO.REL,
        '\u2209': exports.MO.REL,
        '\u220A': exports.MO.REL,
        '\u220B': exports.MO.REL,
        '\u220C': exports.MO.REL,
        '\u220D': exports.MO.REL,
        '\u220E': exports.MO.BIN3,
        '\u2212': exports.MO.BIN4,
        '\u2213': exports.MO.BIN4,
        '\u2214': exports.MO.BIN4,
        '\u2215': exports.MO.TALLBIN,
        '\u2216': exports.MO.BIN4,
        '\u2217': exports.MO.BIN4,
        '\u2218': exports.MO.BIN4,
        '\u2219': exports.MO.BIN4,
        '\u221D': exports.MO.REL,
        '\u221E': exports.MO.ORD,
        '\u221F': exports.MO.REL,
        '\u2223': exports.MO.REL,
        '\u2224': exports.MO.REL,
        '\u2225': exports.MO.REL,
        '\u2226': exports.MO.REL,
        '\u2227': exports.MO.BIN4,
        '\u2228': exports.MO.BIN4,
        '\u2229': exports.MO.BIN4,
        '\u222A': exports.MO.BIN4,
        '\u2234': exports.MO.REL,
        '\u2235': exports.MO.REL,
        '\u2236': exports.MO.REL,
        '\u2237': exports.MO.REL,
        '\u2238': exports.MO.BIN4,
        '\u2239': exports.MO.REL,
        '\u223A': exports.MO.BIN4,
        '\u223B': exports.MO.REL,
        '\u223C': exports.MO.REL,
        '\u223D': exports.MO.REL,
        '\u223D\u0331': exports.MO.BIN3,
        '\u223E': exports.MO.REL,
        '\u223F': exports.MO.BIN3,
        '\u2240': exports.MO.BIN4,
        '\u2241': exports.MO.REL,
        '\u2242': exports.MO.REL,
        '\u2242\u0338': exports.MO.REL,
        '\u2243': exports.MO.REL,
        '\u2244': exports.MO.REL,
        '\u2245': exports.MO.REL,
        '\u2246': exports.MO.REL,
        '\u2247': exports.MO.REL,
        '\u2248': exports.MO.REL,
        '\u2249': exports.MO.REL,
        '\u224A': exports.MO.REL,
        '\u224B': exports.MO.REL,
        '\u224C': exports.MO.REL,
        '\u224D': exports.MO.REL,
        '\u224E': exports.MO.REL,
        '\u224E\u0338': exports.MO.REL,
        '\u224F': exports.MO.REL,
        '\u224F\u0338': exports.MO.REL,
        '\u2250': exports.MO.REL,
        '\u2251': exports.MO.REL,
        '\u2252': exports.MO.REL,
        '\u2253': exports.MO.REL,
        '\u2254': exports.MO.REL,
        '\u2255': exports.MO.REL,
        '\u2256': exports.MO.REL,
        '\u2257': exports.MO.REL,
        '\u2258': exports.MO.REL,
        '\u2259': exports.MO.REL,
        '\u225A': exports.MO.REL,
        '\u225B': exports.MO.REL,
        '\u225C': exports.MO.REL,
        '\u225D': exports.MO.REL,
        '\u225E': exports.MO.REL,
        '\u225F': exports.MO.REL,
        '\u2260': exports.MO.REL,
        '\u2261': exports.MO.REL,
        '\u2262': exports.MO.REL,
        '\u2263': exports.MO.REL,
        '\u2264': exports.MO.REL,
        '\u2265': exports.MO.REL,
        '\u2266': exports.MO.REL,
        '\u2266\u0338': exports.MO.REL,
        '\u2267': exports.MO.REL,
        '\u2268': exports.MO.REL,
        '\u2269': exports.MO.REL,
        '\u226A': exports.MO.REL,
        '\u226A\u0338': exports.MO.REL,
        '\u226B': exports.MO.REL,
        '\u226B\u0338': exports.MO.REL,
        '\u226C': exports.MO.REL,
        '\u226D': exports.MO.REL,
        '\u226E': exports.MO.REL,
        '\u226F': exports.MO.REL,
        '\u2270': exports.MO.REL,
        '\u2271': exports.MO.REL,
        '\u2272': exports.MO.REL,
        '\u2273': exports.MO.REL,
        '\u2274': exports.MO.REL,
        '\u2275': exports.MO.REL,
        '\u2276': exports.MO.REL,
        '\u2277': exports.MO.REL,
        '\u2278': exports.MO.REL,
        '\u2279': exports.MO.REL,
        '\u227A': exports.MO.REL,
        '\u227B': exports.MO.REL,
        '\u227C': exports.MO.REL,
        '\u227D': exports.MO.REL,
        '\u227E': exports.MO.REL,
        '\u227F': exports.MO.REL,
        '\u227F\u0338': exports.MO.REL,
        '\u2280': exports.MO.REL,
        '\u2281': exports.MO.REL,
        '\u2282': exports.MO.REL,
        '\u2282\u20D2': exports.MO.REL,
        '\u2283': exports.MO.REL,
        '\u2283\u20D2': exports.MO.REL,
        '\u2284': exports.MO.REL,
        '\u2285': exports.MO.REL,
        '\u2286': exports.MO.REL,
        '\u2287': exports.MO.REL,
        '\u2288': exports.MO.REL,
        '\u2289': exports.MO.REL,
        '\u228A': exports.MO.REL,
        '\u228B': exports.MO.REL,
        '\u228C': exports.MO.BIN4,
        '\u228D': exports.MO.BIN4,
        '\u228E': exports.MO.BIN4,
        '\u228F': exports.MO.REL,
        '\u228F\u0338': exports.MO.REL,
        '\u2290': exports.MO.REL,
        '\u2290\u0338': exports.MO.REL,
        '\u2291': exports.MO.REL,
        '\u2292': exports.MO.REL,
        '\u2293': exports.MO.BIN4,
        '\u2294': exports.MO.BIN4,
        '\u2295': exports.MO.BIN4,
        '\u2296': exports.MO.BIN4,
        '\u2297': exports.MO.BIN4,
        '\u2298': exports.MO.BIN4,
        '\u2299': exports.MO.BIN4,
        '\u229A': exports.MO.BIN4,
        '\u229B': exports.MO.BIN4,
        '\u229C': exports.MO.BIN4,
        '\u229D': exports.MO.BIN4,
        '\u229E': exports.MO.BIN4,
        '\u229F': exports.MO.BIN4,
        '\u22A0': exports.MO.BIN4,
        '\u22A1': exports.MO.BIN4,
        '\u22A2': exports.MO.REL,
        '\u22A3': exports.MO.REL,
        '\u22A4': exports.MO.ORD55,
        '\u22A5': exports.MO.REL,
        '\u22A6': exports.MO.REL,
        '\u22A7': exports.MO.REL,
        '\u22A8': exports.MO.REL,
        '\u22A9': exports.MO.REL,
        '\u22AA': exports.MO.REL,
        '\u22AB': exports.MO.REL,
        '\u22AC': exports.MO.REL,
        '\u22AD': exports.MO.REL,
        '\u22AE': exports.MO.REL,
        '\u22AF': exports.MO.REL,
        '\u22B0': exports.MO.REL,
        '\u22B1': exports.MO.REL,
        '\u22B2': exports.MO.REL,
        '\u22B3': exports.MO.REL,
        '\u22B4': exports.MO.REL,
        '\u22B5': exports.MO.REL,
        '\u22B6': exports.MO.REL,
        '\u22B7': exports.MO.REL,
        '\u22B8': exports.MO.REL,
        '\u22B9': exports.MO.REL,
        '\u22BA': exports.MO.BIN4,
        '\u22BB': exports.MO.BIN4,
        '\u22BC': exports.MO.BIN4,
        '\u22BD': exports.MO.BIN4,
        '\u22BE': exports.MO.BIN3,
        '\u22BF': exports.MO.BIN3,
        '\u22C4': exports.MO.BIN4,
        '\u22C5': exports.MO.BIN4,
        '\u22C6': exports.MO.BIN4,
        '\u22C7': exports.MO.BIN4,
        '\u22C8': exports.MO.REL,
        '\u22C9': exports.MO.BIN4,
        '\u22CA': exports.MO.BIN4,
        '\u22CB': exports.MO.BIN4,
        '\u22CC': exports.MO.BIN4,
        '\u22CD': exports.MO.REL,
        '\u22CE': exports.MO.BIN4,
        '\u22CF': exports.MO.BIN4,
        '\u22D0': exports.MO.REL,
        '\u22D1': exports.MO.REL,
        '\u22D2': exports.MO.BIN4,
        '\u22D3': exports.MO.BIN4,
        '\u22D4': exports.MO.REL,
        '\u22D5': exports.MO.REL,
        '\u22D6': exports.MO.REL,
        '\u22D7': exports.MO.REL,
        '\u22D8': exports.MO.REL,
        '\u22D9': exports.MO.REL,
        '\u22DA': exports.MO.REL,
        '\u22DB': exports.MO.REL,
        '\u22DC': exports.MO.REL,
        '\u22DD': exports.MO.REL,
        '\u22DE': exports.MO.REL,
        '\u22DF': exports.MO.REL,
        '\u22E0': exports.MO.REL,
        '\u22E1': exports.MO.REL,
        '\u22E2': exports.MO.REL,
        '\u22E3': exports.MO.REL,
        '\u22E4': exports.MO.REL,
        '\u22E5': exports.MO.REL,
        '\u22E6': exports.MO.REL,
        '\u22E7': exports.MO.REL,
        '\u22E8': exports.MO.REL,
        '\u22E9': exports.MO.REL,
        '\u22EA': exports.MO.REL,
        '\u22EB': exports.MO.REL,
        '\u22EC': exports.MO.REL,
        '\u22ED': exports.MO.REL,
        '\u22EE': exports.MO.ORD55,
        '\u22EF': exports.MO.INNER,
        '\u22F0': exports.MO.REL,
        '\u22F1': [
            5,
            5,
            MmlNode_js_1.TEXCLASS.INNER,
            null
        ],
        '\u22F2': exports.MO.REL,
        '\u22F3': exports.MO.REL,
        '\u22F4': exports.MO.REL,
        '\u22F5': exports.MO.REL,
        '\u22F6': exports.MO.REL,
        '\u22F7': exports.MO.REL,
        '\u22F8': exports.MO.REL,
        '\u22F9': exports.MO.REL,
        '\u22FA': exports.MO.REL,
        '\u22FB': exports.MO.REL,
        '\u22FC': exports.MO.REL,
        '\u22FD': exports.MO.REL,
        '\u22FE': exports.MO.REL,
        '\u22FF': exports.MO.REL,
        '\u2305': exports.MO.BIN3,
        '\u2306': exports.MO.BIN3,
        '\u2322': exports.MO.REL4,
        '\u2323': exports.MO.REL4,
        '\u2329': exports.MO.OPEN,
        '\u232A': exports.MO.CLOSE,
        '\u23AA': exports.MO.ORD,
        '\u23AF': [
            0,
            0,
            MmlNode_js_1.TEXCLASS.ORD,
            {
                stretchy: true
            }
        ],
        '\u23B0': exports.MO.OPEN,
        '\u23B1': exports.MO.CLOSE,
        '\u2500': exports.MO.ORD,
        '\u25B3': exports.MO.BIN4,
        '\u25B5': exports.MO.BIN4,
        '\u25B9': exports.MO.BIN4,
        '\u25BD': exports.MO.BIN4,
        '\u25BF': exports.MO.BIN4,
        '\u25C3': exports.MO.BIN4,
        '\u25EF': exports.MO.BIN3,
        '\u2660': exports.MO.ORD,
        '\u2661': exports.MO.ORD,
        '\u2662': exports.MO.ORD,
        '\u2663': exports.MO.ORD,
        '\u2758': exports.MO.REL,
        '\u27F0': exports.MO.RELSTRETCH,
        '\u27F1': exports.MO.RELSTRETCH,
        '\u27F5': exports.MO.WIDEREL,
        '\u27F6': exports.MO.WIDEREL,
        '\u27F7': exports.MO.WIDEREL,
        '\u27F8': exports.MO.WIDEREL,
        '\u27F9': exports.MO.WIDEREL,
        '\u27FA': exports.MO.WIDEREL,
        '\u27FB': exports.MO.WIDEREL,
        '\u27FC': exports.MO.WIDEREL,
        '\u27FD': exports.MO.WIDEREL,
        '\u27FE': exports.MO.WIDEREL,
        '\u27FF': exports.MO.WIDEREL,
        '\u2900': exports.MO.RELACCENT,
        '\u2901': exports.MO.RELACCENT,
        '\u2902': exports.MO.RELACCENT,
        '\u2903': exports.MO.RELACCENT,
        '\u2904': exports.MO.RELACCENT,
        '\u2905': exports.MO.RELACCENT,
        '\u2906': exports.MO.RELACCENT,
        '\u2907': exports.MO.RELACCENT,
        '\u2908': exports.MO.REL,
        '\u2909': exports.MO.REL,
        '\u290A': exports.MO.RELSTRETCH,
        '\u290B': exports.MO.RELSTRETCH,
        '\u290C': exports.MO.WIDEREL,
        '\u290D': exports.MO.WIDEREL,
        '\u290E': exports.MO.WIDEREL,
        '\u290F': exports.MO.WIDEREL,
        '\u2910': exports.MO.WIDEREL,
        '\u2911': exports.MO.RELACCENT,
        '\u2912': exports.MO.RELSTRETCH,
        '\u2913': exports.MO.RELSTRETCH,
        '\u2914': exports.MO.RELACCENT,
        '\u2915': exports.MO.RELACCENT,
        '\u2916': exports.MO.RELACCENT,
        '\u2917': exports.MO.RELACCENT,
        '\u2918': exports.MO.RELACCENT,
        '\u2919': exports.MO.RELACCENT,
        '\u291A': exports.MO.RELACCENT,
        '\u291B': exports.MO.RELACCENT,
        '\u291C': exports.MO.RELACCENT,
        '\u291D': exports.MO.RELACCENT,
        '\u291E': exports.MO.RELACCENT,
        '\u291F': exports.MO.RELACCENT,
        '\u2920': exports.MO.RELACCENT,
        '\u2921': exports.MO.RELSTRETCH,
        '\u2922': exports.MO.RELSTRETCH,
        '\u2923': exports.MO.REL,
        '\u2924': exports.MO.REL,
        '\u2925': exports.MO.REL,
        '\u2926': exports.MO.REL,
        '\u2927': exports.MO.REL,
        '\u2928': exports.MO.REL,
        '\u2929': exports.MO.REL,
        '\u292A': exports.MO.REL,
        '\u292B': exports.MO.REL,
        '\u292C': exports.MO.REL,
        '\u292D': exports.MO.REL,
        '\u292E': exports.MO.REL,
        '\u292F': exports.MO.REL,
        '\u2930': exports.MO.REL,
        '\u2931': exports.MO.REL,
        '\u2932': exports.MO.REL,
        '\u2933': exports.MO.RELACCENT,
        '\u2934': exports.MO.REL,
        '\u2935': exports.MO.REL,
        '\u2936': exports.MO.REL,
        '\u2937': exports.MO.REL,
        '\u2938': exports.MO.REL,
        '\u2939': exports.MO.REL,
        '\u293A': exports.MO.RELACCENT,
        '\u293B': exports.MO.RELACCENT,
        '\u293C': exports.MO.RELACCENT,
        '\u293D': exports.MO.RELACCENT,
        '\u293E': exports.MO.REL,
        '\u293F': exports.MO.REL,
        '\u2940': exports.MO.REL,
        '\u2941': exports.MO.REL,
        '\u2942': exports.MO.RELACCENT,
        '\u2943': exports.MO.RELACCENT,
        '\u2944': exports.MO.RELACCENT,
        '\u2945': exports.MO.RELACCENT,
        '\u2946': exports.MO.RELACCENT,
        '\u2947': exports.MO.RELACCENT,
        '\u2948': exports.MO.RELACCENT,
        '\u2949': exports.MO.REL,
        '\u294A': exports.MO.RELACCENT,
        '\u294B': exports.MO.RELACCENT,
        '\u294C': exports.MO.REL,
        '\u294D': exports.MO.REL,
        '\u294E': exports.MO.WIDEREL,
        '\u294F': exports.MO.RELSTRETCH,
        '\u2950': exports.MO.WIDEREL,
        '\u2951': exports.MO.RELSTRETCH,
        '\u2952': exports.MO.WIDEREL,
        '\u2953': exports.MO.WIDEREL,
        '\u2954': exports.MO.RELSTRETCH,
        '\u2955': exports.MO.RELSTRETCH,
        '\u2956': exports.MO.RELSTRETCH,
        '\u2957': exports.MO.RELSTRETCH,
        '\u2958': exports.MO.RELSTRETCH,
        '\u2959': exports.MO.RELSTRETCH,
        '\u295A': exports.MO.WIDEREL,
        '\u295B': exports.MO.WIDEREL,
        '\u295C': exports.MO.RELSTRETCH,
        '\u295D': exports.MO.RELSTRETCH,
        '\u295E': exports.MO.WIDEREL,
        '\u295F': exports.MO.WIDEREL,
        '\u2960': exports.MO.RELSTRETCH,
        '\u2961': exports.MO.RELSTRETCH,
        '\u2962': exports.MO.RELACCENT,
        '\u2963': exports.MO.REL,
        '\u2964': exports.MO.RELACCENT,
        '\u2965': exports.MO.REL,
        '\u2966': exports.MO.RELACCENT,
        '\u2967': exports.MO.RELACCENT,
        '\u2968': exports.MO.RELACCENT,
        '\u2969': exports.MO.RELACCENT,
        '\u296A': exports.MO.RELACCENT,
        '\u296B': exports.MO.RELACCENT,
        '\u296C': exports.MO.RELACCENT,
        '\u296D': exports.MO.RELACCENT,
        '\u296E': exports.MO.RELSTRETCH,
        '\u296F': exports.MO.RELSTRETCH,
        '\u2970': exports.MO.RELACCENT,
        '\u2971': exports.MO.RELACCENT,
        '\u2972': exports.MO.RELACCENT,
        '\u2973': exports.MO.RELACCENT,
        '\u2974': exports.MO.RELACCENT,
        '\u2975': exports.MO.RELACCENT,
        '\u2976': exports.MO.RELACCENT,
        '\u2977': exports.MO.RELACCENT,
        '\u2978': exports.MO.RELACCENT,
        '\u2979': exports.MO.RELACCENT,
        '\u297A': exports.MO.RELACCENT,
        '\u297B': exports.MO.RELACCENT,
        '\u297C': exports.MO.RELACCENT,
        '\u297D': exports.MO.RELACCENT,
        '\u297E': exports.MO.REL,
        '\u297F': exports.MO.REL,
        '\u2981': exports.MO.BIN3,
        '\u2982': exports.MO.BIN3,
        '\u2999': exports.MO.BIN3,
        '\u299A': exports.MO.BIN3,
        '\u299B': exports.MO.BIN3,
        '\u299C': exports.MO.BIN3,
        '\u299D': exports.MO.BIN3,
        '\u299E': exports.MO.BIN3,
        '\u299F': exports.MO.BIN3,
        '\u29A0': exports.MO.BIN3,
        '\u29A1': exports.MO.BIN3,
        '\u29A2': exports.MO.BIN3,
        '\u29A3': exports.MO.BIN3,
        '\u29A4': exports.MO.BIN3,
        '\u29A5': exports.MO.BIN3,
        '\u29A6': exports.MO.BIN3,
        '\u29A7': exports.MO.BIN3,
        '\u29A8': exports.MO.BIN3,
        '\u29A9': exports.MO.BIN3,
        '\u29AA': exports.MO.BIN3,
        '\u29AB': exports.MO.BIN3,
        '\u29AC': exports.MO.BIN3,
        '\u29AD': exports.MO.BIN3,
        '\u29AE': exports.MO.BIN3,
        '\u29AF': exports.MO.BIN3,
        '\u29B0': exports.MO.BIN3,
        '\u29B1': exports.MO.BIN3,
        '\u29B2': exports.MO.BIN3,
        '\u29B3': exports.MO.BIN3,
        '\u29B4': exports.MO.BIN3,
        '\u29B5': exports.MO.BIN3,
        '\u29B6': exports.MO.BIN4,
        '\u29B7': exports.MO.BIN4,
        '\u29B8': exports.MO.BIN4,
        '\u29B9': exports.MO.BIN4,
        '\u29BA': exports.MO.BIN4,
        '\u29BB': exports.MO.BIN4,
        '\u29BC': exports.MO.BIN4,
        '\u29BD': exports.MO.BIN4,
        '\u29BE': exports.MO.BIN4,
        '\u29BF': exports.MO.BIN4,
        '\u29C0': exports.MO.REL,
        '\u29C1': exports.MO.REL,
        '\u29C2': exports.MO.BIN3,
        '\u29C3': exports.MO.BIN3,
        '\u29C4': exports.MO.BIN4,
        '\u29C5': exports.MO.BIN4,
        '\u29C6': exports.MO.BIN4,
        '\u29C7': exports.MO.BIN4,
        '\u29C8': exports.MO.BIN4,
        '\u29C9': exports.MO.BIN3,
        '\u29CA': exports.MO.BIN3,
        '\u29CB': exports.MO.BIN3,
        '\u29CC': exports.MO.BIN3,
        '\u29CD': exports.MO.BIN3,
        '\u29CE': exports.MO.REL,
        '\u29CF': exports.MO.REL,
        '\u29CF\u0338': exports.MO.REL,
        '\u29D0': exports.MO.REL,
        '\u29D0\u0338': exports.MO.REL,
        '\u29D1': exports.MO.REL,
        '\u29D2': exports.MO.REL,
        '\u29D3': exports.MO.REL,
        '\u29D4': exports.MO.REL,
        '\u29D5': exports.MO.REL,
        '\u29D6': exports.MO.BIN4,
        '\u29D7': exports.MO.BIN4,
        '\u29D8': exports.MO.BIN3,
        '\u29D9': exports.MO.BIN3,
        '\u29DB': exports.MO.BIN3,
        '\u29DC': exports.MO.BIN3,
        '\u29DD': exports.MO.BIN3,
        '\u29DE': exports.MO.REL,
        '\u29DF': exports.MO.BIN3,
        '\u29E0': exports.MO.BIN3,
        '\u29E1': exports.MO.REL,
        '\u29E2': exports.MO.BIN4,
        '\u29E3': exports.MO.REL,
        '\u29E4': exports.MO.REL,
        '\u29E5': exports.MO.REL,
        '\u29E6': exports.MO.REL,
        '\u29E7': exports.MO.BIN3,
        '\u29E8': exports.MO.BIN3,
        '\u29E9': exports.MO.BIN3,
        '\u29EA': exports.MO.BIN3,
        '\u29EB': exports.MO.BIN3,
        '\u29EC': exports.MO.BIN3,
        '\u29ED': exports.MO.BIN3,
        '\u29EE': exports.MO.BIN3,
        '\u29EF': exports.MO.BIN3,
        '\u29F0': exports.MO.BIN3,
        '\u29F1': exports.MO.BIN3,
        '\u29F2': exports.MO.BIN3,
        '\u29F3': exports.MO.BIN3,
        '\u29F4': exports.MO.REL,
        '\u29F5': exports.MO.BIN4,
        '\u29F6': exports.MO.BIN4,
        '\u29F7': exports.MO.BIN4,
        '\u29F8': exports.MO.BIN3,
        '\u29F9': exports.MO.BIN3,
        '\u29FA': exports.MO.BIN3,
        '\u29FB': exports.MO.BIN3,
        '\u29FE': exports.MO.BIN4,
        '\u29FF': exports.MO.BIN4,
        '\u2A1D': exports.MO.BIN3,
        '\u2A1E': exports.MO.BIN3,
        '\u2A1F': exports.MO.BIN3,
        '\u2A20': exports.MO.BIN3,
        '\u2A21': exports.MO.BIN3,
        '\u2A22': exports.MO.BIN4,
        '\u2A23': exports.MO.BIN4,
        '\u2A24': exports.MO.BIN4,
        '\u2A25': exports.MO.BIN4,
        '\u2A26': exports.MO.BIN4,
        '\u2A27': exports.MO.BIN4,
        '\u2A28': exports.MO.BIN4,
        '\u2A29': exports.MO.BIN4,
        '\u2A2A': exports.MO.BIN4,
        '\u2A2B': exports.MO.BIN4,
        '\u2A2C': exports.MO.BIN4,
        '\u2A2D': exports.MO.BIN4,
        '\u2A2E': exports.MO.BIN4,
        '\u2A2F': exports.MO.BIN4,
        '\u2A30': exports.MO.BIN4,
        '\u2A31': exports.MO.BIN4,
        '\u2A32': exports.MO.BIN4,
        '\u2A33': exports.MO.BIN4,
        '\u2A34': exports.MO.BIN4,
        '\u2A35': exports.MO.BIN4,
        '\u2A36': exports.MO.BIN4,
        '\u2A37': exports.MO.BIN4,
        '\u2A38': exports.MO.BIN4,
        '\u2A39': exports.MO.BIN4,
        '\u2A3A': exports.MO.BIN4,
        '\u2A3B': exports.MO.BIN4,
        '\u2A3C': exports.MO.BIN4,
        '\u2A3D': exports.MO.BIN4,
        '\u2A3E': exports.MO.BIN4,
        '\u2A3F': exports.MO.BIN4,
        '\u2A40': exports.MO.BIN4,
        '\u2A41': exports.MO.BIN4,
        '\u2A42': exports.MO.BIN4,
        '\u2A43': exports.MO.BIN4,
        '\u2A44': exports.MO.BIN4,
        '\u2A45': exports.MO.BIN4,
        '\u2A46': exports.MO.BIN4,
        '\u2A47': exports.MO.BIN4,
        '\u2A48': exports.MO.BIN4,
        '\u2A49': exports.MO.BIN4,
        '\u2A4A': exports.MO.BIN4,
        '\u2A4B': exports.MO.BIN4,
        '\u2A4C': exports.MO.BIN4,
        '\u2A4D': exports.MO.BIN4,
        '\u2A4E': exports.MO.BIN4,
        '\u2A4F': exports.MO.BIN4,
        '\u2A50': exports.MO.BIN4,
        '\u2A51': exports.MO.BIN4,
        '\u2A52': exports.MO.BIN4,
        '\u2A53': exports.MO.BIN4,
        '\u2A54': exports.MO.BIN4,
        '\u2A55': exports.MO.BIN4,
        '\u2A56': exports.MO.BIN4,
        '\u2A57': exports.MO.BIN4,
        '\u2A58': exports.MO.BIN4,
        '\u2A59': exports.MO.REL,
        '\u2A5A': exports.MO.BIN4,
        '\u2A5B': exports.MO.BIN4,
        '\u2A5C': exports.MO.BIN4,
        '\u2A5D': exports.MO.BIN4,
        '\u2A5E': exports.MO.BIN4,
        '\u2A5F': exports.MO.BIN4,
        '\u2A60': exports.MO.BIN4,
        '\u2A61': exports.MO.BIN4,
        '\u2A62': exports.MO.BIN4,
        '\u2A63': exports.MO.BIN4,
        '\u2A64': exports.MO.BIN4,
        '\u2A65': exports.MO.BIN4,
        '\u2A66': exports.MO.REL,
        '\u2A67': exports.MO.REL,
        '\u2A68': exports.MO.REL,
        '\u2A69': exports.MO.REL,
        '\u2A6A': exports.MO.REL,
        '\u2A6B': exports.MO.REL,
        '\u2A6C': exports.MO.REL,
        '\u2A6D': exports.MO.REL,
        '\u2A6E': exports.MO.REL,
        '\u2A6F': exports.MO.REL,
        '\u2A70': exports.MO.REL,
        '\u2A71': exports.MO.BIN4,
        '\u2A72': exports.MO.BIN4,
        '\u2A73': exports.MO.REL,
        '\u2A74': exports.MO.REL,
        '\u2A75': exports.MO.REL,
        '\u2A76': exports.MO.REL,
        '\u2A77': exports.MO.REL,
        '\u2A78': exports.MO.REL,
        '\u2A79': exports.MO.REL,
        '\u2A7A': exports.MO.REL,
        '\u2A7B': exports.MO.REL,
        '\u2A7C': exports.MO.REL,
        '\u2A7D': exports.MO.REL,
        '\u2A7D\u0338': exports.MO.REL,
        '\u2A7E': exports.MO.REL,
        '\u2A7E\u0338': exports.MO.REL,
        '\u2A7F': exports.MO.REL,
        '\u2A80': exports.MO.REL,
        '\u2A81': exports.MO.REL,
        '\u2A82': exports.MO.REL,
        '\u2A83': exports.MO.REL,
        '\u2A84': exports.MO.REL,
        '\u2A85': exports.MO.REL,
        '\u2A86': exports.MO.REL,
        '\u2A87': exports.MO.REL,
        '\u2A88': exports.MO.REL,
        '\u2A89': exports.MO.REL,
        '\u2A8A': exports.MO.REL,
        '\u2A8B': exports.MO.REL,
        '\u2A8C': exports.MO.REL,
        '\u2A8D': exports.MO.REL,
        '\u2A8E': exports.MO.REL,
        '\u2A8F': exports.MO.REL,
        '\u2A90': exports.MO.REL,
        '\u2A91': exports.MO.REL,
        '\u2A92': exports.MO.REL,
        '\u2A93': exports.MO.REL,
        '\u2A94': exports.MO.REL,
        '\u2A95': exports.MO.REL,
        '\u2A96': exports.MO.REL,
        '\u2A97': exports.MO.REL,
        '\u2A98': exports.MO.REL,
        '\u2A99': exports.MO.REL,
        '\u2A9A': exports.MO.REL,
        '\u2A9B': exports.MO.REL,
        '\u2A9C': exports.MO.REL,
        '\u2A9D': exports.MO.REL,
        '\u2A9E': exports.MO.REL,
        '\u2A9F': exports.MO.REL,
        '\u2AA0': exports.MO.REL,
        '\u2AA1': exports.MO.REL,
        '\u2AA1\u0338': exports.MO.REL,
        '\u2AA2': exports.MO.REL,
        '\u2AA2\u0338': exports.MO.REL,
        '\u2AA3': exports.MO.REL,
        '\u2AA4': exports.MO.REL,
        '\u2AA5': exports.MO.REL,
        '\u2AA6': exports.MO.REL,
        '\u2AA7': exports.MO.REL,
        '\u2AA8': exports.MO.REL,
        '\u2AA9': exports.MO.REL,
        '\u2AAA': exports.MO.REL,
        '\u2AAB': exports.MO.REL,
        '\u2AAC': exports.MO.REL,
        '\u2AAD': exports.MO.REL,
        '\u2AAE': exports.MO.REL,
        '\u2AAF': exports.MO.REL,
        '\u2AAF\u0338': exports.MO.REL,
        '\u2AB0': exports.MO.REL,
        '\u2AB0\u0338': exports.MO.REL,
        '\u2AB1': exports.MO.REL,
        '\u2AB2': exports.MO.REL,
        '\u2AB3': exports.MO.REL,
        '\u2AB4': exports.MO.REL,
        '\u2AB5': exports.MO.REL,
        '\u2AB6': exports.MO.REL,
        '\u2AB7': exports.MO.REL,
        '\u2AB8': exports.MO.REL,
        '\u2AB9': exports.MO.REL,
        '\u2ABA': exports.MO.REL,
        '\u2ABB': exports.MO.REL,
        '\u2ABC': exports.MO.REL,
        '\u2ABD': exports.MO.REL,
        '\u2ABE': exports.MO.REL,
        '\u2ABF': exports.MO.REL,
        '\u2AC0': exports.MO.REL,
        '\u2AC1': exports.MO.REL,
        '\u2AC2': exports.MO.REL,
        '\u2AC3': exports.MO.REL,
        '\u2AC4': exports.MO.REL,
        '\u2AC5': exports.MO.REL,
        '\u2AC6': exports.MO.REL,
        '\u2AC7': exports.MO.REL,
        '\u2AC8': exports.MO.REL,
        '\u2AC9': exports.MO.REL,
        '\u2ACA': exports.MO.REL,
        '\u2ACB': exports.MO.REL,
        '\u2ACC': exports.MO.REL,
        '\u2ACD': exports.MO.REL,
        '\u2ACE': exports.MO.REL,
        '\u2ACF': exports.MO.REL,
        '\u2AD0': exports.MO.REL,
        '\u2AD1': exports.MO.REL,
        '\u2AD2': exports.MO.REL,
        '\u2AD3': exports.MO.REL,
        '\u2AD4': exports.MO.REL,
        '\u2AD5': exports.MO.REL,
        '\u2AD6': exports.MO.REL,
        '\u2AD7': exports.MO.REL,
        '\u2AD8': exports.MO.REL,
        '\u2AD9': exports.MO.REL,
        '\u2ADA': exports.MO.REL,
        '\u2ADB': exports.MO.REL,
        '\u2ADD': exports.MO.REL,
        '\u2ADD\u0338': exports.MO.REL,
        '\u2ADE': exports.MO.REL,
        '\u2ADF': exports.MO.REL,
        '\u2AE0': exports.MO.REL,
        '\u2AE1': exports.MO.REL,
        '\u2AE2': exports.MO.REL,
        '\u2AE3': exports.MO.REL,
        '\u2AE4': exports.MO.REL,
        '\u2AE5': exports.MO.REL,
        '\u2AE6': exports.MO.REL,
        '\u2AE7': exports.MO.REL,
        '\u2AE8': exports.MO.REL,
        '\u2AE9': exports.MO.REL,
        '\u2AEA': exports.MO.REL,
        '\u2AEB': exports.MO.REL,
        '\u2AEC': exports.MO.REL,
        '\u2AED': exports.MO.REL,
        '\u2AEE': exports.MO.REL,
        '\u2AEF': exports.MO.REL,
        '\u2AF0': exports.MO.REL,
        '\u2AF1': exports.MO.REL,
        '\u2AF2': exports.MO.REL,
        '\u2AF3': exports.MO.REL,
        '\u2AF4': exports.MO.BIN4,
        '\u2AF5': exports.MO.BIN4,
        '\u2AF6': exports.MO.BIN4,
        '\u2AF7': exports.MO.REL,
        '\u2AF8': exports.MO.REL,
        '\u2AF9': exports.MO.REL,
        '\u2AFA': exports.MO.REL,
        '\u2AFB': exports.MO.BIN4,
        '\u2AFD': exports.MO.BIN4,
        '\u2AFE': exports.MO.BIN3,
        '\u2B45': exports.MO.RELSTRETCH,
        '\u2B46': exports.MO.RELSTRETCH,
        '\u3008': exports.MO.OPEN,
        '\u3009': exports.MO.CLOSE,
        '\uFE37': exports.MO.WIDEACCENT,
        '\uFE38': exports.MO.WIDEACCENT
    }
};
exports.OPTABLE.infix['^'] = exports.MO.WIDEREL;
exports.OPTABLE.infix['_'] = exports.MO.WIDEREL;
exports.OPTABLE.infix['\u2ADC'] = exports.MO.REL;

},{"./MmlNode.js":"5Ogy3"}],"RI8aV":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
var ParseUtil_js_1 = require("./ParseUtil.js");
var Stack_js_1 = require("./Stack.js");
var TexError_js_1 = require("./TexError.js");
var MmlNode_js_1 = require("../../core/MmlTree/MmlNode.js");
var TexParser = function() {
    function TexParser1(_string, env, configuration) {
        var e_1, _a;
        var _b;
        this._string = _string;
        this.configuration = configuration;
        this.macroCount = 0;
        this.i = 0;
        this.currentCS = '';
        this.baseI = this.prevI = ((_b = configuration.parser) === null || _b === void 0 ? void 0 : _b.actualI) - _string.length - 1 | 0;
        var inner = env.hasOwnProperty('isInner');
        var isInner = env['isInner'];
        delete env['isInner'];
        var ENV;
        if (env) {
            ENV = {
            };
            try {
                for(var _c = __values(Object.keys(env)), _d = _c.next(); !_d.done; _d = _c.next()){
                    var id = _d.value;
                    ENV[id] = env[id];
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
        }
        this.configuration.pushParser(this);
        this.stack = new Stack_js_1.default(this.itemFactory, ENV, inner ? isInner : true);
        this.Parse();
        this.Push(this.itemFactory.create('stop'));
    }
    Object.defineProperty(TexParser1.prototype, "options", {
        get: function() {
            return this.configuration.options;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TexParser1.prototype, "itemFactory", {
        get: function() {
            return this.configuration.itemFactory;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TexParser1.prototype, "tags", {
        get: function() {
            return this.configuration.tags;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TexParser1.prototype, "string", {
        get: function() {
            return this._string;
        },
        set: function(str) {
            this._string = str;
        },
        enumerable: false,
        configurable: true
    });
    TexParser1.prototype.parse = function(kind, input) {
        return this.configuration.handlers.get(kind).parse(input);
    };
    TexParser1.prototype.lookup = function(kind, symbol) {
        return this.configuration.handlers.get(kind).lookup(symbol);
    };
    TexParser1.prototype.contains = function(kind, symbol) {
        return this.configuration.handlers.get(kind).contains(symbol);
    };
    TexParser1.prototype.toString = function() {
        var e_2, _a;
        var str = '';
        try {
            for(var _b = __values(Array.from(this.configuration.handlers.keys())), _c = _b.next(); !_c.done; _c = _b.next()){
                var config = _c.value;
                str += config + ': ' + this.configuration.handlers.get(config) + '\n';
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
        return str;
    };
    TexParser1.prototype.Parse = function() {
        var c;
        while(this.i < this.string.length){
            c = this.getCodePoint();
            this.i += c.length;
            this.parse('character', [
                this,
                c
            ]);
        }
    };
    Object.defineProperty(TexParser1.prototype, "actualI", {
        get: function() {
            return this.i + this.baseI;
        },
        enumerable: false,
        configurable: true
    });
    TexParser1.prototype.Push = function(arg) {
        if (arg instanceof MmlNode_js_1.AbstractMmlNode) {
            arg.beginLoc = this.prevI;
            arg.endLoc = this.actualI;
        }
        this.prevI = this.actualI;
        if (arg instanceof MmlNode_js_1.AbstractMmlNode && arg.isInferred) this.PushAll(arg.childNodes);
        else this.stack.Push(arg);
    };
    TexParser1.prototype.PushAll = function(args) {
        var e_3, _a;
        try {
            for(var args_1 = __values(args), args_1_1 = args_1.next(); !args_1_1.done; args_1_1 = args_1.next()){
                var arg = args_1_1.value;
                this.stack.Push(arg);
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (args_1_1 && !args_1_1.done && (_a = args_1.return)) _a.call(args_1);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
    };
    TexParser1.prototype.mml = function() {
        if (!this.stack.Top().isKind('mml')) return null;
        var node = this.stack.Top().First;
        this.configuration.popParser();
        return node;
    };
    TexParser1.prototype.convertDelimiter = function(c) {
        var symbol = this.lookup('delimiter', c);
        return symbol ? symbol.char : null;
    };
    TexParser1.prototype.getCodePoint = function() {
        var code = this.string.codePointAt(this.i);
        return code === undefined ? '' : String.fromCodePoint(code);
    };
    TexParser1.prototype.nextIsSpace = function() {
        return !!this.string.charAt(this.i).match(/\s/);
    };
    TexParser1.prototype.GetNext = function() {
        while(this.nextIsSpace())this.i++;
        return this.getCodePoint();
    };
    TexParser1.prototype.GetCS = function() {
        var CS = this.string.slice(this.i).match(/^(([a-z]+) ?|[\uD800-\uDBFF].|.)/i);
        if (CS) {
            this.i += CS[0].length;
            return CS[2] || CS[1];
        } else {
            this.i++;
            return ' ';
        }
    };
    TexParser1.prototype.GetArgument = function(_name, noneOK) {
        switch(this.GetNext()){
            case '':
                if (!noneOK) throw new TexError_js_1.default('MissingArgFor', 'Missing argument for %1', this.currentCS);
                return null;
            case '}':
                if (!noneOK) throw new TexError_js_1.default('ExtraCloseMissingOpen', 'Extra close brace or missing open brace');
                return null;
            case '\\':
                this.i++;
                return '\\' + this.GetCS();
            case '{':
                var j = ++this.i, parens = 1;
                while(this.i < this.string.length)switch(this.string.charAt(this.i++)){
                    case '\\':
                        this.i++;
                        break;
                    case '{':
                        parens++;
                        break;
                    case '}':
                        if ((--parens) === 0) return this.string.slice(j, this.i - 1);
                        break;
                }
                throw new TexError_js_1.default('MissingCloseBrace', 'Missing close brace');
        }
        var c = this.getCodePoint();
        this.i += c.length;
        return c;
    };
    TexParser1.prototype.GetBrackets = function(_name, def) {
        if (this.GetNext() !== '[') return def;
        var j = ++this.i, parens = 0;
        while(this.i < this.string.length)switch(this.string.charAt(this.i++)){
            case '{':
                parens++;
                break;
            case '\\':
                this.i++;
                break;
            case '}':
                if ((parens--) <= 0) throw new TexError_js_1.default('ExtraCloseLooking', 'Extra close brace while looking for %1', '\']\'');
                break;
            case ']':
                if (parens === 0) return this.string.slice(j, this.i - 1);
                break;
        }
        throw new TexError_js_1.default('MissingCloseBracket', 'Could not find closing \']\' for argument to %1', this.currentCS);
    };
    TexParser1.prototype.GetDelimiter = function(name, braceOK) {
        var c = this.GetNext();
        this.i += c.length;
        if (this.i <= this.string.length) {
            if (c === '\\') c += this.GetCS();
            else if (c === '{' && braceOK) {
                this.i--;
                c = this.GetArgument(name);
            }
            if (this.contains('delimiter', c)) return this.convertDelimiter(c);
        }
        throw new TexError_js_1.default('MissingOrUnrecognizedDelim', 'Missing or unrecognized delimiter for %1', this.currentCS);
    };
    TexParser1.prototype.GetDimen = function(name) {
        if (this.GetNext() === '{') {
            var dimen = this.GetArgument(name);
            var _a = __read(ParseUtil_js_1.default.matchDimen(dimen), 2), value = _a[0], unit = _a[1];
            if (value) return value + unit;
        } else {
            var dimen = this.string.slice(this.i);
            var _b = __read(ParseUtil_js_1.default.matchDimen(dimen, true), 3), value = _b[0], unit = _b[1], length_1 = _b[2];
            if (value) {
                this.i += length_1;
                return value + unit;
            }
        }
        throw new TexError_js_1.default('MissingDimOrUnits', 'Missing dimension or its units for %1', this.currentCS);
    };
    TexParser1.prototype.GetUpTo = function(_name, token) {
        while(this.nextIsSpace())this.i++;
        var j = this.i;
        var parens = 0;
        while(this.i < this.string.length){
            var k = this.i;
            var c = this.GetNext();
            this.i += c.length;
            switch(c){
                case '\\':
                    c += this.GetCS();
                    break;
                case '{':
                    parens++;
                    break;
                case '}':
                    if (parens === 0) throw new TexError_js_1.default('ExtraCloseLooking', 'Extra close brace while looking for %1', token);
                    parens--;
                    break;
            }
            if (parens === 0 && c === token) return this.string.slice(j, k);
        }
        throw new TexError_js_1.default('TokenNotFoundForCommand', 'Could not find %1 for %2', token, this.currentCS);
    };
    TexParser1.prototype.ParseArg = function(name) {
        return new TexParser1(this.GetArgument(name), this.stack.env, this.configuration).mml();
    };
    TexParser1.prototype.ParseUpTo = function(name, token) {
        return new TexParser1(this.GetUpTo(name, token), this.stack.env, this.configuration).mml();
    };
    TexParser1.prototype.GetDelimiterArg = function(name) {
        var c = ParseUtil_js_1.default.trimSpaces(this.GetArgument(name));
        if (c === '') return null;
        if (this.contains('delimiter', c)) return c;
        throw new TexError_js_1.default('MissingOrUnrecognizedDelim', 'Missing or unrecognized delimiter for %1', this.currentCS);
    };
    TexParser1.prototype.GetStar = function() {
        var star = this.GetNext() === '*';
        if (star) this.i++;
        return star;
    };
    TexParser1.prototype.create = function(kind) {
        var _a;
        var rest = [];
        for(var _i = 1; _i < arguments.length; _i++)rest[_i - 1] = arguments[_i];
        return (_a = this.configuration.nodeFactory).create.apply(_a, __spreadArray([
            kind
        ], __read(rest)));
    };
    return TexParser1;
}();
exports.default = TexParser;

},{"./ParseUtil.js":"17LUu","./Stack.js":"1W2vG","./TexError.js":"7EfV4","../../core/MmlTree/MmlNode.js":"5Ogy3"}],"17LUu":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
var MmlNode_js_1 = require("../../core/MmlTree/MmlNode.js");
var NodeUtil_js_1 = require("./NodeUtil.js");
var TexParser_js_1 = require("./TexParser.js");
var TexError_js_1 = require("./TexError.js");
var Entities_js_1 = require("../../util/Entities.js");
var ParseUtil;
(function(ParseUtil1) {
    var emPerInch = 7.2;
    var pxPerInch = 72;
    var UNIT_CASES = {
        'em': function(m) {
            return m;
        },
        'ex': function(m) {
            return m * 0.43;
        },
        'pt': function(m) {
            return m / 10;
        },
        'pc': function(m) {
            return m * 1.2;
        },
        'px': function(m) {
            return m * emPerInch / pxPerInch;
        },
        'in': function(m) {
            return m * emPerInch;
        },
        'cm': function(m) {
            return m * emPerInch / 2.54;
        },
        'mm': function(m) {
            return m * emPerInch / 25.4;
        },
        'mu': function(m) {
            return m / 18;
        }
    };
    var num = '([-+]?([.,]\\d+|\\d+([.,]\\d*)?))';
    var unit = '(pt|em|ex|mu|px|mm|cm|in|pc)';
    var dimenEnd = RegExp('^\\s*' + num + '\\s*' + unit + '\\s*$');
    var dimenRest = RegExp('^\\s*' + num + '\\s*' + unit + ' ?');
    function matchDimen(dim, rest) {
        if (rest === void 0) rest = false;
        var match = dim.match(rest ? dimenRest : dimenEnd);
        return match ? muReplace([
            match[1].replace(/,/, '.'),
            match[4],
            match[0].length
        ]) : [
            null,
            null,
            0
        ];
    }
    ParseUtil1.matchDimen = matchDimen;
    function muReplace(_a) {
        var _b = __read(_a, 3), value = _b[0], unit1 = _b[1], length = _b[2];
        if (unit1 !== 'mu') return [
            value,
            unit1,
            length
        ];
        var em = Em(UNIT_CASES[unit1](parseFloat(value || '1')));
        return [
            em.slice(0, -2),
            'em',
            length
        ];
    }
    function dimen2em(dim) {
        var _a = __read(matchDimen(dim), 2), value = _a[0], unit1 = _a[1];
        var m = parseFloat(value || '1');
        var func = UNIT_CASES[unit1];
        return func ? func(m) : 0;
    }
    ParseUtil1.dimen2em = dimen2em;
    function Em(m) {
        if (Math.abs(m) < 0.0006) return '0em';
        return m.toFixed(3).replace(/\.?0+$/, '') + 'em';
    }
    ParseUtil1.Em = Em;
    function fenced(configuration, open, mml, close, big, color) {
        if (big === void 0) big = '';
        if (color === void 0) color = '';
        var nf = configuration.nodeFactory;
        var mrow = nf.create('node', 'mrow', [], {
            open: open,
            close: close,
            texClass: MmlNode_js_1.TEXCLASS.INNER
        });
        var mo;
        if (big) mo = new TexParser_js_1.default('\\' + big + 'l' + open, configuration.parser.stack.env, configuration).mml();
        else {
            var openNode = nf.create('text', open);
            mo = nf.create('node', 'mo', [], {
                fence: true,
                stretchy: true,
                symmetric: true,
                texClass: MmlNode_js_1.TEXCLASS.OPEN
            }, openNode);
        }
        NodeUtil_js_1.default.appendChildren(mrow, [
            mo,
            mml
        ]);
        if (big) mo = new TexParser_js_1.default('\\' + big + 'r' + close, configuration.parser.stack.env, configuration).mml();
        else {
            var closeNode = nf.create('text', close);
            mo = nf.create('node', 'mo', [], {
                fence: true,
                stretchy: true,
                symmetric: true,
                texClass: MmlNode_js_1.TEXCLASS.CLOSE
            }, closeNode);
        }
        color && mo.attributes.set('mathcolor', color);
        NodeUtil_js_1.default.appendChildren(mrow, [
            mo
        ]);
        return mrow;
    }
    ParseUtil1.fenced = fenced;
    function fixedFence(configuration, open, mml, close) {
        var mrow = configuration.nodeFactory.create('node', 'mrow', [], {
            open: open,
            close: close,
            texClass: MmlNode_js_1.TEXCLASS.ORD
        });
        if (open) NodeUtil_js_1.default.appendChildren(mrow, [
            mathPalette(configuration, open, 'l')
        ]);
        if (NodeUtil_js_1.default.isType(mml, 'mrow')) NodeUtil_js_1.default.appendChildren(mrow, NodeUtil_js_1.default.getChildren(mml));
        else NodeUtil_js_1.default.appendChildren(mrow, [
            mml
        ]);
        if (close) NodeUtil_js_1.default.appendChildren(mrow, [
            mathPalette(configuration, close, 'r')
        ]);
        return mrow;
    }
    ParseUtil1.fixedFence = fixedFence;
    function mathPalette(configuration, fence, side) {
        if (fence === '{' || fence === '}') fence = '\\' + fence;
        var D = '{\\bigg' + side + ' ' + fence + '}';
        var T = '{\\big' + side + ' ' + fence + '}';
        return new TexParser_js_1.default('\\mathchoice' + D + T + T + T, {
        }, configuration).mml();
    }
    ParseUtil1.mathPalette = mathPalette;
    function fixInitialMO(configuration, nodes) {
        for(var i = 0, m = nodes.length; i < m; i++){
            var child = nodes[i];
            if (child && !NodeUtil_js_1.default.isType(child, 'mspace') && (!NodeUtil_js_1.default.isType(child, 'TeXAtom') || NodeUtil_js_1.default.getChildren(child)[0] && NodeUtil_js_1.default.getChildren(NodeUtil_js_1.default.getChildren(child)[0]).length)) {
                if (NodeUtil_js_1.default.isEmbellished(child) || NodeUtil_js_1.default.isType(child, 'TeXAtom') && NodeUtil_js_1.default.getTexClass(child) === MmlNode_js_1.TEXCLASS.REL) {
                    var mi = configuration.nodeFactory.create('node', 'mi');
                    nodes.unshift(mi);
                }
                break;
            }
        }
    }
    ParseUtil1.fixInitialMO = fixInitialMO;
    function internalMath(parser, text, level, font) {
        if (parser.configuration.options.internalMath) return parser.configuration.options.internalMath(parser, text, level, font);
        var mathvariant = font || parser.stack.env.font;
        var def = mathvariant ? {
            mathvariant: mathvariant
        } : {
        };
        var mml = [], i = 0, k = 0, c, node, match = '', braces = 0;
        if (text.match(/\\?[${}\\]|\\\(|\\(eq)?ref\s*\{/)) {
            while(i < text.length){
                c = text.charAt(i++);
                if (c === '$') {
                    if (match === '$' && braces === 0) {
                        node = parser.create('node', 'TeXAtom', [
                            new TexParser_js_1.default(text.slice(k, i - 1), {
                            }, parser.configuration).mml()
                        ]);
                        mml.push(node);
                        match = '';
                        k = i;
                    } else if (match === '') {
                        if (k < i - 1) mml.push(internalText(parser, text.slice(k, i - 1), def));
                        match = '$';
                        k = i;
                    }
                } else if (c === '{' && match !== '') braces++;
                else if (c === '}') {
                    if (match === '}' && braces === 0) {
                        var atom = new TexParser_js_1.default(text.slice(k, i), {
                        }, parser.configuration).mml();
                        node = parser.create('node', 'TeXAtom', [
                            atom
                        ], def);
                        mml.push(node);
                        match = '';
                        k = i;
                    } else if (match !== '') {
                        if (braces) braces--;
                    }
                } else if (c === '\\') {
                    if (match === '' && text.substr(i).match(/^(eq)?ref\s*\{/)) {
                        var len = RegExp['$&'].length;
                        if (k < i - 1) mml.push(internalText(parser, text.slice(k, i - 1), def));
                        match = '}';
                        k = i - 1;
                        i += len;
                    } else {
                        c = text.charAt(i++);
                        if (c === '(' && match === '') {
                            if (k < i - 2) mml.push(internalText(parser, text.slice(k, i - 2), def));
                            match = ')';
                            k = i;
                        } else if (c === ')' && match === ')' && braces === 0) {
                            node = parser.create('node', 'TeXAtom', [
                                new TexParser_js_1.default(text.slice(k, i - 2), {
                                }, parser.configuration).mml()
                            ]);
                            mml.push(node);
                            match = '';
                            k = i;
                        } else if (c.match(/[${}\\]/) && match === '') {
                            i--;
                            text = text.substr(0, i - 1) + text.substr(i);
                        }
                    }
                }
            }
            if (match !== '') throw new TexError_js_1.default('MathNotTerminated', 'Math not terminated in text box');
        }
        if (k < text.length) mml.push(internalText(parser, text.slice(k), def));
        if (level != null) mml = [
            parser.create('node', 'mstyle', mml, {
                displaystyle: false,
                scriptlevel: level
            })
        ];
        else if (mml.length > 1) mml = [
            parser.create('node', 'mrow', mml)
        ];
        return mml;
    }
    ParseUtil1.internalMath = internalMath;
    function internalText(parser, text, def) {
        text = text.replace(/^\s+/, Entities_js_1.entities.nbsp).replace(/\s+$/, Entities_js_1.entities.nbsp);
        var textNode = parser.create('text', text);
        return parser.create('node', 'mtext', [], def, textNode);
    }
    ParseUtil1.internalText = internalText;
    function trimSpaces(text) {
        if (typeof text !== 'string') return text;
        var TEXT = text.trim();
        if (TEXT.match(/\\$/) && text.match(/ $/)) TEXT += ' ';
        return TEXT;
    }
    ParseUtil1.trimSpaces = trimSpaces;
    function setArrayAlign(array, align) {
        align = ParseUtil1.trimSpaces(align || '');
        if (align === 't') array.arraydef.align = 'baseline 1';
        else if (align === 'b') array.arraydef.align = 'baseline -1';
        else if (align === 'c') array.arraydef.align = 'center';
        else if (align) array.arraydef.align = align;
        return array;
    }
    ParseUtil1.setArrayAlign = setArrayAlign;
    function substituteArgs(parser, args, str) {
        var text = '';
        var newstring = '';
        var i = 0;
        while(i < str.length){
            var c = str.charAt(i++);
            if (c === '\\') text += c + str.charAt(i++);
            else if (c === '#') {
                c = str.charAt(i++);
                if (c === '#') text += c;
                else {
                    if (!c.match(/[1-9]/) || parseInt(c, 10) > args.length) throw new TexError_js_1.default('IllegalMacroParam', 'Illegal macro parameter reference');
                    newstring = addArgs(parser, addArgs(parser, newstring, text), args[parseInt(c, 10) - 1]);
                    text = '';
                }
            } else text += c;
        }
        return addArgs(parser, newstring, text);
    }
    ParseUtil1.substituteArgs = substituteArgs;
    function addArgs(parser, s1, s2) {
        if (s2.match(/^[a-z]/i) && s1.match(/(^|[^\\])(\\\\)*\\[a-z]+$/i)) s1 += ' ';
        if (s1.length + s2.length > parser.configuration.options['maxBuffer']) throw new TexError_js_1.default('MaxBufferSize', "MathJax internal buffer size exceeded; is there a recursive macro call?");
        return s1 + s2;
    }
    ParseUtil1.addArgs = addArgs;
    function checkEqnEnv(parser) {
        if (parser.stack.global.eqnenv) throw new TexError_js_1.default('ErroneousNestingEq', 'Erroneous nesting of equation structures');
        parser.stack.global.eqnenv = true;
    }
    ParseUtil1.checkEqnEnv = checkEqnEnv;
    function MmlFilterAttribute(_parser, _name, value) {
        return value;
    }
    ParseUtil1.MmlFilterAttribute = MmlFilterAttribute;
    function getFontDef(parser) {
        var font = parser.stack.env['font'];
        return font ? {
            mathvariant: font
        } : {
        };
    }
    ParseUtil1.getFontDef = getFontDef;
    function keyvalOptions(attrib, allowed, error) {
        var e_1, _a;
        if (allowed === void 0) allowed = null;
        if (error === void 0) error = false;
        var def = readKeyval(attrib);
        if (allowed) try {
            for(var _b = __values(Object.keys(def)), _c = _b.next(); !_c.done; _c = _b.next()){
                var key = _c.value;
                if (!allowed.hasOwnProperty(key)) {
                    if (error) throw new TexError_js_1.default('InvalidOption', 'Invalid optional argument: %1', key);
                    delete def[key];
                }
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        return def;
    }
    ParseUtil1.keyvalOptions = keyvalOptions;
    function readKeyval(text) {
        var _a, _b;
        var options = {
        };
        var rest = text;
        var end, key, val;
        while(rest){
            _a = __read(readValue(rest, [
                '=',
                ','
            ]), 3), key = _a[0], end = _a[1], rest = _a[2];
            if (end === '=') {
                _b = __read(readValue(rest, [
                    ','
                ]), 3), val = _b[0], end = _b[1], rest = _b[2];
                val = val === 'false' || val === 'true' ? JSON.parse(val) : val;
                options[key] = val;
            } else if (key) options[key] = true;
        }
        return options;
    }
    function removeBraces(text, count) {
        while(count > 0){
            text = text.trim().slice(1, -1);
            count--;
        }
        return text.trim();
    }
    function readValue(text, end) {
        var length = text.length;
        var braces = 0;
        var value = '';
        var index = 0;
        var start = 0;
        var startCount = true;
        var stopCount = false;
        while(index < length){
            var c = text[index++];
            switch(c){
                case ' ':
                    break;
                case '{':
                    if (startCount) start++;
                    else {
                        stopCount = false;
                        if (start > braces) start = braces;
                    }
                    braces++;
                    break;
                case '}':
                    if (braces) braces--;
                    if (startCount || stopCount) {
                        start--;
                        stopCount = true;
                    }
                    startCount = false;
                    break;
                default:
                    if (!braces && end.indexOf(c) !== -1) return [
                        stopCount ? 'true' : removeBraces(value, start),
                        c,
                        text.slice(index)
                    ];
                    startCount = false;
                    stopCount = false;
            }
            value += c;
        }
        if (braces) throw new TexError_js_1.default('ExtraOpenMissingClose', 'Extra open brace or missing close brace');
        return [
            stopCount ? 'true' : removeBraces(value, start),
            '',
            text.slice(index)
        ];
    }
})(ParseUtil || (ParseUtil = {
}));
exports.default = ParseUtil;

},{"../../core/MmlTree/MmlNode.js":"5Ogy3","./NodeUtil.js":"If5yR","./TexParser.js":"RI8aV","./TexError.js":"7EfV4","../../util/Entities.js":"4kMub"}],"7EfV4":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var TexError = function() {
    function TexError1(id, message) {
        var rest = [];
        for(var _i = 2; _i < arguments.length; _i++)rest[_i - 2] = arguments[_i];
        this.id = id;
        this.message = TexError1.processString(message, rest);
    }
    TexError1.processString = function(str, args) {
        var parts = str.split(TexError1.pattern);
        for(var i = 1, m = parts.length; i < m; i += 2){
            var c = parts[i].charAt(0);
            if (c >= '0' && c <= '9') {
                parts[i] = args[parseInt(parts[i], 10) - 1];
                if (typeof parts[i] === 'number') parts[i] = parts[i].toString();
            } else if (c === '{') {
                c = parts[i].substr(1);
                if (c >= '0' && c <= '9') {
                    parts[i] = args[parseInt(parts[i].substr(1, parts[i].length - 2), 10) - 1];
                    if (typeof parts[i] === 'number') parts[i] = parts[i].toString();
                } else {
                    var match = parts[i].match(/^\{([a-z]+):%(\d+)\|(.*)\}$/);
                    if (match) parts[i] = '%' + parts[i];
                }
            }
            if (parts[i] == null) parts[i] = '???';
        }
        return parts.join('');
    };
    TexError1.pattern = /%(\d+|\{\d+\}|\{[a-z]+:\%\d+(?:\|(?:%\{\d+\}|%.|[^\}])*)+\}|.)/g;
    return TexError1;
}();
exports.default = TexError;

},{}],"4kMub":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.numeric = exports.translate = exports.remove = exports.add = exports.entities = exports.options = void 0;
var Retries_js_1 = require("./Retries.js");
var AsyncLoad_js_1 = require("./AsyncLoad.js");
exports.options = {
    loadMissingEntities: true
};
exports.entities = {
    ApplyFunction: '\u2061',
    Backslash: '\u2216',
    Because: '\u2235',
    Breve: '\u02D8',
    Cap: '\u22D2',
    CenterDot: '\u00B7',
    CircleDot: '\u2299',
    CircleMinus: '\u2296',
    CirclePlus: '\u2295',
    CircleTimes: '\u2297',
    Congruent: '\u2261',
    ContourIntegral: '\u222E',
    Coproduct: '\u2210',
    Cross: '\u2A2F',
    Cup: '\u22D3',
    CupCap: '\u224D',
    Dagger: '\u2021',
    Del: '\u2207',
    Delta: '\u0394',
    Diamond: '\u22C4',
    DifferentialD: '\u2146',
    DotEqual: '\u2250',
    DoubleDot: '\u00A8',
    DoubleRightTee: '\u22A8',
    DoubleVerticalBar: '\u2225',
    DownArrow: '\u2193',
    DownLeftVector: '\u21BD',
    DownRightVector: '\u21C1',
    DownTee: '\u22A4',
    Downarrow: '\u21D3',
    Element: '\u2208',
    EqualTilde: '\u2242',
    Equilibrium: '\u21CC',
    Exists: '\u2203',
    ExponentialE: '\u2147',
    FilledVerySmallSquare: '\u25AA',
    ForAll: '\u2200',
    Gamma: '\u0393',
    Gg: '\u22D9',
    GreaterEqual: '\u2265',
    GreaterEqualLess: '\u22DB',
    GreaterFullEqual: '\u2267',
    GreaterLess: '\u2277',
    GreaterSlantEqual: '\u2A7E',
    GreaterTilde: '\u2273',
    Hacek: '\u02C7',
    Hat: '\u005E',
    HumpDownHump: '\u224E',
    HumpEqual: '\u224F',
    Im: '\u2111',
    ImaginaryI: '\u2148',
    Integral: '\u222B',
    Intersection: '\u22C2',
    InvisibleComma: '\u2063',
    InvisibleTimes: '\u2062',
    Lambda: '\u039B',
    Larr: '\u219E',
    LeftAngleBracket: '\u27E8',
    LeftArrow: '\u2190',
    LeftArrowRightArrow: '\u21C6',
    LeftCeiling: '\u2308',
    LeftDownVector: '\u21C3',
    LeftFloor: '\u230A',
    LeftRightArrow: '\u2194',
    LeftTee: '\u22A3',
    LeftTriangle: '\u22B2',
    LeftTriangleEqual: '\u22B4',
    LeftUpVector: '\u21BF',
    LeftVector: '\u21BC',
    Leftarrow: '\u21D0',
    Leftrightarrow: '\u21D4',
    LessEqualGreater: '\u22DA',
    LessFullEqual: '\u2266',
    LessGreater: '\u2276',
    LessSlantEqual: '\u2A7D',
    LessTilde: '\u2272',
    Ll: '\u22D8',
    Lleftarrow: '\u21DA',
    LongLeftArrow: '\u27F5',
    LongLeftRightArrow: '\u27F7',
    LongRightArrow: '\u27F6',
    Longleftarrow: '\u27F8',
    Longleftrightarrow: '\u27FA',
    Longrightarrow: '\u27F9',
    Lsh: '\u21B0',
    MinusPlus: '\u2213',
    NestedGreaterGreater: '\u226B',
    NestedLessLess: '\u226A',
    NotDoubleVerticalBar: '\u2226',
    NotElement: '\u2209',
    NotEqual: '\u2260',
    NotExists: '\u2204',
    NotGreater: '\u226F',
    NotGreaterEqual: '\u2271',
    NotLeftTriangle: '\u22EA',
    NotLeftTriangleEqual: '\u22EC',
    NotLess: '\u226E',
    NotLessEqual: '\u2270',
    NotPrecedes: '\u2280',
    NotPrecedesSlantEqual: '\u22E0',
    NotRightTriangle: '\u22EB',
    NotRightTriangleEqual: '\u22ED',
    NotSubsetEqual: '\u2288',
    NotSucceeds: '\u2281',
    NotSucceedsSlantEqual: '\u22E1',
    NotSupersetEqual: '\u2289',
    NotTilde: '\u2241',
    NotVerticalBar: '\u2224',
    Omega: '\u03A9',
    OverBar: '\u203E',
    OverBrace: '\u23DE',
    PartialD: '\u2202',
    Phi: '\u03A6',
    Pi: '\u03A0',
    PlusMinus: '\u00B1',
    Precedes: '\u227A',
    PrecedesEqual: '\u2AAF',
    PrecedesSlantEqual: '\u227C',
    PrecedesTilde: '\u227E',
    Product: '\u220F',
    Proportional: '\u221D',
    Psi: '\u03A8',
    Rarr: '\u21A0',
    Re: '\u211C',
    ReverseEquilibrium: '\u21CB',
    RightAngleBracket: '\u27E9',
    RightArrow: '\u2192',
    RightArrowLeftArrow: '\u21C4',
    RightCeiling: '\u2309',
    RightDownVector: '\u21C2',
    RightFloor: '\u230B',
    RightTee: '\u22A2',
    RightTeeArrow: '\u21A6',
    RightTriangle: '\u22B3',
    RightTriangleEqual: '\u22B5',
    RightUpVector: '\u21BE',
    RightVector: '\u21C0',
    Rightarrow: '\u21D2',
    Rrightarrow: '\u21DB',
    Rsh: '\u21B1',
    Sigma: '\u03A3',
    SmallCircle: '\u2218',
    Sqrt: '\u221A',
    Square: '\u25A1',
    SquareIntersection: '\u2293',
    SquareSubset: '\u228F',
    SquareSubsetEqual: '\u2291',
    SquareSuperset: '\u2290',
    SquareSupersetEqual: '\u2292',
    SquareUnion: '\u2294',
    Star: '\u22C6',
    Subset: '\u22D0',
    SubsetEqual: '\u2286',
    Succeeds: '\u227B',
    SucceedsEqual: '\u2AB0',
    SucceedsSlantEqual: '\u227D',
    SucceedsTilde: '\u227F',
    SuchThat: '\u220B',
    Sum: '\u2211',
    Superset: '\u2283',
    SupersetEqual: '\u2287',
    Supset: '\u22D1',
    Therefore: '\u2234',
    Theta: '\u0398',
    Tilde: '\u223C',
    TildeEqual: '\u2243',
    TildeFullEqual: '\u2245',
    TildeTilde: '\u2248',
    UnderBar: '\u005F',
    UnderBrace: '\u23DF',
    Union: '\u22C3',
    UnionPlus: '\u228E',
    UpArrow: '\u2191',
    UpDownArrow: '\u2195',
    UpTee: '\u22A5',
    Uparrow: '\u21D1',
    Updownarrow: '\u21D5',
    Upsilon: '\u03A5',
    Vdash: '\u22A9',
    Vee: '\u22C1',
    VerticalBar: '\u2223',
    VerticalTilde: '\u2240',
    Vvdash: '\u22AA',
    Wedge: '\u22C0',
    Xi: '\u039E',
    amp: '\u0026',
    acute: '\u00B4',
    aleph: '\u2135',
    alpha: '\u03B1',
    amalg: '\u2A3F',
    and: '\u2227',
    ang: '\u2220',
    angmsd: '\u2221',
    angsph: '\u2222',
    ape: '\u224A',
    backprime: '\u2035',
    backsim: '\u223D',
    backsimeq: '\u22CD',
    beta: '\u03B2',
    beth: '\u2136',
    between: '\u226C',
    bigcirc: '\u25EF',
    bigodot: '\u2A00',
    bigoplus: '\u2A01',
    bigotimes: '\u2A02',
    bigsqcup: '\u2A06',
    bigstar: '\u2605',
    bigtriangledown: '\u25BD',
    bigtriangleup: '\u25B3',
    biguplus: '\u2A04',
    blacklozenge: '\u29EB',
    blacktriangle: '\u25B4',
    blacktriangledown: '\u25BE',
    blacktriangleleft: '\u25C2',
    bowtie: '\u22C8',
    boxdl: '\u2510',
    boxdr: '\u250C',
    boxminus: '\u229F',
    boxplus: '\u229E',
    boxtimes: '\u22A0',
    boxul: '\u2518',
    boxur: '\u2514',
    bsol: '\u005C',
    bull: '\u2022',
    cap: '\u2229',
    check: '\u2713',
    chi: '\u03C7',
    circ: '\u02C6',
    circeq: '\u2257',
    circlearrowleft: '\u21BA',
    circlearrowright: '\u21BB',
    circledR: '\u00AE',
    circledS: '\u24C8',
    circledast: '\u229B',
    circledcirc: '\u229A',
    circleddash: '\u229D',
    clubs: '\u2663',
    colon: '\u003A',
    comp: '\u2201',
    ctdot: '\u22EF',
    cuepr: '\u22DE',
    cuesc: '\u22DF',
    cularr: '\u21B6',
    cup: '\u222A',
    curarr: '\u21B7',
    curlyvee: '\u22CE',
    curlywedge: '\u22CF',
    dagger: '\u2020',
    daleth: '\u2138',
    ddarr: '\u21CA',
    deg: '\u00B0',
    delta: '\u03B4',
    digamma: '\u03DD',
    div: '\u00F7',
    divideontimes: '\u22C7',
    dot: '\u02D9',
    doteqdot: '\u2251',
    dotplus: '\u2214',
    dotsquare: '\u22A1',
    dtdot: '\u22F1',
    ecir: '\u2256',
    efDot: '\u2252',
    egs: '\u2A96',
    ell: '\u2113',
    els: '\u2A95',
    empty: '\u2205',
    epsi: '\u03B5',
    epsiv: '\u03F5',
    erDot: '\u2253',
    eta: '\u03B7',
    eth: '\u00F0',
    flat: '\u266D',
    fork: '\u22D4',
    frown: '\u2322',
    gEl: '\u2A8C',
    gamma: '\u03B3',
    gap: '\u2A86',
    gimel: '\u2137',
    gnE: '\u2269',
    gnap: '\u2A8A',
    gne: '\u2A88',
    gnsim: '\u22E7',
    gt: '\u003E',
    gtdot: '\u22D7',
    harrw: '\u21AD',
    hbar: '\u210F',
    hellip: '\u2026',
    hookleftarrow: '\u21A9',
    hookrightarrow: '\u21AA',
    imath: '\u0131',
    infin: '\u221E',
    intcal: '\u22BA',
    iota: '\u03B9',
    jmath: '\u0237',
    kappa: '\u03BA',
    kappav: '\u03F0',
    lEg: '\u2A8B',
    lambda: '\u03BB',
    lap: '\u2A85',
    larrlp: '\u21AB',
    larrtl: '\u21A2',
    lbrace: '\u007B',
    lbrack: '\u005B',
    le: '\u2264',
    leftleftarrows: '\u21C7',
    leftthreetimes: '\u22CB',
    lessdot: '\u22D6',
    lmoust: '\u23B0',
    lnE: '\u2268',
    lnap: '\u2A89',
    lne: '\u2A87',
    lnsim: '\u22E6',
    longmapsto: '\u27FC',
    looparrowright: '\u21AC',
    lowast: '\u2217',
    loz: '\u25CA',
    lt: '\u003C',
    ltimes: '\u22C9',
    ltri: '\u25C3',
    macr: '\u00AF',
    malt: '\u2720',
    mho: '\u2127',
    mu: '\u03BC',
    multimap: '\u22B8',
    nLeftarrow: '\u21CD',
    nLeftrightarrow: '\u21CE',
    nRightarrow: '\u21CF',
    nVDash: '\u22AF',
    nVdash: '\u22AE',
    natur: '\u266E',
    nearr: '\u2197',
    nharr: '\u21AE',
    nlarr: '\u219A',
    not: '\u00AC',
    nrarr: '\u219B',
    nu: '\u03BD',
    nvDash: '\u22AD',
    nvdash: '\u22AC',
    nwarr: '\u2196',
    omega: '\u03C9',
    omicron: '\u03BF',
    or: '\u2228',
    osol: '\u2298',
    period: '\u002E',
    phi: '\u03C6',
    phiv: '\u03D5',
    pi: '\u03C0',
    piv: '\u03D6',
    prap: '\u2AB7',
    precnapprox: '\u2AB9',
    precneqq: '\u2AB5',
    precnsim: '\u22E8',
    prime: '\u2032',
    psi: '\u03C8',
    quot: '\u0022',
    rarrtl: '\u21A3',
    rbrace: '\u007D',
    rbrack: '\u005D',
    rho: '\u03C1',
    rhov: '\u03F1',
    rightrightarrows: '\u21C9',
    rightthreetimes: '\u22CC',
    ring: '\u02DA',
    rmoust: '\u23B1',
    rtimes: '\u22CA',
    rtri: '\u25B9',
    scap: '\u2AB8',
    scnE: '\u2AB6',
    scnap: '\u2ABA',
    scnsim: '\u22E9',
    sdot: '\u22C5',
    searr: '\u2198',
    sect: '\u00A7',
    sharp: '\u266F',
    sigma: '\u03C3',
    sigmav: '\u03C2',
    simne: '\u2246',
    smile: '\u2323',
    spades: '\u2660',
    sub: '\u2282',
    subE: '\u2AC5',
    subnE: '\u2ACB',
    subne: '\u228A',
    supE: '\u2AC6',
    supnE: '\u2ACC',
    supne: '\u228B',
    swarr: '\u2199',
    tau: '\u03C4',
    theta: '\u03B8',
    thetav: '\u03D1',
    tilde: '\u02DC',
    times: '\u00D7',
    triangle: '\u25B5',
    triangleq: '\u225C',
    upsi: '\u03C5',
    upuparrows: '\u21C8',
    veebar: '\u22BB',
    vellip: '\u22EE',
    weierp: '\u2118',
    xi: '\u03BE',
    yen: '\u00A5',
    zeta: '\u03B6',
    zigrarr: '\u21DD',
    nbsp: '\u00A0',
    rsquo: '\u2019',
    lsquo: '\u2018'
};
var loaded = {
};
function add(additions, file) {
    Object.assign(exports.entities, additions);
    loaded[file] = true;
}
exports.add = add;
function remove(entity) {
    delete exports.entities[entity];
}
exports.remove = remove;
function translate(text) {
    return text.replace(/&([a-z][a-z0-9]*|#(?:[0-9]+|x[0-9a-f]+));/ig, replace);
}
exports.translate = translate;
function replace(match, entity) {
    if (entity.charAt(0) === '#') return numeric(entity.slice(1));
    if (exports.entities[entity]) return exports.entities[entity];
    if (exports.options['loadMissingEntities']) {
        var file = entity.match(/^[a-zA-Z](fr|scr|opf)$/) ? RegExp.$1 : entity.charAt(0).toLowerCase();
        if (!loaded[file]) {
            loaded[file] = true;
            Retries_js_1.retryAfter(AsyncLoad_js_1.asyncLoad('./util/entities/' + file + '.js'));
        }
    }
    return match;
}
function numeric(entity) {
    var n = entity.charAt(0) === 'x' ? parseInt(entity.slice(1), 16) : parseInt(entity);
    return String.fromCodePoint(n);
}
exports.numeric = numeric;

},{"./Retries.js":"6iIJ2","./AsyncLoad.js":"449X6"}],"449X6":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.asyncLoad = void 0;
var mathjax_js_1 = require("../mathjax.js");
function asyncLoad(name) {
    if (!mathjax_js_1.mathjax.asyncLoad) return Promise.reject("Can't load '" + name + "': No asyncLoad method specified");
    return new Promise(function(ok, fail) {
        var result = mathjax_js_1.mathjax.asyncLoad(name);
        if (result instanceof Promise) result.then(function(value) {
            return ok(value);
        }).catch(function(err) {
            return fail(err);
        });
        else ok(result);
    });
}
exports.asyncLoad = asyncLoad;

},{"../mathjax.js":"7BASf"}],"1W2vG":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
var NodeUtil_js_1 = require("./NodeUtil.js");
var Stack = function() {
    function Stack1(_factory, _env, inner) {
        this._factory = _factory;
        this._env = _env;
        this.global = {
        };
        this.stack = [];
        this.global = {
            isInner: inner
        };
        this.stack = [
            this._factory.create('start', this.global)
        ];
        if (_env) this.stack[0].env = _env;
        this.env = this.stack[0].env;
    }
    Object.defineProperty(Stack1.prototype, "env", {
        get: function() {
            return this._env;
        },
        set: function(env) {
            this._env = env;
        },
        enumerable: false,
        configurable: true
    });
    Stack1.prototype.Push = function() {
        var e_1, _a;
        var args = [];
        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
        try {
            for(var args_1 = __values(args), args_1_1 = args_1.next(); !args_1_1.done; args_1_1 = args_1.next()){
                var node = args_1_1.value;
                if (!node) continue;
                var item = NodeUtil_js_1.default.isNode(node) ? this._factory.create('mml', node) : node;
                item.global = this.global;
                var _b = __read(this.stack.length ? this.Top().checkItem(item) : [
                    null,
                    true
                ], 2), top_1 = _b[0], success = _b[1];
                if (!success) continue;
                if (top_1) {
                    this.Pop();
                    this.Push.apply(this, __spreadArray([], __read(top_1)));
                    continue;
                }
                this.stack.push(item);
                if (item.env) {
                    if (item.copyEnv) Object.assign(item.env, this.env);
                    this.env = item.env;
                } else item.env = this.env;
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (args_1_1 && !args_1_1.done && (_a = args_1.return)) _a.call(args_1);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    };
    Stack1.prototype.Pop = function() {
        var item = this.stack.pop();
        if (!item.isOpen) delete item.env;
        this.env = this.stack.length ? this.Top().env : {
        };
        return item;
    };
    Stack1.prototype.Top = function(n) {
        if (n === void 0) n = 1;
        return this.stack.length < n ? null : this.stack[this.stack.length - n];
    };
    Stack1.prototype.Prev = function(noPop) {
        var top = this.Top();
        return noPop ? top.First : top.Pop();
    };
    Stack1.prototype.toString = function() {
        return 'stack[\n  ' + this.stack.join('\n  ') + '\n]';
    };
    return Stack1;
}();
exports.default = Stack;

},{"./NodeUtil.js":"If5yR"}],"7bnKU":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
var StackItemFactory_js_1 = require("./StackItemFactory.js");
var NodeFactory_js_1 = require("./NodeFactory.js");
var Options_js_1 = require("../../util/Options.js");
var ParseOptions = function() {
    function ParseOptions1(configuration, options) {
        if (options === void 0) options = [];
        this.options = {
        };
        this.packageData = new Map();
        this.parsers = [];
        this.root = null;
        this.nodeLists = {
        };
        this.error = false;
        this.handlers = configuration.handlers;
        this.nodeFactory = new NodeFactory_js_1.NodeFactory();
        this.nodeFactory.configuration = this;
        this.nodeFactory.setCreators(configuration.nodes);
        this.itemFactory = new StackItemFactory_js_1.default(configuration.items);
        this.itemFactory.configuration = this;
        Options_js_1.defaultOptions.apply(void 0, __spreadArray([
            this.options
        ], __read(options)));
        Options_js_1.defaultOptions(this.options, configuration.options);
    }
    ParseOptions1.prototype.pushParser = function(parser) {
        this.parsers.unshift(parser);
    };
    ParseOptions1.prototype.popParser = function() {
        this.parsers.shift();
    };
    Object.defineProperty(ParseOptions1.prototype, "parser", {
        get: function() {
            return this.parsers[0];
        },
        enumerable: false,
        configurable: true
    });
    ParseOptions1.prototype.clear = function() {
        this.parsers = [];
        this.root = null;
        this.nodeLists = {
        };
        this.error = false;
        this.tags.resetTag();
    };
    ParseOptions1.prototype.addNode = function(property, node) {
        var list = this.nodeLists[property];
        if (!list) list = this.nodeLists[property] = [];
        list.push(node);
    };
    ParseOptions1.prototype.getList = function(property) {
        var e_1, _a;
        var list = this.nodeLists[property] || [];
        var result = [];
        try {
            for(var list_1 = __values(list), list_1_1 = list_1.next(); !list_1_1.done; list_1_1 = list_1.next()){
                var node = list_1_1.value;
                if (this.inTree(node)) result.push(node);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (list_1_1 && !list_1_1.done && (_a = list_1.return)) _a.call(list_1);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        this.nodeLists[property] = result;
        return result;
    };
    ParseOptions1.prototype.inTree = function(node) {
        while(node && node !== this.root)node = node.parent;
        return !!node;
    };
    return ParseOptions1;
}();
exports.default = ParseOptions;

},{"./StackItemFactory.js":"JBdEz","./NodeFactory.js":"5UK8M","../../util/Options.js":"3Dh3w"}],"JBdEz":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
var StackItem_js_1 = require("./StackItem.js");
var Factory_js_1 = require("../../core/Tree/Factory.js");
var DummyItem1 = function(_super) {
    __extends(DummyItem2, _super);
    function DummyItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return DummyItem2;
}(StackItem_js_1.BaseItem);
var StackItemFactory1 = function(_super) {
    __extends(StackItemFactory2, _super);
    function StackItemFactory2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.defaultKind = 'dummy';
        _this.configuration = null;
        return _this;
    }
    StackItemFactory2.DefaultStackItems = (_a = {
    }, _a[DummyItem1.prototype.kind] = DummyItem1, _a);
    return StackItemFactory2;
}(Factory_js_1.AbstractFactory);
exports.default = StackItemFactory1;

},{"./StackItem.js":"5A1jm","../../core/Tree/Factory.js":"3I6j8"}],"5A1jm":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BaseItem = exports.MmlStack = void 0;
var TexError_js_1 = require("./TexError.js");
var MmlStack = function() {
    function MmlStack1(_nodes) {
        this._nodes = _nodes;
    }
    Object.defineProperty(MmlStack1.prototype, "nodes", {
        get: function() {
            return this._nodes;
        },
        enumerable: false,
        configurable: true
    });
    MmlStack1.prototype.Push = function() {
        var _a;
        var nodes = [];
        for(var _i = 0; _i < arguments.length; _i++)nodes[_i] = arguments[_i];
        (_a = this._nodes).push.apply(_a, __spreadArray([], __read(nodes)));
    };
    MmlStack1.prototype.Pop = function() {
        return this._nodes.pop();
    };
    Object.defineProperty(MmlStack1.prototype, "First", {
        get: function() {
            return this._nodes[this.Size() - 1];
        },
        set: function(node) {
            this._nodes[this.Size() - 1] = node;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlStack1.prototype, "Last", {
        get: function() {
            return this._nodes[0];
        },
        set: function(node) {
            this._nodes[0] = node;
        },
        enumerable: false,
        configurable: true
    });
    MmlStack1.prototype.Peek = function(n) {
        if (n == null) n = 1;
        return this._nodes.slice(this.Size() - n);
    };
    MmlStack1.prototype.Size = function() {
        return this._nodes.length;
    };
    MmlStack1.prototype.Clear = function() {
        this._nodes = [];
    };
    MmlStack1.prototype.toMml = function(inferred, forceRow) {
        if (inferred === void 0) inferred = true;
        if (this._nodes.length === 1 && !forceRow) return this.First;
        return this.create('node', inferred ? 'inferredMrow' : 'mrow', this._nodes, {
        });
    };
    MmlStack1.prototype.create = function(kind) {
        var _a;
        var rest = [];
        for(var _i = 1; _i < arguments.length; _i++)rest[_i - 1] = arguments[_i];
        return (_a = this.factory.configuration.nodeFactory).create.apply(_a, __spreadArray([
            kind
        ], __read(rest)));
    };
    return MmlStack1;
}();
exports.MmlStack = MmlStack;
var BaseItem1 = function(_super) {
    __extends(BaseItem2, _super);
    function BaseItem2(factory) {
        var nodes = [];
        for(var _i = 1; _i < arguments.length; _i++)nodes[_i - 1] = arguments[_i];
        var _this = _super.call(this, nodes) || this;
        _this.factory = factory;
        _this.global = {
        };
        _this._properties = {
        };
        if (_this.isOpen) _this._env = {
        };
        return _this;
    }
    Object.defineProperty(BaseItem2.prototype, "kind", {
        get: function() {
            return 'base';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BaseItem2.prototype, "env", {
        get: function() {
            return this._env;
        },
        set: function(value) {
            this._env = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BaseItem2.prototype, "copyEnv", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    BaseItem2.prototype.getProperty = function(key) {
        return this._properties[key];
    };
    BaseItem2.prototype.setProperty = function(key, value) {
        this._properties[key] = value;
        return this;
    };
    Object.defineProperty(BaseItem2.prototype, "isOpen", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BaseItem2.prototype, "isClose", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BaseItem2.prototype, "isFinal", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    BaseItem2.prototype.isKind = function(kind) {
        return kind === this.kind;
    };
    BaseItem2.prototype.checkItem = function(item) {
        if (item.isKind('over') && this.isOpen) {
            item.setProperty('num', this.toMml(false));
            this.Clear();
        }
        if (item.isKind('cell') && this.isOpen) {
            if (item.getProperty('linebreak')) return BaseItem2.fail;
            throw new TexError_js_1.default('Misplaced', 'Misplaced %1', item.getName());
        }
        if (item.isClose && this.getErrors(item.kind)) {
            var _a = __read(this.getErrors(item.kind), 2), id = _a[0], message = _a[1];
            throw new TexError_js_1.default(id, message, item.getName());
        }
        if (!item.isFinal) return BaseItem2.success;
        this.Push(item.First);
        return BaseItem2.fail;
    };
    BaseItem2.prototype.clearEnv = function() {
        var e_1, _a;
        try {
            for(var _b = __values(Object.keys(this.env)), _c = _b.next(); !_c.done; _c = _b.next()){
                var id = _c.value;
                delete this.env[id];
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    };
    BaseItem2.prototype.setProperties = function(def) {
        Object.assign(this._properties, def);
        return this;
    };
    BaseItem2.prototype.getName = function() {
        return this.getProperty('name');
    };
    BaseItem2.prototype.toString = function() {
        return this.kind + '[' + this.nodes.join('; ') + ']';
    };
    BaseItem2.prototype.getErrors = function(kind) {
        var CLASS = this.constructor;
        return (CLASS.errors || {
        })[kind] || BaseItem2.errors[kind];
    };
    BaseItem2.fail = [
        null,
        false
    ];
    BaseItem2.success = [
        null,
        true
    ];
    BaseItem2.errors = {
        end: [
            'MissingBeginExtraEnd',
            'Missing \\begin{%1} or extra \\end{%1}'
        ],
        close: [
            'ExtraCloseMissingOpen',
            'Extra close brace or missing open brace'
        ],
        right: [
            'MissingLeftExtraRight',
            'Missing \\left or extra \\right'
        ],
        middle: [
            'ExtraMiddle',
            'Extra \\middle'
        ]
    };
    return BaseItem2;
}(MmlStack);
exports.BaseItem = BaseItem1;

},{"./TexError.js":"7EfV4"}],"3I6j8":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractFactory = void 0;
var AbstractFactory = function() {
    function AbstractFactory1(nodes) {
        var e_1, _a;
        if (nodes === void 0) nodes = null;
        this.defaultKind = 'unknown';
        this.nodeMap = new Map();
        this.node = {
        };
        if (nodes === null) nodes = this.constructor.defaultNodes;
        try {
            for(var _b = __values(Object.keys(nodes)), _c = _b.next(); !_c.done; _c = _b.next()){
                var kind = _c.value;
                this.setNodeClass(kind, nodes[kind]);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    }
    AbstractFactory1.prototype.create = function(kind) {
        var args = [];
        for(var _i = 1; _i < arguments.length; _i++)args[_i - 1] = arguments[_i];
        return (this.node[kind] || this.node[this.defaultKind]).apply(void 0, __spreadArray([], __read(args)));
    };
    AbstractFactory1.prototype.setNodeClass = function(kind, nodeClass) {
        this.nodeMap.set(kind, nodeClass);
        var THIS = this;
        var KIND = this.nodeMap.get(kind);
        this.node[kind] = function() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            return new (KIND.bind.apply(KIND, __spreadArray([
                void 0,
                THIS
            ], __read(args))))();
        };
    };
    AbstractFactory1.prototype.getNodeClass = function(kind) {
        return this.nodeMap.get(kind);
    };
    AbstractFactory1.prototype.deleteNodeClass = function(kind) {
        this.nodeMap.delete(kind);
        delete this.node[kind];
    };
    AbstractFactory1.prototype.nodeIsKind = function(node, kind) {
        return node instanceof this.getNodeClass(kind);
    };
    AbstractFactory1.prototype.getKinds = function() {
        return Array.from(this.nodeMap.keys());
    };
    AbstractFactory1.defaultNodes = {
    };
    return AbstractFactory1;
}();
exports.AbstractFactory = AbstractFactory;

},{}],"5UK8M":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.NodeFactory = void 0;
var NodeUtil_js_1 = require("./NodeUtil.js");
var NodeFactory = function() {
    function NodeFactory1() {
        this.mmlFactory = null;
        this.factory = {
            'node': NodeFactory1.createNode,
            'token': NodeFactory1.createToken,
            'text': NodeFactory1.createText,
            'error': NodeFactory1.createError
        };
    }
    NodeFactory1.createNode = function(factory, kind, children, def, text) {
        if (children === void 0) children = [];
        if (def === void 0) def = {
        };
        var node = factory.mmlFactory.create(kind);
        node.setChildren(children);
        if (text) node.appendChild(text);
        NodeUtil_js_1.default.setProperties(node, def);
        return node;
    };
    NodeFactory1.createToken = function(factory, kind, def, text) {
        if (def === void 0) def = {
        };
        if (text === void 0) text = '';
        var textNode = factory.create('text', text);
        return factory.create('node', kind, [], def, textNode);
    };
    NodeFactory1.createText = function(factory, text) {
        if (text == null) return null;
        return factory.mmlFactory.create('text').setText(text);
    };
    NodeFactory1.createError = function(factory, message) {
        var text = factory.create('text', message);
        var mtext = factory.create('node', 'mtext', [], {
        }, text);
        var error = factory.create('node', 'merror', [
            mtext
        ], {
            'data-mjx-error': message
        });
        return error;
    };
    NodeFactory1.prototype.setMmlFactory = function(mmlFactory) {
        this.mmlFactory = mmlFactory;
    };
    NodeFactory1.prototype.set = function(kind, func) {
        this.factory[kind] = func;
    };
    NodeFactory1.prototype.setCreators = function(maps) {
        for(var kind in maps)this.set(kind, maps[kind]);
    };
    NodeFactory1.prototype.create = function(kind) {
        var rest = [];
        for(var _i = 1; _i < arguments.length; _i++)rest[_i - 1] = arguments[_i];
        var func = this.factory[kind] || this.factory['node'];
        var node = func.apply(void 0, __spreadArray([
            this,
            rest[0]
        ], __read(rest.slice(1))));
        if (kind === 'node') this.configuration.addNode(rest[0], node);
        return node;
    };
    NodeFactory1.prototype.get = function(kind) {
        return this.factory[kind];
    };
    return NodeFactory1;
}();
exports.NodeFactory = NodeFactory;

},{"./NodeUtil.js":"If5yR"}],"5I8xM":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.TagsFactory = exports.AllTags = exports.NoTags = exports.AbstractTags = exports.TagInfo = exports.Label = void 0;
var TexParser_js_1 = require("./TexParser.js");
var Label = function() {
    function Label1(tag, id) {
        if (tag === void 0) tag = '???';
        if (id === void 0) id = '';
        this.tag = tag;
        this.id = id;
    }
    return Label1;
}();
exports.Label = Label;
var TagInfo = function() {
    function TagInfo1(env, taggable, defaultTags, tag, tagId, tagFormat, noTag, labelId) {
        if (env === void 0) env = '';
        if (taggable === void 0) taggable = false;
        if (defaultTags === void 0) defaultTags = false;
        if (tag === void 0) tag = null;
        if (tagId === void 0) tagId = '';
        if (tagFormat === void 0) tagFormat = '';
        if (noTag === void 0) noTag = false;
        if (labelId === void 0) labelId = '';
        this.env = env;
        this.taggable = taggable;
        this.defaultTags = defaultTags;
        this.tag = tag;
        this.tagId = tagId;
        this.tagFormat = tagFormat;
        this.noTag = noTag;
        this.labelId = labelId;
    }
    return TagInfo1;
}();
exports.TagInfo = TagInfo;
var AbstractTags = function() {
    function AbstractTags1() {
        this.counter = 0;
        this.allCounter = 0;
        this.configuration = null;
        this.ids = {
        };
        this.allIds = {
        };
        this.labels = {
        };
        this.allLabels = {
        };
        this.redo = false;
        this.refUpdate = false;
        this.currentTag = new TagInfo();
        this.history = [];
        this.stack = [];
        this.enTag = function(node, tag) {
            var nf = this.configuration.nodeFactory;
            var cell = nf.create('node', 'mtd', [
                node
            ]);
            var row = nf.create('node', 'mlabeledtr', [
                tag,
                cell
            ]);
            var table = nf.create('node', 'mtable', [
                row
            ], {
                side: this.configuration.options['tagSide'],
                minlabelspacing: this.configuration.options['tagIndent'],
                displaystyle: true
            });
            return table;
        };
    }
    AbstractTags1.prototype.start = function(env, taggable, defaultTags) {
        if (this.currentTag) this.stack.push(this.currentTag);
        this.currentTag = new TagInfo(env, taggable, defaultTags);
    };
    Object.defineProperty(AbstractTags1.prototype, "env", {
        get: function() {
            return this.currentTag.env;
        },
        enumerable: false,
        configurable: true
    });
    AbstractTags1.prototype.end = function() {
        this.history.push(this.currentTag);
        this.currentTag = this.stack.pop();
    };
    AbstractTags1.prototype.tag = function(tag, noFormat) {
        this.currentTag.tag = tag;
        this.currentTag.tagFormat = noFormat ? tag : this.formatTag(tag);
        this.currentTag.noTag = false;
    };
    AbstractTags1.prototype.notag = function() {
        this.tag('', true);
        this.currentTag.noTag = true;
    };
    Object.defineProperty(AbstractTags1.prototype, "noTag", {
        get: function() {
            return this.currentTag.noTag;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AbstractTags1.prototype, "label", {
        get: function() {
            return this.currentTag.labelId;
        },
        set: function(label) {
            this.currentTag.labelId = label;
        },
        enumerable: false,
        configurable: true
    });
    AbstractTags1.prototype.formatUrl = function(id, base) {
        return base + '#' + encodeURIComponent(id);
    };
    AbstractTags1.prototype.formatTag = function(tag) {
        return '(' + tag + ')';
    };
    AbstractTags1.prototype.formatId = function(id) {
        return 'mjx-eqn:' + id.replace(/\s/g, '_');
    };
    AbstractTags1.prototype.formatNumber = function(n) {
        return n.toString();
    };
    AbstractTags1.prototype.autoTag = function() {
        if (this.currentTag.tag == null) {
            this.counter++;
            this.tag(this.formatNumber(this.counter), false);
        }
    };
    AbstractTags1.prototype.clearTag = function() {
        this.label = '';
        this.tag(null, true);
        this.currentTag.tagId = '';
    };
    AbstractTags1.prototype.getTag = function(force) {
        if (force === void 0) force = false;
        if (force) {
            this.autoTag();
            return this.makeTag();
        }
        var ct = this.currentTag;
        if (ct.taggable && !ct.noTag) {
            if (ct.defaultTags) this.autoTag();
            if (ct.tag) return this.makeTag();
        }
        return null;
    };
    AbstractTags1.prototype.resetTag = function() {
        this.history = [];
        this.redo = false;
        this.refUpdate = false;
        this.clearTag();
    };
    AbstractTags1.prototype.reset = function(offset) {
        if (offset === void 0) offset = 0;
        this.resetTag();
        this.counter = this.allCounter = offset;
        this.allLabels = {
        };
        this.allIds = {
        };
    };
    AbstractTags1.prototype.startEquation = function(math) {
        this.history = [];
        this.stack = [];
        this.clearTag();
        this.currentTag = new TagInfo('', undefined, undefined);
        this.labels = {
        };
        this.ids = {
        };
        this.counter = this.allCounter;
        this.redo = false;
        var recompile = math.inputData.recompile;
        if (recompile) {
            this.refUpdate = true;
            this.counter = recompile.counter;
        }
    };
    AbstractTags1.prototype.finishEquation = function(math) {
        if (this.redo) math.inputData.recompile = {
            state: math.state(),
            counter: this.allCounter
        };
        if (!this.refUpdate) this.allCounter = this.counter;
        Object.assign(this.allIds, this.ids);
        Object.assign(this.allLabels, this.labels);
    };
    AbstractTags1.prototype.finalize = function(node, env) {
        if (!env.display || this.currentTag.env || this.currentTag.tag == null) return node;
        var tag = this.makeTag();
        var table = this.enTag(node, tag);
        return table;
    };
    AbstractTags1.prototype.makeId = function() {
        this.currentTag.tagId = this.formatId(this.configuration.options['useLabelIds'] ? this.label || this.currentTag.tag : this.currentTag.tag);
    };
    AbstractTags1.prototype.makeTag = function() {
        this.makeId();
        if (this.label) this.labels[this.label] = new Label(this.currentTag.tag, this.currentTag.tagId);
        var mml = new TexParser_js_1.default('\\text{' + this.currentTag.tagFormat + '}', {
        }, this.configuration).mml();
        return this.configuration.nodeFactory.create('node', 'mtd', [
            mml
        ], {
            id: this.currentTag.tagId
        });
    };
    return AbstractTags1;
}();
exports.AbstractTags = AbstractTags;
var NoTags1 = function(_super) {
    __extends(NoTags2, _super);
    function NoTags2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NoTags2.prototype.autoTag = function() {
    };
    NoTags2.prototype.getTag = function() {
        return !this.currentTag.tag ? null : _super.prototype.getTag.call(this);
    };
    return NoTags2;
}(AbstractTags);
exports.NoTags = NoTags1;
var AllTags1 = function(_super) {
    __extends(AllTags2, _super);
    function AllTags2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AllTags2.prototype.finalize = function(node, env) {
        if (!env.display || this.history.find(function(x) {
            return x.taggable;
        })) return node;
        var tag = this.getTag(true);
        return this.enTag(node, tag);
    };
    return AllTags2;
}(AbstractTags);
exports.AllTags = AllTags1;
var TagsFactory;
(function(TagsFactory1) {
    var tagsMapping = new Map([
        [
            'none',
            NoTags1
        ],
        [
            'all',
            AllTags1
        ]
    ]);
    var defaultTags = 'none';
    TagsFactory1.OPTIONS = {
        tags: defaultTags,
        tagSide: 'right',
        tagIndent: '0.8em',
        multlineWidth: '85%',
        useLabelIds: true,
        ignoreDuplicateLabels: false
    };
    TagsFactory1.add = function(name, constr) {
        tagsMapping.set(name, constr);
    };
    TagsFactory1.addTags = function(tags) {
        var e_1, _a;
        try {
            for(var _b = __values(Object.keys(tags)), _c = _b.next(); !_c.done; _c = _b.next()){
                var key = _c.value;
                TagsFactory1.add(key, tags[key]);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    };
    TagsFactory1.create = function(name) {
        var constr = tagsMapping.get(name) || tagsMapping.get(defaultTags);
        if (!constr) throw Error('Unknown tags class');
        return new constr();
    };
    TagsFactory1.setDefault = function(name) {
        defaultTags = name;
    };
    TagsFactory1.getDefault = function() {
        return TagsFactory1.create(defaultTags);
    };
})(TagsFactory = exports.TagsFactory || (exports.TagsFactory = {
}));

},{"./TexParser.js":"RI8aV"}],"2ZNEp":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ParserConfiguration = exports.ConfigurationHandler = exports.Configuration = void 0;
var Options_js_1 = require("../../util/Options.js");
var MapHandler_js_1 = require("./MapHandler.js");
var FunctionList_js_1 = require("../../util/FunctionList.js");
var PrioritizedList_js_1 = require("../../util/PrioritizedList.js");
var Tags_js_1 = require("./Tags.js");
var Configuration = function() {
    function Configuration1(name, handler, fallback, items, tags, options, nodes, preprocessors, postprocessors, initMethod, configMethod, priority) {
        if (handler === void 0) handler = {
        };
        if (fallback === void 0) fallback = {
        };
        if (items === void 0) items = {
        };
        if (tags === void 0) tags = {
        };
        if (options === void 0) options = {
        };
        if (nodes === void 0) nodes = {
        };
        if (preprocessors === void 0) preprocessors = [];
        if (postprocessors === void 0) postprocessors = [];
        if (initMethod === void 0) initMethod = null;
        if (configMethod === void 0) configMethod = null;
        this.name = name;
        this.handler = handler;
        this.fallback = fallback;
        this.items = items;
        this.tags = tags;
        this.options = options;
        this.nodes = nodes;
        this.preprocessors = preprocessors;
        this.postprocessors = postprocessors;
        this.initMethod = initMethod;
        this.configMethod = configMethod;
        this.priority = priority;
        this.handler = Object.assign({
            character: [],
            delimiter: [],
            macro: [],
            environment: []
        }, handler);
    }
    Configuration1.makeProcessor = function(func, priority) {
        return Array.isArray(func) ? func : [
            func,
            priority
        ];
    };
    Configuration1._create = function(name, config) {
        var _this = this;
        if (config === void 0) config = {
        };
        var priority = config.priority || PrioritizedList_js_1.PrioritizedList.DEFAULTPRIORITY;
        var init = config.init ? this.makeProcessor(config.init, priority) : null;
        var conf = config.config ? this.makeProcessor(config.config, priority) : null;
        var preprocessors = (config.preprocessors || []).map(function(pre) {
            return _this.makeProcessor(pre, priority);
        });
        var postprocessors = (config.postprocessors || []).map(function(post) {
            return _this.makeProcessor(post, priority);
        });
        return new Configuration1(name, config.handler || {
        }, config.fallback || {
        }, config.items || {
        }, config.tags || {
        }, config.options || {
        }, config.nodes || {
        }, preprocessors, postprocessors, init, conf, priority);
    };
    Configuration1.create = function(name, config) {
        if (config === void 0) config = {
        };
        var configuration = Configuration1._create(name, config);
        ConfigurationHandler.set(name, configuration);
        return configuration;
    };
    Configuration1.local = function(config) {
        if (config === void 0) config = {
        };
        return Configuration1._create('', config);
    };
    Object.defineProperty(Configuration1.prototype, "init", {
        get: function() {
            return this.initMethod ? this.initMethod[0] : null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Configuration1.prototype, "config", {
        get: function() {
            return this.configMethod ? this.configMethod[0] : null;
        },
        enumerable: false,
        configurable: true
    });
    return Configuration1;
}();
exports.Configuration = Configuration;
var ConfigurationHandler;
(function(ConfigurationHandler1) {
    var maps = new Map();
    ConfigurationHandler1.set = function(name, map) {
        maps.set(name, map);
    };
    ConfigurationHandler1.get = function(name) {
        return maps.get(name);
    };
    ConfigurationHandler1.keys = function() {
        return maps.keys();
    };
})(ConfigurationHandler = exports.ConfigurationHandler || (exports.ConfigurationHandler = {
}));
var ParserConfiguration = function() {
    function ParserConfiguration1(packages) {
        var e_1, _a, e_2, _b;
        this.initMethod = new FunctionList_js_1.FunctionList();
        this.configMethod = new FunctionList_js_1.FunctionList();
        this.configurations = new PrioritizedList_js_1.PrioritizedList();
        this.handlers = new MapHandler_js_1.SubHandlers();
        this.items = {
        };
        this.tags = {
        };
        this.options = {
        };
        this.nodes = {
        };
        try {
            for(var _c = __values(packages.slice().reverse()), _d = _c.next(); !_d.done; _d = _c.next()){
                var pkg = _d.value;
                this.addPackage(pkg);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        try {
            for(var _e = __values(this.configurations), _f = _e.next(); !_f.done; _f = _e.next()){
                var _g = _f.value, config = _g.item, priority = _g.priority;
                this.append(config, priority);
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    }
    ParserConfiguration1.prototype.init = function() {
        this.initMethod.execute(this);
    };
    ParserConfiguration1.prototype.config = function(jax) {
        var e_3, _a;
        this.configMethod.execute(this, jax);
        try {
            for(var _b = __values(this.configurations), _c = _b.next(); !_c.done; _c = _b.next()){
                var config = _c.value;
                this.addFilters(jax, config.item);
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
    };
    ParserConfiguration1.prototype.addPackage = function(pkg) {
        var name = typeof pkg === 'string' ? pkg : pkg[0];
        var conf = ConfigurationHandler.get(name);
        if (conf) this.configurations.add(conf, typeof pkg === 'string' ? conf.priority : pkg[1]);
    };
    ParserConfiguration1.prototype.add = function(config, jax, options) {
        var e_4, _a;
        if (options === void 0) options = {
        };
        this.append(config);
        this.configurations.add(config, config.priority);
        this.init();
        var parser = jax.parseOptions;
        parser.nodeFactory.setCreators(config.nodes);
        try {
            for(var _b = __values(Object.keys(config.items)), _c = _b.next(); !_c.done; _c = _b.next()){
                var kind = _c.value;
                parser.itemFactory.setNodeClass(kind, config.items[kind]);
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
        Tags_js_1.TagsFactory.addTags(config.tags);
        Options_js_1.defaultOptions(parser.options, config.options);
        Options_js_1.userOptions(parser.options, options);
        this.addFilters(jax, config);
        if (config.config) config.config(this, jax);
    };
    ParserConfiguration1.prototype.append = function(config, priority) {
        priority = priority || config.priority;
        if (config.initMethod) this.initMethod.add(config.initMethod[0], config.initMethod[1]);
        if (config.configMethod) this.configMethod.add(config.configMethod[0], config.configMethod[1]);
        this.handlers.add(config.handler, config.fallback, priority);
        Object.assign(this.items, config.items);
        Object.assign(this.tags, config.tags);
        Options_js_1.defaultOptions(this.options, config.options);
        Object.assign(this.nodes, config.nodes);
    };
    ParserConfiguration1.prototype.addFilters = function(jax, config) {
        var e_5, _a, e_6, _b;
        try {
            for(var _c = __values(config.preprocessors), _d = _c.next(); !_d.done; _d = _c.next()){
                var _e = __read(_d.value, 2), pre = _e[0], priority = _e[1];
                jax.preFilters.add(pre, priority);
            }
        } catch (e_5_1) {
            e_5 = {
                error: e_5_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_5) throw e_5.error;
            }
        }
        try {
            for(var _f = __values(config.postprocessors), _g = _f.next(); !_g.done; _g = _f.next()){
                var _h = __read(_g.value, 2), post = _h[0], priority = _h[1];
                jax.postFilters.add(post, priority);
            }
        } catch (e_6_1) {
            e_6 = {
                error: e_6_1
            };
        } finally{
            try {
                if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
            } finally{
                if (e_6) throw e_6.error;
            }
        }
    };
    return ParserConfiguration1;
}();
exports.ParserConfiguration = ParserConfiguration;

},{"../../util/Options.js":"3Dh3w","./MapHandler.js":"1yeBk","../../util/FunctionList.js":"2ed3w","../../util/PrioritizedList.js":"2BcDG","./Tags.js":"5I8xM"}],"1yeBk":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.SubHandlers = exports.SubHandler = exports.MapHandler = void 0;
var PrioritizedList_js_1 = require("../../util/PrioritizedList.js");
var FunctionList_js_1 = require("../../util/FunctionList.js");
var MapHandler;
(function(MapHandler1) {
    var maps = new Map();
    MapHandler1.register = function(map) {
        maps.set(map.name, map);
    };
    MapHandler1.getMap = function(name) {
        return maps.get(name);
    };
})(MapHandler = exports.MapHandler || (exports.MapHandler = {
}));
var SubHandler = function() {
    function SubHandler1() {
        this._configuration = new PrioritizedList_js_1.PrioritizedList();
        this._fallback = new FunctionList_js_1.FunctionList();
    }
    SubHandler1.prototype.add = function(maps, fallback, priority) {
        var e_1, _a;
        if (priority === void 0) priority = PrioritizedList_js_1.PrioritizedList.DEFAULTPRIORITY;
        try {
            for(var _b = __values(maps.slice().reverse()), _c = _b.next(); !_c.done; _c = _b.next()){
                var name_1 = _c.value;
                var map = MapHandler.getMap(name_1);
                if (!map) {
                    this.warn('Configuration ' + name_1 + ' not found! Omitted.');
                    return;
                }
                this._configuration.add(map, priority);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        if (fallback) this._fallback.add(fallback, priority);
    };
    SubHandler1.prototype.parse = function(input) {
        var e_2, _a;
        try {
            for(var _b = __values(this._configuration), _c = _b.next(); !_c.done; _c = _b.next()){
                var map = _c.value.item;
                var result = map.parse(input);
                if (result) return result;
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
        var _d = __read(input, 2), env = _d[0], symbol = _d[1];
        this._fallback.toArray()[0].item(env, symbol);
    };
    SubHandler1.prototype.lookup = function(symbol) {
        var map = this.applicable(symbol);
        return map ? map.lookup(symbol) : null;
    };
    SubHandler1.prototype.contains = function(symbol) {
        return this.applicable(symbol) ? true : false;
    };
    SubHandler1.prototype.toString = function() {
        var e_3, _a;
        var names = [];
        try {
            for(var _b = __values(this._configuration), _c = _b.next(); !_c.done; _c = _b.next()){
                var map = _c.value.item;
                names.push(map.name);
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        return names.join(', ');
    };
    SubHandler1.prototype.applicable = function(symbol) {
        var e_4, _a;
        try {
            for(var _b = __values(this._configuration), _c = _b.next(); !_c.done; _c = _b.next()){
                var map = _c.value.item;
                if (map.contains(symbol)) return map;
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
        return null;
    };
    SubHandler1.prototype.retrieve = function(name) {
        var e_5, _a;
        try {
            for(var _b = __values(this._configuration), _c = _b.next(); !_c.done; _c = _b.next()){
                var map = _c.value.item;
                if (map.name === name) return map;
            }
        } catch (e_5_1) {
            e_5 = {
                error: e_5_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_5) throw e_5.error;
            }
        }
        return null;
    };
    SubHandler1.prototype.warn = function(message) {
        console.log('TexParser Warning: ' + message);
    };
    return SubHandler1;
}();
exports.SubHandler = SubHandler;
var SubHandlers = function() {
    function SubHandlers1() {
        this.map = new Map();
    }
    SubHandlers1.prototype.add = function(handlers, fallbacks, priority) {
        var e_6, _a;
        if (priority === void 0) priority = PrioritizedList_js_1.PrioritizedList.DEFAULTPRIORITY;
        try {
            for(var _b = __values(Object.keys(handlers)), _c = _b.next(); !_c.done; _c = _b.next()){
                var key = _c.value;
                var name_2 = key;
                var subHandler = this.get(name_2);
                if (!subHandler) {
                    subHandler = new SubHandler();
                    this.set(name_2, subHandler);
                }
                subHandler.add(handlers[name_2], fallbacks[name_2], priority);
            }
        } catch (e_6_1) {
            e_6 = {
                error: e_6_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_6) throw e_6.error;
            }
        }
    };
    SubHandlers1.prototype.set = function(name, subHandler) {
        this.map.set(name, subHandler);
    };
    SubHandlers1.prototype.get = function(name) {
        return this.map.get(name);
    };
    SubHandlers1.prototype.retrieve = function(name) {
        var e_7, _a;
        try {
            for(var _b = __values(this.map.values()), _c = _b.next(); !_c.done; _c = _b.next()){
                var handler = _c.value;
                var map = handler.retrieve(name);
                if (map) return map;
            }
        } catch (e_7_1) {
            e_7 = {
                error: e_7_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_7) throw e_7.error;
            }
        }
        return null;
    };
    SubHandlers1.prototype.keys = function() {
        return this.map.keys();
    };
    return SubHandlers1;
}();
exports.SubHandlers = SubHandlers;

},{"../../util/PrioritizedList.js":"2BcDG","../../util/FunctionList.js":"2ed3w"}],"1cNwT":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BaseConfiguration = exports.BaseTags = exports.Other = void 0;
var Configuration_js_1 = require("../Configuration.js");
var MapHandler_js_1 = require("../MapHandler.js");
var TexError_js_1 = require("../TexError.js");
var NodeUtil_js_1 = require("../NodeUtil.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var bitem = require("./BaseItems.js");
var Tags_js_1 = require("../Tags.js");
require("./BaseMappings.js");
new SymbolMap_js_1.CharacterMap('remap', null, {
    '-': '\u2212',
    '*': '\u2217',
    '`': '\u2018'
});
function Other(parser, char) {
    var font = parser.stack.env['font'];
    var def = font ? {
        mathvariant: parser.stack.env['font']
    } : {
    };
    var remap = MapHandler_js_1.MapHandler.getMap('remap').lookup(char);
    var mo = parser.create('token', 'mo', def, remap ? remap.char : char);
    NodeUtil_js_1.default.setProperty(mo, 'fixStretchy', true);
    parser.configuration.addNode('fixStretchy', mo);
    parser.Push(mo);
}
exports.Other = Other;
function csUndefined(_parser, name) {
    throw new TexError_js_1.default('UndefinedControlSequence', 'Undefined control sequence %1', '\\' + name);
}
function envUndefined(_parser, env) {
    throw new TexError_js_1.default('UnknownEnv', 'Unknown environment \'%1\'', env);
}
var BaseTags1 = function(_super) {
    __extends(BaseTags2, _super);
    function BaseTags2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return BaseTags2;
}(Tags_js_1.AbstractTags);
exports.BaseTags = BaseTags1;
exports.BaseConfiguration = Configuration_js_1.Configuration.create('base', {
    handler: {
        character: [
            'command',
            'special',
            'letter',
            'digit'
        ],
        delimiter: [
            'delimiter'
        ],
        macro: [
            'delimiter',
            'macros',
            'mathchar0mi',
            'mathchar0mo',
            'mathchar7'
        ],
        environment: [
            'environment'
        ]
    },
    fallback: {
        character: Other,
        macro: csUndefined,
        environment: envUndefined
    },
    items: (_a = {
    }, _a[bitem.StartItem.prototype.kind] = bitem.StartItem, _a[bitem.StopItem.prototype.kind] = bitem.StopItem, _a[bitem.OpenItem.prototype.kind] = bitem.OpenItem, _a[bitem.CloseItem.prototype.kind] = bitem.CloseItem, _a[bitem.PrimeItem.prototype.kind] = bitem.PrimeItem, _a[bitem.SubsupItem.prototype.kind] = bitem.SubsupItem, _a[bitem.OverItem.prototype.kind] = bitem.OverItem, _a[bitem.LeftItem.prototype.kind] = bitem.LeftItem, _a[bitem.Middle.prototype.kind] = bitem.Middle, _a[bitem.RightItem.prototype.kind] = bitem.RightItem, _a[bitem.BeginItem.prototype.kind] = bitem.BeginItem, _a[bitem.EndItem.prototype.kind] = bitem.EndItem, _a[bitem.StyleItem.prototype.kind] = bitem.StyleItem, _a[bitem.PositionItem.prototype.kind] = bitem.PositionItem, _a[bitem.CellItem.prototype.kind] = bitem.CellItem, _a[bitem.MmlItem.prototype.kind] = bitem.MmlItem, _a[bitem.FnItem.prototype.kind] = bitem.FnItem, _a[bitem.NotItem.prototype.kind] = bitem.NotItem, _a[bitem.DotsItem.prototype.kind] = bitem.DotsItem, _a[bitem.ArrayItem.prototype.kind] = bitem.ArrayItem, _a[bitem.EqnArrayItem.prototype.kind] = bitem.EqnArrayItem, _a[bitem.EquationItem.prototype.kind] = bitem.EquationItem, _a),
    options: {
        maxMacros: 1000,
        baseURL: typeof document === 'undefined' || document.getElementsByTagName('base').length === 0 ? '' : String(document.location).replace(/#.*$/, '')
    },
    tags: {
        base: BaseTags1
    }
});

},{"../Configuration.js":"2ZNEp","../MapHandler.js":"1yeBk","../TexError.js":"7EfV4","../NodeUtil.js":"If5yR","../SymbolMap.js":"19zvT","./BaseItems.js":"7vCsT","../Tags.js":"5I8xM","./BaseMappings.js":"2eJJq"}],"19zvT":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.EnvironmentMap = exports.CommandMap = exports.MacroMap = exports.DelimiterMap = exports.CharacterMap = exports.AbstractParseMap = exports.RegExpMap = exports.AbstractSymbolMap = void 0;
var Symbol_js_1 = require("./Symbol.js");
var MapHandler_js_1 = require("./MapHandler.js");
var AbstractSymbolMap = function() {
    function AbstractSymbolMap1(_name, _parser) {
        this._name = _name;
        this._parser = _parser;
        MapHandler_js_1.MapHandler.register(this);
    }
    Object.defineProperty(AbstractSymbolMap1.prototype, "name", {
        get: function() {
            return this._name;
        },
        enumerable: false,
        configurable: true
    });
    AbstractSymbolMap1.prototype.parserFor = function(symbol) {
        return this.contains(symbol) ? this.parser : null;
    };
    AbstractSymbolMap1.prototype.parse = function(_a) {
        var _b = __read(_a, 2), env = _b[0], symbol = _b[1];
        var parser = this.parserFor(symbol);
        var mapped = this.lookup(symbol);
        return parser && mapped ? parser(env, mapped) || true : null;
    };
    Object.defineProperty(AbstractSymbolMap1.prototype, "parser", {
        get: function() {
            return this._parser;
        },
        set: function(parser) {
            this._parser = parser;
        },
        enumerable: false,
        configurable: true
    });
    return AbstractSymbolMap1;
}();
exports.AbstractSymbolMap = AbstractSymbolMap;
var RegExpMap1 = function(_super) {
    __extends(RegExpMap2, _super);
    function RegExpMap2(name, parser, _regExp) {
        var _this = _super.call(this, name, parser) || this;
        _this._regExp = _regExp;
        return _this;
    }
    RegExpMap2.prototype.contains = function(symbol) {
        return this._regExp.test(symbol);
    };
    RegExpMap2.prototype.lookup = function(symbol) {
        return this.contains(symbol) ? symbol : null;
    };
    return RegExpMap2;
}(AbstractSymbolMap);
exports.RegExpMap = RegExpMap1;
var AbstractParseMap1 = function(_super) {
    __extends(AbstractParseMap2, _super);
    function AbstractParseMap2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.map = new Map();
        return _this;
    }
    AbstractParseMap2.prototype.lookup = function(symbol) {
        return this.map.get(symbol);
    };
    AbstractParseMap2.prototype.contains = function(symbol) {
        return this.map.has(symbol);
    };
    AbstractParseMap2.prototype.add = function(symbol, object) {
        this.map.set(symbol, object);
    };
    AbstractParseMap2.prototype.remove = function(symbol) {
        this.map.delete(symbol);
    };
    return AbstractParseMap2;
}(AbstractSymbolMap);
exports.AbstractParseMap = AbstractParseMap1;
var CharacterMap1 = function(_super) {
    __extends(CharacterMap2, _super);
    function CharacterMap2(name, parser, json) {
        var e_1, _a;
        var _this = _super.call(this, name, parser) || this;
        try {
            for(var _b = __values(Object.keys(json)), _c = _b.next(); !_c.done; _c = _b.next()){
                var key = _c.value;
                var value = json[key];
                var _d = __read(typeof value === 'string' ? [
                    value,
                    null
                ] : value, 2), char = _d[0], attrs = _d[1];
                var character = new Symbol_js_1.Symbol(key, char, attrs);
                _this.add(key, character);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        return _this;
    }
    return CharacterMap2;
}(AbstractParseMap1);
exports.CharacterMap = CharacterMap1;
var DelimiterMap1 = function(_super) {
    __extends(DelimiterMap2, _super);
    function DelimiterMap2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DelimiterMap2.prototype.parse = function(_a) {
        var _b = __read(_a, 2), env = _b[0], symbol = _b[1];
        return _super.prototype.parse.call(this, [
            env,
            '\\' + symbol
        ]);
    };
    return DelimiterMap2;
}(CharacterMap1);
exports.DelimiterMap = DelimiterMap1;
var MacroMap1 = function(_super) {
    __extends(MacroMap2, _super);
    function MacroMap2(name, json, functionMap) {
        var e_2, _a;
        var _this = _super.call(this, name, null) || this;
        try {
            for(var _b = __values(Object.keys(json)), _c = _b.next(); !_c.done; _c = _b.next()){
                var key = _c.value;
                var value = json[key];
                var _d = __read(typeof value === 'string' ? [
                    value
                ] : value), func = _d[0], attrs = _d.slice(1);
                var character = new Symbol_js_1.Macro(key, functionMap[func], attrs);
                _this.add(key, character);
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
        return _this;
    }
    MacroMap2.prototype.parserFor = function(symbol) {
        var macro = this.lookup(symbol);
        return macro ? macro.func : null;
    };
    MacroMap2.prototype.parse = function(_a) {
        var _b = __read(_a, 2), env = _b[0], symbol = _b[1];
        var macro = this.lookup(symbol);
        var parser = this.parserFor(symbol);
        if (!macro || !parser) return null;
        return parser.apply(void 0, __spreadArray([
            env,
            macro.symbol
        ], __read(macro.args))) || true;
    };
    return MacroMap2;
}(AbstractParseMap1);
exports.MacroMap = MacroMap1;
var CommandMap1 = function(_super) {
    __extends(CommandMap2, _super);
    function CommandMap2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CommandMap2.prototype.parse = function(_a) {
        var _b = __read(_a, 2), env = _b[0], symbol = _b[1];
        var macro = this.lookup(symbol);
        var parser = this.parserFor(symbol);
        if (!macro || !parser) return null;
        if (!parser) return null;
        var saveCommand = env.currentCS;
        env.currentCS = '\\' + symbol;
        var result = parser.apply(void 0, __spreadArray([
            env,
            '\\' + macro.symbol
        ], __read(macro.args)));
        env.currentCS = saveCommand;
        return result || true;
    };
    return CommandMap2;
}(MacroMap1);
exports.CommandMap = CommandMap1;
var EnvironmentMap1 = function(_super) {
    __extends(EnvironmentMap2, _super);
    function EnvironmentMap2(name, parser, json, functionMap) {
        var _this = _super.call(this, name, json, functionMap) || this;
        _this.parser = parser;
        return _this;
    }
    EnvironmentMap2.prototype.parse = function(_a) {
        var _b = __read(_a, 2), env = _b[0], symbol = _b[1];
        var macro = this.lookup(symbol);
        var envParser = this.parserFor(symbol);
        if (!macro || !envParser) return null;
        this.parser(env, macro.symbol, envParser, macro.args);
        return true;
    };
    return EnvironmentMap2;
}(MacroMap1);
exports.EnvironmentMap = EnvironmentMap1;

},{"./Symbol.js":"1afRf","./MapHandler.js":"1yeBk"}],"1afRf":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Macro = exports.Symbol = void 0;
var Symbol1 = function() {
    function Symbol2(_symbol, _char, _attributes) {
        this._symbol = _symbol;
        this._char = _char;
        this._attributes = _attributes;
    }
    Object.defineProperty(Symbol2.prototype, "symbol", {
        get: function() {
            return this._symbol;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Symbol2.prototype, "char", {
        get: function() {
            return this._char;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Symbol2.prototype, "attributes", {
        get: function() {
            return this._attributes;
        },
        enumerable: false,
        configurable: true
    });
    return Symbol2;
}();
exports.Symbol = Symbol1;
var Macro = function() {
    function Macro1(_symbol, _func, _args) {
        if (_args === void 0) _args = [];
        this._symbol = _symbol;
        this._func = _func;
        this._args = _args;
    }
    Object.defineProperty(Macro1.prototype, "symbol", {
        get: function() {
            return this._symbol;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Macro1.prototype, "func", {
        get: function() {
            return this._func;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Macro1.prototype, "args", {
        get: function() {
            return this._args;
        },
        enumerable: false,
        configurable: true
    });
    return Macro1;
}();
exports.Macro = Macro;

},{}],"7vCsT":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.EquationItem = exports.EqnArrayItem = exports.ArrayItem = exports.DotsItem = exports.NotItem = exports.FnItem = exports.MmlItem = exports.CellItem = exports.PositionItem = exports.StyleItem = exports.EndItem = exports.BeginItem = exports.RightItem = exports.Middle = exports.LeftItem = exports.OverItem = exports.SubsupItem = exports.PrimeItem = exports.CloseItem = exports.OpenItem = exports.StopItem = exports.StartItem = void 0;
var MapHandler_js_1 = require("../MapHandler.js");
var Entities_js_1 = require("../../../util/Entities.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var TexError_js_1 = require("../TexError.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var NodeUtil_js_1 = require("../NodeUtil.js");
var StackItem_js_1 = require("../StackItem.js");
var StartItem1 = function(_super) {
    __extends(StartItem2, _super);
    function StartItem2(factory, global) {
        var _this = _super.call(this, factory) || this;
        _this.global = global;
        return _this;
    }
    Object.defineProperty(StartItem2.prototype, "kind", {
        get: function() {
            return 'start';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(StartItem2.prototype, "isOpen", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    StartItem2.prototype.checkItem = function(item) {
        if (item.isKind('stop')) {
            var node = this.toMml();
            if (!this.global.isInner) node = this.factory.configuration.tags.finalize(node, this.env);
            return [
                [
                    this.factory.create('mml', node)
                ],
                true
            ];
        }
        return _super.prototype.checkItem.call(this, item);
    };
    return StartItem2;
}(StackItem_js_1.BaseItem);
exports.StartItem = StartItem1;
var StopItem1 = function(_super) {
    __extends(StopItem2, _super);
    function StopItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(StopItem2.prototype, "kind", {
        get: function() {
            return 'stop';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(StopItem2.prototype, "isClose", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    return StopItem2;
}(StackItem_js_1.BaseItem);
exports.StopItem = StopItem1;
var OpenItem1 = function(_super) {
    __extends(OpenItem2, _super);
    function OpenItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(OpenItem2.prototype, "kind", {
        get: function() {
            return 'open';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OpenItem2.prototype, "isOpen", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    OpenItem2.prototype.checkItem = function(item) {
        if (item.isKind('close')) {
            var mml = this.toMml();
            var node = this.create('node', 'TeXAtom', [
                mml
            ]);
            return [
                [
                    this.factory.create('mml', node)
                ],
                true
            ];
        }
        return _super.prototype.checkItem.call(this, item);
    };
    OpenItem2.errors = Object.assign(Object.create(StackItem_js_1.BaseItem.errors), {
        'stop': [
            'ExtraOpenMissingClose',
            'Extra open brace or missing close brace'
        ]
    });
    return OpenItem2;
}(StackItem_js_1.BaseItem);
exports.OpenItem = OpenItem1;
var CloseItem1 = function(_super) {
    __extends(CloseItem2, _super);
    function CloseItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(CloseItem2.prototype, "kind", {
        get: function() {
            return 'close';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CloseItem2.prototype, "isClose", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    return CloseItem2;
}(StackItem_js_1.BaseItem);
exports.CloseItem = CloseItem1;
var PrimeItem1 = function(_super) {
    __extends(PrimeItem2, _super);
    function PrimeItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(PrimeItem2.prototype, "kind", {
        get: function() {
            return 'prime';
        },
        enumerable: false,
        configurable: true
    });
    PrimeItem2.prototype.checkItem = function(item) {
        var _a = __read(this.Peek(2), 2), top0 = _a[0], top1 = _a[1];
        if (!NodeUtil_js_1.default.isType(top0, 'msubsup') || NodeUtil_js_1.default.isType(top0, 'msup')) {
            var node = this.create('node', 'msup', [
                top0,
                top1
            ]);
            return [
                [
                    node,
                    item
                ],
                true
            ];
        }
        NodeUtil_js_1.default.setChild(top0, top0.sup, top1);
        return [
            [
                top0,
                item
            ],
            true
        ];
    };
    return PrimeItem2;
}(StackItem_js_1.BaseItem);
exports.PrimeItem = PrimeItem1;
var SubsupItem1 = function(_super) {
    __extends(SubsupItem2, _super);
    function SubsupItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(SubsupItem2.prototype, "kind", {
        get: function() {
            return 'subsup';
        },
        enumerable: false,
        configurable: true
    });
    SubsupItem2.prototype.checkItem = function(item) {
        if (item.isKind('open') || item.isKind('left')) return StackItem_js_1.BaseItem.success;
        var top = this.First;
        var position = this.getProperty('position');
        if (item.isKind('mml')) {
            if (this.getProperty('primes')) {
                if (position !== 2) NodeUtil_js_1.default.setChild(top, 2, this.getProperty('primes'));
                else {
                    NodeUtil_js_1.default.setProperty(this.getProperty('primes'), 'variantForm', true);
                    var node = this.create('node', 'mrow', [
                        this.getProperty('primes'),
                        item.First
                    ]);
                    item.First = node;
                }
            }
            NodeUtil_js_1.default.setChild(top, position, item.First);
            if (this.getProperty('movesupsub') != null) NodeUtil_js_1.default.setProperty(top, 'movesupsub', this.getProperty('movesupsub'));
            var result = this.factory.create('mml', top);
            return [
                [
                    result
                ],
                true
            ];
        }
        if (_super.prototype.checkItem.call(this, item)[1]) {
            var error = this.getErrors([
                '',
                'sub',
                'sup'
            ][position]);
            throw new (TexError_js_1.default.bind.apply(TexError_js_1.default, __spreadArray([
                void 0,
                error[0],
                error[1]
            ], __read(error.splice(2)))))();
        }
        return null;
    };
    SubsupItem2.errors = Object.assign(Object.create(StackItem_js_1.BaseItem.errors), {
        'stop': [
            'MissingScript',
            'Missing superscript or subscript argument'
        ],
        'sup': [
            'MissingOpenForSup',
            'Missing open brace for superscript'
        ],
        'sub': [
            'MissingOpenForSub',
            'Missing open brace for subscript'
        ]
    });
    return SubsupItem2;
}(StackItem_js_1.BaseItem);
exports.SubsupItem = SubsupItem1;
var OverItem1 = function(_super) {
    __extends(OverItem2, _super);
    function OverItem2(factory) {
        var _this = _super.call(this, factory) || this;
        _this.setProperty('name', '\\over');
        return _this;
    }
    Object.defineProperty(OverItem2.prototype, "kind", {
        get: function() {
            return 'over';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverItem2.prototype, "isClose", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    OverItem2.prototype.checkItem = function(item) {
        if (item.isKind('over')) throw new TexError_js_1.default('AmbiguousUseOf', 'Ambiguous use of %1', item.getName());
        if (item.isClose) {
            var mml = this.create('node', 'mfrac', [
                this.getProperty('num'),
                this.toMml(false)
            ]);
            if (this.getProperty('thickness') != null) NodeUtil_js_1.default.setAttribute(mml, 'linethickness', this.getProperty('thickness'));
            if (this.getProperty('open') || this.getProperty('close')) {
                NodeUtil_js_1.default.setProperty(mml, 'withDelims', true);
                mml = ParseUtil_js_1.default.fixedFence(this.factory.configuration, this.getProperty('open'), mml, this.getProperty('close'));
            }
            return [
                [
                    this.factory.create('mml', mml),
                    item
                ],
                true
            ];
        }
        return _super.prototype.checkItem.call(this, item);
    };
    OverItem2.prototype.toString = function() {
        return 'over[' + this.getProperty('num') + ' / ' + this.nodes.join('; ') + ']';
    };
    return OverItem2;
}(StackItem_js_1.BaseItem);
exports.OverItem = OverItem1;
var LeftItem1 = function(_super) {
    __extends(LeftItem2, _super);
    function LeftItem2(factory, delim) {
        var _this = _super.call(this, factory) || this;
        _this.setProperty('delim', delim);
        return _this;
    }
    Object.defineProperty(LeftItem2.prototype, "kind", {
        get: function() {
            return 'left';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(LeftItem2.prototype, "isOpen", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    LeftItem2.prototype.checkItem = function(item) {
        if (item.isKind('right')) return [
            [
                this.factory.create('mml', ParseUtil_js_1.default.fenced(this.factory.configuration, this.getProperty('delim'), this.toMml(), item.getProperty('delim'), '', item.getProperty('color')))
            ],
            true
        ];
        if (item.isKind('middle')) {
            var def = {
                stretchy: true
            };
            if (item.getProperty('color')) def.mathcolor = item.getProperty('color');
            this.Push(this.create('node', 'TeXAtom', [], {
                texClass: MmlNode_js_1.TEXCLASS.CLOSE
            }), this.create('token', 'mo', def, item.getProperty('delim')), this.create('node', 'TeXAtom', [], {
                texClass: MmlNode_js_1.TEXCLASS.OPEN
            }));
            this.env = {
            };
            return [
                [
                    this
                ],
                true
            ];
        }
        return _super.prototype.checkItem.call(this, item);
    };
    LeftItem2.errors = Object.assign(Object.create(StackItem_js_1.BaseItem.errors), {
        'stop': [
            'ExtraLeftMissingRight',
            'Extra \\left or missing \\right'
        ]
    });
    return LeftItem2;
}(StackItem_js_1.BaseItem);
exports.LeftItem = LeftItem1;
var Middle1 = function(_super) {
    __extends(Middle2, _super);
    function Middle2(factory, delim, color) {
        var _this = _super.call(this, factory) || this;
        _this.setProperty('delim', delim);
        color && _this.setProperty('color', color);
        return _this;
    }
    Object.defineProperty(Middle2.prototype, "kind", {
        get: function() {
            return 'middle';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Middle2.prototype, "isClose", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    return Middle2;
}(StackItem_js_1.BaseItem);
exports.Middle = Middle1;
var RightItem1 = function(_super) {
    __extends(RightItem2, _super);
    function RightItem2(factory, delim, color) {
        var _this = _super.call(this, factory) || this;
        _this.setProperty('delim', delim);
        color && _this.setProperty('color', color);
        return _this;
    }
    Object.defineProperty(RightItem2.prototype, "kind", {
        get: function() {
            return 'right';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RightItem2.prototype, "isClose", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    return RightItem2;
}(StackItem_js_1.BaseItem);
exports.RightItem = RightItem1;
var BeginItem1 = function(_super) {
    __extends(BeginItem2, _super);
    function BeginItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(BeginItem2.prototype, "kind", {
        get: function() {
            return 'begin';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BeginItem2.prototype, "isOpen", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    BeginItem2.prototype.checkItem = function(item) {
        if (item.isKind('end')) {
            if (item.getName() !== this.getName()) throw new TexError_js_1.default('EnvBadEnd', '\\begin{%1} ended with \\end{%2}', this.getName(), item.getName());
            if (!this.getProperty('end')) return [
                [
                    this.factory.create('mml', this.toMml())
                ],
                true
            ];
            return StackItem_js_1.BaseItem.fail;
        }
        if (item.isKind('stop')) throw new TexError_js_1.default('EnvMissingEnd', 'Missing \\end{%1}', this.getName());
        return _super.prototype.checkItem.call(this, item);
    };
    return BeginItem2;
}(StackItem_js_1.BaseItem);
exports.BeginItem = BeginItem1;
var EndItem1 = function(_super) {
    __extends(EndItem2, _super);
    function EndItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(EndItem2.prototype, "kind", {
        get: function() {
            return 'end';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(EndItem2.prototype, "isClose", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    return EndItem2;
}(StackItem_js_1.BaseItem);
exports.EndItem = EndItem1;
var StyleItem1 = function(_super) {
    __extends(StyleItem2, _super);
    function StyleItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(StyleItem2.prototype, "kind", {
        get: function() {
            return 'style';
        },
        enumerable: false,
        configurable: true
    });
    StyleItem2.prototype.checkItem = function(item) {
        if (!item.isClose) return _super.prototype.checkItem.call(this, item);
        var mml = this.create('node', 'mstyle', this.nodes, this.getProperty('styles'));
        return [
            [
                this.factory.create('mml', mml),
                item
            ],
            true
        ];
    };
    return StyleItem2;
}(StackItem_js_1.BaseItem);
exports.StyleItem = StyleItem1;
var PositionItem1 = function(_super) {
    __extends(PositionItem2, _super);
    function PositionItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(PositionItem2.prototype, "kind", {
        get: function() {
            return 'position';
        },
        enumerable: false,
        configurable: true
    });
    PositionItem2.prototype.checkItem = function(item) {
        if (item.isClose) throw new TexError_js_1.default('MissingBoxFor', 'Missing box for %1', this.getName());
        if (item.isFinal) {
            var mml = item.toMml();
            switch(this.getProperty('move')){
                case 'vertical':
                    mml = this.create('node', 'mpadded', [
                        mml
                    ], {
                        height: this.getProperty('dh'),
                        depth: this.getProperty('dd'),
                        voffset: this.getProperty('dh')
                    });
                    return [
                        [
                            this.factory.create('mml', mml)
                        ],
                        true
                    ];
                case 'horizontal':
                    return [
                        [
                            this.factory.create('mml', this.getProperty('left')),
                            item,
                            this.factory.create('mml', this.getProperty('right'))
                        ],
                        true
                    ];
            }
        }
        return _super.prototype.checkItem.call(this, item);
    };
    return PositionItem2;
}(StackItem_js_1.BaseItem);
exports.PositionItem = PositionItem1;
var CellItem1 = function(_super) {
    __extends(CellItem2, _super);
    function CellItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(CellItem2.prototype, "kind", {
        get: function() {
            return 'cell';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CellItem2.prototype, "isClose", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    return CellItem2;
}(StackItem_js_1.BaseItem);
exports.CellItem = CellItem1;
var MmlItem1 = function(_super) {
    __extends(MmlItem2, _super);
    function MmlItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlItem2.prototype, "isFinal", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlItem2.prototype, "kind", {
        get: function() {
            return 'mml';
        },
        enumerable: false,
        configurable: true
    });
    return MmlItem2;
}(StackItem_js_1.BaseItem);
exports.MmlItem = MmlItem1;
var FnItem1 = function(_super) {
    __extends(FnItem2, _super);
    function FnItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(FnItem2.prototype, "kind", {
        get: function() {
            return 'fn';
        },
        enumerable: false,
        configurable: true
    });
    FnItem2.prototype.checkItem = function(item) {
        var top = this.First;
        if (top) {
            if (item.isOpen) return StackItem_js_1.BaseItem.success;
            if (!item.isKind('fn')) {
                var mml = item.First;
                if (!item.isKind('mml') || !mml) return [
                    [
                        top,
                        item
                    ],
                    true
                ];
                if (NodeUtil_js_1.default.isType(mml, 'mstyle') && mml.childNodes.length && NodeUtil_js_1.default.isType(mml.childNodes[0].childNodes[0], 'mspace') || NodeUtil_js_1.default.isType(mml, 'mspace')) return [
                    [
                        top,
                        item
                    ],
                    true
                ];
                if (NodeUtil_js_1.default.isEmbellished(mml)) mml = NodeUtil_js_1.default.getCoreMO(mml);
                var form = NodeUtil_js_1.default.getForm(mml);
                if (form != null && [
                    0,
                    0,
                    1,
                    1,
                    0,
                    1,
                    1,
                    0,
                    0,
                    0
                ][form[2]]) return [
                    [
                        top,
                        item
                    ],
                    true
                ];
            }
            var node = this.create('token', 'mo', {
                texClass: MmlNode_js_1.TEXCLASS.NONE
            }, Entities_js_1.entities.ApplyFunction);
            return [
                [
                    top,
                    node,
                    item
                ],
                true
            ];
        }
        return _super.prototype.checkItem.apply(this, arguments);
    };
    return FnItem2;
}(StackItem_js_1.BaseItem);
exports.FnItem = FnItem1;
var NotItem1 = function(_super) {
    __extends(NotItem2, _super);
    function NotItem2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.remap = MapHandler_js_1.MapHandler.getMap('not_remap');
        return _this;
    }
    Object.defineProperty(NotItem2.prototype, "kind", {
        get: function() {
            return 'not';
        },
        enumerable: false,
        configurable: true
    });
    NotItem2.prototype.checkItem = function(item) {
        var mml;
        var c;
        var textNode;
        if (item.isKind('open') || item.isKind('left')) return StackItem_js_1.BaseItem.success;
        if (item.isKind('mml') && (NodeUtil_js_1.default.isType(item.First, 'mo') || NodeUtil_js_1.default.isType(item.First, 'mi') || NodeUtil_js_1.default.isType(item.First, 'mtext'))) {
            mml = item.First;
            c = NodeUtil_js_1.default.getText(mml);
            if (c.length === 1 && !NodeUtil_js_1.default.getProperty(mml, 'movesupsub') && NodeUtil_js_1.default.getChildren(mml).length === 1) {
                if (this.remap.contains(c)) {
                    textNode = this.create('text', this.remap.lookup(c).char);
                    NodeUtil_js_1.default.setChild(mml, 0, textNode);
                } else {
                    textNode = this.create('text', '\u0338');
                    NodeUtil_js_1.default.appendChildren(mml, [
                        textNode
                    ]);
                }
                return [
                    [
                        item
                    ],
                    true
                ];
            }
        }
        textNode = this.create('text', '\u29F8');
        var mtextNode = this.create('node', 'mtext', [], {
        }, textNode);
        var paddedNode = this.create('node', 'mpadded', [
            mtextNode
        ], {
            width: 0
        });
        mml = this.create('node', 'TeXAtom', [
            paddedNode
        ], {
            texClass: MmlNode_js_1.TEXCLASS.REL
        });
        return [
            [
                mml,
                item
            ],
            true
        ];
    };
    return NotItem2;
}(StackItem_js_1.BaseItem);
exports.NotItem = NotItem1;
var DotsItem1 = function(_super) {
    __extends(DotsItem2, _super);
    function DotsItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(DotsItem2.prototype, "kind", {
        get: function() {
            return 'dots';
        },
        enumerable: false,
        configurable: true
    });
    DotsItem2.prototype.checkItem = function(item) {
        if (item.isKind('open') || item.isKind('left')) return StackItem_js_1.BaseItem.success;
        var dots = this.getProperty('ldots');
        var top = item.First;
        if (item.isKind('mml') && NodeUtil_js_1.default.isEmbellished(top)) {
            var tclass = NodeUtil_js_1.default.getTexClass(NodeUtil_js_1.default.getCoreMO(top));
            if (tclass === MmlNode_js_1.TEXCLASS.BIN || tclass === MmlNode_js_1.TEXCLASS.REL) dots = this.getProperty('cdots');
        }
        return [
            [
                dots,
                item
            ],
            true
        ];
    };
    return DotsItem2;
}(StackItem_js_1.BaseItem);
exports.DotsItem = DotsItem1;
var ArrayItem1 = function(_super) {
    __extends(ArrayItem2, _super);
    function ArrayItem2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.table = [];
        _this.row = [];
        _this.frame = [];
        _this.hfill = [];
        _this.arraydef = {
        };
        _this.dashed = false;
        return _this;
    }
    Object.defineProperty(ArrayItem2.prototype, "kind", {
        get: function() {
            return 'array';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ArrayItem2.prototype, "isOpen", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ArrayItem2.prototype, "copyEnv", {
        get: function() {
            return false;
        },
        enumerable: false,
        configurable: true
    });
    ArrayItem2.prototype.checkItem = function(item) {
        if (item.isClose && !item.isKind('over')) {
            if (item.getProperty('isEntry')) {
                this.EndEntry();
                this.clearEnv();
                return StackItem_js_1.BaseItem.fail;
            }
            if (item.getProperty('isCR')) {
                this.EndEntry();
                this.EndRow();
                this.clearEnv();
                return StackItem_js_1.BaseItem.fail;
            }
            this.EndTable();
            this.clearEnv();
            var scriptlevel = this.arraydef['scriptlevel'];
            delete this.arraydef['scriptlevel'];
            var mml = this.create('node', 'mtable', this.table, this.arraydef);
            if (scriptlevel) mml.setProperty('scriptlevel', scriptlevel);
            if (this.frame.length === 4) NodeUtil_js_1.default.setAttribute(mml, 'frame', this.dashed ? 'dashed' : 'solid');
            else if (this.frame.length) {
                if (this.arraydef['rowlines']) this.arraydef['rowlines'] = this.arraydef['rowlines'].replace(/none( none)+$/, 'none');
                mml = this.create('node', 'menclose', [
                    mml
                ], {
                    notation: this.frame.join(' '),
                    isFrame: true
                });
                if ((this.arraydef['columnlines'] || 'none') !== 'none' || (this.arraydef['rowlines'] || 'none') !== 'none') NodeUtil_js_1.default.setAttribute(mml, 'padding', 0);
            }
            if (this.getProperty('open') || this.getProperty('close')) mml = ParseUtil_js_1.default.fenced(this.factory.configuration, this.getProperty('open'), mml, this.getProperty('close'));
            var newItem = this.factory.create('mml', mml);
            if (this.getProperty('requireClose')) {
                if (item.isKind('close')) return [
                    [
                        newItem
                    ],
                    true
                ];
                throw new TexError_js_1.default('MissingCloseBrace', 'Missing close brace');
            }
            return [
                [
                    newItem,
                    item
                ],
                true
            ];
        }
        return _super.prototype.checkItem.call(this, item);
    };
    ArrayItem2.prototype.EndEntry = function() {
        var mtd = this.create('node', 'mtd', this.nodes);
        if (this.hfill.length) {
            if (this.hfill[0] === 0) NodeUtil_js_1.default.setAttribute(mtd, 'columnalign', 'right');
            if (this.hfill[this.hfill.length - 1] === this.Size()) NodeUtil_js_1.default.setAttribute(mtd, 'columnalign', NodeUtil_js_1.default.getAttribute(mtd, 'columnalign') ? 'center' : 'left');
        }
        this.row.push(mtd);
        this.Clear();
        this.hfill = [];
    };
    ArrayItem2.prototype.EndRow = function() {
        var node;
        if (this.getProperty('isNumbered') && this.row.length === 3) {
            this.row.unshift(this.row.pop());
            node = this.create('node', 'mlabeledtr', this.row);
        } else node = this.create('node', 'mtr', this.row);
        this.table.push(node);
        this.row = [];
    };
    ArrayItem2.prototype.EndTable = function() {
        if (this.Size() || this.row.length) {
            this.EndEntry();
            this.EndRow();
        }
        this.checkLines();
    };
    ArrayItem2.prototype.checkLines = function() {
        if (this.arraydef['rowlines']) {
            var lines = this.arraydef['rowlines'].split(/ /);
            if (lines.length === this.table.length) {
                this.frame.push('bottom');
                lines.pop();
                this.arraydef['rowlines'] = lines.join(' ');
            } else if (lines.length < this.table.length - 1) this.arraydef['rowlines'] += ' none';
        }
        if (this.getProperty('rowspacing')) {
            var rows = this.arraydef['rowspacing'].split(/ /);
            while(rows.length < this.table.length)rows.push(this.getProperty('rowspacing') + 'em');
            this.arraydef['rowspacing'] = rows.join(' ');
        }
    };
    return ArrayItem2;
}(StackItem_js_1.BaseItem);
exports.ArrayItem = ArrayItem1;
var EqnArrayItem1 = function(_super) {
    __extends(EqnArrayItem2, _super);
    function EqnArrayItem2(factory) {
        var args = [];
        for(var _i = 1; _i < arguments.length; _i++)args[_i - 1] = arguments[_i];
        var _this = _super.call(this, factory) || this;
        _this.factory.configuration.tags.start(args[0], args[2], args[1]);
        return _this;
    }
    Object.defineProperty(EqnArrayItem2.prototype, "kind", {
        get: function() {
            return 'eqnarray';
        },
        enumerable: false,
        configurable: true
    });
    EqnArrayItem2.prototype.EndEntry = function() {
        if (this.row.length) ParseUtil_js_1.default.fixInitialMO(this.factory.configuration, this.nodes);
        var node = this.create('node', 'mtd', this.nodes);
        this.row.push(node);
        this.Clear();
    };
    EqnArrayItem2.prototype.EndRow = function() {
        var mtr = 'mtr';
        var tag = this.factory.configuration.tags.getTag();
        if (tag) {
            this.row = [
                tag
            ].concat(this.row);
            mtr = 'mlabeledtr';
        }
        this.factory.configuration.tags.clearTag();
        var node = this.create('node', mtr, this.row);
        this.table.push(node);
        this.row = [];
    };
    EqnArrayItem2.prototype.EndTable = function() {
        _super.prototype.EndTable.call(this);
        this.factory.configuration.tags.end();
    };
    return EqnArrayItem2;
}(ArrayItem1);
exports.EqnArrayItem = EqnArrayItem1;
var EquationItem1 = function(_super) {
    __extends(EquationItem2, _super);
    function EquationItem2(factory) {
        var args = [];
        for(var _i = 1; _i < arguments.length; _i++)args[_i - 1] = arguments[_i];
        var _this = _super.call(this, factory) || this;
        _this.factory.configuration.tags.start('equation', true, args[0]);
        return _this;
    }
    Object.defineProperty(EquationItem2.prototype, "kind", {
        get: function() {
            return 'equation';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(EquationItem2.prototype, "isOpen", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    EquationItem2.prototype.checkItem = function(item) {
        if (item.isKind('end')) {
            var mml = this.toMml();
            var tag = this.factory.configuration.tags.getTag();
            this.factory.configuration.tags.end();
            return [
                [
                    tag ? this.factory.configuration.tags.enTag(mml, tag) : mml,
                    item
                ],
                true
            ];
        }
        if (item.isKind('stop')) throw new TexError_js_1.default('EnvMissingEnd', 'Missing \\end{%1}', this.getName());
        return _super.prototype.checkItem.call(this, item);
    };
    return EquationItem2;
}(StackItem_js_1.BaseItem);
exports.EquationItem = EquationItem1;

},{"../MapHandler.js":"1yeBk","../../../util/Entities.js":"4kMub","../../../core/MmlTree/MmlNode.js":"5Ogy3","../TexError.js":"7EfV4","../ParseUtil.js":"17LUu","../NodeUtil.js":"If5yR","../StackItem.js":"5A1jm"}],"2eJJq":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var sm = require("../SymbolMap.js");
var TexConstants_js_1 = require("../TexConstants.js");
var BaseMethods_js_1 = require("./BaseMethods.js");
var ParseMethods_js_1 = require("../ParseMethods.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var lengths_js_1 = require("../../../util/lengths.js");
new sm.RegExpMap('letter', ParseMethods_js_1.default.variable, /[a-z]/i);
new sm.RegExpMap('digit', ParseMethods_js_1.default.digit, /[0-9.,]/);
new sm.RegExpMap('command', ParseMethods_js_1.default.controlSequence, /^\\/);
new sm.MacroMap('special', {
    '{': 'Open',
    '}': 'Close',
    '~': 'Tilde',
    '^': 'Superscript',
    '_': 'Subscript',
    ' ': 'Space',
    '\t': 'Space',
    '\r': 'Space',
    '\n': 'Space',
    '\'': 'Prime',
    '%': 'Comment',
    '&': 'Entry',
    '#': 'Hash',
    '\u00A0': 'Space',
    '\u2019': 'Prime'
}, BaseMethods_js_1.default);
new sm.CharacterMap('mathchar0mi', ParseMethods_js_1.default.mathchar0mi, {
    alpha: '\u03B1',
    beta: '\u03B2',
    gamma: '\u03B3',
    delta: '\u03B4',
    epsilon: '\u03F5',
    zeta: '\u03B6',
    eta: '\u03B7',
    theta: '\u03B8',
    iota: '\u03B9',
    kappa: '\u03BA',
    lambda: '\u03BB',
    mu: '\u03BC',
    nu: '\u03BD',
    xi: '\u03BE',
    omicron: '\u03BF',
    pi: '\u03C0',
    rho: '\u03C1',
    sigma: '\u03C3',
    tau: '\u03C4',
    upsilon: '\u03C5',
    phi: '\u03D5',
    chi: '\u03C7',
    psi: '\u03C8',
    omega: '\u03C9',
    varepsilon: '\u03B5',
    vartheta: '\u03D1',
    varpi: '\u03D6',
    varrho: '\u03F1',
    varsigma: '\u03C2',
    varphi: '\u03C6',
    S: [
        '\u00A7',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    aleph: [
        '\u2135',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    hbar: [
        '\u210F',
        {
            variantForm: true
        }
    ],
    imath: '\u0131',
    jmath: '\u0237',
    ell: '\u2113',
    wp: [
        '\u2118',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    Re: [
        '\u211C',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    Im: [
        '\u2111',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    partial: [
        '\u2202',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    infty: [
        '\u221E',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    prime: [
        '\u2032',
        {
            variantForm: true
        }
    ],
    emptyset: [
        '\u2205',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    nabla: [
        '\u2207',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    top: [
        '\u22A4',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    bot: [
        '\u22A5',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    angle: [
        '\u2220',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    triangle: [
        '\u25B3',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    backslash: [
        '\u2216',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    forall: [
        '\u2200',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    exists: [
        '\u2203',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    neg: [
        '\u00AC',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    lnot: [
        '\u00AC',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    flat: [
        '\u266D',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    natural: [
        '\u266E',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    sharp: [
        '\u266F',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    clubsuit: [
        '\u2663',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    diamondsuit: [
        '\u2662',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    heartsuit: [
        '\u2661',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    spadesuit: [
        '\u2660',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ]
});
new sm.CharacterMap('mathchar0mo', ParseMethods_js_1.default.mathchar0mo, {
    surd: '\u221A',
    coprod: [
        '\u2210',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    bigvee: [
        '\u22C1',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    bigwedge: [
        '\u22C0',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    biguplus: [
        '\u2A04',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    bigcap: [
        '\u22C2',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    bigcup: [
        '\u22C3',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    'int': [
        '\u222B',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP
        }
    ],
    intop: [
        '\u222B',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true,
            movablelimits: true
        }
    ],
    iint: [
        '\u222C',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP
        }
    ],
    iiint: [
        '\u222D',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP
        }
    ],
    prod: [
        '\u220F',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    sum: [
        '\u2211',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    bigotimes: [
        '\u2A02',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    bigoplus: [
        '\u2A01',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    bigodot: [
        '\u2A00',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    oint: [
        '\u222E',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP
        }
    ],
    bigsqcup: [
        '\u2A06',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP,
            movesupsub: true
        }
    ],
    smallint: [
        '\u222B',
        {
            largeop: false
        }
    ],
    triangleleft: '\u25C3',
    triangleright: '\u25B9',
    bigtriangleup: '\u25B3',
    bigtriangledown: '\u25BD',
    wedge: '\u2227',
    land: '\u2227',
    vee: '\u2228',
    lor: '\u2228',
    cap: '\u2229',
    cup: '\u222A',
    ddagger: '\u2021',
    dagger: '\u2020',
    sqcap: '\u2293',
    sqcup: '\u2294',
    uplus: '\u228E',
    amalg: '\u2A3F',
    diamond: '\u22C4',
    bullet: '\u2219',
    wr: '\u2240',
    div: '\u00F7',
    divsymbol: '\u00F7',
    odot: [
        '\u2299',
        {
            largeop: false
        }
    ],
    oslash: [
        '\u2298',
        {
            largeop: false
        }
    ],
    otimes: [
        '\u2297',
        {
            largeop: false
        }
    ],
    ominus: [
        '\u2296',
        {
            largeop: false
        }
    ],
    oplus: [
        '\u2295',
        {
            largeop: false
        }
    ],
    mp: '\u2213',
    pm: '\u00B1',
    circ: '\u2218',
    bigcirc: '\u25EF',
    setminus: '\u2216',
    cdot: '\u22C5',
    ast: '\u2217',
    times: '\u00D7',
    star: '\u22C6',
    propto: '\u221D',
    sqsubseteq: '\u2291',
    sqsupseteq: '\u2292',
    parallel: '\u2225',
    mid: '\u2223',
    dashv: '\u22A3',
    vdash: '\u22A2',
    leq: '\u2264',
    le: '\u2264',
    geq: '\u2265',
    ge: '\u2265',
    lt: '\u003C',
    gt: '\u003E',
    succ: '\u227B',
    prec: '\u227A',
    approx: '\u2248',
    succeq: '\u2AB0',
    preceq: '\u2AAF',
    supset: '\u2283',
    subset: '\u2282',
    supseteq: '\u2287',
    subseteq: '\u2286',
    'in': '\u2208',
    ni: '\u220B',
    notin: '\u2209',
    owns: '\u220B',
    gg: '\u226B',
    ll: '\u226A',
    sim: '\u223C',
    simeq: '\u2243',
    perp: '\u22A5',
    equiv: '\u2261',
    asymp: '\u224D',
    smile: '\u2323',
    frown: '\u2322',
    ne: '\u2260',
    neq: '\u2260',
    cong: '\u2245',
    doteq: '\u2250',
    bowtie: '\u22C8',
    models: '\u22A8',
    notChar: '\u29F8',
    Leftrightarrow: '\u21D4',
    Leftarrow: '\u21D0',
    Rightarrow: '\u21D2',
    leftrightarrow: '\u2194',
    leftarrow: '\u2190',
    gets: '\u2190',
    rightarrow: '\u2192',
    to: [
        '\u2192',
        {
            accent: false
        }
    ],
    mapsto: '\u21A6',
    leftharpoonup: '\u21BC',
    leftharpoondown: '\u21BD',
    rightharpoonup: '\u21C0',
    rightharpoondown: '\u21C1',
    nearrow: '\u2197',
    searrow: '\u2198',
    nwarrow: '\u2196',
    swarrow: '\u2199',
    rightleftharpoons: '\u21CC',
    hookrightarrow: '\u21AA',
    hookleftarrow: '\u21A9',
    longleftarrow: '\u27F5',
    Longleftarrow: '\u27F8',
    longrightarrow: '\u27F6',
    Longrightarrow: '\u27F9',
    Longleftrightarrow: '\u27FA',
    longleftrightarrow: '\u27F7',
    longmapsto: '\u27FC',
    ldots: '\u2026',
    cdots: '\u22EF',
    vdots: '\u22EE',
    ddots: '\u22F1',
    dotsc: '\u2026',
    dotsb: '\u22EF',
    dotsm: '\u22EF',
    dotsi: '\u22EF',
    dotso: '\u2026',
    ldotp: [
        '\u002E',
        {
            texClass: MmlNode_js_1.TEXCLASS.PUNCT
        }
    ],
    cdotp: [
        '\u22C5',
        {
            texClass: MmlNode_js_1.TEXCLASS.PUNCT
        }
    ],
    colon: [
        '\u003A',
        {
            texClass: MmlNode_js_1.TEXCLASS.PUNCT
        }
    ]
});
new sm.CharacterMap('mathchar7', ParseMethods_js_1.default.mathchar7, {
    Gamma: '\u0393',
    Delta: '\u0394',
    Theta: '\u0398',
    Lambda: '\u039B',
    Xi: '\u039E',
    Pi: '\u03A0',
    Sigma: '\u03A3',
    Upsilon: '\u03A5',
    Phi: '\u03A6',
    Psi: '\u03A8',
    Omega: '\u03A9',
    '_': '\u005F',
    '#': '\u0023',
    '$': '\u0024',
    '%': '\u0025',
    '&': '\u0026',
    And: '\u0026'
});
new sm.DelimiterMap('delimiter', ParseMethods_js_1.default.delimiter, {
    '(': '(',
    ')': ')',
    '[': '[',
    ']': ']',
    '<': '\u27E8',
    '>': '\u27E9',
    '\\lt': '\u27E8',
    '\\gt': '\u27E9',
    '/': '/',
    '|': [
        '|',
        {
            texClass: MmlNode_js_1.TEXCLASS.ORD
        }
    ],
    '.': '',
    '\\\\': '\\',
    '\\lmoustache': '\u23B0',
    '\\rmoustache': '\u23B1',
    '\\lgroup': '\u27EE',
    '\\rgroup': '\u27EF',
    '\\arrowvert': '\u23D0',
    '\\Arrowvert': '\u2016',
    '\\bracevert': '\u23AA',
    '\\Vert': [
        '\u2016',
        {
            texClass: MmlNode_js_1.TEXCLASS.ORD
        }
    ],
    '\\|': [
        '\u2016',
        {
            texClass: MmlNode_js_1.TEXCLASS.ORD
        }
    ],
    '\\vert': [
        '|',
        {
            texClass: MmlNode_js_1.TEXCLASS.ORD
        }
    ],
    '\\uparrow': '\u2191',
    '\\downarrow': '\u2193',
    '\\updownarrow': '\u2195',
    '\\Uparrow': '\u21D1',
    '\\Downarrow': '\u21D3',
    '\\Updownarrow': '\u21D5',
    '\\backslash': '\\',
    '\\rangle': '\u27E9',
    '\\langle': '\u27E8',
    '\\rbrace': '}',
    '\\lbrace': '{',
    '\\}': '}',
    '\\{': '{',
    '\\rceil': '\u2309',
    '\\lceil': '\u2308',
    '\\rfloor': '\u230B',
    '\\lfloor': '\u230A',
    '\\lbrack': '[',
    '\\rbrack': ']'
});
new sm.CommandMap('macros', {
    displaystyle: [
        'SetStyle',
        'D',
        true,
        0
    ],
    textstyle: [
        'SetStyle',
        'T',
        false,
        0
    ],
    scriptstyle: [
        'SetStyle',
        'S',
        false,
        1
    ],
    scriptscriptstyle: [
        'SetStyle',
        'SS',
        false,
        2
    ],
    rm: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.NORMAL
    ],
    mit: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.ITALIC
    ],
    oldstyle: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.OLDSTYLE
    ],
    cal: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.CALLIGRAPHIC
    ],
    it: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.MATHITALIC
    ],
    bf: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.BOLD
    ],
    bbFont: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.DOUBLESTRUCK
    ],
    scr: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.SCRIPT
    ],
    frak: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.FRAKTUR
    ],
    sf: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.SANSSERIF
    ],
    tt: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.MONOSPACE
    ],
    mathrm: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.NORMAL
    ],
    mathup: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.NORMAL
    ],
    mathnormal: [
        'MathFont',
        ''
    ],
    mathbf: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLD
    ],
    mathbfup: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLD
    ],
    mathit: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.MATHITALIC
    ],
    mathbfit: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDITALIC
    ],
    mathbb: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.DOUBLESTRUCK
    ],
    Bbb: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.DOUBLESTRUCK
    ],
    mathfrak: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.FRAKTUR
    ],
    mathbffrak: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDFRAKTUR
    ],
    mathscr: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.SCRIPT
    ],
    mathbfscr: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDSCRIPT
    ],
    mathsf: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.SANSSERIF
    ],
    mathsfup: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.SANSSERIF
    ],
    mathbfsf: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDSANSSERIF
    ],
    mathbfsfup: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDSANSSERIF
    ],
    mathsfit: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.SANSSERIFITALIC
    ],
    mathbfsfit: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.SANSSERIFBOLDITALIC
    ],
    mathtt: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.MONOSPACE
    ],
    mathcal: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.CALLIGRAPHIC
    ],
    mathbfcal: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDCALLIGRAPHIC
    ],
    symrm: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.NORMAL
    ],
    symup: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.NORMAL
    ],
    symnormal: [
        'MathFont',
        ''
    ],
    symbf: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLD
    ],
    symbfup: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLD
    ],
    symit: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.ITALIC
    ],
    symbfit: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDITALIC
    ],
    symbb: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.DOUBLESTRUCK
    ],
    symfrak: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.FRAKTUR
    ],
    symbffrak: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDFRAKTUR
    ],
    symscr: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.SCRIPT
    ],
    symbfscr: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDSCRIPT
    ],
    symsf: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.SANSSERIF
    ],
    symsfup: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.SANSSERIF
    ],
    symbfsf: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDSANSSERIF
    ],
    symbfsfup: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDSANSSERIF
    ],
    symsfit: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.SANSSERIFITALIC
    ],
    symbfsfit: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.SANSSERIFBOLDITALIC
    ],
    symtt: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.MONOSPACE
    ],
    symcal: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.CALLIGRAPHIC
    ],
    symbfcal: [
        'MathFont',
        TexConstants_js_1.TexConstant.Variant.BOLDCALLIGRAPHIC
    ],
    textrm: [
        'HBox',
        null,
        TexConstants_js_1.TexConstant.Variant.NORMAL
    ],
    textup: [
        'HBox',
        null,
        TexConstants_js_1.TexConstant.Variant.NORMAL
    ],
    textnormal: [
        'HBox'
    ],
    textit: [
        'HBox',
        null,
        TexConstants_js_1.TexConstant.Variant.ITALIC
    ],
    textbf: [
        'HBox',
        null,
        TexConstants_js_1.TexConstant.Variant.BOLD
    ],
    textsf: [
        'HBox',
        null,
        TexConstants_js_1.TexConstant.Variant.SANSSERIF
    ],
    texttt: [
        'HBox',
        null,
        TexConstants_js_1.TexConstant.Variant.MONOSPACE
    ],
    tiny: [
        'SetSize',
        0.5
    ],
    Tiny: [
        'SetSize',
        0.6
    ],
    scriptsize: [
        'SetSize',
        0.7
    ],
    small: [
        'SetSize',
        0.85
    ],
    normalsize: [
        'SetSize',
        1
    ],
    large: [
        'SetSize',
        1.2
    ],
    Large: [
        'SetSize',
        1.44
    ],
    LARGE: [
        'SetSize',
        1.73
    ],
    huge: [
        'SetSize',
        2.07
    ],
    Huge: [
        'SetSize',
        2.49
    ],
    arcsin: 'NamedFn',
    arccos: 'NamedFn',
    arctan: 'NamedFn',
    arg: 'NamedFn',
    cos: 'NamedFn',
    cosh: 'NamedFn',
    cot: 'NamedFn',
    coth: 'NamedFn',
    csc: 'NamedFn',
    deg: 'NamedFn',
    det: 'NamedOp',
    dim: 'NamedFn',
    exp: 'NamedFn',
    gcd: 'NamedOp',
    hom: 'NamedFn',
    inf: 'NamedOp',
    ker: 'NamedFn',
    lg: 'NamedFn',
    lim: 'NamedOp',
    liminf: [
        'NamedOp',
        'lim&thinsp;inf'
    ],
    limsup: [
        'NamedOp',
        'lim&thinsp;sup'
    ],
    ln: 'NamedFn',
    log: 'NamedFn',
    max: 'NamedOp',
    min: 'NamedOp',
    Pr: 'NamedOp',
    sec: 'NamedFn',
    sin: 'NamedFn',
    sinh: 'NamedFn',
    sup: 'NamedOp',
    tan: 'NamedFn',
    tanh: 'NamedFn',
    limits: [
        'Limits',
        1
    ],
    nolimits: [
        'Limits',
        0
    ],
    overline: [
        'UnderOver',
        '2015'
    ],
    underline: [
        'UnderOver',
        '2015'
    ],
    overbrace: [
        'UnderOver',
        '23DE',
        1
    ],
    underbrace: [
        'UnderOver',
        '23DF',
        1
    ],
    overparen: [
        'UnderOver',
        '23DC'
    ],
    underparen: [
        'UnderOver',
        '23DD'
    ],
    overrightarrow: [
        'UnderOver',
        '2192'
    ],
    underrightarrow: [
        'UnderOver',
        '2192'
    ],
    overleftarrow: [
        'UnderOver',
        '2190'
    ],
    underleftarrow: [
        'UnderOver',
        '2190'
    ],
    overleftrightarrow: [
        'UnderOver',
        '2194'
    ],
    underleftrightarrow: [
        'UnderOver',
        '2194'
    ],
    overset: 'Overset',
    underset: 'Underset',
    stackrel: [
        'Macro',
        '\\mathrel{\\mathop{#2}\\limits^{#1}}',
        2
    ],
    over: 'Over',
    overwithdelims: 'Over',
    atop: 'Over',
    atopwithdelims: 'Over',
    above: 'Over',
    abovewithdelims: 'Over',
    brace: [
        'Over',
        '{',
        '}'
    ],
    brack: [
        'Over',
        '[',
        ']'
    ],
    choose: [
        'Over',
        '(',
        ')'
    ],
    frac: 'Frac',
    sqrt: 'Sqrt',
    root: 'Root',
    uproot: [
        'MoveRoot',
        'upRoot'
    ],
    leftroot: [
        'MoveRoot',
        'leftRoot'
    ],
    left: 'LeftRight',
    right: 'LeftRight',
    middle: 'LeftRight',
    llap: 'Lap',
    rlap: 'Lap',
    raise: 'RaiseLower',
    lower: 'RaiseLower',
    moveleft: 'MoveLeftRight',
    moveright: 'MoveLeftRight',
    ',': [
        'Spacer',
        lengths_js_1.MATHSPACE.thinmathspace
    ],
    ':': [
        'Spacer',
        lengths_js_1.MATHSPACE.mediummathspace
    ],
    '>': [
        'Spacer',
        lengths_js_1.MATHSPACE.mediummathspace
    ],
    ';': [
        'Spacer',
        lengths_js_1.MATHSPACE.thickmathspace
    ],
    '!': [
        'Spacer',
        lengths_js_1.MATHSPACE.negativethinmathspace
    ],
    enspace: [
        'Spacer',
        0.5
    ],
    quad: [
        'Spacer',
        1
    ],
    qquad: [
        'Spacer',
        2
    ],
    thinspace: [
        'Spacer',
        lengths_js_1.MATHSPACE.thinmathspace
    ],
    negthinspace: [
        'Spacer',
        lengths_js_1.MATHSPACE.negativethinmathspace
    ],
    hskip: 'Hskip',
    hspace: 'Hskip',
    kern: 'Hskip',
    mskip: 'Hskip',
    mspace: 'Hskip',
    mkern: 'Hskip',
    rule: 'rule',
    Rule: [
        'Rule'
    ],
    Space: [
        'Rule',
        'blank'
    ],
    big: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.ORD,
        0.85
    ],
    Big: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.ORD,
        1.15
    ],
    bigg: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.ORD,
        1.45
    ],
    Bigg: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.ORD,
        1.75
    ],
    bigl: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.OPEN,
        0.85
    ],
    Bigl: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.OPEN,
        1.15
    ],
    biggl: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.OPEN,
        1.45
    ],
    Biggl: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.OPEN,
        1.75
    ],
    bigr: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.CLOSE,
        0.85
    ],
    Bigr: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.CLOSE,
        1.15
    ],
    biggr: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.CLOSE,
        1.45
    ],
    Biggr: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.CLOSE,
        1.75
    ],
    bigm: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.REL,
        0.85
    ],
    Bigm: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.REL,
        1.15
    ],
    biggm: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.REL,
        1.45
    ],
    Biggm: [
        'MakeBig',
        MmlNode_js_1.TEXCLASS.REL,
        1.75
    ],
    mathord: [
        'TeXAtom',
        MmlNode_js_1.TEXCLASS.ORD
    ],
    mathop: [
        'TeXAtom',
        MmlNode_js_1.TEXCLASS.OP
    ],
    mathopen: [
        'TeXAtom',
        MmlNode_js_1.TEXCLASS.OPEN
    ],
    mathclose: [
        'TeXAtom',
        MmlNode_js_1.TEXCLASS.CLOSE
    ],
    mathbin: [
        'TeXAtom',
        MmlNode_js_1.TEXCLASS.BIN
    ],
    mathrel: [
        'TeXAtom',
        MmlNode_js_1.TEXCLASS.REL
    ],
    mathpunct: [
        'TeXAtom',
        MmlNode_js_1.TEXCLASS.PUNCT
    ],
    mathinner: [
        'TeXAtom',
        MmlNode_js_1.TEXCLASS.INNER
    ],
    vcenter: [
        'TeXAtom',
        MmlNode_js_1.TEXCLASS.VCENTER
    ],
    buildrel: 'BuildRel',
    hbox: [
        'HBox',
        0
    ],
    text: 'HBox',
    mbox: [
        'HBox',
        0
    ],
    fbox: 'FBox',
    strut: 'Strut',
    mathstrut: [
        'Macro',
        '\\vphantom{(}'
    ],
    phantom: 'Phantom',
    vphantom: [
        'Phantom',
        1,
        0
    ],
    hphantom: [
        'Phantom',
        0,
        1
    ],
    smash: 'Smash',
    acute: [
        'Accent',
        '00B4'
    ],
    grave: [
        'Accent',
        '0060'
    ],
    ddot: [
        'Accent',
        '00A8'
    ],
    tilde: [
        'Accent',
        '007E'
    ],
    bar: [
        'Accent',
        '00AF'
    ],
    breve: [
        'Accent',
        '02D8'
    ],
    check: [
        'Accent',
        '02C7'
    ],
    hat: [
        'Accent',
        '005E'
    ],
    vec: [
        'Accent',
        '2192'
    ],
    dot: [
        'Accent',
        '02D9'
    ],
    widetilde: [
        'Accent',
        '007E',
        1
    ],
    widehat: [
        'Accent',
        '005E',
        1
    ],
    matrix: 'Matrix',
    array: 'Matrix',
    pmatrix: [
        'Matrix',
        '(',
        ')'
    ],
    cases: [
        'Matrix',
        '{',
        '',
        'left left',
        null,
        '.1em',
        null,
        true
    ],
    eqalign: [
        'Matrix',
        null,
        null,
        'right left',
        lengths_js_1.em(lengths_js_1.MATHSPACE.thickmathspace),
        '.5em',
        'D'
    ],
    displaylines: [
        'Matrix',
        null,
        null,
        'center',
        null,
        '.5em',
        'D'
    ],
    cr: 'Cr',
    '\\': 'CrLaTeX',
    newline: [
        'CrLaTeX',
        true
    ],
    hline: [
        'HLine',
        'solid'
    ],
    hdashline: [
        'HLine',
        'dashed'
    ],
    eqalignno: [
        'Matrix',
        null,
        null,
        'right left',
        lengths_js_1.em(lengths_js_1.MATHSPACE.thickmathspace),
        '.5em',
        'D',
        null,
        'right'
    ],
    leqalignno: [
        'Matrix',
        null,
        null,
        'right left',
        lengths_js_1.em(lengths_js_1.MATHSPACE.thickmathspace),
        '.5em',
        'D',
        null,
        'left'
    ],
    hfill: 'HFill',
    hfil: 'HFill',
    hfilll: 'HFill',
    bmod: [
        'Macro',
        "\\mmlToken{mo}[lspace=\"thickmathspace\" rspace=\"thickmathspace\"]{mod}"
    ],
    pmod: [
        'Macro',
        '\\pod{\\mmlToken{mi}{mod}\\kern 6mu #1}',
        1
    ],
    mod: [
        'Macro',
        "\\mathchoice{\\kern18mu}{\\kern12mu}{\\kern12mu}{\\kern12mu}\\mmlToken{mi}{mod}\\,\\,#1",
        1
    ],
    pod: [
        'Macro',
        "\\mathchoice{\\kern18mu}{\\kern8mu}{\\kern8mu}{\\kern8mu}(#1)",
        1
    ],
    iff: [
        'Macro',
        '\\;\\Longleftrightarrow\\;'
    ],
    skew: [
        'Macro',
        '{{#2{#3\\mkern#1mu}\\mkern-#1mu}{}}',
        3
    ],
    pmb: [
        'Macro',
        '\\rlap{#1}\\kern1px{#1}',
        1
    ],
    TeX: [
        'Macro',
        'T\\kern-.14em\\lower.5ex{E}\\kern-.115em X'
    ],
    LaTeX: [
        'Macro',
        "L\\kern-.325em\\raise.21em{\\scriptstyle{A}}\\kern-.17em\\TeX"
    ],
    ' ': [
        'Macro',
        '\\text{ }'
    ],
    not: 'Not',
    dots: 'Dots',
    space: 'Tilde',
    '\u00A0': 'Tilde',
    begin: 'BeginEnd',
    end: 'BeginEnd',
    label: 'HandleLabel',
    ref: 'HandleRef',
    nonumber: 'HandleNoTag',
    mathchoice: 'MathChoice',
    mmlToken: 'MmlToken'
}, BaseMethods_js_1.default);
new sm.EnvironmentMap('environment', ParseMethods_js_1.default.environment, {
    array: [
        'AlignedArray'
    ],
    equation: [
        'Equation',
        null,
        true
    ],
    'equation*': [
        'Equation',
        null,
        false
    ],
    eqnarray: [
        'EqnArray',
        null,
        true,
        true,
        'rcl',
        '0 ' + lengths_js_1.em(lengths_js_1.MATHSPACE.thickmathspace),
        '.5em'
    ]
}, BaseMethods_js_1.default);
new sm.CharacterMap('not_remap', null, {
    '\u2190': '\u219A',
    '\u2192': '\u219B',
    '\u2194': '\u21AE',
    '\u21D0': '\u21CD',
    '\u21D2': '\u21CF',
    '\u21D4': '\u21CE',
    '\u2208': '\u2209',
    '\u220B': '\u220C',
    '\u2223': '\u2224',
    '\u2225': '\u2226',
    '\u223C': '\u2241',
    '\u007E': '\u2241',
    '\u2243': '\u2244',
    '\u2245': '\u2247',
    '\u2248': '\u2249',
    '\u224D': '\u226D',
    '\u003D': '\u2260',
    '\u2261': '\u2262',
    '\u003C': '\u226E',
    '\u003E': '\u226F',
    '\u2264': '\u2270',
    '\u2265': '\u2271',
    '\u2272': '\u2274',
    '\u2273': '\u2275',
    '\u2276': '\u2278',
    '\u2277': '\u2279',
    '\u227A': '\u2280',
    '\u227B': '\u2281',
    '\u2282': '\u2284',
    '\u2283': '\u2285',
    '\u2286': '\u2288',
    '\u2287': '\u2289',
    '\u22A2': '\u22AC',
    '\u22A8': '\u22AD',
    '\u22A9': '\u22AE',
    '\u22AB': '\u22AF',
    '\u227C': '\u22E0',
    '\u227D': '\u22E1',
    '\u2291': '\u22E2',
    '\u2292': '\u22E3',
    '\u22B2': '\u22EA',
    '\u22B3': '\u22EB',
    '\u22B4': '\u22EC',
    '\u22B5': '\u22ED',
    '\u2203': '\u2204'
});

},{"../SymbolMap.js":"19zvT","../TexConstants.js":"1hJzZ","./BaseMethods.js":"1F5Sh","../ParseMethods.js":"2Nz4D","../../../core/MmlTree/MmlNode.js":"5Ogy3","../../../util/lengths.js":"5EoCW"}],"1hJzZ":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.TexConstant = void 0;
var TexConstant;
(function(TexConstant1) {
    TexConstant1.Variant = {
        NORMAL: 'normal',
        BOLD: 'bold',
        ITALIC: 'italic',
        BOLDITALIC: 'bold-italic',
        DOUBLESTRUCK: 'double-struck',
        FRAKTUR: 'fraktur',
        BOLDFRAKTUR: 'bold-fraktur',
        SCRIPT: 'script',
        BOLDSCRIPT: 'bold-script',
        SANSSERIF: 'sans-serif',
        BOLDSANSSERIF: 'bold-sans-serif',
        SANSSERIFITALIC: 'sans-serif-italic',
        SANSSERIFBOLDITALIC: 'sans-serif-bold-italic',
        MONOSPACE: 'monospace',
        INITIAL: 'inital',
        TAILED: 'tailed',
        LOOPED: 'looped',
        STRETCHED: 'stretched',
        CALLIGRAPHIC: '-tex-calligraphic',
        BOLDCALLIGRAPHIC: '-tex-bold-calligraphic',
        OLDSTYLE: '-tex-oldstyle',
        BOLDOLDSTYLE: '-tex-bold-oldstyle',
        MATHITALIC: '-tex-mathit'
    };
    TexConstant1.Form = {
        PREFIX: 'prefix',
        INFIX: 'infix',
        POSTFIX: 'postfix'
    };
    TexConstant1.LineBreak = {
        AUTO: 'auto',
        NEWLINE: 'newline',
        NOBREAK: 'nobreak',
        GOODBREAK: 'goodbreak',
        BADBREAK: 'badbreak'
    };
    TexConstant1.LineBreakStyle = {
        BEFORE: 'before',
        AFTER: 'after',
        DUPLICATE: 'duplicate',
        INFIXLINBREAKSTYLE: 'infixlinebreakstyle'
    };
    TexConstant1.IndentAlign = {
        LEFT: 'left',
        CENTER: 'center',
        RIGHT: 'right',
        AUTO: 'auto',
        ID: 'id',
        INDENTALIGN: 'indentalign'
    };
    TexConstant1.IndentShift = {
        INDENTSHIFT: 'indentshift'
    };
    TexConstant1.LineThickness = {
        THIN: 'thin',
        MEDIUM: 'medium',
        THICK: 'thick'
    };
    TexConstant1.Notation = {
        LONGDIV: 'longdiv',
        ACTUARIAL: 'actuarial',
        PHASORANGLE: 'phasorangle',
        RADICAL: 'radical',
        BOX: 'box',
        ROUNDEDBOX: 'roundedbox',
        CIRCLE: 'circle',
        LEFT: 'left',
        RIGHT: 'right',
        TOP: 'top',
        BOTTOM: 'bottom',
        UPDIAGONALSTRIKE: 'updiagonalstrike',
        DOWNDIAGONALSTRIKE: 'downdiagonalstrike',
        VERTICALSTRIKE: 'verticalstrike',
        HORIZONTALSTRIKE: 'horizontalstrike',
        NORTHEASTARROW: 'northeastarrow',
        MADRUWB: 'madruwb',
        UPDIAGONALARROW: 'updiagonalarrow'
    };
    TexConstant1.Align = {
        TOP: 'top',
        BOTTOM: 'bottom',
        CENTER: 'center',
        BASELINE: 'baseline',
        AXIS: 'axis',
        LEFT: 'left',
        RIGHT: 'right'
    };
    TexConstant1.Lines = {
        NONE: 'none',
        SOLID: 'solid',
        DASHED: 'dashed'
    };
    TexConstant1.Side = {
        LEFT: 'left',
        RIGHT: 'right',
        LEFTOVERLAP: 'leftoverlap',
        RIGHTOVERLAP: 'rightoverlap'
    };
    TexConstant1.Width = {
        AUTO: 'auto',
        FIT: 'fit'
    };
    TexConstant1.Actiontype = {
        TOGGLE: 'toggle',
        STATUSLINE: 'statusline',
        TOOLTIP: 'tooltip',
        INPUT: 'input'
    };
    TexConstant1.Overflow = {
        LINBREAK: 'linebreak',
        SCROLL: 'scroll',
        ELIDE: 'elide',
        TRUNCATE: 'truncate',
        SCALE: 'scale'
    };
    TexConstant1.Unit = {
        EM: 'em',
        EX: 'ex',
        PX: 'px',
        IN: 'in',
        CM: 'cm',
        MM: 'mm',
        PT: 'pt',
        PC: 'pc'
    };
})(TexConstant = exports.TexConstant || (exports.TexConstant = {
}));

},{}],"1F5Sh":[function(require,module,exports) {
"use strict";
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
var sitem = require("./BaseItems.js");
var NodeUtil_js_1 = require("../NodeUtil.js");
var TexError_js_1 = require("../TexError.js");
var TexParser_js_1 = require("../TexParser.js");
var TexConstants_js_1 = require("../TexConstants.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var Tags_js_1 = require("../Tags.js");
var lengths_js_1 = require("../../../util/lengths.js");
var Entities_js_1 = require("../../../util/Entities.js");
var BaseMethods = {
};
var P_HEIGHT = 1.2 / 0.85;
var MmlTokenAllow = {
    fontfamily: 1,
    fontsize: 1,
    fontweight: 1,
    fontstyle: 1,
    color: 1,
    background: 1,
    id: 1,
    'class': 1,
    href: 1,
    style: 1
};
BaseMethods.Open = function(parser, _c) {
    parser.Push(parser.itemFactory.create('open'));
};
BaseMethods.Close = function(parser, _c) {
    parser.Push(parser.itemFactory.create('close'));
};
BaseMethods.Tilde = function(parser, _c) {
    parser.Push(parser.create('token', 'mtext', {
    }, Entities_js_1.entities.nbsp));
};
BaseMethods.Space = function(_parser, _c) {
};
BaseMethods.Superscript = function(parser, _c) {
    var _a;
    if (parser.GetNext().match(/\d/)) parser.string = parser.string.substr(0, parser.i + 1) + ' ' + parser.string.substr(parser.i + 1);
    var primes;
    var base;
    var top = parser.stack.Top();
    if (top.isKind('prime')) {
        _a = __read(top.Peek(2), 2), base = _a[0], primes = _a[1];
        parser.stack.Pop();
    } else {
        base = parser.stack.Prev();
        if (!base) base = parser.create('token', 'mi', {
        }, '');
    }
    var movesupsub = NodeUtil_js_1.default.getProperty(base, 'movesupsub');
    var position = NodeUtil_js_1.default.isType(base, 'msubsup') ? base.sup : base.over;
    if (NodeUtil_js_1.default.isType(base, 'msubsup') && !NodeUtil_js_1.default.isType(base, 'msup') && NodeUtil_js_1.default.getChildAt(base, base.sup) || NodeUtil_js_1.default.isType(base, 'munderover') && !NodeUtil_js_1.default.isType(base, 'mover') && NodeUtil_js_1.default.getChildAt(base, base.over) && !NodeUtil_js_1.default.getProperty(base, 'subsupOK')) throw new TexError_js_1.default('DoubleExponent', 'Double exponent: use braces to clarify');
    if (!NodeUtil_js_1.default.isType(base, 'msubsup') || NodeUtil_js_1.default.isType(base, 'msup')) {
        if (movesupsub) {
            if (!NodeUtil_js_1.default.isType(base, 'munderover') || NodeUtil_js_1.default.isType(base, 'mover') || NodeUtil_js_1.default.getChildAt(base, base.over)) base = parser.create('node', 'munderover', [
                base
            ], {
                movesupsub: true
            });
            position = base.over;
        } else {
            base = parser.create('node', 'msubsup', [
                base
            ]);
            position = base.sup;
        }
    }
    parser.Push(parser.itemFactory.create('subsup', base).setProperties({
        position: position,
        primes: primes,
        movesupsub: movesupsub
    }));
};
BaseMethods.Subscript = function(parser, _c) {
    var _a;
    if (parser.GetNext().match(/\d/)) parser.string = parser.string.substr(0, parser.i + 1) + ' ' + parser.string.substr(parser.i + 1);
    var primes, base;
    var top = parser.stack.Top();
    if (top.isKind('prime')) {
        _a = __read(top.Peek(2), 2), base = _a[0], primes = _a[1];
        parser.stack.Pop();
    } else {
        base = parser.stack.Prev();
        if (!base) base = parser.create('token', 'mi', {
        }, '');
    }
    var movesupsub = NodeUtil_js_1.default.getProperty(base, 'movesupsub');
    var position = NodeUtil_js_1.default.isType(base, 'msubsup') ? base.sub : base.under;
    if (NodeUtil_js_1.default.isType(base, 'msubsup') && !NodeUtil_js_1.default.isType(base, 'msup') && NodeUtil_js_1.default.getChildAt(base, base.sub) || NodeUtil_js_1.default.isType(base, 'munderover') && !NodeUtil_js_1.default.isType(base, 'mover') && NodeUtil_js_1.default.getChildAt(base, base.under) && !NodeUtil_js_1.default.getProperty(base, 'subsupOK')) throw new TexError_js_1.default('DoubleSubscripts', 'Double subscripts: use braces to clarify');
    if (!NodeUtil_js_1.default.isType(base, 'msubsup') || NodeUtil_js_1.default.isType(base, 'msup')) {
        if (movesupsub) {
            if (!NodeUtil_js_1.default.isType(base, 'munderover') || NodeUtil_js_1.default.isType(base, 'mover') || NodeUtil_js_1.default.getChildAt(base, base.under)) base = parser.create('node', 'munderover', [
                base
            ], {
                movesupsub: true
            });
            position = base.under;
        } else {
            base = parser.create('node', 'msubsup', [
                base
            ]);
            position = base.sub;
        }
    }
    parser.Push(parser.itemFactory.create('subsup', base).setProperties({
        position: position,
        primes: primes,
        movesupsub: movesupsub
    }));
};
BaseMethods.Prime = function(parser, c) {
    var base = parser.stack.Prev();
    if (!base) base = parser.create('node', 'mi');
    if (NodeUtil_js_1.default.isType(base, 'msubsup') && !NodeUtil_js_1.default.isType(base, 'msup') && NodeUtil_js_1.default.getChildAt(base, base.sup)) throw new TexError_js_1.default('DoubleExponentPrime', 'Prime causes double exponent: use braces to clarify');
    var sup = '';
    parser.i--;
    do {
        sup += Entities_js_1.entities.prime;
        parser.i++, c = parser.GetNext();
    }while (c === '\'' || c === Entities_js_1.entities.rsquo)
    sup = [
        '',
        '\u2032',
        '\u2033',
        '\u2034',
        '\u2057'
    ][sup.length] || sup;
    var node = parser.create('token', 'mo', {
        variantForm: true
    }, sup);
    parser.Push(parser.itemFactory.create('prime', base, node));
};
BaseMethods.Comment = function(parser, _c) {
    while(parser.i < parser.string.length && parser.string.charAt(parser.i) !== '\n')parser.i++;
};
BaseMethods.Hash = function(_parser, _c) {
    throw new TexError_js_1.default('CantUseHash1', 'You can\'t use \'macro parameter character #\' in math mode');
};
BaseMethods.MathFont = function(parser, name, variant) {
    var text = parser.GetArgument(name);
    var mml = new TexParser_js_1.default(text, __assign(__assign({
    }, parser.stack.env), {
        font: variant,
        multiLetterIdentifiers: true
    }), parser.configuration).mml();
    if (mml.isKind('inferredMrow')) mml = parser.create('node', 'mrow', mml.childNodes);
    parser.Push(mml);
};
BaseMethods.SetFont = function(parser, _name, font) {
    parser.stack.env['font'] = font;
};
BaseMethods.SetStyle = function(parser, _name, texStyle, style, level) {
    parser.stack.env['style'] = texStyle;
    parser.stack.env['level'] = level;
    parser.Push(parser.itemFactory.create('style').setProperty('styles', {
        displaystyle: style,
        scriptlevel: level
    }));
};
BaseMethods.SetSize = function(parser, _name, size) {
    parser.stack.env['size'] = size;
    parser.Push(parser.itemFactory.create('style').setProperty('styles', {
        mathsize: lengths_js_1.em(size)
    }));
};
BaseMethods.Spacer = function(parser, _name, space) {
    var node = parser.create('node', 'mspace', [], {
        width: lengths_js_1.em(space)
    });
    var style = parser.create('node', 'mstyle', [
        node
    ], {
        scriptlevel: 0
    });
    parser.Push(style);
};
BaseMethods.LeftRight = function(parser, name) {
    var first = name.substr(1);
    parser.Push(parser.itemFactory.create(first, parser.GetDelimiter(name), parser.stack.env.color));
};
BaseMethods.NamedFn = function(parser, name, id) {
    if (!id) id = name.substr(1);
    var mml = parser.create('token', 'mi', {
        texClass: MmlNode_js_1.TEXCLASS.OP
    }, id);
    parser.Push(parser.itemFactory.create('fn', mml));
};
BaseMethods.NamedOp = function(parser, name, id) {
    if (!id) id = name.substr(1);
    id = id.replace(/&thinsp;/, '\u2006');
    var mml = parser.create('token', 'mo', {
        movablelimits: true,
        movesupsub: true,
        form: TexConstants_js_1.TexConstant.Form.PREFIX,
        texClass: MmlNode_js_1.TEXCLASS.OP
    }, id);
    parser.Push(mml);
};
BaseMethods.Limits = function(parser, _name, limits) {
    var op = parser.stack.Prev(true);
    if (!op || NodeUtil_js_1.default.getTexClass(NodeUtil_js_1.default.getCoreMO(op)) !== MmlNode_js_1.TEXCLASS.OP && NodeUtil_js_1.default.getProperty(op, 'movesupsub') == null) throw new TexError_js_1.default('MisplacedLimits', '%1 is allowed only on operators', parser.currentCS);
    var top = parser.stack.Top();
    var node;
    if (NodeUtil_js_1.default.isType(op, 'munderover') && !limits) {
        node = parser.create('node', 'msubsup');
        NodeUtil_js_1.default.copyChildren(op, node);
        op = top.Last = node;
    } else if (NodeUtil_js_1.default.isType(op, 'msubsup') && limits) {
        node = parser.create('node', 'munderover');
        NodeUtil_js_1.default.copyChildren(op, node);
        op = top.Last = node;
    }
    NodeUtil_js_1.default.setProperty(op, 'movesupsub', limits ? true : false);
    NodeUtil_js_1.default.setProperties(NodeUtil_js_1.default.getCoreMO(op), {
        'movablelimits': false
    });
    if (NodeUtil_js_1.default.getAttribute(op, 'movablelimits') || NodeUtil_js_1.default.getProperty(op, 'movablelimits')) NodeUtil_js_1.default.setProperties(op, {
        'movablelimits': false
    });
};
BaseMethods.Over = function(parser, name, open, close) {
    var mml = parser.itemFactory.create('over').setProperty('name', parser.currentCS);
    if (open || close) {
        mml.setProperty('open', open);
        mml.setProperty('close', close);
    } else if (name.match(/withdelims$/)) {
        mml.setProperty('open', parser.GetDelimiter(name));
        mml.setProperty('close', parser.GetDelimiter(name));
    }
    if (name.match(/^\\above/)) mml.setProperty('thickness', parser.GetDimen(name));
    else if (name.match(/^\\atop/) || open || close) mml.setProperty('thickness', 0);
    parser.Push(mml);
};
BaseMethods.Frac = function(parser, name) {
    var num = parser.ParseArg(name);
    var den = parser.ParseArg(name);
    var node = parser.create('node', 'mfrac', [
        num,
        den
    ]);
    parser.Push(node);
};
BaseMethods.Sqrt = function(parser, name) {
    var n = parser.GetBrackets(name);
    var arg = parser.GetArgument(name);
    if (arg === '\\frac') arg += '{' + parser.GetArgument(arg) + '}{' + parser.GetArgument(arg) + '}';
    var mml = new TexParser_js_1.default(arg, parser.stack.env, parser.configuration).mml();
    if (!n) mml = parser.create('node', 'msqrt', [
        mml
    ]);
    else mml = parser.create('node', 'mroot', [
        mml,
        parseRoot(parser, n)
    ]);
    parser.Push(mml);
};
function parseRoot(parser, n) {
    var env = parser.stack.env;
    var inRoot = env['inRoot'];
    env['inRoot'] = true;
    var newParser = new TexParser_js_1.default(n, env, parser.configuration);
    var node = newParser.mml();
    var global = newParser.stack.global;
    if (global['leftRoot'] || global['upRoot']) {
        var def = {
        };
        if (global['leftRoot']) def['width'] = global['leftRoot'];
        if (global['upRoot']) {
            def['voffset'] = global['upRoot'];
            def['height'] = global['upRoot'];
        }
        node = parser.create('node', 'mpadded', [
            node
        ], def);
    }
    env['inRoot'] = inRoot;
    return node;
}
BaseMethods.Root = function(parser, name) {
    var n = parser.GetUpTo(name, '\\of');
    var arg = parser.ParseArg(name);
    var node = parser.create('node', 'mroot', [
        arg,
        parseRoot(parser, n)
    ]);
    parser.Push(node);
};
BaseMethods.MoveRoot = function(parser, name, id) {
    if (!parser.stack.env['inRoot']) throw new TexError_js_1.default('MisplacedMoveRoot', '%1 can appear only within a root', parser.currentCS);
    if (parser.stack.global[id]) throw new TexError_js_1.default('MultipleMoveRoot', 'Multiple use of %1', parser.currentCS);
    var n = parser.GetArgument(name);
    if (!n.match(/-?[0-9]+/)) throw new TexError_js_1.default('IntegerArg', 'The argument to %1 must be an integer', parser.currentCS);
    n = parseInt(n, 10) / 15 + 'em';
    if (n.substr(0, 1) !== '-') n = '+' + n;
    parser.stack.global[id] = n;
};
BaseMethods.Accent = function(parser, name, accent, stretchy) {
    var c = parser.ParseArg(name);
    var def = __assign(__assign({
    }, ParseUtil_js_1.default.getFontDef(parser)), {
        accent: true,
        mathaccent: true
    });
    var entity = NodeUtil_js_1.default.createEntity(accent);
    var moNode = parser.create('token', 'mo', def, entity);
    var mml = moNode;
    NodeUtil_js_1.default.setAttribute(mml, 'stretchy', stretchy ? true : false);
    var mo = NodeUtil_js_1.default.isEmbellished(c) ? NodeUtil_js_1.default.getCoreMO(c) : c;
    if (NodeUtil_js_1.default.isType(mo, 'mo')) NodeUtil_js_1.default.setProperties(mo, {
        'movablelimits': false
    });
    var muoNode = parser.create('node', 'munderover');
    NodeUtil_js_1.default.setChild(muoNode, 0, c);
    NodeUtil_js_1.default.setChild(muoNode, 1, null);
    NodeUtil_js_1.default.setChild(muoNode, 2, mml);
    var texAtom = parser.create('node', 'TeXAtom', [
        muoNode
    ]);
    parser.Push(texAtom);
};
BaseMethods.UnderOver = function(parser, name, c, stack) {
    var base = parser.ParseArg(name);
    var symbol = NodeUtil_js_1.default.getForm(base);
    if (symbol && symbol[3] && symbol[3]['movablelimits'] || NodeUtil_js_1.default.getProperty(base, 'movablelimits')) NodeUtil_js_1.default.setProperties(base, {
        'movablelimits': false
    });
    var mo;
    if (NodeUtil_js_1.default.isType(base, 'munderover') && NodeUtil_js_1.default.isEmbellished(base)) {
        NodeUtil_js_1.default.setProperties(NodeUtil_js_1.default.getCoreMO(base), {
            lspace: 0,
            rspace: 0
        });
        mo = parser.create('node', 'mo', [], {
            rspace: 0
        });
        base = parser.create('node', 'mrow', [
            mo,
            base
        ]);
    }
    var mml = parser.create('node', 'munderover', [
        base
    ]);
    var entity = NodeUtil_js_1.default.createEntity(c);
    mo = parser.create('token', 'mo', {
        stretchy: true,
        accent: true
    }, entity);
    NodeUtil_js_1.default.setChild(mml, name.charAt(1) === 'o' ? mml.over : mml.under, mo);
    var node = mml;
    if (stack) node = parser.create('node', 'TeXAtom', [
        mml
    ], {
        texClass: MmlNode_js_1.TEXCLASS.OP,
        movesupsub: true
    });
    NodeUtil_js_1.default.setProperty(node, 'subsupOK', true);
    parser.Push(node);
};
BaseMethods.Overset = function(parser, name) {
    var top = parser.ParseArg(name), base = parser.ParseArg(name);
    if (NodeUtil_js_1.default.getAttribute(base, 'movablelimits') || NodeUtil_js_1.default.getProperty(base, 'movablelimits')) NodeUtil_js_1.default.setProperties(base, {
        'movablelimits': false
    });
    var node = parser.create('node', 'mover', [
        base,
        top
    ]);
    parser.Push(node);
};
BaseMethods.Underset = function(parser, name) {
    var bot = parser.ParseArg(name), base = parser.ParseArg(name);
    if (NodeUtil_js_1.default.isType(base, 'mo') || NodeUtil_js_1.default.getProperty(base, 'movablelimits')) NodeUtil_js_1.default.setProperties(base, {
        'movablelimits': false
    });
    var node = parser.create('node', 'munder', [
        base,
        bot
    ]);
    parser.Push(node);
};
BaseMethods.TeXAtom = function(parser, name, mclass) {
    var def = {
        texClass: mclass
    };
    var mml;
    var node;
    var parsed;
    if (mclass === MmlNode_js_1.TEXCLASS.OP) {
        def['movesupsub'] = def['movablelimits'] = true;
        var arg = parser.GetArgument(name);
        var match = arg.match(/^\s*\\rm\s+([a-zA-Z0-9 ]+)$/);
        if (match) {
            def['mathvariant'] = TexConstants_js_1.TexConstant.Variant.NORMAL;
            node = parser.create('token', 'mi', def, match[1]);
        } else {
            parsed = new TexParser_js_1.default(arg, parser.stack.env, parser.configuration).mml();
            node = parser.create('node', 'TeXAtom', [
                parsed
            ], def);
        }
        mml = parser.itemFactory.create('fn', node);
    } else {
        parsed = parser.ParseArg(name);
        mml = parser.create('node', 'TeXAtom', [
            parsed
        ], def);
    }
    parser.Push(mml);
};
BaseMethods.MmlToken = function(parser, name) {
    var kind = parser.GetArgument(name);
    var attr = parser.GetBrackets(name, '').replace(/^\s+/, '');
    var text = parser.GetArgument(name);
    var def = {
    };
    var node;
    try {
        node = parser.create('node', kind);
    } catch (e) {
        node = null;
    }
    if (!node || !node.isToken) throw new TexError_js_1.default('NotMathMLToken', '%1 is not a token element', kind);
    while(attr !== ''){
        var match = attr.match(/^([a-z]+)\s*=\s*('[^']*'|"[^"]*"|[^ ,]*)\s*,?\s*/i);
        if (!match) throw new TexError_js_1.default('InvalidMathMLAttr', 'Invalid MathML attribute: %1', attr);
        if (!node.attributes.hasDefault(match[1]) && !MmlTokenAllow[match[1]]) throw new TexError_js_1.default('UnknownAttrForElement', '%1 is not a recognized attribute for %2', match[1], kind);
        var value = ParseUtil_js_1.default.MmlFilterAttribute(parser, match[1], match[2].replace(/^(['"])(.*)\1$/, '$2'));
        if (value) {
            if (value.toLowerCase() === 'true') value = true;
            else if (value.toLowerCase() === 'false') value = false;
            def[match[1]] = value;
        }
        attr = attr.substr(match[0].length);
    }
    var textNode = parser.create('text', text);
    node.appendChild(textNode);
    NodeUtil_js_1.default.setProperties(node, def);
    parser.Push(node);
};
BaseMethods.Strut = function(parser, _name) {
    var row = parser.create('node', 'mrow');
    var padded = parser.create('node', 'mpadded', [
        row
    ], {
        height: '8.6pt',
        depth: '3pt',
        width: 0
    });
    parser.Push(padded);
};
BaseMethods.Phantom = function(parser, name, v, h) {
    var box = parser.create('node', 'mphantom', [
        parser.ParseArg(name)
    ]);
    if (v || h) {
        box = parser.create('node', 'mpadded', [
            box
        ]);
        if (h) {
            NodeUtil_js_1.default.setAttribute(box, 'height', 0);
            NodeUtil_js_1.default.setAttribute(box, 'depth', 0);
        }
        if (v) NodeUtil_js_1.default.setAttribute(box, 'width', 0);
    }
    var atom = parser.create('node', 'TeXAtom', [
        box
    ]);
    parser.Push(atom);
};
BaseMethods.Smash = function(parser, name) {
    var bt = ParseUtil_js_1.default.trimSpaces(parser.GetBrackets(name, ''));
    var smash = parser.create('node', 'mpadded', [
        parser.ParseArg(name)
    ]);
    switch(bt){
        case 'b':
            NodeUtil_js_1.default.setAttribute(smash, 'depth', 0);
            break;
        case 't':
            NodeUtil_js_1.default.setAttribute(smash, 'height', 0);
            break;
        default:
            NodeUtil_js_1.default.setAttribute(smash, 'height', 0);
            NodeUtil_js_1.default.setAttribute(smash, 'depth', 0);
    }
    var atom = parser.create('node', 'TeXAtom', [
        smash
    ]);
    parser.Push(atom);
};
BaseMethods.Lap = function(parser, name) {
    var mml = parser.create('node', 'mpadded', [
        parser.ParseArg(name)
    ], {
        width: 0
    });
    if (name === '\\llap') NodeUtil_js_1.default.setAttribute(mml, 'lspace', '-1width');
    var atom = parser.create('node', 'TeXAtom', [
        mml
    ]);
    parser.Push(atom);
};
BaseMethods.RaiseLower = function(parser, name) {
    var h = parser.GetDimen(name);
    var item = parser.itemFactory.create('position').setProperties({
        name: parser.currentCS,
        move: 'vertical'
    });
    if (h.charAt(0) === '-') {
        h = h.slice(1);
        name = name.substr(1) === 'raise' ? '\\lower' : '\\raise';
    }
    if (name === '\\lower') {
        item.setProperty('dh', '-' + h);
        item.setProperty('dd', '+' + h);
    } else {
        item.setProperty('dh', '+' + h);
        item.setProperty('dd', '-' + h);
    }
    parser.Push(item);
};
BaseMethods.MoveLeftRight = function(parser, name) {
    var h = parser.GetDimen(name);
    var nh = h.charAt(0) === '-' ? h.slice(1) : '-' + h;
    if (name === '\\moveleft') {
        var tmp = h;
        h = nh;
        nh = tmp;
    }
    parser.Push(parser.itemFactory.create('position').setProperties({
        name: parser.currentCS,
        move: 'horizontal',
        left: parser.create('node', 'mspace', [], {
            width: h
        }),
        right: parser.create('node', 'mspace', [], {
            width: nh
        })
    }));
};
BaseMethods.Hskip = function(parser, name) {
    var node = parser.create('node', 'mspace', [], {
        width: parser.GetDimen(name)
    });
    parser.Push(node);
};
BaseMethods.Rule = function(parser, name, style) {
    var w = parser.GetDimen(name), h = parser.GetDimen(name), d = parser.GetDimen(name);
    var def = {
        width: w,
        height: h,
        depth: d
    };
    if (style !== 'blank') def['mathbackground'] = parser.stack.env['color'] || 'black';
    var node = parser.create('node', 'mspace', [], def);
    parser.Push(node);
};
BaseMethods.rule = function(parser, name) {
    var v = parser.GetBrackets(name), w = parser.GetDimen(name), h = parser.GetDimen(name);
    var mml = parser.create('node', 'mspace', [], {
        width: w,
        height: h,
        mathbackground: parser.stack.env['color'] || 'black'
    });
    if (v) {
        mml = parser.create('node', 'mpadded', [
            mml
        ], {
            voffset: v
        });
        if (v.match(/^\-/)) {
            NodeUtil_js_1.default.setAttribute(mml, 'height', v);
            NodeUtil_js_1.default.setAttribute(mml, 'depth', '+' + v.substr(1));
        } else NodeUtil_js_1.default.setAttribute(mml, 'height', '+' + v);
    }
    parser.Push(mml);
};
BaseMethods.MakeBig = function(parser, name, mclass, size) {
    size *= P_HEIGHT;
    var sizeStr = String(size).replace(/(\.\d\d\d).+/, '$1') + 'em';
    var delim = parser.GetDelimiter(name, true);
    var mo = parser.create('token', 'mo', {
        minsize: sizeStr,
        maxsize: sizeStr,
        fence: true,
        stretchy: true,
        symmetric: true
    }, delim);
    var node = parser.create('node', 'TeXAtom', [
        mo
    ], {
        texClass: mclass
    });
    parser.Push(node);
};
BaseMethods.BuildRel = function(parser, name) {
    var top = parser.ParseUpTo(name, '\\over');
    var bot = parser.ParseArg(name);
    var node = parser.create('node', 'munderover');
    NodeUtil_js_1.default.setChild(node, 0, bot);
    NodeUtil_js_1.default.setChild(node, 1, null);
    NodeUtil_js_1.default.setChild(node, 2, top);
    var atom = parser.create('node', 'TeXAtom', [
        node
    ], {
        texClass: MmlNode_js_1.TEXCLASS.REL
    });
    parser.Push(atom);
};
BaseMethods.HBox = function(parser, name, style, font) {
    parser.PushAll(ParseUtil_js_1.default.internalMath(parser, parser.GetArgument(name), style, font));
};
BaseMethods.FBox = function(parser, name) {
    var internal = ParseUtil_js_1.default.internalMath(parser, parser.GetArgument(name));
    var node = parser.create('node', 'menclose', internal, {
        notation: 'box'
    });
    parser.Push(node);
};
BaseMethods.Not = function(parser, _name) {
    parser.Push(parser.itemFactory.create('not'));
};
BaseMethods.Dots = function(parser, _name) {
    var ldotsEntity = NodeUtil_js_1.default.createEntity('2026');
    var cdotsEntity = NodeUtil_js_1.default.createEntity('22EF');
    var ldots = parser.create('token', 'mo', {
        stretchy: false
    }, ldotsEntity);
    var cdots = parser.create('token', 'mo', {
        stretchy: false
    }, cdotsEntity);
    parser.Push(parser.itemFactory.create('dots').setProperties({
        ldots: ldots,
        cdots: cdots
    }));
};
BaseMethods.Matrix = function(parser, _name, open, close, align, spacing, vspacing, style, cases, numbered) {
    var c = parser.GetNext();
    if (c === '') throw new TexError_js_1.default('MissingArgFor', 'Missing argument for %1', parser.currentCS);
    if (c === '{') parser.i++;
    else {
        parser.string = c + '}' + parser.string.slice(parser.i + 1);
        parser.i = 0;
    }
    var array = parser.itemFactory.create('array').setProperty('requireClose', true);
    array.arraydef = {
        rowspacing: vspacing || '4pt',
        columnspacing: spacing || '1em'
    };
    if (cases) array.setProperty('isCases', true);
    if (numbered) {
        array.setProperty('isNumbered', true);
        array.arraydef.side = numbered;
    }
    if (open || close) {
        array.setProperty('open', open);
        array.setProperty('close', close);
    }
    if (style === 'D') array.arraydef.displaystyle = true;
    if (align != null) array.arraydef.columnalign = align;
    parser.Push(array);
};
BaseMethods.Entry = function(parser, name) {
    parser.Push(parser.itemFactory.create('cell').setProperties({
        isEntry: true,
        name: name
    }));
    if (parser.stack.Top().getProperty('isCases')) {
        var str = parser.string;
        var braces = 0, close_1 = -1, i = parser.i, m = str.length;
        while(i < m){
            var c = str.charAt(i);
            if (c === '{') {
                braces++;
                i++;
            } else if (c === '}') {
                if (braces === 0) m = 0;
                else {
                    braces--;
                    if (braces === 0 && close_1 < 0) close_1 = i - parser.i;
                    i++;
                }
            } else if (c === '&' && braces === 0) throw new TexError_js_1.default('ExtraAlignTab', 'Extra alignment tab in \\cases text');
            else if (c === '\\') {
                if (str.substr(i).match(/^((\\cr)[^a-zA-Z]|\\\\)/)) m = 0;
                else i += 2;
            } else i++;
        }
        var text = str.substr(parser.i, i - parser.i);
        if (!text.match(/^\s*\\text[^a-zA-Z]/) || close_1 !== text.replace(/\s+$/, '').length - 1) {
            var internal = ParseUtil_js_1.default.internalMath(parser, text, 0);
            parser.PushAll(internal);
            parser.i = i;
        }
    }
};
BaseMethods.Cr = function(parser, name) {
    parser.Push(parser.itemFactory.create('cell').setProperties({
        isCR: true,
        name: name
    }));
};
BaseMethods.CrLaTeX = function(parser, name, nobrackets) {
    if (nobrackets === void 0) nobrackets = false;
    var n;
    if (!nobrackets) {
        if (parser.string.charAt(parser.i) === '*') parser.i++;
        if (parser.string.charAt(parser.i) === '[') {
            var dim = parser.GetBrackets(name, '');
            var _a = __read(ParseUtil_js_1.default.matchDimen(dim), 2), value = _a[0], unit = _a[1];
            if (dim && !value) throw new TexError_js_1.default('BracketMustBeDimension', 'Bracket argument to %1 must be a dimension', parser.currentCS);
            n = value + unit;
        }
    }
    parser.Push(parser.itemFactory.create('cell').setProperties({
        isCR: true,
        name: name,
        linebreak: true
    }));
    var top = parser.stack.Top();
    var node;
    if (top instanceof sitem.ArrayItem) {
        if (n && top.arraydef['rowspacing']) {
            var rows = top.arraydef['rowspacing'].split(/ /);
            if (!top.getProperty('rowspacing')) {
                var dimem = ParseUtil_js_1.default.dimen2em(rows[0]);
                top.setProperty('rowspacing', dimem);
            }
            var rowspacing = top.getProperty('rowspacing');
            while(rows.length < top.table.length)rows.push(ParseUtil_js_1.default.Em(rowspacing));
            rows[top.table.length - 1] = ParseUtil_js_1.default.Em(Math.max(0, rowspacing + ParseUtil_js_1.default.dimen2em(n)));
            top.arraydef['rowspacing'] = rows.join(' ');
        }
    } else {
        if (n) {
            node = parser.create('node', 'mspace', [], {
                depth: n
            });
            parser.Push(node);
        }
        node = parser.create('node', 'mspace', [], {
            linebreak: TexConstants_js_1.TexConstant.LineBreak.NEWLINE
        });
        parser.Push(node);
    }
};
BaseMethods.HLine = function(parser, _name, style) {
    if (style == null) style = 'solid';
    var top = parser.stack.Top();
    if (!(top instanceof sitem.ArrayItem) || top.Size()) throw new TexError_js_1.default('Misplaced', 'Misplaced %1', parser.currentCS);
    if (!top.table.length) top.frame.push('top');
    else {
        var lines = top.arraydef['rowlines'] ? top.arraydef['rowlines'].split(/ /) : [];
        while(lines.length < top.table.length)lines.push('none');
        lines[top.table.length - 1] = style;
        top.arraydef['rowlines'] = lines.join(' ');
    }
};
BaseMethods.HFill = function(parser, _name) {
    var top = parser.stack.Top();
    if (top instanceof sitem.ArrayItem) top.hfill.push(top.Size());
    else throw new TexError_js_1.default('UnsupportedHFill', 'Unsupported use of %1', parser.currentCS);
};
BaseMethods.BeginEnd = function(parser, name) {
    var env = parser.GetArgument(name);
    if (env.match(/\\/i)) throw new TexError_js_1.default('InvalidEnv', 'Invalid environment name \'%1\'', env);
    var macro = parser.configuration.handlers.get('environment').lookup(env);
    if (macro && name === '\\end') {
        if (!macro.args[0]) {
            var mml = parser.itemFactory.create('end').setProperty('name', env);
            parser.Push(mml);
            return;
        }
        parser.stack.env['closing'] = env;
    }
    if ((++parser.macroCount) > parser.configuration.options['maxMacros']) throw new TexError_js_1.default('MaxMacroSub2', "MathJax maximum substitution count exceeded; is there a recursive latex environment?");
    parser.parse('environment', [
        parser,
        env
    ]);
};
BaseMethods.Array = function(parser, begin, open, close, align, spacing, vspacing, style, raggedHeight) {
    if (!align) align = parser.GetArgument('\\begin{' + begin.getName() + '}');
    var lines = ('c' + align).replace(/[^clr|:]/g, '').replace(/[^|:]([|:])+/g, '$1');
    align = align.replace(/[^clr]/g, '').split('').join(' ');
    align = align.replace(/l/g, 'left').replace(/r/g, 'right').replace(/c/g, 'center');
    var array = parser.itemFactory.create('array');
    array.arraydef = {
        columnalign: align,
        columnspacing: spacing || '1em',
        rowspacing: vspacing || '4pt'
    };
    if (lines.match(/[|:]/)) {
        if (lines.charAt(0).match(/[|:]/)) {
            array.frame.push('left');
            array.dashed = lines.charAt(0) === ':';
        }
        if (lines.charAt(lines.length - 1).match(/[|:]/)) array.frame.push('right');
        lines = lines.substr(1, lines.length - 2);
        array.arraydef.columnlines = lines.split('').join(' ').replace(/[^|: ]/g, 'none').replace(/\|/g, 'solid').replace(/:/g, 'dashed');
    }
    if (open) array.setProperty('open', parser.convertDelimiter(open));
    if (close) array.setProperty('close', parser.convertDelimiter(close));
    if (style === 'D') array.arraydef['displaystyle'] = true;
    else if (style) array.arraydef['displaystyle'] = false;
    if (style === 'S') array.arraydef['scriptlevel'] = 1;
    if (raggedHeight) array.arraydef['useHeight'] = false;
    parser.Push(begin);
    return array;
};
BaseMethods.AlignedArray = function(parser, begin) {
    var align = parser.GetBrackets('\\begin{' + begin.getName() + '}');
    var item = BaseMethods.Array(parser, begin);
    return ParseUtil_js_1.default.setArrayAlign(item, align);
};
BaseMethods.Equation = function(parser, begin, numbered) {
    parser.Push(begin);
    ParseUtil_js_1.default.checkEqnEnv(parser);
    return parser.itemFactory.create('equation', numbered).setProperty('name', begin.getName());
};
BaseMethods.EqnArray = function(parser, begin, numbered, taggable, align, spacing) {
    parser.Push(begin);
    if (taggable) ParseUtil_js_1.default.checkEqnEnv(parser);
    align = align.replace(/[^clr]/g, '').split('').join(' ');
    align = align.replace(/l/g, 'left').replace(/r/g, 'right').replace(/c/g, 'center');
    var newItem = parser.itemFactory.create('eqnarray', begin.getName(), numbered, taggable, parser.stack.global);
    newItem.arraydef = {
        displaystyle: true,
        columnalign: align,
        columnspacing: spacing || '1em',
        rowspacing: '3pt',
        side: parser.options['tagSide'],
        minlabelspacing: parser.options['tagIndent']
    };
    return newItem;
};
BaseMethods.HandleNoTag = function(parser, _name) {
    parser.tags.notag();
};
BaseMethods.HandleLabel = function(parser, name) {
    var label = parser.GetArgument(name);
    if (label === '') return;
    if (!parser.tags.refUpdate) {
        if (parser.tags.label) throw new TexError_js_1.default('MultipleCommand', 'Multiple %1', parser.currentCS);
        parser.tags.label = label;
        if ((parser.tags.allLabels[label] || parser.tags.labels[label]) && !parser.options['ignoreDuplicateLabels']) throw new TexError_js_1.default('MultipleLabel', 'Label \'%1\' multiply defined', label);
        parser.tags.labels[label] = new Tags_js_1.Label();
    }
};
BaseMethods.HandleRef = function(parser, name, eqref) {
    var label = parser.GetArgument(name);
    var ref = parser.tags.allLabels[label] || parser.tags.labels[label];
    if (!ref) {
        if (!parser.tags.refUpdate) parser.tags.redo = true;
        ref = new Tags_js_1.Label();
    }
    var tag = ref.tag;
    if (eqref) tag = parser.tags.formatTag(tag);
    var node = parser.create('node', 'mrow', ParseUtil_js_1.default.internalMath(parser, tag), {
        href: parser.tags.formatUrl(ref.id, parser.options.baseURL),
        'class': 'MathJax_ref'
    });
    parser.Push(node);
};
BaseMethods.Macro = function(parser, name, macro, argcount, def) {
    if (argcount) {
        var args = [];
        if (def != null) {
            var optional = parser.GetBrackets(name);
            args.push(optional == null ? def : optional);
        }
        for(var i = args.length; i < argcount; i++)args.push(parser.GetArgument(name));
        macro = ParseUtil_js_1.default.substituteArgs(parser, args, macro);
    }
    parser.string = ParseUtil_js_1.default.addArgs(parser, macro, parser.string.slice(parser.i));
    parser.i = 0;
    if ((++parser.macroCount) > parser.configuration.options['maxMacros']) throw new TexError_js_1.default('MaxMacroSub1', "MathJax maximum macro substitution count exceeded; is there a recursive macro call?");
};
BaseMethods.MathChoice = function(parser, name) {
    var D = parser.ParseArg(name);
    var T = parser.ParseArg(name);
    var S = parser.ParseArg(name);
    var SS = parser.ParseArg(name);
    parser.Push(parser.create('node', 'MathChoice', [
        D,
        T,
        S,
        SS
    ]));
};
exports.default = BaseMethods;

},{"./BaseItems.js":"7vCsT","../NodeUtil.js":"If5yR","../TexError.js":"7EfV4","../TexParser.js":"RI8aV","../TexConstants.js":"1hJzZ","../ParseUtil.js":"17LUu","../../../core/MmlTree/MmlNode.js":"5Ogy3","../Tags.js":"5I8xM","../../../util/lengths.js":"5EoCW","../../../util/Entities.js":"4kMub"}],"5EoCW":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.px = exports.emRounded = exports.em = exports.percent = exports.length2em = exports.MATHSPACE = exports.RELUNITS = exports.UNITS = exports.BIGDIMEN = void 0;
exports.BIGDIMEN = 1000000;
exports.UNITS = {
    px: 1,
    'in': 96,
    cm: 96 / 2.54,
    mm: 96 / 25.4
};
exports.RELUNITS = {
    em: 1,
    ex: 0.431,
    pt: 0.1,
    pc: 1.2,
    mu: 1 / 18
};
exports.MATHSPACE = {
    veryverythinmathspace: 1 / 18,
    verythinmathspace: 2 / 18,
    thinmathspace: 3 / 18,
    mediummathspace: 4 / 18,
    thickmathspace: 5 / 18,
    verythickmathspace: 6 / 18,
    veryverythickmathspace: 7 / 18,
    negativeveryverythinmathspace: -1 / 18,
    negativeverythinmathspace: -2 / 18,
    negativethinmathspace: -3 / 18,
    negativemediummathspace: -4 / 18,
    negativethickmathspace: -5 / 18,
    negativeverythickmathspace: -6 / 18,
    negativeveryverythickmathspace: -7 / 18,
    thin: 0.04,
    medium: 0.06,
    thick: 0.1,
    normal: 1,
    big: 2,
    small: 1 / Math.sqrt(2),
    infinity: exports.BIGDIMEN
};
function length2em(length, size, scale, em) {
    if (size === void 0) size = 0;
    if (scale === void 0) scale = 1;
    if (em === void 0) em = 16;
    if (typeof length !== 'string') length = String(length);
    if (length === '' || length == null) return size;
    if (exports.MATHSPACE[length]) return exports.MATHSPACE[length];
    var match = length.match(/^\s*([-+]?(?:\.\d+|\d+(?:\.\d*)?))?(pt|em|ex|mu|px|pc|in|mm|cm|%)?/);
    if (!match) return size;
    var m = parseFloat(match[1] || '1'), unit = match[2];
    if (exports.UNITS.hasOwnProperty(unit)) return m * exports.UNITS[unit] / em / scale;
    if (exports.RELUNITS.hasOwnProperty(unit)) return m * exports.RELUNITS[unit];
    if (unit === '%') return m / 100 * size;
    return m * size;
}
exports.length2em = length2em;
function percent(m) {
    return (100 * m).toFixed(1).replace(/\.?0+$/, '') + '%';
}
exports.percent = percent;
function em(m) {
    if (Math.abs(m) < 0.001) return '0';
    return m.toFixed(3).replace(/\.?0+$/, '') + 'em';
}
exports.em = em;
function emRounded(m, em1) {
    if (em1 === void 0) em1 = 16;
    m = (Math.round(m * em1) + 0.05) / em1;
    if (Math.abs(m) < 0.001) return '0em';
    return m.toFixed(3).replace(/\.?0+$/, '') + 'em';
}
exports.emRounded = emRounded;
function px(m, M, em1) {
    if (M === void 0) M = -exports.BIGDIMEN;
    if (em1 === void 0) em1 = 16;
    m *= em1;
    if (M && m < M) m = M;
    if (Math.abs(m) < 0.1) return '0';
    return m.toFixed(1).replace(/\.0$/, '') + 'px';
}
exports.px = px;

},{}],"2Nz4D":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
var NodeUtil_js_1 = require("./NodeUtil.js");
var TexConstants_js_1 = require("./TexConstants.js");
var ParseUtil_js_1 = require("./ParseUtil.js");
var ParseMethods;
(function(ParseMethods1) {
    function variable(parser, c) {
        var def = ParseUtil_js_1.default.getFontDef(parser);
        if (parser.stack.env.multiLetterIdentifiers && parser.stack.env.font !== '') {
            c = parser.string.substr(parser.i - 1).match(/^[a-z]+/i)[0];
            parser.i += c.length - 1;
            if (def.mathvariant === TexConstants_js_1.TexConstant.Variant.NORMAL) def.autoOP = false;
        }
        var node = parser.create('token', 'mi', def, c);
        parser.Push(node);
    }
    ParseMethods1.variable = variable;
    function digit(parser, c) {
        var mml;
        var pattern = parser.configuration.options['digits'];
        var n = parser.string.slice(parser.i - 1).match(pattern);
        var def = ParseUtil_js_1.default.getFontDef(parser);
        if (n) {
            mml = parser.create('token', 'mn', def, n[0].replace(/[{}]/g, ''));
            parser.i += n[0].length - 1;
        } else mml = parser.create('token', 'mo', def, c);
        parser.Push(mml);
    }
    ParseMethods1.digit = digit;
    function controlSequence(parser, _c) {
        var name = parser.GetCS();
        parser.parse('macro', [
            parser,
            name
        ]);
    }
    ParseMethods1.controlSequence = controlSequence;
    function mathchar0mi(parser, mchar) {
        var def = mchar.attributes || {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        };
        var node = parser.create('token', 'mi', def, mchar.char);
        parser.Push(node);
    }
    ParseMethods1.mathchar0mi = mathchar0mi;
    function mathchar0mo(parser, mchar) {
        var def = mchar.attributes || {
        };
        def['stretchy'] = false;
        var node = parser.create('token', 'mo', def, mchar.char);
        NodeUtil_js_1.default.setProperty(node, 'fixStretchy', true);
        parser.configuration.addNode('fixStretchy', node);
        parser.Push(node);
    }
    ParseMethods1.mathchar0mo = mathchar0mo;
    function mathchar7(parser, mchar) {
        var def = mchar.attributes || {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        };
        if (parser.stack.env['font']) def['mathvariant'] = parser.stack.env['font'];
        var node = parser.create('token', 'mi', def, mchar.char);
        parser.Push(node);
    }
    ParseMethods1.mathchar7 = mathchar7;
    function delimiter(parser, delim) {
        var def = delim.attributes || {
        };
        def = Object.assign({
            fence: false,
            stretchy: false
        }, def);
        var node = parser.create('token', 'mo', def, delim.char);
        parser.Push(node);
    }
    ParseMethods1.delimiter = delimiter;
    function environment(parser, env, func, args) {
        var end = args[0];
        var mml = parser.itemFactory.create('begin').setProperties({
            name: env,
            end: end
        });
        mml = func.apply(void 0, __spreadArray([
            parser,
            mml
        ], __read(args.slice(1))));
        parser.Push(mml);
    }
    ParseMethods1.environment = environment;
})(ParseMethods || (ParseMethods = {
}));
exports.default = ParseMethods;

},{"./NodeUtil.js":"If5yR","./TexConstants.js":"1hJzZ","./ParseUtil.js":"17LUu"}],"1Uk2J":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTML = void 0;
var OutputJax_js_1 = require("./common/OutputJax.js");
var WrapperFactory_js_1 = require("./chtml/WrapperFactory.js");
var tex_js_1 = require("./chtml/fonts/tex.js");
var LENGTHS = require("../util/lengths.js");
var string_js_1 = require("../util/string.js");
var CHTML1 = function(_super) {
    __extends(CHTML2, _super);
    function CHTML2(options) {
        if (options === void 0) options = null;
        var _this = _super.call(this, options, WrapperFactory_js_1.CHTMLWrapperFactory, tex_js_1.TeXFont) || this;
        _this.chtmlStyles = null;
        _this.font.adaptiveCSS(_this.options.adaptiveCSS);
        return _this;
    }
    CHTML2.prototype.escaped = function(math, html) {
        this.setDocument(html);
        return this.html('span', {
        }, [
            this.text(math.math)
        ]);
    };
    CHTML2.prototype.styleSheet = function(html) {
        if (this.chtmlStyles && !this.options.adaptiveCSS) return this.chtmlStyles;
        var sheet = this.chtmlStyles = _super.prototype.styleSheet.call(this, html);
        this.adaptor.setAttribute(sheet, 'id', CHTML2.STYLESHEETID);
        return sheet;
    };
    CHTML2.prototype.addClassStyles = function(CLASS) {
        var _a;
        if (!this.options.adaptiveCSS || CLASS.used) {
            if (CLASS.autoStyle && CLASS.kind !== 'unknown') this.cssStyles.addStyles((_a = {
            }, _a['mjx-' + CLASS.kind] = {
                display: 'inline-block',
                'text-align': 'left'
            }, _a));
            _super.prototype.addClassStyles.call(this, CLASS);
        }
    };
    CHTML2.prototype.processMath = function(math, parent) {
        this.factory.wrap(math).toCHTML(parent);
    };
    CHTML2.prototype.clearCache = function() {
        var e_1, _a;
        this.cssStyles.clear();
        this.font.clearCache();
        try {
            for(var _b = __values(this.factory.getKinds()), _c = _b.next(); !_c.done; _c = _b.next()){
                var kind = _c.value;
                this.factory.getNodeClass(kind).used = false;
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    };
    CHTML2.prototype.reset = function() {
        this.clearCache();
    };
    CHTML2.prototype.unknownText = function(text, variant) {
        var styles = {
        };
        var scale = 100 / this.math.metrics.scale;
        if (scale !== 100) {
            styles['font-size'] = this.fixed(scale, 1) + '%';
            styles.padding = LENGTHS.em(75 / scale) + ' 0 ' + LENGTHS.em(20 / scale) + ' 0';
        }
        if (variant !== '-explicitFont') {
            var c = string_js_1.unicodeChars(text);
            if (c.length !== 1 || c[0] < 119808 || c[0] > 120831) this.cssFontStyles(this.font.getCssFont(variant), styles);
        }
        return this.html('mjx-utext', {
            variant: variant,
            style: styles
        }, [
            this.text(text)
        ]);
    };
    CHTML2.prototype.measureTextNode = function(text) {
        var adaptor = this.adaptor;
        text = adaptor.clone(text);
        var style = {
            position: 'absolute',
            'white-space': 'nowrap'
        };
        var node = this.html('mjx-measure-text', {
            style: style
        }, [
            text
        ]);
        adaptor.append(adaptor.parent(this.math.start.node), this.container);
        adaptor.append(this.container, node);
        var w = adaptor.nodeSize(text, this.math.metrics.em)[0] / this.math.metrics.scale;
        adaptor.remove(this.container);
        adaptor.remove(node);
        return {
            w: w,
            h: 0.75,
            d: 0.2
        };
    };
    CHTML2.NAME = 'CHTML';
    CHTML2.OPTIONS = __assign(__assign({
    }, OutputJax_js_1.CommonOutputJax.OPTIONS), {
        adaptiveCSS: true
    });
    CHTML2.commonStyles = {
        'mjx-container[jax="CHTML"]': {
            'line-height': 0
        },
        'mjx-container [space="1"]': {
            'margin-left': '.111em'
        },
        'mjx-container [space="2"]': {
            'margin-left': '.167em'
        },
        'mjx-container [space="3"]': {
            'margin-left': '.222em'
        },
        'mjx-container [space="4"]': {
            'margin-left': '.278em'
        },
        'mjx-container [space="5"]': {
            'margin-left': '.333em'
        },
        'mjx-container [rspace="1"]': {
            'margin-right': '.111em'
        },
        'mjx-container [rspace="2"]': {
            'margin-right': '.167em'
        },
        'mjx-container [rspace="3"]': {
            'margin-right': '.222em'
        },
        'mjx-container [rspace="4"]': {
            'margin-right': '.278em'
        },
        'mjx-container [rspace="5"]': {
            'margin-right': '.333em'
        },
        'mjx-container [size="s"]': {
            'font-size': '70.7%'
        },
        'mjx-container [size="ss"]': {
            'font-size': '50%'
        },
        'mjx-container [size="Tn"]': {
            'font-size': '60%'
        },
        'mjx-container [size="sm"]': {
            'font-size': '85%'
        },
        'mjx-container [size="lg"]': {
            'font-size': '120%'
        },
        'mjx-container [size="Lg"]': {
            'font-size': '144%'
        },
        'mjx-container [size="LG"]': {
            'font-size': '173%'
        },
        'mjx-container [size="hg"]': {
            'font-size': '207%'
        },
        'mjx-container [size="HG"]': {
            'font-size': '249%'
        },
        'mjx-container [width="full"]': {
            width: '100%'
        },
        'mjx-box': {
            display: 'inline-block'
        },
        'mjx-block': {
            display: 'block'
        },
        'mjx-itable': {
            display: 'inline-table'
        },
        'mjx-row': {
            display: 'table-row'
        },
        'mjx-row > *': {
            display: 'table-cell'
        },
        'mjx-mtext': {
            display: 'inline-block'
        },
        'mjx-mstyle': {
            display: 'inline-block'
        },
        'mjx-merror': {
            display: 'inline-block',
            color: 'red',
            'background-color': 'yellow'
        },
        'mjx-mphantom': {
            visibility: 'hidden'
        }
    };
    CHTML2.STYLESHEETID = 'MJX-CHTML-styles';
    return CHTML2;
}(OutputJax_js_1.CommonOutputJax);
exports.CHTML = CHTML1;

},{"./common/OutputJax.js":"6Qhzi","./chtml/WrapperFactory.js":"7inTT","./chtml/fonts/tex.js":"3z2PK","../util/lengths.js":"5EoCW","../util/string.js":"1fFM7"}],"6Qhzi":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonOutputJax = void 0;
var OutputJax_js_1 = require("../../core/OutputJax.js");
var MathItem_js_1 = require("../../core/MathItem.js");
var Options_js_1 = require("../../util/Options.js");
var lengths_js_1 = require("../../util/lengths.js");
var Styles_js_1 = require("../../util/Styles.js");
var StyleList_js_1 = require("../../util/StyleList.js");
var CommonOutputJax1 = function(_super) {
    __extends(CommonOutputJax2, _super);
    function CommonOutputJax2(options, defaultFactory, defaultFont) {
        if (options === void 0) options = null;
        if (defaultFactory === void 0) defaultFactory = null;
        if (defaultFont === void 0) defaultFont = null;
        var _this = this;
        var _a = __read(Options_js_1.separateOptions(options, defaultFont.OPTIONS), 2), jaxOptions = _a[0], fontOptions = _a[1];
        _this = _super.call(this, jaxOptions) || this;
        _this.factory = _this.options.wrapperFactory || new defaultFactory();
        _this.factory.jax = _this;
        _this.cssStyles = _this.options.cssStyles || new StyleList_js_1.CssStyles();
        _this.font = _this.options.font || new defaultFont(fontOptions);
        _this.unknownCache = new Map();
        return _this;
    }
    CommonOutputJax2.prototype.typeset = function(math, html) {
        this.setDocument(html);
        var node = this.createNode();
        this.toDOM(math, node, html);
        return node;
    };
    CommonOutputJax2.prototype.createNode = function() {
        var jax = this.constructor.NAME;
        return this.html('mjx-container', {
            'class': 'MathJax',
            jax: jax
        });
    };
    CommonOutputJax2.prototype.setScale = function(node) {
        var scale = this.math.metrics.scale * this.options.scale;
        if (scale !== 1) this.adaptor.setStyle(node, 'fontSize', lengths_js_1.percent(scale));
    };
    CommonOutputJax2.prototype.toDOM = function(math, node, html) {
        if (html === void 0) html = null;
        this.setDocument(html);
        this.math = math;
        this.pxPerEm = math.metrics.ex / this.font.params.x_height;
        math.root.setTeXclass(null);
        this.setScale(node);
        this.nodeMap = new Map();
        this.container = node;
        this.processMath(math.root, node);
        this.nodeMap = null;
        this.executeFilters(this.postFilters, math, html, node);
    };
    CommonOutputJax2.prototype.getBBox = function(math, html) {
        this.setDocument(html);
        this.math = math;
        math.root.setTeXclass(null);
        this.nodeMap = new Map();
        var bbox = this.factory.wrap(math.root).getBBox();
        this.nodeMap = null;
        return bbox;
    };
    CommonOutputJax2.prototype.getMetrics = function(html) {
        var e_1, _a;
        this.setDocument(html);
        var adaptor = this.adaptor;
        var maps = this.getMetricMaps(html);
        try {
            for(var _b = __values(html.math), _c = _b.next(); !_c.done; _c = _b.next()){
                var math = _c.value;
                var parent_1 = adaptor.parent(math.start.node);
                if (math.state() < MathItem_js_1.STATE.METRICS && parent_1) {
                    var map = maps[math.display ? 1 : 0];
                    var _d = map.get(parent_1), em = _d.em, ex = _d.ex, containerWidth = _d.containerWidth, lineWidth = _d.lineWidth, scale = _d.scale, family = _d.family;
                    math.setMetrics(em, ex, containerWidth, lineWidth, scale);
                    if (this.options.mtextInheritFont) math.outputData.mtextFamily = family;
                    if (this.options.merrorInheritFont) math.outputData.merrorFamily = family;
                    math.state(MathItem_js_1.STATE.METRICS);
                }
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    };
    CommonOutputJax2.prototype.getMetricsFor = function(node, display) {
        var getFamily = this.options.mtextInheritFont || this.options.merrorInheritFont;
        var test = this.getTestElement(node, display);
        var metrics = this.measureMetrics(test, getFamily);
        this.adaptor.remove(test);
        return metrics;
    };
    CommonOutputJax2.prototype.getMetricMaps = function(html) {
        var e_2, _a, e_3, _b, e_4, _c, e_5, _d, e_6, _e;
        var adaptor = this.adaptor;
        var domMaps = [
            new Map(),
            new Map()
        ];
        try {
            for(var _f = __values(html.math), _g = _f.next(); !_g.done; _g = _f.next()){
                var math = _g.value;
                var node = adaptor.parent(math.start.node);
                if (node && math.state() < MathItem_js_1.STATE.METRICS) {
                    var map = domMaps[math.display ? 1 : 0];
                    if (!map.has(node)) map.set(node, this.getTestElement(node, math.display));
                }
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_g && !_g.done && (_a = _f.return)) _a.call(_f);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
        var getFamily = this.options.mtextInheritFont || this.options.merrorInheritFont;
        var maps = [
            new Map(),
            new Map()
        ];
        try {
            for(var _h = __values(maps.keys()), _j = _h.next(); !_j.done; _j = _h.next()){
                var i = _j.value;
                try {
                    for(var _k = (e_4 = void 0, __values(domMaps[i].keys())), _l = _k.next(); !_l.done; _l = _k.next()){
                        var node = _l.value;
                        maps[i].set(node, this.measureMetrics(domMaps[i].get(node), getFamily));
                    }
                } catch (e_4_1) {
                    e_4 = {
                        error: e_4_1
                    };
                } finally{
                    try {
                        if (_l && !_l.done && (_c = _k.return)) _c.call(_k);
                    } finally{
                        if (e_4) throw e_4.error;
                    }
                }
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_j && !_j.done && (_b = _h.return)) _b.call(_h);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        try {
            for(var _m = __values(maps.keys()), _o = _m.next(); !_o.done; _o = _m.next()){
                var i = _o.value;
                try {
                    for(var _p = (e_6 = void 0, __values(domMaps[i].values())), _q = _p.next(); !_q.done; _q = _p.next()){
                        var node = _q.value;
                        adaptor.remove(node);
                    }
                } catch (e_6_1) {
                    e_6 = {
                        error: e_6_1
                    };
                } finally{
                    try {
                        if (_q && !_q.done && (_e = _p.return)) _e.call(_p);
                    } finally{
                        if (e_6) throw e_6.error;
                    }
                }
            }
        } catch (e_5_1) {
            e_5 = {
                error: e_5_1
            };
        } finally{
            try {
                if (_o && !_o.done && (_d = _m.return)) _d.call(_m);
            } finally{
                if (e_5) throw e_5.error;
            }
        }
        return maps;
    };
    CommonOutputJax2.prototype.getTestElement = function(node, display) {
        var adaptor = this.adaptor;
        if (!this.testInline) {
            this.testInline = this.html('mjx-test', {
                style: {
                    display: 'inline-block',
                    width: '100%',
                    'font-style': 'normal',
                    'font-weight': 'normal',
                    'font-size': '100%',
                    'font-size-adjust': 'none',
                    'text-indent': 0,
                    'text-transform': 'none',
                    'letter-spacing': 'normal',
                    'word-spacing': 'normal',
                    overflow: 'hidden',
                    height: '1px',
                    'margin-right': '-1px'
                }
            }, [
                this.html('mjx-left-box', {
                    style: {
                        display: 'inline-block',
                        width: 0,
                        'float': 'left'
                    }
                }),
                this.html('mjx-ex-box', {
                    style: {
                        position: 'absolute',
                        overflow: 'hidden',
                        width: '1px',
                        height: '60ex'
                    }
                }),
                this.html('mjx-right-box', {
                    style: {
                        display: 'inline-block',
                        width: 0,
                        'float': 'right'
                    }
                })
            ]);
            this.testDisplay = adaptor.clone(this.testInline);
            adaptor.setStyle(this.testDisplay, 'display', 'table');
            adaptor.setStyle(this.testDisplay, 'margin-right', '');
            adaptor.setStyle(adaptor.firstChild(this.testDisplay), 'display', 'none');
            var right = adaptor.lastChild(this.testDisplay);
            adaptor.setStyle(right, 'display', 'table-cell');
            adaptor.setStyle(right, 'width', '10000em');
            adaptor.setStyle(right, 'float', '');
        }
        return adaptor.append(node, adaptor.clone(display ? this.testDisplay : this.testInline));
    };
    CommonOutputJax2.prototype.measureMetrics = function(node, getFamily) {
        var adaptor = this.adaptor;
        var family = getFamily ? adaptor.fontFamily(node) : '';
        var em = adaptor.fontSize(node);
        var ex = adaptor.nodeSize(adaptor.childNode(node, 1))[1] / 60 || em * this.options.exFactor;
        var containerWidth = adaptor.getStyle(node, 'display') === 'table' ? adaptor.nodeSize(adaptor.lastChild(node))[0] - 1 : adaptor.nodeBBox(adaptor.lastChild(node)).left - adaptor.nodeBBox(adaptor.firstChild(node)).left - 2;
        var scale = Math.max(this.options.minScale, this.options.matchFontHeight ? ex / this.font.params.x_height / em : 1);
        var lineWidth = 1000000;
        return {
            em: em,
            ex: ex,
            containerWidth: containerWidth,
            lineWidth: lineWidth,
            scale: scale,
            family: family
        };
    };
    CommonOutputJax2.prototype.styleSheet = function(html) {
        var e_7, _a, e_8, _b;
        this.setDocument(html);
        this.cssStyles.clear();
        this.cssStyles.addStyles(this.constructor.commonStyles);
        if ('getStyles' in html) try {
            for(var _c = __values(html.getStyles()), _d = _c.next(); !_d.done; _d = _c.next()){
                var styles = _d.value;
                this.cssStyles.addStyles(styles);
            }
        } catch (e_7_1) {
            e_7 = {
                error: e_7_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_7) throw e_7.error;
            }
        }
        try {
            for(var _e = __values(this.factory.getKinds()), _f = _e.next(); !_f.done; _f = _e.next()){
                var kind = _f.value;
                this.addClassStyles(this.factory.getNodeClass(kind));
            }
        } catch (e_8_1) {
            e_8 = {
                error: e_8_1
            };
        } finally{
            try {
                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
            } finally{
                if (e_8) throw e_8.error;
            }
        }
        this.cssStyles.addStyles(this.font.styles);
        var sheet = this.html('style', {
            id: 'MJX-styles'
        }, [
            this.text('\n' + this.cssStyles.cssText + '\n')
        ]);
        return sheet;
    };
    CommonOutputJax2.prototype.addClassStyles = function(CLASS) {
        this.cssStyles.addStyles(CLASS.styles);
    };
    CommonOutputJax2.prototype.setDocument = function(html) {
        if (html) {
            this.document = html;
            this.adaptor.document = html.document;
        }
    };
    CommonOutputJax2.prototype.html = function(type, def, content, ns) {
        if (def === void 0) def = {
        };
        if (content === void 0) content = [];
        return this.adaptor.node(type, def, content, ns);
    };
    CommonOutputJax2.prototype.text = function(text) {
        return this.adaptor.text(text);
    };
    CommonOutputJax2.prototype.fixed = function(m, n) {
        if (n === void 0) n = 3;
        if (Math.abs(m) < 0.0006) return '0';
        return m.toFixed(n).replace(/\.?0+$/, '');
    };
    CommonOutputJax2.prototype.measureText = function(text, variant, font) {
        if (font === void 0) font = [
            '',
            false,
            false
        ];
        var node = this.unknownText(text, variant);
        if (variant === '-explicitFont') {
            var styles = this.cssFontStyles(font);
            this.adaptor.setAttributes(node, {
                style: styles
            });
        }
        return this.measureTextNodeWithCache(node, text, variant, font);
    };
    CommonOutputJax2.prototype.measureTextNodeWithCache = function(text, chars, variant, font) {
        if (font === void 0) font = [
            '',
            false,
            false
        ];
        if (variant === '-explicitFont') variant = [
            font[0],
            font[1] ? 'T' : 'F',
            font[2] ? 'T' : 'F',
            ''
        ].join('-');
        if (!this.unknownCache.has(variant)) this.unknownCache.set(variant, new Map());
        var map = this.unknownCache.get(variant);
        var cached = map.get(chars);
        if (cached) return cached;
        var bbox = this.measureTextNode(text);
        map.set(chars, bbox);
        return bbox;
    };
    CommonOutputJax2.prototype.measureXMLnode = function(xml) {
        var adaptor = this.adaptor;
        var content = this.html('mjx-xml-block', {
            style: {
                display: 'inline-block'
            }
        }, [
            adaptor.clone(xml)
        ]);
        var base = this.html('mjx-baseline', {
            style: {
                display: 'inline-block',
                width: 0,
                height: 0
            }
        });
        var style = {
            position: 'absolute',
            display: 'inline-block',
            'font-family': 'initial',
            'line-height': 'normal'
        };
        var node = this.html('mjx-measure-xml', {
            style: style
        }, [
            base,
            content
        ]);
        adaptor.append(adaptor.parent(this.math.start.node), this.container);
        adaptor.append(this.container, node);
        var em = this.math.metrics.em * this.math.metrics.scale;
        var _a = adaptor.nodeBBox(content), left = _a.left, right = _a.right, bottom = _a.bottom, top = _a.top;
        var w = (right - left) / em;
        var h = (adaptor.nodeBBox(base).top - top) / em;
        var d = (bottom - top) / em - h;
        adaptor.remove(this.container);
        adaptor.remove(node);
        return {
            w: w,
            h: h,
            d: d
        };
    };
    CommonOutputJax2.prototype.cssFontStyles = function(font, styles) {
        if (styles === void 0) styles = {
        };
        var _a = __read(font, 3), family = _a[0], italic = _a[1], bold = _a[2];
        styles['font-family'] = this.font.getFamily(family);
        if (italic) styles['font-style'] = 'italic';
        if (bold) styles['font-weight'] = 'bold';
        return styles;
    };
    CommonOutputJax2.prototype.getFontData = function(styles) {
        if (!styles) styles = new Styles_js_1.Styles();
        return [
            this.font.getFamily(styles.get('font-family')),
            styles.get('font-style') === 'italic',
            styles.get('font-weight') === 'bold'
        ];
    };
    CommonOutputJax2.NAME = 'Common';
    CommonOutputJax2.OPTIONS = __assign(__assign({
    }, OutputJax_js_1.AbstractOutputJax.OPTIONS), {
        scale: 1,
        minScale: 0.5,
        matchFontHeight: true,
        mtextInheritFont: false,
        merrorInheritFont: false,
        mtextFont: '',
        merrorFont: 'serif',
        mathmlSpacing: false,
        skipAttributes: {
        },
        exFactor: 0.5,
        displayAlign: 'center',
        displayIndent: '0',
        wrapperFactory: null,
        font: null,
        cssStyles: null
    });
    CommonOutputJax2.commonStyles = {
    };
    return CommonOutputJax2;
}(OutputJax_js_1.AbstractOutputJax);
exports.CommonOutputJax = CommonOutputJax1;

},{"../../core/OutputJax.js":"21x1A","../../core/MathItem.js":"4DW4E","../../util/Options.js":"3Dh3w","../../util/lengths.js":"5EoCW","../../util/Styles.js":"1RdZt","../../util/StyleList.js":"1stOH"}],"21x1A":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractOutputJax = void 0;
var Options_js_1 = require("../util/Options.js");
var FunctionList_js_1 = require("../util/FunctionList.js");
var AbstractOutputJax = function() {
    function AbstractOutputJax1(options) {
        if (options === void 0) options = {
        };
        this.adaptor = null;
        var CLASS = this.constructor;
        this.options = Options_js_1.userOptions(Options_js_1.defaultOptions({
        }, CLASS.OPTIONS), options);
        this.postFilters = new FunctionList_js_1.FunctionList();
    }
    Object.defineProperty(AbstractOutputJax1.prototype, "name", {
        get: function() {
            return this.constructor.NAME;
        },
        enumerable: false,
        configurable: true
    });
    AbstractOutputJax1.prototype.setAdaptor = function(adaptor) {
        this.adaptor = adaptor;
    };
    AbstractOutputJax1.prototype.initialize = function() {
    };
    AbstractOutputJax1.prototype.reset = function() {
        var _args = [];
        for(var _i = 0; _i < arguments.length; _i++)_args[_i] = arguments[_i];
    };
    AbstractOutputJax1.prototype.getMetrics = function(_document) {
    };
    AbstractOutputJax1.prototype.styleSheet = function(_document) {
        return null;
    };
    AbstractOutputJax1.prototype.pageElements = function(_document) {
        return null;
    };
    AbstractOutputJax1.prototype.executeFilters = function(filters, math, document, data) {
        var args = {
            math: math,
            document: document,
            data: data
        };
        filters.execute(args);
        return args.data;
    };
    AbstractOutputJax1.NAME = 'generic';
    AbstractOutputJax1.OPTIONS = {
    };
    return AbstractOutputJax1;
}();
exports.AbstractOutputJax = AbstractOutputJax;

},{"../util/Options.js":"3Dh3w","../util/FunctionList.js":"2ed3w"}],"1RdZt":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Styles = void 0;
var TRBL = [
    'top',
    'right',
    'bottom',
    'left'
];
var WSC = [
    'width',
    'style',
    'color'
];
function splitSpaces(text) {
    var parts = text.split(/((?:'[^']*'|"[^"]*"|,[\s\n]|[^\s\n])*)/g);
    var split = [];
    while(parts.length > 1){
        parts.shift();
        split.push(parts.shift());
    }
    return split;
}
function splitTRBL(name) {
    var e_1, _a;
    var parts = splitSpaces(this.styles[name]);
    if (parts.length === 0) parts.push('');
    if (parts.length === 1) parts.push(parts[0]);
    if (parts.length === 2) parts.push(parts[0]);
    if (parts.length === 3) parts.push(parts[1]);
    try {
        for(var _b = __values(Styles.connect[name].children), _c = _b.next(); !_c.done; _c = _b.next()){
            var child = _c.value;
            this.setStyle(this.childName(name, child), parts.shift());
        }
    } catch (e_1_1) {
        e_1 = {
            error: e_1_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        } finally{
            if (e_1) throw e_1.error;
        }
    }
}
function combineTRBL(name) {
    var e_2, _a;
    var children = Styles.connect[name].children;
    var parts = [];
    try {
        for(var children_1 = __values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()){
            var child = children_1_1.value;
            var part = this.styles[name + '-' + child];
            if (!part) {
                delete this.styles[name];
                return;
            }
            parts.push(part);
        }
    } catch (e_2_1) {
        e_2 = {
            error: e_2_1
        };
    } finally{
        try {
            if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);
        } finally{
            if (e_2) throw e_2.error;
        }
    }
    if (parts[3] === parts[1]) {
        parts.pop();
        if (parts[2] === parts[0]) {
            parts.pop();
            if (parts[1] === parts[0]) parts.pop();
        }
    }
    this.styles[name] = parts.join(' ');
}
function splitSame(name) {
    var e_3, _a;
    try {
        for(var _b = __values(Styles.connect[name].children), _c = _b.next(); !_c.done; _c = _b.next()){
            var child = _c.value;
            this.setStyle(this.childName(name, child), this.styles[name]);
        }
    } catch (e_3_1) {
        e_3 = {
            error: e_3_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        } finally{
            if (e_3) throw e_3.error;
        }
    }
}
function combineSame(name) {
    var e_4, _a;
    var children = __spreadArray([], __read(Styles.connect[name].children));
    var value = this.styles[this.childName(name, children.shift())];
    try {
        for(var children_2 = __values(children), children_2_1 = children_2.next(); !children_2_1.done; children_2_1 = children_2.next()){
            var child = children_2_1.value;
            if (this.styles[this.childName(name, child)] !== value) {
                delete this.styles[name];
                return;
            }
        }
    } catch (e_4_1) {
        e_4 = {
            error: e_4_1
        };
    } finally{
        try {
            if (children_2_1 && !children_2_1.done && (_a = children_2.return)) _a.call(children_2);
        } finally{
            if (e_4) throw e_4.error;
        }
    }
    this.styles[name] = value;
}
var BORDER = {
    width: /^(?:[\d.]+(?:[a-z]+)|thin|medium|thick|inherit|initial|unset)$/,
    style: /^(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit|initial|unset)$/
};
function splitWSC(name) {
    var e_5, _a, e_6, _b;
    var parts = {
        width: '',
        style: '',
        color: ''
    };
    try {
        for(var _c = __values(splitSpaces(this.styles[name])), _d = _c.next(); !_d.done; _d = _c.next()){
            var part = _d.value;
            if (part.match(BORDER.width) && parts.width === '') parts.width = part;
            else if (part.match(BORDER.style) && parts.style === '') parts.style = part;
            else parts.color = part;
        }
    } catch (e_5_1) {
        e_5 = {
            error: e_5_1
        };
    } finally{
        try {
            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
        } finally{
            if (e_5) throw e_5.error;
        }
    }
    try {
        for(var _e = __values(Styles.connect[name].children), _f = _e.next(); !_f.done; _f = _e.next()){
            var child = _f.value;
            this.setStyle(this.childName(name, child), parts[child]);
        }
    } catch (e_6_1) {
        e_6 = {
            error: e_6_1
        };
    } finally{
        try {
            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
        } finally{
            if (e_6) throw e_6.error;
        }
    }
}
function combineWSC(name) {
    var e_7, _a;
    var parts = [];
    try {
        for(var _b = __values(Styles.connect[name].children), _c = _b.next(); !_c.done; _c = _b.next()){
            var child = _c.value;
            var value = this.styles[this.childName(name, child)];
            if (value) parts.push(value);
        }
    } catch (e_7_1) {
        e_7 = {
            error: e_7_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        } finally{
            if (e_7) throw e_7.error;
        }
    }
    if (parts.length) this.styles[name] = parts.join(' ');
    else delete this.styles[name];
}
var FONT = {
    style: /^(?:normal|italic|oblique|inherit|initial|unset)$/,
    variant: new RegExp('^(?:' + [
        'normal|none',
        'inherit|initial|unset',
        'common-ligatures|no-common-ligatures',
        'discretionary-ligatures|no-discretionary-ligatures',
        'historical-ligatures|no-historical-ligatures',
        'contextual|no-contextual',
        '(?:stylistic|character-variant|swash|ornaments|annotation)\\([^)]*\\)',
        'small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps',
        'lining-nums|oldstyle-nums|proportional-nums|tabular-nums',
        'diagonal-fractions|stacked-fractions',
        'ordinal|slashed-zero',
        'jis78|jis83|jis90|jis04|simplified|traditional',
        'full-width|proportional-width',
        'ruby'
    ].join('|') + ')$'),
    weight: /^(?:normal|bold|bolder|lighter|[1-9]00|inherit|initial|unset)$/,
    stretch: new RegExp('^(?:' + [
        'normal',
        '(?:(?:ultra|extra|semi)-)?condensed',
        '(?:(?:semi|extra|ulta)-)?expanded',
        'inherit|initial|unset'
    ].join('|') + ')$'),
    size: new RegExp('^(?:' + [
        'xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller',
        '[\d.]+%|[\d.]+[a-z]+',
        'inherit|initial|unset'
    ].join('|') + ')' + '(?:\/(?:normal|[\d.\+](?:%|[a-z]+)?))?$')
};
function splitFont(name) {
    var e_8, _a, e_9, _b;
    var parts = splitSpaces(this.styles[name]);
    var value = {
        style: '',
        variant: [],
        weight: '',
        stretch: '',
        size: '',
        family: '',
        'line-height': ''
    };
    try {
        for(var parts_1 = __values(parts), parts_1_1 = parts_1.next(); !parts_1_1.done; parts_1_1 = parts_1.next()){
            var part = parts_1_1.value;
            value.family = part;
            try {
                for(var _c = (e_9 = void 0, __values(Object.keys(FONT))), _d = _c.next(); !_d.done; _d = _c.next()){
                    var name_1 = _d.value;
                    if ((Array.isArray(value[name_1]) || value[name_1] === '') && part.match(FONT[name_1])) {
                        if (name_1 === 'size') {
                            var _e = __read(part.split(/\//), 2), size = _e[0], height = _e[1];
                            value[name_1] = size;
                            if (height) value['line-height'] = height;
                        } else if (value.size === '') {
                            if (Array.isArray(value[name_1])) value[name_1].push(part);
                            else value[name_1] = part;
                        }
                    }
                }
            } catch (e_9_1) {
                e_9 = {
                    error: e_9_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                } finally{
                    if (e_9) throw e_9.error;
                }
            }
        }
    } catch (e_8_1) {
        e_8 = {
            error: e_8_1
        };
    } finally{
        try {
            if (parts_1_1 && !parts_1_1.done && (_a = parts_1.return)) _a.call(parts_1);
        } finally{
            if (e_8) throw e_8.error;
        }
    }
    saveFontParts(name, value);
    delete this.styles[name];
}
function saveFontParts(name, value) {
    var e_10, _a;
    try {
        for(var _b = __values(Styles.connect[name].children), _c = _b.next(); !_c.done; _c = _b.next()){
            var child = _c.value;
            var cname = this.childName(name, child);
            if (Array.isArray(value[child])) {
                var values = value[child];
                if (values.length) this.styles[cname] = values.join(' ');
            } else if (value[child] !== '') this.styles[cname] = value[child];
        }
    } catch (e_10_1) {
        e_10 = {
            error: e_10_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        } finally{
            if (e_10) throw e_10.error;
        }
    }
}
function combineFont(_name) {
}
var Styles = function() {
    function Styles1(cssText) {
        if (cssText === void 0) cssText = '';
        this.parse(cssText);
    }
    Object.defineProperty(Styles1.prototype, "cssText", {
        get: function() {
            var e_11, _a;
            var styles = [];
            try {
                for(var _b = __values(Object.keys(this.styles)), _c = _b.next(); !_c.done; _c = _b.next()){
                    var name_2 = _c.value;
                    var parent_1 = this.parentName(name_2);
                    if (!this.styles[parent_1]) styles.push(name_2 + ': ' + this.styles[name_2]);
                }
            } catch (e_11_1) {
                e_11 = {
                    error: e_11_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_11) throw e_11.error;
                }
            }
            return styles.join('; ');
        },
        enumerable: false,
        configurable: true
    });
    Styles1.prototype.set = function(name, value) {
        name = this.normalizeName(name);
        this.setStyle(name, value);
        if (Styles1.connect[name] && !Styles1.connect[name].combine) {
            this.combineChildren(name);
            delete this.styles[name];
        }
        while(name.match(/-/)){
            name = this.parentName(name);
            if (!Styles1.connect[name]) break;
            Styles1.connect[name].combine.call(this, name);
        }
    };
    Styles1.prototype.get = function(name) {
        name = this.normalizeName(name);
        return this.styles.hasOwnProperty(name) ? this.styles[name] : '';
    };
    Styles1.prototype.setStyle = function(name, value) {
        this.styles[name] = value;
        if (Styles1.connect[name] && Styles1.connect[name].children) Styles1.connect[name].split.call(this, name);
        if (value === '') delete this.styles[name];
    };
    Styles1.prototype.combineChildren = function(name) {
        var e_12, _a;
        var parent = this.parentName(name);
        try {
            for(var _b = __values(Styles1.connect[name].children), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                var cname = this.childName(parent, child);
                Styles1.connect[cname].combine.call(this, cname);
            }
        } catch (e_12_1) {
            e_12 = {
                error: e_12_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_12) throw e_12.error;
            }
        }
    };
    Styles1.prototype.parentName = function(name) {
        var parent = name.replace(/-[^-]*$/, '');
        return name === parent ? '' : parent;
    };
    Styles1.prototype.childName = function(name, child) {
        if (child.match(/-/)) return child;
        if (Styles1.connect[name] && !Styles1.connect[name].combine) {
            child += name.replace(/.*-/, '-');
            name = this.parentName(name);
        }
        return name + '-' + child;
    };
    Styles1.prototype.normalizeName = function(name) {
        return name.replace(/[A-Z]/g, function(c) {
            return '-' + c.toLowerCase();
        });
    };
    Styles1.prototype.parse = function(cssText) {
        if (cssText === void 0) cssText = '';
        var PATTERN = this.constructor.pattern;
        this.styles = {
        };
        var parts = cssText.replace(PATTERN.comment, '').split(PATTERN.style);
        while(parts.length > 1){
            var _a = __read(parts.splice(0, 3), 3), space = _a[0], name_3 = _a[1], value = _a[2];
            if (space.match(/[^\s\n]/)) return;
            this.set(name_3, value);
        }
    };
    Styles1.pattern = {
        style: /([-a-z]+)[\s\n]*:[\s\n]*((?:'[^']*'|"[^"]*"|\n|.)*?)[\s\n]*(?:;|$)/g,
        comment: /\/\*[^]*?\*\//g
    };
    Styles1.connect = {
        padding: {
            children: TRBL,
            split: splitTRBL,
            combine: combineTRBL
        },
        border: {
            children: TRBL,
            split: splitSame,
            combine: combineSame
        },
        'border-top': {
            children: WSC,
            split: splitWSC,
            combine: combineWSC
        },
        'border-right': {
            children: WSC,
            split: splitWSC,
            combine: combineWSC
        },
        'border-bottom': {
            children: WSC,
            split: splitWSC,
            combine: combineWSC
        },
        'border-left': {
            children: WSC,
            split: splitWSC,
            combine: combineWSC
        },
        'border-width': {
            children: TRBL,
            split: splitTRBL,
            combine: null
        },
        'border-style': {
            children: TRBL,
            split: splitTRBL,
            combine: null
        },
        'border-color': {
            children: TRBL,
            split: splitTRBL,
            combine: null
        },
        font: {
            children: [
                'style',
                'variant',
                'weight',
                'stretch',
                'line-height',
                'size',
                'family'
            ],
            split: splitFont,
            combine: combineFont
        }
    };
    return Styles1;
}();
exports.Styles = Styles;

},{}],"1stOH":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CssStyles = void 0;
var CssStyles = function() {
    function CssStyles1(styles) {
        if (styles === void 0) styles = null;
        this.styles = {
        };
        this.addStyles(styles);
    }
    Object.defineProperty(CssStyles1.prototype, "cssText", {
        get: function() {
            return this.getStyleString();
        },
        enumerable: false,
        configurable: true
    });
    CssStyles1.prototype.addStyles = function(styles) {
        var e_1, _a;
        if (!styles) return;
        try {
            for(var _b = __values(Object.keys(styles)), _c = _b.next(); !_c.done; _c = _b.next()){
                var style = _c.value;
                if (!this.styles[style]) this.styles[style] = {
                };
                Object.assign(this.styles[style], styles[style]);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    };
    CssStyles1.prototype.removeStyles = function() {
        var e_2, _a;
        var selectors = [];
        for(var _i = 0; _i < arguments.length; _i++)selectors[_i] = arguments[_i];
        try {
            for(var selectors_1 = __values(selectors), selectors_1_1 = selectors_1.next(); !selectors_1_1.done; selectors_1_1 = selectors_1.next()){
                var selector = selectors_1_1.value;
                delete this.styles[selector];
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (selectors_1_1 && !selectors_1_1.done && (_a = selectors_1.return)) _a.call(selectors_1);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    };
    CssStyles1.prototype.clear = function() {
        this.styles = {
        };
    };
    CssStyles1.prototype.getStyleString = function() {
        var e_3, _a;
        var selectors = Object.keys(this.styles);
        var defs = new Array(selectors.length);
        var i = 0;
        try {
            for(var selectors_2 = __values(selectors), selectors_2_1 = selectors_2.next(); !selectors_2_1.done; selectors_2_1 = selectors_2.next()){
                var selector = selectors_2_1.value;
                if (selector.startsWith('@font-face')) continue;
                defs[i++] = selector + ' {\n' + this.getStyleDefString(this.styles[selector]) + '\n}';
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (selectors_2_1 && !selectors_2_1.done && (_a = selectors_2.return)) _a.call(selectors_2);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        return defs.join('\n\n');
    };
    CssStyles1.prototype.getStyleDefString = function(styles) {
        var e_4, _a;
        var properties = Object.keys(styles);
        var values = new Array(properties.length);
        var i = 0;
        try {
            for(var properties_1 = __values(properties), properties_1_1 = properties_1.next(); !properties_1_1.done; properties_1_1 = properties_1.next()){
                var property = properties_1_1.value;
                values[i++] = '  ' + property + ': ' + styles[property] + ';';
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (properties_1_1 && !properties_1_1.done && (_a = properties_1.return)) _a.call(properties_1);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
        return values.join('\n');
    };
    return CssStyles1;
}();
exports.CssStyles = CssStyles;

},{}],"7inTT":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLWrapperFactory = void 0;
var WrapperFactory_js_1 = require("../common/WrapperFactory.js");
var Wrappers_js_1 = require("./Wrappers.js");
var CHTMLWrapperFactory1 = function(_super) {
    __extends(CHTMLWrapperFactory2, _super);
    function CHTMLWrapperFactory2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLWrapperFactory2.defaultNodes = Wrappers_js_1.CHTMLWrappers;
    return CHTMLWrapperFactory2;
}(WrapperFactory_js_1.CommonWrapperFactory);
exports.CHTMLWrapperFactory = CHTMLWrapperFactory1;

},{"../common/WrapperFactory.js":"764sy","./Wrappers.js":"247lW"}],"764sy":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonWrapperFactory = void 0;
var WrapperFactory_js_1 = require("../../core/Tree/WrapperFactory.js");
var CommonWrapperFactory1 = function(_super) {
    __extends(CommonWrapperFactory2, _super);
    function CommonWrapperFactory2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.jax = null;
        return _this;
    }
    Object.defineProperty(CommonWrapperFactory2.prototype, "Wrappers", {
        get: function() {
            return this.node;
        },
        enumerable: false,
        configurable: true
    });
    CommonWrapperFactory2.defaultNodes = {
    };
    return CommonWrapperFactory2;
}(WrapperFactory_js_1.AbstractWrapperFactory);
exports.CommonWrapperFactory = CommonWrapperFactory1;

},{"../../core/Tree/WrapperFactory.js":"5uP6g"}],"5uP6g":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractWrapperFactory = void 0;
var Factory_js_1 = require("./Factory.js");
var AbstractWrapperFactory1 = function(_super) {
    __extends(AbstractWrapperFactory2, _super);
    function AbstractWrapperFactory2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AbstractWrapperFactory2.prototype.wrap = function(node) {
        var args = [];
        for(var _i = 1; _i < arguments.length; _i++)args[_i - 1] = arguments[_i];
        return this.create.apply(this, __spreadArray([
            node.kind,
            node
        ], __read(args)));
    };
    return AbstractWrapperFactory2;
}(Factory_js_1.AbstractFactory);
exports.AbstractWrapperFactory = AbstractWrapperFactory1;

},{"./Factory.js":"3I6j8"}],"247lW":[function(require,module,exports) {
"use strict";
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLWrappers = void 0;
var Wrapper_js_1 = require("./Wrapper.js");
var math_js_1 = require("./Wrappers/math.js");
var mi_js_1 = require("./Wrappers/mi.js");
var mo_js_1 = require("./Wrappers/mo.js");
var mn_js_1 = require("./Wrappers/mn.js");
var ms_js_1 = require("./Wrappers/ms.js");
var mtext_js_1 = require("./Wrappers/mtext.js");
var mspace_js_1 = require("./Wrappers/mspace.js");
var mpadded_js_1 = require("./Wrappers/mpadded.js");
var menclose_js_1 = require("./Wrappers/menclose.js");
var mrow_js_1 = require("./Wrappers/mrow.js");
var mfenced_js_1 = require("./Wrappers/mfenced.js");
var mfrac_js_1 = require("./Wrappers/mfrac.js");
var msqrt_js_1 = require("./Wrappers/msqrt.js");
var mroot_js_1 = require("./Wrappers/mroot.js");
var msubsup_js_1 = require("./Wrappers/msubsup.js");
var munderover_js_1 = require("./Wrappers/munderover.js");
var mmultiscripts_js_1 = require("./Wrappers/mmultiscripts.js");
var mtable_js_1 = require("./Wrappers/mtable.js");
var mtr_js_1 = require("./Wrappers/mtr.js");
var mtd_js_1 = require("./Wrappers/mtd.js");
var maction_js_1 = require("./Wrappers/maction.js");
var mglyph_js_1 = require("./Wrappers/mglyph.js");
var semantics_js_1 = require("./Wrappers/semantics.js");
var TeXAtom_js_1 = require("./Wrappers/TeXAtom.js");
var TextNode_js_1 = require("./Wrappers/TextNode.js");
exports.CHTMLWrappers = (_a = {
}, _a[math_js_1.CHTMLmath.kind] = math_js_1.CHTMLmath, _a[mrow_js_1.CHTMLmrow.kind] = mrow_js_1.CHTMLmrow, _a[mrow_js_1.CHTMLinferredMrow.kind] = mrow_js_1.CHTMLinferredMrow, _a[mi_js_1.CHTMLmi.kind] = mi_js_1.CHTMLmi, _a[mo_js_1.CHTMLmo.kind] = mo_js_1.CHTMLmo, _a[mn_js_1.CHTMLmn.kind] = mn_js_1.CHTMLmn, _a[ms_js_1.CHTMLms.kind] = ms_js_1.CHTMLms, _a[mtext_js_1.CHTMLmtext.kind] = mtext_js_1.CHTMLmtext, _a[mspace_js_1.CHTMLmspace.kind] = mspace_js_1.CHTMLmspace, _a[mpadded_js_1.CHTMLmpadded.kind] = mpadded_js_1.CHTMLmpadded, _a[menclose_js_1.CHTMLmenclose.kind] = menclose_js_1.CHTMLmenclose, _a[mfrac_js_1.CHTMLmfrac.kind] = mfrac_js_1.CHTMLmfrac, _a[msqrt_js_1.CHTMLmsqrt.kind] = msqrt_js_1.CHTMLmsqrt, _a[mroot_js_1.CHTMLmroot.kind] = mroot_js_1.CHTMLmroot, _a[msubsup_js_1.CHTMLmsub.kind] = msubsup_js_1.CHTMLmsub, _a[msubsup_js_1.CHTMLmsup.kind] = msubsup_js_1.CHTMLmsup, _a[msubsup_js_1.CHTMLmsubsup.kind] = msubsup_js_1.CHTMLmsubsup, _a[munderover_js_1.CHTMLmunder.kind] = munderover_js_1.CHTMLmunder, _a[munderover_js_1.CHTMLmover.kind] = munderover_js_1.CHTMLmover, _a[munderover_js_1.CHTMLmunderover.kind] = munderover_js_1.CHTMLmunderover, _a[mmultiscripts_js_1.CHTMLmmultiscripts.kind] = mmultiscripts_js_1.CHTMLmmultiscripts, _a[mfenced_js_1.CHTMLmfenced.kind] = mfenced_js_1.CHTMLmfenced, _a[mtable_js_1.CHTMLmtable.kind] = mtable_js_1.CHTMLmtable, _a[mtr_js_1.CHTMLmtr.kind] = mtr_js_1.CHTMLmtr, _a[mtr_js_1.CHTMLmlabeledtr.kind] = mtr_js_1.CHTMLmlabeledtr, _a[mtd_js_1.CHTMLmtd.kind] = mtd_js_1.CHTMLmtd, _a[maction_js_1.CHTMLmaction.kind] = maction_js_1.CHTMLmaction, _a[mglyph_js_1.CHTMLmglyph.kind] = mglyph_js_1.CHTMLmglyph, _a[semantics_js_1.CHTMLsemantics.kind] = semantics_js_1.CHTMLsemantics, _a[semantics_js_1.CHTMLannotation.kind] = semantics_js_1.CHTMLannotation, _a[semantics_js_1.CHTMLannotationXML.kind] = semantics_js_1.CHTMLannotationXML, _a[semantics_js_1.CHTMLxml.kind] = semantics_js_1.CHTMLxml, _a[TeXAtom_js_1.CHTMLTeXAtom.kind] = TeXAtom_js_1.CHTMLTeXAtom, _a[TextNode_js_1.CHTMLTextNode.kind] = TextNode_js_1.CHTMLTextNode, _a[Wrapper_js_1.CHTMLWrapper.kind] = Wrapper_js_1.CHTMLWrapper, _a);

},{"./Wrapper.js":"7Bkom","./Wrappers/math.js":"6I088","./Wrappers/mi.js":"1nEW9","./Wrappers/mo.js":"FYPfo","./Wrappers/mn.js":"5Zcm2","./Wrappers/ms.js":"2SEfl","./Wrappers/mtext.js":"4t7Yn","./Wrappers/mspace.js":"5DinL","./Wrappers/mpadded.js":"1fV51","./Wrappers/menclose.js":"46LPD","./Wrappers/mrow.js":"3O9CD","./Wrappers/mfenced.js":"2PuLI","./Wrappers/mfrac.js":"2l04x","./Wrappers/msqrt.js":"SAz8G","./Wrappers/mroot.js":"mfGsc","./Wrappers/msubsup.js":"7AZIk","./Wrappers/munderover.js":"W0a6S","./Wrappers/mmultiscripts.js":"2t1TB","./Wrappers/mtable.js":"5mXzH","./Wrappers/mtr.js":"nCNe7","./Wrappers/mtd.js":"3TI6Z","./Wrappers/maction.js":"7077A","./Wrappers/mglyph.js":"7zIJu","./Wrappers/semantics.js":"6TgHg","./Wrappers/TeXAtom.js":"5dLUY","./Wrappers/TextNode.js":"2gqde"}],"7Bkom":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLWrapper = exports.SPACE = exports.FONTSIZE = void 0;
var LENGTHS = require("../../util/lengths.js");
var Wrapper_js_1 = require("../common/Wrapper.js");
var BBox_js_1 = require("../../util/BBox.js");
var MmlNode_js_1 = require("../../core/MmlTree/MmlNode.js");
exports.FONTSIZE = {
    '70.7%': 's',
    '70%': 's',
    '50%': 'ss',
    '60%': 'Tn',
    '85%': 'sm',
    '120%': 'lg',
    '144%': 'Lg',
    '173%': 'LG',
    '207%': 'hg',
    '249%': 'HG'
};
exports.SPACE = (_a = {
}, _a[LENGTHS.em(2 / 18)] = '1', _a[LENGTHS.em(3 / 18)] = '2', _a[LENGTHS.em(4 / 18)] = '3', _a[LENGTHS.em(5 / 18)] = '4', _a[LENGTHS.em(6 / 18)] = '5', _a);
var CHTMLWrapper1 = function(_super) {
    __extends(CHTMLWrapper2, _super);
    function CHTMLWrapper2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.chtml = null;
        return _this;
    }
    CHTMLWrapper2.prototype.toCHTML = function(parent) {
        var e_1, _a1;
        var chtml = this.standardCHTMLnode(parent);
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                child.toCHTML(chtml);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a1 = _b.return)) _a1.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    };
    CHTMLWrapper2.prototype.standardCHTMLnode = function(parent) {
        this.markUsed();
        var chtml = this.createCHTMLnode(parent);
        this.handleStyles();
        this.handleVariant();
        this.handleScale();
        this.handleColor();
        this.handleSpace();
        this.handleAttributes();
        this.handlePWidth();
        return chtml;
    };
    CHTMLWrapper2.prototype.markUsed = function() {
        this.constructor.used = true;
    };
    CHTMLWrapper2.prototype.createCHTMLnode = function(parent) {
        var href = this.node.attributes.get('href');
        if (href) parent = this.adaptor.append(parent, this.html('a', {
            href: href
        }));
        this.chtml = this.adaptor.append(parent, this.html('mjx-' + this.node.kind));
        return this.chtml;
    };
    CHTMLWrapper2.prototype.handleStyles = function() {
        if (!this.styles) return;
        var styles = this.styles.cssText;
        if (styles) {
            this.adaptor.setAttribute(this.chtml, 'style', styles);
            var family = this.styles.get('font-family');
            if (family) this.adaptor.setStyle(this.chtml, 'font-family', 'MJXZERO, ' + family);
        }
    };
    CHTMLWrapper2.prototype.handleVariant = function() {
        if (this.node.isToken && this.variant !== '-explicitFont') this.adaptor.setAttribute(this.chtml, 'class', (this.font.getVariant(this.variant) || this.font.getVariant('normal')).classes);
    };
    CHTMLWrapper2.prototype.handleScale = function() {
        this.setScale(this.chtml, this.bbox.rscale);
    };
    CHTMLWrapper2.prototype.setScale = function(chtml, rscale) {
        var scale = Math.abs(rscale - 1) < 0.001 ? 1 : rscale;
        if (chtml && scale !== 1) {
            var size = this.percent(scale);
            if (exports.FONTSIZE[size]) this.adaptor.setAttribute(chtml, 'size', exports.FONTSIZE[size]);
            else this.adaptor.setStyle(chtml, 'fontSize', size);
        }
        return chtml;
    };
    CHTMLWrapper2.prototype.handleSpace = function() {
        var e_2, _a1;
        try {
            for(var _b = __values([
                [
                    this.bbox.L,
                    'space',
                    'marginLeft'
                ],
                [
                    this.bbox.R,
                    'rspace',
                    'marginRight'
                ]
            ]), _c = _b.next(); !_c.done; _c = _b.next()){
                var data = _c.value;
                var _d = __read(data, 3), dimen = _d[0], name_1 = _d[1], margin = _d[2];
                if (dimen) {
                    var space = this.em(dimen);
                    if (exports.SPACE[space]) this.adaptor.setAttribute(this.chtml, name_1, exports.SPACE[space]);
                    else this.adaptor.setStyle(this.chtml, margin, space);
                }
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a1 = _b.return)) _a1.call(_b);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    };
    CHTMLWrapper2.prototype.handleColor = function() {
        var attributes = this.node.attributes;
        var mathcolor = attributes.getExplicit('mathcolor');
        var color = attributes.getExplicit('color');
        var mathbackground = attributes.getExplicit('mathbackground');
        var background = attributes.getExplicit('background');
        if (mathcolor || color) this.adaptor.setStyle(this.chtml, 'color', mathcolor || color);
        if (mathbackground || background) this.adaptor.setStyle(this.chtml, 'backgroundColor', mathbackground || background);
    };
    CHTMLWrapper2.prototype.handleAttributes = function() {
        var e_3, _a1, e_4, _b;
        var attributes = this.node.attributes;
        var defaults = attributes.getAllDefaults();
        var skip = CHTMLWrapper2.skipAttributes;
        try {
            for(var _c = __values(attributes.getExplicitNames()), _d = _c.next(); !_d.done; _d = _c.next()){
                var name_2 = _d.value;
                if (skip[name_2] === false || !(name_2 in defaults) && !skip[name_2] && !this.adaptor.hasAttribute(this.chtml, name_2)) this.adaptor.setAttribute(this.chtml, name_2, attributes.getExplicit(name_2));
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a1 = _c.return)) _a1.call(_c);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        if (attributes.get('class')) {
            var names = attributes.get('class').trim().split(/ +/);
            try {
                for(var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()){
                    var name_3 = names_1_1.value;
                    this.adaptor.addClass(this.chtml, name_3);
                }
            } catch (e_4_1) {
                e_4 = {
                    error: e_4_1
                };
            } finally{
                try {
                    if (names_1_1 && !names_1_1.done && (_b = names_1.return)) _b.call(names_1);
                } finally{
                    if (e_4) throw e_4.error;
                }
            }
        }
    };
    CHTMLWrapper2.prototype.handlePWidth = function() {
        if (this.bbox.pwidth) {
            if (this.bbox.pwidth === BBox_js_1.BBox.fullWidth) this.adaptor.setAttribute(this.chtml, 'width', 'full');
            else this.adaptor.setStyle(this.chtml, 'width', this.bbox.pwidth);
        }
    };
    CHTMLWrapper2.prototype.setIndent = function(chtml, align, shift) {
        var adaptor = this.adaptor;
        if (align === 'center' || align === 'left') {
            var L = this.getBBox().L;
            adaptor.setStyle(chtml, 'margin-left', this.em(shift + L));
        }
        if (align === 'center' || align === 'right') {
            var R = this.getBBox().R;
            adaptor.setStyle(chtml, 'margin-right', this.em(-shift + R));
        }
    };
    CHTMLWrapper2.prototype.drawBBox = function() {
        var _a1 = this.getBBox(), w = _a1.w, h = _a1.h, d = _a1.d, R = _a1.R;
        var box = this.html('mjx-box', {
            style: {
                opacity: 0.25,
                'margin-left': this.em(-w - R)
            }
        }, [
            this.html('mjx-box', {
                style: {
                    height: this.em(h),
                    width: this.em(w),
                    'background-color': 'red'
                }
            }),
            this.html('mjx-box', {
                style: {
                    height: this.em(d),
                    width: this.em(w),
                    'margin-left': this.em(-w),
                    'vertical-align': this.em(-d),
                    'background-color': 'green'
                }
            })
        ]);
        var node = this.chtml || this.parent.chtml;
        var size = this.adaptor.getAttribute(node, 'size');
        if (size) this.adaptor.setAttribute(box, 'size', size);
        var fontsize = this.adaptor.getStyle(node, 'fontSize');
        if (fontsize) this.adaptor.setStyle(box, 'fontSize', fontsize);
        this.adaptor.append(this.adaptor.parent(node), box);
        this.adaptor.setStyle(node, 'backgroundColor', '#FFEE00');
    };
    CHTMLWrapper2.prototype.html = function(type, def, content) {
        if (def === void 0) def = {
        };
        if (content === void 0) content = [];
        if (this.node instanceof MmlNode_js_1.AbstractMmlNode && this.node.beginLoc) {
            def['beginLoc'] = this.node.beginLoc;
            def['endLoc'] = this.node.endLoc;
        }
        return this.jax.html(type, def, content);
    };
    CHTMLWrapper2.prototype.text = function(text) {
        return this.jax.text(text);
    };
    CHTMLWrapper2.prototype.char = function(n) {
        return this.font.charSelector(n).substr(1);
    };
    CHTMLWrapper2.kind = 'unknown';
    CHTMLWrapper2.autoStyle = true;
    CHTMLWrapper2.used = false;
    return CHTMLWrapper2;
}(Wrapper_js_1.CommonWrapper);
exports.CHTMLWrapper = CHTMLWrapper1;

},{"../../util/lengths.js":"5EoCW","../common/Wrapper.js":"2G1pb","../../util/BBox.js":"2c5uM","../../core/MmlTree/MmlNode.js":"5Ogy3"}],"2G1pb":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonWrapper = void 0;
var Wrapper_js_1 = require("../../core/Tree/Wrapper.js");
var MmlNode_js_1 = require("../../core/MmlTree/MmlNode.js");
var string_js_1 = require("../../util/string.js");
var LENGTHS = require("../../util/lengths.js");
var Styles_js_1 = require("../../util/Styles.js");
var BBox_js_1 = require("../../util/BBox.js");
var FontData_js_1 = require("./FontData.js");
var SMALLSIZE = 2 / 18;
function MathMLSpace(script, size) {
    return script ? size < SMALLSIZE ? 0 : SMALLSIZE : size;
}
var CommonWrapper1 = function(_super) {
    __extends(CommonWrapper2, _super);
    function CommonWrapper2(factory, node, parent) {
        if (parent === void 0) parent = null;
        var _this = _super.call(this, factory, node) || this;
        _this.parent = null;
        _this.removedStyles = null;
        _this.styles = null;
        _this.variant = '';
        _this.bboxComputed = false;
        _this.stretch = FontData_js_1.NOSTRETCH;
        _this.font = null;
        _this.parent = parent;
        _this.font = factory.jax.font;
        _this.bbox = BBox_js_1.BBox.zero();
        _this.getStyles();
        _this.getVariant();
        _this.getScale();
        _this.getSpace();
        _this.childNodes = node.childNodes.map(function(child) {
            var wrapped = _this.wrap(child);
            if (wrapped.bbox.pwidth && (node.notParent || node.isKind('math'))) _this.bbox.pwidth = BBox_js_1.BBox.fullWidth;
            return wrapped;
        });
        return _this;
    }
    Object.defineProperty(CommonWrapper2.prototype, "jax", {
        get: function() {
            return this.factory.jax;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CommonWrapper2.prototype, "adaptor", {
        get: function() {
            return this.factory.jax.adaptor;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CommonWrapper2.prototype, "metrics", {
        get: function() {
            return this.factory.jax.math.metrics;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CommonWrapper2.prototype, "fixesPWidth", {
        get: function() {
            return !this.node.notParent && !this.node.isToken;
        },
        enumerable: false,
        configurable: true
    });
    CommonWrapper2.prototype.wrap = function(node, parent) {
        if (parent === void 0) parent = null;
        var wrapped = this.factory.wrap(node, parent || this);
        if (parent) parent.childNodes.push(wrapped);
        this.jax.nodeMap.set(node, wrapped);
        return wrapped;
    };
    CommonWrapper2.prototype.getBBox = function(save) {
        if (save === void 0) save = true;
        if (this.bboxComputed) return this.bbox;
        var bbox = save ? this.bbox : BBox_js_1.BBox.zero();
        this.computeBBox(bbox);
        this.bboxComputed = save;
        return bbox;
    };
    CommonWrapper2.prototype.computeBBox = function(bbox, recompute) {
        var e_1, _a;
        if (recompute === void 0) recompute = false;
        bbox.empty();
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                bbox.append(child.getBBox());
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        bbox.clean();
        if (this.fixesPWidth && this.setChildPWidths(recompute)) this.computeBBox(bbox, true);
    };
    CommonWrapper2.prototype.setChildPWidths = function(recompute, w, clear) {
        var e_2, _a;
        if (w === void 0) w = null;
        if (clear === void 0) clear = true;
        if (recompute) return false;
        if (clear) this.bbox.pwidth = '';
        var changed = false;
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                var cbox = child.getBBox();
                if (cbox.pwidth && child.setChildPWidths(recompute, w === null ? cbox.w : w, clear)) changed = true;
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
        return changed;
    };
    CommonWrapper2.prototype.invalidateBBox = function() {
        if (this.bboxComputed) {
            this.bboxComputed = false;
            if (this.parent) this.parent.invalidateBBox();
        }
    };
    CommonWrapper2.prototype.copySkewIC = function(bbox) {
        var first = this.childNodes[0];
        if (first && first.bbox.sk) bbox.sk = first.bbox.sk;
        var last = this.childNodes[this.childNodes.length - 1];
        if (last && last.bbox.ic) {
            bbox.ic = last.bbox.ic;
            bbox.w += bbox.ic;
        }
    };
    CommonWrapper2.prototype.getStyles = function() {
        var styleString = this.node.attributes.getExplicit('style');
        if (!styleString) return;
        var style = this.styles = new Styles_js_1.Styles(styleString);
        for(var i = 0, m = CommonWrapper2.removeStyles.length; i < m; i++){
            var id = CommonWrapper2.removeStyles[i];
            if (style.get(id)) {
                if (!this.removedStyles) this.removedStyles = {
                };
                this.removedStyles[id] = style.get(id);
                style.set(id, '');
            }
        }
    };
    CommonWrapper2.prototype.getVariant = function() {
        if (!this.node.isToken) return;
        var attributes = this.node.attributes;
        var variant = attributes.get('mathvariant');
        if (!attributes.getExplicit('mathvariant')) {
            var values = attributes.getList('fontfamily', 'fontweight', 'fontstyle');
            if (this.removedStyles) {
                var style = this.removedStyles;
                if (style.fontFamily) values.family = style.fontFamily;
                if (style.fontWeight) values.weight = style.fontWeight;
                if (style.fontStyle) values.style = style.fontStyle;
            }
            if (values.fontfamily) values.family = values.fontfamily;
            if (values.fontweight) values.weight = values.fontweight;
            if (values.fontstyle) values.style = values.fontstyle;
            if (values.weight && values.weight.match(/^\d+$/)) values.weight = parseInt(values.weight) > 600 ? 'bold' : 'normal';
            if (values.family) variant = this.explicitVariant(values.family, values.weight, values.style);
            else {
                if (this.node.getProperty('variantForm')) variant = '-tex-variant';
                variant = (CommonWrapper2.BOLDVARIANTS[values.weight] || {
                })[variant] || variant;
                variant = (CommonWrapper2.ITALICVARIANTS[values.style] || {
                })[variant] || variant;
            }
        }
        this.variant = variant;
    };
    CommonWrapper2.prototype.explicitVariant = function(fontFamily, fontWeight, fontStyle) {
        var style = this.styles;
        if (!style) style = this.styles = new Styles_js_1.Styles();
        style.set('fontFamily', fontFamily);
        if (fontWeight) style.set('fontWeight', fontWeight);
        if (fontStyle) style.set('fontStyle', fontStyle);
        return '-explicitFont';
    };
    CommonWrapper2.prototype.getScale = function() {
        var scale = 1, parent = this.parent;
        var pscale = parent ? parent.bbox.scale : 1;
        var attributes = this.node.attributes;
        var scriptlevel = Math.min(attributes.get('scriptlevel'), 2);
        var fontsize = attributes.get('fontsize');
        var mathsize = this.node.isToken || this.node.isKind('mstyle') ? attributes.get('mathsize') : attributes.getInherited('mathsize');
        if (scriptlevel !== 0) {
            scale = Math.pow(attributes.get('scriptsizemultiplier'), scriptlevel);
            var scriptminsize = this.length2em(attributes.get('scriptminsize'), 0.8, 1);
            if (scale < scriptminsize) scale = scriptminsize;
        }
        if (this.removedStyles && this.removedStyles.fontSize && !fontsize) fontsize = this.removedStyles.fontSize;
        if (fontsize && !attributes.getExplicit('mathsize')) mathsize = fontsize;
        if (mathsize !== '1') scale *= this.length2em(mathsize, 1, 1);
        this.bbox.scale = scale;
        this.bbox.rscale = scale / pscale;
    };
    CommonWrapper2.prototype.getSpace = function() {
        var isTop = this.isTopEmbellished();
        var hasSpacing = this.node.hasSpacingAttributes();
        if (this.jax.options.mathmlSpacing || hasSpacing) isTop && this.getMathMLSpacing();
        else this.getTeXSpacing(isTop, hasSpacing);
    };
    CommonWrapper2.prototype.getMathMLSpacing = function() {
        var node = this.node.coreMO();
        var child = node.coreParent();
        var parent = child.parent;
        if (!parent || !parent.isKind('mrow') || parent.childNodes.length === 1) return;
        var attributes = node.attributes;
        var isScript = attributes.get('scriptlevel') > 0;
        this.bbox.L = attributes.isSet('lspace') ? Math.max(0, this.length2em(attributes.get('lspace'))) : MathMLSpace(isScript, node.lspace);
        this.bbox.R = attributes.isSet('rspace') ? Math.max(0, this.length2em(attributes.get('rspace'))) : MathMLSpace(isScript, node.rspace);
        var n = parent.childIndex(child);
        if (n === 0) return;
        var prev = parent.childNodes[n - 1];
        if (!prev.isEmbellished) return;
        var bbox = this.jax.nodeMap.get(prev).getBBox();
        if (bbox.R) this.bbox.L = Math.max(0, this.bbox.L - bbox.R);
    };
    CommonWrapper2.prototype.getTeXSpacing = function(isTop, hasSpacing) {
        if (!hasSpacing) {
            var space = this.node.texSpacing();
            if (space) this.bbox.L = this.length2em(space);
        }
        if (isTop || hasSpacing) {
            var attributes = this.node.coreMO().attributes;
            if (attributes.isSet('lspace')) this.bbox.L = Math.max(0, this.length2em(attributes.get('lspace')));
            if (attributes.isSet('rspace')) this.bbox.R = Math.max(0, this.length2em(attributes.get('rspace')));
        }
    };
    CommonWrapper2.prototype.isTopEmbellished = function() {
        return this.node.isEmbellished && !(this.node.parent && this.node.parent.isEmbellished);
    };
    CommonWrapper2.prototype.core = function() {
        return this.jax.nodeMap.get(this.node.core());
    };
    CommonWrapper2.prototype.coreMO = function() {
        return this.jax.nodeMap.get(this.node.coreMO());
    };
    CommonWrapper2.prototype.getText = function() {
        var e_3, _a;
        var text = '';
        if (this.node.isToken) try {
            for(var _b = __values(this.node.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (child instanceof MmlNode_js_1.TextNode) text += child.getText();
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        return text;
    };
    CommonWrapper2.prototype.canStretch = function(direction) {
        this.stretch = FontData_js_1.NOSTRETCH;
        if (this.node.isEmbellished) {
            var core = this.core();
            if (core && core.node !== this.node) {
                if (core.canStretch(direction)) this.stretch = core.stretch;
            }
        }
        return this.stretch.dir !== 0;
    };
    CommonWrapper2.prototype.getAlignShift = function() {
        var _a;
        var _b = (_a = this.node.attributes).getList.apply(_a, __spreadArray([], __read(MmlNode_js_1.indentAttributes))), indentalign = _b.indentalign, indentshift = _b.indentshift, indentalignfirst = _b.indentalignfirst, indentshiftfirst = _b.indentshiftfirst;
        if (indentalignfirst !== 'indentalign') indentalign = indentalignfirst;
        if (indentalign === 'auto') indentalign = this.jax.options.displayAlign;
        if (indentshiftfirst !== 'indentshift') indentshift = indentshiftfirst;
        if (indentshift === 'auto') {
            indentshift = this.jax.options.displayIndent;
            if (indentalign === 'right' && !indentshift.match(/^\s*0[a-z]*\s*$/)) indentshift = ('-' + indentshift.trim()).replace(/^--/, '');
        }
        var shift = this.length2em(indentshift, this.metrics.containerWidth);
        return [
            indentalign,
            shift
        ];
    };
    CommonWrapper2.prototype.getAlignX = function(W, bbox, align) {
        return align === 'right' ? W - (bbox.w + bbox.R) * bbox.rscale : align === 'left' ? bbox.L * bbox.rscale : (W - bbox.w * bbox.rscale) / 2;
    };
    CommonWrapper2.prototype.getAlignY = function(H, D, h, d, align) {
        return align === 'top' ? H - h : align === 'bottom' ? d - D : align === 'center' ? (H - h - (D - d)) / 2 : 0;
    };
    CommonWrapper2.prototype.getWrapWidth = function(i) {
        return this.childNodes[i].getBBox().w;
    };
    CommonWrapper2.prototype.getChildAlign = function(_i) {
        return 'left';
    };
    CommonWrapper2.prototype.percent = function(m) {
        return LENGTHS.percent(m);
    };
    CommonWrapper2.prototype.em = function(m) {
        return LENGTHS.em(m);
    };
    CommonWrapper2.prototype.px = function(m, M) {
        if (M === void 0) M = -LENGTHS.BIGDIMEN;
        return LENGTHS.px(m, M, this.metrics.em);
    };
    CommonWrapper2.prototype.length2em = function(length, size, scale) {
        if (size === void 0) size = 1;
        if (scale === void 0) scale = null;
        if (scale === null) scale = this.bbox.scale;
        return LENGTHS.length2em(length, size, scale, this.jax.pxPerEm);
    };
    CommonWrapper2.prototype.unicodeChars = function(text, name) {
        if (name === void 0) name = this.variant;
        var chars = string_js_1.unicodeChars(text);
        var variant = this.font.getVariant(name);
        if (variant && variant.chars) {
            var map_1 = variant.chars;
            chars = chars.map(function(n) {
                return ((map_1[n] || [])[3] || {
                }).smp || n;
            });
        }
        return chars;
    };
    CommonWrapper2.prototype.remapChars = function(chars) {
        return chars;
    };
    CommonWrapper2.prototype.mmlText = function(text) {
        return this.node.factory.create('text').setText(text);
    };
    CommonWrapper2.prototype.mmlNode = function(kind, properties, children) {
        if (properties === void 0) properties = {
        };
        if (children === void 0) children = [];
        return this.node.factory.create(kind, properties, children);
    };
    CommonWrapper2.prototype.createMo = function(text) {
        var mmlFactory = this.node.factory;
        var textNode = mmlFactory.create('text').setText(text);
        var mml = mmlFactory.create('mo', {
            stretchy: true
        }, [
            textNode
        ]);
        mml.inheritAttributesFrom(this.node);
        var node = this.wrap(mml);
        node.parent = this;
        return node;
    };
    CommonWrapper2.prototype.getVariantChar = function(variant, n) {
        var char = this.font.getChar(variant, n) || [
            0,
            0,
            0,
            {
                unknown: true
            }
        ];
        if (char.length === 3) char[3] = {
        };
        return char;
    };
    CommonWrapper2.kind = 'unknown';
    CommonWrapper2.styles = {
    };
    CommonWrapper2.removeStyles = [
        'fontSize',
        'fontFamily',
        'fontWeight',
        'fontStyle',
        'fontVariant',
        'font'
    ];
    CommonWrapper2.skipAttributes = {
        fontfamily: true,
        fontsize: true,
        fontweight: true,
        fontstyle: true,
        color: true,
        background: true,
        'class': true,
        href: true,
        style: true,
        xmlns: true
    };
    CommonWrapper2.BOLDVARIANTS = {
        bold: {
            normal: 'bold',
            italic: 'bold-italic',
            fraktur: 'bold-fraktur',
            script: 'bold-script',
            'sans-serif': 'bold-sans-serif',
            'sans-serif-italic': 'sans-serif-bold-italic'
        },
        normal: {
            bold: 'normal',
            'bold-italic': 'italic',
            'bold-fraktur': 'fraktur',
            'bold-script': 'script',
            'bold-sans-serif': 'sans-serif',
            'sans-serif-bold-italic': 'sans-serif-italic'
        }
    };
    CommonWrapper2.ITALICVARIANTS = {
        italic: {
            normal: 'italic',
            bold: 'bold-italic',
            'sans-serif': 'sans-serif-italic',
            'bold-sans-serif': 'sans-serif-bold-italic'
        },
        normal: {
            italic: 'normal',
            'bold-italic': 'bold',
            'sans-serif-italic': 'sans-serif',
            'sans-serif-bold-italic': 'bold-sans-serif'
        }
    };
    return CommonWrapper2;
}(Wrapper_js_1.AbstractWrapper);
exports.CommonWrapper = CommonWrapper1;

},{"../../core/Tree/Wrapper.js":"1fZGX","../../core/MmlTree/MmlNode.js":"5Ogy3","../../util/string.js":"1fFM7","../../util/lengths.js":"5EoCW","../../util/Styles.js":"1RdZt","../../util/BBox.js":"2c5uM","./FontData.js":"7CKUF"}],"1fZGX":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractWrapper = void 0;
var AbstractWrapper = function() {
    function AbstractWrapper1(factory, node) {
        this.factory = factory;
        this.node = node;
    }
    Object.defineProperty(AbstractWrapper1.prototype, "kind", {
        get: function() {
            return this.node.kind;
        },
        enumerable: false,
        configurable: true
    });
    AbstractWrapper1.prototype.wrap = function(node) {
        return this.factory.wrap(node);
    };
    return AbstractWrapper1;
}();
exports.AbstractWrapper = AbstractWrapper;

},{}],"2c5uM":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BBox = exports.BBoxStyleAdjust = void 0;
var lengths_js_1 = require("./lengths.js");
exports.BBoxStyleAdjust = [
    [
        'borderTopWidth',
        'h'
    ],
    [
        'borderRightWidth',
        'w'
    ],
    [
        'borderBottomWidth',
        'd'
    ],
    [
        'borderLeftWidth',
        'w',
        0
    ],
    [
        'paddingTop',
        'h'
    ],
    [
        'paddingRight',
        'w'
    ],
    [
        'paddingBottom',
        'd'
    ],
    [
        'paddingLeft',
        'w',
        0
    ]
];
var BBox = function() {
    function BBox1(def) {
        if (def === void 0) def = {
            w: 0,
            h: -lengths_js_1.BIGDIMEN,
            d: -lengths_js_1.BIGDIMEN
        };
        this.w = def.w || 0;
        this.h = 'h' in def ? def.h : -lengths_js_1.BIGDIMEN;
        this.d = 'd' in def ? def.d : -lengths_js_1.BIGDIMEN;
        this.L = this.R = this.ic = this.sk = 0;
        this.scale = this.rscale = 1;
        this.pwidth = '';
    }
    BBox1.zero = function() {
        return new BBox1({
            h: 0,
            d: 0,
            w: 0
        });
    };
    BBox1.empty = function() {
        return new BBox1();
    };
    BBox1.prototype.empty = function() {
        this.w = 0;
        this.h = this.d = -lengths_js_1.BIGDIMEN;
        return this;
    };
    BBox1.prototype.clean = function() {
        if (this.w === -lengths_js_1.BIGDIMEN) this.w = 0;
        if (this.h === -lengths_js_1.BIGDIMEN) this.h = 0;
        if (this.d === -lengths_js_1.BIGDIMEN) this.d = 0;
    };
    BBox1.prototype.rescale = function(scale) {
        this.w *= scale;
        this.h *= scale;
        this.d *= scale;
    };
    BBox1.prototype.combine = function(cbox, x, y) {
        if (x === void 0) x = 0;
        if (y === void 0) y = 0;
        var rscale = cbox.rscale;
        var w = x + rscale * (cbox.w + cbox.L + cbox.R);
        var h = y + rscale * cbox.h;
        var d = rscale * cbox.d - y;
        if (w > this.w) this.w = w;
        if (h > this.h) this.h = h;
        if (d > this.d) this.d = d;
    };
    BBox1.prototype.append = function(cbox) {
        var scale = cbox.rscale;
        this.w += scale * (cbox.w + cbox.L + cbox.R);
        if (scale * cbox.h > this.h) this.h = scale * cbox.h;
        if (scale * cbox.d > this.d) this.d = scale * cbox.d;
    };
    BBox1.prototype.updateFrom = function(cbox) {
        this.h = cbox.h;
        this.d = cbox.d;
        this.w = cbox.w;
        if (cbox.pwidth) this.pwidth = cbox.pwidth;
    };
    BBox1.fullWidth = '100%';
    return BBox1;
}();
exports.BBox = BBox;

},{"./lengths.js":"5EoCW"}],"7CKUF":[function(require,module,exports) {
"use strict";
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.FontData = exports.NOSTRETCH = exports.H = exports.V = void 0;
var Options_js_1 = require("../../util/Options.js");
exports.V = 1;
exports.H = 2;
exports.NOSTRETCH = {
    dir: 0
};
var FontData = function() {
    function FontData1(options) {
        var e_1, _a, e_2, _b;
        if (options === void 0) options = null;
        this.variant = {
        };
        this.delimiters = {
        };
        this.cssFontMap = {
        };
        this.remapChars = {
        };
        this.skewIcFactor = 0.75;
        var CLASS = this.constructor;
        this.options = Options_js_1.userOptions(Options_js_1.defaultOptions({
        }, CLASS.OPTIONS), options);
        this.params = __assign({
        }, CLASS.defaultParams);
        this.sizeVariants = __spreadArray([], __read(CLASS.defaultSizeVariants));
        this.stretchVariants = __spreadArray([], __read(CLASS.defaultStretchVariants));
        this.cssFontMap = __assign({
        }, CLASS.defaultCssFonts);
        try {
            for(var _c = __values(Object.keys(this.cssFontMap)), _d = _c.next(); !_d.done; _d = _c.next()){
                var name_1 = _d.value;
                if (this.cssFontMap[name_1][0] === 'unknown') this.cssFontMap[name_1][0] = this.options.unknownFamily;
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        this.cssFamilyPrefix = CLASS.defaultCssFamilyPrefix;
        this.createVariants(CLASS.defaultVariants);
        this.defineDelimiters(CLASS.defaultDelimiters);
        try {
            for(var _e = __values(Object.keys(CLASS.defaultChars)), _f = _e.next(); !_f.done; _f = _e.next()){
                var name_2 = _f.value;
                this.defineChars(name_2, CLASS.defaultChars[name_2]);
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
        this.defineRemap('accent', CLASS.defaultAccentMap);
        this.defineRemap('mo', CLASS.defaultMoMap);
        this.defineRemap('mn', CLASS.defaultMnMap);
    }
    FontData1.charOptions = function(font, n) {
        var char = font[n];
        if (char.length === 3) char[3] = {
        };
        return char[3];
    };
    Object.defineProperty(FontData1.prototype, "styles", {
        get: function() {
            return this._styles;
        },
        set: function(style) {
            this._styles = style;
        },
        enumerable: false,
        configurable: true
    });
    FontData1.prototype.createVariant = function(name, inherit, link) {
        if (inherit === void 0) inherit = null;
        if (link === void 0) link = null;
        var variant = {
            linked: [],
            chars: inherit ? Object.create(this.variant[inherit].chars) : {
            }
        };
        if (link && this.variant[link]) {
            Object.assign(variant.chars, this.variant[link].chars);
            this.variant[link].linked.push(variant.chars);
            variant.chars = Object.create(variant.chars);
        }
        this.remapSmpChars(variant.chars, name);
        this.variant[name] = variant;
    };
    FontData1.prototype.remapSmpChars = function(chars, name) {
        var e_3, _a, e_4, _b;
        var CLASS = this.constructor;
        if (CLASS.VariantSmp[name]) {
            var SmpRemap = CLASS.SmpRemap;
            var SmpGreek = [
                null,
                null,
                CLASS.SmpRemapGreekU,
                CLASS.SmpRemapGreekL
            ];
            try {
                for(var _c = __values(CLASS.SmpRanges), _d = _c.next(); !_d.done; _d = _c.next()){
                    var _e = __read(_d.value, 3), i = _e[0], lo = _e[1], hi = _e[2];
                    var base = CLASS.VariantSmp[name][i];
                    if (!base) continue;
                    for(var n = lo; n <= hi; n++){
                        if (n === 930) continue;
                        var smp = base + n - lo;
                        chars[n] = this.smpChar(SmpRemap[smp] || smp);
                    }
                    if (SmpGreek[i]) try {
                        for(var _f = (e_4 = void 0, __values(Object.keys(SmpGreek[i]).map(function(x) {
                            return parseInt(x);
                        }))), _g = _f.next(); !_g.done; _g = _f.next()){
                            var n = _g.value;
                            chars[n] = this.smpChar(base + SmpGreek[i][n]);
                        }
                    } catch (e_4_1) {
                        e_4 = {
                            error: e_4_1
                        };
                    } finally{
                        try {
                            if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
                        } finally{
                            if (e_4) throw e_4.error;
                        }
                    }
                }
            } catch (e_3_1) {
                e_3 = {
                    error: e_3_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                } finally{
                    if (e_3) throw e_3.error;
                }
            }
        }
        if (name === 'bold') {
            chars[988] = this.smpChar(120778);
            chars[989] = this.smpChar(120779);
        }
    };
    FontData1.prototype.smpChar = function(n) {
        return [
            ,
            ,
            ,
            {
                smp: n
            }
        ];
    };
    FontData1.prototype.createVariants = function(variants) {
        var e_5, _a;
        try {
            for(var variants_1 = __values(variants), variants_1_1 = variants_1.next(); !variants_1_1.done; variants_1_1 = variants_1.next()){
                var variant = variants_1_1.value;
                this.createVariant(variant[0], variant[1], variant[2]);
            }
        } catch (e_5_1) {
            e_5 = {
                error: e_5_1
            };
        } finally{
            try {
                if (variants_1_1 && !variants_1_1.done && (_a = variants_1.return)) _a.call(variants_1);
            } finally{
                if (e_5) throw e_5.error;
            }
        }
    };
    FontData1.prototype.defineChars = function(name, chars) {
        var e_6, _a;
        var variant = this.variant[name];
        Object.assign(variant.chars, chars);
        try {
            for(var _b = __values(variant.linked), _c = _b.next(); !_c.done; _c = _b.next()){
                var link = _c.value;
                Object.assign(link, chars);
            }
        } catch (e_6_1) {
            e_6 = {
                error: e_6_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_6) throw e_6.error;
            }
        }
    };
    FontData1.prototype.defineDelimiters = function(delims) {
        Object.assign(this.delimiters, delims);
    };
    FontData1.prototype.defineRemap = function(name, remap) {
        if (!this.remapChars.hasOwnProperty(name)) this.remapChars[name] = {
        };
        Object.assign(this.remapChars[name], remap);
    };
    FontData1.prototype.getDelimiter = function(n) {
        return this.delimiters[n];
    };
    FontData1.prototype.getSizeVariant = function(n, i) {
        if (this.delimiters[n].variants) i = this.delimiters[n].variants[i];
        return this.sizeVariants[i];
    };
    FontData1.prototype.getStretchVariant = function(n, i) {
        return this.stretchVariants[this.delimiters[n].stretchv ? this.delimiters[n].stretchv[i] : 0];
    };
    FontData1.prototype.getChar = function(name, n) {
        return this.variant[name].chars[n];
    };
    FontData1.prototype.getVariant = function(name) {
        return this.variant[name];
    };
    FontData1.prototype.getCssFont = function(variant) {
        return this.cssFontMap[variant] || [
            'serif',
            false,
            false
        ];
    };
    FontData1.prototype.getFamily = function(family) {
        return this.cssFamilyPrefix ? this.cssFamilyPrefix + ', ' + family : family;
    };
    FontData1.prototype.getRemappedChar = function(name, c) {
        var map = this.remapChars[name] || {
        };
        return map[c];
    };
    FontData1.OPTIONS = {
        unknownFamily: 'serif'
    };
    FontData1.defaultVariants = [
        [
            'normal'
        ],
        [
            'bold',
            'normal'
        ],
        [
            'italic',
            'normal'
        ],
        [
            'bold-italic',
            'italic',
            'bold'
        ],
        [
            'double-struck',
            'bold'
        ],
        [
            'fraktur',
            'normal'
        ],
        [
            'bold-fraktur',
            'bold',
            'fraktur'
        ],
        [
            'script',
            'italic'
        ],
        [
            'bold-script',
            'bold-italic',
            'script'
        ],
        [
            'sans-serif',
            'normal'
        ],
        [
            'bold-sans-serif',
            'bold',
            'sans-serif'
        ],
        [
            'sans-serif-italic',
            'italic',
            'sans-serif'
        ],
        [
            'sans-serif-bold-italic',
            'bold-italic',
            'bold-sans-serif'
        ],
        [
            'monospace',
            'normal'
        ]
    ];
    FontData1.defaultCssFonts = {
        normal: [
            'unknown',
            false,
            false
        ],
        bold: [
            'unknown',
            false,
            true
        ],
        italic: [
            'unknown',
            true,
            false
        ],
        'bold-italic': [
            'unknown',
            true,
            true
        ],
        'double-struck': [
            'unknown',
            false,
            true
        ],
        fraktur: [
            'unknown',
            false,
            false
        ],
        'bold-fraktur': [
            'unknown',
            false,
            true
        ],
        script: [
            'cursive',
            false,
            false
        ],
        'bold-script': [
            'cursive',
            false,
            true
        ],
        'sans-serif': [
            'sans-serif',
            false,
            false
        ],
        'bold-sans-serif': [
            'sans-serif',
            false,
            true
        ],
        'sans-serif-italic': [
            'sans-serif',
            true,
            false
        ],
        'sans-serif-bold-italic': [
            'sans-serif',
            true,
            true
        ],
        monospace: [
            'monospace',
            false,
            false
        ]
    };
    FontData1.defaultCssFamilyPrefix = '';
    FontData1.VariantSmp = {
        bold: [
            119808,
            119834,
            120488,
            120514,
            120782
        ],
        italic: [
            119860,
            119886,
            120546,
            120572
        ],
        'bold-italic': [
            119912,
            119938,
            120604,
            120630
        ],
        script: [
            119964,
            119990
        ],
        'bold-script': [
            120016,
            120042
        ],
        fraktur: [
            120068,
            120094
        ],
        'double-struck': [
            120120,
            120146,
            ,
            ,
            120792
        ],
        'bold-fraktur': [
            120172,
            120198
        ],
        'sans-serif': [
            120224,
            120250,
            ,
            ,
            120802
        ],
        'bold-sans-serif': [
            120276,
            120302,
            120662,
            120688,
            120812
        ],
        'sans-serif-italic': [
            120328,
            120354
        ],
        'sans-serif-bold-italic': [
            120380,
            120406,
            120720,
            120746
        ],
        'monospace': [
            120432,
            120458,
            ,
            ,
            120822
        ]
    };
    FontData1.SmpRanges = [
        [
            0,
            65,
            90
        ],
        [
            1,
            97,
            122
        ],
        [
            2,
            913,
            937
        ],
        [
            3,
            945,
            969
        ],
        [
            4,
            48,
            57
        ]
    ];
    FontData1.SmpRemap = {
        119893: 8462,
        119965: 8492,
        119968: 8496,
        119969: 8497,
        119971: 8459,
        119972: 8464,
        119975: 8466,
        119976: 8499,
        119981: 8475,
        119994: 8495,
        119996: 8458,
        120004: 8500,
        120070: 8493,
        120075: 8460,
        120076: 8465,
        120085: 8476,
        120093: 8488,
        120122: 8450,
        120127: 8461,
        120133: 8469,
        120135: 8473,
        120136: 8474,
        120137: 8477,
        120145: 8484
    };
    FontData1.SmpRemapGreekU = {
        8711: 25,
        1012: 17
    };
    FontData1.SmpRemapGreekL = {
        977: 27,
        981: 29,
        982: 31,
        1008: 28,
        1009: 30,
        1013: 26,
        8706: 25
    };
    FontData1.defaultAccentMap = {
        768: '\u02CB',
        769: '\u02CA',
        770: '\u02C6',
        771: '\u02DC',
        772: '\u02C9',
        774: '\u02D8',
        775: '\u02D9',
        776: '\u00A8',
        778: '\u02DA',
        780: '\u02C7',
        8594: '\u20D7',
        8242: '\'',
        8243: '\'\'',
        8244: '\'\'\'',
        8245: '`',
        8246: '``',
        8247: '```',
        8279: '\'\'\'\'',
        8400: '\u21BC',
        8401: '\u21C0',
        8406: '\u2190',
        8417: '\u2194',
        8432: '*',
        8411: '...',
        8412: '....',
        8428: '\u21C1',
        8429: '\u21BD',
        8430: '\u2190',
        8431: '\u2192'
    };
    FontData1.defaultMoMap = {
        45: '\u2212'
    };
    FontData1.defaultMnMap = {
        45: '\u2212'
    };
    FontData1.defaultParams = {
        x_height: 0.442,
        quad: 1,
        num1: 0.676,
        num2: 0.394,
        num3: 0.444,
        denom1: 0.686,
        denom2: 0.345,
        sup1: 0.413,
        sup2: 0.363,
        sup3: 0.289,
        sub1: 0.15,
        sub2: 0.247,
        sup_drop: 0.386,
        sub_drop: 0.05,
        delim1: 2.39,
        delim2: 1,
        axis_height: 0.25,
        rule_thickness: 0.06,
        big_op_spacing1: 0.111,
        big_op_spacing2: 0.167,
        big_op_spacing3: 0.2,
        big_op_spacing4: 0.6,
        big_op_spacing5: 0.1,
        surd_height: 0.075,
        scriptspace: 0.05,
        nulldelimiterspace: 0.12,
        delimiterfactor: 901,
        delimitershortfall: 0.3,
        min_rule_thickness: 1.25,
        separation_factor: 1.75,
        extra_ic: 0.033
    };
    FontData1.defaultDelimiters = {
    };
    FontData1.defaultChars = {
    };
    FontData1.defaultSizeVariants = [];
    FontData1.defaultStretchVariants = [];
    return FontData1;
}();
exports.FontData = FontData;

},{"../../util/Options.js":"3Dh3w"}],"6I088":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmath = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var math_js_1 = require("../../common/Wrappers/math.js");
var math_js_2 = require("../../../core/MmlTree/MmlNodes/math.js");
var BBox_js_1 = require("../../../util/BBox.js");
var CHTMLmath1 = function(_super) {
    __extends(CHTMLmath2, _super);
    function CHTMLmath2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmath2.prototype.toCHTML = function(parent) {
        _super.prototype.toCHTML.call(this, parent);
        var chtml = this.chtml;
        var adaptor = this.adaptor;
        var display = this.node.attributes.get('display') === 'block';
        if (display) {
            adaptor.setAttribute(chtml, 'display', 'true');
            adaptor.setAttribute(parent, 'display', 'true');
            this.handleDisplay(parent);
        } else this.handleInline(parent);
        adaptor.addClass(chtml, 'MJX-TEX');
    };
    CHTMLmath2.prototype.handleDisplay = function(parent) {
        var adaptor = this.adaptor;
        var _a = __read(this.getAlignShift(), 2), align = _a[0], shift = _a[1];
        if (align !== 'center') adaptor.setAttribute(parent, 'justify', align);
        if (this.bbox.pwidth === BBox_js_1.BBox.fullWidth) {
            adaptor.setAttribute(parent, 'width', 'full');
            if (this.jax.table) {
                var _b = this.jax.table.getBBox(), L = _b.L, w = _b.w, R = _b.R;
                if (align === 'right') R = Math.max(R || -shift, -shift);
                else if (align === 'left') L = Math.max(L || shift, shift);
                else if (align === 'center') w += 2 * Math.abs(shift);
                var W = this.em(Math.max(0, L + w + R));
                adaptor.setStyle(parent, 'min-width', W);
                adaptor.setStyle(this.jax.table.chtml, 'min-width', W);
            }
        } else this.setIndent(this.chtml, align, shift);
    };
    CHTMLmath2.prototype.handleInline = function(parent) {
        var adaptor = this.adaptor;
        var margin = adaptor.getStyle(this.chtml, 'margin-right');
        if (margin) {
            adaptor.setStyle(this.chtml, 'margin-right', '');
            adaptor.setStyle(parent, 'margin-right', margin);
            adaptor.setStyle(parent, 'width', '0');
        }
    };
    CHTMLmath2.prototype.setChildPWidths = function(recompute, w, clear) {
        if (w === void 0) w = null;
        if (clear === void 0) clear = true;
        return this.parent ? _super.prototype.setChildPWidths.call(this, recompute, w, clear) : false;
    };
    CHTMLmath2.kind = math_js_2.MmlMath.prototype.kind;
    CHTMLmath2.styles = {
        'mjx-math': {
            'line-height': 0,
            'text-align': 'left',
            'text-indent': 0,
            'font-style': 'normal',
            'font-weight': 'normal',
            'font-size': '100%',
            'font-size-adjust': 'none',
            'letter-spacing': 'normal',
            'word-wrap': 'normal',
            'word-spacing': 'normal',
            'white-space': 'nowrap',
            'direction': 'ltr',
            'padding': '1px 0'
        },
        'mjx-container[jax="CHTML"][display="true"]': {
            display: 'block',
            'text-align': 'center',
            margin: '1em 0'
        },
        'mjx-container[jax="CHTML"][display="true"][width="full"]': {
            display: 'flex'
        },
        'mjx-container[jax="CHTML"][display="true"] mjx-math': {
            padding: 0
        },
        'mjx-container[jax="CHTML"][justify="left"]': {
            'text-align': 'left'
        },
        'mjx-container[jax="CHTML"][justify="right"]': {
            'text-align': 'right'
        }
    };
    return CHTMLmath2;
}(math_js_1.CommonMathMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmath = CHTMLmath1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/math.js":"5VPbz","../../../core/MmlTree/MmlNodes/math.js":"62X5t","../../../util/BBox.js":"2c5uM"}],"5VPbz":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMathMixin = void 0;
function CommonMathMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.getWrapWidth = function(_i) {
            return this.parent ? this.getBBox().w : this.metrics.containerWidth / this.jax.pxPerEm;
        };
        return class_1;
    })(Base);
}
exports.CommonMathMixin = CommonMathMixin;

},{}],"62X5t":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMath = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMath1 = function(_super) {
    __extends(MmlMath2, _super);
    function MmlMath2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMath2.prototype, "kind", {
        get: function() {
            return 'math';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMath2.prototype, "linebreakContainer", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMath2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        if (this.attributes.get('mode') === 'display') this.attributes.setInherited('display', 'block');
        attributes = this.addInheritedAttributes(attributes, this.attributes.getAllAttributes());
        display = !!this.attributes.get('displaystyle') || !this.attributes.get('displaystyle') && this.attributes.get('display') === 'block';
        this.attributes.setInherited('displaystyle', display);
        level = this.attributes.get('scriptlevel') || this.constructor.defaults['scriptlevel'];
        _super.prototype.setChildInheritedAttributes.call(this, attributes, display, level, prime);
    };
    MmlMath2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlLayoutNode.defaults), {
        mathvariant: 'normal',
        mathsize: 'normal',
        mathcolor: '',
        mathbackground: 'transparent',
        dir: 'ltr',
        scriptlevel: 0,
        displaystyle: false,
        display: 'inline',
        maxwidth: '',
        overflow: 'linebreak',
        altimg: '',
        'altimg-width': '',
        'altimg-height': '',
        'altimg-valign': '',
        alttext: '',
        cdgroup: '',
        scriptsizemultiplier: 1 / Math.sqrt(2),
        scriptminsize: '8px',
        infixlinebreakstyle: 'before',
        lineleading: '1ex',
        linebreakmultchar: '\u2062',
        indentshift: 'auto',
        indentalign: 'auto',
        indenttarget: '',
        indentalignfirst: 'indentalign',
        indentshiftfirst: 'indentshift',
        indentalignlast: 'indentalign',
        indentshiftlast: 'indentshift'
    });
    return MmlMath2;
}(MmlNode_js_1.AbstractMmlLayoutNode);
exports.MmlMath = MmlMath1;

},{"../MmlNode.js":"5Ogy3"}],"1nEW9":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmi = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mi_js_1 = require("../../common/Wrappers/mi.js");
var mi_js_2 = require("../../../core/MmlTree/MmlNodes/mi.js");
var CHTMLmi1 = function(_super) {
    __extends(CHTMLmi2, _super);
    function CHTMLmi2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmi2.kind = mi_js_2.MmlMi.prototype.kind;
    return CHTMLmi2;
}(mi_js_1.CommonMiMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmi = CHTMLmi1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mi.js":"2rrSR","../../../core/MmlTree/MmlNodes/mi.js":"1tgVO"}],"2rrSR":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMiMixin = void 0;
function CommonMiMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.computeBBox = function(bbox, _recompute) {
            if (_recompute === void 0) _recompute = false;
            _super.prototype.computeBBox.call(this, bbox);
            this.copySkewIC(bbox);
        };
        return class_1;
    })(Base);
}
exports.CommonMiMixin = CommonMiMixin;

},{}],"1tgVO":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMi = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMi1 = function(_super) {
    __extends(MmlMi2, _super);
    function MmlMi2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMi2.prototype, "kind", {
        get: function() {
            return 'mi';
        },
        enumerable: false,
        configurable: true
    });
    MmlMi2.prototype.setInheritedAttributes = function(attributes, display, level, prime) {
        if (attributes === void 0) attributes = {
        };
        if (display === void 0) display = false;
        if (level === void 0) level = 0;
        if (prime === void 0) prime = false;
        _super.prototype.setInheritedAttributes.call(this, attributes, display, level, prime);
        var text = this.getText();
        if (text.match(MmlMi2.singleCharacter) && !attributes.mathvariant) this.attributes.setInherited('mathvariant', 'italic');
    };
    MmlMi2.prototype.setTeXclass = function(prev) {
        this.getPrevClass(prev);
        var name = this.getText();
        if (name.length > 1 && name.match(MmlMi2.operatorName) && this.attributes.get('mathvariant') === 'normal' && this.getProperty('autoOP') === undefined && this.getProperty('texClass') === undefined) {
            this.texClass = MmlNode_js_1.TEXCLASS.OP;
            this.setProperty('autoOP', true);
        }
        return this;
    };
    MmlMi2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlTokenNode.defaults);
    MmlMi2.operatorName = /^[a-z][a-z0-9]*$/i;
    MmlMi2.singleCharacter = /^[\uD800-\uDBFF]?.[\u0300-\u036F\u1AB0-\u1ABE\u1DC0-\u1DFF\u20D0-\u20EF]*$/;
    return MmlMi2;
}(MmlNode_js_1.AbstractMmlTokenNode);
exports.MmlMi = MmlMi1;

},{"../MmlNode.js":"5Ogy3"}],"FYPfo":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmo = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mo_js_1 = require("../../common/Wrappers/mo.js");
var mo_js_2 = require("../../../core/MmlTree/MmlNodes/mo.js");
var CHTMLmo1 = function(_super) {
    __extends(CHTMLmo2, _super);
    function CHTMLmo2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmo2.prototype.toCHTML = function(parent) {
        var e_1, _a;
        var attributes = this.node.attributes;
        var symmetric = attributes.get('symmetric') && this.stretch.dir !== 2;
        var stretchy = this.stretch.dir !== 0;
        if (stretchy && this.size === null) this.getStretchedVariant([]);
        var chtml = this.standardCHTMLnode(parent);
        if (stretchy && this.size < 0) this.stretchHTML(chtml);
        else {
            if (symmetric || attributes.get('largeop')) {
                var u = this.em(this.getCenterOffset());
                if (u !== '0') this.adaptor.setStyle(chtml, 'verticalAlign', u);
            }
            if (this.node.getProperty('mathaccent')) {
                this.adaptor.setStyle(chtml, 'width', '0');
                this.adaptor.setStyle(chtml, 'margin-left', this.em(this.getAccentOffset()));
            }
            try {
                for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                    var child = _c.value;
                    child.toCHTML(chtml);
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
        }
    };
    CHTMLmo2.prototype.stretchHTML = function(chtml) {
        var c = this.getText().codePointAt(0);
        var delim = this.stretch;
        delim.used = true;
        var stretch = delim.stretch;
        var content = [];
        if (stretch[0]) content.push(this.html('mjx-beg', {
        }, [
            this.html('mjx-c')
        ]));
        content.push(this.html('mjx-ext', {
        }, [
            this.html('mjx-c')
        ]));
        if (stretch.length === 4) content.push(this.html('mjx-mid', {
        }, [
            this.html('mjx-c')
        ]), this.html('mjx-ext', {
        }, [
            this.html('mjx-c')
        ]));
        if (stretch[2]) content.push(this.html('mjx-end', {
        }, [
            this.html('mjx-c')
        ]));
        var styles = {
        };
        var _a = this.bbox, h = _a.h, d = _a.d, w = _a.w;
        if (delim.dir === 1) {
            content.push(this.html('mjx-mark'));
            styles.height = this.em(h + d);
            styles.verticalAlign = this.em(-d);
        } else styles.width = this.em(w);
        var dir = mo_js_1.DirectionVH[delim.dir];
        var properties = {
            class: this.char(delim.c || c),
            style: styles
        };
        var html = this.html('mjx-stretchy-' + dir, properties, content);
        this.adaptor.append(chtml, html);
    };
    CHTMLmo2.kind = mo_js_2.MmlMo.prototype.kind;
    CHTMLmo2.styles = {
        'mjx-stretchy-h': {
            display: 'inline-table',
            width: '100%'
        },
        'mjx-stretchy-h > *': {
            display: 'table-cell',
            width: 0
        },
        'mjx-stretchy-h > * > mjx-c': {
            display: 'inline-block',
            transform: 'scalex(1.0000001)'
        },
        'mjx-stretchy-h > * > mjx-c::before': {
            display: 'inline-block',
            width: 'initial'
        },
        'mjx-stretchy-h > mjx-ext': {
            overflow: 'hidden',
            width: '100%'
        },
        'mjx-stretchy-h > mjx-ext > mjx-c::before': {
            transform: 'scalex(500)'
        },
        'mjx-stretchy-h > mjx-ext > mjx-c': {
            width: 0
        },
        'mjx-stretchy-h > mjx-beg > mjx-c': {
            'margin-right': '-.1em'
        },
        'mjx-stretchy-h > mjx-end > mjx-c': {
            'margin-left': '-.1em'
        },
        'mjx-stretchy-v': {
            display: 'inline-block'
        },
        'mjx-stretchy-v > *': {
            display: 'block'
        },
        'mjx-stretchy-v > mjx-beg': {
            height: 0
        },
        'mjx-stretchy-v > mjx-end > mjx-c': {
            display: 'block'
        },
        'mjx-stretchy-v > * > mjx-c': {
            transform: 'scaley(1.0000001)',
            'transform-origin': 'left center',
            overflow: 'hidden'
        },
        'mjx-stretchy-v > mjx-ext': {
            display: 'block',
            height: '100%',
            'box-sizing': 'border-box',
            border: '0px solid transparent',
            overflow: 'hidden'
        },
        'mjx-stretchy-v > mjx-ext > mjx-c::before': {
            width: 'initial',
            'box-sizing': 'border-box'
        },
        'mjx-stretchy-v > mjx-ext > mjx-c': {
            transform: 'scaleY(500) translateY(.075em)',
            overflow: 'visible'
        },
        'mjx-mark': {
            display: 'inline-block',
            height: '0px'
        }
    };
    return CHTMLmo2;
}(mo_js_1.CommonMoMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmo = CHTMLmo1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mo.js":"3k5r4","../../../core/MmlTree/MmlNodes/mo.js":"6qwvK"}],"3k5r4":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMoMixin = exports.DirectionVH = void 0;
var BBox_js_1 = require("../../../util/BBox.js");
var string_js_1 = require("../../../util/string.js");
var FontData_js_1 = require("../FontData.js");
exports.DirectionVH = (_a = {
}, _a[1] = 'v', _a[2] = 'h', _a);
function CommonMoMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.size = null;
            _this.isAccent = _this.node.isAccent;
            return _this;
        }
        class_1.prototype.computeBBox = function(bbox, _recompute) {
            if (_recompute === void 0) _recompute = false;
            this.protoBBox(bbox);
            if (this.node.attributes.get('symmetric') && this.stretch.dir !== 2) {
                var d = this.getCenterOffset(bbox);
                bbox.h += d;
                bbox.d -= d;
            }
            if (this.node.getProperty('mathaccent') && (this.stretch.dir === 0 || this.size >= 0)) bbox.w = 0;
        };
        class_1.prototype.protoBBox = function(bbox) {
            var stretchy = this.stretch.dir !== 0;
            if (stretchy && this.size === null) this.getStretchedVariant([
                0
            ]);
            if (stretchy && this.size < 0) return;
            _super.prototype.computeBBox.call(this, bbox);
            this.copySkewIC(bbox);
        };
        class_1.prototype.getAccentOffset = function() {
            var bbox = BBox_js_1.BBox.empty();
            this.protoBBox(bbox);
            return -bbox.w / 2;
        };
        class_1.prototype.getCenterOffset = function(bbox) {
            if (bbox === void 0) bbox = null;
            if (!bbox) {
                bbox = BBox_js_1.BBox.empty();
                _super.prototype.computeBBox.call(this, bbox);
            }
            return (bbox.h + bbox.d) / 2 + this.font.params.axis_height - bbox.h;
        };
        class_1.prototype.getVariant = function() {
            if (this.node.attributes.get('largeop')) {
                this.variant = this.node.attributes.get('displaystyle') ? '-largeop' : '-smallop';
                return;
            }
            if (!this.node.attributes.getExplicit('mathvariant') && this.node.getProperty('pseudoscript') === false) {
                this.variant = '-tex-variant';
                return;
            }
            _super.prototype.getVariant.call(this);
        };
        class_1.prototype.canStretch = function(direction) {
            if (this.stretch.dir !== 0) return this.stretch.dir === direction;
            var attributes = this.node.attributes;
            if (!attributes.get('stretchy')) return false;
            var c = this.getText();
            if (Array.from(c).length !== 1) return false;
            var delim = this.font.getDelimiter(c.codePointAt(0));
            this.stretch = delim && delim.dir === direction ? delim : FontData_js_1.NOSTRETCH;
            return this.stretch.dir !== 0;
        };
        class_1.prototype.getStretchedVariant = function(WH, exact) {
            var e_1, _a1;
            if (exact === void 0) exact = false;
            if (this.stretch.dir !== 0) {
                var D = this.getWH(WH);
                var min = this.getSize('minsize', 0);
                var max = this.getSize('maxsize', Infinity);
                var mathaccent = this.node.getProperty('mathaccent');
                D = Math.max(min, Math.min(max, D));
                var df = this.font.params.delimiterfactor / 1000;
                var ds = this.font.params.delimitershortfall;
                var m = min || exact ? D : mathaccent ? Math.min(D / df, D + ds) : Math.max(D * df, D - ds);
                var delim = this.stretch;
                var c = delim.c || this.getText().codePointAt(0);
                var i = 0;
                if (delim.sizes) try {
                    for(var _b = __values(delim.sizes), _c = _b.next(); !_c.done; _c = _b.next()){
                        var d = _c.value;
                        if (d >= m) {
                            if (mathaccent && i) i--;
                            this.variant = this.font.getSizeVariant(c, i);
                            this.size = i;
                            if (delim.schar && delim.schar[i]) this.stretch.c = delim.schar[i];
                            return;
                        }
                        i++;
                    }
                } catch (e_1_1) {
                    e_1 = {
                        error: e_1_1
                    };
                } finally{
                    try {
                        if (_c && !_c.done && (_a1 = _b.return)) _a1.call(_b);
                    } finally{
                        if (e_1) throw e_1.error;
                    }
                }
                if (delim.stretch) {
                    this.size = -1;
                    this.invalidateBBox();
                    this.getStretchBBox(WH, this.checkExtendedHeight(D, delim), delim);
                } else {
                    this.variant = this.font.getSizeVariant(c, i - 1);
                    this.size = i - 1;
                }
            }
        };
        class_1.prototype.getSize = function(name, value) {
            var attributes = this.node.attributes;
            if (attributes.isSet(name)) value = this.length2em(attributes.get(name), 1, 1);
            return value;
        };
        class_1.prototype.getWH = function(WH) {
            if (WH.length === 0) return 0;
            if (WH.length === 1) return WH[0];
            var _a1 = __read(WH, 2), H = _a1[0], D = _a1[1];
            var a = this.font.params.axis_height;
            return this.node.attributes.get('symmetric') ? 2 * Math.max(H - a, D + a) : H + D;
        };
        class_1.prototype.getStretchBBox = function(WHD, D, C) {
            var _a1;
            if (C.hasOwnProperty('min') && C.min > D) D = C.min;
            var _b = __read(C.HDW, 3), h = _b[0], d = _b[1], w = _b[2];
            if (this.stretch.dir === 1) _a1 = __read(this.getBaseline(WHD, D, C), 2), h = _a1[0], d = _a1[1];
            else w = D;
            this.bbox.h = h;
            this.bbox.d = d;
            this.bbox.w = w;
        };
        class_1.prototype.getBaseline = function(WHD, HD, C) {
            var hasWHD = WHD.length === 2 && WHD[0] + WHD[1] === HD;
            var symmetric = this.node.attributes.get('symmetric');
            var _a1 = __read(hasWHD ? WHD : [
                HD,
                0
            ], 2), H = _a1[0], D = _a1[1];
            var _b = __read([
                H + D,
                0
            ], 2), h = _b[0], d = _b[1];
            if (symmetric) {
                var a = this.font.params.axis_height;
                if (hasWHD) h = 2 * Math.max(H - a, D + a);
                d = h / 2 - a;
            } else if (hasWHD) d = D;
            else {
                var _c = __read(C.HDW || [
                    0.75,
                    0.25
                ], 2), ch = _c[0], cd = _c[1];
                d = cd * (h / (ch + cd));
            }
            return [
                h - d,
                d
            ];
        };
        class_1.prototype.checkExtendedHeight = function(D, C) {
            if (C.fullExt) {
                var _a1 = __read(C.fullExt, 2), extSize = _a1[0], endSize = _a1[1];
                var n = Math.ceil(Math.max(0, D - endSize) / extSize);
                D = endSize + n * extSize;
            }
            return D;
        };
        class_1.prototype.remapChars = function(chars) {
            var primes = this.node.getProperty('primes');
            if (primes) return string_js_1.unicodeChars(primes);
            if (chars.length === 1) {
                var parent_1 = this.node.coreParent().parent;
                var isAccent = this.isAccent && !parent_1.isKind('mrow');
                var map = isAccent ? 'accent' : 'mo';
                var text = this.font.getRemappedChar(map, chars[0]);
                if (text) chars = this.unicodeChars(text, this.variant);
            }
            return chars;
        };
        return class_1;
    })(Base);
}
exports.CommonMoMixin = CommonMoMixin;

},{"../../../util/BBox.js":"2c5uM","../../../util/string.js":"1fFM7","../FontData.js":"7CKUF"}],"5Zcm2":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmn = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mn_js_1 = require("../../common/Wrappers/mn.js");
var mn_js_2 = require("../../../core/MmlTree/MmlNodes/mn.js");
var CHTMLmn1 = function(_super) {
    __extends(CHTMLmn2, _super);
    function CHTMLmn2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmn2.kind = mn_js_2.MmlMn.prototype.kind;
    return CHTMLmn2;
}(mn_js_1.CommonMnMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmn = CHTMLmn1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mn.js":"5cylP","../../../core/MmlTree/MmlNodes/mn.js":"3dMxu"}],"5cylP":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMnMixin = void 0;
function CommonMnMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.remapChars = function(chars) {
            if (chars.length) {
                var text = this.font.getRemappedChar('mn', chars[0]);
                if (text) {
                    var c = this.unicodeChars(text, this.variant);
                    if (c.length === 1) chars[0] = c[0];
                    else chars = c.concat(chars.slice(1));
                }
            }
            return chars;
        };
        return class_1;
    })(Base);
}
exports.CommonMnMixin = CommonMnMixin;

},{}],"3dMxu":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMn = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMn1 = function(_super) {
    __extends(MmlMn2, _super);
    function MmlMn2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMn2.prototype, "kind", {
        get: function() {
            return 'mn';
        },
        enumerable: false,
        configurable: true
    });
    MmlMn2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlTokenNode.defaults);
    return MmlMn2;
}(MmlNode_js_1.AbstractMmlTokenNode);
exports.MmlMn = MmlMn1;

},{"../MmlNode.js":"5Ogy3"}],"2SEfl":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLms = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var ms_js_1 = require("../../common/Wrappers/ms.js");
var ms_js_2 = require("../../../core/MmlTree/MmlNodes/ms.js");
var CHTMLms1 = function(_super) {
    __extends(CHTMLms2, _super);
    function CHTMLms2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLms2.kind = ms_js_2.MmlMs.prototype.kind;
    return CHTMLms2;
}(ms_js_1.CommonMsMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLms = CHTMLms1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/ms.js":"CQfJ8","../../../core/MmlTree/MmlNodes/ms.js":"31fdv"}],"CQfJ8":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMsMixin = void 0;
function CommonMsMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            var attributes = _this.node.attributes;
            var quotes = attributes.getList('lquote', 'rquote');
            if (_this.variant !== 'monospace') {
                if (!attributes.isSet('lquote') && quotes.lquote === '"') quotes.lquote = '\u201C';
                if (!attributes.isSet('rquote') && quotes.rquote === '"') quotes.rquote = '\u201D';
            }
            _this.childNodes.unshift(_this.createText(quotes.lquote));
            _this.childNodes.push(_this.createText(quotes.rquote));
            return _this;
        }
        class_1.prototype.createText = function(text) {
            var node = this.wrap(this.mmlText(text));
            node.parent = this;
            return node;
        };
        return class_1;
    })(Base);
}
exports.CommonMsMixin = CommonMsMixin;

},{}],"31fdv":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMs = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMs1 = function(_super) {
    __extends(MmlMs2, _super);
    function MmlMs2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMs2.prototype, "kind", {
        get: function() {
            return 'ms';
        },
        enumerable: false,
        configurable: true
    });
    MmlMs2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlTokenNode.defaults), {
        lquote: '"',
        rquote: '"'
    });
    return MmlMs2;
}(MmlNode_js_1.AbstractMmlTokenNode);
exports.MmlMs = MmlMs1;

},{"../MmlNode.js":"5Ogy3"}],"4t7Yn":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmtext = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mtext_js_1 = require("../../common/Wrappers/mtext.js");
var mtext_js_2 = require("../../../core/MmlTree/MmlNodes/mtext.js");
var CHTMLmtext1 = function(_super) {
    __extends(CHTMLmtext2, _super);
    function CHTMLmtext2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmtext2.kind = mtext_js_2.MmlMtext.prototype.kind;
    return CHTMLmtext2;
}(mtext_js_1.CommonMtextMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmtext = CHTMLmtext1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mtext.js":"3G1Li","../../../core/MmlTree/MmlNodes/mtext.js":"5l92R"}],"3G1Li":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMtextMixin = void 0;
function CommonMtextMixin(Base) {
    var _a;
    return _a = (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.getVariant = function() {
            var options = this.jax.options;
            var data = this.jax.math.outputData;
            var merror = (!!data.merrorFamily || !!options.merrorFont) && this.node.Parent.isKind('merror');
            if (!!data.mtextFamily || !!options.mtextFont || merror) {
                var variant = this.node.attributes.get('mathvariant');
                var font = this.constructor.INHERITFONTS[variant] || this.jax.font.getCssFont(variant);
                var family = font[0] || (merror ? data.merrorFamily || options.merrorFont : data.mtextFamily || options.mtextFont);
                this.variant = this.explicitVariant(family, font[2] ? 'bold' : '', font[1] ? 'italic' : '');
                return;
            }
            _super.prototype.getVariant.call(this);
        };
        return class_1;
    })(Base), _a.INHERITFONTS = {
        normal: [
            '',
            false,
            false
        ],
        bold: [
            '',
            false,
            true
        ],
        italic: [
            '',
            true,
            false
        ],
        'bold-italic': [
            '',
            true,
            true
        ]
    }, _a;
}
exports.CommonMtextMixin = CommonMtextMixin;

},{}],"5l92R":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMtext = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMtext1 = function(_super) {
    __extends(MmlMtext2, _super);
    function MmlMtext2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMtext2.prototype, "kind", {
        get: function() {
            return 'mtext';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMtext2.prototype, "isSpacelike", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMtext2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlTokenNode.defaults);
    return MmlMtext2;
}(MmlNode_js_1.AbstractMmlTokenNode);
exports.MmlMtext = MmlMtext1;

},{"../MmlNode.js":"5Ogy3"}],"5DinL":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmspace = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mspace_js_1 = require("../../common/Wrappers/mspace.js");
var mspace_js_2 = require("../../../core/MmlTree/MmlNodes/mspace.js");
var CHTMLmspace1 = function(_super) {
    __extends(CHTMLmspace2, _super);
    function CHTMLmspace2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmspace2.prototype.toCHTML = function(parent) {
        var chtml = this.standardCHTMLnode(parent);
        var _a = this.getBBox(), w = _a.w, h = _a.h, d = _a.d;
        if (w < 0) {
            this.adaptor.setStyle(chtml, 'marginRight', this.em(w));
            w = 0;
        }
        if (w) this.adaptor.setStyle(chtml, 'width', this.em(w));
        h = Math.max(0, h + d);
        if (h) this.adaptor.setStyle(chtml, 'height', this.em(Math.max(0, h)));
        if (d) this.adaptor.setStyle(chtml, 'verticalAlign', this.em(-d));
    };
    CHTMLmspace2.kind = mspace_js_2.MmlMspace.prototype.kind;
    return CHTMLmspace2;
}(mspace_js_1.CommonMspaceMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmspace = CHTMLmspace1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mspace.js":"1ehpR","../../../core/MmlTree/MmlNodes/mspace.js":"3ZGd1"}],"1ehpR":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMspaceMixin = void 0;
function CommonMspaceMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.computeBBox = function(bbox, _recompute) {
            if (_recompute === void 0) _recompute = false;
            var attributes = this.node.attributes;
            bbox.w = this.length2em(attributes.get('width'), 0);
            bbox.h = this.length2em(attributes.get('height'), 0);
            bbox.d = this.length2em(attributes.get('depth'), 0);
        };
        class_1.prototype.handleVariant = function() {
        };
        return class_1;
    })(Base);
}
exports.CommonMspaceMixin = CommonMspaceMixin;

},{}],"3ZGd1":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMspace = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMspace1 = function(_super) {
    __extends(MmlMspace2, _super);
    function MmlMspace2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.NONE;
        return _this;
    }
    MmlMspace2.prototype.setTeXclass = function(prev) {
        return prev;
    };
    Object.defineProperty(MmlMspace2.prototype, "kind", {
        get: function() {
            return 'mspace';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMspace2.prototype, "arity", {
        get: function() {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMspace2.prototype, "isSpacelike", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMspace2.prototype, "hasNewline", {
        get: function() {
            var attributes = this.attributes;
            return attributes.getExplicit('width') == null && attributes.getExplicit('height') == null && attributes.getExplicit('depth') == null && attributes.get('linebreak') === 'newline';
        },
        enumerable: false,
        configurable: true
    });
    MmlMspace2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlTokenNode.defaults), {
        width: '0em',
        height: '0ex',
        depth: '0ex',
        linebreak: 'auto'
    });
    return MmlMspace2;
}(MmlNode_js_1.AbstractMmlTokenNode);
exports.MmlMspace = MmlMspace1;

},{"../MmlNode.js":"5Ogy3"}],"1fV51":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmpadded = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mpadded_js_1 = require("../../common/Wrappers/mpadded.js");
var mpadded_js_2 = require("../../../core/MmlTree/MmlNodes/mpadded.js");
var CHTMLmpadded1 = function(_super) {
    __extends(CHTMLmpadded2, _super);
    function CHTMLmpadded2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmpadded2.prototype.toCHTML = function(parent) {
        var e_1, _a;
        var chtml = this.standardCHTMLnode(parent);
        var content = [];
        var style = {
        };
        var _b = __read(this.getDimens(), 9), W = _b[2], dh = _b[3], dd = _b[4], dw = _b[5], x = _b[6], y = _b[7], dx = _b[8];
        if (dw) style.width = this.em(W + dw);
        if (dh || dd) style.margin = this.em(dh) + ' 0 ' + this.em(dd);
        if (x + dx || y) {
            style.position = 'relative';
            var rbox = this.html('mjx-rbox', {
                style: {
                    left: this.em(x + dx),
                    top: this.em(-y)
                }
            });
            if (x + dx && this.childNodes[0].getBBox().pwidth) {
                this.adaptor.setAttribute(rbox, 'width', 'full');
                this.adaptor.setStyle(rbox, 'left', this.em(x));
            }
            content.push(rbox);
        }
        chtml = this.adaptor.append(chtml, this.html('mjx-block', {
            style: style
        }, content));
        try {
            for(var _c = __values(this.childNodes), _d = _c.next(); !_d.done; _d = _c.next()){
                var child = _d.value;
                child.toCHTML(content[0] || chtml);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    };
    CHTMLmpadded2.kind = mpadded_js_2.MmlMpadded.prototype.kind;
    CHTMLmpadded2.styles = {
        'mjx-mpadded': {
            display: 'inline-block'
        },
        'mjx-rbox': {
            display: 'inline-block',
            position: 'relative'
        }
    };
    return CHTMLmpadded2;
}(mpadded_js_1.CommonMpaddedMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmpadded = CHTMLmpadded1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mpadded.js":"01FSw","../../../core/MmlTree/MmlNodes/mpadded.js":"5fmxq"}],"01FSw":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMpaddedMixin = void 0;
function CommonMpaddedMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.getDimens = function() {
            var values = this.node.attributes.getList('width', 'height', 'depth', 'lspace', 'voffset');
            var bbox = this.childNodes[0].getBBox();
            var w = bbox.w, h = bbox.h, d = bbox.d;
            var W = w, H = h, D = d, x = 0, y = 0, dx = 0;
            if (values.width !== '') w = this.dimen(values.width, bbox, 'w', 0);
            if (values.height !== '') h = this.dimen(values.height, bbox, 'h', 0);
            if (values.depth !== '') d = this.dimen(values.depth, bbox, 'd', 0);
            if (values.voffset !== '') y = this.dimen(values.voffset, bbox);
            if (values.lspace !== '') x = this.dimen(values.lspace, bbox);
            var align = this.node.attributes.get('data-align');
            if (align) dx = this.getAlignX(w, bbox, align);
            return [
                H,
                D,
                W,
                h - H,
                d - D,
                w - W,
                x,
                y,
                dx
            ];
        };
        class_1.prototype.dimen = function(length, bbox, d, m) {
            if (d === void 0) d = '';
            if (m === void 0) m = null;
            length = String(length);
            var match = length.match(/width|height|depth/);
            var size = match ? bbox[match[0].charAt(0)] : d ? bbox[d] : 0;
            var dimen = this.length2em(length, size) || 0;
            if (length.match(/^[-+]/) && d) dimen += size;
            if (m != null) dimen = Math.max(m, dimen);
            return dimen;
        };
        class_1.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            var _a = __read(this.getDimens(), 6), H = _a[0], D = _a[1], W = _a[2], dh = _a[3], dd = _a[4], dw = _a[5];
            bbox.w = W + dw;
            bbox.h = H + dh;
            bbox.d = D + dd;
            this.setChildPWidths(recompute, bbox.w);
        };
        class_1.prototype.getWrapWidth = function(_i) {
            return this.getBBox().w;
        };
        class_1.prototype.getChildAlign = function(_i) {
            return this.node.attributes.get('data-align') || 'left';
        };
        return class_1;
    })(Base);
}
exports.CommonMpaddedMixin = CommonMpaddedMixin;

},{}],"5fmxq":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMpadded = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMpadded1 = function(_super) {
    __extends(MmlMpadded2, _super);
    function MmlMpadded2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMpadded2.prototype, "kind", {
        get: function() {
            return 'mpadded';
        },
        enumerable: false,
        configurable: true
    });
    MmlMpadded2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlLayoutNode.defaults), {
        width: '',
        height: '',
        depth: '',
        lspace: 0,
        voffset: 0
    });
    return MmlMpadded2;
}(MmlNode_js_1.AbstractMmlLayoutNode);
exports.MmlMpadded = MmlMpadded1;

},{"../MmlNode.js":"5Ogy3"}],"46LPD":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmenclose = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var menclose_js_1 = require("../../common/Wrappers/menclose.js");
var Notation = require("../Notation.js");
var menclose_js_2 = require("../../../core/MmlTree/MmlNodes/menclose.js");
var lengths_js_1 = require("../../../util/lengths.js");
function Angle(x, y) {
    return Math.atan2(x, y).toFixed(3).replace(/\.?0+$/, '');
}
var ANGLE = Angle(Notation.ARROWDX, Notation.ARROWY);
var CHTMLmenclose1 = function(_super) {
    __extends(CHTMLmenclose2, _super);
    function CHTMLmenclose2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmenclose2.prototype.toCHTML = function(parent) {
        var e_1, _a, e_2, _b;
        var adaptor = this.adaptor;
        var chtml = this.standardCHTMLnode(parent);
        var block = adaptor.append(chtml, this.html('mjx-box'));
        if (this.renderChild) this.renderChild(this, block);
        else this.childNodes[0].toCHTML(block);
        try {
            for(var _c = __values(Object.keys(this.notations)), _d = _c.next(); !_d.done; _d = _c.next()){
                var name_1 = _d.value;
                var notation = this.notations[name_1];
                !notation.renderChild && notation.renderer(this, block);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        var pbox = this.getPadding();
        try {
            for(var _e = __values(Notation.sideNames), _f = _e.next(); !_f.done; _f = _e.next()){
                var name_2 = _f.value;
                var i = Notation.sideIndex[name_2];
                pbox[i] > 0 && adaptor.setStyle(block, 'padding-' + name_2, this.em(pbox[i]));
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    };
    CHTMLmenclose2.prototype.arrow = function(w, a, double, offset, dist) {
        if (offset === void 0) offset = '';
        if (dist === void 0) dist = 0;
        var W = this.getBBox().w;
        var style = {
            width: this.em(w)
        };
        if (W !== w) style.left = this.em((W - w) / 2);
        if (a) style.transform = 'rotate(' + this.fixed(a) + 'rad)';
        var arrow = this.html('mjx-arrow', {
            style: style
        }, [
            this.html('mjx-aline'),
            this.html('mjx-rthead'),
            this.html('mjx-rbhead')
        ]);
        if (double) {
            this.adaptor.append(arrow, this.html('mjx-lthead'));
            this.adaptor.append(arrow, this.html('mjx-lbhead'));
            this.adaptor.setAttribute(arrow, 'double', 'true');
        }
        this.adjustArrow(arrow, double);
        this.moveArrow(arrow, offset, dist);
        return arrow;
    };
    CHTMLmenclose2.prototype.adjustArrow = function(arrow, double) {
        var _this = this;
        var t = this.thickness;
        var head = this.arrowhead;
        if (head.x === Notation.ARROWX && head.y === Notation.ARROWY && head.dx === Notation.ARROWDX && t === Notation.THICKNESS) return;
        var _a = __read([
            t * head.x,
            t * head.y
        ].map(function(x) {
            return _this.em(x);
        }), 2), x = _a[0], y = _a[1];
        var a = Angle(head.dx, head.y);
        var _b = __read(this.adaptor.childNodes(arrow), 5), line = _b[0], rthead = _b[1], rbhead = _b[2], lthead = _b[3], lbhead = _b[4];
        this.adjustHead(rthead, [
            y,
            '0',
            '1px',
            x
        ], a);
        this.adjustHead(rbhead, [
            '1px',
            '0',
            y,
            x
        ], '-' + a);
        this.adjustHead(lthead, [
            y,
            x,
            '1px',
            '0'
        ], '-' + a);
        this.adjustHead(lbhead, [
            '1px',
            x,
            y,
            '0'
        ], a);
        this.adjustLine(line, t, head.x, double);
    };
    CHTMLmenclose2.prototype.adjustHead = function(head, border, a) {
        if (head) {
            this.adaptor.setStyle(head, 'border-width', border.join(' '));
            this.adaptor.setStyle(head, 'transform', 'skewX(' + a + 'rad)');
        }
    };
    CHTMLmenclose2.prototype.adjustLine = function(line, t, x, double) {
        this.adaptor.setStyle(line, 'borderTop', this.em(t) + ' solid');
        this.adaptor.setStyle(line, 'top', this.em(-t / 2));
        this.adaptor.setStyle(line, 'right', this.em(t * (x - 1)));
        if (double) this.adaptor.setStyle(line, 'left', this.em(t * (x - 1)));
    };
    CHTMLmenclose2.prototype.moveArrow = function(arrow, offset, d) {
        if (!d) return;
        var transform = this.adaptor.getStyle(arrow, 'transform');
        this.adaptor.setStyle(arrow, 'transform', "translate" + offset + "(" + this.em(-d) + ")" + (transform ? ' ' + transform : ''));
    };
    CHTMLmenclose2.prototype.adjustBorder = function(node) {
        if (this.thickness !== Notation.THICKNESS) this.adaptor.setStyle(node, 'borderWidth', this.em(this.thickness));
        return node;
    };
    CHTMLmenclose2.prototype.adjustThickness = function(shape) {
        if (this.thickness !== Notation.THICKNESS) this.adaptor.setStyle(shape, 'strokeWidth', this.fixed(this.thickness));
        return shape;
    };
    CHTMLmenclose2.prototype.fixed = function(m, n) {
        if (n === void 0) n = 3;
        if (Math.abs(m) < 0.0006) return '0';
        return m.toFixed(n).replace(/\.?0+$/, '');
    };
    CHTMLmenclose2.prototype.em = function(m) {
        return _super.prototype.em.call(this, m);
    };
    CHTMLmenclose2.kind = menclose_js_2.MmlMenclose.prototype.kind;
    CHTMLmenclose2.styles = {
        'mjx-menclose': {
            position: 'relative'
        },
        'mjx-menclose > mjx-dstrike': {
            display: 'inline-block',
            left: 0,
            top: 0,
            position: 'absolute',
            'border-top': Notation.SOLID,
            'transform-origin': 'top left'
        },
        'mjx-menclose > mjx-ustrike': {
            display: 'inline-block',
            left: 0,
            bottom: 0,
            position: 'absolute',
            'border-top': Notation.SOLID,
            'transform-origin': 'bottom left'
        },
        'mjx-menclose > mjx-hstrike': {
            'border-top': Notation.SOLID,
            position: 'absolute',
            left: 0,
            right: 0,
            bottom: '50%',
            transform: 'translateY(' + lengths_js_1.em(Notation.THICKNESS / 2) + ')'
        },
        'mjx-menclose > mjx-vstrike': {
            'border-left': Notation.SOLID,
            position: 'absolute',
            top: 0,
            bottom: 0,
            right: '50%',
            transform: 'translateX(' + lengths_js_1.em(Notation.THICKNESS / 2) + ')'
        },
        'mjx-menclose > mjx-rbox': {
            position: 'absolute',
            top: 0,
            bottom: 0,
            right: 0,
            left: 0,
            'border': Notation.SOLID,
            'border-radius': lengths_js_1.em(Notation.THICKNESS + Notation.PADDING)
        },
        'mjx-menclose > mjx-cbox': {
            position: 'absolute',
            top: 0,
            bottom: 0,
            right: 0,
            left: 0,
            'border': Notation.SOLID,
            'border-radius': '50%'
        },
        'mjx-menclose > mjx-arrow': {
            position: 'absolute',
            left: 0,
            bottom: '50%',
            height: 0,
            width: 0
        },
        'mjx-menclose > mjx-arrow > *': {
            display: 'block',
            position: 'absolute',
            'transform-origin': 'bottom',
            'border-left': lengths_js_1.em(Notation.THICKNESS * Notation.ARROWX) + ' solid',
            'border-right': 0,
            'box-sizing': 'border-box'
        },
        'mjx-menclose > mjx-arrow > mjx-aline': {
            left: 0,
            top: lengths_js_1.em(-Notation.THICKNESS / 2),
            right: lengths_js_1.em(Notation.THICKNESS * (Notation.ARROWX - 1)),
            height: 0,
            'border-top': lengths_js_1.em(Notation.THICKNESS) + ' solid',
            'border-left': 0
        },
        'mjx-menclose > mjx-arrow[double] > mjx-aline': {
            left: lengths_js_1.em(Notation.THICKNESS * (Notation.ARROWX - 1)),
            height: 0
        },
        'mjx-menclose > mjx-arrow > mjx-rthead': {
            transform: 'skewX(' + ANGLE + 'rad)',
            right: 0,
            bottom: '-1px',
            'border-bottom': '1px solid transparent',
            'border-top': lengths_js_1.em(Notation.THICKNESS * Notation.ARROWY) + ' solid transparent'
        },
        'mjx-menclose > mjx-arrow > mjx-rbhead': {
            transform: 'skewX(-' + ANGLE + 'rad)',
            'transform-origin': 'top',
            right: 0,
            top: '-1px',
            'border-top': '1px solid transparent',
            'border-bottom': lengths_js_1.em(Notation.THICKNESS * Notation.ARROWY) + ' solid transparent'
        },
        'mjx-menclose > mjx-arrow > mjx-lthead': {
            transform: 'skewX(-' + ANGLE + 'rad)',
            left: 0,
            bottom: '-1px',
            'border-left': 0,
            'border-right': lengths_js_1.em(Notation.THICKNESS * Notation.ARROWX) + ' solid',
            'border-bottom': '1px solid transparent',
            'border-top': lengths_js_1.em(Notation.THICKNESS * Notation.ARROWY) + ' solid transparent'
        },
        'mjx-menclose > mjx-arrow > mjx-lbhead': {
            transform: 'skewX(' + ANGLE + 'rad)',
            'transform-origin': 'top',
            left: 0,
            top: '-1px',
            'border-left': 0,
            'border-right': lengths_js_1.em(Notation.THICKNESS * Notation.ARROWX) + ' solid',
            'border-top': '1px solid transparent',
            'border-bottom': lengths_js_1.em(Notation.THICKNESS * Notation.ARROWY) + ' solid transparent'
        },
        'mjx-menclose > dbox': {
            position: 'absolute',
            top: 0,
            bottom: 0,
            left: lengths_js_1.em(-1.5 * Notation.PADDING),
            width: lengths_js_1.em(3 * Notation.PADDING),
            border: lengths_js_1.em(Notation.THICKNESS) + ' solid',
            'border-radius': '50%',
            'clip-path': 'inset(0 0 0 ' + lengths_js_1.em(1.5 * Notation.PADDING) + ')',
            'box-sizing': 'border-box'
        }
    };
    CHTMLmenclose2.notations = new Map([
        Notation.Border('top'),
        Notation.Border('right'),
        Notation.Border('bottom'),
        Notation.Border('left'),
        Notation.Border2('actuarial', 'top', 'right'),
        Notation.Border2('madruwb', 'bottom', 'right'),
        Notation.DiagonalStrike('up', 1),
        Notation.DiagonalStrike('down', -1),
        [
            'horizontalstrike',
            {
                renderer: Notation.RenderElement('hstrike', 'Y'),
                bbox: function(node) {
                    return [
                        0,
                        node.padding,
                        0,
                        node.padding
                    ];
                }
            }
        ],
        [
            'verticalstrike',
            {
                renderer: Notation.RenderElement('vstrike', 'X'),
                bbox: function(node) {
                    return [
                        node.padding,
                        0,
                        node.padding,
                        0
                    ];
                }
            }
        ],
        [
            'box',
            {
                renderer: function(node, child) {
                    node.adaptor.setStyle(child, 'border', node.em(node.thickness) + ' solid');
                },
                bbox: Notation.fullBBox,
                border: Notation.fullBorder,
                remove: 'left right top bottom'
            }
        ],
        [
            'roundedbox',
            {
                renderer: Notation.RenderElement('rbox'),
                bbox: Notation.fullBBox
            }
        ],
        [
            'circle',
            {
                renderer: Notation.RenderElement('cbox'),
                bbox: Notation.fullBBox
            }
        ],
        [
            'phasorangle',
            {
                renderer: function(node, child) {
                    var _a = node.getBBox(), h = _a.h, d = _a.d;
                    var _b = __read(node.getArgMod(1.75 * node.padding, h + d), 2), a = _b[0], W = _b[1];
                    var t = node.thickness * Math.sin(a) * 0.9;
                    node.adaptor.setStyle(child, 'border-bottom', node.em(node.thickness) + ' solid');
                    var strike = node.adjustBorder(node.html('mjx-ustrike', {
                        style: {
                            width: node.em(W),
                            transform: 'translateX(' + node.em(t) + ') rotate(' + node.fixed(-a) + 'rad)'
                        }
                    }));
                    node.adaptor.append(node.chtml, strike);
                },
                bbox: function(node) {
                    var p = node.padding / 2;
                    var t = node.thickness;
                    return [
                        2 * p,
                        p,
                        p + t,
                        3 * p + t
                    ];
                },
                border: function(node) {
                    return [
                        0,
                        0,
                        node.thickness,
                        0
                    ];
                },
                remove: 'bottom'
            }
        ],
        Notation.Arrow('up'),
        Notation.Arrow('down'),
        Notation.Arrow('left'),
        Notation.Arrow('right'),
        Notation.Arrow('updown'),
        Notation.Arrow('leftright'),
        Notation.DiagonalArrow('updiagonal'),
        Notation.DiagonalArrow('northeast'),
        Notation.DiagonalArrow('southeast'),
        Notation.DiagonalArrow('northwest'),
        Notation.DiagonalArrow('southwest'),
        Notation.DiagonalArrow('northeastsouthwest'),
        Notation.DiagonalArrow('northwestsoutheast'),
        [
            'longdiv',
            {
                renderer: function(node, child) {
                    var adaptor = node.adaptor;
                    adaptor.setStyle(child, 'border-top', node.em(node.thickness) + ' solid');
                    var arc = adaptor.append(node.chtml, node.html('dbox'));
                    var t = node.thickness;
                    var p = node.padding;
                    if (t !== Notation.THICKNESS) adaptor.setStyle(arc, 'border-width', node.em(t));
                    if (p !== Notation.PADDING) {
                        adaptor.setStyle(arc, 'left', node.em(-1.5 * p));
                        adaptor.setStyle(arc, 'width', node.em(3 * p));
                        adaptor.setStyle(arc, 'clip-path', 'inset(0 0 0 ' + node.em(1.5 * p) + ')');
                    }
                },
                bbox: function(node) {
                    var p = node.padding;
                    var t = node.thickness;
                    return [
                        p + t,
                        p,
                        p,
                        2 * p + t / 2
                    ];
                }
            }
        ],
        [
            'radical',
            {
                renderer: function(node, child) {
                    node.msqrt.toCHTML(child);
                    var TRBL = node.sqrtTRBL();
                    node.adaptor.setStyle(node.msqrt.chtml, 'margin', TRBL.map(function(x) {
                        return node.em(-x);
                    }).join(' '));
                },
                init: function(node) {
                    node.msqrt = node.createMsqrt(node.childNodes[0]);
                },
                bbox: function(node) {
                    return node.sqrtTRBL();
                },
                renderChild: true
            }
        ]
    ]);
    return CHTMLmenclose2;
}(menclose_js_1.CommonMencloseMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmenclose = CHTMLmenclose1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/menclose.js":"7gt1m","../Notation.js":"3ZhXM","../../../core/MmlTree/MmlNodes/menclose.js":"SiTAZ","../../../util/lengths.js":"5EoCW"}],"7gt1m":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMencloseMixin = void 0;
var Notation = require("../Notation.js");
var string_js_1 = require("../../../util/string.js");
function CommonMencloseMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.notations = {
            };
            _this.renderChild = null;
            _this.msqrt = null;
            _this.padding = Notation.PADDING;
            _this.thickness = Notation.THICKNESS;
            _this.arrowhead = {
                x: Notation.ARROWX,
                y: Notation.ARROWY,
                dx: Notation.ARROWDX
            };
            _this.TRBL = [
                0,
                0,
                0,
                0
            ];
            _this.getParameters();
            _this.getNotations();
            _this.removeRedundantNotations();
            _this.initializeNotations();
            _this.TRBL = _this.getBBoxExtenders();
            return _this;
        }
        class_1.prototype.getParameters = function() {
            var attributes = this.node.attributes;
            var padding = attributes.get('data-padding');
            if (padding !== undefined) this.padding = this.length2em(padding, Notation.PADDING);
            var thickness = attributes.get('data-thickness');
            if (thickness !== undefined) this.thickness = this.length2em(thickness, Notation.THICKNESS);
            var arrowhead = attributes.get('data-arrowhead');
            if (arrowhead !== undefined) {
                var _b = __read(string_js_1.split(arrowhead), 3), x = _b[0], y = _b[1], dx = _b[2];
                this.arrowhead = {
                    x: x ? parseFloat(x) : Notation.ARROWX,
                    y: y ? parseFloat(y) : Notation.ARROWY,
                    dx: dx ? parseFloat(dx) : Notation.ARROWDX
                };
            }
        };
        class_1.prototype.getNotations = function() {
            var e_1, _b;
            var Notations = this.constructor.notations;
            try {
                for(var _c = __values(string_js_1.split(this.node.attributes.get('notation'))), _d = _c.next(); !_d.done; _d = _c.next()){
                    var name_1 = _d.value;
                    var notation = Notations.get(name_1);
                    if (notation) {
                        this.notations[name_1] = notation;
                        if (notation.renderChild) this.renderChild = notation.renderer;
                    }
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
        };
        class_1.prototype.removeRedundantNotations = function() {
            var e_2, _b, e_3, _c;
            try {
                for(var _d = __values(Object.keys(this.notations)), _e = _d.next(); !_e.done; _e = _d.next()){
                    var name_2 = _e.value;
                    if (this.notations[name_2]) {
                        var remove = this.notations[name_2].remove || '';
                        try {
                            for(var _f = (e_3 = void 0, __values(remove.split(/ /))), _g = _f.next(); !_g.done; _g = _f.next()){
                                var notation = _g.value;
                                delete this.notations[notation];
                            }
                        } catch (e_3_1) {
                            e_3 = {
                                error: e_3_1
                            };
                        } finally{
                            try {
                                if (_g && !_g.done && (_c = _f.return)) _c.call(_f);
                            } finally{
                                if (e_3) throw e_3.error;
                            }
                        }
                    }
                }
            } catch (e_2_1) {
                e_2 = {
                    error: e_2_1
                };
            } finally{
                try {
                    if (_e && !_e.done && (_b = _d.return)) _b.call(_d);
                } finally{
                    if (e_2) throw e_2.error;
                }
            }
        };
        class_1.prototype.initializeNotations = function() {
            var e_4, _b;
            try {
                for(var _c = __values(Object.keys(this.notations)), _d = _c.next(); !_d.done; _d = _c.next()){
                    var name_3 = _d.value;
                    var init = this.notations[name_3].init;
                    init && init(this);
                }
            } catch (e_4_1) {
                e_4 = {
                    error: e_4_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                } finally{
                    if (e_4) throw e_4.error;
                }
            }
        };
        class_1.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            var _b = __read(this.TRBL, 4), T = _b[0], R = _b[1], B = _b[2], L = _b[3];
            var child = this.childNodes[0].getBBox();
            bbox.combine(child, L, 0);
            bbox.h += T;
            bbox.d += B;
            bbox.w += R;
            this.setChildPWidths(recompute);
        };
        class_1.prototype.getBBoxExtenders = function() {
            var e_5, _b;
            var TRBL = [
                0,
                0,
                0,
                0
            ];
            try {
                for(var _c = __values(Object.keys(this.notations)), _d = _c.next(); !_d.done; _d = _c.next()){
                    var name_4 = _d.value;
                    this.maximizeEntries(TRBL, this.notations[name_4].bbox(this));
                }
            } catch (e_5_1) {
                e_5 = {
                    error: e_5_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                } finally{
                    if (e_5) throw e_5.error;
                }
            }
            return TRBL;
        };
        class_1.prototype.getPadding = function() {
            var e_6, _b;
            var _this = this;
            var BTRBL = [
                0,
                0,
                0,
                0
            ];
            try {
                for(var _c = __values(Object.keys(this.notations)), _d = _c.next(); !_d.done; _d = _c.next()){
                    var name_5 = _d.value;
                    var border = this.notations[name_5].border;
                    if (border) this.maximizeEntries(BTRBL, border(this));
                }
            } catch (e_6_1) {
                e_6 = {
                    error: e_6_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                } finally{
                    if (e_6) throw e_6.error;
                }
            }
            return [
                0,
                1,
                2,
                3
            ].map(function(i) {
                return _this.TRBL[i] - BTRBL[i];
            });
        };
        class_1.prototype.maximizeEntries = function(X, Y) {
            for(var i = 0; i < X.length; i++)if (X[i] < Y[i]) X[i] = Y[i];
        };
        class_1.prototype.getOffset = function(direction) {
            var _b = __read(this.TRBL, 4), T = _b[0], R = _b[1], B = _b[2], L = _b[3];
            var d = (direction === 'X' ? R - L : B - T) / 2;
            return Math.abs(d) > 0.001 ? d : 0;
        };
        class_1.prototype.getArgMod = function(w, h) {
            return [
                Math.atan2(h, w),
                Math.sqrt(w * w + h * h)
            ];
        };
        class_1.prototype.arrow = function(_w, _a, _double, _offset, _dist) {
            if (_offset === void 0) _offset = '';
            if (_dist === void 0) _dist = 0;
            return null;
        };
        class_1.prototype.arrowData = function() {
            var _b = __read([
                this.padding,
                this.thickness
            ], 2), p = _b[0], t = _b[1];
            var r = t * (this.arrowhead.x + Math.max(1, this.arrowhead.dx));
            var _c = this.childNodes[0].getBBox(), h = _c.h, d = _c.d, w = _c.w;
            var H = h + d;
            var R = Math.sqrt(H * H + w * w);
            var x = Math.max(p, r * w / R);
            var y = Math.max(p, r * H / R);
            var _d = __read(this.getArgMod(w + 2 * x, H + 2 * y), 2), a = _d[0], W = _d[1];
            return {
                a: a,
                W: W,
                x: x,
                y: y
            };
        };
        class_1.prototype.arrowAW = function() {
            var _b = this.childNodes[0].getBBox(), h = _b.h, d = _b.d, w = _b.w;
            var _c = __read(this.TRBL, 4), T = _c[0], R = _c[1], B = _c[2], L = _c[3];
            return this.getArgMod(L + w + R, T + h + d + B);
        };
        class_1.prototype.createMsqrt = function(child) {
            var mmlFactory = this.node.factory;
            var mml = mmlFactory.create('msqrt');
            mml.inheritAttributesFrom(this.node);
            mml.childNodes[0] = child.node;
            var node = this.wrap(mml);
            node.parent = this;
            return node;
        };
        class_1.prototype.sqrtTRBL = function() {
            var bbox = this.msqrt.getBBox();
            var cbox = this.msqrt.childNodes[0].getBBox();
            return [
                bbox.h - cbox.h,
                0,
                bbox.d - cbox.d,
                bbox.w - cbox.w
            ];
        };
        return class_1;
    })(Base);
}
exports.CommonMencloseMixin = CommonMencloseMixin;

},{"../Notation.js":"6k0xj","../../../util/string.js":"1fFM7"}],"6k0xj":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonArrow = exports.CommonDiagonalArrow = exports.CommonDiagonalStrike = exports.CommonBorder2 = exports.CommonBorder = exports.arrowBBox = exports.diagonalArrowDef = exports.arrowDef = exports.arrowBBoxW = exports.arrowBBoxHD = exports.arrowHead = exports.fullBorder = exports.fullPadding = exports.fullBBox = exports.sideNames = exports.sideIndex = exports.SOLID = exports.PADDING = exports.THICKNESS = exports.ARROWY = exports.ARROWDX = exports.ARROWX = void 0;
exports.ARROWX = 4, exports.ARROWDX = 1, exports.ARROWY = 2;
exports.THICKNESS = 0.067;
exports.PADDING = 0.2;
exports.SOLID = exports.THICKNESS + 'em solid';
exports.sideIndex = {
    top: 0,
    right: 1,
    bottom: 2,
    left: 3
};
exports.sideNames = Object.keys(exports.sideIndex);
exports.fullBBox = function(node) {
    return new Array(4).fill(node.thickness + node.padding);
};
exports.fullPadding = function(node) {
    return new Array(4).fill(node.padding);
};
exports.fullBorder = function(node) {
    return new Array(4).fill(node.thickness);
};
var arrowHead = function(node) {
    return Math.max(node.padding, node.thickness * (node.arrowhead.x + node.arrowhead.dx + 1));
};
exports.arrowHead = arrowHead;
var arrowBBoxHD = function(node, TRBL) {
    if (node.childNodes[0]) {
        var _a = node.childNodes[0].getBBox(), h = _a.h, d = _a.d;
        TRBL[0] = TRBL[2] = Math.max(0, node.thickness * node.arrowhead.y - (h + d) / 2);
    }
    return TRBL;
};
exports.arrowBBoxHD = arrowBBoxHD;
var arrowBBoxW = function(node, TRBL) {
    if (node.childNodes[0]) {
        var w = node.childNodes[0].getBBox().w;
        TRBL[1] = TRBL[3] = Math.max(0, node.thickness * node.arrowhead.y - w / 2);
    }
    return TRBL;
};
exports.arrowBBoxW = arrowBBoxW;
exports.arrowDef = {
    up: [
        -Math.PI / 2,
        false,
        true,
        'verticalstrike'
    ],
    down: [
        Math.PI / 2,
        false,
        true,
        'verticakstrike'
    ],
    right: [
        0,
        false,
        false,
        'horizontalstrike'
    ],
    left: [
        Math.PI,
        false,
        false,
        'horizontalstrike'
    ],
    updown: [
        Math.PI / 2,
        true,
        true,
        'verticalstrike uparrow downarrow'
    ],
    leftright: [
        0,
        true,
        false,
        'horizontalstrike leftarrow rightarrow'
    ]
};
exports.diagonalArrowDef = {
    updiagonal: [
        -1,
        0,
        false,
        'updiagonalstrike northeastarrow'
    ],
    northeast: [
        -1,
        0,
        false,
        'updiagonalstrike updiagonalarrow'
    ],
    southeast: [
        1,
        0,
        false,
        'downdiagonalstrike'
    ],
    northwest: [
        1,
        Math.PI,
        false,
        'downdiagonalstrike'
    ],
    southwest: [
        -1,
        Math.PI,
        false,
        'updiagonalstrike'
    ],
    northeastsouthwest: [
        -1,
        0,
        true,
        'updiagonalstrike northeastarrow updiagonalarrow southwestarrow'
    ],
    northwestsoutheast: [
        1,
        0,
        true,
        'downdiagonalstrike northwestarrow southeastarrow'
    ]
};
exports.arrowBBox = {
    up: function(node) {
        return exports.arrowBBoxW(node, [
            exports.arrowHead(node),
            0,
            node.padding,
            0
        ]);
    },
    down: function(node) {
        return exports.arrowBBoxW(node, [
            node.padding,
            0,
            exports.arrowHead(node),
            0
        ]);
    },
    right: function(node) {
        return exports.arrowBBoxHD(node, [
            0,
            exports.arrowHead(node),
            0,
            node.padding
        ]);
    },
    left: function(node) {
        return exports.arrowBBoxHD(node, [
            0,
            node.padding,
            0,
            exports.arrowHead(node)
        ]);
    },
    updown: function(node) {
        return exports.arrowBBoxW(node, [
            exports.arrowHead(node),
            0,
            exports.arrowHead(node),
            0
        ]);
    },
    leftright: function(node) {
        return exports.arrowBBoxHD(node, [
            0,
            exports.arrowHead(node),
            0,
            exports.arrowHead(node)
        ]);
    }
};
var CommonBorder = function(render) {
    return function(side) {
        var i = exports.sideIndex[side];
        return [
            side,
            {
                renderer: render,
                bbox: function(node) {
                    var bbox = [
                        0,
                        0,
                        0,
                        0
                    ];
                    bbox[i] = node.thickness + node.padding;
                    return bbox;
                },
                border: function(node) {
                    var bbox = [
                        0,
                        0,
                        0,
                        0
                    ];
                    bbox[i] = node.thickness;
                    return bbox;
                }
            }
        ];
    };
};
exports.CommonBorder = CommonBorder;
var CommonBorder2 = function(render) {
    return function(name, side1, side2) {
        var i1 = exports.sideIndex[side1];
        var i2 = exports.sideIndex[side2];
        return [
            name,
            {
                renderer: render,
                bbox: function(node) {
                    var t = node.thickness + node.padding;
                    var bbox = [
                        0,
                        0,
                        0,
                        0
                    ];
                    bbox[i1] = bbox[i2] = t;
                    return bbox;
                },
                border: function(node) {
                    var bbox = [
                        0,
                        0,
                        0,
                        0
                    ];
                    bbox[i1] = bbox[i2] = node.thickness;
                    return bbox;
                },
                remove: side1 + ' ' + side2
            }
        ];
    };
};
exports.CommonBorder2 = CommonBorder2;
var CommonDiagonalStrike = function(render) {
    return function(name) {
        var cname = 'mjx-' + name.charAt(0) + 'strike';
        return [
            name + 'diagonalstrike',
            {
                renderer: render(cname),
                bbox: exports.fullBBox
            }
        ];
    };
};
exports.CommonDiagonalStrike = CommonDiagonalStrike;
var CommonDiagonalArrow = function(render) {
    return function(name) {
        var _a = __read(exports.diagonalArrowDef[name], 4), c = _a[0], pi = _a[1], double = _a[2], remove = _a[3];
        return [
            name + 'arrow',
            {
                renderer: function(node, _child) {
                    var _a1 = __read(node.arrowAW(), 2), a = _a1[0], W = _a1[1];
                    var arrow = node.arrow(W, c * (a - pi), double);
                    render(node, arrow);
                },
                bbox: function(node) {
                    var _a1 = node.arrowData(), a = _a1.a, x = _a1.x, y = _a1.y;
                    var _b = __read([
                        node.arrowhead.x,
                        node.arrowhead.y,
                        node.arrowhead.dx
                    ], 3), ax = _b[0], ay = _b[1], adx = _b[2];
                    var _c = __read(node.getArgMod(ax + adx, ay), 2), b = _c[0], ar = _c[1];
                    var dy = y + (b > a ? node.thickness * ar * Math.sin(b - a) : 0);
                    var dx = x + (b > Math.PI / 2 - a ? node.thickness * ar * Math.sin(b + a - Math.PI / 2) : 0);
                    return [
                        dy,
                        dx,
                        dy,
                        dx
                    ];
                },
                remove: remove
            }
        ];
    };
};
exports.CommonDiagonalArrow = CommonDiagonalArrow;
var CommonArrow = function(render) {
    return function(name) {
        var _a = __read(exports.arrowDef[name], 4), angle = _a[0], double = _a[1], isVertical = _a[2], remove = _a[3];
        return [
            name + 'arrow',
            {
                renderer: function(node, _child) {
                    var _a1 = node.getBBox(), w = _a1.w, h = _a1.h, d = _a1.d;
                    var _b = __read(isVertical ? [
                        h + d,
                        'X'
                    ] : [
                        w,
                        'Y'
                    ], 2), W = _b[0], offset = _b[1];
                    var dd = node.getOffset(offset);
                    var arrow = node.arrow(W, angle, double, offset, dd);
                    render(node, arrow);
                },
                bbox: exports.arrowBBox[name],
                remove: remove
            }
        ];
    };
};
exports.CommonArrow = CommonArrow;

},{}],"3ZhXM":[function(require,module,exports) {
"use strict";
var __createBinding = this && this.__createBinding || (Object.create ? function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, {
        enumerable: true,
        get: function() {
            return m[k];
        }
    });
} : function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
});
var __exportStar = this && this.__exportStar || function(m, exports) {
    for(var p in m)if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Arrow = exports.DiagonalArrow = exports.DiagonalStrike = exports.Border2 = exports.Border = exports.RenderElement = void 0;
var Notation = require("../common/Notation.js");
__exportStar(require("../common/Notation.js"), exports);
var RenderElement = function(name, offset) {
    if (offset === void 0) offset = '';
    return function(node, _child) {
        var shape = node.adjustBorder(node.html('mjx-' + name));
        if (offset) {
            var d = node.getOffset(offset);
            if (node.thickness !== Notation.THICKNESS || d) {
                var transform = "translate" + offset + "(" + node.em(node.thickness / 2 - d) + ")";
                node.adaptor.setStyle(shape, 'transform', transform);
            }
        }
        node.adaptor.append(node.chtml, shape);
    };
};
exports.RenderElement = RenderElement;
var Border = function(side) {
    return Notation.CommonBorder(function(node, child) {
        node.adaptor.setStyle(child, 'border-' + side, node.em(node.thickness) + ' solid');
    })(side);
};
exports.Border = Border;
var Border2 = function(name, side1, side2) {
    return Notation.CommonBorder2(function(node, child) {
        var border = node.em(node.thickness) + ' solid';
        node.adaptor.setStyle(child, 'border-' + side1, border);
        node.adaptor.setStyle(child, 'border-' + side2, border);
    })(name, side1, side2);
};
exports.Border2 = Border2;
var DiagonalStrike = function(name, neg) {
    return Notation.CommonDiagonalStrike(function(cname) {
        return function(node, _child) {
            var _a = node.getBBox(), w = _a.w, h = _a.h, d = _a.d;
            var _b = __read(node.getArgMod(w, h + d), 2), a = _b[0], W = _b[1];
            var t = neg * node.thickness / 2;
            var strike = node.adjustBorder(node.html(cname, {
                style: {
                    width: node.em(W),
                    transform: 'rotate(' + node.fixed(-neg * a) + 'rad) translateY(' + t + 'em)'
                }
            }));
            node.adaptor.append(node.chtml, strike);
        };
    })(name);
};
exports.DiagonalStrike = DiagonalStrike;
var DiagonalArrow = function(name) {
    return Notation.CommonDiagonalArrow(function(node, arrow) {
        node.adaptor.append(node.chtml, arrow);
    })(name);
};
exports.DiagonalArrow = DiagonalArrow;
var Arrow = function(name) {
    return Notation.CommonArrow(function(node, arrow) {
        node.adaptor.append(node.chtml, arrow);
    })(name);
};
exports.Arrow = Arrow;

},{"../common/Notation.js":"6k0xj"}],"SiTAZ":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMenclose = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMenclose1 = function(_super) {
    __extends(MmlMenclose2, _super);
    function MmlMenclose2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMenclose2.prototype, "kind", {
        get: function() {
            return 'menclose';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMenclose2.prototype, "arity", {
        get: function() {
            return -1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMenclose2.prototype, "linebreakContininer", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMenclose2.prototype.setTeXclass = function(prev) {
        prev = this.childNodes[0].setTeXclass(prev);
        this.updateTeXclass(this.childNodes[0]);
        return prev;
    };
    MmlMenclose2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults), {
        notation: 'longdiv'
    });
    return MmlMenclose2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMenclose = MmlMenclose1;

},{"../MmlNode.js":"5Ogy3"}],"3O9CD":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLinferredMrow = exports.CHTMLmrow = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mrow_js_1 = require("../../common/Wrappers/mrow.js");
var mrow_js_2 = require("../../common/Wrappers/mrow.js");
var mrow_js_3 = require("../../../core/MmlTree/MmlNodes/mrow.js");
var CHTMLmrow1 = function(_super) {
    __extends(CHTMLmrow2, _super);
    function CHTMLmrow2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmrow2.prototype.toCHTML = function(parent) {
        var e_1, _a;
        var chtml = this.node.isInferred ? this.chtml = parent : this.standardCHTMLnode(parent);
        var hasNegative = false;
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                child.toCHTML(chtml);
                if (child.bbox.w < 0) hasNegative = true;
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        if (hasNegative) {
            var w = this.getBBox().w;
            if (w) {
                this.adaptor.setStyle(chtml, 'width', this.em(Math.max(0, w)));
                if (w < 0) this.adaptor.setStyle(chtml, 'marginRight', this.em(w));
            }
        }
    };
    CHTMLmrow2.kind = mrow_js_3.MmlMrow.prototype.kind;
    return CHTMLmrow2;
}(mrow_js_1.CommonMrowMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmrow = CHTMLmrow1;
var CHTMLinferredMrow1 = function(_super) {
    __extends(CHTMLinferredMrow2, _super);
    function CHTMLinferredMrow2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLinferredMrow2.kind = mrow_js_3.MmlInferredMrow.prototype.kind;
    return CHTMLinferredMrow2;
}(mrow_js_2.CommonInferredMrowMixin(CHTMLmrow1));
exports.CHTMLinferredMrow = CHTMLinferredMrow1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mrow.js":"44qzR","../../../core/MmlTree/MmlNodes/mrow.js":"48cRO"}],"44qzR":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonInferredMrowMixin = exports.CommonMrowMixin = void 0;
var BBox_js_1 = require("../../../util/BBox.js");
function CommonMrowMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var e_1, _a;
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.stretchChildren();
            try {
                for(var _b = __values(_this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                    var child = _c.value;
                    if (child.bbox.pwidth) {
                        _this.bbox.pwidth = BBox_js_1.BBox.fullWidth;
                        break;
                    }
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
            return _this;
        }
        Object.defineProperty(class_1.prototype, "fixesPWidth", {
            get: function() {
                return false;
            },
            enumerable: false,
            configurable: true
        });
        class_1.prototype.stretchChildren = function() {
            var e_2, _a, e_3, _b, e_4, _c;
            var stretchy = [];
            try {
                for(var _d = __values(this.childNodes), _e = _d.next(); !_e.done; _e = _d.next()){
                    var child = _e.value;
                    if (child.canStretch(1)) stretchy.push(child);
                }
            } catch (e_2_1) {
                e_2 = {
                    error: e_2_1
                };
            } finally{
                try {
                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);
                } finally{
                    if (e_2) throw e_2.error;
                }
            }
            var count = stretchy.length;
            var nodeCount = this.childNodes.length;
            if (count && nodeCount > 1) {
                var H = 0, D = 0;
                var all = count > 1 && count === nodeCount;
                try {
                    for(var _f = __values(this.childNodes), _g = _f.next(); !_g.done; _g = _f.next()){
                        var child = _g.value;
                        var noStretch = child.stretch.dir === 0;
                        if (all || noStretch) {
                            var _h = child.getBBox(noStretch), h = _h.h, d = _h.d, rscale = _h.rscale;
                            h *= rscale;
                            d *= rscale;
                            if (h > H) H = h;
                            if (d > D) D = d;
                        }
                    }
                } catch (e_3_1) {
                    e_3 = {
                        error: e_3_1
                    };
                } finally{
                    try {
                        if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
                    } finally{
                        if (e_3) throw e_3.error;
                    }
                }
                try {
                    for(var stretchy_1 = __values(stretchy), stretchy_1_1 = stretchy_1.next(); !stretchy_1_1.done; stretchy_1_1 = stretchy_1.next()){
                        var child = stretchy_1_1.value;
                        child.coreMO().getStretchedVariant([
                            H,
                            D
                        ]);
                    }
                } catch (e_4_1) {
                    e_4 = {
                        error: e_4_1
                    };
                } finally{
                    try {
                        if (stretchy_1_1 && !stretchy_1_1.done && (_c = stretchy_1.return)) _c.call(stretchy_1);
                    } finally{
                        if (e_4) throw e_4.error;
                    }
                }
            }
        };
        return class_1;
    })(Base);
}
exports.CommonMrowMixin = CommonMrowMixin;
function CommonInferredMrowMixin(Base) {
    return (function(_super) {
        __extends(class_2, _super);
        function class_2() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_2.prototype.getScale = function() {
            this.bbox.scale = this.parent.bbox.scale;
            this.bbox.rscale = 1;
        };
        return class_2;
    })(Base);
}
exports.CommonInferredMrowMixin = CommonInferredMrowMixin;

},{"../../../util/BBox.js":"2c5uM"}],"48cRO":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlInferredMrow = exports.MmlMrow = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMrow1 = function(_super) {
    __extends(MmlMrow2, _super);
    function MmlMrow2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._core = null;
        return _this;
    }
    Object.defineProperty(MmlMrow2.prototype, "kind", {
        get: function() {
            return 'mrow';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMrow2.prototype, "isSpacelike", {
        get: function() {
            var e_1, _a;
            try {
                for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                    var child = _c.value;
                    if (!child.isSpacelike) return false;
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMrow2.prototype, "isEmbellished", {
        get: function() {
            var e_2, _a;
            var embellished = false;
            var i = 0;
            try {
                for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                    var child = _c.value;
                    if (child) {
                        if (child.isEmbellished) {
                            if (embellished) return false;
                            embellished = true;
                            this._core = i;
                        } else if (!child.isSpacelike) return false;
                    }
                    i++;
                }
            } catch (e_2_1) {
                e_2 = {
                    error: e_2_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_2) throw e_2.error;
                }
            }
            return embellished;
        },
        enumerable: false,
        configurable: true
    });
    MmlMrow2.prototype.core = function() {
        if (!this.isEmbellished || this._core == null) return this;
        return this.childNodes[this._core];
    };
    MmlMrow2.prototype.coreMO = function() {
        if (!this.isEmbellished || this._core == null) return this;
        return this.childNodes[this._core].coreMO();
    };
    MmlMrow2.prototype.nonSpaceLength = function() {
        var e_3, _a;
        var n = 0;
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (child && !child.isSpacelike) n++;
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        return n;
    };
    MmlMrow2.prototype.firstNonSpace = function() {
        var e_4, _a;
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (child && !child.isSpacelike) return child;
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
        return null;
    };
    MmlMrow2.prototype.lastNonSpace = function() {
        var i = this.childNodes.length;
        while((--i) >= 0){
            var child = this.childNodes[i];
            if (child && !child.isSpacelike) return child;
        }
        return null;
    };
    MmlMrow2.prototype.setTeXclass = function(prev) {
        var e_5, _a, e_6, _b;
        if (this.getProperty('open') != null || this.getProperty('close') != null) {
            this.getPrevClass(prev);
            prev = null;
            try {
                for(var _c = __values(this.childNodes), _d = _c.next(); !_d.done; _d = _c.next()){
                    var child = _d.value;
                    prev = child.setTeXclass(prev);
                }
            } catch (e_5_1) {
                e_5 = {
                    error: e_5_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                } finally{
                    if (e_5) throw e_5.error;
                }
            }
            if (this.texClass == null) this.texClass = MmlNode_js_1.TEXCLASS.INNER;
        } else {
            try {
                for(var _e = __values(this.childNodes), _f = _e.next(); !_f.done; _f = _e.next()){
                    var child = _f.value;
                    prev = child.setTeXclass(prev);
                }
            } catch (e_6_1) {
                e_6 = {
                    error: e_6_1
                };
            } finally{
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                } finally{
                    if (e_6) throw e_6.error;
                }
            }
            if (this.childNodes[0]) this.updateTeXclass(this.childNodes[0]);
        }
        return prev;
    };
    MmlMrow2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults);
    return MmlMrow2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMrow = MmlMrow1;
var MmlInferredMrow1 = function(_super) {
    __extends(MmlInferredMrow2, _super);
    function MmlInferredMrow2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlInferredMrow2.prototype, "kind", {
        get: function() {
            return 'inferredMrow';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlInferredMrow2.prototype, "isInferred", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlInferredMrow2.prototype, "notParent", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlInferredMrow2.prototype.toString = function() {
        return '[' + this.childNodes.join(',') + ']';
    };
    MmlInferredMrow2.defaults = MmlMrow1.defaults;
    return MmlInferredMrow2;
}(MmlMrow1);
exports.MmlInferredMrow = MmlInferredMrow1;

},{"../MmlNode.js":"5Ogy3"}],"2PuLI":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmfenced = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mfenced_js_1 = require("../../common/Wrappers/mfenced.js");
var mfenced_js_2 = require("../../../core/MmlTree/MmlNodes/mfenced.js");
var CHTMLmfenced1 = function(_super) {
    __extends(CHTMLmfenced2, _super);
    function CHTMLmfenced2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmfenced2.prototype.toCHTML = function(parent) {
        var chtml = this.standardCHTMLnode(parent);
        this.mrow.toCHTML(chtml);
    };
    CHTMLmfenced2.kind = mfenced_js_2.MmlMfenced.prototype.kind;
    return CHTMLmfenced2;
}(mfenced_js_1.CommonMfencedMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmfenced = CHTMLmfenced1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mfenced.js":"6OkXw","../../../core/MmlTree/MmlNodes/mfenced.js":"261m5"}],"6OkXw":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMfencedMixin = void 0;
function CommonMfencedMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.mrow = null;
            _this.createMrow();
            _this.addMrowChildren();
            return _this;
        }
        class_1.prototype.createMrow = function() {
            var mmlFactory = this.node.factory;
            var mrow = mmlFactory.create('inferredMrow');
            mrow.inheritAttributesFrom(this.node);
            this.mrow = this.wrap(mrow);
            this.mrow.parent = this;
        };
        class_1.prototype.addMrowChildren = function() {
            var e_1, _a;
            var mfenced = this.node;
            var mrow = this.mrow;
            this.addMo(mfenced.open);
            if (this.childNodes.length) mrow.childNodes.push(this.childNodes[0]);
            var i = 0;
            try {
                for(var _b = __values(this.childNodes.slice(1)), _c = _b.next(); !_c.done; _c = _b.next()){
                    var child = _c.value;
                    this.addMo(mfenced.separators[i++]);
                    mrow.childNodes.push(child);
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
            this.addMo(mfenced.close);
            mrow.stretchChildren();
        };
        class_1.prototype.addMo = function(node) {
            if (!node) return;
            var mo = this.wrap(node);
            this.mrow.childNodes.push(mo);
            mo.parent = this.mrow;
        };
        class_1.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            bbox.updateFrom(this.mrow.getBBox());
            this.setChildPWidths(recompute);
        };
        return class_1;
    })(Base);
}
exports.CommonMfencedMixin = CommonMfencedMixin;

},{}],"261m5":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMfenced = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMfenced1 = function(_super) {
    __extends(MmlMfenced2, _super);
    function MmlMfenced2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.INNER;
        _this.separators = [];
        _this.open = null;
        _this.close = null;
        return _this;
    }
    Object.defineProperty(MmlMfenced2.prototype, "kind", {
        get: function() {
            return 'mfenced';
        },
        enumerable: false,
        configurable: true
    });
    MmlMfenced2.prototype.setTeXclass = function(prev) {
        this.getPrevClass(prev);
        if (this.open) prev = this.open.setTeXclass(prev);
        if (this.childNodes[0]) prev = this.childNodes[0].setTeXclass(prev);
        for(var i = 1, m = this.childNodes.length; i < m; i++){
            if (this.separators[i - 1]) prev = this.separators[i - 1].setTeXclass(prev);
            if (this.childNodes[i]) prev = this.childNodes[i].setTeXclass(prev);
        }
        if (this.close) prev = this.close.setTeXclass(prev);
        this.updateTeXclass(this.open);
        return prev;
    };
    MmlMfenced2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        var e_1, _a;
        this.addFakeNodes();
        try {
            for(var _b = __values([
                this.open,
                this.close
            ].concat(this.separators)), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (child) child.setInheritedAttributes(attributes, display, level, prime);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        _super.prototype.setChildInheritedAttributes.call(this, attributes, display, level, prime);
    };
    MmlMfenced2.prototype.addFakeNodes = function() {
        var e_2, _a;
        var _b = this.attributes.getList('open', 'close', 'separators'), open = _b.open, close = _b.close, separators = _b.separators;
        open = open.replace(/[ \t\n\r]/g, '');
        close = close.replace(/[ \t\n\r]/g, '');
        separators = separators.replace(/[ \t\n\r]/g, '');
        if (open) this.open = this.fakeNode(open, {
            fence: true,
            form: 'prefix'
        }, MmlNode_js_1.TEXCLASS.OPEN);
        if (separators) {
            while(separators.length < this.childNodes.length - 1)separators += separators.charAt(separators.length - 1);
            var i = 0;
            try {
                for(var _c = __values(this.childNodes.slice(1)), _d = _c.next(); !_d.done; _d = _c.next()){
                    var child = _d.value;
                    if (child) this.separators.push(this.fakeNode(separators.charAt(i++)));
                }
            } catch (e_2_1) {
                e_2 = {
                    error: e_2_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                } finally{
                    if (e_2) throw e_2.error;
                }
            }
        }
        if (close) this.close = this.fakeNode(close, {
            fence: true,
            form: 'postfix'
        }, MmlNode_js_1.TEXCLASS.CLOSE);
    };
    MmlMfenced2.prototype.fakeNode = function(c, properties, texClass) {
        if (properties === void 0) properties = {
        };
        if (texClass === void 0) texClass = null;
        var text = this.factory.create('text').setText(c);
        var node = this.factory.create('mo', properties, [
            text
        ]);
        node.texClass = texClass;
        node.parent = this;
        return node;
    };
    MmlMfenced2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults), {
        open: '(',
        close: ')',
        separators: ','
    });
    return MmlMfenced2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMfenced = MmlMfenced1;

},{"../MmlNode.js":"5Ogy3"}],"2l04x":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmfrac = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mfrac_js_1 = require("../../common/Wrappers/mfrac.js");
var mfrac_js_2 = require("../../../core/MmlTree/MmlNodes/mfrac.js");
var CHTMLmfrac1 = function(_super) {
    __extends(CHTMLmfrac2, _super);
    function CHTMLmfrac2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmfrac2.prototype.toCHTML = function(parent) {
        this.standardCHTMLnode(parent);
        var _a = this.node.attributes.getList('linethickness', 'bevelled'), linethickness = _a.linethickness, bevelled = _a.bevelled;
        var display = this.isDisplay();
        if (bevelled) this.makeBevelled(display);
        else {
            var thickness = this.length2em(String(linethickness), 0.06);
            if (thickness === 0) this.makeAtop(display);
            else this.makeFraction(display, thickness);
        }
    };
    CHTMLmfrac2.prototype.makeFraction = function(display, t) {
        var _a = this.node.attributes.getList('numalign', 'denomalign'), numalign = _a.numalign, denomalign = _a.denomalign;
        var withDelims = this.node.getProperty('withDelims');
        var attr = display ? {
            type: 'd'
        } : {
        };
        var fattr = withDelims ? __assign(__assign({
        }, attr), {
            delims: 'true'
        }) : __assign({
        }, attr);
        var nattr = numalign !== 'center' ? {
            align: numalign
        } : {
        };
        var dattr = denomalign !== 'center' ? {
            align: denomalign
        } : {
        };
        var dsattr = __assign({
        }, attr), nsattr = __assign({
        }, attr);
        var tex = this.font.params;
        if (t !== 0.06) {
            var a = tex.axis_height;
            var tEm = this.em(t);
            var _b = this.getTUV(display, t), T = _b.T, u = _b.u, v = _b.v;
            var m = (display ? this.em(3 * t) : tEm) + ' -.1em';
            attr.style = {
                height: tEm,
                'border-top': tEm + ' solid',
                margin: m
            };
            var nh = this.em(Math.max(0, u));
            nsattr.style = {
                height: nh,
                'vertical-align': '-' + nh
            };
            dsattr.style = {
                height: this.em(Math.max(0, v))
            };
            fattr.style = {
                'vertical-align': this.em(a - T)
            };
        }
        var num, den;
        this.adaptor.append(this.chtml, this.html('mjx-frac', fattr, [
            num = this.html('mjx-num', nattr, [
                this.html('mjx-nstrut', nsattr)
            ]),
            this.html('mjx-dbox', {
            }, [
                this.html('mjx-dtable', {
                }, [
                    this.html('mjx-line', attr),
                    this.html('mjx-row', {
                    }, [
                        den = this.html('mjx-den', dattr, [
                            this.html('mjx-dstrut', dsattr)
                        ])
                    ])
                ])
            ])
        ]));
        this.childNodes[0].toCHTML(num);
        this.childNodes[1].toCHTML(den);
    };
    CHTMLmfrac2.prototype.makeAtop = function(display) {
        var _a = this.node.attributes.getList('numalign', 'denomalign'), numalign = _a.numalign, denomalign = _a.denomalign;
        var withDelims = this.node.getProperty('withDelims');
        var attr = display ? {
            type: 'd',
            atop: true
        } : {
            atop: true
        };
        var fattr = withDelims ? __assign(__assign({
        }, attr), {
            delims: true
        }) : __assign({
        }, attr);
        var nattr = numalign !== 'center' ? {
            align: numalign
        } : {
        };
        var dattr = denomalign !== 'center' ? {
            align: denomalign
        } : {
        };
        var _b = this.getUVQ(display), v = _b.v, q = _b.q;
        nattr.style = {
            'padding-bottom': this.em(q)
        };
        fattr.style = {
            'vertical-align': this.em(-v)
        };
        var num, den;
        this.adaptor.append(this.chtml, this.html('mjx-frac', fattr, [
            num = this.html('mjx-num', nattr),
            den = this.html('mjx-den', dattr)
        ]));
        this.childNodes[0].toCHTML(num);
        this.childNodes[1].toCHTML(den);
    };
    CHTMLmfrac2.prototype.makeBevelled = function(display) {
        var adaptor = this.adaptor;
        adaptor.setAttribute(this.chtml, 'bevelled', 'ture');
        var num = adaptor.append(this.chtml, this.html('mjx-num'));
        this.childNodes[0].toCHTML(num);
        this.bevel.toCHTML(this.chtml);
        var den = adaptor.append(this.chtml, this.html('mjx-den'));
        this.childNodes[1].toCHTML(den);
        var _a = this.getBevelData(display), u = _a.u, v = _a.v, delta = _a.delta, nbox = _a.nbox, dbox = _a.dbox;
        if (u) adaptor.setStyle(num, 'verticalAlign', this.em(u / nbox.scale));
        if (v) adaptor.setStyle(den, 'verticalAlign', this.em(v / dbox.scale));
        var dx = this.em(-delta / 2);
        adaptor.setStyle(this.bevel.chtml, 'marginLeft', dx);
        adaptor.setStyle(this.bevel.chtml, 'marginRight', dx);
    };
    CHTMLmfrac2.kind = mfrac_js_2.MmlMfrac.prototype.kind;
    CHTMLmfrac2.styles = {
        'mjx-frac': {
            display: 'inline-block',
            'vertical-align': '0.17em',
            padding: '0 .22em'
        },
        'mjx-frac[type="d"]': {
            'vertical-align': '.04em'
        },
        'mjx-frac[delims]': {
            padding: '0 .1em'
        },
        'mjx-frac[atop]': {
            padding: '0 .12em'
        },
        'mjx-frac[atop][delims]': {
            padding: '0'
        },
        'mjx-dtable': {
            display: 'inline-table',
            width: '100%'
        },
        'mjx-dtable > *': {
            'font-size': '2000%'
        },
        'mjx-dbox': {
            display: 'block',
            'font-size': '5%'
        },
        'mjx-num': {
            display: 'block',
            'text-align': 'center'
        },
        'mjx-den': {
            display: 'block',
            'text-align': 'center'
        },
        'mjx-mfrac[bevelled] > mjx-num': {
            display: 'inline-block'
        },
        'mjx-mfrac[bevelled] > mjx-den': {
            display: 'inline-block'
        },
        'mjx-den[align="right"], mjx-num[align="right"]': {
            'text-align': 'right'
        },
        'mjx-den[align="left"], mjx-num[align="left"]': {
            'text-align': 'left'
        },
        'mjx-nstrut': {
            display: 'inline-block',
            height: '.054em',
            width: 0,
            'vertical-align': '-.054em'
        },
        'mjx-nstrut[type="d"]': {
            height: '.217em',
            'vertical-align': '-.217em'
        },
        'mjx-dstrut': {
            display: 'inline-block',
            height: '.505em',
            width: 0
        },
        'mjx-dstrut[type="d"]': {
            height: '.726em'
        },
        'mjx-line': {
            display: 'block',
            'box-sizing': 'border-box',
            'min-height': '1px',
            height: '.06em',
            'border-top': '.06em solid',
            margin: '.06em -.1em',
            overflow: 'hidden'
        },
        'mjx-line[type="d"]': {
            margin: '.18em -.1em'
        }
    };
    return CHTMLmfrac2;
}(mfrac_js_1.CommonMfracMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmfrac = CHTMLmfrac1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mfrac.js":"6sfWN","../../../core/MmlTree/MmlNodes/mfrac.js":"6SmIQ"}],"6sfWN":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMfracMixin = void 0;
function CommonMfracMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.bevel = null;
            _this.pad = _this.node.getProperty('withDelims') ? 0 : _this.font.params.nulldelimiterspace;
            if (_this.node.attributes.get('bevelled')) {
                var H = _this.getBevelData(_this.isDisplay()).H;
                var bevel = _this.bevel = _this.createMo('/');
                bevel.node.attributes.set('symmetric', true);
                bevel.canStretch(1);
                bevel.getStretchedVariant([
                    H
                ], true);
            }
            return _this;
        }
        class_1.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            bbox.empty();
            var _a = this.node.attributes.getList('linethickness', 'bevelled'), linethickness = _a.linethickness, bevelled = _a.bevelled;
            var display = this.isDisplay();
            var w = null;
            if (bevelled) this.getBevelledBBox(bbox, display);
            else {
                var thickness = this.length2em(String(linethickness), 0.06);
                w = -2 * this.pad;
                if (thickness === 0) this.getAtopBBox(bbox, display);
                else {
                    this.getFractionBBox(bbox, display, thickness);
                    w -= 0.2;
                }
                w += bbox.w;
            }
            bbox.clean();
            this.setChildPWidths(recompute, w);
        };
        class_1.prototype.getFractionBBox = function(bbox, display, t) {
            var nbox = this.childNodes[0].getBBox();
            var dbox = this.childNodes[1].getBBox();
            var tex = this.font.params;
            var a = tex.axis_height;
            var _a = this.getTUV(display, t), T = _a.T, u = _a.u, v = _a.v;
            bbox.combine(nbox, 0, a + T + Math.max(nbox.d * nbox.rscale, u));
            bbox.combine(dbox, 0, a - T - Math.max(dbox.h * dbox.rscale, v));
            bbox.w += 2 * this.pad + 0.2;
        };
        class_1.prototype.getTUV = function(display, t) {
            var tex = this.font.params;
            var a = tex.axis_height;
            var T = (display ? 3.5 : 1.5) * t;
            return {
                T: (display ? 3.5 : 1.5) * t,
                u: (display ? tex.num1 : tex.num2) - a - T,
                v: (display ? tex.denom1 : tex.denom2) + a - T
            };
        };
        class_1.prototype.getAtopBBox = function(bbox, display) {
            var _a = this.getUVQ(display), u = _a.u, v = _a.v, nbox = _a.nbox, dbox = _a.dbox;
            bbox.combine(nbox, 0, u);
            bbox.combine(dbox, 0, -v);
            bbox.w += 2 * this.pad;
        };
        class_1.prototype.getUVQ = function(display) {
            var nbox = this.childNodes[0].getBBox();
            var dbox = this.childNodes[1].getBBox();
            var tex = this.font.params;
            var _a = __read(display ? [
                tex.num1,
                tex.denom1
            ] : [
                tex.num3,
                tex.denom2
            ], 2), u = _a[0], v = _a[1];
            var p = (display ? 7 : 3) * tex.rule_thickness;
            var q = u - nbox.d * nbox.scale - (dbox.h * dbox.scale - v);
            if (q < p) {
                u += (p - q) / 2;
                v += (p - q) / 2;
                q = p;
            }
            return {
                u: u,
                v: v,
                q: q,
                nbox: nbox,
                dbox: dbox
            };
        };
        class_1.prototype.getBevelledBBox = function(bbox, display) {
            var _a = this.getBevelData(display), u = _a.u, v = _a.v, delta = _a.delta, nbox = _a.nbox, dbox = _a.dbox;
            var lbox = this.bevel.getBBox();
            bbox.combine(nbox, 0, u);
            bbox.combine(lbox, bbox.w - delta / 2, 0);
            bbox.combine(dbox, bbox.w - delta / 2, v);
        };
        class_1.prototype.getBevelData = function(display) {
            var nbox = this.childNodes[0].getBBox();
            var dbox = this.childNodes[1].getBBox();
            var delta = display ? 0.4 : 0.15;
            var H = Math.max(nbox.scale * (nbox.h + nbox.d), dbox.scale * (dbox.h + dbox.d)) + 2 * delta;
            var a = this.font.params.axis_height;
            var u = nbox.scale * (nbox.d - nbox.h) / 2 + a + delta;
            var v = dbox.scale * (dbox.d - dbox.h) / 2 + a - delta;
            return {
                H: H,
                delta: delta,
                u: u,
                v: v,
                nbox: nbox,
                dbox: dbox
            };
        };
        class_1.prototype.canStretch = function(_direction) {
            return false;
        };
        class_1.prototype.isDisplay = function() {
            var _a = this.node.attributes.getList('displaystyle', 'scriptlevel'), displaystyle = _a.displaystyle, scriptlevel = _a.scriptlevel;
            return displaystyle && scriptlevel === 0;
        };
        class_1.prototype.getWrapWidth = function(i) {
            var attributes = this.node.attributes;
            if (attributes.get('bevelled')) return this.childNodes[i].getBBox().w;
            var w = this.getBBox().w;
            var thickness = this.length2em(attributes.get('linethickness'));
            return w - (thickness ? 0.2 : 0) - 2 * this.pad;
        };
        class_1.prototype.getChildAlign = function(i) {
            var attributes = this.node.attributes;
            return attributes.get('bevelled') ? 'left' : attributes.get([
                'numalign',
                'denomalign'
            ][i]);
        };
        return class_1;
    })(Base);
}
exports.CommonMfracMixin = CommonMfracMixin;

},{}],"6SmIQ":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMfrac = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMfrac1 = function(_super) {
    __extends(MmlMfrac2, _super);
    function MmlMfrac2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMfrac2.prototype, "kind", {
        get: function() {
            return 'mfrac';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMfrac2.prototype, "arity", {
        get: function() {
            return 2;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMfrac2.prototype, "linebreakContainer", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMfrac2.prototype.setTeXclass = function(prev) {
        var e_1, _a;
        this.getPrevClass(prev);
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                child.setTeXclass(null);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        return this;
    };
    MmlMfrac2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        if (!display || level > 0) level++;
        this.childNodes[0].setInheritedAttributes(attributes, false, level, prime);
        this.childNodes[1].setInheritedAttributes(attributes, false, level, true);
    };
    MmlMfrac2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlBaseNode.defaults), {
        linethickness: 'medium',
        numalign: 'center',
        denomalign: 'center',
        bevelled: false
    });
    return MmlMfrac2;
}(MmlNode_js_1.AbstractMmlBaseNode);
exports.MmlMfrac = MmlMfrac1;

},{"../MmlNode.js":"5Ogy3"}],"SAz8G":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmsqrt = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var msqrt_js_1 = require("../../common/Wrappers/msqrt.js");
var msqrt_js_2 = require("../../../core/MmlTree/MmlNodes/msqrt.js");
var CHTMLmsqrt1 = function(_super) {
    __extends(CHTMLmsqrt2, _super);
    function CHTMLmsqrt2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmsqrt2.prototype.toCHTML = function(parent) {
        var surd = this.childNodes[this.surd];
        var base = this.childNodes[this.base];
        var sbox = surd.getBBox();
        var bbox = base.getBBox();
        var _a = __read(this.getPQ(sbox), 2), q = _a[1];
        var t = this.font.params.rule_thickness;
        var H = bbox.h + q + t;
        var CHTML = this.standardCHTMLnode(parent);
        var SURD, BASE, ROOT, root;
        if (this.root != null) {
            ROOT = this.adaptor.append(CHTML, this.html('mjx-root'));
            root = this.childNodes[this.root];
        }
        var SQRT = this.adaptor.append(CHTML, this.html('mjx-sqrt', {
        }, [
            SURD = this.html('mjx-surd'),
            BASE = this.html('mjx-box', {
                style: {
                    paddingTop: this.em(q)
                }
            })
        ]));
        this.addRoot(ROOT, root, sbox, H);
        surd.toCHTML(SURD);
        base.toCHTML(BASE);
        if (surd.size < 0) this.adaptor.addClass(SQRT, 'mjx-tall');
    };
    CHTMLmsqrt2.prototype.addRoot = function(_ROOT, _root, _sbox, _H) {
    };
    CHTMLmsqrt2.kind = msqrt_js_2.MmlMsqrt.prototype.kind;
    CHTMLmsqrt2.styles = {
        'mjx-root': {
            display: 'inline-block',
            'white-space': 'nowrap'
        },
        'mjx-surd': {
            display: 'inline-block',
            'vertical-align': 'top'
        },
        'mjx-sqrt': {
            display: 'inline-block',
            'padding-top': '.07em'
        },
        'mjx-sqrt > mjx-box': {
            'border-top': '.07em solid'
        },
        'mjx-sqrt.mjx-tall > mjx-box': {
            'padding-left': '.3em',
            'margin-left': '-.3em'
        }
    };
    return CHTMLmsqrt2;
}(msqrt_js_1.CommonMsqrtMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmsqrt = CHTMLmsqrt1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/msqrt.js":"4LzDV","../../../core/MmlTree/MmlNodes/msqrt.js":"5Xdis"}],"4LzDV":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMsqrtMixin = void 0;
var BBox_js_1 = require("../../../util/BBox.js");
function CommonMsqrtMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            var surd = _this.createMo('\u221A');
            surd.canStretch(1);
            var _a = _this.childNodes[_this.base].getBBox(), h = _a.h, d = _a.d;
            var t = _this.font.params.rule_thickness;
            var p = _this.node.attributes.get('displaystyle') ? _this.font.params.x_height : t;
            _this.surdH = h + d + 2 * t + p / 4;
            surd.getStretchedVariant([
                _this.surdH - d,
                d
            ], true);
            return _this;
        }
        Object.defineProperty(class_1.prototype, "base", {
            get: function() {
                return 0;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_1.prototype, "surd", {
            get: function() {
                return 1;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_1.prototype, "root", {
            get: function() {
                return null;
            },
            enumerable: false,
            configurable: true
        });
        class_1.prototype.createMo = function(text) {
            var node = _super.prototype.createMo.call(this, text);
            this.childNodes.push(node);
            return node;
        };
        class_1.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            var surdbox = this.childNodes[this.surd].getBBox();
            var basebox = new BBox_js_1.BBox(this.childNodes[this.base].getBBox());
            var q = this.getPQ(surdbox)[1];
            var t = this.font.params.rule_thickness;
            var H = basebox.h + q + t;
            var _a = __read(this.getRootDimens(surdbox, H), 1), x = _a[0];
            bbox.h = H + t;
            this.combineRootBBox(bbox, surdbox, H);
            bbox.combine(surdbox, x, H - surdbox.h);
            bbox.combine(basebox, x + surdbox.w, 0);
            bbox.clean();
            this.setChildPWidths(recompute);
        };
        class_1.prototype.combineRootBBox = function(_bbox, _sbox, _H) {
        };
        class_1.prototype.getPQ = function(sbox) {
            var t = this.font.params.rule_thickness;
            var p = this.node.attributes.get('displaystyle') ? this.font.params.x_height : t;
            var q = sbox.h + sbox.d > this.surdH ? (sbox.h + sbox.d - (this.surdH - 2 * t - p / 2)) / 2 : t + p / 4;
            return [
                p,
                q
            ];
        };
        class_1.prototype.getRootDimens = function(_sbox, _H) {
            return [
                0,
                0,
                0,
                0
            ];
        };
        return class_1;
    })(Base);
}
exports.CommonMsqrtMixin = CommonMsqrtMixin;

},{"../../../util/BBox.js":"2c5uM"}],"5Xdis":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMsqrt = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMsqrt1 = function(_super) {
    __extends(MmlMsqrt2, _super);
    function MmlMsqrt2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMsqrt2.prototype, "kind", {
        get: function() {
            return 'msqrt';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMsqrt2.prototype, "arity", {
        get: function() {
            return -1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMsqrt2.prototype, "linebreakContainer", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMsqrt2.prototype.setTeXclass = function(prev) {
        this.getPrevClass(prev);
        this.childNodes[0].setTeXclass(null);
        return this;
    };
    MmlMsqrt2.prototype.setChildInheritedAttributes = function(attributes, display, level, _prime) {
        this.childNodes[0].setInheritedAttributes(attributes, display, level, true);
    };
    MmlMsqrt2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults);
    return MmlMsqrt2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMsqrt = MmlMsqrt1;

},{"../MmlNode.js":"5Ogy3"}],"mfGsc":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmroot = void 0;
var msqrt_js_1 = require("./msqrt.js");
var mroot_js_1 = require("../../common/Wrappers/mroot.js");
var mroot_js_2 = require("../../../core/MmlTree/MmlNodes/mroot.js");
var CHTMLmroot1 = function(_super) {
    __extends(CHTMLmroot2, _super);
    function CHTMLmroot2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmroot2.prototype.addRoot = function(ROOT, root, sbox, H) {
        root.toCHTML(ROOT);
        var _a = __read(this.getRootDimens(sbox, H), 3), x = _a[0], h = _a[1], dx = _a[2];
        this.adaptor.setStyle(ROOT, 'verticalAlign', this.em(h));
        this.adaptor.setStyle(ROOT, 'width', this.em(x));
        if (dx) this.adaptor.setStyle(this.adaptor.firstChild(ROOT), 'paddingLeft', this.em(dx));
    };
    CHTMLmroot2.kind = mroot_js_2.MmlMroot.prototype.kind;
    return CHTMLmroot2;
}(mroot_js_1.CommonMrootMixin(msqrt_js_1.CHTMLmsqrt));
exports.CHTMLmroot = CHTMLmroot1;

},{"./msqrt.js":"SAz8G","../../common/Wrappers/mroot.js":"4Yxa1","../../../core/MmlTree/MmlNodes/mroot.js":"1s50t"}],"4Yxa1":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMrootMixin = void 0;
function CommonMrootMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        Object.defineProperty(class_1.prototype, "surd", {
            get: function() {
                return 2;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_1.prototype, "root", {
            get: function() {
                return 1;
            },
            enumerable: false,
            configurable: true
        });
        class_1.prototype.combineRootBBox = function(BBOX, sbox, H) {
            var bbox = this.childNodes[this.root].getBBox();
            var h = this.getRootDimens(sbox, H)[1];
            BBOX.combine(bbox, 0, h);
        };
        class_1.prototype.getRootDimens = function(sbox, H) {
            var surd = this.childNodes[this.surd];
            var bbox = this.childNodes[this.root].getBBox();
            var offset = (surd.size < 0 ? 0.5 : 0.6) * sbox.w;
            var w = bbox.w, rscale = bbox.rscale;
            var W = Math.max(w, offset / rscale);
            var dx = Math.max(0, W - w);
            var h = this.rootHeight(bbox, sbox, surd.size, H);
            var x = W * rscale - offset;
            return [
                x,
                h,
                dx
            ];
        };
        class_1.prototype.rootHeight = function(rbox, sbox, size, H) {
            var h = sbox.h + sbox.d;
            var b = (size < 0 ? 1.9 : 0.55 * h) - (h - H);
            return b + Math.max(0, rbox.d * rbox.rscale);
        };
        return class_1;
    })(Base);
}
exports.CommonMrootMixin = CommonMrootMixin;

},{}],"1s50t":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMroot = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMroot1 = function(_super) {
    __extends(MmlMroot2, _super);
    function MmlMroot2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMroot2.prototype, "kind", {
        get: function() {
            return 'mroot';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMroot2.prototype, "arity", {
        get: function() {
            return 2;
        },
        enumerable: false,
        configurable: true
    });
    MmlMroot2.prototype.setTeXclass = function(prev) {
        this.getPrevClass(prev);
        this.childNodes[0].setTeXclass(null);
        this.childNodes[1].setTeXclass(null);
        return this;
    };
    MmlMroot2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        this.childNodes[0].setInheritedAttributes(attributes, display, level, true);
        this.childNodes[1].setInheritedAttributes(attributes, false, level + 2, prime);
    };
    MmlMroot2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults);
    return MmlMroot2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMroot = MmlMroot1;

},{"../MmlNode.js":"5Ogy3"}],"7AZIk":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmsubsup = exports.CHTMLmsup = exports.CHTMLmsub = void 0;
var scriptbase_js_1 = require("./scriptbase.js");
var msubsup_js_1 = require("../../common/Wrappers/msubsup.js");
var msubsup_js_2 = require("../../common/Wrappers/msubsup.js");
var msubsup_js_3 = require("../../common/Wrappers/msubsup.js");
var msubsup_js_4 = require("../../../core/MmlTree/MmlNodes/msubsup.js");
var CHTMLmsub1 = function(_super) {
    __extends(CHTMLmsub2, _super);
    function CHTMLmsub2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmsub2.kind = msubsup_js_4.MmlMsub.prototype.kind;
    return CHTMLmsub2;
}(msubsup_js_1.CommonMsubMixin(scriptbase_js_1.CHTMLscriptbase));
exports.CHTMLmsub = CHTMLmsub1;
var CHTMLmsup1 = function(_super) {
    __extends(CHTMLmsup2, _super);
    function CHTMLmsup2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmsup2.kind = msubsup_js_4.MmlMsup.prototype.kind;
    return CHTMLmsup2;
}(msubsup_js_2.CommonMsupMixin(scriptbase_js_1.CHTMLscriptbase));
exports.CHTMLmsup = CHTMLmsup1;
var CHTMLmsubsup1 = function(_super) {
    __extends(CHTMLmsubsup2, _super);
    function CHTMLmsubsup2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmsubsup2.prototype.markUsed = function() {
        _super.prototype.markUsed.call(this);
        CHTMLmsubsup2.used = true;
    };
    CHTMLmsubsup2.prototype.toCHTML = function(parent) {
        var adaptor = this.adaptor;
        var chtml = this.standardCHTMLnode(parent);
        var _a = __read([
            this.baseChild,
            this.supChild,
            this.subChild
        ], 3), base = _a[0], sup = _a[1], sub = _a[2];
        var _b = __read(this.getUVQ(), 3), v = _b[1], q = _b[2];
        var style = {
            'vertical-align': this.em(v)
        };
        base.toCHTML(chtml);
        var stack = adaptor.append(chtml, this.html('mjx-script', {
            style: style
        }));
        sup.toCHTML(stack);
        adaptor.append(stack, this.html('mjx-spacer', {
            style: {
                'margin-top': this.em(q)
            }
        }));
        sub.toCHTML(stack);
        var ic = this.getAdjustedIc();
        if (ic) adaptor.setStyle(sup.chtml, 'marginLeft', this.em(ic / sup.bbox.rscale));
        if (this.baseRemoveIc) adaptor.setStyle(stack, 'marginLeft', this.em(-this.baseIc));
    };
    CHTMLmsubsup2.kind = msubsup_js_4.MmlMsubsup.prototype.kind;
    CHTMLmsubsup2.styles = {
        'mjx-script': {
            display: 'inline-block',
            'padding-right': '.05em',
            'padding-left': '.033em'
        },
        'mjx-script > *': {
            display: 'block'
        }
    };
    return CHTMLmsubsup2;
}(msubsup_js_3.CommonMsubsupMixin(scriptbase_js_1.CHTMLscriptbase));
exports.CHTMLmsubsup = CHTMLmsubsup1;

},{"./scriptbase.js":"3PQPe","../../common/Wrappers/msubsup.js":"7gBSA","../../../core/MmlTree/MmlNodes/msubsup.js":"fGNSI"}],"3PQPe":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLscriptbase = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var scriptbase_js_1 = require("../../common/Wrappers/scriptbase.js");
var CHTMLscriptbase1 = function(_super) {
    __extends(CHTMLscriptbase2, _super);
    function CHTMLscriptbase2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLscriptbase2.prototype.toCHTML = function(parent) {
        this.chtml = this.standardCHTMLnode(parent);
        var _a = __read(this.getOffset(), 2), x = _a[0], v = _a[1];
        var dx = x - (this.baseRemoveIc ? this.baseIc : 0);
        var style = {
            'vertical-align': this.em(v)
        };
        if (dx) style['margin-left'] = this.em(dx);
        this.baseChild.toCHTML(this.chtml);
        this.scriptChild.toCHTML(this.adaptor.append(this.chtml, this.html('mjx-script', {
            style: style
        })));
    };
    CHTMLscriptbase2.prototype.setDeltaW = function(nodes, dx) {
        for(var i = 0; i < dx.length; i++)if (dx[i]) this.adaptor.setStyle(nodes[i], 'paddingLeft', this.em(dx[i]));
    };
    CHTMLscriptbase2.prototype.adjustOverDepth = function(over, overbox) {
        if (overbox.d >= 0) return;
        this.adaptor.setStyle(over, 'marginBottom', this.em(overbox.d * overbox.rscale));
    };
    CHTMLscriptbase2.prototype.adjustUnderDepth = function(under, underbox) {
        var e_1, _a;
        if (underbox.d >= 0) return;
        var adaptor = this.adaptor;
        var v = this.em(underbox.d);
        var box = this.html('mjx-box', {
            style: {
                'margin-bottom': v,
                'vertical-align': v
            }
        });
        try {
            for(var _b = __values(adaptor.childNodes(adaptor.firstChild(under))), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                adaptor.append(box, child);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        adaptor.append(adaptor.firstChild(under), box);
    };
    CHTMLscriptbase2.kind = 'scriptbase';
    return CHTMLscriptbase2;
}(scriptbase_js_1.CommonScriptbaseMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLscriptbase = CHTMLscriptbase1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/scriptbase.js":"3v9Jy"}],"3v9Jy":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonScriptbaseMixin = void 0;
function CommonScriptbaseMixin(Base) {
    var _a;
    return _a = (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.baseScale = 1;
            _this.baseIc = 0;
            _this.baseRemoveIc = false;
            _this.baseIsChar = false;
            _this.baseHasAccentOver = null;
            _this.baseHasAccentUnder = null;
            _this.isLineAbove = false;
            _this.isLineBelow = false;
            _this.isMathAccent = false;
            var core = _this.baseCore = _this.getBaseCore();
            if (!core) return _this;
            _this.setBaseAccentsFor(core);
            _this.baseScale = _this.getBaseScale();
            _this.baseIc = _this.getBaseIc();
            _this.baseIsChar = _this.isCharBase();
            _this.isMathAccent = _this.baseIsChar && _this.scriptChild && !!_this.scriptChild.coreMO().node.getProperty('mathaccent');
            _this.checkLineAccents();
            _this.baseRemoveIc = !_this.isLineAbove && !_this.isLineBelow && (!_this.constructor.useIC || _this.isMathAccent);
            return _this;
        }
        Object.defineProperty(class_1.prototype, "baseChild", {
            get: function() {
                return this.childNodes[this.node.base];
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_1.prototype, "scriptChild", {
            get: function() {
                return this.childNodes[1];
            },
            enumerable: false,
            configurable: true
        });
        class_1.prototype.getBaseCore = function() {
            var core = this.getSemanticBase() || this.childNodes[0];
            while(core && (core.childNodes.length === 1 && (core.node.isKind('mrow') || core.node.isKind('TeXAtom') || core.node.isKind('mstyle') || core.node.isKind('mpadded') || core.node.isKind('mphantom') || core.node.isKind('semantics')) || core.node.isKind('munderover') && core.isMathAccent)){
                this.setBaseAccentsFor(core);
                core = core.childNodes[0];
            }
            if (!core) this.baseHasAccentOver = this.baseHasAccentUnder = false;
            return core || this.childNodes[0];
        };
        class_1.prototype.setBaseAccentsFor = function(core) {
            if (core.node.isKind('munderover')) {
                if (this.baseHasAccentOver === null) this.baseHasAccentOver = !!core.node.attributes.get('accent');
                if (this.baseHasAccentUnder === null) this.baseHasAccentUnder = !!core.node.attributes.get('accentunder');
            }
        };
        class_1.prototype.getSemanticBase = function() {
            var fence = this.node.attributes.getExplicit('data-semantic-fencepointer');
            return this.getBaseFence(this.baseChild, fence);
        };
        class_1.prototype.getBaseFence = function(fence, id) {
            var e_1, _a1;
            if (!fence || !fence.node.attributes || !id) return null;
            if (fence.node.attributes.getExplicit('data-semantic-id') === id) return fence;
            try {
                for(var _b = __values(fence.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                    var child = _c.value;
                    var result = this.getBaseFence(child, id);
                    if (result) return result;
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a1 = _b.return)) _a1.call(_b);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
            return null;
        };
        class_1.prototype.getBaseScale = function() {
            var child = this.baseCore;
            var scale = 1;
            while(child && child !== this){
                var bbox = child.getBBox();
                scale *= bbox.rscale;
                child = child.parent;
            }
            return scale;
        };
        class_1.prototype.getBaseIc = function() {
            return this.baseCore.getBBox().ic * this.baseScale;
        };
        class_1.prototype.getAdjustedIc = function() {
            var bbox = this.baseCore.getBBox();
            return (bbox.ic ? 1.05 * bbox.ic + 0.05 : 0) * this.baseScale;
        };
        class_1.prototype.isCharBase = function() {
            var base = this.baseCore;
            return (base.node.isKind('mo') && base.size === null || base.node.isKind('mi') || base.node.isKind('mn')) && base.bbox.rscale === 1 && Array.from(base.getText()).length === 1;
        };
        class_1.prototype.checkLineAccents = function() {
            if (!this.node.isKind('munderover')) return;
            if (this.node.isKind('mover')) this.isLineAbove = this.isLineAccent(this.scriptChild);
            else if (this.node.isKind('munder')) this.isLineBelow = this.isLineAccent(this.scriptChild);
            else {
                var mml = this;
                this.isLineAbove = this.isLineAccent(mml.overChild);
                this.isLineBelow = this.isLineAccent(mml.underChild);
            }
        };
        class_1.prototype.isLineAccent = function(script) {
            var node = script.coreMO().node;
            return node.isToken && node.getText() === '\u2015';
        };
        class_1.prototype.getBaseWidth = function() {
            var bbox = this.baseChild.getBBox();
            return bbox.w * bbox.rscale - (this.baseRemoveIc ? this.baseIc : 0) + this.font.params.extra_ic;
        };
        class_1.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            var w = this.getBaseWidth();
            var _a1 = __read(this.getOffset(), 2), x = _a1[0], y = _a1[1];
            bbox.append(this.baseChild.getBBox());
            bbox.combine(this.scriptChild.getBBox(), w + x, y);
            bbox.w += this.font.params.scriptspace;
            bbox.clean();
            this.setChildPWidths(recompute);
        };
        class_1.prototype.getOffset = function() {
            return [
                0,
                0
            ];
        };
        class_1.prototype.baseCharZero = function(n) {
            var largeop = !!this.baseCore.node.attributes.get('largeop');
            var scale = this.baseScale;
            return this.baseIsChar && !largeop && scale === 1 ? 0 : n;
        };
        class_1.prototype.getV = function() {
            var bbox = this.baseCore.getBBox();
            var sbox = this.scriptChild.getBBox();
            var tex = this.font.params;
            var subscriptshift = this.length2em(this.node.attributes.get('subscriptshift'), tex.sub1);
            return Math.max(this.baseCharZero(bbox.d * this.baseScale + tex.sub_drop * sbox.rscale), subscriptshift, sbox.h * sbox.rscale - 0.8 * tex.x_height);
        };
        class_1.prototype.getU = function() {
            var bbox = this.baseCore.getBBox();
            var sbox = this.scriptChild.getBBox();
            var tex = this.font.params;
            var attr = this.node.attributes.getList('displaystyle', 'superscriptshift');
            var prime = this.node.getProperty('texprimestyle');
            var p = prime ? tex.sup3 : attr.displaystyle ? tex.sup1 : tex.sup2;
            var superscriptshift = this.length2em(attr.superscriptshift, p);
            return Math.max(this.baseCharZero(bbox.h * this.baseScale - tex.sup_drop * sbox.rscale), superscriptshift, sbox.d * sbox.rscale + 0.25 * tex.x_height);
        };
        class_1.prototype.hasMovableLimits = function() {
            var display = this.node.attributes.get('displaystyle');
            var mo = this.baseChild.coreMO().node;
            return !display && !!mo.attributes.get('movablelimits');
        };
        class_1.prototype.getOverKU = function(basebox, overbox) {
            var accent = this.node.attributes.get('accent');
            var tex = this.font.params;
            var d = overbox.d * overbox.rscale;
            var t = tex.rule_thickness * tex.separation_factor;
            var delta = this.baseHasAccentOver ? t : 0;
            var T = this.isLineAbove ? 3 * tex.rule_thickness : t;
            var k = (accent ? T : Math.max(tex.big_op_spacing1, tex.big_op_spacing3 - Math.max(0, d))) - delta;
            return [
                k,
                basebox.h * basebox.rscale + k + d
            ];
        };
        class_1.prototype.getUnderKV = function(basebox, underbox) {
            var accent = this.node.attributes.get('accentunder');
            var tex = this.font.params;
            var h = underbox.h * underbox.rscale;
            var t = tex.rule_thickness * tex.separation_factor;
            var delta = this.baseHasAccentUnder ? t : 0;
            var T = this.isLineBelow ? 3 * tex.rule_thickness : t;
            var k = (accent ? T : Math.max(tex.big_op_spacing2, tex.big_op_spacing4 - h)) - delta;
            return [
                k,
                -(basebox.d * basebox.rscale + k + h)
            ];
        };
        class_1.prototype.getDeltaW = function(boxes, delta) {
            var e_2, _a1, e_3, _b;
            if (delta === void 0) delta = [
                0,
                0,
                0
            ];
            var align = this.node.attributes.get('align');
            var widths = boxes.map(function(box) {
                return box.w * box.rscale;
            });
            widths[0] -= this.baseRemoveIc && !this.baseCore.node.attributes.get('largeop') ? this.baseIc : 0;
            var w = Math.max.apply(Math, __spreadArray([], __read(widths)));
            var dw = [];
            var m = 0;
            try {
                for(var _c = __values(widths.keys()), _d = _c.next(); !_d.done; _d = _c.next()){
                    var i = _d.value;
                    dw[i] = (align === 'center' ? (w - widths[i]) / 2 : align === 'right' ? w - widths[i] : 0) + delta[i];
                    if (dw[i] < m) m = -dw[i];
                }
            } catch (e_2_1) {
                e_2 = {
                    error: e_2_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_a1 = _c.return)) _a1.call(_c);
                } finally{
                    if (e_2) throw e_2.error;
                }
            }
            if (m) try {
                for(var _e = __values(dw.keys()), _f = _e.next(); !_f.done; _f = _e.next()){
                    var i = _f.value;
                    dw[i] += m;
                }
            } catch (e_3_1) {
                e_3 = {
                    error: e_3_1
                };
            } finally{
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                } finally{
                    if (e_3) throw e_3.error;
                }
            }
            return dw;
        };
        class_1.prototype.getDelta = function(noskew) {
            if (noskew === void 0) noskew = false;
            var accent = this.node.attributes.get('accent');
            var _a1 = this.baseCore.getBBox(), sk = _a1.sk, ic = _a1.ic;
            return ((accent && !noskew ? sk : 0) + this.font.skewIcFactor * ic) * this.baseScale;
        };
        class_1.prototype.stretchChildren = function() {
            var e_4, _a1, e_5, _b, e_6, _c;
            var stretchy = [];
            try {
                for(var _d = __values(this.childNodes), _e = _d.next(); !_e.done; _e = _d.next()){
                    var child = _e.value;
                    if (child.canStretch(2)) stretchy.push(child);
                }
            } catch (e_4_1) {
                e_4 = {
                    error: e_4_1
                };
            } finally{
                try {
                    if (_e && !_e.done && (_a1 = _d.return)) _a1.call(_d);
                } finally{
                    if (e_4) throw e_4.error;
                }
            }
            var count = stretchy.length;
            var nodeCount = this.childNodes.length;
            if (count && nodeCount > 1) {
                var W = 0;
                var all = count > 1 && count === nodeCount;
                try {
                    for(var _f = __values(this.childNodes), _g = _f.next(); !_g.done; _g = _f.next()){
                        var child = _g.value;
                        var noStretch = child.stretch.dir === 0;
                        if (all || noStretch) {
                            var _h = child.getBBox(noStretch), w = _h.w, rscale = _h.rscale;
                            if (w * rscale > W) W = w * rscale;
                        }
                    }
                } catch (e_5_1) {
                    e_5 = {
                        error: e_5_1
                    };
                } finally{
                    try {
                        if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
                    } finally{
                        if (e_5) throw e_5.error;
                    }
                }
                try {
                    for(var stretchy_1 = __values(stretchy), stretchy_1_1 = stretchy_1.next(); !stretchy_1_1.done; stretchy_1_1 = stretchy_1.next()){
                        var child = stretchy_1_1.value;
                        child.coreMO().getStretchedVariant([
                            W / child.bbox.rscale
                        ]);
                    }
                } catch (e_6_1) {
                    e_6 = {
                        error: e_6_1
                    };
                } finally{
                    try {
                        if (stretchy_1_1 && !stretchy_1_1.done && (_c = stretchy_1.return)) _c.call(stretchy_1);
                    } finally{
                        if (e_6) throw e_6.error;
                    }
                }
            }
        };
        return class_1;
    })(Base), _a.useIC = true, _a;
}
exports.CommonScriptbaseMixin = CommonScriptbaseMixin;

},{}],"7gBSA":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMsubsupMixin = exports.CommonMsupMixin = exports.CommonMsubMixin = void 0;
function CommonMsubMixin(Base) {
    var _a;
    return _a = (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        Object.defineProperty(class_1.prototype, "scriptChild", {
            get: function() {
                return this.childNodes[this.node.sub];
            },
            enumerable: false,
            configurable: true
        });
        class_1.prototype.getOffset = function() {
            return [
                0,
                -this.getV()
            ];
        };
        return class_1;
    })(Base), _a.useIC = false, _a;
}
exports.CommonMsubMixin = CommonMsubMixin;
function CommonMsupMixin(Base) {
    return (function(_super) {
        __extends(class_2, _super);
        function class_2() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        Object.defineProperty(class_2.prototype, "scriptChild", {
            get: function() {
                return this.childNodes[this.node.sup];
            },
            enumerable: false,
            configurable: true
        });
        class_2.prototype.getOffset = function() {
            var x = this.getAdjustedIc() - (this.baseRemoveIc ? 0 : this.baseIc);
            return [
                x,
                this.getU()
            ];
        };
        return class_2;
    })(Base);
}
exports.CommonMsupMixin = CommonMsupMixin;
function CommonMsubsupMixin(Base) {
    var _a;
    return _a = (function(_super) {
        __extends(class_3, _super);
        function class_3() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.UVQ = null;
            return _this;
        }
        Object.defineProperty(class_3.prototype, "subChild", {
            get: function() {
                return this.childNodes[this.node.sub];
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_3.prototype, "supChild", {
            get: function() {
                return this.childNodes[this.node.sup];
            },
            enumerable: false,
            configurable: true
        });
        class_3.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            var basebox = this.baseChild.getBBox();
            var _a1 = __read([
                this.subChild.getBBox(),
                this.supChild.getBBox()
            ], 2), subbox = _a1[0], supbox = _a1[1];
            bbox.empty();
            bbox.append(basebox);
            var w = this.getBaseWidth();
            var x = this.getAdjustedIc();
            var _b = __read(this.getUVQ(), 2), u = _b[0], v = _b[1];
            bbox.combine(subbox, w, v);
            bbox.combine(supbox, w + x, u);
            bbox.w += this.font.params.scriptspace;
            bbox.clean();
            this.setChildPWidths(recompute);
        };
        class_3.prototype.getUVQ = function(subbox, supbox) {
            if (subbox === void 0) subbox = this.subChild.getBBox();
            if (supbox === void 0) supbox = this.supChild.getBBox();
            var basebox = this.baseCore.getBBox();
            if (this.UVQ) return this.UVQ;
            var tex = this.font.params;
            var t = 3 * tex.rule_thickness;
            var subscriptshift = this.length2em(this.node.attributes.get('subscriptshift'), tex.sub2);
            var drop = this.baseCharZero(basebox.d * this.baseScale + tex.sub_drop * subbox.rscale);
            var _a1 = __read([
                this.getU(),
                Math.max(drop, subscriptshift)
            ], 2), u = _a1[0], v = _a1[1];
            var q = u - supbox.d * supbox.rscale - (subbox.h * subbox.rscale - v);
            if (q < t) {
                v += t - q;
                var p = 0.8 * tex.x_height - (u - supbox.d * supbox.rscale);
                if (p > 0) {
                    u += p;
                    v -= p;
                }
            }
            u = Math.max(this.length2em(this.node.attributes.get('superscriptshift'), u), u);
            v = Math.max(this.length2em(this.node.attributes.get('subscriptshift'), v), v);
            q = u - supbox.d * supbox.rscale - (subbox.h * subbox.rscale - v);
            this.UVQ = [
                u,
                -v,
                q
            ];
            return this.UVQ;
        };
        return class_3;
    })(Base), _a.useIC = false, _a;
}
exports.CommonMsubsupMixin = CommonMsubsupMixin;

},{}],"fGNSI":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMsup = exports.MmlMsub = exports.MmlMsubsup = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMsubsup1 = function(_super) {
    __extends(MmlMsubsup2, _super);
    function MmlMsubsup2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMsubsup2.prototype, "kind", {
        get: function() {
            return 'msubsup';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMsubsup2.prototype, "arity", {
        get: function() {
            return 3;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMsubsup2.prototype, "base", {
        get: function() {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMsubsup2.prototype, "sub", {
        get: function() {
            return 1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMsubsup2.prototype, "sup", {
        get: function() {
            return 2;
        },
        enumerable: false,
        configurable: true
    });
    MmlMsubsup2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        var nodes = this.childNodes;
        nodes[0].setInheritedAttributes(attributes, display, level, prime);
        nodes[1].setInheritedAttributes(attributes, false, level + 1, prime || this.sub === 1);
        if (!nodes[2]) return;
        nodes[2].setInheritedAttributes(attributes, false, level + 1, prime || this.sub === 2);
    };
    MmlMsubsup2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlBaseNode.defaults), {
        subscriptshift: '',
        superscriptshift: ''
    });
    return MmlMsubsup2;
}(MmlNode_js_1.AbstractMmlBaseNode);
exports.MmlMsubsup = MmlMsubsup1;
var MmlMsub1 = function(_super) {
    __extends(MmlMsub2, _super);
    function MmlMsub2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMsub2.prototype, "kind", {
        get: function() {
            return 'msub';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMsub2.prototype, "arity", {
        get: function() {
            return 2;
        },
        enumerable: false,
        configurable: true
    });
    MmlMsub2.defaults = __assign({
    }, MmlMsubsup1.defaults);
    return MmlMsub2;
}(MmlMsubsup1);
exports.MmlMsub = MmlMsub1;
var MmlMsup1 = function(_super) {
    __extends(MmlMsup2, _super);
    function MmlMsup2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMsup2.prototype, "kind", {
        get: function() {
            return 'msup';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMsup2.prototype, "arity", {
        get: function() {
            return 2;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMsup2.prototype, "sup", {
        get: function() {
            return 1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMsup2.prototype, "sub", {
        get: function() {
            return 2;
        },
        enumerable: false,
        configurable: true
    });
    MmlMsup2.defaults = __assign({
    }, MmlMsubsup1.defaults);
    return MmlMsup2;
}(MmlMsubsup1);
exports.MmlMsup = MmlMsup1;

},{"../MmlNode.js":"5Ogy3"}],"W0a6S":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmunderover = exports.CHTMLmover = exports.CHTMLmunder = void 0;
var msubsup_js_1 = require("./msubsup.js");
var munderover_js_1 = require("../../common/Wrappers/munderover.js");
var munderover_js_2 = require("../../common/Wrappers/munderover.js");
var munderover_js_3 = require("../../common/Wrappers/munderover.js");
var munderover_js_4 = require("../../../core/MmlTree/MmlNodes/munderover.js");
var CHTMLmunder1 = function(_super) {
    __extends(CHTMLmunder2, _super);
    function CHTMLmunder2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmunder2.prototype.toCHTML = function(parent) {
        if (this.hasMovableLimits()) {
            _super.prototype.toCHTML.call(this, parent);
            this.adaptor.setAttribute(this.chtml, 'limits', 'false');
            return;
        }
        this.chtml = this.standardCHTMLnode(parent);
        var base = this.adaptor.append(this.adaptor.append(this.chtml, this.html('mjx-row')), this.html('mjx-base'));
        var under = this.adaptor.append(this.adaptor.append(this.chtml, this.html('mjx-row')), this.html('mjx-under'));
        this.baseChild.toCHTML(base);
        this.scriptChild.toCHTML(under);
        var basebox = this.baseChild.getBBox();
        var underbox = this.scriptChild.getBBox();
        var k = this.getUnderKV(basebox, underbox)[0];
        var delta = this.isLineBelow ? 0 : this.getDelta(true);
        this.adaptor.setStyle(under, 'paddingTop', this.em(k));
        this.setDeltaW([
            base,
            under
        ], this.getDeltaW([
            basebox,
            underbox
        ], [
            0,
            -delta
        ]));
        this.adjustUnderDepth(under, underbox);
    };
    CHTMLmunder2.kind = munderover_js_4.MmlMunder.prototype.kind;
    CHTMLmunder2.styles = {
        'mjx-over': {
            'text-align': 'left'
        },
        'mjx-munder:not([limits="false"])': {
            display: 'inline-table'
        },
        'mjx-munder > mjx-row': {
            'text-align': 'left'
        },
        'mjx-under': {
            'padding-bottom': '.1em'
        }
    };
    return CHTMLmunder2;
}(munderover_js_1.CommonMunderMixin(msubsup_js_1.CHTMLmsub));
exports.CHTMLmunder = CHTMLmunder1;
var CHTMLmover1 = function(_super) {
    __extends(CHTMLmover2, _super);
    function CHTMLmover2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmover2.prototype.toCHTML = function(parent) {
        if (this.hasMovableLimits()) {
            _super.prototype.toCHTML.call(this, parent);
            this.adaptor.setAttribute(this.chtml, 'limits', 'false');
            return;
        }
        this.chtml = this.standardCHTMLnode(parent);
        var over = this.adaptor.append(this.chtml, this.html('mjx-over'));
        var base = this.adaptor.append(this.chtml, this.html('mjx-base'));
        this.scriptChild.toCHTML(over);
        this.baseChild.toCHTML(base);
        var overbox = this.scriptChild.getBBox();
        var basebox = this.baseChild.getBBox();
        var k = this.getOverKU(basebox, overbox)[0];
        var delta = this.isLineAbove ? 0 : this.getDelta();
        this.adaptor.setStyle(over, 'paddingBottom', this.em(k));
        this.setDeltaW([
            base,
            over
        ], this.getDeltaW([
            basebox,
            overbox
        ], [
            0,
            delta
        ]));
        this.adjustOverDepth(over, overbox);
    };
    CHTMLmover2.kind = munderover_js_4.MmlMover.prototype.kind;
    CHTMLmover2.styles = {
        'mjx-mover:not([limits="false"])': {
            'padding-top': '.1em'
        },
        'mjx-mover:not([limits="false"]) > *': {
            display: 'block',
            'text-align': 'left'
        }
    };
    return CHTMLmover2;
}(munderover_js_2.CommonMoverMixin(msubsup_js_1.CHTMLmsup));
exports.CHTMLmover = CHTMLmover1;
var CHTMLmunderover1 = function(_super) {
    __extends(CHTMLmunderover2, _super);
    function CHTMLmunderover2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmunderover2.prototype.toCHTML = function(parent) {
        if (this.hasMovableLimits()) {
            _super.prototype.toCHTML.call(this, parent);
            this.adaptor.setAttribute(this.chtml, 'limits', 'false');
            return;
        }
        this.chtml = this.standardCHTMLnode(parent);
        var over = this.adaptor.append(this.chtml, this.html('mjx-over'));
        var table = this.adaptor.append(this.adaptor.append(this.chtml, this.html('mjx-box')), this.html('mjx-munder'));
        var base = this.adaptor.append(this.adaptor.append(table, this.html('mjx-row')), this.html('mjx-base'));
        var under = this.adaptor.append(this.adaptor.append(table, this.html('mjx-row')), this.html('mjx-under'));
        this.overChild.toCHTML(over);
        this.baseChild.toCHTML(base);
        this.underChild.toCHTML(under);
        var overbox = this.overChild.getBBox();
        var basebox = this.baseChild.getBBox();
        var underbox = this.underChild.getBBox();
        var ok = this.getOverKU(basebox, overbox)[0];
        var uk = this.getUnderKV(basebox, underbox)[0];
        var delta = this.getDelta();
        this.adaptor.setStyle(over, 'paddingBottom', this.em(ok));
        this.adaptor.setStyle(under, 'paddingTop', this.em(uk));
        this.setDeltaW([
            base,
            under,
            over
        ], this.getDeltaW([
            basebox,
            underbox,
            overbox
        ], [
            0,
            this.isLineBelow ? 0 : -delta,
            this.isLineAbove ? 0 : delta
        ]));
        this.adjustOverDepth(over, overbox);
        this.adjustUnderDepth(under, underbox);
    };
    CHTMLmunderover2.kind = munderover_js_4.MmlMunderover.prototype.kind;
    CHTMLmunderover2.styles = {
        'mjx-munderover:not([limits="false"])': {
            'padding-top': '.1em'
        },
        'mjx-munderover:not([limits="false"]) > *': {
            display: 'block'
        }
    };
    return CHTMLmunderover2;
}(munderover_js_3.CommonMunderoverMixin(msubsup_js_1.CHTMLmsubsup));
exports.CHTMLmunderover = CHTMLmunderover1;

},{"./msubsup.js":"7AZIk","../../common/Wrappers/munderover.js":"bQkNq","../../../core/MmlTree/MmlNodes/munderover.js":"K9G6l"}],"bQkNq":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMunderoverMixin = exports.CommonMoverMixin = exports.CommonMunderMixin = void 0;
function CommonMunderMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.stretchChildren();
            return _this;
        }
        Object.defineProperty(class_1.prototype, "scriptChild", {
            get: function() {
                return this.childNodes[this.node.under];
            },
            enumerable: false,
            configurable: true
        });
        class_1.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            if (this.hasMovableLimits()) {
                _super.prototype.computeBBox.call(this, bbox, recompute);
                return;
            }
            bbox.empty();
            var basebox = this.baseChild.getBBox();
            var underbox = this.scriptChild.getBBox();
            var v = this.getUnderKV(basebox, underbox)[1];
            var delta = this.isLineBelow ? 0 : this.getDelta(true);
            var _a = __read(this.getDeltaW([
                basebox,
                underbox
            ], [
                0,
                -delta
            ]), 2), bw = _a[0], uw = _a[1];
            bbox.combine(basebox, bw, 0);
            bbox.combine(underbox, uw, v);
            bbox.d += this.font.params.big_op_spacing5;
            bbox.clean();
            this.setChildPWidths(recompute);
        };
        return class_1;
    })(Base);
}
exports.CommonMunderMixin = CommonMunderMixin;
function CommonMoverMixin(Base) {
    return (function(_super) {
        __extends(class_2, _super);
        function class_2() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.stretchChildren();
            return _this;
        }
        Object.defineProperty(class_2.prototype, "scriptChild", {
            get: function() {
                return this.childNodes[this.node.over];
            },
            enumerable: false,
            configurable: true
        });
        class_2.prototype.computeBBox = function(bbox) {
            if (this.hasMovableLimits()) {
                _super.prototype.computeBBox.call(this, bbox);
                return;
            }
            bbox.empty();
            var basebox = this.baseChild.getBBox();
            var overbox = this.scriptChild.getBBox();
            var u = this.getOverKU(basebox, overbox)[1];
            var delta = this.isLineAbove ? 0 : this.getDelta();
            var _a = __read(this.getDeltaW([
                basebox,
                overbox
            ], [
                0,
                delta
            ]), 2), bw = _a[0], ow = _a[1];
            bbox.combine(basebox, bw, 0);
            bbox.combine(overbox, ow, u);
            bbox.h += this.font.params.big_op_spacing5;
            bbox.clean();
        };
        return class_2;
    })(Base);
}
exports.CommonMoverMixin = CommonMoverMixin;
function CommonMunderoverMixin(Base) {
    return (function(_super) {
        __extends(class_3, _super);
        function class_3() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.stretchChildren();
            return _this;
        }
        Object.defineProperty(class_3.prototype, "underChild", {
            get: function() {
                return this.childNodes[this.node.under];
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_3.prototype, "overChild", {
            get: function() {
                return this.childNodes[this.node.over];
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_3.prototype, "subChild", {
            get: function() {
                return this.underChild;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_3.prototype, "supChild", {
            get: function() {
                return this.overChild;
            },
            enumerable: false,
            configurable: true
        });
        class_3.prototype.computeBBox = function(bbox) {
            if (this.hasMovableLimits()) {
                _super.prototype.computeBBox.call(this, bbox);
                return;
            }
            bbox.empty();
            var overbox = this.overChild.getBBox();
            var basebox = this.baseChild.getBBox();
            var underbox = this.underChild.getBBox();
            var u = this.getOverKU(basebox, overbox)[1];
            var v = this.getUnderKV(basebox, underbox)[1];
            var delta = this.getDelta();
            var _a = __read(this.getDeltaW([
                basebox,
                underbox,
                overbox
            ], [
                0,
                this.isLineBelow ? 0 : -delta,
                this.isLineAbove ? 0 : delta
            ]), 3), bw = _a[0], uw = _a[1], ow = _a[2];
            bbox.combine(basebox, bw, 0);
            bbox.combine(overbox, ow, u);
            bbox.combine(underbox, uw, v);
            var z = this.font.params.big_op_spacing5;
            bbox.h += z;
            bbox.d += z;
            bbox.clean();
        };
        return class_3;
    })(Base);
}
exports.CommonMunderoverMixin = CommonMunderoverMixin;

},{}],"K9G6l":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMover = exports.MmlMunder = exports.MmlMunderover = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMunderover1 = function(_super) {
    __extends(MmlMunderover2, _super);
    function MmlMunderover2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMunderover2.prototype, "kind", {
        get: function() {
            return 'munderover';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMunderover2.prototype, "arity", {
        get: function() {
            return 3;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMunderover2.prototype, "base", {
        get: function() {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMunderover2.prototype, "under", {
        get: function() {
            return 1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMunderover2.prototype, "over", {
        get: function() {
            return 2;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMunderover2.prototype, "linebreakContainer", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMunderover2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        var nodes = this.childNodes;
        nodes[0].setInheritedAttributes(attributes, display, level, prime || !!nodes[this.over]);
        var force = !!(!display && nodes[0].coreMO().attributes.get('movablelimits'));
        var ACCENTS = this.constructor.ACCENTS;
        nodes[1].setInheritedAttributes(attributes, false, this.getScriptlevel(ACCENTS[1], force, level), prime || this.under === 1);
        this.setInheritedAccent(1, ACCENTS[1], display, level, prime, force);
        if (!nodes[2]) return;
        nodes[2].setInheritedAttributes(attributes, false, this.getScriptlevel(ACCENTS[2], force, level), prime || this.under === 2);
        this.setInheritedAccent(2, ACCENTS[2], display, level, prime, force);
    };
    MmlMunderover2.prototype.getScriptlevel = function(accent, force, level) {
        if (force || !this.attributes.get(accent)) level++;
        return level;
    };
    MmlMunderover2.prototype.setInheritedAccent = function(n, accent, display, level, prime, force) {
        var node = this.childNodes[n];
        if (this.attributes.getExplicit(accent) == null && node.isEmbellished) {
            var value = node.coreMO().attributes.get('accent');
            this.attributes.setInherited(accent, value);
            if (value !== this.attributes.getDefault(accent)) node.setInheritedAttributes({
            }, display, this.getScriptlevel(accent, force, level), prime);
        }
    };
    MmlMunderover2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlBaseNode.defaults), {
        accent: false,
        accentunder: false,
        align: 'center'
    });
    MmlMunderover2.ACCENTS = [
        '',
        'accentunder',
        'accent'
    ];
    return MmlMunderover2;
}(MmlNode_js_1.AbstractMmlBaseNode);
exports.MmlMunderover = MmlMunderover1;
var MmlMunder1 = function(_super) {
    __extends(MmlMunder2, _super);
    function MmlMunder2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMunder2.prototype, "kind", {
        get: function() {
            return 'munder';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMunder2.prototype, "arity", {
        get: function() {
            return 2;
        },
        enumerable: false,
        configurable: true
    });
    MmlMunder2.defaults = __assign({
    }, MmlMunderover1.defaults);
    return MmlMunder2;
}(MmlMunderover1);
exports.MmlMunder = MmlMunder1;
var MmlMover1 = function(_super) {
    __extends(MmlMover2, _super);
    function MmlMover2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMover2.prototype, "kind", {
        get: function() {
            return 'mover';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMover2.prototype, "arity", {
        get: function() {
            return 2;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMover2.prototype, "over", {
        get: function() {
            return 1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMover2.prototype, "under", {
        get: function() {
            return 2;
        },
        enumerable: false,
        configurable: true
    });
    MmlMover2.defaults = __assign({
    }, MmlMunderover1.defaults);
    MmlMover2.ACCENTS = [
        '',
        'accent',
        'accentunder'
    ];
    return MmlMover2;
}(MmlMunderover1);
exports.MmlMover = MmlMover1;

},{"../MmlNode.js":"5Ogy3"}],"2t1TB":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmmultiscripts = void 0;
var msubsup_js_1 = require("./msubsup.js");
var mmultiscripts_js_1 = require("../../common/Wrappers/mmultiscripts.js");
var mmultiscripts_js_2 = require("../../../core/MmlTree/MmlNodes/mmultiscripts.js");
var CHTMLmmultiscripts1 = function(_super) {
    __extends(CHTMLmmultiscripts2, _super);
    function CHTMLmmultiscripts2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmmultiscripts2.prototype.toCHTML = function(parent) {
        var chtml = this.standardCHTMLnode(parent);
        var data = this.scriptData;
        var sub = this.combinePrePost(data.sub, data.psub);
        var sup = this.combinePrePost(data.sup, data.psup);
        var _a = __read(this.getUVQ(sub, sup), 2), u = _a[0], v = _a[1];
        if (data.numPrescripts) this.addScripts(u, -v, true, data.psub, data.psup, this.firstPrescript, data.numPrescripts);
        this.childNodes[0].toCHTML(chtml);
        if (data.numScripts) this.addScripts(u, -v, false, data.sub, data.sup, 1, data.numScripts);
    };
    CHTMLmmultiscripts2.prototype.addScripts = function(u, v, isPre, sub, sup, i, n) {
        var adaptor = this.adaptor;
        var q = u - sup.d + (v - sub.h);
        var U = u < 0 && v === 0 ? sub.h + u : u;
        var rowdef = q > 0 ? {
            style: {
                height: this.em(q)
            }
        } : {
        };
        var tabledef = U ? {
            style: {
                'vertical-align': this.em(U)
            }
        } : {
        };
        var supRow = this.html('mjx-row');
        var sepRow = this.html('mjx-row', rowdef);
        var subRow = this.html('mjx-row');
        var name = 'mjx-' + (isPre ? 'pre' : '') + 'scripts';
        adaptor.append(this.chtml, this.html(name, tabledef, [
            supRow,
            sepRow,
            subRow
        ]));
        var m = i + 2 * n;
        while(i < m){
            this.childNodes[i++].toCHTML(adaptor.append(subRow, this.html('mjx-cell')));
            this.childNodes[i++].toCHTML(adaptor.append(supRow, this.html('mjx-cell')));
        }
    };
    CHTMLmmultiscripts2.kind = mmultiscripts_js_2.MmlMmultiscripts.prototype.kind;
    CHTMLmmultiscripts2.styles = {
        'mjx-prescripts': {
            display: 'inline-table',
            'padding-left': '.05em'
        },
        'mjx-scripts': {
            display: 'inline-table',
            'padding-right': '.05em'
        },
        'mjx-prescripts > mjx-row > mjx-cell': {
            'text-align': 'right'
        }
    };
    return CHTMLmmultiscripts2;
}(mmultiscripts_js_1.CommonMmultiscriptsMixin(msubsup_js_1.CHTMLmsubsup));
exports.CHTMLmmultiscripts = CHTMLmmultiscripts1;

},{"./msubsup.js":"7AZIk","../../common/Wrappers/mmultiscripts.js":"6EdBS","../../../core/MmlTree/MmlNodes/mmultiscripts.js":"7uKSr"}],"6EdBS":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMmultiscriptsMixin = exports.ScriptNames = exports.NextScript = void 0;
var BBox_js_1 = require("../../../util/BBox.js");
exports.NextScript = {
    base: 'subList',
    subList: 'supList',
    supList: 'subList',
    psubList: 'psupList',
    psupList: 'psubList'
};
exports.ScriptNames = [
    'sup',
    'sup',
    'psup',
    'psub'
];
function CommonMmultiscriptsMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.scriptData = null;
            _this.firstPrescript = 0;
            _this.getScriptData();
            return _this;
        }
        class_1.prototype.combinePrePost = function(pre, post) {
            var bbox = new BBox_js_1.BBox(pre);
            bbox.combine(post, 0, 0);
            return bbox;
        };
        class_1.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            var scriptspace = this.font.params.scriptspace;
            var data = this.scriptData;
            var sub = this.combinePrePost(data.sub, data.psub);
            var sup = this.combinePrePost(data.sup, data.psup);
            var _a = __read(this.getUVQ(sub, sup), 2), u = _a[0], v = _a[1];
            bbox.empty();
            if (data.numPrescripts) {
                bbox.combine(data.psup, scriptspace, u);
                bbox.combine(data.psub, scriptspace, v);
            }
            bbox.append(data.base);
            if (data.numScripts) {
                var w = bbox.w;
                bbox.combine(data.sup, w, u);
                bbox.combine(data.sub, w, v);
                bbox.w += scriptspace;
            }
            bbox.clean();
            this.setChildPWidths(recompute);
        };
        class_1.prototype.getScriptData = function() {
            var data = this.scriptData = {
                base: null,
                sub: BBox_js_1.BBox.empty(),
                sup: BBox_js_1.BBox.empty(),
                psub: BBox_js_1.BBox.empty(),
                psup: BBox_js_1.BBox.empty(),
                numPrescripts: 0,
                numScripts: 0
            };
            var lists = this.getScriptBBoxLists();
            this.combineBBoxLists(data.sub, data.sup, lists.subList, lists.supList);
            this.combineBBoxLists(data.psub, data.psup, lists.psubList, lists.psupList);
            data.base = lists.base[0];
            data.numPrescripts = lists.psubList.length;
            data.numScripts = lists.subList.length;
        };
        class_1.prototype.getScriptBBoxLists = function() {
            var e_1, _a;
            var lists = {
                base: [],
                subList: [],
                supList: [],
                psubList: [],
                psupList: []
            };
            var script = 'base';
            try {
                for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                    var child = _c.value;
                    if (child.node.isKind('mprescripts')) script = 'psubList';
                    else {
                        lists[script].push(child.getBBox());
                        script = exports.NextScript[script];
                    }
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
            this.firstPrescript = lists.subList.length + lists.supList.length + 2;
            this.padLists(lists.subList, lists.supList);
            this.padLists(lists.psubList, lists.psupList);
            return lists;
        };
        class_1.prototype.padLists = function(list1, list2) {
            if (list1.length > list2.length) list2.push(BBox_js_1.BBox.empty());
        };
        class_1.prototype.combineBBoxLists = function(bbox1, bbox2, list1, list2) {
            for(var i = 0; i < list1.length; i++){
                var _a = __read(this.getScaledWHD(list1[i]), 3), w1 = _a[0], h1 = _a[1], d1 = _a[2];
                var _b = __read(this.getScaledWHD(list2[i]), 3), w2 = _b[0], h2 = _b[1], d2 = _b[2];
                var w = Math.max(w1, w2);
                bbox1.w += w;
                bbox2.w += w;
                if (h1 > bbox1.h) bbox1.h = h1;
                if (d1 > bbox1.d) bbox1.d = d1;
                if (h2 > bbox2.h) bbox2.h = h2;
                if (d2 > bbox2.d) bbox2.d = d2;
            }
        };
        class_1.prototype.getScaledWHD = function(bbox) {
            var w = bbox.w, h = bbox.h, d = bbox.d, rscale = bbox.rscale;
            return [
                w * rscale,
                h * rscale,
                d * rscale
            ];
        };
        class_1.prototype.getUVQ = function(subbox, supbox) {
            var _a;
            if (!this.UVQ) {
                var _b = __read([
                    0,
                    0,
                    0
                ], 3), u = _b[0], v = _b[1], q = _b[2];
                if (subbox.h === 0 && subbox.d === 0) u = this.getU();
                else if (supbox.h === 0 && supbox.d === 0) u = -this.getV();
                else _a = __read(_super.prototype.getUVQ.call(this, subbox, supbox), 3), u = _a[0], v = _a[1], q = _a[2];
                this.UVQ = [
                    u,
                    v,
                    q
                ];
            }
            return this.UVQ;
        };
        return class_1;
    })(Base);
}
exports.CommonMmultiscriptsMixin = CommonMmultiscriptsMixin;

},{"../../../util/BBox.js":"2c5uM"}],"7uKSr":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlNone = exports.MmlMprescripts = exports.MmlMmultiscripts = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var msubsup_js_1 = require("./msubsup.js");
var MmlMmultiscripts1 = function(_super) {
    __extends(MmlMmultiscripts2, _super);
    function MmlMmultiscripts2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMmultiscripts2.prototype, "kind", {
        get: function() {
            return 'mmultiscripts';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMmultiscripts2.prototype, "arity", {
        get: function() {
            return 1;
        },
        enumerable: false,
        configurable: true
    });
    MmlMmultiscripts2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        this.childNodes[0].setInheritedAttributes(attributes, display, level, prime);
        var prescripts = false;
        for(var i = 1, n = 0; i < this.childNodes.length; i++){
            var child = this.childNodes[i];
            if (child.isKind('mprescripts')) {
                if (!prescripts) {
                    prescripts = true;
                    if (i % 2 === 0) {
                        var mrow = this.factory.create('mrow');
                        this.childNodes.splice(i, 0, mrow);
                        mrow.parent = this;
                        i++;
                    }
                }
            } else {
                var primestyle = prime || n % 2 === 0;
                child.setInheritedAttributes(attributes, false, level + 1, primestyle);
                n++;
            }
        }
        if (this.childNodes.length % 2 === (prescripts ? 1 : 0)) {
            this.appendChild(this.factory.create('mrow'));
            this.childNodes[this.childNodes.length - 1].setInheritedAttributes(attributes, false, level + 1, prime);
        }
    };
    MmlMmultiscripts2.prototype.verifyChildren = function(options) {
        var prescripts = false;
        var fix = options['fixMmultiscripts'];
        for(var i = 0; i < this.childNodes.length; i++){
            var child = this.childNodes[i];
            if (child.isKind('mprescripts')) {
                if (prescripts) child.mError(child.kind + ' can only appear once in ' + this.kind, options, true);
                else {
                    prescripts = true;
                    if (i % 2 === 0 && !fix) this.mError('There must be an equal number of prescripts of each type', options);
                }
            }
        }
        if (this.childNodes.length % 2 === (prescripts ? 1 : 0) && !fix) this.mError('There must be an equal number of scripts of each type', options);
        _super.prototype.verifyChildren.call(this, options);
    };
    MmlMmultiscripts2.defaults = __assign({
    }, msubsup_js_1.MmlMsubsup.defaults);
    return MmlMmultiscripts2;
}(msubsup_js_1.MmlMsubsup);
exports.MmlMmultiscripts = MmlMmultiscripts1;
var MmlMprescripts1 = function(_super) {
    __extends(MmlMprescripts2, _super);
    function MmlMprescripts2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMprescripts2.prototype, "kind", {
        get: function() {
            return 'mprescripts';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMprescripts2.prototype, "arity", {
        get: function() {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    MmlMprescripts2.prototype.verifyTree = function(options) {
        _super.prototype.verifyTree.call(this, options);
        if (this.parent && !this.parent.isKind('mmultiscripts')) this.mError(this.kind + ' must be a child of mmultiscripts', options, true);
    };
    MmlMprescripts2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults);
    return MmlMprescripts2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMprescripts = MmlMprescripts1;
var MmlNone1 = function(_super) {
    __extends(MmlNone2, _super);
    function MmlNone2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlNone2.prototype, "kind", {
        get: function() {
            return 'none';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlNone2.prototype, "arity", {
        get: function() {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    MmlNone2.prototype.verifyTree = function(options) {
        _super.prototype.verifyTree.call(this, options);
        if (this.parent && !this.parent.isKind('mmultiscripts')) this.mError(this.kind + ' must be a child of mmultiscripts', options, true);
    };
    MmlNone2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults);
    return MmlNone2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlNone = MmlNone1;

},{"../MmlNode.js":"5Ogy3","./msubsup.js":"fGNSI"}],"5mXzH":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmtable = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mtable_js_1 = require("../../common/Wrappers/mtable.js");
var mtable_js_2 = require("../../../core/MmlTree/MmlNodes/mtable.js");
var string_js_1 = require("../../../util/string.js");
var CHTMLmtable1 = function(_super) {
    __extends(CHTMLmtable2, _super);
    function CHTMLmtable2(factory, node, parent) {
        if (parent === void 0) parent = null;
        var _this = _super.call(this, factory, node, parent) || this;
        _this.itable = _this.html('mjx-itable');
        _this.labels = _this.html('mjx-itable');
        return _this;
    }
    CHTMLmtable2.prototype.getAlignShift = function() {
        var data = _super.prototype.getAlignShift.call(this);
        if (!this.isTop) data[1] = 0;
        return data;
    };
    CHTMLmtable2.prototype.toCHTML = function(parent) {
        var e_1, _a;
        var chtml = this.standardCHTMLnode(parent);
        this.adaptor.append(chtml, this.html('mjx-table', {
        }, [
            this.itable
        ]));
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                child.toCHTML(this.itable);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        this.padRows();
        this.handleColumnSpacing();
        this.handleColumnLines();
        this.handleColumnWidths();
        this.handleRowSpacing();
        this.handleRowLines();
        this.handleRowHeights();
        this.handleFrame();
        this.handleWidth();
        this.handleLabels();
        this.handleAlign();
        this.handleJustify();
        this.shiftColor();
    };
    CHTMLmtable2.prototype.shiftColor = function() {
        var adaptor = this.adaptor;
        var color = adaptor.getStyle(this.chtml, 'backgroundColor');
        if (color) {
            adaptor.setStyle(this.chtml, 'backgroundColor', '');
            adaptor.setStyle(this.itable, 'backgroundColor', color);
        }
    };
    CHTMLmtable2.prototype.padRows = function() {
        var e_2, _a;
        var adaptor = this.adaptor;
        try {
            for(var _b = __values(adaptor.childNodes(this.itable)), _c = _b.next(); !_c.done; _c = _b.next()){
                var row = _c.value;
                while(adaptor.childNodes(row).length < this.numCols)adaptor.append(row, this.html('mjx-mtd'));
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    };
    CHTMLmtable2.prototype.handleColumnSpacing = function() {
        var e_3, _a, e_4, _b;
        var scale = this.childNodes[0] ? 1 / this.childNodes[0].getBBox().rscale : 1;
        var spacing = this.getEmHalfSpacing(this.fSpace[0], this.cSpace, scale);
        var frame = this.frame;
        try {
            for(var _c = __values(this.tableRows), _d = _c.next(); !_d.done; _d = _c.next()){
                var row = _d.value;
                var i = 0;
                try {
                    for(var _e = (e_4 = void 0, __values(row.tableCells)), _f = _e.next(); !_f.done; _f = _e.next()){
                        var cell = _f.value;
                        var lspace = spacing[i++];
                        var rspace = spacing[i];
                        var styleNode = cell ? cell.chtml : this.adaptor.childNodes(row.chtml)[i];
                        if (i > 1 && lspace !== '0.4em' || frame && i === 1) this.adaptor.setStyle(styleNode, 'paddingLeft', lspace);
                        if (i < this.numCols && rspace !== '0.4em' || frame && i === this.numCols) this.adaptor.setStyle(styleNode, 'paddingRight', rspace);
                    }
                } catch (e_4_1) {
                    e_4 = {
                        error: e_4_1
                    };
                } finally{
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    } finally{
                        if (e_4) throw e_4.error;
                    }
                }
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
    };
    CHTMLmtable2.prototype.handleColumnLines = function() {
        var e_5, _a, e_6, _b;
        if (this.node.attributes.get('columnlines') === 'none') return;
        var lines = this.getColumnAttributes('columnlines');
        try {
            for(var _c = __values(this.childNodes), _d = _c.next(); !_d.done; _d = _c.next()){
                var row = _d.value;
                var i = 0;
                try {
                    for(var _e = (e_6 = void 0, __values(this.adaptor.childNodes(row.chtml).slice(1))), _f = _e.next(); !_f.done; _f = _e.next()){
                        var cell = _f.value;
                        var line = lines[i++];
                        if (line === 'none') continue;
                        this.adaptor.setStyle(cell, 'borderLeft', '.07em ' + line);
                    }
                } catch (e_6_1) {
                    e_6 = {
                        error: e_6_1
                    };
                } finally{
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    } finally{
                        if (e_6) throw e_6.error;
                    }
                }
            }
        } catch (e_5_1) {
            e_5 = {
                error: e_5_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_5) throw e_5.error;
            }
        }
    };
    CHTMLmtable2.prototype.handleColumnWidths = function() {
        var e_7, _a, e_8, _b;
        try {
            for(var _c = __values(this.childNodes), _d = _c.next(); !_d.done; _d = _c.next()){
                var row = _d.value;
                var i = 0;
                try {
                    for(var _e = (e_8 = void 0, __values(this.adaptor.childNodes(row.chtml))), _f = _e.next(); !_f.done; _f = _e.next()){
                        var cell = _f.value;
                        var w = this.cWidths[i++];
                        if (w !== null) {
                            var width = typeof w === 'number' ? this.em(w) : w;
                            this.adaptor.setStyle(cell, 'width', width);
                            this.adaptor.setStyle(cell, 'maxWidth', width);
                            this.adaptor.setStyle(cell, 'minWidth', width);
                        }
                    }
                } catch (e_8_1) {
                    e_8 = {
                        error: e_8_1
                    };
                } finally{
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    } finally{
                        if (e_8) throw e_8.error;
                    }
                }
            }
        } catch (e_7_1) {
            e_7 = {
                error: e_7_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_7) throw e_7.error;
            }
        }
    };
    CHTMLmtable2.prototype.handleRowSpacing = function() {
        var e_9, _a, e_10, _b;
        var scale = this.childNodes[0] ? 1 / this.childNodes[0].getBBox().rscale : 1;
        var spacing = this.getEmHalfSpacing(this.fSpace[1], this.rSpace, scale);
        var frame = this.frame;
        var i = 0;
        try {
            for(var _c = __values(this.childNodes), _d = _c.next(); !_d.done; _d = _c.next()){
                var row = _d.value;
                var tspace = spacing[i++];
                var bspace = spacing[i];
                try {
                    for(var _e = (e_10 = void 0, __values(row.childNodes)), _f = _e.next(); !_f.done; _f = _e.next()){
                        var cell = _f.value;
                        if (i > 1 && tspace !== '0.215em' || frame && i === 1) this.adaptor.setStyle(cell.chtml, 'paddingTop', tspace);
                        if (i < this.numRows && bspace !== '0.215em' || frame && i === this.numRows) this.adaptor.setStyle(cell.chtml, 'paddingBottom', bspace);
                    }
                } catch (e_10_1) {
                    e_10 = {
                        error: e_10_1
                    };
                } finally{
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    } finally{
                        if (e_10) throw e_10.error;
                    }
                }
            }
        } catch (e_9_1) {
            e_9 = {
                error: e_9_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_9) throw e_9.error;
            }
        }
    };
    CHTMLmtable2.prototype.handleRowLines = function() {
        var e_11, _a, e_12, _b;
        if (this.node.attributes.get('rowlines') === 'none') return;
        var lines = this.getRowAttributes('rowlines');
        var i = 0;
        try {
            for(var _c = __values(this.childNodes.slice(1)), _d = _c.next(); !_d.done; _d = _c.next()){
                var row = _d.value;
                var line = lines[i++];
                if (line === 'none') continue;
                try {
                    for(var _e = (e_12 = void 0, __values(this.adaptor.childNodes(row.chtml))), _f = _e.next(); !_f.done; _f = _e.next()){
                        var cell = _f.value;
                        this.adaptor.setStyle(cell, 'borderTop', '.07em ' + line);
                    }
                } catch (e_12_1) {
                    e_12 = {
                        error: e_12_1
                    };
                } finally{
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    } finally{
                        if (e_12) throw e_12.error;
                    }
                }
            }
        } catch (e_11_1) {
            e_11 = {
                error: e_11_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_11) throw e_11.error;
            }
        }
    };
    CHTMLmtable2.prototype.handleRowHeights = function() {
        if (this.node.attributes.get('equalrows')) this.handleEqualRows();
    };
    CHTMLmtable2.prototype.handleEqualRows = function() {
        var space = this.getRowHalfSpacing();
        var _a = this.getTableData(), H = _a.H, D = _a.D, NH = _a.NH, ND = _a.ND;
        var HD = this.getEqualRowHeight();
        for(var i = 0; i < this.numRows; i++){
            var row = this.childNodes[i];
            this.setRowHeight(row, HD + space[i] + space[i + 1] + this.rLines[i]);
            if (HD !== NH[i] + ND[i]) this.setRowBaseline(row, HD, (HD - H[i] + D[i]) / 2);
        }
    };
    CHTMLmtable2.prototype.setRowHeight = function(row, HD) {
        this.adaptor.setStyle(row.chtml, 'height', this.em(HD));
    };
    CHTMLmtable2.prototype.setRowBaseline = function(row, HD, D) {
        var e_13, _a;
        var ralign = row.node.attributes.get('rowalign');
        try {
            for(var _b = __values(row.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var cell = _c.value;
                if (this.setCellBaseline(cell, ralign, HD, D)) break;
            }
        } catch (e_13_1) {
            e_13 = {
                error: e_13_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_13) throw e_13.error;
            }
        }
    };
    CHTMLmtable2.prototype.setCellBaseline = function(cell, ralign, HD, D) {
        var calign = cell.node.attributes.get('rowalign');
        if (calign === 'baseline' || calign === 'axis') {
            var adaptor = this.adaptor;
            var child = adaptor.lastChild(cell.chtml);
            adaptor.setStyle(child, 'height', this.em(HD));
            adaptor.setStyle(child, 'verticalAlign', this.em(-D));
            var row = cell.parent;
            if ((!row.node.isKind('mlabeledtr') || cell !== row.childNodes[0]) && (ralign === 'baseline' || ralign === 'axis')) return true;
        }
        return false;
    };
    CHTMLmtable2.prototype.handleFrame = function() {
        if (this.frame) this.adaptor.setStyle(this.itable, 'border', '.07em ' + this.node.attributes.get('frame'));
    };
    CHTMLmtable2.prototype.handleWidth = function() {
        var adaptor = this.adaptor;
        var _a = this.getBBox(), w = _a.w, L = _a.L, R = _a.R;
        adaptor.setStyle(this.chtml, 'minWidth', this.em(L + w + R));
        var W = this.node.attributes.get('width');
        if (string_js_1.isPercent(W)) {
            adaptor.setStyle(this.chtml, 'width', '');
            adaptor.setAttribute(this.chtml, 'width', 'full');
        } else if (!this.hasLabels) {
            if (W === 'auto') return;
            W = this.em(this.length2em(W) + 2 * this.fLine);
        }
        var table = adaptor.firstChild(this.chtml);
        adaptor.setStyle(table, 'width', W);
        adaptor.setStyle(table, 'minWidth', this.em(w));
        if (L || R) {
            adaptor.setStyle(this.chtml, 'margin', '');
            if (L === R) adaptor.setStyle(table, 'margin', '0 ' + this.em(R));
            else adaptor.setStyle(table, 'margin', '0 ' + this.em(R) + ' 0 ' + this.em(L));
        }
        adaptor.setAttribute(this.itable, 'width', 'full');
    };
    CHTMLmtable2.prototype.handleAlign = function() {
        var _a = __read(this.getAlignmentRow(), 2), align = _a[0], row = _a[1];
        if (row === null) {
            if (align !== 'axis') this.adaptor.setAttribute(this.chtml, 'align', align);
        } else {
            var y = this.getVerticalPosition(row, align);
            this.adaptor.setAttribute(this.chtml, 'align', 'top');
            this.adaptor.setStyle(this.chtml, 'verticalAlign', this.em(y));
        }
    };
    CHTMLmtable2.prototype.handleJustify = function() {
        var align = this.getAlignShift()[0];
        if (align !== 'center') this.adaptor.setAttribute(this.chtml, 'justify', align);
    };
    CHTMLmtable2.prototype.handleLabels = function() {
        if (!this.hasLabels) return;
        var labels = this.labels;
        var attributes = this.node.attributes;
        var adaptor = this.adaptor;
        var side = attributes.get('side');
        adaptor.setAttribute(this.chtml, 'side', side);
        adaptor.setAttribute(labels, 'align', side);
        adaptor.setStyle(labels, side, '0');
        var _a = __read(this.addLabelPadding(side), 2), align = _a[0], shift = _a[1];
        if (shift) {
            var table = adaptor.firstChild(this.chtml);
            this.setIndent(table, align, shift);
        }
        this.updateRowHeights();
        this.addLabelSpacing();
    };
    CHTMLmtable2.prototype.addLabelPadding = function(side) {
        var _a = __read(this.getPadAlignShift(side), 3), align = _a[1], shift = _a[2];
        var styles = {
        };
        if (side === 'right') {
            var W = this.node.attributes.get('width');
            var _b = this.getBBox(), w = _b.w, L = _b.L, R = _b.R;
            styles.style = {
                width: string_js_1.isPercent(W) ? 'calc(' + W + ' + ' + this.em(L + R) + ')' : this.em(L + w + R)
            };
        }
        this.adaptor.append(this.chtml, this.html('mjx-labels', styles, [
            this.labels
        ]));
        return [
            align,
            shift
        ];
    };
    CHTMLmtable2.prototype.updateRowHeights = function() {
        var _a = this.getTableData(), H = _a.H, D = _a.D, NH = _a.NH, ND = _a.ND;
        var space = this.getRowHalfSpacing();
        for(var i = 0; i < this.numRows; i++){
            var row = this.childNodes[i];
            this.setRowHeight(row, H[i] + D[i] + space[i] + space[i + 1] + this.rLines[i]);
            if (H[i] !== NH[i] || D[i] !== ND[i]) this.setRowBaseline(row, H[i] + D[i], D[i]);
            else if (row.node.isKind('mlabeledtr')) this.setCellBaseline(row.childNodes[0], '', H[i] + D[i], D[i]);
        }
    };
    CHTMLmtable2.prototype.addLabelSpacing = function() {
        var adaptor = this.adaptor;
        var equal = this.node.attributes.get('equalrows');
        var _a = this.getTableData(), H = _a.H, D = _a.D;
        var HD = equal ? this.getEqualRowHeight() : 0;
        var space = this.getRowHalfSpacing();
        var h = this.fLine;
        var current = adaptor.firstChild(this.labels);
        for(var i = 0; i < this.numRows; i++){
            var row = this.childNodes[i];
            if (row.node.isKind('mlabeledtr')) {
                h && adaptor.insert(this.html('mjx-mtr', {
                    style: {
                        height: this.em(h)
                    }
                }), current);
                adaptor.setStyle(current, 'height', this.em((equal ? HD : H[i] + D[i]) + space[i] + space[i + 1]));
                current = adaptor.next(current);
                h = this.rLines[i];
            } else h += space[i] + (equal ? HD : H[i] + D[i]) + space[i + 1] + this.rLines[i];
        }
    };
    CHTMLmtable2.kind = mtable_js_2.MmlMtable.prototype.kind;
    CHTMLmtable2.styles = {
        'mjx-mtable': {
            'vertical-align': '.25em',
            'text-align': 'center',
            'position': 'relative',
            'box-sizing': 'border-box',
            'border-spacing': 0,
            'border-collapse': 'collapse'
        },
        'mjx-mstyle[size="s"] mjx-mtable': {
            'vertical-align': '.354em'
        },
        'mjx-labels': {
            position: 'absolute',
            left: 0,
            top: 0
        },
        'mjx-table': {
            'display': 'inline-block',
            'vertical-align': '-.5ex'
        },
        'mjx-table > mjx-itable': {
            'vertical-align': 'middle',
            'text-align': 'left',
            'box-sizing': 'border-box'
        },
        'mjx-labels > mjx-itable': {
            position: 'absolute',
            top: 0
        },
        'mjx-mtable[justify="left"]': {
            'text-align': 'left'
        },
        'mjx-mtable[justify="right"]': {
            'text-align': 'right'
        },
        'mjx-mtable[justify="left"][side="left"]': {
            'padding-right': '0 ! important'
        },
        'mjx-mtable[justify="left"][side="right"]': {
            'padding-left': '0 ! important'
        },
        'mjx-mtable[justify="right"][side="left"]': {
            'padding-right': '0 ! important'
        },
        'mjx-mtable[justify="right"][side="right"]': {
            'padding-left': '0 ! important'
        },
        'mjx-mtable[align]': {
            'vertical-align': 'baseline'
        },
        'mjx-mtable[align="top"] > mjx-table': {
            'vertical-align': 'top'
        },
        'mjx-mtable[align="bottom"] > mjx-table': {
            'vertical-align': 'bottom'
        },
        'mjx-mtable[side="right"] mjx-labels': {
            'min-width': '100%'
        }
    };
    return CHTMLmtable2;
}(mtable_js_1.CommonMtableMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmtable = CHTMLmtable1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mtable.js":"4X3aA","../../../core/MmlTree/MmlNodes/mtable.js":"5tWmh","../../../util/string.js":"1fFM7"}],"4X3aA":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMtableMixin = void 0;
var BBox_js_1 = require("../../../util/BBox.js");
var string_js_1 = require("../../../util/string.js");
var numeric_js_1 = require("../../../util/numeric.js");
function CommonMtableMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.numCols = 0;
            _this.numRows = 0;
            _this.data = null;
            _this.pwidthCells = [];
            _this.pWidth = 0;
            _this.numCols = numeric_js_1.max(_this.tableRows.map(function(row) {
                return row.numCells;
            }));
            _this.numRows = _this.childNodes.length;
            _this.hasLabels = _this.childNodes.reduce(function(value, row) {
                return value || row.node.isKind('mlabeledtr');
            }, false);
            _this.findContainer();
            _this.isTop = !_this.container || _this.container.node.isKind('math') && !_this.container.parent;
            if (_this.isTop) _this.jax.table = _this;
            _this.getPercentageWidth();
            var attributes = _this.node.attributes;
            _this.frame = attributes.get('frame') !== 'none';
            _this.fLine = _this.frame ? 0.07 : 0;
            _this.fSpace = _this.frame ? _this.convertLengths(_this.getAttributeArray('framespacing')) : [
                0,
                0
            ];
            _this.cSpace = _this.convertLengths(_this.getColumnAttributes('columnspacing'));
            _this.rSpace = _this.convertLengths(_this.getRowAttributes('rowspacing'));
            _this.cLines = _this.getColumnAttributes('columnlines').map(function(x) {
                return x === 'none' ? 0 : 0.07;
            });
            _this.rLines = _this.getRowAttributes('rowlines').map(function(x) {
                return x === 'none' ? 0 : 0.07;
            });
            _this.cWidths = _this.getColumnWidths();
            _this.stretchRows();
            _this.stretchColumns();
            return _this;
        }
        Object.defineProperty(class_1.prototype, "tableRows", {
            get: function() {
                return this.childNodes;
            },
            enumerable: false,
            configurable: true
        });
        class_1.prototype.findContainer = function() {
            var node = this;
            var parent = node.parent;
            while(parent && (parent.node.notParent || parent.node.isKind('mrow'))){
                node = parent;
                parent = parent.parent;
            }
            this.container = parent;
            this.containerI = node.node.childPosition();
        };
        class_1.prototype.getPercentageWidth = function() {
            if (this.hasLabels) this.bbox.pwidth = BBox_js_1.BBox.fullWidth;
            else {
                var width = this.node.attributes.get('width');
                if (string_js_1.isPercent(width)) this.bbox.pwidth = width;
            }
        };
        class_1.prototype.stretchRows = function() {
            var equal = this.node.attributes.get('equalrows');
            var HD = equal ? this.getEqualRowHeight() : 0;
            var _a = equal ? this.getTableData() : {
                H: [
                    0
                ],
                D: [
                    0
                ]
            }, H = _a.H, D = _a.D;
            var rows = this.tableRows;
            for(var i = 0; i < this.numRows; i++){
                var hd = equal ? [
                    (HD + H[i] - D[i]) / 2,
                    (HD - H[i] + D[i]) / 2
                ] : null;
                rows[i].stretchChildren(hd);
            }
        };
        class_1.prototype.stretchColumns = function() {
            for(var i = 0; i < this.numCols; i++){
                var width = typeof this.cWidths[i] === 'number' ? this.cWidths[i] : null;
                this.stretchColumn(i, width);
            }
        };
        class_1.prototype.stretchColumn = function(i, W) {
            var e_1, _a, e_2, _b, e_3, _c;
            var stretchy = [];
            try {
                for(var _d = __values(this.tableRows), _e = _d.next(); !_e.done; _e = _d.next()){
                    var row = _e.value;
                    var cell = row.getChild(i);
                    if (cell) {
                        var child = cell.childNodes[0];
                        if (child.stretch.dir === 0 && child.canStretch(2)) stretchy.push(child);
                    }
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
            var count = stretchy.length;
            var nodeCount = this.childNodes.length;
            if (count && nodeCount > 1) {
                if (W === null) {
                    W = 0;
                    var all = count > 1 && count === nodeCount;
                    try {
                        for(var _f = __values(this.tableRows), _g = _f.next(); !_g.done; _g = _f.next()){
                            var row = _g.value;
                            var cell = row.getChild(i);
                            if (cell) {
                                var child = cell.childNodes[0];
                                var noStretch = child.stretch.dir === 0;
                                if (all || noStretch) {
                                    var w = child.getBBox(noStretch).w;
                                    if (w > W) W = w;
                                }
                            }
                        }
                    } catch (e_2_1) {
                        e_2 = {
                            error: e_2_1
                        };
                    } finally{
                        try {
                            if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
                        } finally{
                            if (e_2) throw e_2.error;
                        }
                    }
                }
                try {
                    for(var stretchy_1 = __values(stretchy), stretchy_1_1 = stretchy_1.next(); !stretchy_1_1.done; stretchy_1_1 = stretchy_1.next()){
                        var child = stretchy_1_1.value;
                        child.coreMO().getStretchedVariant([
                            W
                        ]);
                    }
                } catch (e_3_1) {
                    e_3 = {
                        error: e_3_1
                    };
                } finally{
                    try {
                        if (stretchy_1_1 && !stretchy_1_1.done && (_c = stretchy_1.return)) _c.call(stretchy_1);
                    } finally{
                        if (e_3) throw e_3.error;
                    }
                }
            }
        };
        class_1.prototype.getTableData = function() {
            if (this.data) return this.data;
            var H = new Array(this.numRows).fill(0);
            var D = new Array(this.numRows).fill(0);
            var W = new Array(this.numCols).fill(0);
            var NH = new Array(this.numRows);
            var ND = new Array(this.numRows);
            var LW = [
                0
            ];
            var rows = this.tableRows;
            for(var j = 0; j < rows.length; j++){
                var M = 0;
                var row = rows[j];
                var align = row.node.attributes.get('rowalign');
                for(var i = 0; i < row.numCells; i++){
                    var cell = row.getChild(i);
                    M = this.updateHDW(cell, i, j, align, H, D, W, M);
                    this.recordPWidthCell(cell, i);
                }
                NH[j] = H[j];
                ND[j] = D[j];
                if (row.labeled) M = this.updateHDW(row.childNodes[0], 0, j, align, H, D, LW, M);
                this.extendHD(j, H, D, M);
                this.extendHD(j, NH, ND, M);
            }
            var L = LW[0];
            this.data = {
                H: H,
                D: D,
                W: W,
                NH: NH,
                ND: ND,
                L: L
            };
            return this.data;
        };
        class_1.prototype.updateHDW = function(cell, i, j, align, H, D, W, M) {
            var _a = cell.getBBox(), h = _a.h, d = _a.d, w = _a.w;
            var scale = cell.parent.bbox.rscale;
            if (cell.parent.bbox.rscale !== 1) {
                h *= scale;
                d *= scale;
                w *= scale;
            }
            if (this.node.getProperty('useHeight')) {
                if (h < 0.75) h = 0.75;
                if (d < 0.25) d = 0.25;
            }
            var m = 0;
            align = cell.node.attributes.get('rowalign') || align;
            if (align !== 'baseline' && align !== 'axis') {
                m = h + d;
                h = d = 0;
            }
            if (h > H[j]) H[j] = h;
            if (d > D[j]) D[j] = d;
            if (m > M) M = m;
            if (W && w > W[i]) W[i] = w;
            return M;
        };
        class_1.prototype.extendHD = function(i, H, D, M) {
            var d = (M - (H[i] + D[i])) / 2;
            if (d < 0.00001) return;
            H[i] += d;
            D[i] += d;
        };
        class_1.prototype.recordPWidthCell = function(cell, i) {
            if (cell.childNodes[0] && cell.childNodes[0].getBBox().pwidth) this.pwidthCells.push([
                cell,
                i
            ]);
        };
        class_1.prototype.computeBBox = function(bbox, _recompute) {
            if (_recompute === void 0) _recompute = false;
            var _a = this.getTableData(), H = _a.H, D = _a.D;
            var height, width;
            if (this.node.attributes.get('equalrows')) {
                var HD = this.getEqualRowHeight();
                height = numeric_js_1.sum([].concat(this.rLines, this.rSpace)) + HD * this.numRows;
            } else height = numeric_js_1.sum(H.concat(D, this.rLines, this.rSpace));
            height += 2 * (this.fLine + this.fSpace[1]);
            var CW = this.getComputedWidths();
            width = numeric_js_1.sum(CW.concat(this.cLines, this.cSpace)) + 2 * (this.fLine + this.fSpace[0]);
            var w = this.node.attributes.get('width');
            if (w !== 'auto') width = Math.max(this.length2em(w, 0) + 2 * this.fLine, width);
            var _b = __read(this.getBBoxHD(height), 2), h = _b[0], d = _b[1];
            bbox.h = h;
            bbox.d = d;
            bbox.w = width;
            var _c = __read(this.getBBoxLR(), 2), L = _c[0], R = _c[1];
            bbox.L = L;
            bbox.R = R;
            if (!string_js_1.isPercent(w)) this.setColumnPWidths();
        };
        class_1.prototype.setChildPWidths = function(_recompute, cwidth, _clear) {
            var width = this.node.attributes.get('width');
            if (!string_js_1.isPercent(width)) return false;
            if (!this.hasLabels) {
                this.bbox.pwidth = '';
                this.container.bbox.pwidth = '';
            }
            var _a = this.bbox, w = _a.w, L = _a.L, R = _a.R;
            var W = Math.max(w, this.length2em(width, Math.max(cwidth, L + w + R)));
            var cols = this.node.attributes.get('equalcolumns') ? Array(this.numCols).fill(this.percent(1 / Math.max(1, this.numCols))) : this.getColumnAttributes('columnwidth', 0);
            this.cWidths = this.getColumnWidthsFixed(cols, W);
            var CW = this.getComputedWidths();
            this.pWidth = numeric_js_1.sum(CW.concat(this.cLines, this.cSpace)) + 2 * (this.fLine + this.fSpace[0]);
            if (this.isTop) this.bbox.w = this.pWidth;
            this.setColumnPWidths();
            if (this.pWidth !== w) this.parent.invalidateBBox();
            return this.pWidth !== w;
        };
        class_1.prototype.setColumnPWidths = function() {
            var e_4, _a;
            var W = this.cWidths;
            try {
                for(var _b = __values(this.pwidthCells), _c = _b.next(); !_c.done; _c = _b.next()){
                    var _d = __read(_c.value, 2), cell = _d[0], i = _d[1];
                    if (cell.setChildPWidths(false, W[i])) {
                        cell.invalidateBBox();
                        cell.getBBox();
                    }
                }
            } catch (e_4_1) {
                e_4 = {
                    error: e_4_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_4) throw e_4.error;
                }
            }
        };
        class_1.prototype.getBBoxHD = function(height) {
            var _a = __read(this.getAlignmentRow(), 2), align = _a[0], row = _a[1];
            if (row === null) {
                var a = this.font.params.axis_height;
                var h2 = height / 2;
                var HD = {
                    top: [
                        0,
                        height
                    ],
                    center: [
                        h2,
                        h2
                    ],
                    bottom: [
                        height,
                        0
                    ],
                    baseline: [
                        h2,
                        h2
                    ],
                    axis: [
                        h2 + a,
                        h2 - a
                    ]
                };
                return HD[align] || [
                    h2,
                    h2
                ];
            } else {
                var y = this.getVerticalPosition(row, align);
                return [
                    y,
                    height - y
                ];
            }
        };
        class_1.prototype.getBBoxLR = function() {
            if (this.hasLabels) {
                var side = this.node.attributes.get('side');
                var _a = __read(this.getPadAlignShift(side), 2), pad = _a[0], align = _a[1];
                return align === 'center' ? [
                    pad,
                    pad
                ] : side === 'left' ? [
                    pad,
                    0
                ] : [
                    0,
                    pad
                ];
            }
            return [
                0,
                0
            ];
        };
        class_1.prototype.getPadAlignShift = function(side) {
            var L = this.getTableData().L;
            var sep = this.length2em(this.node.attributes.get('minlabelspacing'));
            var pad = L + sep;
            var _a = __read(this.styles == null ? [
                '',
                ''
            ] : [
                this.styles.get('padding-left'),
                this.styles.get('padding-right')
            ], 2), lpad = _a[0], rpad = _a[1];
            if (lpad || rpad) pad = Math.max(pad, this.length2em(lpad || '0'), this.length2em(rpad || '0'));
            var _b = __read(this.getAlignShift(), 2), align = _b[0], shift = _b[1];
            if (align === side) shift = side === 'left' ? Math.max(pad, shift) - pad : Math.min(-pad, shift) + pad;
            return [
                pad,
                align,
                shift
            ];
        };
        class_1.prototype.getAlignShift = function() {
            return this.isTop ? _super.prototype.getAlignShift.call(this) : [
                this.container.getChildAlign(this.containerI),
                0
            ];
        };
        class_1.prototype.getWidth = function() {
            return this.pWidth || this.getBBox().w;
        };
        class_1.prototype.getEqualRowHeight = function() {
            var _a = this.getTableData(), H = _a.H, D = _a.D;
            var HD = Array.from(H.keys()).map(function(i) {
                return H[i] + D[i];
            });
            return Math.max.apply(Math, HD);
        };
        class_1.prototype.getComputedWidths = function() {
            var _this = this;
            var W = this.getTableData().W;
            var CW = Array.from(W.keys()).map(function(i) {
                return typeof _this.cWidths[i] === 'number' ? _this.cWidths[i] : W[i];
            });
            if (this.node.attributes.get('equalcolumns')) CW = Array(CW.length).fill(numeric_js_1.max(CW));
            return CW;
        };
        class_1.prototype.getColumnWidths = function() {
            var width = this.node.attributes.get('width');
            if (this.node.attributes.get('equalcolumns')) return this.getEqualColumns(width);
            var swidths = this.getColumnAttributes('columnwidth', 0);
            if (width === 'auto') return this.getColumnWidthsAuto(swidths);
            if (string_js_1.isPercent(width)) return this.getColumnWidthsPercent(swidths);
            return this.getColumnWidthsFixed(swidths, this.length2em(width));
        };
        class_1.prototype.getEqualColumns = function(width) {
            var n = Math.max(1, this.numCols);
            var cwidth;
            if (width === 'auto') {
                var W = this.getTableData().W;
                cwidth = numeric_js_1.max(W);
            } else if (string_js_1.isPercent(width)) cwidth = this.percent(1 / n);
            else {
                var w = numeric_js_1.sum([].concat(this.cLines, this.cSpace)) + 2 * this.fSpace[0];
                cwidth = Math.max(0, this.length2em(width) - w) / n;
            }
            return Array(this.numCols).fill(cwidth);
        };
        class_1.prototype.getColumnWidthsAuto = function(swidths) {
            var _this = this;
            return swidths.map(function(x) {
                if (x === 'auto' || x === 'fit') return null;
                if (string_js_1.isPercent(x)) return x;
                return _this.length2em(x);
            });
        };
        class_1.prototype.getColumnWidthsPercent = function(swidths) {
            var _this = this;
            var hasFit = swidths.indexOf('fit') >= 0;
            var W = (hasFit ? this.getTableData() : {
                W: null
            }).W;
            return Array.from(swidths.keys()).map(function(i) {
                var x = swidths[i];
                if (x === 'fit') return null;
                if (x === 'auto') return hasFit ? W[i] : null;
                if (string_js_1.isPercent(x)) return x;
                return _this.length2em(x);
            });
        };
        class_1.prototype.getColumnWidthsFixed = function(swidths, width) {
            var _this = this;
            var indices = Array.from(swidths.keys());
            var fit = indices.filter(function(i) {
                return swidths[i] === 'fit';
            });
            var auto = indices.filter(function(i) {
                return swidths[i] === 'auto';
            });
            var n = fit.length || auto.length;
            var W = (n ? this.getTableData() : {
                W: null
            }).W;
            var cwidth = width - numeric_js_1.sum([].concat(this.cLines, this.cSpace)) - 2 * this.fSpace[0];
            var dw = cwidth;
            indices.forEach(function(i) {
                var x = swidths[i];
                dw -= x === 'fit' || x === 'auto' ? W[i] : _this.length2em(x, width);
            });
            var fw = n && dw > 0 ? dw / n : 0;
            return indices.map(function(i) {
                var x = swidths[i];
                if (x === 'fit') return W[i] + fw;
                if (x === 'auto') return W[i] + (fit.length === 0 ? fw : 0);
                return _this.length2em(x, cwidth);
            });
        };
        class_1.prototype.getVerticalPosition = function(i, align) {
            var equal = this.node.attributes.get('equalrows');
            var _a = this.getTableData(), H = _a.H, D = _a.D;
            var HD = equal ? this.getEqualRowHeight() : 0;
            var space = this.getRowHalfSpacing();
            var y = this.fLine;
            for(var j = 0; j < i; j++)y += space[j] + (equal ? HD : H[j] + D[j]) + space[j + 1] + this.rLines[j];
            var _b = __read(equal ? [
                (HD + H[i] - D[i]) / 2,
                (HD - H[i] + D[i]) / 2
            ] : [
                H[i],
                D[i]
            ], 2), h = _b[0], d = _b[1];
            var offset = {
                top: 0,
                center: space[i] + (h + d) / 2,
                bottom: space[i] + h + d + space[i + 1],
                baseline: space[i] + h,
                axis: space[i] + h - 0.25
            };
            y += offset[align] || 0;
            return y;
        };
        class_1.prototype.getEmHalfSpacing = function(fspace, space, scale) {
            if (scale === void 0) scale = 1;
            var fspaceEm = this.em(fspace * scale);
            var spaceEm = this.addEm(space, 2 / scale);
            spaceEm.unshift(fspaceEm);
            spaceEm.push(fspaceEm);
            return spaceEm;
        };
        class_1.prototype.getRowHalfSpacing = function() {
            var space = this.rSpace.map(function(x) {
                return x / 2;
            });
            space.unshift(this.fSpace[1]);
            space.push(this.fSpace[1]);
            return space;
        };
        class_1.prototype.getColumnHalfSpacing = function() {
            var space = this.cSpace.map(function(x) {
                return x / 2;
            });
            space.unshift(this.fSpace[0]);
            space.push(this.fSpace[0]);
            return space;
        };
        class_1.prototype.getAlignmentRow = function() {
            var _a = __read(string_js_1.split(this.node.attributes.get('align')), 2), align = _a[0], row = _a[1];
            if (row == null) return [
                align,
                null
            ];
            var i = parseInt(row);
            if (i < 0) i += this.numRows + 1;
            return [
                align,
                i < 1 || i > this.numRows ? null : i - 1
            ];
        };
        class_1.prototype.getColumnAttributes = function(name, i) {
            if (i === void 0) i = 1;
            var n = this.numCols - i;
            var columns = this.getAttributeArray(name);
            if (columns.length === 0) return null;
            while(columns.length < n)columns.push(columns[columns.length - 1]);
            if (columns.length > n) columns.splice(n);
            return columns;
        };
        class_1.prototype.getRowAttributes = function(name, i) {
            if (i === void 0) i = 1;
            var n = this.numRows - i;
            var rows = this.getAttributeArray(name);
            if (rows.length === 0) return null;
            while(rows.length < n)rows.push(rows[rows.length - 1]);
            if (rows.length > n) rows.splice(n);
            return rows;
        };
        class_1.prototype.getAttributeArray = function(name) {
            var value = this.node.attributes.get(name);
            if (!value) return [
                this.node.attributes.getDefault(name)
            ];
            return string_js_1.split(value);
        };
        class_1.prototype.addEm = function(list, n) {
            var _this = this;
            if (n === void 0) n = 1;
            if (!list) return null;
            return list.map(function(x) {
                return _this.em(x / n);
            });
        };
        class_1.prototype.convertLengths = function(list) {
            var _this = this;
            if (!list) return null;
            return list.map(function(x) {
                return _this.length2em(x);
            });
        };
        return class_1;
    })(Base);
}
exports.CommonMtableMixin = CommonMtableMixin;

},{"../../../util/BBox.js":"2c5uM","../../../util/string.js":"1fFM7","../../../util/numeric.js":"4rnFa"}],"4rnFa":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.max = exports.sum = void 0;
function sum(A) {
    return A.reduce(function(a, b) {
        return a + b;
    }, 0);
}
exports.sum = sum;
function max(A) {
    return A.reduce(function(a, b) {
        return Math.max(a, b);
    }, 0);
}
exports.max = max;

},{}],"5tWmh":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMtable = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var string_js_1 = require("../../../util/string.js");
var MmlMtable1 = function(_super) {
    __extends(MmlMtable2, _super);
    function MmlMtable2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.properties = {
            useHeight: true
        };
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMtable2.prototype, "kind", {
        get: function() {
            return 'mtable';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMtable2.prototype, "linebreakContainer", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMtable2.prototype.setInheritedAttributes = function(attributes, display, level, prime) {
        var e_1, _a;
        try {
            for(var indentAttributes_1 = __values(MmlNode_js_1.indentAttributes), indentAttributes_1_1 = indentAttributes_1.next(); !indentAttributes_1_1.done; indentAttributes_1_1 = indentAttributes_1.next()){
                var name_1 = indentAttributes_1_1.value;
                if (attributes[name_1]) this.attributes.setInherited(name_1, attributes[name_1][1]);
                if (this.attributes.getExplicit(name_1) !== undefined) delete this.attributes.getAllAttributes()[name_1];
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (indentAttributes_1_1 && !indentAttributes_1_1.done && (_a = indentAttributes_1.return)) _a.call(indentAttributes_1);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        _super.prototype.setInheritedAttributes.call(this, attributes, display, level, prime);
    };
    MmlMtable2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        var e_2, _a, e_3, _b;
        try {
            for(var _c = __values(this.childNodes), _d = _c.next(); !_d.done; _d = _c.next()){
                var child = _d.value;
                if (!child.isKind('mtr')) this.replaceChild(this.factory.create('mtr'), child).appendChild(child);
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
        level = this.getProperty('scriptlevel') || level;
        display = !!(this.attributes.getExplicit('displaystyle') || this.attributes.getDefault('displaystyle'));
        attributes = this.addInheritedAttributes(attributes, {
            columnalign: this.attributes.get('columnalign'),
            rowalign: 'center'
        });
        var ralign = string_js_1.split(this.attributes.get('rowalign'));
        try {
            for(var _e = __values(this.childNodes), _f = _e.next(); !_f.done; _f = _e.next()){
                var child = _f.value;
                attributes.rowalign[1] = ralign.shift() || attributes.rowalign[1];
                child.setInheritedAttributes(attributes, display, level, prime);
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
    };
    MmlMtable2.prototype.verifyChildren = function(options) {
        var e_4, _a;
        if (!options['fixMtables']) try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (!child.isKind('mtr')) this.mError('Children of ' + this.kind + ' must be mtr or mlabeledtr', options);
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
        _super.prototype.verifyChildren.call(this, options);
    };
    MmlMtable2.prototype.setTeXclass = function(prev) {
        var e_5, _a;
        this.getPrevClass(prev);
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                child.setTeXclass(null);
            }
        } catch (e_5_1) {
            e_5 = {
                error: e_5_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_5) throw e_5.error;
            }
        }
        return this;
    };
    MmlMtable2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults), {
        align: 'axis',
        rowalign: 'baseline',
        columnalign: 'center',
        groupalign: '{left}',
        alignmentscope: true,
        columnwidth: 'auto',
        width: 'auto',
        rowspacing: '1ex',
        columnspacing: '.8em',
        rowlines: 'none',
        columnlines: 'none',
        frame: 'none',
        framespacing: '0.4em 0.5ex',
        equalrows: false,
        equalcolumns: false,
        displaystyle: false,
        side: 'right',
        minlabelspacing: '0.8em'
    });
    return MmlMtable2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMtable = MmlMtable1;

},{"../MmlNode.js":"5Ogy3","../../../util/string.js":"1fFM7"}],"nCNe7":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmlabeledtr = exports.CHTMLmtr = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mtr_js_1 = require("../../common/Wrappers/mtr.js");
var mtr_js_2 = require("../../common/Wrappers/mtr.js");
var mtr_js_3 = require("../../../core/MmlTree/MmlNodes/mtr.js");
var CHTMLmtr1 = function(_super) {
    __extends(CHTMLmtr2, _super);
    function CHTMLmtr2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmtr2.prototype.toCHTML = function(parent) {
        _super.prototype.toCHTML.call(this, parent);
        var align = this.node.attributes.get('rowalign');
        if (align !== 'baseline') this.adaptor.setAttribute(this.chtml, 'rowalign', align);
    };
    CHTMLmtr2.kind = mtr_js_3.MmlMtr.prototype.kind;
    CHTMLmtr2.styles = {
        'mjx-mtr': {
            display: 'table-row'
        },
        'mjx-mtr[rowalign="top"] > mjx-mtd': {
            'vertical-align': 'top'
        },
        'mjx-mtr[rowalign="center"] > mjx-mtd': {
            'vertical-align': 'middle'
        },
        'mjx-mtr[rowalign="bottom"] > mjx-mtd': {
            'vertical-align': 'bottom'
        },
        'mjx-mtr[rowalign="baseline"] > mjx-mtd': {
            'vertical-align': 'baseline'
        },
        'mjx-mtr[rowalign="axis"] > mjx-mtd': {
            'vertical-align': '.25em'
        }
    };
    return CHTMLmtr2;
}(mtr_js_1.CommonMtrMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmtr = CHTMLmtr1;
var CHTMLmlabeledtr1 = function(_super) {
    __extends(CHTMLmlabeledtr2, _super);
    function CHTMLmlabeledtr2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmlabeledtr2.prototype.toCHTML = function(parent) {
        _super.prototype.toCHTML.call(this, parent);
        var child = this.adaptor.firstChild(this.chtml);
        if (child) {
            this.adaptor.remove(child);
            var align = this.node.attributes.get('rowalign');
            var attr = align !== 'baseline' && align !== 'axis' ? {
                rowalign: align
            } : {
            };
            var row = this.html('mjx-mtr', attr, [
                child
            ]);
            CHTMLmtr1.used = true;
            this.adaptor.append(this.parent.labels, row);
        }
    };
    CHTMLmlabeledtr2.kind = mtr_js_3.MmlMlabeledtr.prototype.kind;
    CHTMLmlabeledtr2.styles = {
        'mjx-mlabeledtr': {
            display: 'table-row'
        },
        'mjx-mlabeledtr[rowalign="top"] > mjx-mtd': {
            'vertical-align': 'top'
        },
        'mjx-mlabeledtr[rowalign="center"] > mjx-mtd': {
            'vertical-align': 'middle'
        },
        'mjx-mlabeledtr[rowalign="bottom"] > mjx-mtd': {
            'vertical-align': 'bottom'
        },
        'mjx-mlabeledtr[rowalign="baseline"] > mjx-mtd': {
            'vertical-align': 'baseline'
        },
        'mjx-mlabeledtr[rowalign="axis"] > mjx-mtd': {
            'vertical-align': '.25em'
        }
    };
    return CHTMLmlabeledtr2;
}(mtr_js_2.CommonMlabeledtrMixin(CHTMLmtr1));
exports.CHTMLmlabeledtr = CHTMLmlabeledtr1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mtr.js":"70x0c","../../../core/MmlTree/MmlNodes/mtr.js":"2SuAk"}],"70x0c":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMlabeledtrMixin = exports.CommonMtrMixin = void 0;
function CommonMtrMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        Object.defineProperty(class_1.prototype, "fixesPWidth", {
            get: function() {
                return false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_1.prototype, "numCells", {
            get: function() {
                return this.childNodes.length;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_1.prototype, "labeled", {
            get: function() {
                return false;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_1.prototype, "tableCells", {
            get: function() {
                return this.childNodes;
            },
            enumerable: false,
            configurable: true
        });
        class_1.prototype.getChild = function(i) {
            return this.childNodes[i];
        };
        class_1.prototype.getChildBBoxes = function() {
            return this.childNodes.map(function(cell) {
                return cell.getBBox();
            });
        };
        class_1.prototype.stretchChildren = function(HD) {
            var e_1, _a, e_2, _b, e_3, _c;
            if (HD === void 0) HD = null;
            var stretchy = [];
            var children = this.labeled ? this.childNodes.slice(1) : this.childNodes;
            try {
                for(var children_1 = __values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()){
                    var mtd = children_1_1.value;
                    var child = mtd.childNodes[0];
                    if (child.canStretch(1)) stretchy.push(child);
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
            var count = stretchy.length;
            var nodeCount = this.childNodes.length;
            if (count && nodeCount > 1) {
                if (HD === null) {
                    var H = 0, D = 0;
                    var all = count > 1 && count === nodeCount;
                    try {
                        for(var children_2 = __values(children), children_2_1 = children_2.next(); !children_2_1.done; children_2_1 = children_2.next()){
                            var mtd = children_2_1.value;
                            var child = mtd.childNodes[0];
                            var noStretch = child.stretch.dir === 0;
                            if (all || noStretch) {
                                var _d = child.getBBox(noStretch), h = _d.h, d = _d.d;
                                if (h > H) H = h;
                                if (d > D) D = d;
                            }
                        }
                    } catch (e_2_1) {
                        e_2 = {
                            error: e_2_1
                        };
                    } finally{
                        try {
                            if (children_2_1 && !children_2_1.done && (_b = children_2.return)) _b.call(children_2);
                        } finally{
                            if (e_2) throw e_2.error;
                        }
                    }
                    HD = [
                        H,
                        D
                    ];
                }
                try {
                    for(var stretchy_1 = __values(stretchy), stretchy_1_1 = stretchy_1.next(); !stretchy_1_1.done; stretchy_1_1 = stretchy_1.next()){
                        var child = stretchy_1_1.value;
                        child.coreMO().getStretchedVariant(HD);
                    }
                } catch (e_3_1) {
                    e_3 = {
                        error: e_3_1
                    };
                } finally{
                    try {
                        if (stretchy_1_1 && !stretchy_1_1.done && (_c = stretchy_1.return)) _c.call(stretchy_1);
                    } finally{
                        if (e_3) throw e_3.error;
                    }
                }
            }
        };
        return class_1;
    })(Base);
}
exports.CommonMtrMixin = CommonMtrMixin;
function CommonMlabeledtrMixin(Base) {
    return (function(_super) {
        __extends(class_2, _super);
        function class_2() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        Object.defineProperty(class_2.prototype, "numCells", {
            get: function() {
                return Math.max(0, this.childNodes.length - 1);
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_2.prototype, "labeled", {
            get: function() {
                return true;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(class_2.prototype, "tableCells", {
            get: function() {
                return this.childNodes.slice(1);
            },
            enumerable: false,
            configurable: true
        });
        class_2.prototype.getChild = function(i) {
            return this.childNodes[i + 1];
        };
        class_2.prototype.getChildBBoxes = function() {
            return this.childNodes.slice(1).map(function(cell) {
                return cell.getBBox();
            });
        };
        return class_2;
    })(Base);
}
exports.CommonMlabeledtrMixin = CommonMlabeledtrMixin;

},{}],"2SuAk":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMlabeledtr = exports.MmlMtr = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var Attributes_js_1 = require("../Attributes.js");
var string_js_1 = require("../../../util/string.js");
var MmlMtr1 = function(_super) {
    __extends(MmlMtr2, _super);
    function MmlMtr2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMtr2.prototype, "kind", {
        get: function() {
            return 'mtr';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMtr2.prototype, "linebreakContainer", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMtr2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        var e_1, _a, e_2, _b;
        try {
            for(var _c = __values(this.childNodes), _d = _c.next(); !_d.done; _d = _c.next()){
                var child = _d.value;
                if (!child.isKind('mtd')) this.replaceChild(this.factory.create('mtd'), child).appendChild(child);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        var calign = string_js_1.split(this.attributes.get('columnalign'));
        if (this.arity === 1) calign.unshift(this.parent.attributes.get('side'));
        attributes = this.addInheritedAttributes(attributes, {
            rowalign: this.attributes.get('rowalign'),
            columnalign: 'center'
        });
        try {
            for(var _e = __values(this.childNodes), _f = _e.next(); !_f.done; _f = _e.next()){
                var child = _f.value;
                attributes.columnalign[1] = calign.shift() || attributes.columnalign[1];
                child.setInheritedAttributes(attributes, display, level, prime);
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    };
    MmlMtr2.prototype.verifyChildren = function(options) {
        var e_3, _a;
        if (this.parent && !this.parent.isKind('mtable')) {
            this.mError(this.kind + ' can only be a child of an mtable', options, true);
            return;
        }
        if (!options['fixMtables']) try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                if (!child.isKind('mtd')) {
                    var mtr = this.replaceChild(this.factory.create('mtr'), child);
                    mtr.mError('Children of ' + this.kind + ' must be mtd', options, true);
                }
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        _super.prototype.verifyChildren.call(this, options);
    };
    MmlMtr2.prototype.setTeXclass = function(prev) {
        var e_4, _a;
        this.getPrevClass(prev);
        try {
            for(var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()){
                var child = _c.value;
                child.setTeXclass(null);
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
        return this;
    };
    MmlMtr2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults), {
        rowalign: Attributes_js_1.INHERIT,
        columnalign: Attributes_js_1.INHERIT,
        groupalign: Attributes_js_1.INHERIT
    });
    return MmlMtr2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMtr = MmlMtr1;
var MmlMlabeledtr1 = function(_super) {
    __extends(MmlMlabeledtr2, _super);
    function MmlMlabeledtr2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMlabeledtr2.prototype, "kind", {
        get: function() {
            return 'mlabeledtr';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMlabeledtr2.prototype, "arity", {
        get: function() {
            return 1;
        },
        enumerable: false,
        configurable: true
    });
    return MmlMlabeledtr2;
}(MmlMtr1);
exports.MmlMlabeledtr = MmlMlabeledtr1;

},{"../MmlNode.js":"5Ogy3","../Attributes.js":"5plfh","../../../util/string.js":"1fFM7"}],"3TI6Z":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmtd = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mtd_js_1 = require("../../common/Wrappers/mtd.js");
var mtd_js_2 = require("../../../core/MmlTree/MmlNodes/mtd.js");
var CHTMLmtd1 = function(_super) {
    __extends(CHTMLmtd2, _super);
    function CHTMLmtd2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmtd2.prototype.toCHTML = function(parent) {
        _super.prototype.toCHTML.call(this, parent);
        var ralign = this.node.attributes.get('rowalign');
        var calign = this.node.attributes.get('columnalign');
        var palign = this.parent.node.attributes.get('rowalign');
        if (ralign !== palign) this.adaptor.setAttribute(this.chtml, 'rowalign', ralign);
        if (calign !== 'center' && (this.parent.kind !== 'mlabeledtr' || this !== this.parent.childNodes[0] || calign !== this.parent.parent.node.attributes.get('side'))) this.adaptor.setStyle(this.chtml, 'textAlign', calign);
        if (this.parent.parent.node.getProperty('useHeight')) this.adaptor.append(this.chtml, this.html('mjx-tstrut'));
    };
    CHTMLmtd2.kind = mtd_js_2.MmlMtd.prototype.kind;
    CHTMLmtd2.styles = {
        'mjx-mtd': {
            display: 'table-cell',
            'text-align': 'center',
            'padding': '.215em .4em'
        },
        'mjx-mtd:first-child': {
            'padding-left': 0
        },
        'mjx-mtd:last-child': {
            'padding-right': 0
        },
        'mjx-mtable > * > mjx-itable > *:first-child > mjx-mtd': {
            'padding-top': 0
        },
        'mjx-mtable > * > mjx-itable > *:last-child > mjx-mtd': {
            'padding-bottom': 0
        },
        'mjx-tstrut': {
            display: 'inline-block',
            height: '1em',
            'vertical-align': '-.25em'
        },
        'mjx-labels[align="left"] > mjx-mtr > mjx-mtd': {
            'text-align': 'left'
        },
        'mjx-labels[align="right"] > mjx-mtr > mjx-mtd': {
            'text-align': 'right'
        },
        'mjx-mtr mjx-mtd[rowalign="top"], mjx-mlabeledtr mjx-mtd[rowalign="top"]': {
            'vertical-align': 'top'
        },
        'mjx-mtr mjx-mtd[rowalign="center"], mjx-mlabeledtr mjx-mtd[rowalign="center"]': {
            'vertical-align': 'middle'
        },
        'mjx-mtr mjx-mtd[rowalign="bottom"], mjx-mlabeledtr mjx-mtd[rowalign="bottom"]': {
            'vertical-align': 'bottom'
        },
        'mjx-mtr mjx-mtd[rowalign="baseline"], mjx-mlabeledtr mjx-mtd[rowalign="baseline"]': {
            'vertical-align': 'baseline'
        },
        'mjx-mtr mjx-mtd[rowalign="axis"], mjx-mlabeledtr mjx-mtd[rowalign="axis"]': {
            'vertical-align': '.25em'
        }
    };
    return CHTMLmtd2;
}(mtd_js_1.CommonMtdMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmtd = CHTMLmtd1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mtd.js":"UN9Lj","../../../core/MmlTree/MmlNodes/mtd.js":"3A7Nu"}],"UN9Lj":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMtdMixin = void 0;
function CommonMtdMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        Object.defineProperty(class_1.prototype, "fixesPWidth", {
            get: function() {
                return false;
            },
            enumerable: false,
            configurable: true
        });
        class_1.prototype.invalidateBBox = function() {
            this.bboxComputed = false;
        };
        class_1.prototype.getWrapWidth = function(_j) {
            var table = this.parent.parent;
            var row = this.parent;
            var i = this.node.childPosition() - (row.labeled ? 1 : 0);
            return typeof table.cWidths[i] === 'number' ? table.cWidths[i] : table.getTableData().W[i];
        };
        class_1.prototype.getChildAlign = function(_i) {
            return this.node.attributes.get('columnalign');
        };
        return class_1;
    })(Base);
}
exports.CommonMtdMixin = CommonMtdMixin;

},{}],"3A7Nu":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMtd = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var Attributes_js_1 = require("../Attributes.js");
var MmlMtd1 = function(_super) {
    __extends(MmlMtd2, _super);
    function MmlMtd2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMtd2.prototype, "kind", {
        get: function() {
            return 'mtd';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMtd2.prototype, "arity", {
        get: function() {
            return -1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMtd2.prototype, "linebreakContainer", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMtd2.prototype.verifyChildren = function(options) {
        if (this.parent && !this.parent.isKind('mtr')) {
            this.mError(this.kind + ' can only be a child of an mtr or mlabeledtr', options, true);
            return;
        }
        _super.prototype.verifyChildren.call(this, options);
    };
    MmlMtd2.prototype.setTeXclass = function(prev) {
        this.getPrevClass(prev);
        this.childNodes[0].setTeXclass(null);
        return this;
    };
    MmlMtd2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlBaseNode.defaults), {
        rowspan: 1,
        columnspan: 1,
        rowalign: Attributes_js_1.INHERIT,
        columnalign: Attributes_js_1.INHERIT,
        groupalign: Attributes_js_1.INHERIT
    });
    return MmlMtd2;
}(MmlNode_js_1.AbstractMmlBaseNode);
exports.MmlMtd = MmlMtd1;

},{"../MmlNode.js":"5Ogy3","../Attributes.js":"5plfh"}],"7077A":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmaction = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var maction_js_1 = require("../../common/Wrappers/maction.js");
var maction_js_2 = require("../../common/Wrappers/maction.js");
var maction_js_3 = require("../../../core/MmlTree/MmlNodes/maction.js");
var CHTMLmaction1 = function(_super) {
    __extends(CHTMLmaction2, _super);
    function CHTMLmaction2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmaction2.prototype.toCHTML = function(parent) {
        var chtml = this.standardCHTMLnode(parent);
        var child = this.selected;
        child.toCHTML(chtml);
        this.action(this, this.data);
    };
    CHTMLmaction2.prototype.setEventHandler = function(type, handler) {
        this.chtml.addEventListener(type, handler);
    };
    CHTMLmaction2.kind = maction_js_3.MmlMaction.prototype.kind;
    CHTMLmaction2.styles = {
        'mjx-maction': {
            position: 'relative'
        },
        'mjx-maction > mjx-tool': {
            display: 'none',
            position: 'absolute',
            bottom: 0,
            right: 0,
            width: 0,
            height: 0,
            'z-index': 500
        },
        'mjx-tool > mjx-tip': {
            display: 'inline-block',
            padding: '.2em',
            border: '1px solid #888',
            'font-size': '70%',
            'background-color': '#F8F8F8',
            color: 'black',
            'box-shadow': '2px 2px 5px #AAAAAA'
        },
        'mjx-maction[toggle]': {
            cursor: 'pointer'
        },
        'mjx-status': {
            display: 'block',
            position: 'fixed',
            left: '1em',
            bottom: '1em',
            'min-width': '25%',
            padding: '.2em .4em',
            border: '1px solid #888',
            'font-size': '90%',
            'background-color': '#F8F8F8',
            color: 'black'
        }
    };
    CHTMLmaction2.actions = new Map([
        [
            'toggle',
            [
                function(node, _data) {
                    node.adaptor.setAttribute(node.chtml, 'toggle', node.node.attributes.get('selection'));
                    var math = node.factory.jax.math;
                    var document = node.factory.jax.document;
                    var mml = node.node;
                    node.setEventHandler('click', function(event) {
                        if (!math.end.node) {
                            math.start.node = math.end.node = math.typesetRoot;
                            math.start.n = math.end.n = 0;
                        }
                        mml.nextToggleSelection();
                        math.rerender(document);
                        event.stopPropagation();
                    });
                },
                {
                }
            ]
        ],
        [
            'tooltip',
            [
                function(node, data) {
                    var tip = node.childNodes[1];
                    if (!tip) return;
                    if (tip.node.isKind('mtext')) {
                        var text = tip.node.getText();
                        node.adaptor.setAttribute(node.chtml, 'title', text);
                    } else {
                        var adaptor_1 = node.adaptor;
                        var tool_1 = adaptor_1.append(node.chtml, node.html('mjx-tool', {
                            style: {
                                bottom: node.em(-node.dy),
                                right: node.em(-node.dx)
                            }
                        }, [
                            node.html('mjx-tip')
                        ]));
                        tip.toCHTML(adaptor_1.firstChild(tool_1));
                        node.setEventHandler('mouseover', function(event) {
                            data.stopTimers(node, data);
                            var timeout = setTimeout(function() {
                                return adaptor_1.setStyle(tool_1, 'display', 'block');
                            }, data.postDelay);
                            data.hoverTimer.set(node, timeout);
                            event.stopPropagation();
                        });
                        node.setEventHandler('mouseout', function(event) {
                            data.stopTimers(node, data);
                            var timeout = setTimeout(function() {
                                return adaptor_1.setStyle(tool_1, 'display', '');
                            }, data.clearDelay);
                            data.clearTimer.set(node, timeout);
                            event.stopPropagation();
                        });
                    }
                },
                maction_js_2.TooltipData
            ]
        ],
        [
            'statusline',
            [
                function(node, data) {
                    var tip = node.childNodes[1];
                    if (!tip) return;
                    if (tip.node.isKind('mtext')) {
                        var adaptor_2 = node.adaptor;
                        var text_1 = tip.node.getText();
                        adaptor_2.setAttribute(node.chtml, 'statusline', text_1);
                        node.setEventHandler('mouseover', function(event) {
                            if (data.status === null) {
                                var body = adaptor_2.body(adaptor_2.document);
                                data.status = adaptor_2.append(body, node.html('mjx-status', {
                                }, [
                                    node.text(text_1)
                                ]));
                            }
                            event.stopPropagation();
                        });
                        node.setEventHandler('mouseout', function(event) {
                            if (data.status) {
                                adaptor_2.remove(data.status);
                                data.status = null;
                            }
                            event.stopPropagation();
                        });
                    }
                },
                {
                    status: null
                }
            ]
        ]
    ]);
    return CHTMLmaction2;
}(maction_js_1.CommonMactionMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmaction = CHTMLmaction1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/maction.js":"5nVZV","../../../core/MmlTree/MmlNodes/maction.js":"3xq2D"}],"5nVZV":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMactionMixin = exports.TooltipData = void 0;
var string_js_1 = require("../../../util/string.js");
exports.TooltipData = {
    dx: '.2em',
    dy: '.1em',
    postDelay: 600,
    clearDelay: 100,
    hoverTimer: new Map(),
    clearTimer: new Map(),
    stopTimers: function(node, data) {
        if (data.clearTimer.has(node)) {
            clearTimeout(data.clearTimer.get(node));
            data.clearTimer.delete(node);
        }
        if (data.hoverTimer.has(node)) {
            clearTimeout(data.hoverTimer.get(node));
            data.hoverTimer.delete(node);
        }
    }
};
function CommonMactionMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            var actions = _this.constructor.actions;
            var action = _this.node.attributes.get('actiontype');
            var _a = __read(actions.get(action) || [
                function(_node, _data) {
                },
                {
                }
            ], 2), handler = _a[0], data = _a[1];
            _this.action = handler;
            _this.data = data;
            _this.getParameters();
            return _this;
        }
        Object.defineProperty(class_1.prototype, "selected", {
            get: function() {
                var selection = this.node.attributes.get('selection');
                var i = Math.max(1, Math.min(this.childNodes.length, selection)) - 1;
                return this.childNodes[i] || this.wrap(this.node.selected);
            },
            enumerable: false,
            configurable: true
        });
        class_1.prototype.getParameters = function() {
            var offsets = this.node.attributes.get('data-offsets');
            var _a = __read(string_js_1.split(offsets || ''), 2), dx = _a[0], dy = _a[1];
            this.dx = this.length2em(dx || exports.TooltipData.dx);
            this.dy = this.length2em(dy || exports.TooltipData.dy);
        };
        class_1.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            bbox.updateFrom(this.selected.getBBox());
            this.selected.setChildPWidths(recompute);
        };
        return class_1;
    })(Base);
}
exports.CommonMactionMixin = CommonMactionMixin;

},{"../../../util/string.js":"1fFM7"}],"3xq2D":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMaction = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMaction1 = function(_super) {
    __extends(MmlMaction2, _super);
    function MmlMaction2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMaction2.prototype, "kind", {
        get: function() {
            return 'maction';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMaction2.prototype, "arity", {
        get: function() {
            return 1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMaction2.prototype, "selected", {
        get: function() {
            var selection = this.attributes.get('selection');
            var i = Math.max(1, Math.min(this.childNodes.length, selection)) - 1;
            return this.childNodes[i] || this.factory.create('mrow');
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMaction2.prototype, "isEmbellished", {
        get: function() {
            return this.selected.isEmbellished;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMaction2.prototype, "isSpacelike", {
        get: function() {
            return this.selected.isSpacelike;
        },
        enumerable: false,
        configurable: true
    });
    MmlMaction2.prototype.core = function() {
        return this.selected.core();
    };
    MmlMaction2.prototype.coreMO = function() {
        return this.selected.coreMO();
    };
    MmlMaction2.prototype.verifyAttributes = function(options) {
        _super.prototype.verifyAttributes.call(this, options);
        if (this.attributes.get('actiontype') !== 'toggle' && this.attributes.getExplicit('selection') !== undefined) {
            var attributes = this.attributes.getAllAttributes();
            delete attributes.selection;
        }
    };
    MmlMaction2.prototype.setTeXclass = function(prev) {
        if (this.attributes.get('actiontype') === 'tooltip' && this.childNodes[1]) this.childNodes[1].setTeXclass(null);
        var selected = this.selected;
        prev = selected.setTeXclass(prev);
        this.updateTeXclass(selected);
        return prev;
    };
    MmlMaction2.prototype.nextToggleSelection = function() {
        var selection = Math.max(1, this.attributes.get('selection') + 1);
        if (selection > this.childNodes.length) selection = 1;
        this.attributes.set('selection', selection);
    };
    MmlMaction2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults), {
        actiontype: 'toggle',
        selection: 1
    });
    return MmlMaction2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMaction = MmlMaction1;

},{"../MmlNode.js":"5Ogy3"}],"7zIJu":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLmglyph = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var mglyph_js_1 = require("../../common/Wrappers/mglyph.js");
var mglyph_js_2 = require("../../../core/MmlTree/MmlNodes/mglyph.js");
var CHTMLmglyph1 = function(_super) {
    __extends(CHTMLmglyph2, _super);
    function CHTMLmglyph2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLmglyph2.prototype.toCHTML = function(parent) {
        var chtml = this.standardCHTMLnode(parent);
        var _a = this.node.attributes.getList('src', 'alt'), src = _a.src, alt = _a.alt;
        var styles = {
            width: this.em(this.width),
            height: this.em(this.height)
        };
        if (this.valign) styles.verticalAlign = this.em(this.valign);
        var img = this.html('img', {
            src: src,
            style: styles,
            alt: alt,
            title: alt
        });
        this.adaptor.append(chtml, img);
    };
    CHTMLmglyph2.kind = mglyph_js_2.MmlMglyph.prototype.kind;
    CHTMLmglyph2.styles = {
        'mjx-mglyph > img': {
            display: 'inline-block',
            border: 0,
            padding: 0
        }
    };
    return CHTMLmglyph2;
}(mglyph_js_1.CommonMglyphMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLmglyph = CHTMLmglyph1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/mglyph.js":"URz1g","../../../core/MmlTree/MmlNodes/mglyph.js":"18HIf"}],"URz1g":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonMglyphMixin = void 0;
function CommonMglyphMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
            var _this = _super.apply(this, __spreadArray([], __read(args))) || this;
            _this.getParameters();
            return _this;
        }
        class_1.prototype.getParameters = function() {
            var _a = this.node.attributes.getList('width', 'height', 'valign'), width = _a.width, height = _a.height, valign = _a.valign;
            this.width = width === 'auto' ? 1 : this.length2em(width);
            this.height = height === 'auto' ? 1 : this.length2em(height);
            this.valign = this.length2em(valign || '0');
        };
        class_1.prototype.computeBBox = function(bbox, _recompute) {
            if (_recompute === void 0) _recompute = false;
            bbox.w = this.width;
            bbox.h = this.height + this.valign;
            bbox.d = -this.valign;
        };
        return class_1;
    })(Base);
}
exports.CommonMglyphMixin = CommonMglyphMixin;

},{}],"18HIf":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMglyph = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMglyph1 = function(_super) {
    __extends(MmlMglyph2, _super);
    function MmlMglyph2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMglyph2.prototype, "kind", {
        get: function() {
            return 'mglyph';
        },
        enumerable: false,
        configurable: true
    });
    MmlMglyph2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlTokenNode.defaults), {
        alt: '',
        src: '',
        width: 'auto',
        height: 'auto',
        valign: '0em'
    });
    return MmlMglyph2;
}(MmlNode_js_1.AbstractMmlTokenNode);
exports.MmlMglyph = MmlMglyph1;

},{"../MmlNode.js":"5Ogy3"}],"6TgHg":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLxml = exports.CHTMLannotationXML = exports.CHTMLannotation = exports.CHTMLsemantics = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var semantics_js_1 = require("../../common/Wrappers/semantics.js");
var semantics_js_2 = require("../../../core/MmlTree/MmlNodes/semantics.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var CHTMLsemantics1 = function(_super) {
    __extends(CHTMLsemantics2, _super);
    function CHTMLsemantics2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLsemantics2.prototype.toCHTML = function(parent) {
        var chtml = this.standardCHTMLnode(parent);
        if (this.childNodes.length) this.childNodes[0].toCHTML(chtml);
    };
    CHTMLsemantics2.kind = semantics_js_2.MmlSemantics.prototype.kind;
    return CHTMLsemantics2;
}(semantics_js_1.CommonSemanticsMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLsemantics = CHTMLsemantics1;
var CHTMLannotation1 = function(_super) {
    __extends(CHTMLannotation2, _super);
    function CHTMLannotation2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLannotation2.prototype.toCHTML = function(parent) {
        _super.prototype.toCHTML.call(this, parent);
    };
    CHTMLannotation2.prototype.computeBBox = function() {
        return this.bbox;
    };
    CHTMLannotation2.kind = semantics_js_2.MmlAnnotation.prototype.kind;
    return CHTMLannotation2;
}(Wrapper_js_1.CHTMLWrapper);
exports.CHTMLannotation = CHTMLannotation1;
var CHTMLannotationXML1 = function(_super) {
    __extends(CHTMLannotationXML2, _super);
    function CHTMLannotationXML2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLannotationXML2.kind = semantics_js_2.MmlAnnotationXML.prototype.kind;
    CHTMLannotationXML2.styles = {
        'mjx-annotation-xml': {
            'font-family': 'initial',
            'line-height': 'normal'
        }
    };
    return CHTMLannotationXML2;
}(Wrapper_js_1.CHTMLWrapper);
exports.CHTMLannotationXML = CHTMLannotationXML1;
var CHTMLxml1 = function(_super) {
    __extends(CHTMLxml2, _super);
    function CHTMLxml2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLxml2.prototype.toCHTML = function(parent) {
        this.chtml = this.adaptor.append(parent, this.adaptor.clone(this.node.getXML()));
    };
    CHTMLxml2.prototype.computeBBox = function(bbox, _recompute) {
        if (_recompute === void 0) _recompute = false;
        var _a = this.jax.measureXMLnode(this.node.getXML()), w = _a.w, h = _a.h, d = _a.d;
        bbox.w = w;
        bbox.h = h;
        bbox.d = d;
    };
    CHTMLxml2.prototype.getStyles = function() {
    };
    CHTMLxml2.prototype.getScale = function() {
    };
    CHTMLxml2.prototype.getVariant = function() {
    };
    CHTMLxml2.kind = MmlNode_js_1.XMLNode.prototype.kind;
    CHTMLxml2.autoStyle = false;
    return CHTMLxml2;
}(Wrapper_js_1.CHTMLWrapper);
exports.CHTMLxml = CHTMLxml1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/semantics.js":"73oyF","../../../core/MmlTree/MmlNodes/semantics.js":"6vreT","../../../core/MmlTree/MmlNode.js":"5Ogy3"}],"73oyF":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonSemanticsMixin = void 0;
function CommonSemanticsMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.computeBBox = function(bbox, _recompute) {
            if (_recompute === void 0) _recompute = false;
            if (this.childNodes.length) {
                var _a = this.childNodes[0].getBBox(), w = _a.w, h = _a.h, d = _a.d;
                bbox.w = w;
                bbox.h = h;
                bbox.d = d;
            }
        };
        return class_1;
    })(Base);
}
exports.CommonSemanticsMixin = CommonSemanticsMixin;

},{}],"6vreT":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlAnnotation = exports.MmlAnnotationXML = exports.MmlSemantics = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlSemantics1 = function(_super) {
    __extends(MmlSemantics2, _super);
    function MmlSemantics2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlSemantics2.prototype, "kind", {
        get: function() {
            return 'semantics';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlSemantics2.prototype, "arity", {
        get: function() {
            return 1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlSemantics2.prototype, "notParent", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlSemantics2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlBaseNode.defaults), {
        definitionUrl: null,
        encoding: null
    });
    return MmlSemantics2;
}(MmlNode_js_1.AbstractMmlBaseNode);
exports.MmlSemantics = MmlSemantics1;
var MmlAnnotationXML1 = function(_super) {
    __extends(MmlAnnotationXML2, _super);
    function MmlAnnotationXML2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlAnnotationXML2.prototype, "kind", {
        get: function() {
            return 'annotation-xml';
        },
        enumerable: false,
        configurable: true
    });
    MmlAnnotationXML2.prototype.setChildInheritedAttributes = function() {
    };
    MmlAnnotationXML2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults), {
        definitionUrl: null,
        encoding: null,
        cd: 'mathmlkeys',
        name: '',
        src: null
    });
    return MmlAnnotationXML2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlAnnotationXML = MmlAnnotationXML1;
var MmlAnnotation1 = function(_super) {
    __extends(MmlAnnotation2, _super);
    function MmlAnnotation2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.properties = {
            isChars: true
        };
        return _this;
    }
    Object.defineProperty(MmlAnnotation2.prototype, "kind", {
        get: function() {
            return 'annotation';
        },
        enumerable: false,
        configurable: true
    });
    MmlAnnotation2.defaults = __assign({
    }, MmlAnnotationXML1.defaults);
    return MmlAnnotation2;
}(MmlAnnotationXML1);
exports.MmlAnnotation = MmlAnnotation1;

},{"../MmlNode.js":"5Ogy3"}],"5dLUY":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLTeXAtom = void 0;
var Wrapper_js_1 = require("../Wrapper.js");
var TeXAtom_js_1 = require("../../common/Wrappers/TeXAtom.js");
var TeXAtom_js_2 = require("../../../core/MmlTree/MmlNodes/TeXAtom.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var CHTMLTeXAtom1 = function(_super) {
    __extends(CHTMLTeXAtom2, _super);
    function CHTMLTeXAtom2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLTeXAtom2.prototype.toCHTML = function(parent) {
        _super.prototype.toCHTML.call(this, parent);
        this.adaptor.setAttribute(this.chtml, 'texclass', MmlNode_js_1.TEXCLASSNAMES[this.node.texClass]);
        if (this.node.texClass === MmlNode_js_1.TEXCLASS.VCENTER) {
            var bbox = this.childNodes[0].getBBox();
            var h = bbox.h, d = bbox.d;
            var a = this.font.params.axis_height;
            var dh = (h + d) / 2 + a - h;
            this.adaptor.setStyle(this.chtml, 'verticalAlign', this.em(dh));
        }
    };
    CHTMLTeXAtom2.kind = TeXAtom_js_2.TeXAtom.prototype.kind;
    return CHTMLTeXAtom2;
}(TeXAtom_js_1.CommonTeXAtomMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLTeXAtom = CHTMLTeXAtom1;

},{"../Wrapper.js":"7Bkom","../../common/Wrappers/TeXAtom.js":"7mD9b","../../../core/MmlTree/MmlNodes/TeXAtom.js":"hX4Kz","../../../core/MmlTree/MmlNode.js":"5Ogy3"}],"7mD9b":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonTeXAtomMixin = void 0;
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
function CommonTeXAtomMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.computeBBox = function(bbox, recompute) {
            if (recompute === void 0) recompute = false;
            _super.prototype.computeBBox.call(this, bbox, recompute);
            if (this.childNodes[0] && this.childNodes[0].bbox.ic) bbox.ic = this.childNodes[0].bbox.ic;
            if (this.node.texClass === MmlNode_js_1.TEXCLASS.VCENTER) {
                var h = bbox.h, d = bbox.d;
                var a = this.font.params.axis_height;
                var dh = (h + d) / 2 + a - h;
                bbox.h += dh;
                bbox.d -= dh;
            }
        };
        return class_1;
    })(Base);
}
exports.CommonTeXAtomMixin = CommonTeXAtomMixin;

},{"../../../core/MmlTree/MmlNode.js":"5Ogy3"}],"hX4Kz":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.TeXAtom = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var mo_js_1 = require("./mo.js");
var TeXAtom1 = function(_super) {
    __extends(TeXAtom2, _super);
    function TeXAtom2(factory, attributes, children) {
        var _this = _super.call(this, factory, attributes, children) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        _this.setProperty('texClass', _this.texClass);
        return _this;
    }
    Object.defineProperty(TeXAtom2.prototype, "kind", {
        get: function() {
            return 'TeXAtom';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TeXAtom2.prototype, "arity", {
        get: function() {
            return -1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TeXAtom2.prototype, "notParent", {
        get: function() {
            return this.childNodes[0] && this.childNodes[0].childNodes.length === 1;
        },
        enumerable: false,
        configurable: true
    });
    TeXAtom2.prototype.setTeXclass = function(prev) {
        this.childNodes[0].setTeXclass(null);
        return this.adjustTeXclass(prev);
    };
    TeXAtom2.prototype.adjustTeXclass = function(prev) {
        return prev;
    };
    TeXAtom2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlBaseNode.defaults);
    return TeXAtom2;
}(MmlNode_js_1.AbstractMmlBaseNode);
exports.TeXAtom = TeXAtom1;
TeXAtom1.prototype.adjustTeXclass = mo_js_1.MmlMo.prototype.adjustTeXclass;

},{"../MmlNode.js":"5Ogy3","./mo.js":"6qwvK"}],"2gqde":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CHTMLTextNode = void 0;
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var Wrapper_js_1 = require("../Wrapper.js");
var TextNode_js_1 = require("../../common/Wrappers/TextNode.js");
var CHTMLTextNode1 = function(_super) {
    __extends(CHTMLTextNode2, _super);
    function CHTMLTextNode2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLTextNode2.prototype.toCHTML = function(parent) {
        var e_1, _a;
        this.markUsed();
        var adaptor = this.adaptor;
        var variant = this.parent.variant;
        var text = this.node.getText();
        if (variant === '-explicitFont') {
            var font = this.jax.getFontData(this.parent.styles);
            adaptor.append(parent, this.jax.unknownText(text, variant, font));
        } else {
            var chars = this.remappedText(text, variant);
            try {
                for(var chars_1 = __values(chars), chars_1_1 = chars_1.next(); !chars_1_1.done; chars_1_1 = chars_1.next()){
                    var n = chars_1_1.value;
                    var data = this.getVariantChar(variant, n)[3];
                    var font = data.f ? ' TEX-' + data.f : '';
                    var node = data.unknown ? this.jax.unknownText(String.fromCodePoint(n), variant) : this.html('mjx-c', {
                        class: this.char(n) + font
                    });
                    adaptor.append(parent, node);
                    data.used = true;
                }
            } catch (e_1_1) {
                e_1 = {
                    error: e_1_1
                };
            } finally{
                try {
                    if (chars_1_1 && !chars_1_1.done && (_a = chars_1.return)) _a.call(chars_1);
                } finally{
                    if (e_1) throw e_1.error;
                }
            }
        }
    };
    CHTMLTextNode2.kind = MmlNode_js_1.TextNode.prototype.kind;
    CHTMLTextNode2.autoStyle = false;
    CHTMLTextNode2.styles = {
        'mjx-c': {
            display: 'inline-block'
        },
        'mjx-utext': {
            display: 'inline-block',
            padding: '.75em 0 .2em 0'
        }
    };
    return CHTMLTextNode2;
}(TextNode_js_1.CommonTextNodeMixin(Wrapper_js_1.CHTMLWrapper));
exports.CHTMLTextNode = CHTMLTextNode1;

},{"../../../core/MmlTree/MmlNode.js":"5Ogy3","../Wrapper.js":"7Bkom","../../common/Wrappers/TextNode.js":"1OH5v"}],"1OH5v":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonTextNodeMixin = void 0;
function CommonTextNodeMixin(Base) {
    return (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.computeBBox = function(bbox, _recompute) {
            var e_1, _a;
            if (_recompute === void 0) _recompute = false;
            var variant = this.parent.variant;
            var text = this.node.getText();
            if (variant === '-explicitFont') {
                var font = this.jax.getFontData(this.parent.styles);
                var _b = this.jax.measureText(text, variant, font), w = _b.w, h = _b.h, d = _b.d;
                bbox.h = h;
                bbox.d = d;
                bbox.w = w;
            } else {
                var chars = this.remappedText(text, variant);
                bbox.empty();
                try {
                    for(var chars_1 = __values(chars), chars_1_1 = chars_1.next(); !chars_1_1.done; chars_1_1 = chars_1.next()){
                        var char = chars_1_1.value;
                        var _c = __read(this.getVariantChar(variant, char), 4), h = _c[0], d = _c[1], w = _c[2], data = _c[3];
                        if (data.unknown) {
                            var cbox = this.jax.measureText(String.fromCodePoint(char), variant);
                            w = cbox.w;
                            h = cbox.h;
                            d = cbox.d;
                        }
                        bbox.w += w;
                        if (h > bbox.h) bbox.h = h;
                        if (d > bbox.d) bbox.d = d;
                        bbox.ic = data.ic || 0;
                        bbox.sk = data.sk || 0;
                    }
                } catch (e_1_1) {
                    e_1 = {
                        error: e_1_1
                    };
                } finally{
                    try {
                        if (chars_1_1 && !chars_1_1.done && (_a = chars_1.return)) _a.call(chars_1);
                    } finally{
                        if (e_1) throw e_1.error;
                    }
                }
                if (chars.length > 1) bbox.sk = 0;
                bbox.clean();
            }
        };
        class_1.prototype.remappedText = function(text, variant) {
            var c = this.parent.stretch.c;
            return c ? [
                c
            ] : this.parent.remapChars(this.unicodeChars(text, variant));
        };
        class_1.prototype.getStyles = function() {
        };
        class_1.prototype.getVariant = function() {
        };
        class_1.prototype.getScale = function() {
        };
        class_1.prototype.getSpace = function() {
        };
        return class_1;
    })(Base);
}
exports.CommonTextNodeMixin = CommonTextNodeMixin;

},{}],"3z2PK":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.TeXFont = void 0;
var FontData_js_1 = require("../FontData.js");
var tex_js_1 = require("../../common/fonts/tex.js");
var bold_italic_js_1 = require("./tex/bold-italic.js");
var bold_js_1 = require("./tex/bold.js");
var double_struck_js_1 = require("./tex/double-struck.js");
var fraktur_bold_js_1 = require("./tex/fraktur-bold.js");
var fraktur_js_1 = require("./tex/fraktur.js");
var italic_js_1 = require("./tex/italic.js");
var largeop_js_1 = require("./tex/largeop.js");
var monospace_js_1 = require("./tex/monospace.js");
var normal_js_1 = require("./tex/normal.js");
var sans_serif_bold_italic_js_1 = require("./tex/sans-serif-bold-italic.js");
var sans_serif_bold_js_1 = require("./tex/sans-serif-bold.js");
var sans_serif_italic_js_1 = require("./tex/sans-serif-italic.js");
var sans_serif_js_1 = require("./tex/sans-serif.js");
var script_bold_js_1 = require("./tex/script-bold.js");
var script_js_1 = require("./tex/script.js");
var smallop_js_1 = require("./tex/smallop.js");
var tex_calligraphic_bold_js_1 = require("./tex/tex-calligraphic-bold.js");
var tex_calligraphic_js_1 = require("./tex/tex-calligraphic.js");
var tex_mathit_js_1 = require("./tex/tex-mathit.js");
var tex_oldstyle_bold_js_1 = require("./tex/tex-oldstyle-bold.js");
var tex_oldstyle_js_1 = require("./tex/tex-oldstyle.js");
var tex_size3_js_1 = require("./tex/tex-size3.js");
var tex_size4_js_1 = require("./tex/tex-size4.js");
var tex_variant_js_1 = require("./tex/tex-variant.js");
var delimiters_js_1 = require("../../common/fonts/tex/delimiters.js");
var TeXFont1 = function(_super) {
    __extends(TeXFont2, _super);
    function TeXFont2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TeXFont2.defaultCssFamilyPrefix = 'MJXZERO';
    TeXFont2.defaultVariantClasses = {
        'normal': 'mjx-n',
        'bold': 'mjx-b',
        'italic': 'mjx-i',
        'bold-italic': 'mjx-b mjx-i',
        'double-struck': 'mjx-ds mjx-b',
        'fraktur': 'mjx-fr',
        'bold-fraktur': 'mjx-fr mjx-b',
        'script': 'mjx-sc mjx-i',
        'bold-script': 'mjx-sc mjx-b mjx-i',
        'sans-serif': 'mjx-ss',
        'bold-sans-serif': 'mjx-ss mjx-b',
        'sans-serif-italic': 'mjx-ss mjx-i',
        'sans-serif-bold-italic': 'mjx-ss mjx-b mjx-i',
        'monospace': 'mjx-ty',
        '-smallop': 'mjx-sop',
        '-largeop': 'mjx-lop',
        '-size3': 'mjx-s3',
        '-size4': 'mjx-s4',
        '-tex-calligraphic': 'mjx-cal mjx-i',
        '-tex-bold-calligraphic': 'mjx-cal mjx-b',
        '-tex-mathit': 'mjx-mit mjx-i',
        '-tex-oldstyle': 'mjx-os',
        '-tex-bold-oldstyle': 'mjx-os mjx-b',
        '-tex-variant': 'mjx-var'
    };
    TeXFont2.defaultVariantLetters = {
        'normal': '',
        'bold': 'B',
        'italic': 'MI',
        'bold-italic': 'BI',
        'double-struck': 'A',
        'fraktur': 'FR',
        'bold-fraktur': 'FRB',
        'script': 'SC',
        'bold-script': 'SCB',
        'sans-serif': 'SS',
        'bold-sans-serif': 'SSB',
        'sans-serif-italic': 'SSI',
        'sans-serif-bold-italic': 'SSBI',
        'monospace': 'T',
        '-smallop': 'S1',
        '-largeop': 'S2',
        '-size3': 'S3',
        '-size4': 'S4',
        '-tex-calligraphic': 'C',
        '-tex-bold-calligraphic': 'CB',
        '-tex-mathit': 'MI',
        '-tex-oldstyle': 'C',
        '-tex-bold-oldstyle': 'CB',
        '-tex-variant': 'A'
    };
    TeXFont2.defaultDelimiters = delimiters_js_1.delimiters;
    TeXFont2.defaultChars = {
        'normal': normal_js_1.normal,
        'bold': bold_js_1.bold,
        'italic': italic_js_1.italic,
        'bold-italic': bold_italic_js_1.boldItalic,
        'double-struck': double_struck_js_1.doubleStruck,
        'fraktur': fraktur_js_1.fraktur,
        'bold-fraktur': fraktur_bold_js_1.frakturBold,
        'script': script_js_1.script,
        'bold-script': script_bold_js_1.scriptBold,
        'sans-serif': sans_serif_js_1.sansSerif,
        'bold-sans-serif': sans_serif_bold_js_1.sansSerifBold,
        'sans-serif-italic': sans_serif_italic_js_1.sansSerifItalic,
        'sans-serif-bold-italic': sans_serif_bold_italic_js_1.sansSerifBoldItalic,
        'monospace': monospace_js_1.monospace,
        '-smallop': smallop_js_1.smallop,
        '-largeop': largeop_js_1.largeop,
        '-size3': tex_size3_js_1.texSize3,
        '-size4': tex_size4_js_1.texSize4,
        '-tex-calligraphic': tex_calligraphic_js_1.texCalligraphic,
        '-tex-bold-calligraphic': tex_calligraphic_bold_js_1.texCalligraphicBold,
        '-tex-mathit': tex_mathit_js_1.texMathit,
        '-tex-oldstyle': tex_oldstyle_js_1.texOldstyle,
        '-tex-bold-oldstyle': tex_oldstyle_bold_js_1.texOldstyleBold,
        '-tex-variant': tex_variant_js_1.texVariant
    };
    TeXFont2.defaultStyles = __assign(__assign({
    }, FontData_js_1.CHTMLFontData.defaultStyles), {
        '.MJX-TEX': {
            'font-family': 'MJXZERO, MJXTEX'
        },
        '.TEX-B': {
            'font-family': 'MJXZERO, MJXTEX-B'
        },
        '.TEX-I': {
            'font-family': 'MJXZERO, MJXTEX-I'
        },
        '.TEX-MI': {
            'font-family': 'MJXZERO, MJXTEX-MI'
        },
        '.TEX-BI': {
            'font-family': 'MJXZERO, MJXTEX-BI'
        },
        '.TEX-S1': {
            'font-family': 'MJXZERO, MJXTEX-S1'
        },
        '.TEX-S2': {
            'font-family': 'MJXZERO, MJXTEX-S2'
        },
        '.TEX-S3': {
            'font-family': 'MJXZERO, MJXTEX-S3'
        },
        '.TEX-S4': {
            'font-family': 'MJXZERO, MJXTEX-S4'
        },
        '.TEX-A': {
            'font-family': 'MJXZERO, MJXTEX-A'
        },
        '.TEX-C': {
            'font-family': 'MJXZERO, MJXTEX-C'
        },
        '.TEX-CB': {
            'font-family': 'MJXZERO, MJXTEX-CB'
        },
        '.TEX-FR': {
            'font-family': 'MJXZERO, MJXTEX-FR'
        },
        '.TEX-FRB': {
            'font-family': 'MJXZERO, MJXTEX-FRB'
        },
        '.TEX-SS': {
            'font-family': 'MJXZERO, MJXTEX-SS'
        },
        '.TEX-SSB': {
            'font-family': 'MJXZERO, MJXTEX-SSB'
        },
        '.TEX-SSI': {
            'font-family': 'MJXZERO, MJXTEX-SSI'
        },
        '.TEX-SC': {
            'font-family': 'MJXZERO, MJXTEX-SC'
        },
        '.TEX-T': {
            'font-family': 'MJXZERO, MJXTEX-T'
        },
        '.TEX-V': {
            'font-family': 'MJXZERO, MJXTEX-V'
        },
        '.TEX-VB': {
            'font-family': 'MJXZERO, MJXTEX-VB'
        },
        'mjx-stretchy-v mjx-c, mjx-stretchy-h mjx-c': {
            'font-family': 'MJXZERO, MJXTEX-S1, MJXTEX-S4, MJXTEX, MJXTEX-A ! important'
        }
    });
    TeXFont2.defaultFonts = __assign(__assign({
    }, FontData_js_1.CHTMLFontData.defaultFonts), {
        '@font-face /* 1 */': {
            'font-family': 'MJXTEX',
            src: 'url("%%URL%%/MathJax_Main-Regular.woff") format("woff")'
        },
        '@font-face /* 2 */': {
            'font-family': 'MJXTEX-B',
            src: 'url("%%URL%%/MathJax_Main-Bold.woff") format("woff")'
        },
        '@font-face /* 3 */': {
            'font-family': 'MJXTEX-I',
            src: 'url("%%URL%%/MathJax_Math-Italic.woff") format("woff")'
        },
        '@font-face /* 4 */': {
            'font-family': 'MJXTEX-MI',
            src: 'url("%%URL%%/MathJax_Main-Italic.woff") format("woff")'
        },
        '@font-face /* 5 */': {
            'font-family': 'MJXTEX-BI',
            src: 'url("%%URL%%/MathJax_Math-BoldItalic.woff") format("woff")'
        },
        '@font-face /* 6 */': {
            'font-family': 'MJXTEX-S1',
            src: 'url("%%URL%%/MathJax_Size1-Regular.woff") format("woff")'
        },
        '@font-face /* 7 */': {
            'font-family': 'MJXTEX-S2',
            src: 'url("%%URL%%/MathJax_Size2-Regular.woff") format("woff")'
        },
        '@font-face /* 8 */': {
            'font-family': 'MJXTEX-S3',
            src: 'url("%%URL%%/MathJax_Size3-Regular.woff") format("woff")'
        },
        '@font-face /* 9 */': {
            'font-family': 'MJXTEX-S4',
            src: 'url("%%URL%%/MathJax_Size4-Regular.woff") format("woff")'
        },
        '@font-face /* 10 */': {
            'font-family': 'MJXTEX-A',
            src: 'url("%%URL%%/MathJax_AMS-Regular.woff") format("woff")'
        },
        '@font-face /* 11 */': {
            'font-family': 'MJXTEX-C',
            src: 'url("%%URL%%/MathJax_Calligraphic-Regular.woff") format("woff")'
        },
        '@font-face /* 12 */': {
            'font-family': 'MJXTEX-CB',
            src: 'url("%%URL%%/MathJax_Calligraphic-Bold.woff") format("woff")'
        },
        '@font-face /* 13 */': {
            'font-family': 'MJXTEX-FR',
            src: 'url("%%URL%%/MathJax_Fraktur-Regular.woff") format("woff")'
        },
        '@font-face /* 14 */': {
            'font-family': 'MJXTEX-FRB',
            src: 'url("%%URL%%/MathJax_Fraktur-Bold.woff") format("woff")'
        },
        '@font-face /* 15 */': {
            'font-family': 'MJXTEX-SS',
            src: 'url("%%URL%%/MathJax_SansSerif-Regular.woff") format("woff")'
        },
        '@font-face /* 16 */': {
            'font-family': 'MJXTEX-SSB',
            src: 'url("%%URL%%/MathJax_SansSerif-Bold.woff") format("woff")'
        },
        '@font-face /* 17 */': {
            'font-family': 'MJXTEX-SSI',
            src: 'url("%%URL%%/MathJax_SansSerif-Italic.woff") format("woff")'
        },
        '@font-face /* 18 */': {
            'font-family': 'MJXTEX-SC',
            src: 'url("%%URL%%/MathJax_Script-Regular.woff") format("woff")'
        },
        '@font-face /* 19 */': {
            'font-family': 'MJXTEX-T',
            src: 'url("%%URL%%/MathJax_Typewriter-Regular.woff") format("woff")'
        },
        '@font-face /* 20 */': {
            'font-family': 'MJXTEX-V',
            src: 'url("%%URL%%/MathJax_Vector-Regular.woff") format("woff")'
        },
        '@font-face /* 21 */': {
            'font-family': 'MJXTEX-VB',
            src: 'url("%%URL%%/MathJax_Vector-Bold.woff") format("woff")'
        }
    });
    return TeXFont2;
}(tex_js_1.CommonTeXFontMixin(FontData_js_1.CHTMLFontData));
exports.TeXFont = TeXFont1;

},{"../FontData.js":"1ERs0","../../common/fonts/tex.js":"3enNS","./tex/bold-italic.js":"4WEJ8","./tex/bold.js":"7xTks","./tex/double-struck.js":"5ujai","./tex/fraktur-bold.js":"lZ77p","./tex/fraktur.js":"4kXrd","./tex/italic.js":"4s0sC","./tex/largeop.js":"6HruB","./tex/monospace.js":"2VL3v","./tex/normal.js":"7lXYs","./tex/sans-serif-bold-italic.js":"23gUc","./tex/sans-serif-bold.js":"3CptK","./tex/sans-serif-italic.js":"1avXR","./tex/sans-serif.js":"3QtnF","./tex/script-bold.js":"54tIO","./tex/script.js":"1gmo6","./tex/smallop.js":"7IxF0","./tex/tex-calligraphic-bold.js":"1UglD","./tex/tex-calligraphic.js":"krU9r","./tex/tex-mathit.js":"3yuwb","./tex/tex-oldstyle-bold.js":"3ykbS","./tex/tex-oldstyle.js":"6nuHk","./tex/tex-size3.js":"uR8Wj","./tex/tex-size4.js":"5LFmS","./tex/tex-variant.js":"5y5Df","../../common/fonts/tex/delimiters.js":"3q9AU"}],"1ERs0":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __createBinding = this && this.__createBinding || (Object.create ? function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, {
        enumerable: true,
        get: function() {
            return m[k];
        }
    });
} : function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
});
var __exportStar = this && this.__exportStar || function(m, exports) {
    for(var p in m)if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AddCSS = exports.CHTMLFontData = void 0;
var FontData_js_1 = require("../common/FontData.js");
var lengths_js_1 = require("../../util/lengths.js");
__exportStar(require("../common/FontData.js"), exports);
var CHTMLFontData1 = function(_super) {
    __extends(CHTMLFontData2, _super);
    function CHTMLFontData2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CHTMLFontData2.charOptions = function(font, n) {
        return _super.charOptions.call(this, font, n);
    };
    CHTMLFontData2.prototype.adaptiveCSS = function(adapt) {
        this.options.adaptiveCSS = adapt;
    };
    CHTMLFontData2.prototype.clearCache = function() {
        var e_1, _a, e_2, _b, e_3, _c;
        if (!this.options.adaptiveCSS) return;
        try {
            for(var _d = __values(Object.keys(this.delimiters)), _e = _d.next(); !_e.done; _e = _d.next()){
                var n = _e.value;
                this.delimiters[parseInt(n)].used = false;
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        try {
            for(var _f = __values(Object.keys(this.variant)), _g = _f.next(); !_g.done; _g = _f.next()){
                var name_1 = _g.value;
                var chars = this.variant[name_1].chars;
                try {
                    for(var _h = (e_3 = void 0, __values(Object.keys(chars))), _j = _h.next(); !_j.done; _j = _h.next()){
                        var n = _j.value;
                        var options = chars[parseInt(n)][3];
                        if (options) options.used = false;
                    }
                } catch (e_3_1) {
                    e_3 = {
                        error: e_3_1
                    };
                } finally{
                    try {
                        if (_j && !_j.done && (_c = _h.return)) _c.call(_h);
                    } finally{
                        if (e_3) throw e_3.error;
                    }
                }
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    };
    CHTMLFontData2.prototype.createVariant = function(name, inherit, link) {
        if (inherit === void 0) inherit = null;
        if (link === void 0) link = null;
        _super.prototype.createVariant.call(this, name, inherit, link);
        var CLASS = this.constructor;
        this.variant[name].classes = CLASS.defaultVariantClasses[name];
        this.variant[name].letter = CLASS.defaultVariantLetters[name];
    };
    CHTMLFontData2.prototype.defineChars = function(name, chars) {
        var e_4, _a;
        _super.prototype.defineChars.call(this, name, chars);
        var letter = this.variant[name].letter;
        try {
            for(var _b = __values(Object.keys(chars)), _c = _b.next(); !_c.done; _c = _b.next()){
                var n = _c.value;
                var options = CHTMLFontData2.charOptions(chars, parseInt(n));
                if (options.f === undefined) options.f = letter;
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
    };
    Object.defineProperty(CHTMLFontData2.prototype, "styles", {
        get: function() {
            var e_5, _a;
            var CLASS = this.constructor;
            var styles = __assign({
            }, CLASS.defaultStyles);
            this.addFontURLs(styles, CLASS.defaultFonts, this.options.fontURL);
            try {
                for(var _b = __values(Object.keys(this.delimiters)), _c = _b.next(); !_c.done; _c = _b.next()){
                    var n = _c.value;
                    var N = parseInt(n);
                    this.addDelimiterStyles(styles, N, this.delimiters[N]);
                }
            } catch (e_5_1) {
                e_5 = {
                    error: e_5_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_5) throw e_5.error;
                }
            }
            this.addVariantChars(styles);
            return styles;
        },
        enumerable: false,
        configurable: true
    });
    CHTMLFontData2.prototype.addVariantChars = function(styles) {
        var e_6, _a, e_7, _b;
        var allCSS = !this.options.adaptiveCSS;
        try {
            for(var _c = __values(Object.keys(this.variant)), _d = _c.next(); !_d.done; _d = _c.next()){
                var name_2 = _d.value;
                var variant = this.variant[name_2];
                var vletter = variant.letter;
                try {
                    for(var _e = (e_7 = void 0, __values(Object.keys(variant.chars))), _f = _e.next(); !_f.done; _f = _e.next()){
                        var n = _f.value;
                        var N = parseInt(n);
                        var char = variant.chars[N];
                        if ((char[3] || {
                        }).smp) continue;
                        if (allCSS && char.length < 4) char[3] = {
                        };
                        if (char.length === 4 || allCSS) this.addCharStyles(styles, vletter, N, char);
                    }
                } catch (e_7_1) {
                    e_7 = {
                        error: e_7_1
                    };
                } finally{
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    } finally{
                        if (e_7) throw e_7.error;
                    }
                }
            }
        } catch (e_6_1) {
            e_6 = {
                error: e_6_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_6) throw e_6.error;
            }
        }
    };
    CHTMLFontData2.prototype.addFontURLs = function(styles, fonts, url) {
        var e_8, _a;
        try {
            for(var _b = __values(Object.keys(fonts)), _c = _b.next(); !_c.done; _c = _b.next()){
                var name_3 = _c.value;
                var font = __assign({
                }, fonts[name_3]);
                font.src = font.src.replace(/%%URL%%/, url);
                styles[name_3] = font;
            }
        } catch (e_8_1) {
            e_8 = {
                error: e_8_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_8) throw e_8.error;
            }
        }
    };
    CHTMLFontData2.prototype.addDelimiterStyles = function(styles, n, data) {
        if (this.options.adaptiveCSS && !data.used) return;
        var c = this.charSelector(n);
        if (data.c && data.c !== n) styles['.mjx-stretched mjx-c' + c + '::before'] = {
            content: this.charContent(data.c)
        };
        if (!data.stretch) return;
        if (data.dir === 1) this.addDelimiterVStyles(styles, c, data);
        else this.addDelimiterHStyles(styles, c, data);
    };
    CHTMLFontData2.prototype.addDelimiterVStyles = function(styles, c, data) {
        var HDW = data.HDW;
        var _a = __read(data.stretch, 4), beg = _a[0], ext = _a[1], end = _a[2], mid = _a[3];
        var Hb = this.addDelimiterVPart(styles, c, 'beg', beg, HDW);
        this.addDelimiterVPart(styles, c, 'ext', ext, HDW);
        var He = this.addDelimiterVPart(styles, c, 'end', end, HDW);
        var css = {
        };
        if (mid) {
            var Hm = this.addDelimiterVPart(styles, c, 'mid', mid, HDW);
            css.height = '50%';
            styles['mjx-stretchy-v' + c + ' > mjx-mid'] = {
                'margin-top': this.em(-Hm / 2),
                'margin-bottom': this.em(-Hm / 2)
            };
        }
        if (Hb) css['border-top-width'] = this.em0(Hb - 0.03);
        if (He) {
            css['border-bottom-width'] = this.em0(He - 0.03);
            styles['mjx-stretchy-v' + c + ' > mjx-end'] = {
                'margin-top': this.em(-He)
            };
        }
        if (Object.keys(css).length) styles['mjx-stretchy-v' + c + ' > mjx-ext'] = css;
    };
    CHTMLFontData2.prototype.addDelimiterVPart = function(styles, c, part, n, HDW) {
        if (!n) return 0;
        var data = this.getDelimiterData(n);
        var dw = (HDW[2] - data[2]) / 2;
        var css = {
            content: this.charContent(n)
        };
        if (part !== 'ext') css.padding = this.padding(data, dw);
        else {
            css.width = this.em0(HDW[2]);
            if (dw) css['padding-left'] = this.em0(dw);
        }
        styles['mjx-stretchy-v' + c + ' mjx-' + part + ' mjx-c::before'] = css;
        return data[0] + data[1];
    };
    CHTMLFontData2.prototype.addDelimiterHStyles = function(styles, c, data) {
        var _a = __read(data.stretch, 4), beg = _a[0], ext = _a[1], end = _a[2], mid = _a[3];
        var HDW = data.HDW;
        this.addDelimiterHPart(styles, c, 'beg', beg, HDW);
        this.addDelimiterHPart(styles, c, 'ext', ext, HDW);
        this.addDelimiterHPart(styles, c, 'end', end, HDW);
        if (mid) {
            this.addDelimiterHPart(styles, c, 'mid', mid, HDW);
            styles['mjx-stretchy-h' + c + ' > mjx-ext'] = {
                width: '50%'
            };
        }
    };
    CHTMLFontData2.prototype.addDelimiterHPart = function(styles, c, part, n, HDW) {
        if (!n) return;
        var data = this.getDelimiterData(n);
        var options = data[3];
        var css = {
            content: options && options.c ? '"' + options.c + '"' : this.charContent(n)
        };
        css.padding = this.padding(HDW, 0, -HDW[2]);
        styles['mjx-stretchy-h' + c + ' mjx-' + part + ' mjx-c::before'] = css;
    };
    CHTMLFontData2.prototype.addCharStyles = function(styles, vletter, n, data) {
        var options = data[3];
        if (this.options.adaptiveCSS && !options.used) return;
        var letter = options.f !== undefined ? options.f : vletter;
        var selector = 'mjx-c' + this.charSelector(n) + (letter ? '.TEX-' + letter : '');
        styles[selector + '::before'] = {
            padding: this.padding(data, 0, options.ic || 0),
            content: options.c != null ? '"' + options.c + '"' : this.charContent(n)
        };
    };
    CHTMLFontData2.prototype.getDelimiterData = function(n) {
        return this.getChar('-smallop', n);
    };
    CHTMLFontData2.prototype.em = function(n) {
        return lengths_js_1.em(n);
    };
    CHTMLFontData2.prototype.em0 = function(n) {
        return lengths_js_1.em(Math.max(0, n));
    };
    CHTMLFontData2.prototype.padding = function(_a, dw, ic) {
        var _b = __read(_a, 3), h = _b[0], d = _b[1], w = _b[2];
        if (dw === void 0) dw = 0;
        if (ic === void 0) ic = 0;
        return [
            h,
            w + ic,
            d,
            dw
        ].map(this.em0).join(' ');
    };
    CHTMLFontData2.prototype.charContent = function(n) {
        return '"' + (n >= 32 && n <= 126 && n !== 34 && n !== 39 && n !== 92 ? String.fromCharCode(n) : '\\' + n.toString(16).toUpperCase()) + '"';
    };
    CHTMLFontData2.prototype.charSelector = function(n) {
        return '.mjx-c' + n.toString(16).toUpperCase();
    };
    CHTMLFontData2.OPTIONS = __assign(__assign({
    }, FontData_js_1.FontData.OPTIONS), {
        fontURL: 'js/output/chtml/fonts/tex-woff-v2'
    });
    CHTMLFontData2.defaultVariantClasses = {
    };
    CHTMLFontData2.defaultVariantLetters = {
    };
    CHTMLFontData2.defaultStyles = {
        'mjx-c::before': {
            display: 'block',
            width: 0
        }
    };
    CHTMLFontData2.defaultFonts = {
        '@font-face /* 0 */': {
            'font-family': 'MJXZERO',
            src: 'url("%%URL%%/MathJax_Zero.woff") format("woff")'
        }
    };
    return CHTMLFontData2;
}(FontData_js_1.FontData);
exports.CHTMLFontData = CHTMLFontData1;
function AddCSS(font, options) {
    var e_9, _a;
    try {
        for(var _b = __values(Object.keys(options)), _c = _b.next(); !_c.done; _c = _b.next()){
            var c = _c.value;
            var n = parseInt(c);
            Object.assign(FontData_js_1.FontData.charOptions(font, n), options[n]);
        }
    } catch (e_9_1) {
        e_9 = {
            error: e_9_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        } finally{
            if (e_9) throw e_9.error;
        }
    }
    return font;
}
exports.AddCSS = AddCSS;

},{"../common/FontData.js":"7CKUF","../../util/lengths.js":"5EoCW"}],"3enNS":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CommonTeXFontMixin = void 0;
function CommonTeXFontMixin(Base) {
    var _a;
    return _a = (function(_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.getDelimiterData = function(n) {
            return this.getChar('-smallop', n) || this.getChar('-size4', n);
        };
        return class_1;
    })(Base), _a.defaultVariants = __spreadArray(__spreadArray([], __read(Base.defaultVariants)), [
        [
            '-smallop',
            'normal'
        ],
        [
            '-largeop',
            'normal'
        ],
        [
            '-size3',
            'normal'
        ],
        [
            '-size4',
            'normal'
        ],
        [
            '-tex-calligraphic',
            'italic'
        ],
        [
            '-tex-bold-calligraphic',
            'bold-italic'
        ],
        [
            '-tex-oldstyle',
            'normal'
        ],
        [
            '-tex-bold-oldstyle',
            'bold'
        ],
        [
            '-tex-mathit',
            'italic'
        ],
        [
            '-tex-variant',
            'normal'
        ]
    ]), _a.defaultCssFonts = __assign(__assign({
    }, Base.defaultCssFonts), {
        '-smallop': [
            'serif',
            false,
            false
        ],
        '-largeop': [
            'serif',
            false,
            false
        ],
        '-size3': [
            'serif',
            false,
            false
        ],
        '-size4': [
            'serif',
            false,
            false
        ],
        '-tex-calligraphic': [
            'cursive',
            true,
            false
        ],
        '-tex-bold-calligraphic': [
            'cursive',
            true,
            true
        ],
        '-tex-oldstyle': [
            'serif',
            false,
            false
        ],
        '-tex-bold-oldstyle': [
            'serif',
            false,
            true
        ],
        '-tex-mathit': [
            'serif',
            true,
            false
        ]
    }), _a.defaultSizeVariants = [
        'normal',
        '-smallop',
        '-largeop',
        '-size3',
        '-size4',
        '-tex-variant'
    ], _a.defaultStretchVariants = [
        '-size4'
    ], _a;
}
exports.CommonTeXFontMixin = CommonTeXFontMixin;

},{}],"4WEJ8":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.boldItalic = void 0;
var FontData_js_1 = require("../../FontData.js");
var bold_italic_js_1 = require("../../../common/fonts/tex/bold-italic.js");
exports.boldItalic = FontData_js_1.AddCSS(bold_italic_js_1.boldItalic, {
    305: {
        f: 'B'
    },
    567: {
        f: 'B'
    },
    8260: {
        c: '/'
    },
    8710: {
        c: '\\394'
    },
    10744: {
        c: '/'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/bold-italic.js":"3MIcy"}],"3MIcy":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.boldItalic = void 0;
exports.boldItalic = {
    47: [
        0.711,
        0.21,
        0.894
    ],
    305: [
        0.452,
        0.008,
        0.394,
        {
            sk: 0.0319
        }
    ],
    567: [
        0.451,
        0.201,
        0.439,
        {
            sk: 0.0958
        }
    ],
    8260: [
        0.711,
        0.21,
        0.894
    ],
    8710: [
        0.711,
        0,
        0.958,
        {
            sk: 0.192
        }
    ],
    10744: [
        0.711,
        0.21,
        0.894
    ]
};

},{}],"7xTks":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.bold = void 0;
var FontData_js_1 = require("../../FontData.js");
var bold_js_1 = require("../../../common/fonts/tex/bold.js");
exports.bold = FontData_js_1.AddCSS(bold_js_1.bold, {
    183: {
        c: '\\22C5'
    },
    305: {
        f: ''
    },
    567: {
        f: ''
    },
    697: {
        c: '\\2032'
    },
    8194: {
        c: ''
    },
    8195: {
        c: ''
    },
    8196: {
        c: ''
    },
    8197: {
        c: ''
    },
    8198: {
        c: ''
    },
    8201: {
        c: ''
    },
    8202: {
        c: ''
    },
    8213: {
        c: '\\2014'
    },
    8214: {
        c: '\\2225'
    },
    8215: {
        c: '_'
    },
    8226: {
        c: '\\2219'
    },
    8243: {
        c: '\\2032\\2032'
    },
    8244: {
        c: '\\2032\\2032\\2032'
    },
    8254: {
        c: '\\2C9'
    },
    8260: {
        c: '/'
    },
    8279: {
        c: '\\2032\\2032\\2032\\2032'
    },
    8407: {
        c: '\\2192',
        f: 'VB'
    },
    8602: {
        c: '\\2190\\338'
    },
    8603: {
        c: '\\2192\\338'
    },
    8622: {
        c: '\\2194\\338'
    },
    8653: {
        c: '\\21D0\\338'
    },
    8654: {
        c: '\\21D4\\338'
    },
    8655: {
        c: '\\21D2\\338'
    },
    8708: {
        c: '\\2203\\338'
    },
    8710: {
        c: '\\394'
    },
    8716: {
        c: '\\220B\\338'
    },
    8740: {
        c: '\\2223\\338'
    },
    8742: {
        c: '\\2225\\338'
    },
    8769: {
        c: '\\223C\\338'
    },
    8772: {
        c: '\\2243\\338'
    },
    8775: {
        c: '\\2245\\338'
    },
    8777: {
        c: '\\2248\\338'
    },
    8802: {
        c: '\\2261\\338'
    },
    8813: {
        c: '\\224D\\338'
    },
    8814: {
        c: '<\\338'
    },
    8815: {
        c: '>\\338'
    },
    8816: {
        c: '\\2264\\338'
    },
    8817: {
        c: '\\2265\\338'
    },
    8832: {
        c: '\\227A\\338'
    },
    8833: {
        c: '\\227B\\338'
    },
    8836: {
        c: '\\2282\\338'
    },
    8837: {
        c: '\\2283\\338'
    },
    8840: {
        c: '\\2286\\338'
    },
    8841: {
        c: '\\2287\\338'
    },
    8876: {
        c: '\\22A2\\338'
    },
    8877: {
        c: '\\22A8\\338'
    },
    8930: {
        c: '\\2291\\338'
    },
    8931: {
        c: '\\2292\\338'
    },
    9001: {
        c: '\\27E8'
    },
    9002: {
        c: '\\27E9'
    },
    9653: {
        c: '\\25B3'
    },
    9663: {
        c: '\\25BD'
    },
    10072: {
        c: '\\2223'
    },
    10744: {
        c: '/',
        f: 'BI'
    },
    10799: {
        c: '\\D7'
    },
    12296: {
        c: '\\27E8'
    },
    12297: {
        c: '\\27E9'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/bold.js":"2OGAn"}],"2OGAn":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.bold = void 0;
exports.bold = {
    33: [
        0.705,
        0,
        0.35
    ],
    34: [
        0.694,
        -0.329,
        0.603
    ],
    35: [
        0.694,
        0.193,
        0.958
    ],
    36: [
        0.75,
        0.056,
        0.575
    ],
    37: [
        0.75,
        0.056,
        0.958
    ],
    38: [
        0.705,
        0.011,
        0.894
    ],
    39: [
        0.694,
        -0.329,
        0.319
    ],
    40: [
        0.75,
        0.249,
        0.447
    ],
    41: [
        0.75,
        0.249,
        0.447
    ],
    42: [
        0.75,
        -0.306,
        0.575
    ],
    43: [
        0.633,
        0.131,
        0.894
    ],
    44: [
        0.171,
        0.194,
        0.319
    ],
    45: [
        0.278,
        -0.166,
        0.383
    ],
    46: [
        0.171,
        0,
        0.319
    ],
    47: [
        0.75,
        0.25,
        0.575
    ],
    58: [
        0.444,
        0,
        0.319
    ],
    59: [
        0.444,
        0.194,
        0.319
    ],
    60: [
        0.587,
        0.085,
        0.894
    ],
    61: [
        0.393,
        -0.109,
        0.894
    ],
    62: [
        0.587,
        0.085,
        0.894
    ],
    63: [
        0.7,
        0,
        0.543
    ],
    64: [
        0.699,
        0.006,
        0.894
    ],
    91: [
        0.75,
        0.25,
        0.319
    ],
    92: [
        0.75,
        0.25,
        0.575
    ],
    93: [
        0.75,
        0.25,
        0.319
    ],
    94: [
        0.694,
        -0.52,
        0.575
    ],
    95: [
        -0.01,
        0.061,
        0.575
    ],
    96: [
        0.706,
        -0.503,
        0.575
    ],
    123: [
        0.75,
        0.25,
        0.575
    ],
    124: [
        0.75,
        0.249,
        0.319
    ],
    125: [
        0.75,
        0.25,
        0.575
    ],
    126: [
        0.344,
        -0.202,
        0.575
    ],
    168: [
        0.695,
        -0.535,
        0.575
    ],
    172: [
        0.371,
        -0.061,
        0.767
    ],
    175: [
        0.607,
        -0.54,
        0.575
    ],
    176: [
        0.702,
        -0.536,
        0.575
    ],
    177: [
        0.728,
        0.035,
        0.894
    ],
    180: [
        0.706,
        -0.503,
        0.575
    ],
    183: [
        0.336,
        -0.166,
        0.319
    ],
    215: [
        0.53,
        0.028,
        0.894
    ],
    247: [
        0.597,
        0.096,
        0.894
    ],
    305: [
        0.442,
        0,
        0.278,
        {
            sk: 0.0278
        }
    ],
    567: [
        0.442,
        0.205,
        0.306,
        {
            sk: 0.0833
        }
    ],
    697: [
        0.563,
        -0.033,
        0.344
    ],
    710: [
        0.694,
        -0.52,
        0.575
    ],
    711: [
        0.66,
        -0.515,
        0.575
    ],
    713: [
        0.607,
        -0.54,
        0.575
    ],
    714: [
        0.706,
        -0.503,
        0.575
    ],
    715: [
        0.706,
        -0.503,
        0.575
    ],
    728: [
        0.694,
        -0.5,
        0.575
    ],
    729: [
        0.695,
        -0.525,
        0.575
    ],
    730: [
        0.702,
        -0.536,
        0.575
    ],
    732: [
        0.694,
        -0.552,
        0.575
    ],
    768: [
        0.706,
        -0.503,
        0
    ],
    769: [
        0.706,
        -0.503,
        0
    ],
    770: [
        0.694,
        -0.52,
        0
    ],
    771: [
        0.694,
        -0.552,
        0
    ],
    772: [
        0.607,
        -0.54,
        0
    ],
    774: [
        0.694,
        -0.5,
        0
    ],
    775: [
        0.695,
        -0.525,
        0
    ],
    776: [
        0.695,
        -0.535,
        0
    ],
    778: [
        0.702,
        -0.536,
        0
    ],
    779: [
        0.714,
        -0.511,
        0
    ],
    780: [
        0.66,
        -0.515,
        0
    ],
    824: [
        0.711,
        0.21,
        0
    ],
    8194: [
        0,
        0,
        0.5
    ],
    8195: [
        0,
        0,
        0.999
    ],
    8196: [
        0,
        0,
        0.333
    ],
    8197: [
        0,
        0,
        0.25
    ],
    8198: [
        0,
        0,
        0.167
    ],
    8201: [
        0,
        0,
        0.167
    ],
    8202: [
        0,
        0,
        0.083
    ],
    8211: [
        0.3,
        -0.249,
        0.575
    ],
    8212: [
        0.3,
        -0.249,
        1.15
    ],
    8213: [
        0.3,
        -0.249,
        1.15
    ],
    8214: [
        0.75,
        0.248,
        0.575
    ],
    8215: [
        -0.01,
        0.061,
        0.575
    ],
    8216: [
        0.694,
        -0.329,
        0.319
    ],
    8217: [
        0.694,
        -0.329,
        0.319
    ],
    8220: [
        0.694,
        -0.329,
        0.603
    ],
    8221: [
        0.694,
        -0.329,
        0.603
    ],
    8224: [
        0.702,
        0.211,
        0.511
    ],
    8225: [
        0.702,
        0.202,
        0.511
    ],
    8226: [
        0.474,
        -0.028,
        0.575
    ],
    8230: [
        0.171,
        0,
        1.295
    ],
    8242: [
        0.563,
        -0.033,
        0.344
    ],
    8243: [
        0.563,
        0,
        0.688
    ],
    8244: [
        0.563,
        0,
        1.032
    ],
    8254: [
        0.607,
        -0.54,
        0.575
    ],
    8260: [
        0.75,
        0.25,
        0.575
    ],
    8279: [
        0.563,
        0,
        1.376
    ],
    8407: [
        0.723,
        -0.513,
        0.575
    ],
    8463: [
        0.694,
        0.008,
        0.668,
        {
            sk: -0.0319
        }
    ],
    8467: [
        0.702,
        0.019,
        0.474,
        {
            sk: 0.128
        }
    ],
    8472: [
        0.461,
        0.21,
        0.74
    ],
    8501: [
        0.694,
        0,
        0.703
    ],
    8592: [
        0.518,
        0.017,
        1.15
    ],
    8593: [
        0.694,
        0.193,
        0.575
    ],
    8594: [
        0.518,
        0.017,
        1.15
    ],
    8595: [
        0.694,
        0.194,
        0.575
    ],
    8596: [
        0.518,
        0.017,
        1.15
    ],
    8597: [
        0.767,
        0.267,
        0.575
    ],
    8598: [
        0.724,
        0.194,
        1.15
    ],
    8599: [
        0.724,
        0.193,
        1.15
    ],
    8600: [
        0.694,
        0.224,
        1.15
    ],
    8601: [
        0.694,
        0.224,
        1.15
    ],
    8602: [
        0.711,
        0.21,
        1.15
    ],
    8603: [
        0.711,
        0.21,
        1.15
    ],
    8614: [
        0.518,
        0.017,
        1.15
    ],
    8617: [
        0.518,
        0.017,
        1.282
    ],
    8618: [
        0.518,
        0.017,
        1.282
    ],
    8622: [
        0.711,
        0.21,
        1.15
    ],
    8636: [
        0.518,
        -0.22,
        1.15
    ],
    8637: [
        0.281,
        0.017,
        1.15
    ],
    8640: [
        0.518,
        -0.22,
        1.15
    ],
    8641: [
        0.281,
        0.017,
        1.15
    ],
    8652: [
        0.718,
        0.017,
        1.15
    ],
    8653: [
        0.711,
        0.21,
        1.15
    ],
    8654: [
        0.711,
        0.21,
        1.15
    ],
    8655: [
        0.711,
        0.21,
        1.15
    ],
    8656: [
        0.547,
        0.046,
        1.15
    ],
    8657: [
        0.694,
        0.193,
        0.703
    ],
    8658: [
        0.547,
        0.046,
        1.15
    ],
    8659: [
        0.694,
        0.194,
        0.703
    ],
    8660: [
        0.547,
        0.046,
        1.15
    ],
    8661: [
        0.767,
        0.267,
        0.703
    ],
    8704: [
        0.694,
        0.016,
        0.639
    ],
    8707: [
        0.694,
        0,
        0.639
    ],
    8708: [
        0.711,
        0.21,
        0.639
    ],
    8709: [
        0.767,
        0.073,
        0.575
    ],
    8710: [
        0.698,
        0,
        0.958
    ],
    8712: [
        0.587,
        0.086,
        0.767
    ],
    8713: [
        0.711,
        0.21,
        0.767
    ],
    8715: [
        0.587,
        0.086,
        0.767
    ],
    8716: [
        0.711,
        0.21,
        0.767
    ],
    8722: [
        0.281,
        -0.221,
        0.894
    ],
    8723: [
        0.537,
        0.227,
        0.894
    ],
    8725: [
        0.75,
        0.25,
        0.575
    ],
    8726: [
        0.75,
        0.25,
        0.575
    ],
    8727: [
        0.472,
        -0.028,
        0.575
    ],
    8728: [
        0.474,
        -0.028,
        0.575
    ],
    8729: [
        0.474,
        -0.028,
        0.575
    ],
    8730: [
        0.82,
        0.18,
        0.958,
        {
            ic: 0.03
        }
    ],
    8733: [
        0.451,
        0.008,
        0.894
    ],
    8734: [
        0.452,
        0.008,
        1.15
    ],
    8736: [
        0.714,
        0,
        0.722
    ],
    8739: [
        0.75,
        0.249,
        0.319
    ],
    8740: [
        0.75,
        0.249,
        0.319
    ],
    8741: [
        0.75,
        0.248,
        0.575
    ],
    8742: [
        0.75,
        0.248,
        0.575
    ],
    8743: [
        0.604,
        0.017,
        0.767
    ],
    8744: [
        0.604,
        0.016,
        0.767
    ],
    8745: [
        0.603,
        0.016,
        0.767
    ],
    8746: [
        0.604,
        0.016,
        0.767
    ],
    8747: [
        0.711,
        0.211,
        0.569,
        {
            ic: 0.063
        }
    ],
    8764: [
        0.391,
        -0.109,
        0.894
    ],
    8768: [
        0.583,
        0.082,
        0.319
    ],
    8769: [
        0.711,
        0.21,
        0.894
    ],
    8771: [
        0.502,
        0,
        0.894
    ],
    8772: [
        0.711,
        0.21,
        0.894
    ],
    8773: [
        0.638,
        0.027,
        0.894
    ],
    8775: [
        0.711,
        0.21,
        0.894
    ],
    8776: [
        0.524,
        -0.032,
        0.894
    ],
    8777: [
        0.711,
        0.21,
        0.894
    ],
    8781: [
        0.533,
        0.032,
        0.894
    ],
    8784: [
        0.721,
        -0.109,
        0.894
    ],
    8800: [
        0.711,
        0.21,
        0.894
    ],
    8801: [
        0.505,
        0,
        0.894
    ],
    8802: [
        0.711,
        0.21,
        0.894
    ],
    8804: [
        0.697,
        0.199,
        0.894
    ],
    8805: [
        0.697,
        0.199,
        0.894
    ],
    8810: [
        0.617,
        0.116,
        1.15
    ],
    8811: [
        0.618,
        0.116,
        1.15
    ],
    8813: [
        0.711,
        0.21,
        0.894
    ],
    8814: [
        0.711,
        0.21,
        0.894
    ],
    8815: [
        0.711,
        0.21,
        0.894
    ],
    8816: [
        0.711,
        0.21,
        0.894
    ],
    8817: [
        0.711,
        0.21,
        0.894
    ],
    8826: [
        0.585,
        0.086,
        0.894
    ],
    8827: [
        0.586,
        0.086,
        0.894
    ],
    8832: [
        0.711,
        0.21,
        0.894
    ],
    8833: [
        0.711,
        0.21,
        0.894
    ],
    8834: [
        0.587,
        0.085,
        0.894
    ],
    8835: [
        0.587,
        0.086,
        0.894
    ],
    8836: [
        0.711,
        0.21,
        0.894
    ],
    8837: [
        0.711,
        0.21,
        0.894
    ],
    8838: [
        0.697,
        0.199,
        0.894
    ],
    8839: [
        0.697,
        0.199,
        0.894
    ],
    8840: [
        0.711,
        0.21,
        0.894
    ],
    8841: [
        0.711,
        0.21,
        0.894
    ],
    8846: [
        0.604,
        0.016,
        0.767
    ],
    8849: [
        0.697,
        0.199,
        0.894
    ],
    8850: [
        0.697,
        0.199,
        0.894
    ],
    8851: [
        0.604,
        0,
        0.767
    ],
    8852: [
        0.604,
        0,
        0.767
    ],
    8853: [
        0.632,
        0.132,
        0.894
    ],
    8854: [
        0.632,
        0.132,
        0.894
    ],
    8855: [
        0.632,
        0.132,
        0.894
    ],
    8856: [
        0.632,
        0.132,
        0.894
    ],
    8857: [
        0.632,
        0.132,
        0.894
    ],
    8866: [
        0.693,
        0,
        0.703
    ],
    8867: [
        0.693,
        0,
        0.703
    ],
    8868: [
        0.694,
        0,
        0.894
    ],
    8869: [
        0.693,
        0,
        0.894
    ],
    8872: [
        0.75,
        0.249,
        0.974
    ],
    8876: [
        0.711,
        0.21,
        0.703
    ],
    8877: [
        0.75,
        0.249,
        0.974
    ],
    8900: [
        0.523,
        0.021,
        0.575
    ],
    8901: [
        0.336,
        -0.166,
        0.319
    ],
    8902: [
        0.502,
        0,
        0.575
    ],
    8904: [
        0.54,
        0.039,
        1
    ],
    8930: [
        0.711,
        0.21,
        0.894
    ],
    8931: [
        0.711,
        0.21,
        0.894
    ],
    8942: [
        0.951,
        0.029,
        0.319
    ],
    8943: [
        0.336,
        -0.166,
        1.295
    ],
    8945: [
        0.871,
        -0.101,
        1.323
    ],
    8968: [
        0.75,
        0.248,
        0.511
    ],
    8969: [
        0.75,
        0.248,
        0.511
    ],
    8970: [
        0.749,
        0.248,
        0.511
    ],
    8971: [
        0.749,
        0.248,
        0.511
    ],
    8994: [
        0.405,
        -0.108,
        1.15
    ],
    8995: [
        0.392,
        -0.126,
        1.15
    ],
    9001: [
        0.75,
        0.249,
        0.447
    ],
    9002: [
        0.75,
        0.249,
        0.447
    ],
    9651: [
        0.711,
        0,
        1.022
    ],
    9653: [
        0.711,
        0,
        1.022
    ],
    9657: [
        0.54,
        0.039,
        0.575
    ],
    9661: [
        0.5,
        0.21,
        1.022
    ],
    9663: [
        0.5,
        0.21,
        1.022
    ],
    9667: [
        0.539,
        0.038,
        0.575
    ],
    9711: [
        0.711,
        0.211,
        1.15
    ],
    9824: [
        0.719,
        0.129,
        0.894
    ],
    9825: [
        0.711,
        0.024,
        0.894
    ],
    9826: [
        0.719,
        0.154,
        0.894
    ],
    9827: [
        0.719,
        0.129,
        0.894
    ],
    9837: [
        0.75,
        0.017,
        0.447
    ],
    9838: [
        0.741,
        0.223,
        0.447
    ],
    9839: [
        0.724,
        0.224,
        0.447
    ],
    10072: [
        0.75,
        0.249,
        0.319
    ],
    10216: [
        0.75,
        0.249,
        0.447
    ],
    10217: [
        0.75,
        0.249,
        0.447
    ],
    10229: [
        0.518,
        0.017,
        1.805
    ],
    10230: [
        0.518,
        0.017,
        1.833
    ],
    10231: [
        0.518,
        0.017,
        2.126
    ],
    10232: [
        0.547,
        0.046,
        1.868
    ],
    10233: [
        0.547,
        0.046,
        1.87
    ],
    10234: [
        0.547,
        0.046,
        2.126
    ],
    10236: [
        0.518,
        0.017,
        1.833
    ],
    10744: [
        0.711,
        0.21,
        0.894
    ],
    10799: [
        0.53,
        0.028,
        0.894
    ],
    10815: [
        0.686,
        0,
        0.9
    ],
    10927: [
        0.696,
        0.199,
        0.894
    ],
    10928: [
        0.697,
        0.199,
        0.894
    ],
    12296: [
        0.75,
        0.249,
        0.447
    ],
    12297: [
        0.75,
        0.249,
        0.447
    ]
};

},{}],"5ujai":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.doubleStruck = void 0;
var double_struck_js_1 = require("../../../common/fonts/tex/double-struck.js");
Object.defineProperty(exports, "doubleStruck", {
    enumerable: true,
    get: function() {
        return double_struck_js_1.doubleStruck;
    }
});

},{"../../../common/fonts/tex/double-struck.js":"gx8PG"}],"gx8PG":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.doubleStruck = void 0;
exports.doubleStruck = {
};

},{}],"lZ77p":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.frakturBold = void 0;
var FontData_js_1 = require("../../FontData.js");
var fraktur_bold_js_1 = require("../../../common/fonts/tex/fraktur-bold.js");
exports.frakturBold = FontData_js_1.AddCSS(fraktur_bold_js_1.frakturBold, {
    8260: {
        c: '/'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/fraktur-bold.js":"5ncKM"}],"5ncKM":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.frakturBold = void 0;
exports.frakturBold = {
    33: [
        0.689,
        0.012,
        0.349
    ],
    34: [
        0.695,
        -0.432,
        0.254
    ],
    38: [
        0.696,
        0.016,
        0.871
    ],
    39: [
        0.695,
        -0.436,
        0.25
    ],
    40: [
        0.737,
        0.186,
        0.459
    ],
    41: [
        0.735,
        0.187,
        0.459
    ],
    42: [
        0.692,
        -0.449,
        0.328
    ],
    43: [
        0.598,
        0.082,
        0.893
    ],
    44: [
        0.107,
        0.191,
        0.328
    ],
    45: [
        0.275,
        -0.236,
        0.893
    ],
    46: [
        0.102,
        0.015,
        0.328
    ],
    47: [
        0.721,
        0.182,
        0.593
    ],
    48: [
        0.501,
        0.012,
        0.593
    ],
    49: [
        0.489,
        0,
        0.593
    ],
    50: [
        0.491,
        0,
        0.593
    ],
    51: [
        0.487,
        0.193,
        0.593
    ],
    52: [
        0.495,
        0.196,
        0.593
    ],
    53: [
        0.481,
        0.19,
        0.593
    ],
    54: [
        0.704,
        0.012,
        0.593
    ],
    55: [
        0.479,
        0.197,
        0.593
    ],
    56: [
        0.714,
        0.005,
        0.593
    ],
    57: [
        0.487,
        0.195,
        0.593
    ],
    58: [
        0.457,
        0.012,
        0.255
    ],
    59: [
        0.458,
        0.19,
        0.255
    ],
    61: [
        0.343,
        -0.168,
        0.582
    ],
    63: [
        0.697,
        0.014,
        0.428
    ],
    91: [
        0.74,
        0.13,
        0.257
    ],
    93: [
        0.738,
        0.132,
        0.257
    ],
    94: [
        0.734,
        -0.452,
        0.59
    ],
    8216: [
        0.708,
        -0.411,
        0.254
    ],
    8217: [
        0.692,
        -0.394,
        0.254
    ],
    8260: [
        0.721,
        0.182,
        0.593
    ],
    58113: [
        0.63,
        0.027,
        0.587
    ],
    58114: [
        0.693,
        0.212,
        0.394,
        {
            ic: 0.014
        }
    ],
    58115: [
        0.681,
        0.219,
        0.387
    ],
    58116: [
        0.473,
        0.212,
        0.593
    ],
    58117: [
        0.684,
        0.027,
        0.393
    ],
    58120: [
        0.679,
        0.22,
        0.981
    ],
    58121: [
        0.717,
        0.137,
        0.727
    ]
};

},{}],"4kXrd":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.fraktur = void 0;
var FontData_js_1 = require("../../FontData.js");
var fraktur_js_1 = require("../../../common/fonts/tex/fraktur.js");
exports.fraktur = FontData_js_1.AddCSS(fraktur_js_1.fraktur, {
    8260: {
        c: '/'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/fraktur.js":"6BKvc"}],"6BKvc":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.fraktur = void 0;
exports.fraktur = {
    33: [
        0.689,
        0.012,
        0.296
    ],
    34: [
        0.695,
        -0.432,
        0.215
    ],
    38: [
        0.698,
        0.011,
        0.738
    ],
    39: [
        0.695,
        -0.436,
        0.212
    ],
    40: [
        0.737,
        0.186,
        0.389
    ],
    41: [
        0.735,
        0.187,
        0.389
    ],
    42: [
        0.692,
        -0.449,
        0.278
    ],
    43: [
        0.598,
        0.082,
        0.756
    ],
    44: [
        0.107,
        0.191,
        0.278
    ],
    45: [
        0.275,
        -0.236,
        0.756
    ],
    46: [
        0.102,
        0.015,
        0.278
    ],
    47: [
        0.721,
        0.182,
        0.502
    ],
    48: [
        0.492,
        0.013,
        0.502
    ],
    49: [
        0.468,
        0,
        0.502
    ],
    50: [
        0.474,
        0,
        0.502
    ],
    51: [
        0.473,
        0.182,
        0.502
    ],
    52: [
        0.476,
        0.191,
        0.502
    ],
    53: [
        0.458,
        0.184,
        0.502
    ],
    54: [
        0.7,
        0.013,
        0.502
    ],
    55: [
        0.468,
        0.181,
        0.502
    ],
    56: [
        0.705,
        0.01,
        0.502
    ],
    57: [
        0.469,
        0.182,
        0.502
    ],
    58: [
        0.457,
        0.012,
        0.216
    ],
    59: [
        0.458,
        0.189,
        0.216
    ],
    61: [
        0.368,
        -0.132,
        0.756
    ],
    63: [
        0.693,
        0.011,
        0.362
    ],
    91: [
        0.74,
        0.13,
        0.278
    ],
    93: [
        0.738,
        0.131,
        0.278
    ],
    94: [
        0.734,
        -0.452,
        0.5
    ],
    8216: [
        0.708,
        -0.41,
        0.215
    ],
    8217: [
        0.692,
        -0.395,
        0.215
    ],
    8260: [
        0.721,
        0.182,
        0.502
    ],
    58112: [
        0.683,
        0.032,
        0.497
    ],
    58113: [
        0.616,
        0.03,
        0.498
    ],
    58114: [
        0.68,
        0.215,
        0.333
    ],
    58115: [
        0.679,
        0.224,
        0.329
    ],
    58116: [
        0.471,
        0.214,
        0.503
    ],
    58117: [
        0.686,
        0.02,
        0.333
    ],
    58118: [
        0.577,
        0.021,
        0.334,
        {
            ic: 0.013
        }
    ],
    58119: [
        0.475,
        0.022,
        0.501,
        {
            ic: 0.013
        }
    ]
};

},{}],"4s0sC":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.italic = void 0;
var FontData_js_1 = require("../../FontData.js");
var italic_js_1 = require("../../../common/fonts/tex/italic.js");
exports.italic = FontData_js_1.AddCSS(italic_js_1.italic, {
    47: {
        f: 'I'
    },
    989: {
        c: '\\E008',
        f: 'A'
    },
    8213: {
        c: '\\2014'
    },
    8215: {
        c: '_'
    },
    8260: {
        c: '/',
        f: 'I'
    },
    8710: {
        c: '\\394',
        f: 'I'
    },
    10744: {
        c: '/',
        f: 'I'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/italic.js":"3xIlA"}],"3xIlA":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.italic = void 0;
exports.italic = {
    33: [
        0.716,
        0,
        0.307,
        {
            ic: 0.073
        }
    ],
    34: [
        0.694,
        -0.379,
        0.514,
        {
            ic: 0.024
        }
    ],
    35: [
        0.694,
        0.194,
        0.818,
        {
            ic: 0.01
        }
    ],
    37: [
        0.75,
        0.056,
        0.818,
        {
            ic: 0.029
        }
    ],
    38: [
        0.716,
        0.022,
        0.767,
        {
            ic: 0.035
        }
    ],
    39: [
        0.694,
        -0.379,
        0.307,
        {
            ic: 0.07
        }
    ],
    40: [
        0.75,
        0.25,
        0.409,
        {
            ic: 0.108
        }
    ],
    41: [
        0.75,
        0.25,
        0.409
    ],
    42: [
        0.75,
        -0.32,
        0.511,
        {
            ic: 0.073
        }
    ],
    43: [
        0.557,
        0.057,
        0.767
    ],
    44: [
        0.121,
        0.194,
        0.307
    ],
    45: [
        0.251,
        -0.18,
        0.358
    ],
    46: [
        0.121,
        0,
        0.307
    ],
    47: [
        0.716,
        0.215,
        0.778
    ],
    48: [
        0.665,
        0.021,
        0.511,
        {
            ic: 0.051
        }
    ],
    49: [
        0.666,
        0,
        0.511
    ],
    50: [
        0.666,
        0.022,
        0.511,
        {
            ic: 0.04
        }
    ],
    51: [
        0.666,
        0.022,
        0.511,
        {
            ic: 0.051
        }
    ],
    52: [
        0.666,
        0.194,
        0.511
    ],
    53: [
        0.666,
        0.022,
        0.511,
        {
            ic: 0.056
        }
    ],
    54: [
        0.665,
        0.022,
        0.511,
        {
            ic: 0.054
        }
    ],
    55: [
        0.666,
        0.022,
        0.511,
        {
            ic: 0.123
        }
    ],
    56: [
        0.666,
        0.021,
        0.511,
        {
            ic: 0.042
        }
    ],
    57: [
        0.666,
        0.022,
        0.511,
        {
            ic: 0.042
        }
    ],
    58: [
        0.431,
        0,
        0.307
    ],
    59: [
        0.431,
        0.194,
        0.307
    ],
    61: [
        0.367,
        -0.133,
        0.767
    ],
    63: [
        0.716,
        0,
        0.511,
        {
            ic: 0.04
        }
    ],
    64: [
        0.705,
        0.011,
        0.767,
        {
            ic: 0.022
        }
    ],
    91: [
        0.75,
        0.25,
        0.307,
        {
            ic: 0.139
        }
    ],
    93: [
        0.75,
        0.25,
        0.307,
        {
            ic: 0.052
        }
    ],
    94: [
        0.694,
        -0.527,
        0.511,
        {
            ic: 0.017
        }
    ],
    95: [
        -0.025,
        0.062,
        0.511,
        {
            ic: 0.043
        }
    ],
    126: [
        0.318,
        -0.208,
        0.511,
        {
            ic: 0.06
        }
    ],
    305: [
        0.441,
        0.01,
        0.307,
        {
            ic: 0.033
        }
    ],
    567: [
        0.442,
        0.204,
        0.332
    ],
    768: [
        0.697,
        -0.5,
        0
    ],
    769: [
        0.697,
        -0.5,
        0,
        {
            ic: 0.039
        }
    ],
    770: [
        0.694,
        -0.527,
        0,
        {
            ic: 0.017
        }
    ],
    771: [
        0.668,
        -0.558,
        0,
        {
            ic: 0.06
        }
    ],
    772: [
        0.589,
        -0.544,
        0,
        {
            ic: 0.054
        }
    ],
    774: [
        0.694,
        -0.515,
        0,
        {
            ic: 0.062
        }
    ],
    775: [
        0.669,
        -0.548,
        0
    ],
    776: [
        0.669,
        -0.554,
        0,
        {
            ic: 0.045
        }
    ],
    778: [
        0.716,
        -0.542,
        0
    ],
    779: [
        0.697,
        -0.503,
        0,
        {
            ic: 0.065
        }
    ],
    780: [
        0.638,
        -0.502,
        0,
        {
            ic: 0.029
        }
    ],
    989: [
        0.605,
        0.085,
        0.778
    ],
    8211: [
        0.285,
        -0.248,
        0.511,
        {
            ic: 0.043
        }
    ],
    8212: [
        0.285,
        -0.248,
        1.022,
        {
            ic: 0.016
        }
    ],
    8213: [
        0.285,
        -0.248,
        1.022,
        {
            ic: 0.016
        }
    ],
    8215: [
        -0.025,
        0.062,
        0.511,
        {
            ic: 0.043
        }
    ],
    8216: [
        0.694,
        -0.379,
        0.307,
        {
            ic: 0.055
        }
    ],
    8217: [
        0.694,
        -0.379,
        0.307,
        {
            ic: 0.07
        }
    ],
    8220: [
        0.694,
        -0.379,
        0.514,
        {
            ic: 0.092
        }
    ],
    8221: [
        0.694,
        -0.379,
        0.514,
        {
            ic: 0.024
        }
    ],
    8260: [
        0.716,
        0.215,
        0.778
    ],
    8463: [
        0.695,
        0.013,
        0.54,
        {
            ic: 0.022
        }
    ],
    8710: [
        0.716,
        0,
        0.833,
        {
            sk: 0.167
        }
    ],
    10744: [
        0.716,
        0.215,
        0.778
    ]
};

},{}],"6HruB":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.largeop = void 0;
var FontData_js_1 = require("../../FontData.js");
var largeop_js_1 = require("../../../common/fonts/tex/largeop.js");
exports.largeop = FontData_js_1.AddCSS(largeop_js_1.largeop, {
    8214: {
        f: 'S1'
    },
    8260: {
        c: '/'
    },
    8593: {
        f: 'S1'
    },
    8595: {
        f: 'S1'
    },
    8657: {
        f: 'S1'
    },
    8659: {
        f: 'S1'
    },
    8739: {
        f: 'S1'
    },
    8741: {
        f: 'S1'
    },
    9001: {
        c: '\\27E8'
    },
    9002: {
        c: '\\27E9'
    },
    9168: {
        f: 'S1'
    },
    10072: {
        c: '\\2223',
        f: 'S1'
    },
    10764: {
        c: '\\222C\\222C'
    },
    12296: {
        c: '\\27E8'
    },
    12297: {
        c: '\\27E9'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/largeop.js":"4sGOg"}],"4sGOg":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.largeop = void 0;
exports.largeop = {
    40: [
        1.15,
        0.649,
        0.597
    ],
    41: [
        1.15,
        0.649,
        0.597
    ],
    47: [
        1.15,
        0.649,
        0.811
    ],
    91: [
        1.15,
        0.649,
        0.472
    ],
    92: [
        1.15,
        0.649,
        0.811
    ],
    93: [
        1.15,
        0.649,
        0.472
    ],
    123: [
        1.15,
        0.649,
        0.667
    ],
    125: [
        1.15,
        0.649,
        0.667
    ],
    710: [
        0.772,
        -0.565,
        1
    ],
    732: [
        0.75,
        -0.611,
        1
    ],
    770: [
        0.772,
        -0.565,
        0
    ],
    771: [
        0.75,
        -0.611,
        0
    ],
    8214: [
        0.602,
        0,
        0.778
    ],
    8260: [
        1.15,
        0.649,
        0.811
    ],
    8593: [
        0.6,
        0,
        0.667
    ],
    8595: [
        0.6,
        0,
        0.667
    ],
    8657: [
        0.599,
        0,
        0.778
    ],
    8659: [
        0.6,
        0,
        0.778
    ],
    8719: [
        0.95,
        0.45,
        1.278
    ],
    8720: [
        0.95,
        0.45,
        1.278
    ],
    8721: [
        0.95,
        0.45,
        1.444
    ],
    8730: [
        1.15,
        0.65,
        1,
        {
            ic: 0.02
        }
    ],
    8739: [
        0.627,
        0.015,
        0.333
    ],
    8741: [
        0.627,
        0.015,
        0.556
    ],
    8747: [
        1.36,
        0.862,
        0.556,
        {
            ic: 0.388
        }
    ],
    8748: [
        1.36,
        0.862,
        1.084,
        {
            ic: 0.388
        }
    ],
    8749: [
        1.36,
        0.862,
        1.592,
        {
            ic: 0.388
        }
    ],
    8750: [
        1.36,
        0.862,
        0.556,
        {
            ic: 0.388
        }
    ],
    8896: [
        0.95,
        0.45,
        1.111
    ],
    8897: [
        0.95,
        0.45,
        1.111
    ],
    8898: [
        0.949,
        0.45,
        1.111
    ],
    8899: [
        0.95,
        0.449,
        1.111
    ],
    8968: [
        1.15,
        0.649,
        0.528
    ],
    8969: [
        1.15,
        0.649,
        0.528
    ],
    8970: [
        1.15,
        0.649,
        0.528
    ],
    8971: [
        1.15,
        0.649,
        0.528
    ],
    9001: [
        1.15,
        0.649,
        0.611
    ],
    9002: [
        1.15,
        0.649,
        0.611
    ],
    9168: [
        0.602,
        0,
        0.667
    ],
    10072: [
        0.627,
        0.015,
        0.333
    ],
    10216: [
        1.15,
        0.649,
        0.611
    ],
    10217: [
        1.15,
        0.649,
        0.611
    ],
    10752: [
        0.949,
        0.449,
        1.511
    ],
    10753: [
        0.949,
        0.449,
        1.511
    ],
    10754: [
        0.949,
        0.449,
        1.511
    ],
    10756: [
        0.95,
        0.449,
        1.111
    ],
    10758: [
        0.95,
        0.45,
        1.111
    ],
    10764: [
        1.36,
        0.862,
        2.168,
        {
            ic: 0.388
        }
    ],
    12296: [
        1.15,
        0.649,
        0.611
    ],
    12297: [
        1.15,
        0.649,
        0.611
    ]
};

},{}],"2VL3v":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.monospace = void 0;
var FontData_js_1 = require("../../FontData.js");
var monospace_js_1 = require("../../../common/fonts/tex/monospace.js");
exports.monospace = FontData_js_1.AddCSS(monospace_js_1.monospace, {
    697: {
        c: '\\2032'
    },
    913: {
        c: 'A'
    },
    914: {
        c: 'B'
    },
    917: {
        c: 'E'
    },
    918: {
        c: 'Z'
    },
    919: {
        c: 'H'
    },
    921: {
        c: 'I'
    },
    922: {
        c: 'K'
    },
    924: {
        c: 'M'
    },
    925: {
        c: 'N'
    },
    927: {
        c: 'O'
    },
    929: {
        c: 'P'
    },
    932: {
        c: 'T'
    },
    935: {
        c: 'X'
    },
    8215: {
        c: '_'
    },
    8243: {
        c: '\\2032\\2032'
    },
    8244: {
        c: '\\2032\\2032\\2032'
    },
    8260: {
        c: '/'
    },
    8279: {
        c: '\\2032\\2032\\2032\\2032'
    },
    8710: {
        c: '\\394'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/monospace.js":"3P90h"}],"3P90h":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.monospace = void 0;
exports.monospace = {
    32: [
        0,
        0,
        0.525
    ],
    33: [
        0.622,
        0,
        0.525
    ],
    34: [
        0.623,
        -0.333,
        0.525
    ],
    35: [
        0.611,
        0,
        0.525
    ],
    36: [
        0.694,
        0.082,
        0.525
    ],
    37: [
        0.694,
        0.083,
        0.525
    ],
    38: [
        0.622,
        0.011,
        0.525
    ],
    39: [
        0.611,
        -0.287,
        0.525
    ],
    40: [
        0.694,
        0.082,
        0.525
    ],
    41: [
        0.694,
        0.082,
        0.525
    ],
    42: [
        0.52,
        -0.09,
        0.525
    ],
    43: [
        0.531,
        -0.081,
        0.525
    ],
    44: [
        0.14,
        0.139,
        0.525
    ],
    45: [
        0.341,
        -0.271,
        0.525
    ],
    46: [
        0.14,
        0,
        0.525
    ],
    47: [
        0.694,
        0.083,
        0.525
    ],
    58: [
        0.431,
        0,
        0.525
    ],
    59: [
        0.431,
        0.139,
        0.525
    ],
    60: [
        0.557,
        -0.055,
        0.525
    ],
    61: [
        0.417,
        -0.195,
        0.525
    ],
    62: [
        0.557,
        -0.055,
        0.525
    ],
    63: [
        0.617,
        0,
        0.525
    ],
    64: [
        0.617,
        0.006,
        0.525
    ],
    91: [
        0.694,
        0.082,
        0.525
    ],
    92: [
        0.694,
        0.083,
        0.525
    ],
    93: [
        0.694,
        0.082,
        0.525
    ],
    94: [
        0.611,
        -0.46,
        0.525
    ],
    95: [
        -0.025,
        0.095,
        0.525
    ],
    96: [
        0.681,
        -0.357,
        0.525
    ],
    123: [
        0.694,
        0.083,
        0.525
    ],
    124: [
        0.694,
        0.082,
        0.525
    ],
    125: [
        0.694,
        0.083,
        0.525
    ],
    126: [
        0.611,
        -0.466,
        0.525
    ],
    127: [
        0.612,
        -0.519,
        0.525
    ],
    160: [
        0,
        0,
        0.525
    ],
    305: [
        0.431,
        0,
        0.525
    ],
    567: [
        0.431,
        0.228,
        0.525
    ],
    697: [
        0.623,
        -0.334,
        0.525
    ],
    768: [
        0.611,
        -0.485,
        0
    ],
    769: [
        0.611,
        -0.485,
        0
    ],
    770: [
        0.611,
        -0.46,
        0
    ],
    771: [
        0.611,
        -0.466,
        0
    ],
    772: [
        0.577,
        -0.5,
        0
    ],
    774: [
        0.611,
        -0.504,
        0
    ],
    776: [
        0.612,
        -0.519,
        0
    ],
    778: [
        0.619,
        -0.499,
        0
    ],
    780: [
        0.577,
        -0.449,
        0
    ],
    913: [
        0.623,
        0,
        0.525
    ],
    914: [
        0.611,
        0,
        0.525
    ],
    915: [
        0.611,
        0,
        0.525
    ],
    916: [
        0.623,
        0,
        0.525
    ],
    917: [
        0.611,
        0,
        0.525
    ],
    918: [
        0.611,
        0,
        0.525
    ],
    919: [
        0.611,
        0,
        0.525
    ],
    920: [
        0.621,
        0.01,
        0.525
    ],
    921: [
        0.611,
        0,
        0.525
    ],
    922: [
        0.611,
        0,
        0.525
    ],
    923: [
        0.623,
        0,
        0.525
    ],
    924: [
        0.611,
        0,
        0.525
    ],
    925: [
        0.611,
        0,
        0.525
    ],
    926: [
        0.611,
        0,
        0.525
    ],
    927: [
        0.621,
        0.01,
        0.525
    ],
    928: [
        0.611,
        0,
        0.525
    ],
    929: [
        0.611,
        0,
        0.525
    ],
    931: [
        0.611,
        0,
        0.525
    ],
    932: [
        0.611,
        0,
        0.525
    ],
    933: [
        0.622,
        0,
        0.525
    ],
    934: [
        0.611,
        0,
        0.525
    ],
    935: [
        0.611,
        0,
        0.525
    ],
    936: [
        0.611,
        0,
        0.525
    ],
    937: [
        0.622,
        0,
        0.525
    ],
    8215: [
        -0.025,
        0.095,
        0.525
    ],
    8242: [
        0.623,
        -0.334,
        0.525
    ],
    8243: [
        0.623,
        0,
        1.05
    ],
    8244: [
        0.623,
        0,
        1.575
    ],
    8260: [
        0.694,
        0.083,
        0.525
    ],
    8279: [
        0.623,
        0,
        2.1
    ],
    8710: [
        0.623,
        0,
        0.525
    ]
};

},{}],"7lXYs":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.normal = void 0;
var FontData_js_1 = require("../../FontData.js");
var normal_js_1 = require("../../../common/fonts/tex/normal.js");
exports.normal = FontData_js_1.AddCSS(normal_js_1.normal, {
    163: {
        f: 'MI'
    },
    165: {
        f: 'A'
    },
    174: {
        f: 'A'
    },
    183: {
        c: '\\22C5'
    },
    240: {
        f: 'A'
    },
    697: {
        c: '\\2032'
    },
    913: {
        c: 'A'
    },
    914: {
        c: 'B'
    },
    917: {
        c: 'E'
    },
    918: {
        c: 'Z'
    },
    919: {
        c: 'H'
    },
    921: {
        c: 'I'
    },
    922: {
        c: 'K'
    },
    924: {
        c: 'M'
    },
    925: {
        c: 'N'
    },
    927: {
        c: 'O'
    },
    929: {
        c: 'P'
    },
    932: {
        c: 'T'
    },
    935: {
        c: 'X'
    },
    8192: {
        c: ''
    },
    8193: {
        c: ''
    },
    8194: {
        c: ''
    },
    8195: {
        c: ''
    },
    8196: {
        c: ''
    },
    8197: {
        c: ''
    },
    8198: {
        c: ''
    },
    8201: {
        c: ''
    },
    8202: {
        c: ''
    },
    8203: {
        c: ''
    },
    8204: {
        c: ''
    },
    8213: {
        c: '\\2014'
    },
    8214: {
        c: '\\2225'
    },
    8215: {
        c: '_'
    },
    8226: {
        c: '\\2219'
    },
    8243: {
        c: '\\2032\\2032'
    },
    8244: {
        c: '\\2032\\2032\\2032'
    },
    8245: {
        f: 'A'
    },
    8246: {
        c: '\\2035\\2035',
        f: 'A'
    },
    8247: {
        c: '\\2035\\2035\\2035',
        f: 'A'
    },
    8254: {
        c: '\\2C9'
    },
    8260: {
        c: '/'
    },
    8279: {
        c: '\\2032\\2032\\2032\\2032'
    },
    8288: {
        c: ''
    },
    8289: {
        c: ''
    },
    8290: {
        c: ''
    },
    8291: {
        c: ''
    },
    8292: {
        c: ''
    },
    8407: {
        c: '\\2192',
        f: 'V'
    },
    8450: {
        c: 'C',
        f: 'A'
    },
    8459: {
        c: 'H',
        f: 'SC'
    },
    8460: {
        c: 'H',
        f: 'FR'
    },
    8461: {
        c: 'H',
        f: 'A'
    },
    8462: {
        c: 'h',
        f: 'I'
    },
    8463: {
        f: 'A'
    },
    8464: {
        c: 'I',
        f: 'SC'
    },
    8465: {
        c: 'I',
        f: 'FR'
    },
    8466: {
        c: 'L',
        f: 'SC'
    },
    8469: {
        c: 'N',
        f: 'A'
    },
    8473: {
        c: 'P',
        f: 'A'
    },
    8474: {
        c: 'Q',
        f: 'A'
    },
    8475: {
        c: 'R',
        f: 'SC'
    },
    8476: {
        c: 'R',
        f: 'FR'
    },
    8477: {
        c: 'R',
        f: 'A'
    },
    8484: {
        c: 'Z',
        f: 'A'
    },
    8486: {
        c: '\\3A9'
    },
    8487: {
        f: 'A'
    },
    8488: {
        c: 'Z',
        f: 'FR'
    },
    8492: {
        c: 'B',
        f: 'SC'
    },
    8493: {
        c: 'C',
        f: 'FR'
    },
    8496: {
        c: 'E',
        f: 'SC'
    },
    8497: {
        c: 'F',
        f: 'SC'
    },
    8498: {
        f: 'A'
    },
    8499: {
        c: 'M',
        f: 'SC'
    },
    8502: {
        f: 'A'
    },
    8503: {
        f: 'A'
    },
    8504: {
        f: 'A'
    },
    8513: {
        f: 'A'
    },
    8602: {
        f: 'A'
    },
    8603: {
        f: 'A'
    },
    8606: {
        f: 'A'
    },
    8608: {
        f: 'A'
    },
    8610: {
        f: 'A'
    },
    8611: {
        f: 'A'
    },
    8619: {
        f: 'A'
    },
    8620: {
        f: 'A'
    },
    8621: {
        f: 'A'
    },
    8622: {
        f: 'A'
    },
    8624: {
        f: 'A'
    },
    8625: {
        f: 'A'
    },
    8630: {
        f: 'A'
    },
    8631: {
        f: 'A'
    },
    8634: {
        f: 'A'
    },
    8635: {
        f: 'A'
    },
    8638: {
        f: 'A'
    },
    8639: {
        f: 'A'
    },
    8642: {
        f: 'A'
    },
    8643: {
        f: 'A'
    },
    8644: {
        f: 'A'
    },
    8646: {
        f: 'A'
    },
    8647: {
        f: 'A'
    },
    8648: {
        f: 'A'
    },
    8649: {
        f: 'A'
    },
    8650: {
        f: 'A'
    },
    8651: {
        f: 'A'
    },
    8653: {
        f: 'A'
    },
    8654: {
        f: 'A'
    },
    8655: {
        f: 'A'
    },
    8666: {
        f: 'A'
    },
    8667: {
        f: 'A'
    },
    8669: {
        f: 'A'
    },
    8672: {
        f: 'A'
    },
    8674: {
        f: 'A'
    },
    8705: {
        f: 'A'
    },
    8708: {
        c: '\\2203\\338'
    },
    8710: {
        c: '\\394'
    },
    8716: {
        c: '\\220B\\338'
    },
    8717: {
        f: 'A'
    },
    8719: {
        f: 'S1'
    },
    8720: {
        f: 'S1'
    },
    8721: {
        f: 'S1'
    },
    8724: {
        f: 'A'
    },
    8737: {
        f: 'A'
    },
    8738: {
        f: 'A'
    },
    8740: {
        f: 'A'
    },
    8742: {
        f: 'A'
    },
    8748: {
        f: 'S1'
    },
    8749: {
        f: 'S1'
    },
    8750: {
        f: 'S1'
    },
    8756: {
        f: 'A'
    },
    8757: {
        f: 'A'
    },
    8765: {
        f: 'A'
    },
    8769: {
        f: 'A'
    },
    8770: {
        f: 'A'
    },
    8772: {
        c: '\\2243\\338'
    },
    8775: {
        c: '\\2246',
        f: 'A'
    },
    8777: {
        c: '\\2248\\338'
    },
    8778: {
        f: 'A'
    },
    8782: {
        f: 'A'
    },
    8783: {
        f: 'A'
    },
    8785: {
        f: 'A'
    },
    8786: {
        f: 'A'
    },
    8787: {
        f: 'A'
    },
    8790: {
        f: 'A'
    },
    8791: {
        f: 'A'
    },
    8796: {
        f: 'A'
    },
    8802: {
        c: '\\2261\\338'
    },
    8806: {
        f: 'A'
    },
    8807: {
        f: 'A'
    },
    8808: {
        f: 'A'
    },
    8809: {
        f: 'A'
    },
    8812: {
        f: 'A'
    },
    8813: {
        c: '\\224D\\338'
    },
    8814: {
        f: 'A'
    },
    8815: {
        f: 'A'
    },
    8816: {
        f: 'A'
    },
    8817: {
        f: 'A'
    },
    8818: {
        f: 'A'
    },
    8819: {
        f: 'A'
    },
    8820: {
        c: '\\2272\\338'
    },
    8821: {
        c: '\\2273\\338'
    },
    8822: {
        f: 'A'
    },
    8823: {
        f: 'A'
    },
    8824: {
        c: '\\2276\\338'
    },
    8825: {
        c: '\\2277\\338'
    },
    8828: {
        f: 'A'
    },
    8829: {
        f: 'A'
    },
    8830: {
        f: 'A'
    },
    8831: {
        f: 'A'
    },
    8832: {
        f: 'A'
    },
    8833: {
        f: 'A'
    },
    8836: {
        c: '\\2282\\338'
    },
    8837: {
        c: '\\2283\\338'
    },
    8840: {
        f: 'A'
    },
    8841: {
        f: 'A'
    },
    8842: {
        f: 'A'
    },
    8843: {
        f: 'A'
    },
    8847: {
        f: 'A'
    },
    8848: {
        f: 'A'
    },
    8858: {
        f: 'A'
    },
    8859: {
        f: 'A'
    },
    8861: {
        f: 'A'
    },
    8862: {
        f: 'A'
    },
    8863: {
        f: 'A'
    },
    8864: {
        f: 'A'
    },
    8865: {
        f: 'A'
    },
    8873: {
        f: 'A'
    },
    8874: {
        f: 'A'
    },
    8876: {
        f: 'A'
    },
    8877: {
        f: 'A'
    },
    8878: {
        f: 'A'
    },
    8879: {
        f: 'A'
    },
    8882: {
        f: 'A'
    },
    8883: {
        f: 'A'
    },
    8884: {
        f: 'A'
    },
    8885: {
        f: 'A'
    },
    8888: {
        f: 'A'
    },
    8890: {
        f: 'A'
    },
    8891: {
        f: 'A'
    },
    8892: {
        f: 'A'
    },
    8896: {
        f: 'S1'
    },
    8897: {
        f: 'S1'
    },
    8898: {
        f: 'S1'
    },
    8899: {
        f: 'S1'
    },
    8903: {
        f: 'A'
    },
    8905: {
        f: 'A'
    },
    8906: {
        f: 'A'
    },
    8907: {
        f: 'A'
    },
    8908: {
        f: 'A'
    },
    8909: {
        f: 'A'
    },
    8910: {
        f: 'A'
    },
    8911: {
        f: 'A'
    },
    8912: {
        f: 'A'
    },
    8913: {
        f: 'A'
    },
    8914: {
        f: 'A'
    },
    8915: {
        f: 'A'
    },
    8916: {
        f: 'A'
    },
    8918: {
        f: 'A'
    },
    8919: {
        f: 'A'
    },
    8920: {
        f: 'A'
    },
    8921: {
        f: 'A'
    },
    8922: {
        f: 'A'
    },
    8923: {
        f: 'A'
    },
    8926: {
        f: 'A'
    },
    8927: {
        f: 'A'
    },
    8928: {
        f: 'A'
    },
    8929: {
        f: 'A'
    },
    8930: {
        c: '\\2291\\338'
    },
    8931: {
        c: '\\2292\\338'
    },
    8934: {
        f: 'A'
    },
    8935: {
        f: 'A'
    },
    8936: {
        f: 'A'
    },
    8937: {
        f: 'A'
    },
    8938: {
        f: 'A'
    },
    8939: {
        f: 'A'
    },
    8940: {
        f: 'A'
    },
    8941: {
        f: 'A'
    },
    8965: {
        c: '\\22BC',
        f: 'A'
    },
    8966: {
        c: '\\2A5E',
        f: 'A'
    },
    8988: {
        c: '\\250C',
        f: 'A'
    },
    8989: {
        c: '\\2510',
        f: 'A'
    },
    8990: {
        c: '\\2514',
        f: 'A'
    },
    8991: {
        c: '\\2518',
        f: 'A'
    },
    9001: {
        c: '\\27E8'
    },
    9002: {
        c: '\\27E9'
    },
    9168: {
        f: 'S1'
    },
    9416: {
        f: 'A'
    },
    9484: {
        f: 'A'
    },
    9488: {
        f: 'A'
    },
    9492: {
        f: 'A'
    },
    9496: {
        f: 'A'
    },
    9585: {
        f: 'A'
    },
    9586: {
        f: 'A'
    },
    9632: {
        f: 'A'
    },
    9633: {
        f: 'A'
    },
    9642: {
        c: '\\25A0',
        f: 'A'
    },
    9650: {
        f: 'A'
    },
    9652: {
        c: '\\25B2',
        f: 'A'
    },
    9653: {
        c: '\\25B3'
    },
    9654: {
        f: 'A'
    },
    9656: {
        c: '\\25B6',
        f: 'A'
    },
    9660: {
        f: 'A'
    },
    9662: {
        c: '\\25BC',
        f: 'A'
    },
    9663: {
        c: '\\25BD'
    },
    9664: {
        f: 'A'
    },
    9666: {
        c: '\\25C0',
        f: 'A'
    },
    9674: {
        f: 'A'
    },
    9723: {
        c: '\\25A1',
        f: 'A'
    },
    9724: {
        c: '\\25A0',
        f: 'A'
    },
    9733: {
        f: 'A'
    },
    10003: {
        f: 'A'
    },
    10016: {
        f: 'A'
    },
    10072: {
        c: '\\2223'
    },
    10731: {
        f: 'A'
    },
    10744: {
        c: '/',
        f: 'I'
    },
    10752: {
        f: 'S1'
    },
    10753: {
        f: 'S1'
    },
    10754: {
        f: 'S1'
    },
    10756: {
        f: 'S1'
    },
    10758: {
        f: 'S1'
    },
    10764: {
        c: '\\222C\\222C',
        f: 'S1'
    },
    10799: {
        c: '\\D7'
    },
    10846: {
        f: 'A'
    },
    10877: {
        f: 'A'
    },
    10878: {
        f: 'A'
    },
    10885: {
        f: 'A'
    },
    10886: {
        f: 'A'
    },
    10887: {
        f: 'A'
    },
    10888: {
        f: 'A'
    },
    10889: {
        f: 'A'
    },
    10890: {
        f: 'A'
    },
    10891: {
        f: 'A'
    },
    10892: {
        f: 'A'
    },
    10901: {
        f: 'A'
    },
    10902: {
        f: 'A'
    },
    10933: {
        f: 'A'
    },
    10934: {
        f: 'A'
    },
    10935: {
        f: 'A'
    },
    10936: {
        f: 'A'
    },
    10937: {
        f: 'A'
    },
    10938: {
        f: 'A'
    },
    10949: {
        f: 'A'
    },
    10950: {
        f: 'A'
    },
    10955: {
        f: 'A'
    },
    10956: {
        f: 'A'
    },
    12296: {
        c: '\\27E8'
    },
    12297: {
        c: '\\27E9'
    },
    57350: {
        f: 'A'
    },
    57351: {
        f: 'A'
    },
    57352: {
        f: 'A'
    },
    57353: {
        f: 'A'
    },
    57356: {
        f: 'A'
    },
    57357: {
        f: 'A'
    },
    57358: {
        f: 'A'
    },
    57359: {
        f: 'A'
    },
    57360: {
        f: 'A'
    },
    57361: {
        f: 'A'
    },
    57366: {
        f: 'A'
    },
    57367: {
        f: 'A'
    },
    57368: {
        f: 'A'
    },
    57369: {
        f: 'A'
    },
    57370: {
        f: 'A'
    },
    57371: {
        f: 'A'
    },
    119808: {
        c: 'A',
        f: 'B'
    },
    119809: {
        c: 'B',
        f: 'B'
    },
    119810: {
        c: 'C',
        f: 'B'
    },
    119811: {
        c: 'D',
        f: 'B'
    },
    119812: {
        c: 'E',
        f: 'B'
    },
    119813: {
        c: 'F',
        f: 'B'
    },
    119814: {
        c: 'G',
        f: 'B'
    },
    119815: {
        c: 'H',
        f: 'B'
    },
    119816: {
        c: 'I',
        f: 'B'
    },
    119817: {
        c: 'J',
        f: 'B'
    },
    119818: {
        c: 'K',
        f: 'B'
    },
    119819: {
        c: 'L',
        f: 'B'
    },
    119820: {
        c: 'M',
        f: 'B'
    },
    119821: {
        c: 'N',
        f: 'B'
    },
    119822: {
        c: 'O',
        f: 'B'
    },
    119823: {
        c: 'P',
        f: 'B'
    },
    119824: {
        c: 'Q',
        f: 'B'
    },
    119825: {
        c: 'R',
        f: 'B'
    },
    119826: {
        c: 'S',
        f: 'B'
    },
    119827: {
        c: 'T',
        f: 'B'
    },
    119828: {
        c: 'U',
        f: 'B'
    },
    119829: {
        c: 'V',
        f: 'B'
    },
    119830: {
        c: 'W',
        f: 'B'
    },
    119831: {
        c: 'X',
        f: 'B'
    },
    119832: {
        c: 'Y',
        f: 'B'
    },
    119833: {
        c: 'Z',
        f: 'B'
    },
    119834: {
        c: 'a',
        f: 'B'
    },
    119835: {
        c: 'b',
        f: 'B'
    },
    119836: {
        c: 'c',
        f: 'B'
    },
    119837: {
        c: 'd',
        f: 'B'
    },
    119838: {
        c: 'e',
        f: 'B'
    },
    119839: {
        c: 'f',
        f: 'B'
    },
    119840: {
        c: 'g',
        f: 'B'
    },
    119841: {
        c: 'h',
        f: 'B'
    },
    119842: {
        c: 'i',
        f: 'B'
    },
    119843: {
        c: 'j',
        f: 'B'
    },
    119844: {
        c: 'k',
        f: 'B'
    },
    119845: {
        c: 'l',
        f: 'B'
    },
    119846: {
        c: 'm',
        f: 'B'
    },
    119847: {
        c: 'n',
        f: 'B'
    },
    119848: {
        c: 'o',
        f: 'B'
    },
    119849: {
        c: 'p',
        f: 'B'
    },
    119850: {
        c: 'q',
        f: 'B'
    },
    119851: {
        c: 'r',
        f: 'B'
    },
    119852: {
        c: 's',
        f: 'B'
    },
    119853: {
        c: 't',
        f: 'B'
    },
    119854: {
        c: 'u',
        f: 'B'
    },
    119855: {
        c: 'v',
        f: 'B'
    },
    119856: {
        c: 'w',
        f: 'B'
    },
    119857: {
        c: 'x',
        f: 'B'
    },
    119858: {
        c: 'y',
        f: 'B'
    },
    119859: {
        c: 'z',
        f: 'B'
    },
    119860: {
        c: 'A',
        f: 'I'
    },
    119861: {
        c: 'B',
        f: 'I'
    },
    119862: {
        c: 'C',
        f: 'I'
    },
    119863: {
        c: 'D',
        f: 'I'
    },
    119864: {
        c: 'E',
        f: 'I'
    },
    119865: {
        c: 'F',
        f: 'I'
    },
    119866: {
        c: 'G',
        f: 'I'
    },
    119867: {
        c: 'H',
        f: 'I'
    },
    119868: {
        c: 'I',
        f: 'I'
    },
    119869: {
        c: 'J',
        f: 'I'
    },
    119870: {
        c: 'K',
        f: 'I'
    },
    119871: {
        c: 'L',
        f: 'I'
    },
    119872: {
        c: 'M',
        f: 'I'
    },
    119873: {
        c: 'N',
        f: 'I'
    },
    119874: {
        c: 'O',
        f: 'I'
    },
    119875: {
        c: 'P',
        f: 'I'
    },
    119876: {
        c: 'Q',
        f: 'I'
    },
    119877: {
        c: 'R',
        f: 'I'
    },
    119878: {
        c: 'S',
        f: 'I'
    },
    119879: {
        c: 'T',
        f: 'I'
    },
    119880: {
        c: 'U',
        f: 'I'
    },
    119881: {
        c: 'V',
        f: 'I'
    },
    119882: {
        c: 'W',
        f: 'I'
    },
    119883: {
        c: 'X',
        f: 'I'
    },
    119884: {
        c: 'Y',
        f: 'I'
    },
    119885: {
        c: 'Z',
        f: 'I'
    },
    119886: {
        c: 'a',
        f: 'I'
    },
    119887: {
        c: 'b',
        f: 'I'
    },
    119888: {
        c: 'c',
        f: 'I'
    },
    119889: {
        c: 'd',
        f: 'I'
    },
    119890: {
        c: 'e',
        f: 'I'
    },
    119891: {
        c: 'f',
        f: 'I'
    },
    119892: {
        c: 'g',
        f: 'I'
    },
    119894: {
        c: 'i',
        f: 'I'
    },
    119895: {
        c: 'j',
        f: 'I'
    },
    119896: {
        c: 'k',
        f: 'I'
    },
    119897: {
        c: 'l',
        f: 'I'
    },
    119898: {
        c: 'm',
        f: 'I'
    },
    119899: {
        c: 'n',
        f: 'I'
    },
    119900: {
        c: 'o',
        f: 'I'
    },
    119901: {
        c: 'p',
        f: 'I'
    },
    119902: {
        c: 'q',
        f: 'I'
    },
    119903: {
        c: 'r',
        f: 'I'
    },
    119904: {
        c: 's',
        f: 'I'
    },
    119905: {
        c: 't',
        f: 'I'
    },
    119906: {
        c: 'u',
        f: 'I'
    },
    119907: {
        c: 'v',
        f: 'I'
    },
    119908: {
        c: 'w',
        f: 'I'
    },
    119909: {
        c: 'x',
        f: 'I'
    },
    119910: {
        c: 'y',
        f: 'I'
    },
    119911: {
        c: 'z',
        f: 'I'
    },
    119912: {
        c: 'A',
        f: 'BI'
    },
    119913: {
        c: 'B',
        f: 'BI'
    },
    119914: {
        c: 'C',
        f: 'BI'
    },
    119915: {
        c: 'D',
        f: 'BI'
    },
    119916: {
        c: 'E',
        f: 'BI'
    },
    119917: {
        c: 'F',
        f: 'BI'
    },
    119918: {
        c: 'G',
        f: 'BI'
    },
    119919: {
        c: 'H',
        f: 'BI'
    },
    119920: {
        c: 'I',
        f: 'BI'
    },
    119921: {
        c: 'J',
        f: 'BI'
    },
    119922: {
        c: 'K',
        f: 'BI'
    },
    119923: {
        c: 'L',
        f: 'BI'
    },
    119924: {
        c: 'M',
        f: 'BI'
    },
    119925: {
        c: 'N',
        f: 'BI'
    },
    119926: {
        c: 'O',
        f: 'BI'
    },
    119927: {
        c: 'P',
        f: 'BI'
    },
    119928: {
        c: 'Q',
        f: 'BI'
    },
    119929: {
        c: 'R',
        f: 'BI'
    },
    119930: {
        c: 'S',
        f: 'BI'
    },
    119931: {
        c: 'T',
        f: 'BI'
    },
    119932: {
        c: 'U',
        f: 'BI'
    },
    119933: {
        c: 'V',
        f: 'BI'
    },
    119934: {
        c: 'W',
        f: 'BI'
    },
    119935: {
        c: 'X',
        f: 'BI'
    },
    119936: {
        c: 'Y',
        f: 'BI'
    },
    119937: {
        c: 'Z',
        f: 'BI'
    },
    119938: {
        c: 'a',
        f: 'BI'
    },
    119939: {
        c: 'b',
        f: 'BI'
    },
    119940: {
        c: 'c',
        f: 'BI'
    },
    119941: {
        c: 'd',
        f: 'BI'
    },
    119942: {
        c: 'e',
        f: 'BI'
    },
    119943: {
        c: 'f',
        f: 'BI'
    },
    119944: {
        c: 'g',
        f: 'BI'
    },
    119945: {
        c: 'h',
        f: 'BI'
    },
    119946: {
        c: 'i',
        f: 'BI'
    },
    119947: {
        c: 'j',
        f: 'BI'
    },
    119948: {
        c: 'k',
        f: 'BI'
    },
    119949: {
        c: 'l',
        f: 'BI'
    },
    119950: {
        c: 'm',
        f: 'BI'
    },
    119951: {
        c: 'n',
        f: 'BI'
    },
    119952: {
        c: 'o',
        f: 'BI'
    },
    119953: {
        c: 'p',
        f: 'BI'
    },
    119954: {
        c: 'q',
        f: 'BI'
    },
    119955: {
        c: 'r',
        f: 'BI'
    },
    119956: {
        c: 's',
        f: 'BI'
    },
    119957: {
        c: 't',
        f: 'BI'
    },
    119958: {
        c: 'u',
        f: 'BI'
    },
    119959: {
        c: 'v',
        f: 'BI'
    },
    119960: {
        c: 'w',
        f: 'BI'
    },
    119961: {
        c: 'x',
        f: 'BI'
    },
    119962: {
        c: 'y',
        f: 'BI'
    },
    119963: {
        c: 'z',
        f: 'BI'
    },
    119964: {
        c: 'A',
        f: 'SC'
    },
    119966: {
        c: 'C',
        f: 'SC'
    },
    119967: {
        c: 'D',
        f: 'SC'
    },
    119970: {
        c: 'G',
        f: 'SC'
    },
    119973: {
        c: 'J',
        f: 'SC'
    },
    119974: {
        c: 'K',
        f: 'SC'
    },
    119977: {
        c: 'N',
        f: 'SC'
    },
    119978: {
        c: 'O',
        f: 'SC'
    },
    119979: {
        c: 'P',
        f: 'SC'
    },
    119980: {
        c: 'Q',
        f: 'SC'
    },
    119982: {
        c: 'S',
        f: 'SC'
    },
    119983: {
        c: 'T',
        f: 'SC'
    },
    119984: {
        c: 'U',
        f: 'SC'
    },
    119985: {
        c: 'V',
        f: 'SC'
    },
    119986: {
        c: 'W',
        f: 'SC'
    },
    119987: {
        c: 'X',
        f: 'SC'
    },
    119988: {
        c: 'Y',
        f: 'SC'
    },
    119989: {
        c: 'Z',
        f: 'SC'
    },
    120068: {
        c: 'A',
        f: 'FR'
    },
    120069: {
        c: 'B',
        f: 'FR'
    },
    120071: {
        c: 'D',
        f: 'FR'
    },
    120072: {
        c: 'E',
        f: 'FR'
    },
    120073: {
        c: 'F',
        f: 'FR'
    },
    120074: {
        c: 'G',
        f: 'FR'
    },
    120077: {
        c: 'J',
        f: 'FR'
    },
    120078: {
        c: 'K',
        f: 'FR'
    },
    120079: {
        c: 'L',
        f: 'FR'
    },
    120080: {
        c: 'M',
        f: 'FR'
    },
    120081: {
        c: 'N',
        f: 'FR'
    },
    120082: {
        c: 'O',
        f: 'FR'
    },
    120083: {
        c: 'P',
        f: 'FR'
    },
    120084: {
        c: 'Q',
        f: 'FR'
    },
    120086: {
        c: 'S',
        f: 'FR'
    },
    120087: {
        c: 'T',
        f: 'FR'
    },
    120088: {
        c: 'U',
        f: 'FR'
    },
    120089: {
        c: 'V',
        f: 'FR'
    },
    120090: {
        c: 'W',
        f: 'FR'
    },
    120091: {
        c: 'X',
        f: 'FR'
    },
    120092: {
        c: 'Y',
        f: 'FR'
    },
    120094: {
        c: 'a',
        f: 'FR'
    },
    120095: {
        c: 'b',
        f: 'FR'
    },
    120096: {
        c: 'c',
        f: 'FR'
    },
    120097: {
        c: 'd',
        f: 'FR'
    },
    120098: {
        c: 'e',
        f: 'FR'
    },
    120099: {
        c: 'f',
        f: 'FR'
    },
    120100: {
        c: 'g',
        f: 'FR'
    },
    120101: {
        c: 'h',
        f: 'FR'
    },
    120102: {
        c: 'i',
        f: 'FR'
    },
    120103: {
        c: 'j',
        f: 'FR'
    },
    120104: {
        c: 'k',
        f: 'FR'
    },
    120105: {
        c: 'l',
        f: 'FR'
    },
    120106: {
        c: 'm',
        f: 'FR'
    },
    120107: {
        c: 'n',
        f: 'FR'
    },
    120108: {
        c: 'o',
        f: 'FR'
    },
    120109: {
        c: 'p',
        f: 'FR'
    },
    120110: {
        c: 'q',
        f: 'FR'
    },
    120111: {
        c: 'r',
        f: 'FR'
    },
    120112: {
        c: 's',
        f: 'FR'
    },
    120113: {
        c: 't',
        f: 'FR'
    },
    120114: {
        c: 'u',
        f: 'FR'
    },
    120115: {
        c: 'v',
        f: 'FR'
    },
    120116: {
        c: 'w',
        f: 'FR'
    },
    120117: {
        c: 'x',
        f: 'FR'
    },
    120118: {
        c: 'y',
        f: 'FR'
    },
    120119: {
        c: 'z',
        f: 'FR'
    },
    120120: {
        c: 'A',
        f: 'A'
    },
    120121: {
        c: 'B',
        f: 'A'
    },
    120123: {
        c: 'D',
        f: 'A'
    },
    120124: {
        c: 'E',
        f: 'A'
    },
    120125: {
        c: 'F',
        f: 'A'
    },
    120126: {
        c: 'G',
        f: 'A'
    },
    120128: {
        c: 'I',
        f: 'A'
    },
    120129: {
        c: 'J',
        f: 'A'
    },
    120130: {
        c: 'K',
        f: 'A'
    },
    120131: {
        c: 'L',
        f: 'A'
    },
    120132: {
        c: 'M',
        f: 'A'
    },
    120134: {
        c: 'O',
        f: 'A'
    },
    120138: {
        c: 'S',
        f: 'A'
    },
    120139: {
        c: 'T',
        f: 'A'
    },
    120140: {
        c: 'U',
        f: 'A'
    },
    120141: {
        c: 'V',
        f: 'A'
    },
    120142: {
        c: 'W',
        f: 'A'
    },
    120143: {
        c: 'X',
        f: 'A'
    },
    120144: {
        c: 'Y',
        f: 'A'
    },
    120172: {
        c: 'A',
        f: 'FRB'
    },
    120173: {
        c: 'B',
        f: 'FRB'
    },
    120174: {
        c: 'C',
        f: 'FRB'
    },
    120175: {
        c: 'D',
        f: 'FRB'
    },
    120176: {
        c: 'E',
        f: 'FRB'
    },
    120177: {
        c: 'F',
        f: 'FRB'
    },
    120178: {
        c: 'G',
        f: 'FRB'
    },
    120179: {
        c: 'H',
        f: 'FRB'
    },
    120180: {
        c: 'I',
        f: 'FRB'
    },
    120181: {
        c: 'J',
        f: 'FRB'
    },
    120182: {
        c: 'K',
        f: 'FRB'
    },
    120183: {
        c: 'L',
        f: 'FRB'
    },
    120184: {
        c: 'M',
        f: 'FRB'
    },
    120185: {
        c: 'N',
        f: 'FRB'
    },
    120186: {
        c: 'O',
        f: 'FRB'
    },
    120187: {
        c: 'P',
        f: 'FRB'
    },
    120188: {
        c: 'Q',
        f: 'FRB'
    },
    120189: {
        c: 'R',
        f: 'FRB'
    },
    120190: {
        c: 'S',
        f: 'FRB'
    },
    120191: {
        c: 'T',
        f: 'FRB'
    },
    120192: {
        c: 'U',
        f: 'FRB'
    },
    120193: {
        c: 'V',
        f: 'FRB'
    },
    120194: {
        c: 'W',
        f: 'FRB'
    },
    120195: {
        c: 'X',
        f: 'FRB'
    },
    120196: {
        c: 'Y',
        f: 'FRB'
    },
    120197: {
        c: 'Z',
        f: 'FRB'
    },
    120198: {
        c: 'a',
        f: 'FRB'
    },
    120199: {
        c: 'b',
        f: 'FRB'
    },
    120200: {
        c: 'c',
        f: 'FRB'
    },
    120201: {
        c: 'd',
        f: 'FRB'
    },
    120202: {
        c: 'e',
        f: 'FRB'
    },
    120203: {
        c: 'f',
        f: 'FRB'
    },
    120204: {
        c: 'g',
        f: 'FRB'
    },
    120205: {
        c: 'h',
        f: 'FRB'
    },
    120206: {
        c: 'i',
        f: 'FRB'
    },
    120207: {
        c: 'j',
        f: 'FRB'
    },
    120208: {
        c: 'k',
        f: 'FRB'
    },
    120209: {
        c: 'l',
        f: 'FRB'
    },
    120210: {
        c: 'm',
        f: 'FRB'
    },
    120211: {
        c: 'n',
        f: 'FRB'
    },
    120212: {
        c: 'o',
        f: 'FRB'
    },
    120213: {
        c: 'p',
        f: 'FRB'
    },
    120214: {
        c: 'q',
        f: 'FRB'
    },
    120215: {
        c: 'r',
        f: 'FRB'
    },
    120216: {
        c: 's',
        f: 'FRB'
    },
    120217: {
        c: 't',
        f: 'FRB'
    },
    120218: {
        c: 'u',
        f: 'FRB'
    },
    120219: {
        c: 'v',
        f: 'FRB'
    },
    120220: {
        c: 'w',
        f: 'FRB'
    },
    120221: {
        c: 'x',
        f: 'FRB'
    },
    120222: {
        c: 'y',
        f: 'FRB'
    },
    120223: {
        c: 'z',
        f: 'FRB'
    },
    120224: {
        c: 'A',
        f: 'SS'
    },
    120225: {
        c: 'B',
        f: 'SS'
    },
    120226: {
        c: 'C',
        f: 'SS'
    },
    120227: {
        c: 'D',
        f: 'SS'
    },
    120228: {
        c: 'E',
        f: 'SS'
    },
    120229: {
        c: 'F',
        f: 'SS'
    },
    120230: {
        c: 'G',
        f: 'SS'
    },
    120231: {
        c: 'H',
        f: 'SS'
    },
    120232: {
        c: 'I',
        f: 'SS'
    },
    120233: {
        c: 'J',
        f: 'SS'
    },
    120234: {
        c: 'K',
        f: 'SS'
    },
    120235: {
        c: 'L',
        f: 'SS'
    },
    120236: {
        c: 'M',
        f: 'SS'
    },
    120237: {
        c: 'N',
        f: 'SS'
    },
    120238: {
        c: 'O',
        f: 'SS'
    },
    120239: {
        c: 'P',
        f: 'SS'
    },
    120240: {
        c: 'Q',
        f: 'SS'
    },
    120241: {
        c: 'R',
        f: 'SS'
    },
    120242: {
        c: 'S',
        f: 'SS'
    },
    120243: {
        c: 'T',
        f: 'SS'
    },
    120244: {
        c: 'U',
        f: 'SS'
    },
    120245: {
        c: 'V',
        f: 'SS'
    },
    120246: {
        c: 'W',
        f: 'SS'
    },
    120247: {
        c: 'X',
        f: 'SS'
    },
    120248: {
        c: 'Y',
        f: 'SS'
    },
    120249: {
        c: 'Z',
        f: 'SS'
    },
    120250: {
        c: 'a',
        f: 'SS'
    },
    120251: {
        c: 'b',
        f: 'SS'
    },
    120252: {
        c: 'c',
        f: 'SS'
    },
    120253: {
        c: 'd',
        f: 'SS'
    },
    120254: {
        c: 'e',
        f: 'SS'
    },
    120255: {
        c: 'f',
        f: 'SS'
    },
    120256: {
        c: 'g',
        f: 'SS'
    },
    120257: {
        c: 'h',
        f: 'SS'
    },
    120258: {
        c: 'i',
        f: 'SS'
    },
    120259: {
        c: 'j',
        f: 'SS'
    },
    120260: {
        c: 'k',
        f: 'SS'
    },
    120261: {
        c: 'l',
        f: 'SS'
    },
    120262: {
        c: 'm',
        f: 'SS'
    },
    120263: {
        c: 'n',
        f: 'SS'
    },
    120264: {
        c: 'o',
        f: 'SS'
    },
    120265: {
        c: 'p',
        f: 'SS'
    },
    120266: {
        c: 'q',
        f: 'SS'
    },
    120267: {
        c: 'r',
        f: 'SS'
    },
    120268: {
        c: 's',
        f: 'SS'
    },
    120269: {
        c: 't',
        f: 'SS'
    },
    120270: {
        c: 'u',
        f: 'SS'
    },
    120271: {
        c: 'v',
        f: 'SS'
    },
    120272: {
        c: 'w',
        f: 'SS'
    },
    120273: {
        c: 'x',
        f: 'SS'
    },
    120274: {
        c: 'y',
        f: 'SS'
    },
    120275: {
        c: 'z',
        f: 'SS'
    },
    120276: {
        c: 'A',
        f: 'SSB'
    },
    120277: {
        c: 'B',
        f: 'SSB'
    },
    120278: {
        c: 'C',
        f: 'SSB'
    },
    120279: {
        c: 'D',
        f: 'SSB'
    },
    120280: {
        c: 'E',
        f: 'SSB'
    },
    120281: {
        c: 'F',
        f: 'SSB'
    },
    120282: {
        c: 'G',
        f: 'SSB'
    },
    120283: {
        c: 'H',
        f: 'SSB'
    },
    120284: {
        c: 'I',
        f: 'SSB'
    },
    120285: {
        c: 'J',
        f: 'SSB'
    },
    120286: {
        c: 'K',
        f: 'SSB'
    },
    120287: {
        c: 'L',
        f: 'SSB'
    },
    120288: {
        c: 'M',
        f: 'SSB'
    },
    120289: {
        c: 'N',
        f: 'SSB'
    },
    120290: {
        c: 'O',
        f: 'SSB'
    },
    120291: {
        c: 'P',
        f: 'SSB'
    },
    120292: {
        c: 'Q',
        f: 'SSB'
    },
    120293: {
        c: 'R',
        f: 'SSB'
    },
    120294: {
        c: 'S',
        f: 'SSB'
    },
    120295: {
        c: 'T',
        f: 'SSB'
    },
    120296: {
        c: 'U',
        f: 'SSB'
    },
    120297: {
        c: 'V',
        f: 'SSB'
    },
    120298: {
        c: 'W',
        f: 'SSB'
    },
    120299: {
        c: 'X',
        f: 'SSB'
    },
    120300: {
        c: 'Y',
        f: 'SSB'
    },
    120301: {
        c: 'Z',
        f: 'SSB'
    },
    120302: {
        c: 'a',
        f: 'SSB'
    },
    120303: {
        c: 'b',
        f: 'SSB'
    },
    120304: {
        c: 'c',
        f: 'SSB'
    },
    120305: {
        c: 'd',
        f: 'SSB'
    },
    120306: {
        c: 'e',
        f: 'SSB'
    },
    120307: {
        c: 'f',
        f: 'SSB'
    },
    120308: {
        c: 'g',
        f: 'SSB'
    },
    120309: {
        c: 'h',
        f: 'SSB'
    },
    120310: {
        c: 'i',
        f: 'SSB'
    },
    120311: {
        c: 'j',
        f: 'SSB'
    },
    120312: {
        c: 'k',
        f: 'SSB'
    },
    120313: {
        c: 'l',
        f: 'SSB'
    },
    120314: {
        c: 'm',
        f: 'SSB'
    },
    120315: {
        c: 'n',
        f: 'SSB'
    },
    120316: {
        c: 'o',
        f: 'SSB'
    },
    120317: {
        c: 'p',
        f: 'SSB'
    },
    120318: {
        c: 'q',
        f: 'SSB'
    },
    120319: {
        c: 'r',
        f: 'SSB'
    },
    120320: {
        c: 's',
        f: 'SSB'
    },
    120321: {
        c: 't',
        f: 'SSB'
    },
    120322: {
        c: 'u',
        f: 'SSB'
    },
    120323: {
        c: 'v',
        f: 'SSB'
    },
    120324: {
        c: 'w',
        f: 'SSB'
    },
    120325: {
        c: 'x',
        f: 'SSB'
    },
    120326: {
        c: 'y',
        f: 'SSB'
    },
    120327: {
        c: 'z',
        f: 'SSB'
    },
    120328: {
        c: 'A',
        f: 'SSI'
    },
    120329: {
        c: 'B',
        f: 'SSI'
    },
    120330: {
        c: 'C',
        f: 'SSI'
    },
    120331: {
        c: 'D',
        f: 'SSI'
    },
    120332: {
        c: 'E',
        f: 'SSI'
    },
    120333: {
        c: 'F',
        f: 'SSI'
    },
    120334: {
        c: 'G',
        f: 'SSI'
    },
    120335: {
        c: 'H',
        f: 'SSI'
    },
    120336: {
        c: 'I',
        f: 'SSI'
    },
    120337: {
        c: 'J',
        f: 'SSI'
    },
    120338: {
        c: 'K',
        f: 'SSI'
    },
    120339: {
        c: 'L',
        f: 'SSI'
    },
    120340: {
        c: 'M',
        f: 'SSI'
    },
    120341: {
        c: 'N',
        f: 'SSI'
    },
    120342: {
        c: 'O',
        f: 'SSI'
    },
    120343: {
        c: 'P',
        f: 'SSI'
    },
    120344: {
        c: 'Q',
        f: 'SSI'
    },
    120345: {
        c: 'R',
        f: 'SSI'
    },
    120346: {
        c: 'S',
        f: 'SSI'
    },
    120347: {
        c: 'T',
        f: 'SSI'
    },
    120348: {
        c: 'U',
        f: 'SSI'
    },
    120349: {
        c: 'V',
        f: 'SSI'
    },
    120350: {
        c: 'W',
        f: 'SSI'
    },
    120351: {
        c: 'X',
        f: 'SSI'
    },
    120352: {
        c: 'Y',
        f: 'SSI'
    },
    120353: {
        c: 'Z',
        f: 'SSI'
    },
    120354: {
        c: 'a',
        f: 'SSI'
    },
    120355: {
        c: 'b',
        f: 'SSI'
    },
    120356: {
        c: 'c',
        f: 'SSI'
    },
    120357: {
        c: 'd',
        f: 'SSI'
    },
    120358: {
        c: 'e',
        f: 'SSI'
    },
    120359: {
        c: 'f',
        f: 'SSI'
    },
    120360: {
        c: 'g',
        f: 'SSI'
    },
    120361: {
        c: 'h',
        f: 'SSI'
    },
    120362: {
        c: 'i',
        f: 'SSI'
    },
    120363: {
        c: 'j',
        f: 'SSI'
    },
    120364: {
        c: 'k',
        f: 'SSI'
    },
    120365: {
        c: 'l',
        f: 'SSI'
    },
    120366: {
        c: 'm',
        f: 'SSI'
    },
    120367: {
        c: 'n',
        f: 'SSI'
    },
    120368: {
        c: 'o',
        f: 'SSI'
    },
    120369: {
        c: 'p',
        f: 'SSI'
    },
    120370: {
        c: 'q',
        f: 'SSI'
    },
    120371: {
        c: 'r',
        f: 'SSI'
    },
    120372: {
        c: 's',
        f: 'SSI'
    },
    120373: {
        c: 't',
        f: 'SSI'
    },
    120374: {
        c: 'u',
        f: 'SSI'
    },
    120375: {
        c: 'v',
        f: 'SSI'
    },
    120376: {
        c: 'w',
        f: 'SSI'
    },
    120377: {
        c: 'x',
        f: 'SSI'
    },
    120378: {
        c: 'y',
        f: 'SSI'
    },
    120379: {
        c: 'z',
        f: 'SSI'
    },
    120432: {
        c: 'A',
        f: 'T'
    },
    120433: {
        c: 'B',
        f: 'T'
    },
    120434: {
        c: 'C',
        f: 'T'
    },
    120435: {
        c: 'D',
        f: 'T'
    },
    120436: {
        c: 'E',
        f: 'T'
    },
    120437: {
        c: 'F',
        f: 'T'
    },
    120438: {
        c: 'G',
        f: 'T'
    },
    120439: {
        c: 'H',
        f: 'T'
    },
    120440: {
        c: 'I',
        f: 'T'
    },
    120441: {
        c: 'J',
        f: 'T'
    },
    120442: {
        c: 'K',
        f: 'T'
    },
    120443: {
        c: 'L',
        f: 'T'
    },
    120444: {
        c: 'M',
        f: 'T'
    },
    120445: {
        c: 'N',
        f: 'T'
    },
    120446: {
        c: 'O',
        f: 'T'
    },
    120447: {
        c: 'P',
        f: 'T'
    },
    120448: {
        c: 'Q',
        f: 'T'
    },
    120449: {
        c: 'R',
        f: 'T'
    },
    120450: {
        c: 'S',
        f: 'T'
    },
    120451: {
        c: 'T',
        f: 'T'
    },
    120452: {
        c: 'U',
        f: 'T'
    },
    120453: {
        c: 'V',
        f: 'T'
    },
    120454: {
        c: 'W',
        f: 'T'
    },
    120455: {
        c: 'X',
        f: 'T'
    },
    120456: {
        c: 'Y',
        f: 'T'
    },
    120457: {
        c: 'Z',
        f: 'T'
    },
    120458: {
        c: 'a',
        f: 'T'
    },
    120459: {
        c: 'b',
        f: 'T'
    },
    120460: {
        c: 'c',
        f: 'T'
    },
    120461: {
        c: 'd',
        f: 'T'
    },
    120462: {
        c: 'e',
        f: 'T'
    },
    120463: {
        c: 'f',
        f: 'T'
    },
    120464: {
        c: 'g',
        f: 'T'
    },
    120465: {
        c: 'h',
        f: 'T'
    },
    120466: {
        c: 'i',
        f: 'T'
    },
    120467: {
        c: 'j',
        f: 'T'
    },
    120468: {
        c: 'k',
        f: 'T'
    },
    120469: {
        c: 'l',
        f: 'T'
    },
    120470: {
        c: 'm',
        f: 'T'
    },
    120471: {
        c: 'n',
        f: 'T'
    },
    120472: {
        c: 'o',
        f: 'T'
    },
    120473: {
        c: 'p',
        f: 'T'
    },
    120474: {
        c: 'q',
        f: 'T'
    },
    120475: {
        c: 'r',
        f: 'T'
    },
    120476: {
        c: 's',
        f: 'T'
    },
    120477: {
        c: 't',
        f: 'T'
    },
    120478: {
        c: 'u',
        f: 'T'
    },
    120479: {
        c: 'v',
        f: 'T'
    },
    120480: {
        c: 'w',
        f: 'T'
    },
    120481: {
        c: 'x',
        f: 'T'
    },
    120482: {
        c: 'y',
        f: 'T'
    },
    120483: {
        c: 'z',
        f: 'T'
    },
    120488: {
        c: 'A',
        f: 'B'
    },
    120489: {
        c: 'B',
        f: 'B'
    },
    120490: {
        c: '\\393',
        f: 'B'
    },
    120491: {
        c: '\\394',
        f: 'B'
    },
    120492: {
        c: 'E',
        f: 'B'
    },
    120493: {
        c: 'Z',
        f: 'B'
    },
    120494: {
        c: 'H',
        f: 'B'
    },
    120495: {
        c: '\\398',
        f: 'B'
    },
    120496: {
        c: 'I',
        f: 'B'
    },
    120497: {
        c: 'K',
        f: 'B'
    },
    120498: {
        c: '\\39B',
        f: 'B'
    },
    120499: {
        c: 'M',
        f: 'B'
    },
    120500: {
        c: 'N',
        f: 'B'
    },
    120501: {
        c: '\\39E',
        f: 'B'
    },
    120502: {
        c: 'O',
        f: 'B'
    },
    120503: {
        c: '\\3A0',
        f: 'B'
    },
    120504: {
        c: 'P',
        f: 'B'
    },
    120506: {
        c: '\\3A3',
        f: 'B'
    },
    120507: {
        c: 'T',
        f: 'B'
    },
    120508: {
        c: '\\3A5',
        f: 'B'
    },
    120509: {
        c: '\\3A6',
        f: 'B'
    },
    120510: {
        c: 'X',
        f: 'B'
    },
    120511: {
        c: '\\3A8',
        f: 'B'
    },
    120512: {
        c: '\\3A9',
        f: 'B'
    },
    120513: {
        c: '\\2207',
        f: 'B'
    },
    120546: {
        c: 'A',
        f: 'I'
    },
    120547: {
        c: 'B',
        f: 'I'
    },
    120548: {
        c: '\\393',
        f: 'I'
    },
    120549: {
        c: '\\394',
        f: 'I'
    },
    120550: {
        c: 'E',
        f: 'I'
    },
    120551: {
        c: 'Z',
        f: 'I'
    },
    120552: {
        c: 'H',
        f: 'I'
    },
    120553: {
        c: '\\398',
        f: 'I'
    },
    120554: {
        c: 'I',
        f: 'I'
    },
    120555: {
        c: 'K',
        f: 'I'
    },
    120556: {
        c: '\\39B',
        f: 'I'
    },
    120557: {
        c: 'M',
        f: 'I'
    },
    120558: {
        c: 'N',
        f: 'I'
    },
    120559: {
        c: '\\39E',
        f: 'I'
    },
    120560: {
        c: 'O',
        f: 'I'
    },
    120561: {
        c: '\\3A0',
        f: 'I'
    },
    120562: {
        c: 'P',
        f: 'I'
    },
    120564: {
        c: '\\3A3',
        f: 'I'
    },
    120565: {
        c: 'T',
        f: 'I'
    },
    120566: {
        c: '\\3A5',
        f: 'I'
    },
    120567: {
        c: '\\3A6',
        f: 'I'
    },
    120568: {
        c: 'X',
        f: 'I'
    },
    120569: {
        c: '\\3A8',
        f: 'I'
    },
    120570: {
        c: '\\3A9',
        f: 'I'
    },
    120572: {
        c: '\\3B1',
        f: 'I'
    },
    120573: {
        c: '\\3B2',
        f: 'I'
    },
    120574: {
        c: '\\3B3',
        f: 'I'
    },
    120575: {
        c: '\\3B4',
        f: 'I'
    },
    120576: {
        c: '\\3B5',
        f: 'I'
    },
    120577: {
        c: '\\3B6',
        f: 'I'
    },
    120578: {
        c: '\\3B7',
        f: 'I'
    },
    120579: {
        c: '\\3B8',
        f: 'I'
    },
    120580: {
        c: '\\3B9',
        f: 'I'
    },
    120581: {
        c: '\\3BA',
        f: 'I'
    },
    120582: {
        c: '\\3BB',
        f: 'I'
    },
    120583: {
        c: '\\3BC',
        f: 'I'
    },
    120584: {
        c: '\\3BD',
        f: 'I'
    },
    120585: {
        c: '\\3BE',
        f: 'I'
    },
    120586: {
        c: '\\3BF',
        f: 'I'
    },
    120587: {
        c: '\\3C0',
        f: 'I'
    },
    120588: {
        c: '\\3C1',
        f: 'I'
    },
    120589: {
        c: '\\3C2',
        f: 'I'
    },
    120590: {
        c: '\\3C3',
        f: 'I'
    },
    120591: {
        c: '\\3C4',
        f: 'I'
    },
    120592: {
        c: '\\3C5',
        f: 'I'
    },
    120593: {
        c: '\\3C6',
        f: 'I'
    },
    120594: {
        c: '\\3C7',
        f: 'I'
    },
    120595: {
        c: '\\3C8',
        f: 'I'
    },
    120596: {
        c: '\\3C9',
        f: 'I'
    },
    120597: {
        c: '\\2202'
    },
    120598: {
        c: '\\3F5',
        f: 'I'
    },
    120599: {
        c: '\\3D1',
        f: 'I'
    },
    120600: {
        c: '\\E009',
        f: 'A'
    },
    120601: {
        c: '\\3D5',
        f: 'I'
    },
    120602: {
        c: '\\3F1',
        f: 'I'
    },
    120603: {
        c: '\\3D6',
        f: 'I'
    },
    120604: {
        c: 'A',
        f: 'BI'
    },
    120605: {
        c: 'B',
        f: 'BI'
    },
    120606: {
        c: '\\393',
        f: 'BI'
    },
    120607: {
        c: '\\394',
        f: 'BI'
    },
    120608: {
        c: 'E',
        f: 'BI'
    },
    120609: {
        c: 'Z',
        f: 'BI'
    },
    120610: {
        c: 'H',
        f: 'BI'
    },
    120611: {
        c: '\\398',
        f: 'BI'
    },
    120612: {
        c: 'I',
        f: 'BI'
    },
    120613: {
        c: 'K',
        f: 'BI'
    },
    120614: {
        c: '\\39B',
        f: 'BI'
    },
    120615: {
        c: 'M',
        f: 'BI'
    },
    120616: {
        c: 'N',
        f: 'BI'
    },
    120617: {
        c: '\\39E',
        f: 'BI'
    },
    120618: {
        c: 'O',
        f: 'BI'
    },
    120619: {
        c: '\\3A0',
        f: 'BI'
    },
    120620: {
        c: 'P',
        f: 'BI'
    },
    120622: {
        c: '\\3A3',
        f: 'BI'
    },
    120623: {
        c: 'T',
        f: 'BI'
    },
    120624: {
        c: '\\3A5',
        f: 'BI'
    },
    120625: {
        c: '\\3A6',
        f: 'BI'
    },
    120626: {
        c: 'X',
        f: 'BI'
    },
    120627: {
        c: '\\3A8',
        f: 'BI'
    },
    120628: {
        c: '\\3A9',
        f: 'BI'
    },
    120630: {
        c: '\\3B1',
        f: 'BI'
    },
    120631: {
        c: '\\3B2',
        f: 'BI'
    },
    120632: {
        c: '\\3B3',
        f: 'BI'
    },
    120633: {
        c: '\\3B4',
        f: 'BI'
    },
    120634: {
        c: '\\3B5',
        f: 'BI'
    },
    120635: {
        c: '\\3B6',
        f: 'BI'
    },
    120636: {
        c: '\\3B7',
        f: 'BI'
    },
    120637: {
        c: '\\3B8',
        f: 'BI'
    },
    120638: {
        c: '\\3B9',
        f: 'BI'
    },
    120639: {
        c: '\\3BA',
        f: 'BI'
    },
    120640: {
        c: '\\3BB',
        f: 'BI'
    },
    120641: {
        c: '\\3BC',
        f: 'BI'
    },
    120642: {
        c: '\\3BD',
        f: 'BI'
    },
    120643: {
        c: '\\3BE',
        f: 'BI'
    },
    120644: {
        c: '\\3BF',
        f: 'BI'
    },
    120645: {
        c: '\\3C0',
        f: 'BI'
    },
    120646: {
        c: '\\3C1',
        f: 'BI'
    },
    120647: {
        c: '\\3C2',
        f: 'BI'
    },
    120648: {
        c: '\\3C3',
        f: 'BI'
    },
    120649: {
        c: '\\3C4',
        f: 'BI'
    },
    120650: {
        c: '\\3C5',
        f: 'BI'
    },
    120651: {
        c: '\\3C6',
        f: 'BI'
    },
    120652: {
        c: '\\3C7',
        f: 'BI'
    },
    120653: {
        c: '\\3C8',
        f: 'BI'
    },
    120654: {
        c: '\\3C9',
        f: 'BI'
    },
    120655: {
        c: '\\2202',
        f: 'B'
    },
    120656: {
        c: '\\3F5',
        f: 'BI'
    },
    120657: {
        c: '\\3D1',
        f: 'BI'
    },
    120658: {
        c: '\\E009',
        f: 'A'
    },
    120659: {
        c: '\\3D5',
        f: 'BI'
    },
    120660: {
        c: '\\3F1',
        f: 'BI'
    },
    120661: {
        c: '\\3D6',
        f: 'BI'
    },
    120662: {
        c: 'A',
        f: 'SSB'
    },
    120663: {
        c: 'B',
        f: 'SSB'
    },
    120664: {
        c: '\\393',
        f: 'SSB'
    },
    120665: {
        c: '\\394',
        f: 'SSB'
    },
    120666: {
        c: 'E',
        f: 'SSB'
    },
    120667: {
        c: 'Z',
        f: 'SSB'
    },
    120668: {
        c: 'H',
        f: 'SSB'
    },
    120669: {
        c: '\\398',
        f: 'SSB'
    },
    120670: {
        c: 'I',
        f: 'SSB'
    },
    120671: {
        c: 'K',
        f: 'SSB'
    },
    120672: {
        c: '\\39B',
        f: 'SSB'
    },
    120673: {
        c: 'M',
        f: 'SSB'
    },
    120674: {
        c: 'N',
        f: 'SSB'
    },
    120675: {
        c: '\\39E',
        f: 'SSB'
    },
    120676: {
        c: 'O',
        f: 'SSB'
    },
    120677: {
        c: '\\3A0',
        f: 'SSB'
    },
    120678: {
        c: 'P',
        f: 'SSB'
    },
    120680: {
        c: '\\3A3',
        f: 'SSB'
    },
    120681: {
        c: 'T',
        f: 'SSB'
    },
    120682: {
        c: '\\3A5',
        f: 'SSB'
    },
    120683: {
        c: '\\3A6',
        f: 'SSB'
    },
    120684: {
        c: 'X',
        f: 'SSB'
    },
    120685: {
        c: '\\3A8',
        f: 'SSB'
    },
    120686: {
        c: '\\3A9',
        f: 'SSB'
    },
    120782: {
        c: '0',
        f: 'B'
    },
    120783: {
        c: '1',
        f: 'B'
    },
    120784: {
        c: '2',
        f: 'B'
    },
    120785: {
        c: '3',
        f: 'B'
    },
    120786: {
        c: '4',
        f: 'B'
    },
    120787: {
        c: '5',
        f: 'B'
    },
    120788: {
        c: '6',
        f: 'B'
    },
    120789: {
        c: '7',
        f: 'B'
    },
    120790: {
        c: '8',
        f: 'B'
    },
    120791: {
        c: '9',
        f: 'B'
    },
    120802: {
        c: '0',
        f: 'SS'
    },
    120803: {
        c: '1',
        f: 'SS'
    },
    120804: {
        c: '2',
        f: 'SS'
    },
    120805: {
        c: '3',
        f: 'SS'
    },
    120806: {
        c: '4',
        f: 'SS'
    },
    120807: {
        c: '5',
        f: 'SS'
    },
    120808: {
        c: '6',
        f: 'SS'
    },
    120809: {
        c: '7',
        f: 'SS'
    },
    120810: {
        c: '8',
        f: 'SS'
    },
    120811: {
        c: '9',
        f: 'SS'
    },
    120812: {
        c: '0',
        f: 'SSB'
    },
    120813: {
        c: '1',
        f: 'SSB'
    },
    120814: {
        c: '2',
        f: 'SSB'
    },
    120815: {
        c: '3',
        f: 'SSB'
    },
    120816: {
        c: '4',
        f: 'SSB'
    },
    120817: {
        c: '5',
        f: 'SSB'
    },
    120818: {
        c: '6',
        f: 'SSB'
    },
    120819: {
        c: '7',
        f: 'SSB'
    },
    120820: {
        c: '8',
        f: 'SSB'
    },
    120821: {
        c: '9',
        f: 'SSB'
    },
    120822: {
        c: '0',
        f: 'T'
    },
    120823: {
        c: '1',
        f: 'T'
    },
    120824: {
        c: '2',
        f: 'T'
    },
    120825: {
        c: '3',
        f: 'T'
    },
    120826: {
        c: '4',
        f: 'T'
    },
    120827: {
        c: '5',
        f: 'T'
    },
    120828: {
        c: '6',
        f: 'T'
    },
    120829: {
        c: '7',
        f: 'T'
    },
    120830: {
        c: '8',
        f: 'T'
    },
    120831: {
        c: '9',
        f: 'T'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/normal.js":"2JNRM"}],"2JNRM":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.normal = void 0;
exports.normal = {
    32: [
        0,
        0,
        0.25
    ],
    33: [
        0.716,
        0,
        0.278
    ],
    34: [
        0.694,
        -0.379,
        0.5
    ],
    35: [
        0.694,
        0.194,
        0.833
    ],
    36: [
        0.75,
        0.056,
        0.5
    ],
    37: [
        0.75,
        0.056,
        0.833
    ],
    38: [
        0.716,
        0.022,
        0.778
    ],
    39: [
        0.694,
        -0.379,
        0.278
    ],
    40: [
        0.75,
        0.25,
        0.389
    ],
    41: [
        0.75,
        0.25,
        0.389
    ],
    42: [
        0.75,
        -0.32,
        0.5
    ],
    43: [
        0.583,
        0.082,
        0.778
    ],
    44: [
        0.121,
        0.194,
        0.278
    ],
    45: [
        0.252,
        -0.179,
        0.333
    ],
    46: [
        0.12,
        0,
        0.278
    ],
    47: [
        0.75,
        0.25,
        0.5
    ],
    48: [
        0.666,
        0.022,
        0.5
    ],
    49: [
        0.666,
        0,
        0.5
    ],
    50: [
        0.666,
        0,
        0.5
    ],
    51: [
        0.665,
        0.022,
        0.5
    ],
    52: [
        0.677,
        0,
        0.5
    ],
    53: [
        0.666,
        0.022,
        0.5
    ],
    54: [
        0.666,
        0.022,
        0.5
    ],
    55: [
        0.676,
        0.022,
        0.5
    ],
    56: [
        0.666,
        0.022,
        0.5
    ],
    57: [
        0.666,
        0.022,
        0.5
    ],
    58: [
        0.43,
        0,
        0.278
    ],
    59: [
        0.43,
        0.194,
        0.278
    ],
    60: [
        0.54,
        0.04,
        0.778
    ],
    61: [
        0.583,
        0.082,
        0.778
    ],
    62: [
        0.54,
        0.04,
        0.778
    ],
    63: [
        0.705,
        0,
        0.472
    ],
    64: [
        0.705,
        0.011,
        0.778
    ],
    65: [
        0.716,
        0,
        0.75
    ],
    66: [
        0.683,
        0,
        0.708
    ],
    67: [
        0.705,
        0.021,
        0.722
    ],
    68: [
        0.683,
        0,
        0.764
    ],
    69: [
        0.68,
        0,
        0.681
    ],
    70: [
        0.68,
        0,
        0.653
    ],
    71: [
        0.705,
        0.022,
        0.785
    ],
    72: [
        0.683,
        0,
        0.75
    ],
    73: [
        0.683,
        0,
        0.361
    ],
    74: [
        0.683,
        0.022,
        0.514
    ],
    75: [
        0.683,
        0,
        0.778
    ],
    76: [
        0.683,
        0,
        0.625
    ],
    77: [
        0.683,
        0,
        0.917
    ],
    78: [
        0.683,
        0,
        0.75
    ],
    79: [
        0.705,
        0.022,
        0.778
    ],
    80: [
        0.683,
        0,
        0.681
    ],
    81: [
        0.705,
        0.193,
        0.778
    ],
    82: [
        0.683,
        0.022,
        0.736
    ],
    83: [
        0.705,
        0.022,
        0.556
    ],
    84: [
        0.677,
        0,
        0.722
    ],
    85: [
        0.683,
        0.022,
        0.75
    ],
    86: [
        0.683,
        0.022,
        0.75
    ],
    87: [
        0.683,
        0.022,
        1.028
    ],
    88: [
        0.683,
        0,
        0.75
    ],
    89: [
        0.683,
        0,
        0.75
    ],
    90: [
        0.683,
        0,
        0.611
    ],
    91: [
        0.75,
        0.25,
        0.278
    ],
    92: [
        0.75,
        0.25,
        0.5
    ],
    93: [
        0.75,
        0.25,
        0.278
    ],
    94: [
        0.694,
        -0.531,
        0.5
    ],
    95: [
        -0.025,
        0.062,
        0.5
    ],
    96: [
        0.699,
        -0.505,
        0.5
    ],
    97: [
        0.448,
        0.011,
        0.5
    ],
    98: [
        0.694,
        0.011,
        0.556
    ],
    99: [
        0.448,
        0.011,
        0.444
    ],
    100: [
        0.694,
        0.011,
        0.556
    ],
    101: [
        0.448,
        0.011,
        0.444
    ],
    102: [
        0.705,
        0,
        0.306,
        {
            ic: 0.066
        }
    ],
    103: [
        0.453,
        0.206,
        0.5
    ],
    104: [
        0.694,
        0,
        0.556
    ],
    105: [
        0.669,
        0,
        0.278
    ],
    106: [
        0.669,
        0.205,
        0.306
    ],
    107: [
        0.694,
        0,
        0.528
    ],
    108: [
        0.694,
        0,
        0.278
    ],
    109: [
        0.442,
        0,
        0.833
    ],
    110: [
        0.442,
        0,
        0.556
    ],
    111: [
        0.448,
        0.01,
        0.5
    ],
    112: [
        0.442,
        0.194,
        0.556
    ],
    113: [
        0.442,
        0.194,
        0.528
    ],
    114: [
        0.442,
        0,
        0.392
    ],
    115: [
        0.448,
        0.011,
        0.394
    ],
    116: [
        0.615,
        0.01,
        0.389
    ],
    117: [
        0.442,
        0.011,
        0.556
    ],
    118: [
        0.431,
        0.011,
        0.528
    ],
    119: [
        0.431,
        0.011,
        0.722
    ],
    120: [
        0.431,
        0,
        0.528
    ],
    121: [
        0.431,
        0.204,
        0.528
    ],
    122: [
        0.431,
        0,
        0.444
    ],
    123: [
        0.75,
        0.25,
        0.5
    ],
    124: [
        0.75,
        0.249,
        0.278
    ],
    125: [
        0.75,
        0.25,
        0.5
    ],
    126: [
        0.318,
        -0.215,
        0.5
    ],
    160: [
        0,
        0,
        0.25
    ],
    163: [
        0.714,
        0.011,
        0.769
    ],
    165: [
        0.683,
        0,
        0.75
    ],
    168: [
        0.669,
        -0.554,
        0.5
    ],
    172: [
        0.356,
        -0.089,
        0.667
    ],
    174: [
        0.709,
        0.175,
        0.947
    ],
    175: [
        0.59,
        -0.544,
        0.5
    ],
    176: [
        0.715,
        -0.542,
        0.5
    ],
    177: [
        0.666,
        0,
        0.778
    ],
    180: [
        0.699,
        -0.505,
        0.5
    ],
    183: [
        0.31,
        -0.19,
        0.278
    ],
    215: [
        0.491,
        -0.009,
        0.778
    ],
    240: [
        0.749,
        0.021,
        0.556
    ],
    247: [
        0.537,
        0.036,
        0.778
    ],
    305: [
        0.442,
        0,
        0.278,
        {
            sk: 0.0278
        }
    ],
    567: [
        0.442,
        0.205,
        0.306,
        {
            sk: 0.0833
        }
    ],
    697: [
        0.56,
        -0.043,
        0.275
    ],
    710: [
        0.694,
        -0.531,
        0.5
    ],
    711: [
        0.644,
        -0.513,
        0.5
    ],
    713: [
        0.59,
        -0.544,
        0.5
    ],
    714: [
        0.699,
        -0.505,
        0.5
    ],
    715: [
        0.699,
        -0.505,
        0.5
    ],
    728: [
        0.694,
        -0.515,
        0.5
    ],
    729: [
        0.669,
        -0.549,
        0.5
    ],
    730: [
        0.715,
        -0.542,
        0.5
    ],
    732: [
        0.668,
        -0.565,
        0.5
    ],
    768: [
        0.699,
        -0.505,
        0
    ],
    769: [
        0.699,
        -0.505,
        0
    ],
    770: [
        0.694,
        -0.531,
        0
    ],
    771: [
        0.668,
        -0.565,
        0
    ],
    772: [
        0.59,
        -0.544,
        0
    ],
    774: [
        0.694,
        -0.515,
        0
    ],
    775: [
        0.669,
        -0.549,
        0
    ],
    776: [
        0.669,
        -0.554,
        0
    ],
    778: [
        0.715,
        -0.542,
        0
    ],
    779: [
        0.701,
        -0.51,
        0
    ],
    780: [
        0.644,
        -0.513,
        0
    ],
    824: [
        0.716,
        0.215,
        0
    ],
    913: [
        0.716,
        0,
        0.75
    ],
    914: [
        0.683,
        0,
        0.708
    ],
    915: [
        0.68,
        0,
        0.625
    ],
    916: [
        0.716,
        0,
        0.833
    ],
    917: [
        0.68,
        0,
        0.681
    ],
    918: [
        0.683,
        0,
        0.611
    ],
    919: [
        0.683,
        0,
        0.75
    ],
    920: [
        0.705,
        0.022,
        0.778
    ],
    921: [
        0.683,
        0,
        0.361
    ],
    922: [
        0.683,
        0,
        0.778
    ],
    923: [
        0.716,
        0,
        0.694
    ],
    924: [
        0.683,
        0,
        0.917
    ],
    925: [
        0.683,
        0,
        0.75
    ],
    926: [
        0.677,
        0,
        0.667
    ],
    927: [
        0.705,
        0.022,
        0.778
    ],
    928: [
        0.68,
        0,
        0.75
    ],
    929: [
        0.683,
        0,
        0.681
    ],
    931: [
        0.683,
        0,
        0.722
    ],
    932: [
        0.677,
        0,
        0.722
    ],
    933: [
        0.705,
        0,
        0.778
    ],
    934: [
        0.683,
        0,
        0.722
    ],
    935: [
        0.683,
        0,
        0.75
    ],
    936: [
        0.683,
        0,
        0.778
    ],
    937: [
        0.704,
        0,
        0.722
    ],
    8192: [
        0,
        0,
        0.5
    ],
    8193: [
        0,
        0,
        1
    ],
    8194: [
        0,
        0,
        0.5
    ],
    8195: [
        0,
        0,
        1
    ],
    8196: [
        0,
        0,
        0.333
    ],
    8197: [
        0,
        0,
        0.25
    ],
    8198: [
        0,
        0,
        0.167
    ],
    8201: [
        0,
        0,
        0.167
    ],
    8202: [
        0,
        0,
        0.1
    ],
    8203: [
        0,
        0,
        0
    ],
    8204: [
        0,
        0,
        0
    ],
    8211: [
        0.285,
        -0.248,
        0.5
    ],
    8212: [
        0.285,
        -0.248,
        1
    ],
    8213: [
        0.285,
        -0.248,
        1
    ],
    8214: [
        0.75,
        0.25,
        0.5
    ],
    8215: [
        -0.025,
        0.062,
        0.5
    ],
    8216: [
        0.694,
        -0.379,
        0.278
    ],
    8217: [
        0.694,
        -0.379,
        0.278
    ],
    8220: [
        0.694,
        -0.379,
        0.5
    ],
    8221: [
        0.694,
        -0.379,
        0.5
    ],
    8224: [
        0.705,
        0.216,
        0.444
    ],
    8225: [
        0.705,
        0.205,
        0.444
    ],
    8226: [
        0.444,
        -0.055,
        0.5
    ],
    8230: [
        0.12,
        0,
        1.172
    ],
    8242: [
        0.56,
        -0.043,
        0.275
    ],
    8243: [
        0.56,
        0,
        0.55
    ],
    8244: [
        0.56,
        0,
        0.825
    ],
    8245: [
        0.56,
        -0.043,
        0.275
    ],
    8246: [
        0.56,
        0,
        0.55
    ],
    8247: [
        0.56,
        0,
        0.825
    ],
    8254: [
        0.59,
        -0.544,
        0.5
    ],
    8260: [
        0.75,
        0.25,
        0.5
    ],
    8279: [
        0.56,
        0,
        1.1
    ],
    8288: [
        0,
        0,
        0
    ],
    8289: [
        0,
        0,
        0
    ],
    8290: [
        0,
        0,
        0
    ],
    8291: [
        0,
        0,
        0
    ],
    8292: [
        0,
        0,
        0
    ],
    8407: [
        0.714,
        -0.516,
        0.5
    ],
    8450: [
        0.702,
        0.019,
        0.722
    ],
    8459: [
        0.717,
        0.036,
        0.969,
        {
            ic: 0.272,
            sk: 0.333
        }
    ],
    8460: [
        0.666,
        0.133,
        0.72
    ],
    8461: [
        0.683,
        0,
        0.778
    ],
    8462: [
        0.694,
        0.011,
        0.576,
        {
            sk: -0.0278
        }
    ],
    8463: [
        0.695,
        0.013,
        0.54,
        {
            ic: 0.022
        }
    ],
    8464: [
        0.717,
        0.017,
        0.809,
        {
            ic: 0.137,
            sk: 0.333
        }
    ],
    8465: [
        0.686,
        0.026,
        0.554
    ],
    8466: [
        0.717,
        0.017,
        0.874,
        {
            ic: 0.161,
            sk: 0.306
        }
    ],
    8467: [
        0.705,
        0.02,
        0.417,
        {
            sk: 0.111
        }
    ],
    8469: [
        0.683,
        0.02,
        0.722
    ],
    8472: [
        0.453,
        0.216,
        0.636,
        {
            sk: 0.111
        }
    ],
    8473: [
        0.683,
        0,
        0.611
    ],
    8474: [
        0.701,
        0.181,
        0.778
    ],
    8475: [
        0.717,
        0.017,
        0.85,
        {
            ic: 0.037,
            sk: 0.194
        }
    ],
    8476: [
        0.686,
        0.026,
        0.828
    ],
    8477: [
        0.683,
        0,
        0.722
    ],
    8484: [
        0.683,
        0,
        0.667
    ],
    8486: [
        0.704,
        0,
        0.722
    ],
    8487: [
        0.684,
        0.022,
        0.722
    ],
    8488: [
        0.729,
        0.139,
        0.602
    ],
    8492: [
        0.708,
        0.028,
        0.908,
        {
            ic: 0.02,
            sk: 0.194
        }
    ],
    8493: [
        0.685,
        0.024,
        0.613
    ],
    8496: [
        0.707,
        0.008,
        0.562,
        {
            ic: 0.156,
            sk: 0.139
        }
    ],
    8497: [
        0.735,
        0.036,
        0.895,
        {
            ic: 0.095,
            sk: 0.222
        }
    ],
    8498: [
        0.695,
        0,
        0.556
    ],
    8499: [
        0.721,
        0.05,
        1.08,
        {
            ic: 0.136,
            sk: 0.444
        }
    ],
    8501: [
        0.694,
        0,
        0.611
    ],
    8502: [
        0.763,
        0.021,
        0.667,
        {
            ic: 0.02
        }
    ],
    8503: [
        0.764,
        0.043,
        0.444
    ],
    8504: [
        0.764,
        0.043,
        0.667
    ],
    8513: [
        0.705,
        0.023,
        0.639
    ],
    8592: [
        0.511,
        0.011,
        1
    ],
    8593: [
        0.694,
        0.193,
        0.5
    ],
    8594: [
        0.511,
        0.011,
        1
    ],
    8595: [
        0.694,
        0.194,
        0.5
    ],
    8596: [
        0.511,
        0.011,
        1
    ],
    8597: [
        0.772,
        0.272,
        0.5
    ],
    8598: [
        0.72,
        0.195,
        1
    ],
    8599: [
        0.72,
        0.195,
        1
    ],
    8600: [
        0.695,
        0.22,
        1
    ],
    8601: [
        0.695,
        0.22,
        1
    ],
    8602: [
        0.437,
        -0.06,
        1
    ],
    8603: [
        0.437,
        -0.06,
        1
    ],
    8606: [
        0.417,
        -0.083,
        1
    ],
    8608: [
        0.417,
        -0.083,
        1
    ],
    8610: [
        0.417,
        -0.083,
        1.111
    ],
    8611: [
        0.417,
        -0.083,
        1.111
    ],
    8614: [
        0.511,
        0.011,
        1
    ],
    8617: [
        0.511,
        0.011,
        1.126
    ],
    8618: [
        0.511,
        0.011,
        1.126
    ],
    8619: [
        0.575,
        0.041,
        1
    ],
    8620: [
        0.575,
        0.041,
        1
    ],
    8621: [
        0.417,
        -0.083,
        1.389
    ],
    8622: [
        0.437,
        -0.06,
        1
    ],
    8624: [
        0.722,
        0,
        0.5
    ],
    8625: [
        0.722,
        0,
        0.5
    ],
    8630: [
        0.461,
        0,
        1
    ],
    8631: [
        0.46,
        0,
        1
    ],
    8634: [
        0.65,
        0.083,
        0.778
    ],
    8635: [
        0.65,
        0.083,
        0.778
    ],
    8636: [
        0.511,
        -0.23,
        1
    ],
    8637: [
        0.27,
        0.011,
        1
    ],
    8638: [
        0.694,
        0.194,
        0.417
    ],
    8639: [
        0.694,
        0.194,
        0.417
    ],
    8640: [
        0.511,
        -0.23,
        1
    ],
    8641: [
        0.27,
        0.011,
        1
    ],
    8642: [
        0.694,
        0.194,
        0.417
    ],
    8643: [
        0.694,
        0.194,
        0.417
    ],
    8644: [
        0.667,
        0,
        1
    ],
    8646: [
        0.667,
        0,
        1
    ],
    8647: [
        0.583,
        0.083,
        1
    ],
    8648: [
        0.694,
        0.193,
        0.833
    ],
    8649: [
        0.583,
        0.083,
        1
    ],
    8650: [
        0.694,
        0.194,
        0.833
    ],
    8651: [
        0.514,
        0.014,
        1
    ],
    8652: [
        0.671,
        0.011,
        1
    ],
    8653: [
        0.534,
        0.035,
        1
    ],
    8654: [
        0.534,
        0.037,
        1
    ],
    8655: [
        0.534,
        0.035,
        1
    ],
    8656: [
        0.525,
        0.024,
        1
    ],
    8657: [
        0.694,
        0.194,
        0.611
    ],
    8658: [
        0.525,
        0.024,
        1
    ],
    8659: [
        0.694,
        0.194,
        0.611
    ],
    8660: [
        0.526,
        0.025,
        1
    ],
    8661: [
        0.772,
        0.272,
        0.611
    ],
    8666: [
        0.611,
        0.111,
        1
    ],
    8667: [
        0.611,
        0.111,
        1
    ],
    8669: [
        0.417,
        -0.083,
        1
    ],
    8672: [
        0.437,
        -0.064,
        1.334
    ],
    8674: [
        0.437,
        -0.064,
        1.334
    ],
    8704: [
        0.694,
        0.022,
        0.556
    ],
    8705: [
        0.846,
        0.021,
        0.5
    ],
    8706: [
        0.715,
        0.022,
        0.531,
        {
            ic: 0.035,
            sk: 0.0833
        }
    ],
    8707: [
        0.694,
        0,
        0.556
    ],
    8708: [
        0.716,
        0.215,
        0.556
    ],
    8709: [
        0.772,
        0.078,
        0.5
    ],
    8710: [
        0.716,
        0,
        0.833
    ],
    8711: [
        0.683,
        0.033,
        0.833
    ],
    8712: [
        0.54,
        0.04,
        0.667
    ],
    8713: [
        0.716,
        0.215,
        0.667
    ],
    8715: [
        0.54,
        0.04,
        0.667
    ],
    8716: [
        0.716,
        0.215,
        0.667
    ],
    8717: [
        0.44,
        0,
        0.429,
        {
            ic: 0.027
        }
    ],
    8719: [
        0.75,
        0.25,
        0.944
    ],
    8720: [
        0.75,
        0.25,
        0.944
    ],
    8721: [
        0.75,
        0.25,
        1.056
    ],
    8722: [
        0.583,
        0.082,
        0.778
    ],
    8723: [
        0.5,
        0.166,
        0.778
    ],
    8724: [
        0.766,
        0.093,
        0.778
    ],
    8725: [
        0.75,
        0.25,
        0.5
    ],
    8726: [
        0.75,
        0.25,
        0.5
    ],
    8727: [
        0.465,
        -0.035,
        0.5
    ],
    8728: [
        0.444,
        -0.055,
        0.5
    ],
    8729: [
        0.444,
        -0.055,
        0.5
    ],
    8730: [
        0.8,
        0.2,
        0.833,
        {
            ic: 0.02
        }
    ],
    8733: [
        0.442,
        0.011,
        0.778
    ],
    8734: [
        0.442,
        0.011,
        1
    ],
    8736: [
        0.694,
        0,
        0.722
    ],
    8737: [
        0.714,
        0.02,
        0.722
    ],
    8738: [
        0.551,
        0.051,
        0.722
    ],
    8739: [
        0.75,
        0.249,
        0.278
    ],
    8740: [
        0.75,
        0.252,
        0.278,
        {
            ic: 0.019
        }
    ],
    8741: [
        0.75,
        0.25,
        0.5
    ],
    8742: [
        0.75,
        0.25,
        0.5,
        {
            ic: 0.018
        }
    ],
    8743: [
        0.598,
        0.022,
        0.667
    ],
    8744: [
        0.598,
        0.022,
        0.667
    ],
    8745: [
        0.598,
        0.022,
        0.667
    ],
    8746: [
        0.598,
        0.022,
        0.667
    ],
    8747: [
        0.716,
        0.216,
        0.417,
        {
            ic: 0.055
        }
    ],
    8748: [
        0.805,
        0.306,
        0.819,
        {
            ic: 0.138
        }
    ],
    8749: [
        0.805,
        0.306,
        1.166,
        {
            ic: 0.138
        }
    ],
    8750: [
        0.805,
        0.306,
        0.472,
        {
            ic: 0.138
        }
    ],
    8756: [
        0.471,
        0.082,
        0.667
    ],
    8757: [
        0.471,
        0.082,
        0.667
    ],
    8764: [
        0.367,
        -0.133,
        0.778
    ],
    8765: [
        0.367,
        -0.133,
        0.778
    ],
    8768: [
        0.583,
        0.083,
        0.278
    ],
    8769: [
        0.467,
        -0.032,
        0.778
    ],
    8770: [
        0.463,
        -0.034,
        0.778
    ],
    8771: [
        0.464,
        -0.036,
        0.778
    ],
    8772: [
        0.716,
        0.215,
        0.778
    ],
    8773: [
        0.589,
        -0.022,
        0.778
    ],
    8775: [
        0.652,
        0.155,
        0.778
    ],
    8776: [
        0.483,
        -0.055,
        0.778
    ],
    8777: [
        0.716,
        0.215,
        0.778
    ],
    8778: [
        0.579,
        0.039,
        0.778
    ],
    8781: [
        0.484,
        -0.016,
        0.778
    ],
    8782: [
        0.492,
        -0.008,
        0.778
    ],
    8783: [
        0.492,
        -0.133,
        0.778
    ],
    8784: [
        0.67,
        -0.133,
        0.778
    ],
    8785: [
        0.609,
        0.108,
        0.778
    ],
    8786: [
        0.601,
        0.101,
        0.778
    ],
    8787: [
        0.601,
        0.102,
        0.778
    ],
    8790: [
        0.367,
        -0.133,
        0.778
    ],
    8791: [
        0.721,
        -0.133,
        0.778
    ],
    8796: [
        0.859,
        -0.133,
        0.778
    ],
    8800: [
        0.716,
        0.215,
        0.778
    ],
    8801: [
        0.464,
        -0.036,
        0.778
    ],
    8802: [
        0.716,
        0.215,
        0.778
    ],
    8804: [
        0.636,
        0.138,
        0.778
    ],
    8805: [
        0.636,
        0.138,
        0.778
    ],
    8806: [
        0.753,
        0.175,
        0.778
    ],
    8807: [
        0.753,
        0.175,
        0.778
    ],
    8808: [
        0.752,
        0.286,
        0.778
    ],
    8809: [
        0.752,
        0.286,
        0.778
    ],
    8810: [
        0.568,
        0.067,
        1
    ],
    8811: [
        0.567,
        0.067,
        1
    ],
    8812: [
        0.75,
        0.25,
        0.5
    ],
    8813: [
        0.716,
        0.215,
        0.778
    ],
    8814: [
        0.708,
        0.209,
        0.778
    ],
    8815: [
        0.708,
        0.209,
        0.778
    ],
    8816: [
        0.801,
        0.303,
        0.778
    ],
    8817: [
        0.801,
        0.303,
        0.778
    ],
    8818: [
        0.732,
        0.228,
        0.778
    ],
    8819: [
        0.732,
        0.228,
        0.778
    ],
    8820: [
        0.732,
        0.228,
        0.778
    ],
    8821: [
        0.732,
        0.228,
        0.778
    ],
    8822: [
        0.681,
        0.253,
        0.778
    ],
    8823: [
        0.681,
        0.253,
        0.778
    ],
    8824: [
        0.716,
        0.253,
        0.778
    ],
    8825: [
        0.716,
        0.253,
        0.778
    ],
    8826: [
        0.539,
        0.041,
        0.778
    ],
    8827: [
        0.539,
        0.041,
        0.778
    ],
    8828: [
        0.58,
        0.153,
        0.778
    ],
    8829: [
        0.58,
        0.154,
        0.778
    ],
    8830: [
        0.732,
        0.228,
        0.778
    ],
    8831: [
        0.732,
        0.228,
        0.778
    ],
    8832: [
        0.705,
        0.208,
        0.778
    ],
    8833: [
        0.705,
        0.208,
        0.778
    ],
    8834: [
        0.54,
        0.04,
        0.778
    ],
    8835: [
        0.54,
        0.04,
        0.778
    ],
    8836: [
        0.716,
        0.215,
        0.778
    ],
    8837: [
        0.716,
        0.215,
        0.778
    ],
    8838: [
        0.636,
        0.138,
        0.778
    ],
    8839: [
        0.636,
        0.138,
        0.778
    ],
    8840: [
        0.801,
        0.303,
        0.778
    ],
    8841: [
        0.801,
        0.303,
        0.778
    ],
    8842: [
        0.635,
        0.241,
        0.778
    ],
    8843: [
        0.635,
        0.241,
        0.778
    ],
    8846: [
        0.598,
        0.022,
        0.667
    ],
    8847: [
        0.539,
        0.041,
        0.778
    ],
    8848: [
        0.539,
        0.041,
        0.778
    ],
    8849: [
        0.636,
        0.138,
        0.778
    ],
    8850: [
        0.636,
        0.138,
        0.778
    ],
    8851: [
        0.598,
        0,
        0.667
    ],
    8852: [
        0.598,
        0,
        0.667
    ],
    8853: [
        0.583,
        0.083,
        0.778
    ],
    8854: [
        0.583,
        0.083,
        0.778
    ],
    8855: [
        0.583,
        0.083,
        0.778
    ],
    8856: [
        0.583,
        0.083,
        0.778
    ],
    8857: [
        0.583,
        0.083,
        0.778
    ],
    8858: [
        0.582,
        0.082,
        0.778
    ],
    8859: [
        0.582,
        0.082,
        0.778
    ],
    8861: [
        0.582,
        0.082,
        0.778
    ],
    8862: [
        0.689,
        0,
        0.778
    ],
    8863: [
        0.689,
        0,
        0.778
    ],
    8864: [
        0.689,
        0,
        0.778
    ],
    8865: [
        0.689,
        0,
        0.778
    ],
    8866: [
        0.694,
        0,
        0.611
    ],
    8867: [
        0.694,
        0,
        0.611
    ],
    8868: [
        0.668,
        0,
        0.778
    ],
    8869: [
        0.668,
        0,
        0.778
    ],
    8872: [
        0.75,
        0.249,
        0.867
    ],
    8873: [
        0.694,
        0,
        0.722
    ],
    8874: [
        0.694,
        0,
        0.889
    ],
    8876: [
        0.695,
        0,
        0.611
    ],
    8877: [
        0.695,
        0,
        0.611
    ],
    8878: [
        0.695,
        0,
        0.722
    ],
    8879: [
        0.695,
        0,
        0.722
    ],
    8882: [
        0.539,
        0.041,
        0.778
    ],
    8883: [
        0.539,
        0.041,
        0.778
    ],
    8884: [
        0.636,
        0.138,
        0.778
    ],
    8885: [
        0.636,
        0.138,
        0.778
    ],
    8888: [
        0.408,
        -0.092,
        1.111
    ],
    8890: [
        0.431,
        0.212,
        0.556
    ],
    8891: [
        0.716,
        0,
        0.611
    ],
    8892: [
        0.716,
        0,
        0.611
    ],
    8896: [
        0.75,
        0.249,
        0.833
    ],
    8897: [
        0.75,
        0.249,
        0.833
    ],
    8898: [
        0.75,
        0.249,
        0.833
    ],
    8899: [
        0.75,
        0.249,
        0.833
    ],
    8900: [
        0.488,
        -0.012,
        0.5
    ],
    8901: [
        0.31,
        -0.19,
        0.278
    ],
    8902: [
        0.486,
        -0.016,
        0.5
    ],
    8903: [
        0.545,
        0.044,
        0.778
    ],
    8904: [
        0.505,
        0.005,
        0.9
    ],
    8905: [
        0.492,
        -0.008,
        0.778
    ],
    8906: [
        0.492,
        -0.008,
        0.778
    ],
    8907: [
        0.694,
        0.022,
        0.778
    ],
    8908: [
        0.694,
        0.022,
        0.778
    ],
    8909: [
        0.464,
        -0.036,
        0.778
    ],
    8910: [
        0.578,
        0.021,
        0.76
    ],
    8911: [
        0.578,
        0.022,
        0.76
    ],
    8912: [
        0.54,
        0.04,
        0.778
    ],
    8913: [
        0.54,
        0.04,
        0.778
    ],
    8914: [
        0.598,
        0.022,
        0.667
    ],
    8915: [
        0.598,
        0.022,
        0.667
    ],
    8916: [
        0.736,
        0.022,
        0.667
    ],
    8918: [
        0.541,
        0.041,
        0.778
    ],
    8919: [
        0.541,
        0.041,
        0.778
    ],
    8920: [
        0.568,
        0.067,
        1.333
    ],
    8921: [
        0.568,
        0.067,
        1.333
    ],
    8922: [
        0.886,
        0.386,
        0.778
    ],
    8923: [
        0.886,
        0.386,
        0.778
    ],
    8926: [
        0.734,
        0,
        0.778
    ],
    8927: [
        0.734,
        0,
        0.778
    ],
    8928: [
        0.801,
        0.303,
        0.778
    ],
    8929: [
        0.801,
        0.303,
        0.778
    ],
    8930: [
        0.716,
        0.215,
        0.778
    ],
    8931: [
        0.716,
        0.215,
        0.778
    ],
    8934: [
        0.73,
        0.359,
        0.778
    ],
    8935: [
        0.73,
        0.359,
        0.778
    ],
    8936: [
        0.73,
        0.359,
        0.778
    ],
    8937: [
        0.73,
        0.359,
        0.778
    ],
    8938: [
        0.706,
        0.208,
        0.778
    ],
    8939: [
        0.706,
        0.208,
        0.778
    ],
    8940: [
        0.802,
        0.303,
        0.778
    ],
    8941: [
        0.801,
        0.303,
        0.778
    ],
    8942: [
        1.3,
        0.03,
        0.278
    ],
    8943: [
        0.31,
        -0.19,
        1.172
    ],
    8945: [
        1.52,
        -0.1,
        1.282
    ],
    8965: [
        0.716,
        0,
        0.611
    ],
    8966: [
        0.813,
        0.097,
        0.611
    ],
    8968: [
        0.75,
        0.25,
        0.444
    ],
    8969: [
        0.75,
        0.25,
        0.444
    ],
    8970: [
        0.75,
        0.25,
        0.444
    ],
    8971: [
        0.75,
        0.25,
        0.444
    ],
    8988: [
        0.694,
        -0.306,
        0.5
    ],
    8989: [
        0.694,
        -0.306,
        0.5
    ],
    8990: [
        0.366,
        0.022,
        0.5
    ],
    8991: [
        0.366,
        0.022,
        0.5
    ],
    8994: [
        0.388,
        -0.122,
        1
    ],
    8995: [
        0.378,
        -0.134,
        1
    ],
    9001: [
        0.75,
        0.25,
        0.389
    ],
    9002: [
        0.75,
        0.25,
        0.389
    ],
    9136: [
        0.744,
        0.244,
        0.412
    ],
    9137: [
        0.744,
        0.244,
        0.412
    ],
    9168: [
        0.602,
        0,
        0.667
    ],
    9416: [
        0.709,
        0.175,
        0.902
    ],
    9484: [
        0.694,
        -0.306,
        0.5
    ],
    9488: [
        0.694,
        -0.306,
        0.5
    ],
    9492: [
        0.366,
        0.022,
        0.5
    ],
    9496: [
        0.366,
        0.022,
        0.5
    ],
    9585: [
        0.694,
        0.195,
        0.889
    ],
    9586: [
        0.694,
        0.195,
        0.889
    ],
    9632: [
        0.689,
        0,
        0.778
    ],
    9633: [
        0.689,
        0,
        0.778
    ],
    9642: [
        0.689,
        0,
        0.778
    ],
    9650: [
        0.575,
        0.02,
        0.722
    ],
    9651: [
        0.716,
        0,
        0.889
    ],
    9652: [
        0.575,
        0.02,
        0.722
    ],
    9653: [
        0.716,
        0,
        0.889
    ],
    9654: [
        0.539,
        0.041,
        0.778
    ],
    9656: [
        0.539,
        0.041,
        0.778
    ],
    9657: [
        0.505,
        0.005,
        0.5
    ],
    9660: [
        0.576,
        0.019,
        0.722
    ],
    9661: [
        0.5,
        0.215,
        0.889
    ],
    9662: [
        0.576,
        0.019,
        0.722
    ],
    9663: [
        0.5,
        0.215,
        0.889
    ],
    9664: [
        0.539,
        0.041,
        0.778
    ],
    9666: [
        0.539,
        0.041,
        0.778
    ],
    9667: [
        0.505,
        0.005,
        0.5
    ],
    9674: [
        0.716,
        0.132,
        0.667
    ],
    9711: [
        0.715,
        0.215,
        1
    ],
    9723: [
        0.689,
        0,
        0.778
    ],
    9724: [
        0.689,
        0,
        0.778
    ],
    9733: [
        0.694,
        0.111,
        0.944
    ],
    9824: [
        0.727,
        0.13,
        0.778
    ],
    9825: [
        0.716,
        0.033,
        0.778
    ],
    9826: [
        0.727,
        0.162,
        0.778
    ],
    9827: [
        0.726,
        0.13,
        0.778
    ],
    9837: [
        0.75,
        0.022,
        0.389
    ],
    9838: [
        0.734,
        0.223,
        0.389
    ],
    9839: [
        0.723,
        0.223,
        0.389
    ],
    10003: [
        0.706,
        0.034,
        0.833
    ],
    10016: [
        0.716,
        0.022,
        0.833
    ],
    10072: [
        0.75,
        0.249,
        0.278
    ],
    10216: [
        0.75,
        0.25,
        0.389
    ],
    10217: [
        0.75,
        0.25,
        0.389
    ],
    10222: [
        0.744,
        0.244,
        0.412
    ],
    10223: [
        0.744,
        0.244,
        0.412
    ],
    10229: [
        0.511,
        0.011,
        1.609
    ],
    10230: [
        0.511,
        0.011,
        1.638
    ],
    10231: [
        0.511,
        0.011,
        1.859
    ],
    10232: [
        0.525,
        0.024,
        1.609
    ],
    10233: [
        0.525,
        0.024,
        1.638
    ],
    10234: [
        0.525,
        0.024,
        1.858
    ],
    10236: [
        0.511,
        0.011,
        1.638
    ],
    10731: [
        0.716,
        0.132,
        0.667
    ],
    10744: [
        0.716,
        0.215,
        0.778
    ],
    10752: [
        0.75,
        0.25,
        1.111
    ],
    10753: [
        0.75,
        0.25,
        1.111
    ],
    10754: [
        0.75,
        0.25,
        1.111
    ],
    10756: [
        0.75,
        0.249,
        0.833
    ],
    10758: [
        0.75,
        0.249,
        0.833
    ],
    10764: [
        0.805,
        0.306,
        1.638,
        {
            ic: 0.138
        }
    ],
    10799: [
        0.491,
        -0.009,
        0.778
    ],
    10815: [
        0.683,
        0,
        0.75
    ],
    10846: [
        0.813,
        0.097,
        0.611
    ],
    10877: [
        0.636,
        0.138,
        0.778
    ],
    10878: [
        0.636,
        0.138,
        0.778
    ],
    10885: [
        0.762,
        0.29,
        0.778
    ],
    10886: [
        0.762,
        0.29,
        0.778
    ],
    10887: [
        0.635,
        0.241,
        0.778
    ],
    10888: [
        0.635,
        0.241,
        0.778
    ],
    10889: [
        0.761,
        0.387,
        0.778
    ],
    10890: [
        0.761,
        0.387,
        0.778
    ],
    10891: [
        1.003,
        0.463,
        0.778
    ],
    10892: [
        1.003,
        0.463,
        0.778
    ],
    10901: [
        0.636,
        0.138,
        0.778
    ],
    10902: [
        0.636,
        0.138,
        0.778
    ],
    10927: [
        0.636,
        0.138,
        0.778
    ],
    10928: [
        0.636,
        0.138,
        0.778
    ],
    10933: [
        0.752,
        0.286,
        0.778
    ],
    10934: [
        0.752,
        0.286,
        0.778
    ],
    10935: [
        0.761,
        0.294,
        0.778
    ],
    10936: [
        0.761,
        0.294,
        0.778
    ],
    10937: [
        0.761,
        0.337,
        0.778
    ],
    10938: [
        0.761,
        0.337,
        0.778
    ],
    10949: [
        0.753,
        0.215,
        0.778
    ],
    10950: [
        0.753,
        0.215,
        0.778
    ],
    10955: [
        0.783,
        0.385,
        0.778
    ],
    10956: [
        0.783,
        0.385,
        0.778
    ],
    12296: [
        0.75,
        0.25,
        0.389
    ],
    12297: [
        0.75,
        0.25,
        0.389
    ],
    57350: [
        0.43,
        0.023,
        0.222,
        {
            ic: 0.018
        }
    ],
    57351: [
        0.431,
        0.024,
        0.389,
        {
            ic: 0.018
        }
    ],
    57352: [
        0.605,
        0.085,
        0.778
    ],
    57353: [
        0.434,
        0.006,
        0.667,
        {
            ic: 0.067
        }
    ],
    57356: [
        0.752,
        0.284,
        0.778
    ],
    57357: [
        0.752,
        0.284,
        0.778
    ],
    57358: [
        0.919,
        0.421,
        0.778
    ],
    57359: [
        0.801,
        0.303,
        0.778
    ],
    57360: [
        0.801,
        0.303,
        0.778
    ],
    57361: [
        0.919,
        0.421,
        0.778
    ],
    57366: [
        0.828,
        0.33,
        0.778
    ],
    57367: [
        0.752,
        0.332,
        0.778
    ],
    57368: [
        0.828,
        0.33,
        0.778
    ],
    57369: [
        0.752,
        0.333,
        0.778
    ],
    57370: [
        0.634,
        0.255,
        0.778
    ],
    57371: [
        0.634,
        0.254,
        0.778
    ],
    119808: [
        0.698,
        0,
        0.869
    ],
    119809: [
        0.686,
        0,
        0.818
    ],
    119810: [
        0.697,
        0.011,
        0.831
    ],
    119811: [
        0.686,
        0,
        0.882
    ],
    119812: [
        0.68,
        0,
        0.756
    ],
    119813: [
        0.68,
        0,
        0.724
    ],
    119814: [
        0.697,
        0.01,
        0.904
    ],
    119815: [
        0.686,
        0,
        0.9
    ],
    119816: [
        0.686,
        0,
        0.436
    ],
    119817: [
        0.686,
        0.011,
        0.594
    ],
    119818: [
        0.686,
        0,
        0.901
    ],
    119819: [
        0.686,
        0,
        0.692
    ],
    119820: [
        0.686,
        0,
        1.092
    ],
    119821: [
        0.686,
        0,
        0.9
    ],
    119822: [
        0.696,
        0.01,
        0.864
    ],
    119823: [
        0.686,
        0,
        0.786
    ],
    119824: [
        0.696,
        0.193,
        0.864
    ],
    119825: [
        0.686,
        0.011,
        0.862
    ],
    119826: [
        0.697,
        0.011,
        0.639
    ],
    119827: [
        0.675,
        0,
        0.8
    ],
    119828: [
        0.686,
        0.011,
        0.885
    ],
    119829: [
        0.686,
        0.007,
        0.869
    ],
    119830: [
        0.686,
        0.007,
        1.189
    ],
    119831: [
        0.686,
        0,
        0.869
    ],
    119832: [
        0.686,
        0,
        0.869
    ],
    119833: [
        0.686,
        0,
        0.703
    ],
    119834: [
        0.453,
        0.006,
        0.559
    ],
    119835: [
        0.694,
        0.006,
        0.639
    ],
    119836: [
        0.453,
        0.006,
        0.511
    ],
    119837: [
        0.694,
        0.006,
        0.639
    ],
    119838: [
        0.452,
        0.006,
        0.527
    ],
    119839: [
        0.7,
        0,
        0.351,
        {
            ic: 0.101
        }
    ],
    119840: [
        0.455,
        0.201,
        0.575
    ],
    119841: [
        0.694,
        0,
        0.639
    ],
    119842: [
        0.695,
        0,
        0.319
    ],
    119843: [
        0.695,
        0.2,
        0.351
    ],
    119844: [
        0.694,
        0,
        0.607
    ],
    119845: [
        0.694,
        0,
        0.319
    ],
    119846: [
        0.45,
        0,
        0.958
    ],
    119847: [
        0.45,
        0,
        0.639
    ],
    119848: [
        0.452,
        0.005,
        0.575
    ],
    119849: [
        0.45,
        0.194,
        0.639
    ],
    119850: [
        0.45,
        0.194,
        0.607
    ],
    119851: [
        0.45,
        0,
        0.474
    ],
    119852: [
        0.453,
        0.006,
        0.454
    ],
    119853: [
        0.635,
        0.005,
        0.447
    ],
    119854: [
        0.45,
        0.006,
        0.639
    ],
    119855: [
        0.444,
        0,
        0.607
    ],
    119856: [
        0.444,
        0,
        0.831
    ],
    119857: [
        0.444,
        0,
        0.607
    ],
    119858: [
        0.444,
        0.2,
        0.607
    ],
    119859: [
        0.444,
        0,
        0.511
    ],
    119860: [
        0.716,
        0,
        0.75,
        {
            sk: 0.139
        }
    ],
    119861: [
        0.683,
        0,
        0.759,
        {
            sk: 0.0833
        }
    ],
    119862: [
        0.705,
        0.022,
        0.715,
        {
            ic: 0.045,
            sk: 0.0833
        }
    ],
    119863: [
        0.683,
        0,
        0.828,
        {
            sk: 0.0556
        }
    ],
    119864: [
        0.68,
        0,
        0.738,
        {
            ic: 0.026,
            sk: 0.0833
        }
    ],
    119865: [
        0.68,
        0,
        0.643,
        {
            ic: 0.106,
            sk: 0.0833
        }
    ],
    119866: [
        0.705,
        0.022,
        0.786,
        {
            sk: 0.0833
        }
    ],
    119867: [
        0.683,
        0,
        0.831,
        {
            ic: 0.057,
            sk: 0.0556
        }
    ],
    119868: [
        0.683,
        0,
        0.44,
        {
            ic: 0.064,
            sk: 0.111
        }
    ],
    119869: [
        0.683,
        0.022,
        0.555,
        {
            ic: 0.078,
            sk: 0.167
        }
    ],
    119870: [
        0.683,
        0,
        0.849,
        {
            ic: 0.04,
            sk: 0.0556
        }
    ],
    119871: [
        0.683,
        0,
        0.681,
        {
            sk: 0.0278
        }
    ],
    119872: [
        0.683,
        0,
        0.97,
        {
            ic: 0.081,
            sk: 0.0833
        }
    ],
    119873: [
        0.683,
        0,
        0.803,
        {
            ic: 0.085,
            sk: 0.0833
        }
    ],
    119874: [
        0.704,
        0.022,
        0.763,
        {
            sk: 0.0833
        }
    ],
    119875: [
        0.683,
        0,
        0.642,
        {
            ic: 0.109,
            sk: 0.0833
        }
    ],
    119876: [
        0.704,
        0.194,
        0.791,
        {
            sk: 0.0833
        }
    ],
    119877: [
        0.683,
        0.021,
        0.759,
        {
            sk: 0.0833
        }
    ],
    119878: [
        0.705,
        0.022,
        0.613,
        {
            ic: 0.032,
            sk: 0.0833
        }
    ],
    119879: [
        0.677,
        0,
        0.584,
        {
            ic: 0.12,
            sk: 0.0833
        }
    ],
    119880: [
        0.683,
        0.022,
        0.683,
        {
            ic: 0.084,
            sk: 0.0278
        }
    ],
    119881: [
        0.683,
        0.022,
        0.583,
        {
            ic: 0.186
        }
    ],
    119882: [
        0.683,
        0.022,
        0.944,
        {
            ic: 0.104
        }
    ],
    119883: [
        0.683,
        0,
        0.828,
        {
            ic: 0.024,
            sk: 0.0833
        }
    ],
    119884: [
        0.683,
        0,
        0.581,
        {
            ic: 0.182
        }
    ],
    119885: [
        0.683,
        0,
        0.683,
        {
            ic: 0.04,
            sk: 0.0833
        }
    ],
    119886: [
        0.441,
        0.01,
        0.529
    ],
    119887: [
        0.694,
        0.011,
        0.429
    ],
    119888: [
        0.442,
        0.011,
        0.433,
        {
            sk: 0.0556
        }
    ],
    119889: [
        0.694,
        0.01,
        0.52,
        {
            sk: 0.167
        }
    ],
    119890: [
        0.442,
        0.011,
        0.466,
        {
            sk: 0.0556
        }
    ],
    119891: [
        0.705,
        0.205,
        0.49,
        {
            ic: 0.06,
            sk: 0.167
        }
    ],
    119892: [
        0.442,
        0.205,
        0.477,
        {
            sk: 0.0278
        }
    ],
    119894: [
        0.661,
        0.011,
        0.345
    ],
    119895: [
        0.661,
        0.204,
        0.412
    ],
    119896: [
        0.694,
        0.011,
        0.521
    ],
    119897: [
        0.694,
        0.011,
        0.298,
        {
            sk: 0.0833
        }
    ],
    119898: [
        0.442,
        0.011,
        0.878
    ],
    119899: [
        0.442,
        0.011,
        0.6
    ],
    119900: [
        0.441,
        0.011,
        0.485,
        {
            sk: 0.0556
        }
    ],
    119901: [
        0.442,
        0.194,
        0.503,
        {
            sk: 0.0833
        }
    ],
    119902: [
        0.442,
        0.194,
        0.446,
        {
            ic: 0.014,
            sk: 0.0833
        }
    ],
    119903: [
        0.442,
        0.011,
        0.451,
        {
            sk: 0.0556
        }
    ],
    119904: [
        0.442,
        0.01,
        0.469,
        {
            sk: 0.0556
        }
    ],
    119905: [
        0.626,
        0.011,
        0.361,
        {
            sk: 0.0833
        }
    ],
    119906: [
        0.442,
        0.011,
        0.572,
        {
            sk: 0.0278
        }
    ],
    119907: [
        0.443,
        0.011,
        0.485,
        {
            sk: 0.0278
        }
    ],
    119908: [
        0.443,
        0.011,
        0.716,
        {
            sk: 0.0833
        }
    ],
    119909: [
        0.442,
        0.011,
        0.572,
        {
            sk: 0.0278
        }
    ],
    119910: [
        0.442,
        0.205,
        0.49,
        {
            sk: 0.0556
        }
    ],
    119911: [
        0.442,
        0.011,
        0.465,
        {
            sk: 0.0556
        }
    ],
    119912: [
        0.711,
        0,
        0.869,
        {
            sk: 0.16
        }
    ],
    119913: [
        0.686,
        0,
        0.866,
        {
            sk: 0.0958
        }
    ],
    119914: [
        0.703,
        0.017,
        0.817,
        {
            ic: 0.038,
            sk: 0.0958
        }
    ],
    119915: [
        0.686,
        0,
        0.938,
        {
            sk: 0.0639
        }
    ],
    119916: [
        0.68,
        0,
        0.81,
        {
            ic: 0.015,
            sk: 0.0958
        }
    ],
    119917: [
        0.68,
        0,
        0.689,
        {
            ic: 0.12,
            sk: 0.0958
        }
    ],
    119918: [
        0.703,
        0.016,
        0.887,
        {
            sk: 0.0958
        }
    ],
    119919: [
        0.686,
        0,
        0.982,
        {
            ic: 0.045,
            sk: 0.0639
        }
    ],
    119920: [
        0.686,
        0,
        0.511,
        {
            ic: 0.062,
            sk: 0.128
        }
    ],
    119921: [
        0.686,
        0.017,
        0.631,
        {
            ic: 0.063,
            sk: 0.192
        }
    ],
    119922: [
        0.686,
        0,
        0.971,
        {
            ic: 0.032,
            sk: 0.0639
        }
    ],
    119923: [
        0.686,
        0,
        0.756,
        {
            sk: 0.0319
        }
    ],
    119924: [
        0.686,
        0,
        1.142,
        {
            ic: 0.077,
            sk: 0.0958
        }
    ],
    119925: [
        0.686,
        0,
        0.95,
        {
            ic: 0.077,
            sk: 0.0958
        }
    ],
    119926: [
        0.703,
        0.017,
        0.837,
        {
            sk: 0.0958
        }
    ],
    119927: [
        0.686,
        0,
        0.723,
        {
            ic: 0.124,
            sk: 0.0958
        }
    ],
    119928: [
        0.703,
        0.194,
        0.869,
        {
            sk: 0.0958
        }
    ],
    119929: [
        0.686,
        0.017,
        0.872,
        {
            sk: 0.0958
        }
    ],
    119930: [
        0.703,
        0.017,
        0.693,
        {
            ic: 0.021,
            sk: 0.0958
        }
    ],
    119931: [
        0.675,
        0,
        0.637,
        {
            ic: 0.135,
            sk: 0.0958
        }
    ],
    119932: [
        0.686,
        0.016,
        0.8,
        {
            ic: 0.077,
            sk: 0.0319
        }
    ],
    119933: [
        0.686,
        0.016,
        0.678,
        {
            ic: 0.208
        }
    ],
    119934: [
        0.686,
        0.017,
        1.093,
        {
            ic: 0.114
        }
    ],
    119935: [
        0.686,
        0,
        0.947,
        {
            sk: 0.0958
        }
    ],
    119936: [
        0.686,
        0,
        0.675,
        {
            ic: 0.201
        }
    ],
    119937: [
        0.686,
        0,
        0.773,
        {
            ic: 0.032,
            sk: 0.0958
        }
    ],
    119938: [
        0.452,
        0.008,
        0.633
    ],
    119939: [
        0.694,
        0.008,
        0.521
    ],
    119940: [
        0.451,
        0.008,
        0.513,
        {
            sk: 0.0639
        }
    ],
    119941: [
        0.694,
        0.008,
        0.61,
        {
            sk: 0.192
        }
    ],
    119942: [
        0.452,
        0.008,
        0.554,
        {
            sk: 0.0639
        }
    ],
    119943: [
        0.701,
        0.201,
        0.568,
        {
            ic: 0.056,
            sk: 0.192
        }
    ],
    119944: [
        0.452,
        0.202,
        0.545,
        {
            sk: 0.0319
        }
    ],
    119945: [
        0.694,
        0.008,
        0.668,
        {
            sk: -0.0319
        }
    ],
    119946: [
        0.694,
        0.008,
        0.405
    ],
    119947: [
        0.694,
        0.202,
        0.471
    ],
    119948: [
        0.694,
        0.008,
        0.604
    ],
    119949: [
        0.694,
        0.008,
        0.348,
        {
            sk: 0.0958
        }
    ],
    119950: [
        0.452,
        0.008,
        1.032
    ],
    119951: [
        0.452,
        0.008,
        0.713
    ],
    119952: [
        0.452,
        0.008,
        0.585,
        {
            sk: 0.0639
        }
    ],
    119953: [
        0.452,
        0.194,
        0.601,
        {
            sk: 0.0958
        }
    ],
    119954: [
        0.452,
        0.194,
        0.542,
        {
            sk: 0.0958
        }
    ],
    119955: [
        0.452,
        0.008,
        0.529,
        {
            sk: 0.0639
        }
    ],
    119956: [
        0.451,
        0.008,
        0.531,
        {
            sk: 0.0639
        }
    ],
    119957: [
        0.643,
        0.007,
        0.415,
        {
            sk: 0.0958
        }
    ],
    119958: [
        0.452,
        0.008,
        0.681,
        {
            sk: 0.0319
        }
    ],
    119959: [
        0.453,
        0.008,
        0.567,
        {
            sk: 0.0319
        }
    ],
    119960: [
        0.453,
        0.008,
        0.831,
        {
            sk: 0.0958
        }
    ],
    119961: [
        0.452,
        0.008,
        0.659,
        {
            sk: 0.0319
        }
    ],
    119962: [
        0.452,
        0.202,
        0.59,
        {
            sk: 0.0639
        }
    ],
    119963: [
        0.452,
        0.008,
        0.555,
        {
            sk: 0.0639
        }
    ],
    119964: [
        0.717,
        0.008,
        0.803,
        {
            ic: 0.213,
            sk: 0.389
        }
    ],
    119966: [
        0.728,
        0.026,
        0.666,
        {
            ic: 0.153,
            sk: 0.278
        }
    ],
    119967: [
        0.708,
        0.031,
        0.774,
        {
            ic: 0.081,
            sk: 0.111
        }
    ],
    119970: [
        0.717,
        0.037,
        0.61,
        {
            ic: 0.128,
            sk: 0.25
        }
    ],
    119973: [
        0.717,
        0.314,
        1.052,
        {
            ic: 0.081,
            sk: 0.417
        }
    ],
    119974: [
        0.717,
        0.037,
        0.914,
        {
            ic: 0.29,
            sk: 0.361
        }
    ],
    119977: [
        0.726,
        0.036,
        0.902,
        {
            ic: 0.306,
            sk: 0.389
        }
    ],
    119978: [
        0.707,
        0.008,
        0.738,
        {
            ic: 0.067,
            sk: 0.167
        }
    ],
    119979: [
        0.716,
        0.037,
        1.013,
        {
            ic: 0.018,
            sk: 0.222
        }
    ],
    119980: [
        0.717,
        0.017,
        0.883,
        {
            sk: 0.278
        }
    ],
    119982: [
        0.708,
        0.036,
        0.868,
        {
            ic: 0.148,
            sk: 0.333
        }
    ],
    119983: [
        0.735,
        0.037,
        0.747,
        {
            ic: 0.249,
            sk: 0.222
        }
    ],
    119984: [
        0.717,
        0.017,
        0.8,
        {
            ic: 0.16,
            sk: 0.25
        }
    ],
    119985: [
        0.717,
        0.017,
        0.622,
        {
            ic: 0.228,
            sk: 0.222
        }
    ],
    119986: [
        0.717,
        0.017,
        0.805,
        {
            ic: 0.221,
            sk: 0.25
        }
    ],
    119987: [
        0.717,
        0.017,
        0.944,
        {
            ic: 0.187,
            sk: 0.278
        }
    ],
    119988: [
        0.716,
        0.017,
        0.71,
        {
            ic: 0.249,
            sk: 0.194
        }
    ],
    119989: [
        0.717,
        0.016,
        0.821,
        {
            ic: 0.211,
            sk: 0.306
        }
    ],
    120068: [
        0.696,
        0.026,
        0.718
    ],
    120069: [
        0.691,
        0.027,
        0.884
    ],
    120071: [
        0.685,
        0.027,
        0.832
    ],
    120072: [
        0.685,
        0.024,
        0.663
    ],
    120073: [
        0.686,
        0.153,
        0.611
    ],
    120074: [
        0.69,
        0.026,
        0.785
    ],
    120077: [
        0.686,
        0.139,
        0.552
    ],
    120078: [
        0.68,
        0.027,
        0.668,
        {
            ic: 0.014
        }
    ],
    120079: [
        0.686,
        0.026,
        0.666
    ],
    120080: [
        0.692,
        0.027,
        1.05
    ],
    120081: [
        0.686,
        0.025,
        0.832
    ],
    120082: [
        0.729,
        0.027,
        0.827
    ],
    120083: [
        0.692,
        0.218,
        0.828
    ],
    120084: [
        0.729,
        0.069,
        0.827
    ],
    120086: [
        0.692,
        0.027,
        0.829
    ],
    120087: [
        0.701,
        0.027,
        0.669
    ],
    120088: [
        0.697,
        0.027,
        0.646,
        {
            ic: 0.019
        }
    ],
    120089: [
        0.686,
        0.026,
        0.831
    ],
    120090: [
        0.686,
        0.027,
        1.046
    ],
    120091: [
        0.688,
        0.027,
        0.719
    ],
    120092: [
        0.686,
        0.218,
        0.833
    ],
    120094: [
        0.47,
        0.035,
        0.5
    ],
    120095: [
        0.685,
        0.031,
        0.513
    ],
    120096: [
        0.466,
        0.029,
        0.389
    ],
    120097: [
        0.609,
        0.033,
        0.499
    ],
    120098: [
        0.467,
        0.03,
        0.401
    ],
    120099: [
        0.681,
        0.221,
        0.326
    ],
    120100: [
        0.47,
        0.209,
        0.504
    ],
    120101: [
        0.688,
        0.205,
        0.521
    ],
    120102: [
        0.673,
        0.02,
        0.279
    ],
    120103: [
        0.672,
        0.208,
        0.281
    ],
    120104: [
        0.689,
        0.025,
        0.389
    ],
    120105: [
        0.685,
        0.02,
        0.28
    ],
    120106: [
        0.475,
        0.026,
        0.767
    ],
    120107: [
        0.475,
        0.022,
        0.527
    ],
    120108: [
        0.48,
        0.028,
        0.489
    ],
    120109: [
        0.541,
        0.212,
        0.5
    ],
    120110: [
        0.479,
        0.219,
        0.489
    ],
    120111: [
        0.474,
        0.021,
        0.389
    ],
    120112: [
        0.478,
        0.029,
        0.443
    ],
    120113: [
        0.64,
        0.02,
        0.333,
        {
            ic: 0.015
        }
    ],
    120114: [
        0.474,
        0.023,
        0.517
    ],
    120115: [
        0.53,
        0.028,
        0.512
    ],
    120116: [
        0.532,
        0.028,
        0.774
    ],
    120117: [
        0.472,
        0.188,
        0.389
    ],
    120118: [
        0.528,
        0.218,
        0.499
    ],
    120119: [
        0.471,
        0.214,
        0.391
    ],
    120120: [
        0.701,
        0,
        0.722
    ],
    120121: [
        0.683,
        0,
        0.667
    ],
    120123: [
        0.683,
        0,
        0.722
    ],
    120124: [
        0.683,
        0,
        0.667
    ],
    120125: [
        0.683,
        0,
        0.611
    ],
    120126: [
        0.702,
        0.019,
        0.778
    ],
    120128: [
        0.683,
        0,
        0.389
    ],
    120129: [
        0.683,
        0.077,
        0.5
    ],
    120130: [
        0.683,
        0,
        0.778
    ],
    120131: [
        0.683,
        0,
        0.667
    ],
    120132: [
        0.683,
        0,
        0.944
    ],
    120134: [
        0.701,
        0.019,
        0.778
    ],
    120138: [
        0.702,
        0.012,
        0.556
    ],
    120139: [
        0.683,
        0,
        0.667
    ],
    120140: [
        0.683,
        0.019,
        0.722
    ],
    120141: [
        0.683,
        0.02,
        0.722
    ],
    120142: [
        0.683,
        0.019,
        1
    ],
    120143: [
        0.683,
        0,
        0.722
    ],
    120144: [
        0.683,
        0,
        0.722
    ],
    120172: [
        0.686,
        0.031,
        0.847
    ],
    120173: [
        0.684,
        0.031,
        1.044
    ],
    120174: [
        0.676,
        0.032,
        0.723
    ],
    120175: [
        0.683,
        0.029,
        0.982
    ],
    120176: [
        0.686,
        0.029,
        0.783
    ],
    120177: [
        0.684,
        0.146,
        0.722
    ],
    120178: [
        0.687,
        0.029,
        0.927
    ],
    120179: [
        0.683,
        0.126,
        0.851
    ],
    120180: [
        0.681,
        0.025,
        0.655
    ],
    120181: [
        0.68,
        0.141,
        0.652
    ],
    120182: [
        0.681,
        0.026,
        0.789,
        {
            ic: 0.017
        }
    ],
    120183: [
        0.683,
        0.028,
        0.786
    ],
    120184: [
        0.683,
        0.032,
        1.239
    ],
    120185: [
        0.679,
        0.03,
        0.983
    ],
    120186: [
        0.726,
        0.03,
        0.976
    ],
    120187: [
        0.688,
        0.223,
        0.977
    ],
    120188: [
        0.726,
        0.083,
        0.976
    ],
    120189: [
        0.688,
        0.028,
        0.978
    ],
    120190: [
        0.685,
        0.031,
        0.978
    ],
    120191: [
        0.686,
        0.03,
        0.79,
        {
            ic: 0.012
        }
    ],
    120192: [
        0.688,
        0.039,
        0.851,
        {
            ic: 0.02
        }
    ],
    120193: [
        0.685,
        0.029,
        0.982
    ],
    120194: [
        0.683,
        0.03,
        1.235
    ],
    120195: [
        0.681,
        0.035,
        0.849
    ],
    120196: [
        0.688,
        0.214,
        0.984
    ],
    120197: [
        0.677,
        0.148,
        0.711
    ],
    120198: [
        0.472,
        0.032,
        0.603
    ],
    120199: [
        0.69,
        0.032,
        0.59
    ],
    120200: [
        0.473,
        0.026,
        0.464
    ],
    120201: [
        0.632,
        0.028,
        0.589
    ],
    120202: [
        0.471,
        0.027,
        0.472
    ],
    120203: [
        0.687,
        0.222,
        0.388
    ],
    120204: [
        0.472,
        0.208,
        0.595
    ],
    120205: [
        0.687,
        0.207,
        0.615
    ],
    120206: [
        0.686,
        0.025,
        0.331
    ],
    120207: [
        0.682,
        0.203,
        0.332
    ],
    120208: [
        0.682,
        0.025,
        0.464
    ],
    120209: [
        0.681,
        0.024,
        0.337
    ],
    120210: [
        0.476,
        0.031,
        0.921
    ],
    120211: [
        0.473,
        0.028,
        0.654
    ],
    120212: [
        0.482,
        0.034,
        0.609
    ],
    120213: [
        0.557,
        0.207,
        0.604
    ],
    120214: [
        0.485,
        0.211,
        0.596
    ],
    120215: [
        0.472,
        0.026,
        0.46
    ],
    120216: [
        0.479,
        0.034,
        0.523
    ],
    120217: [
        0.648,
        0.027,
        0.393,
        {
            ic: 0.014
        }
    ],
    120218: [
        0.472,
        0.032,
        0.589,
        {
            ic: 0.014
        }
    ],
    120219: [
        0.546,
        0.027,
        0.604
    ],
    120220: [
        0.549,
        0.032,
        0.918
    ],
    120221: [
        0.471,
        0.188,
        0.459
    ],
    120222: [
        0.557,
        0.221,
        0.589
    ],
    120223: [
        0.471,
        0.214,
        0.461
    ],
    120224: [
        0.694,
        0,
        0.667
    ],
    120225: [
        0.694,
        0,
        0.667
    ],
    120226: [
        0.705,
        0.011,
        0.639
    ],
    120227: [
        0.694,
        0,
        0.722
    ],
    120228: [
        0.691,
        0,
        0.597
    ],
    120229: [
        0.691,
        0,
        0.569
    ],
    120230: [
        0.704,
        0.011,
        0.667
    ],
    120231: [
        0.694,
        0,
        0.708
    ],
    120232: [
        0.694,
        0,
        0.278
    ],
    120233: [
        0.694,
        0.022,
        0.472
    ],
    120234: [
        0.694,
        0,
        0.694
    ],
    120235: [
        0.694,
        0,
        0.542
    ],
    120236: [
        0.694,
        0,
        0.875
    ],
    120237: [
        0.694,
        0,
        0.708
    ],
    120238: [
        0.715,
        0.022,
        0.736
    ],
    120239: [
        0.694,
        0,
        0.639
    ],
    120240: [
        0.715,
        0.125,
        0.736
    ],
    120241: [
        0.694,
        0,
        0.646
    ],
    120242: [
        0.716,
        0.022,
        0.556
    ],
    120243: [
        0.688,
        0,
        0.681
    ],
    120244: [
        0.694,
        0.022,
        0.688
    ],
    120245: [
        0.694,
        0,
        0.667
    ],
    120246: [
        0.694,
        0,
        0.944
    ],
    120247: [
        0.694,
        0,
        0.667
    ],
    120248: [
        0.694,
        0,
        0.667
    ],
    120249: [
        0.694,
        0,
        0.611
    ],
    120250: [
        0.46,
        0.01,
        0.481
    ],
    120251: [
        0.694,
        0.011,
        0.517
    ],
    120252: [
        0.46,
        0.01,
        0.444
    ],
    120253: [
        0.694,
        0.01,
        0.517
    ],
    120254: [
        0.461,
        0.01,
        0.444
    ],
    120255: [
        0.705,
        0,
        0.306,
        {
            ic: 0.041
        }
    ],
    120256: [
        0.455,
        0.206,
        0.5
    ],
    120257: [
        0.694,
        0,
        0.517
    ],
    120258: [
        0.68,
        0,
        0.239
    ],
    120259: [
        0.68,
        0.205,
        0.267
    ],
    120260: [
        0.694,
        0,
        0.489
    ],
    120261: [
        0.694,
        0,
        0.239
    ],
    120262: [
        0.455,
        0,
        0.794
    ],
    120263: [
        0.455,
        0,
        0.517
    ],
    120264: [
        0.46,
        0.01,
        0.5
    ],
    120265: [
        0.455,
        0.194,
        0.517
    ],
    120266: [
        0.455,
        0.194,
        0.517
    ],
    120267: [
        0.455,
        0,
        0.342
    ],
    120268: [
        0.46,
        0.01,
        0.383
    ],
    120269: [
        0.571,
        0.01,
        0.361
    ],
    120270: [
        0.444,
        0.01,
        0.517
    ],
    120271: [
        0.444,
        0,
        0.461
    ],
    120272: [
        0.444,
        0,
        0.683
    ],
    120273: [
        0.444,
        0,
        0.461
    ],
    120274: [
        0.444,
        0.204,
        0.461
    ],
    120275: [
        0.444,
        0,
        0.435
    ],
    120276: [
        0.694,
        0,
        0.733
    ],
    120277: [
        0.694,
        0,
        0.733
    ],
    120278: [
        0.704,
        0.011,
        0.703
    ],
    120279: [
        0.694,
        0,
        0.794
    ],
    120280: [
        0.691,
        0,
        0.642
    ],
    120281: [
        0.691,
        0,
        0.611
    ],
    120282: [
        0.705,
        0.011,
        0.733
    ],
    120283: [
        0.694,
        0,
        0.794
    ],
    120284: [
        0.694,
        0,
        0.331
    ],
    120285: [
        0.694,
        0.022,
        0.519
    ],
    120286: [
        0.694,
        0,
        0.764
    ],
    120287: [
        0.694,
        0,
        0.581
    ],
    120288: [
        0.694,
        0,
        0.978
    ],
    120289: [
        0.694,
        0,
        0.794
    ],
    120290: [
        0.716,
        0.022,
        0.794
    ],
    120291: [
        0.694,
        0,
        0.703
    ],
    120292: [
        0.716,
        0.106,
        0.794
    ],
    120293: [
        0.694,
        0,
        0.703
    ],
    120294: [
        0.716,
        0.022,
        0.611
    ],
    120295: [
        0.688,
        0,
        0.733
    ],
    120296: [
        0.694,
        0.022,
        0.764
    ],
    120297: [
        0.694,
        0,
        0.733
    ],
    120298: [
        0.694,
        0,
        1.039
    ],
    120299: [
        0.694,
        0,
        0.733
    ],
    120300: [
        0.694,
        0,
        0.733
    ],
    120301: [
        0.694,
        0,
        0.672
    ],
    120302: [
        0.475,
        0.011,
        0.525
    ],
    120303: [
        0.694,
        0.01,
        0.561
    ],
    120304: [
        0.475,
        0.011,
        0.489
    ],
    120305: [
        0.694,
        0.011,
        0.561
    ],
    120306: [
        0.474,
        0.01,
        0.511
    ],
    120307: [
        0.705,
        0,
        0.336,
        {
            ic: 0.045
        }
    ],
    120308: [
        0.469,
        0.206,
        0.55
    ],
    120309: [
        0.694,
        0,
        0.561
    ],
    120310: [
        0.695,
        0,
        0.256
    ],
    120311: [
        0.695,
        0.205,
        0.286
    ],
    120312: [
        0.694,
        0,
        0.531
    ],
    120313: [
        0.694,
        0,
        0.256
    ],
    120314: [
        0.469,
        0,
        0.867
    ],
    120315: [
        0.468,
        0,
        0.561
    ],
    120316: [
        0.474,
        0.011,
        0.55
    ],
    120317: [
        0.469,
        0.194,
        0.561
    ],
    120318: [
        0.469,
        0.194,
        0.561
    ],
    120319: [
        0.469,
        0,
        0.372
    ],
    120320: [
        0.474,
        0.01,
        0.422
    ],
    120321: [
        0.589,
        0.01,
        0.404
    ],
    120322: [
        0.458,
        0.011,
        0.561
    ],
    120323: [
        0.458,
        0,
        0.5
    ],
    120324: [
        0.458,
        0,
        0.744
    ],
    120325: [
        0.458,
        0,
        0.5
    ],
    120326: [
        0.458,
        0.205,
        0.5
    ],
    120327: [
        0.458,
        0,
        0.476
    ],
    120328: [
        0.694,
        0,
        0.667
    ],
    120329: [
        0.694,
        0,
        0.667,
        {
            ic: 0.029
        }
    ],
    120330: [
        0.705,
        0.01,
        0.639,
        {
            ic: 0.08
        }
    ],
    120331: [
        0.694,
        0,
        0.722,
        {
            ic: 0.025
        }
    ],
    120332: [
        0.691,
        0,
        0.597,
        {
            ic: 0.091
        }
    ],
    120333: [
        0.691,
        0,
        0.569,
        {
            ic: 0.104
        }
    ],
    120334: [
        0.705,
        0.011,
        0.667,
        {
            ic: 0.063
        }
    ],
    120335: [
        0.694,
        0,
        0.708,
        {
            ic: 0.06
        }
    ],
    120336: [
        0.694,
        0,
        0.278,
        {
            ic: 0.06
        }
    ],
    120337: [
        0.694,
        0.022,
        0.472,
        {
            ic: 0.063
        }
    ],
    120338: [
        0.694,
        0,
        0.694,
        {
            ic: 0.091
        }
    ],
    120339: [
        0.694,
        0,
        0.542
    ],
    120340: [
        0.694,
        0,
        0.875,
        {
            ic: 0.054
        }
    ],
    120341: [
        0.694,
        0,
        0.708,
        {
            ic: 0.058
        }
    ],
    120342: [
        0.716,
        0.022,
        0.736,
        {
            ic: 0.027
        }
    ],
    120343: [
        0.694,
        0,
        0.639,
        {
            ic: 0.051
        }
    ],
    120344: [
        0.716,
        0.125,
        0.736,
        {
            ic: 0.027
        }
    ],
    120345: [
        0.694,
        0,
        0.646,
        {
            ic: 0.052
        }
    ],
    120346: [
        0.716,
        0.022,
        0.556,
        {
            ic: 0.053
        }
    ],
    120347: [
        0.688,
        0,
        0.681,
        {
            ic: 0.109
        }
    ],
    120348: [
        0.694,
        0.022,
        0.688,
        {
            ic: 0.059
        }
    ],
    120349: [
        0.694,
        0,
        0.667,
        {
            ic: 0.132
        }
    ],
    120350: [
        0.694,
        0,
        0.944,
        {
            ic: 0.132
        }
    ],
    120351: [
        0.694,
        0,
        0.667,
        {
            ic: 0.091
        }
    ],
    120352: [
        0.694,
        0,
        0.667,
        {
            ic: 0.143
        }
    ],
    120353: [
        0.694,
        0,
        0.611,
        {
            ic: 0.091
        }
    ],
    120354: [
        0.461,
        0.01,
        0.481
    ],
    120355: [
        0.694,
        0.011,
        0.517,
        {
            ic: 0.022
        }
    ],
    120356: [
        0.46,
        0.011,
        0.444,
        {
            ic: 0.055
        }
    ],
    120357: [
        0.694,
        0.01,
        0.517,
        {
            ic: 0.071
        }
    ],
    120358: [
        0.46,
        0.011,
        0.444,
        {
            ic: 0.028
        }
    ],
    120359: [
        0.705,
        0,
        0.306,
        {
            ic: 0.188
        }
    ],
    120360: [
        0.455,
        0.206,
        0.5,
        {
            ic: 0.068
        }
    ],
    120361: [
        0.694,
        0,
        0.517
    ],
    120362: [
        0.68,
        0,
        0.239,
        {
            ic: 0.076
        }
    ],
    120363: [
        0.68,
        0.204,
        0.267,
        {
            ic: 0.069
        }
    ],
    120364: [
        0.694,
        0,
        0.489,
        {
            ic: 0.054
        }
    ],
    120365: [
        0.694,
        0,
        0.239,
        {
            ic: 0.072
        }
    ],
    120366: [
        0.455,
        0,
        0.794
    ],
    120367: [
        0.454,
        0,
        0.517
    ],
    120368: [
        0.461,
        0.011,
        0.5,
        {
            ic: 0.023
        }
    ],
    120369: [
        0.455,
        0.194,
        0.517,
        {
            ic: 0.021
        }
    ],
    120370: [
        0.455,
        0.194,
        0.517,
        {
            ic: 0.021
        }
    ],
    120371: [
        0.455,
        0,
        0.342,
        {
            ic: 0.082
        }
    ],
    120372: [
        0.461,
        0.011,
        0.383,
        {
            ic: 0.053
        }
    ],
    120373: [
        0.571,
        0.011,
        0.361,
        {
            ic: 0.049
        }
    ],
    120374: [
        0.444,
        0.01,
        0.517,
        {
            ic: 0.02
        }
    ],
    120375: [
        0.444,
        0,
        0.461,
        {
            ic: 0.079
        }
    ],
    120376: [
        0.444,
        0,
        0.683,
        {
            ic: 0.079
        }
    ],
    120377: [
        0.444,
        0,
        0.461,
        {
            ic: 0.076
        }
    ],
    120378: [
        0.444,
        0.205,
        0.461,
        {
            ic: 0.079
        }
    ],
    120379: [
        0.444,
        0,
        0.435,
        {
            ic: 0.059
        }
    ],
    120432: [
        0.623,
        0,
        0.525
    ],
    120433: [
        0.611,
        0,
        0.525
    ],
    120434: [
        0.622,
        0.011,
        0.525
    ],
    120435: [
        0.611,
        0,
        0.525
    ],
    120436: [
        0.611,
        0,
        0.525
    ],
    120437: [
        0.611,
        0,
        0.525
    ],
    120438: [
        0.622,
        0.011,
        0.525
    ],
    120439: [
        0.611,
        0,
        0.525
    ],
    120440: [
        0.611,
        0,
        0.525
    ],
    120441: [
        0.611,
        0.011,
        0.525
    ],
    120442: [
        0.611,
        0,
        0.525
    ],
    120443: [
        0.611,
        0,
        0.525
    ],
    120444: [
        0.611,
        0,
        0.525
    ],
    120445: [
        0.611,
        0,
        0.525
    ],
    120446: [
        0.621,
        0.01,
        0.525
    ],
    120447: [
        0.611,
        0,
        0.525
    ],
    120448: [
        0.621,
        0.138,
        0.525
    ],
    120449: [
        0.611,
        0.011,
        0.525
    ],
    120450: [
        0.622,
        0.011,
        0.525
    ],
    120451: [
        0.611,
        0,
        0.525
    ],
    120452: [
        0.611,
        0.011,
        0.525
    ],
    120453: [
        0.611,
        0.007,
        0.525
    ],
    120454: [
        0.611,
        0.007,
        0.525
    ],
    120455: [
        0.611,
        0,
        0.525
    ],
    120456: [
        0.611,
        0,
        0.525
    ],
    120457: [
        0.611,
        0,
        0.525
    ],
    120458: [
        0.439,
        0.006,
        0.525
    ],
    120459: [
        0.611,
        0.006,
        0.525
    ],
    120460: [
        0.44,
        0.006,
        0.525
    ],
    120461: [
        0.611,
        0.006,
        0.525
    ],
    120462: [
        0.44,
        0.006,
        0.525
    ],
    120463: [
        0.617,
        0,
        0.525
    ],
    120464: [
        0.442,
        0.229,
        0.525
    ],
    120465: [
        0.611,
        0,
        0.525
    ],
    120466: [
        0.612,
        0,
        0.525
    ],
    120467: [
        0.612,
        0.228,
        0.525
    ],
    120468: [
        0.611,
        0,
        0.525
    ],
    120469: [
        0.611,
        0,
        0.525
    ],
    120470: [
        0.436,
        0,
        0.525,
        {
            ic: 0.011
        }
    ],
    120471: [
        0.436,
        0,
        0.525
    ],
    120472: [
        0.44,
        0.006,
        0.525
    ],
    120473: [
        0.437,
        0.221,
        0.525
    ],
    120474: [
        0.437,
        0.221,
        0.525,
        {
            ic: 0.02
        }
    ],
    120475: [
        0.437,
        0,
        0.525
    ],
    120476: [
        0.44,
        0.006,
        0.525
    ],
    120477: [
        0.554,
        0.006,
        0.525
    ],
    120478: [
        0.431,
        0.005,
        0.525
    ],
    120479: [
        0.431,
        0,
        0.525
    ],
    120480: [
        0.431,
        0,
        0.525
    ],
    120481: [
        0.431,
        0,
        0.525
    ],
    120482: [
        0.431,
        0.228,
        0.525
    ],
    120483: [
        0.431,
        0,
        0.525
    ],
    120488: [
        0.698,
        0,
        0.869
    ],
    120489: [
        0.686,
        0,
        0.818
    ],
    120490: [
        0.68,
        0,
        0.692
    ],
    120491: [
        0.698,
        0,
        0.958
    ],
    120492: [
        0.68,
        0,
        0.756
    ],
    120493: [
        0.686,
        0,
        0.703
    ],
    120494: [
        0.686,
        0,
        0.9
    ],
    120495: [
        0.696,
        0.01,
        0.894
    ],
    120496: [
        0.686,
        0,
        0.436
    ],
    120497: [
        0.686,
        0,
        0.901
    ],
    120498: [
        0.698,
        0,
        0.806
    ],
    120499: [
        0.686,
        0,
        1.092
    ],
    120500: [
        0.686,
        0,
        0.9
    ],
    120501: [
        0.675,
        0,
        0.767
    ],
    120502: [
        0.696,
        0.01,
        0.864
    ],
    120503: [
        0.68,
        0,
        0.9
    ],
    120504: [
        0.686,
        0,
        0.786
    ],
    120506: [
        0.686,
        0,
        0.831
    ],
    120507: [
        0.675,
        0,
        0.8
    ],
    120508: [
        0.697,
        0,
        0.894
    ],
    120509: [
        0.686,
        0,
        0.831
    ],
    120510: [
        0.686,
        0,
        0.869
    ],
    120511: [
        0.686,
        0,
        0.894
    ],
    120512: [
        0.696,
        0,
        0.831
    ],
    120513: [
        0.686,
        0.024,
        0.958
    ],
    120546: [
        0.716,
        0,
        0.75,
        {
            sk: 0.139
        }
    ],
    120547: [
        0.683,
        0,
        0.759,
        {
            sk: 0.0833
        }
    ],
    120548: [
        0.68,
        0,
        0.615,
        {
            ic: 0.106,
            sk: 0.0833
        }
    ],
    120549: [
        0.716,
        0,
        0.833,
        {
            sk: 0.167
        }
    ],
    120550: [
        0.68,
        0,
        0.738,
        {
            ic: 0.026,
            sk: 0.0833
        }
    ],
    120551: [
        0.683,
        0,
        0.683,
        {
            ic: 0.04,
            sk: 0.0833
        }
    ],
    120552: [
        0.683,
        0,
        0.831,
        {
            ic: 0.057,
            sk: 0.0556
        }
    ],
    120553: [
        0.704,
        0.022,
        0.763,
        {
            sk: 0.0833
        }
    ],
    120554: [
        0.683,
        0,
        0.44,
        {
            ic: 0.064,
            sk: 0.111
        }
    ],
    120555: [
        0.683,
        0,
        0.849,
        {
            ic: 0.04,
            sk: 0.0556
        }
    ],
    120556: [
        0.716,
        0,
        0.694,
        {
            sk: 0.167
        }
    ],
    120557: [
        0.683,
        0,
        0.97,
        {
            ic: 0.081,
            sk: 0.0833
        }
    ],
    120558: [
        0.683,
        0,
        0.803,
        {
            ic: 0.085,
            sk: 0.0833
        }
    ],
    120559: [
        0.677,
        0,
        0.742,
        {
            ic: 0.035,
            sk: 0.0833
        }
    ],
    120560: [
        0.704,
        0.022,
        0.763,
        {
            sk: 0.0833
        }
    ],
    120561: [
        0.68,
        0,
        0.831,
        {
            ic: 0.056,
            sk: 0.0556
        }
    ],
    120562: [
        0.683,
        0,
        0.642,
        {
            ic: 0.109,
            sk: 0.0833
        }
    ],
    120564: [
        0.683,
        0,
        0.78,
        {
            ic: 0.026,
            sk: 0.0833
        }
    ],
    120565: [
        0.677,
        0,
        0.584,
        {
            ic: 0.12,
            sk: 0.0833
        }
    ],
    120566: [
        0.705,
        0,
        0.583,
        {
            ic: 0.117,
            sk: 0.0556
        }
    ],
    120567: [
        0.683,
        0,
        0.667,
        {
            sk: 0.0833
        }
    ],
    120568: [
        0.683,
        0,
        0.828,
        {
            ic: 0.024,
            sk: 0.0833
        }
    ],
    120569: [
        0.683,
        0,
        0.612,
        {
            ic: 0.08,
            sk: 0.0556
        }
    ],
    120570: [
        0.704,
        0,
        0.772,
        {
            ic: 0.014,
            sk: 0.0833
        }
    ],
    120572: [
        0.442,
        0.011,
        0.64,
        {
            sk: 0.0278
        }
    ],
    120573: [
        0.705,
        0.194,
        0.566,
        {
            sk: 0.0833
        }
    ],
    120574: [
        0.441,
        0.216,
        0.518,
        {
            ic: 0.025
        }
    ],
    120575: [
        0.717,
        0.01,
        0.444,
        {
            sk: 0.0556
        }
    ],
    120576: [
        0.452,
        0.022,
        0.466,
        {
            sk: 0.0833
        }
    ],
    120577: [
        0.704,
        0.204,
        0.438,
        {
            ic: 0.033,
            sk: 0.0833
        }
    ],
    120578: [
        0.442,
        0.216,
        0.497,
        {
            sk: 0.0556
        }
    ],
    120579: [
        0.705,
        0.01,
        0.469,
        {
            sk: 0.0833
        }
    ],
    120580: [
        0.442,
        0.01,
        0.354,
        {
            sk: 0.0556
        }
    ],
    120581: [
        0.442,
        0.011,
        0.576
    ],
    120582: [
        0.694,
        0.012,
        0.583
    ],
    120583: [
        0.442,
        0.216,
        0.603,
        {
            sk: 0.0278
        }
    ],
    120584: [
        0.442,
        0,
        0.494,
        {
            ic: 0.036,
            sk: 0.0278
        }
    ],
    120585: [
        0.704,
        0.205,
        0.438,
        {
            sk: 0.111
        }
    ],
    120586: [
        0.441,
        0.011,
        0.485,
        {
            sk: 0.0556
        }
    ],
    120587: [
        0.431,
        0.011,
        0.57
    ],
    120588: [
        0.442,
        0.216,
        0.517,
        {
            sk: 0.0833
        }
    ],
    120589: [
        0.442,
        0.107,
        0.363,
        {
            ic: 0.042,
            sk: 0.0833
        }
    ],
    120590: [
        0.431,
        0.011,
        0.571
    ],
    120591: [
        0.431,
        0.013,
        0.437,
        {
            ic: 0.08,
            sk: 0.0278
        }
    ],
    120592: [
        0.443,
        0.01,
        0.54,
        {
            sk: 0.0278
        }
    ],
    120593: [
        0.442,
        0.218,
        0.654,
        {
            sk: 0.0833
        }
    ],
    120594: [
        0.442,
        0.204,
        0.626,
        {
            sk: 0.0556
        }
    ],
    120595: [
        0.694,
        0.205,
        0.651,
        {
            sk: 0.111
        }
    ],
    120596: [
        0.443,
        0.011,
        0.622
    ],
    120597: [
        0.715,
        0.022,
        0.531,
        {
            ic: 0.035,
            sk: 0.0833
        }
    ],
    120598: [
        0.431,
        0.011,
        0.406,
        {
            sk: 0.0556
        }
    ],
    120599: [
        0.705,
        0.011,
        0.591,
        {
            sk: 0.0833
        }
    ],
    120600: [
        0.434,
        0.006,
        0.667,
        {
            ic: 0.067
        }
    ],
    120601: [
        0.694,
        0.205,
        0.596,
        {
            sk: 0.0833
        }
    ],
    120602: [
        0.442,
        0.194,
        0.517,
        {
            sk: 0.0833
        }
    ],
    120603: [
        0.431,
        0.01,
        0.828
    ],
    120604: [
        0.711,
        0,
        0.869,
        {
            sk: 0.16
        }
    ],
    120605: [
        0.686,
        0,
        0.866,
        {
            sk: 0.0958
        }
    ],
    120606: [
        0.68,
        0,
        0.657,
        {
            ic: 0.12,
            sk: 0.0958
        }
    ],
    120607: [
        0.711,
        0,
        0.958,
        {
            sk: 0.192
        }
    ],
    120608: [
        0.68,
        0,
        0.81,
        {
            ic: 0.015,
            sk: 0.0958
        }
    ],
    120609: [
        0.686,
        0,
        0.773,
        {
            ic: 0.032,
            sk: 0.0958
        }
    ],
    120610: [
        0.686,
        0,
        0.982,
        {
            ic: 0.045,
            sk: 0.0639
        }
    ],
    120611: [
        0.702,
        0.017,
        0.867,
        {
            sk: 0.0958
        }
    ],
    120612: [
        0.686,
        0,
        0.511,
        {
            ic: 0.062,
            sk: 0.128
        }
    ],
    120613: [
        0.686,
        0,
        0.971,
        {
            ic: 0.032,
            sk: 0.0639
        }
    ],
    120614: [
        0.711,
        0,
        0.806,
        {
            sk: 0.192
        }
    ],
    120615: [
        0.686,
        0,
        1.142,
        {
            ic: 0.077,
            sk: 0.0958
        }
    ],
    120616: [
        0.686,
        0,
        0.95,
        {
            ic: 0.077,
            sk: 0.0958
        }
    ],
    120617: [
        0.675,
        0,
        0.841,
        {
            ic: 0.026,
            sk: 0.0958
        }
    ],
    120618: [
        0.703,
        0.017,
        0.837,
        {
            sk: 0.0958
        }
    ],
    120619: [
        0.68,
        0,
        0.982,
        {
            ic: 0.044,
            sk: 0.0639
        }
    ],
    120620: [
        0.686,
        0,
        0.723,
        {
            ic: 0.124,
            sk: 0.0958
        }
    ],
    120622: [
        0.686,
        0,
        0.885,
        {
            ic: 0.017,
            sk: 0.0958
        }
    ],
    120623: [
        0.675,
        0,
        0.637,
        {
            ic: 0.135,
            sk: 0.0958
        }
    ],
    120624: [
        0.703,
        0,
        0.671,
        {
            ic: 0.131,
            sk: 0.0639
        }
    ],
    120625: [
        0.686,
        0,
        0.767,
        {
            sk: 0.0958
        }
    ],
    120626: [
        0.686,
        0,
        0.947,
        {
            sk: 0.0958
        }
    ],
    120627: [
        0.686,
        0,
        0.714,
        {
            ic: 0.076,
            sk: 0.0639
        }
    ],
    120628: [
        0.703,
        0,
        0.879,
        {
            sk: 0.0958
        }
    ],
    120630: [
        0.452,
        0.008,
        0.761,
        {
            sk: 0.0319
        }
    ],
    120631: [
        0.701,
        0.194,
        0.66,
        {
            sk: 0.0958
        }
    ],
    120632: [
        0.451,
        0.211,
        0.59,
        {
            ic: 0.027
        }
    ],
    120633: [
        0.725,
        0.008,
        0.522,
        {
            sk: 0.0639
        }
    ],
    120634: [
        0.461,
        0.017,
        0.529,
        {
            sk: 0.0958
        }
    ],
    120635: [
        0.711,
        0.202,
        0.508,
        {
            ic: 0.013,
            sk: 0.0958
        }
    ],
    120636: [
        0.452,
        0.211,
        0.6,
        {
            sk: 0.0639
        }
    ],
    120637: [
        0.702,
        0.008,
        0.562,
        {
            sk: 0.0958
        }
    ],
    120638: [
        0.452,
        0.008,
        0.412,
        {
            sk: 0.0639
        }
    ],
    120639: [
        0.452,
        0.008,
        0.668
    ],
    120640: [
        0.694,
        0.013,
        0.671
    ],
    120641: [
        0.452,
        0.211,
        0.708,
        {
            sk: 0.0319
        }
    ],
    120642: [
        0.452,
        0,
        0.577,
        {
            ic: 0.031,
            sk: 0.0319
        }
    ],
    120643: [
        0.711,
        0.201,
        0.508,
        {
            sk: 0.128
        }
    ],
    120644: [
        0.452,
        0.008,
        0.585,
        {
            sk: 0.0639
        }
    ],
    120645: [
        0.444,
        0.008,
        0.682
    ],
    120646: [
        0.451,
        0.211,
        0.612,
        {
            sk: 0.0958
        }
    ],
    120647: [
        0.451,
        0.105,
        0.424,
        {
            ic: 0.033,
            sk: 0.0958
        }
    ],
    120648: [
        0.444,
        0.008,
        0.686
    ],
    120649: [
        0.444,
        0.013,
        0.521,
        {
            ic: 0.089,
            sk: 0.0319
        }
    ],
    120650: [
        0.453,
        0.008,
        0.631,
        {
            sk: 0.0319
        }
    ],
    120651: [
        0.452,
        0.216,
        0.747,
        {
            sk: 0.0958
        }
    ],
    120652: [
        0.452,
        0.201,
        0.718,
        {
            sk: 0.0639
        }
    ],
    120653: [
        0.694,
        0.202,
        0.758,
        {
            sk: 0.128
        }
    ],
    120654: [
        0.453,
        0.008,
        0.718
    ],
    120655: [
        0.71,
        0.017,
        0.628,
        {
            ic: 0.029,
            sk: 0.0958
        }
    ],
    120656: [
        0.444,
        0.007,
        0.483,
        {
            sk: 0.0639
        }
    ],
    120657: [
        0.701,
        0.008,
        0.692,
        {
            sk: 0.0958
        }
    ],
    120658: [
        0.434,
        0.006,
        0.667,
        {
            ic: 0.067
        }
    ],
    120659: [
        0.694,
        0.202,
        0.712,
        {
            sk: 0.0958
        }
    ],
    120660: [
        0.451,
        0.194,
        0.612,
        {
            sk: 0.0958
        }
    ],
    120661: [
        0.444,
        0.008,
        0.975
    ],
    120662: [
        0.694,
        0,
        0.733
    ],
    120663: [
        0.694,
        0,
        0.733
    ],
    120664: [
        0.691,
        0,
        0.581
    ],
    120665: [
        0.694,
        0,
        0.917
    ],
    120666: [
        0.691,
        0,
        0.642
    ],
    120667: [
        0.694,
        0,
        0.672
    ],
    120668: [
        0.694,
        0,
        0.794
    ],
    120669: [
        0.716,
        0.022,
        0.856
    ],
    120670: [
        0.694,
        0,
        0.331
    ],
    120671: [
        0.694,
        0,
        0.764
    ],
    120672: [
        0.694,
        0,
        0.672
    ],
    120673: [
        0.694,
        0,
        0.978
    ],
    120674: [
        0.694,
        0,
        0.794
    ],
    120675: [
        0.688,
        0,
        0.733
    ],
    120676: [
        0.716,
        0.022,
        0.794
    ],
    120677: [
        0.691,
        0,
        0.794
    ],
    120678: [
        0.694,
        0,
        0.703
    ],
    120680: [
        0.694,
        0,
        0.794
    ],
    120681: [
        0.688,
        0,
        0.733
    ],
    120682: [
        0.715,
        0,
        0.856
    ],
    120683: [
        0.694,
        0,
        0.794
    ],
    120684: [
        0.694,
        0,
        0.733
    ],
    120685: [
        0.694,
        0,
        0.856
    ],
    120686: [
        0.716,
        0,
        0.794
    ],
    120782: [
        0.654,
        0.01,
        0.575
    ],
    120783: [
        0.655,
        0,
        0.575
    ],
    120784: [
        0.654,
        0,
        0.575
    ],
    120785: [
        0.655,
        0.011,
        0.575
    ],
    120786: [
        0.656,
        0,
        0.575
    ],
    120787: [
        0.655,
        0.011,
        0.575
    ],
    120788: [
        0.655,
        0.011,
        0.575
    ],
    120789: [
        0.676,
        0.011,
        0.575
    ],
    120790: [
        0.654,
        0.011,
        0.575
    ],
    120791: [
        0.654,
        0.011,
        0.575
    ],
    120802: [
        0.678,
        0.022,
        0.5
    ],
    120803: [
        0.678,
        0,
        0.5
    ],
    120804: [
        0.677,
        0,
        0.5
    ],
    120805: [
        0.678,
        0.022,
        0.5
    ],
    120806: [
        0.656,
        0,
        0.5
    ],
    120807: [
        0.656,
        0.021,
        0.5
    ],
    120808: [
        0.677,
        0.022,
        0.5
    ],
    120809: [
        0.656,
        0.011,
        0.5
    ],
    120810: [
        0.678,
        0.022,
        0.5
    ],
    120811: [
        0.677,
        0.022,
        0.5
    ],
    120812: [
        0.715,
        0.022,
        0.55
    ],
    120813: [
        0.716,
        0,
        0.55
    ],
    120814: [
        0.716,
        0,
        0.55
    ],
    120815: [
        0.716,
        0.022,
        0.55
    ],
    120816: [
        0.694,
        0,
        0.55
    ],
    120817: [
        0.694,
        0.022,
        0.55
    ],
    120818: [
        0.716,
        0.022,
        0.55
    ],
    120819: [
        0.695,
        0.011,
        0.55
    ],
    120820: [
        0.715,
        0.022,
        0.55
    ],
    120821: [
        0.716,
        0.022,
        0.55
    ],
    120822: [
        0.621,
        0.01,
        0.525
    ],
    120823: [
        0.622,
        0,
        0.525
    ],
    120824: [
        0.622,
        0,
        0.525
    ],
    120825: [
        0.622,
        0.011,
        0.525
    ],
    120826: [
        0.624,
        0,
        0.525
    ],
    120827: [
        0.611,
        0.01,
        0.525
    ],
    120828: [
        0.622,
        0.011,
        0.525
    ],
    120829: [
        0.627,
        0.01,
        0.525
    ],
    120830: [
        0.621,
        0.01,
        0.525
    ],
    120831: [
        0.622,
        0.011,
        0.525
    ]
};

},{}],"23gUc":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.sansSerifBoldItalic = void 0;
var FontData_js_1 = require("../../FontData.js");
var sans_serif_bold_italic_js_1 = require("../../../common/fonts/tex/sans-serif-bold-italic.js");
exports.sansSerifBoldItalic = FontData_js_1.AddCSS(sans_serif_bold_italic_js_1.sansSerifBoldItalic, {
    305: {
        f: 'SSB'
    },
    567: {
        f: 'SSB'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/sans-serif-bold-italic.js":"2RLSx"}],"2RLSx":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.sansSerifBoldItalic = void 0;
exports.sansSerifBoldItalic = {
    305: [
        0.458,
        0,
        0.256
    ],
    567: [
        0.458,
        0.205,
        0.286
    ]
};

},{}],"3CptK":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.sansSerifBold = void 0;
var FontData_js_1 = require("../../FontData.js");
var sans_serif_bold_js_1 = require("../../../common/fonts/tex/sans-serif-bold.js");
exports.sansSerifBold = FontData_js_1.AddCSS(sans_serif_bold_js_1.sansSerifBold, {
    8213: {
        c: '\\2014'
    },
    8215: {
        c: '_'
    },
    8260: {
        c: '/'
    },
    8710: {
        c: '\\394'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/sans-serif-bold.js":"6x2bW"}],"6x2bW":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.sansSerifBold = void 0;
exports.sansSerifBold = {
    33: [
        0.694,
        0,
        0.367
    ],
    34: [
        0.694,
        -0.442,
        0.558
    ],
    35: [
        0.694,
        0.193,
        0.917
    ],
    36: [
        0.75,
        0.056,
        0.55
    ],
    37: [
        0.75,
        0.056,
        1.029
    ],
    38: [
        0.716,
        0.022,
        0.831
    ],
    39: [
        0.694,
        -0.442,
        0.306
    ],
    40: [
        0.75,
        0.249,
        0.428
    ],
    41: [
        0.75,
        0.25,
        0.428
    ],
    42: [
        0.75,
        -0.293,
        0.55
    ],
    43: [
        0.617,
        0.116,
        0.856
    ],
    44: [
        0.146,
        0.106,
        0.306
    ],
    45: [
        0.273,
        -0.186,
        0.367
    ],
    46: [
        0.146,
        0,
        0.306
    ],
    47: [
        0.75,
        0.249,
        0.55
    ],
    58: [
        0.458,
        0,
        0.306
    ],
    59: [
        0.458,
        0.106,
        0.306
    ],
    61: [
        0.407,
        -0.094,
        0.856
    ],
    63: [
        0.705,
        0,
        0.519
    ],
    64: [
        0.704,
        0.011,
        0.733
    ],
    91: [
        0.75,
        0.25,
        0.343
    ],
    93: [
        0.75,
        0.25,
        0.343
    ],
    94: [
        0.694,
        -0.537,
        0.55
    ],
    95: [
        -0.023,
        0.11,
        0.55
    ],
    126: [
        0.344,
        -0.198,
        0.55
    ],
    305: [
        0.458,
        0,
        0.256
    ],
    567: [
        0.458,
        0.205,
        0.286
    ],
    768: [
        0.694,
        -0.537,
        0
    ],
    769: [
        0.694,
        -0.537,
        0
    ],
    770: [
        0.694,
        -0.537,
        0
    ],
    771: [
        0.694,
        -0.548,
        0
    ],
    772: [
        0.66,
        -0.56,
        0
    ],
    774: [
        0.694,
        -0.552,
        0
    ],
    775: [
        0.695,
        -0.596,
        0
    ],
    776: [
        0.695,
        -0.595,
        0
    ],
    778: [
        0.694,
        -0.538,
        0
    ],
    779: [
        0.694,
        -0.537,
        0
    ],
    780: [
        0.657,
        -0.5,
        0
    ],
    8211: [
        0.327,
        -0.24,
        0.55
    ],
    8212: [
        0.327,
        -0.24,
        1.1
    ],
    8213: [
        0.327,
        -0.24,
        1.1
    ],
    8215: [
        -0.023,
        0.11,
        0.55
    ],
    8216: [
        0.694,
        -0.443,
        0.306
    ],
    8217: [
        0.694,
        -0.442,
        0.306
    ],
    8220: [
        0.694,
        -0.443,
        0.558
    ],
    8221: [
        0.694,
        -0.442,
        0.558
    ],
    8260: [
        0.75,
        0.249,
        0.55
    ],
    8710: [
        0.694,
        0,
        0.917
    ]
};

},{}],"1avXR":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.sansSerifItalic = void 0;
var FontData_js_1 = require("../../FontData.js");
var sans_serif_italic_js_1 = require("../../../common/fonts/tex/sans-serif-italic.js");
exports.sansSerifItalic = FontData_js_1.AddCSS(sans_serif_italic_js_1.sansSerifItalic, {
    913: {
        c: 'A'
    },
    914: {
        c: 'B'
    },
    917: {
        c: 'E'
    },
    918: {
        c: 'Z'
    },
    919: {
        c: 'H'
    },
    921: {
        c: 'I'
    },
    922: {
        c: 'K'
    },
    924: {
        c: 'M'
    },
    925: {
        c: 'N'
    },
    927: {
        c: 'O'
    },
    929: {
        c: 'P'
    },
    932: {
        c: 'T'
    },
    935: {
        c: 'X'
    },
    8213: {
        c: '\\2014'
    },
    8215: {
        c: '_'
    },
    8260: {
        c: '/'
    },
    8710: {
        c: '\\394'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/sans-serif-italic.js":"3zfqh"}],"3zfqh":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.sansSerifItalic = void 0;
exports.sansSerifItalic = {
    33: [
        0.694,
        0,
        0.319,
        {
            ic: 0.036
        }
    ],
    34: [
        0.694,
        -0.471,
        0.5
    ],
    35: [
        0.694,
        0.194,
        0.833,
        {
            ic: 0.018
        }
    ],
    36: [
        0.75,
        0.056,
        0.5,
        {
            ic: 0.065
        }
    ],
    37: [
        0.75,
        0.056,
        0.833
    ],
    38: [
        0.716,
        0.022,
        0.758
    ],
    39: [
        0.694,
        -0.471,
        0.278,
        {
            ic: 0.057
        }
    ],
    40: [
        0.75,
        0.25,
        0.389,
        {
            ic: 0.102
        }
    ],
    41: [
        0.75,
        0.25,
        0.389
    ],
    42: [
        0.75,
        -0.306,
        0.5,
        {
            ic: 0.068
        }
    ],
    43: [
        0.583,
        0.083,
        0.778
    ],
    44: [
        0.098,
        0.125,
        0.278
    ],
    45: [
        0.259,
        -0.186,
        0.333
    ],
    46: [
        0.098,
        0,
        0.278
    ],
    47: [
        0.75,
        0.25,
        0.5,
        {
            ic: 0.1
        }
    ],
    48: [
        0.678,
        0.022,
        0.5,
        {
            ic: 0.049
        }
    ],
    49: [
        0.678,
        0,
        0.5
    ],
    50: [
        0.678,
        0,
        0.5,
        {
            ic: 0.051
        }
    ],
    51: [
        0.678,
        0.022,
        0.5,
        {
            ic: 0.044
        }
    ],
    52: [
        0.656,
        0,
        0.5,
        {
            ic: 0.021
        }
    ],
    53: [
        0.656,
        0.022,
        0.5,
        {
            ic: 0.055
        }
    ],
    54: [
        0.678,
        0.022,
        0.5,
        {
            ic: 0.048
        }
    ],
    55: [
        0.656,
        0.011,
        0.5,
        {
            ic: 0.096
        }
    ],
    56: [
        0.678,
        0.022,
        0.5,
        {
            ic: 0.054
        }
    ],
    57: [
        0.677,
        0.022,
        0.5,
        {
            ic: 0.045
        }
    ],
    58: [
        0.444,
        0,
        0.278
    ],
    59: [
        0.444,
        0.125,
        0.278
    ],
    61: [
        0.37,
        -0.13,
        0.778,
        {
            ic: 0.018
        }
    ],
    63: [
        0.704,
        0,
        0.472,
        {
            ic: 0.064
        }
    ],
    64: [
        0.705,
        0.01,
        0.667,
        {
            ic: 0.04
        }
    ],
    91: [
        0.75,
        0.25,
        0.289,
        {
            ic: 0.136
        }
    ],
    93: [
        0.75,
        0.25,
        0.289,
        {
            ic: 0.064
        }
    ],
    94: [
        0.694,
        -0.527,
        0.5,
        {
            ic: 0.033
        }
    ],
    95: [
        -0.038,
        0.114,
        0.5,
        {
            ic: 0.065
        }
    ],
    126: [
        0.327,
        -0.193,
        0.5,
        {
            ic: 0.06
        }
    ],
    305: [
        0.444,
        0,
        0.239,
        {
            ic: 0.019
        }
    ],
    567: [
        0.444,
        0.204,
        0.267,
        {
            ic: 0.019
        }
    ],
    768: [
        0.694,
        -0.527,
        0
    ],
    769: [
        0.694,
        -0.527,
        0,
        {
            ic: 0.063
        }
    ],
    770: [
        0.694,
        -0.527,
        0,
        {
            ic: 0.033
        }
    ],
    771: [
        0.677,
        -0.543,
        0,
        {
            ic: 0.06
        }
    ],
    772: [
        0.631,
        -0.552,
        0,
        {
            ic: 0.064
        }
    ],
    774: [
        0.694,
        -0.508,
        0,
        {
            ic: 0.073
        }
    ],
    775: [
        0.68,
        -0.576,
        0
    ],
    776: [
        0.68,
        -0.582,
        0,
        {
            ic: 0.04
        }
    ],
    778: [
        0.693,
        -0.527,
        0
    ],
    779: [
        0.694,
        -0.527,
        0,
        {
            ic: 0.063
        }
    ],
    780: [
        0.654,
        -0.487,
        0,
        {
            ic: 0.06
        }
    ],
    913: [
        0.694,
        0,
        0.667
    ],
    914: [
        0.694,
        0,
        0.667,
        {
            ic: 0.029
        }
    ],
    915: [
        0.691,
        0,
        0.542,
        {
            ic: 0.104
        }
    ],
    916: [
        0.694,
        0,
        0.833
    ],
    917: [
        0.691,
        0,
        0.597,
        {
            ic: 0.091
        }
    ],
    918: [
        0.694,
        0,
        0.611,
        {
            ic: 0.091
        }
    ],
    919: [
        0.694,
        0,
        0.708,
        {
            ic: 0.06
        }
    ],
    920: [
        0.715,
        0.022,
        0.778,
        {
            ic: 0.026
        }
    ],
    921: [
        0.694,
        0,
        0.278,
        {
            ic: 0.06
        }
    ],
    922: [
        0.694,
        0,
        0.694,
        {
            ic: 0.091
        }
    ],
    923: [
        0.694,
        0,
        0.611
    ],
    924: [
        0.694,
        0,
        0.875,
        {
            ic: 0.054
        }
    ],
    925: [
        0.694,
        0,
        0.708,
        {
            ic: 0.058
        }
    ],
    926: [
        0.688,
        0,
        0.667,
        {
            ic: 0.098
        }
    ],
    927: [
        0.716,
        0.022,
        0.736,
        {
            ic: 0.027
        }
    ],
    928: [
        0.691,
        0,
        0.708,
        {
            ic: 0.06
        }
    ],
    929: [
        0.694,
        0,
        0.639,
        {
            ic: 0.051
        }
    ],
    931: [
        0.694,
        0,
        0.722,
        {
            ic: 0.091
        }
    ],
    932: [
        0.688,
        0,
        0.681,
        {
            ic: 0.109
        }
    ],
    933: [
        0.716,
        0,
        0.778,
        {
            ic: 0.065
        }
    ],
    934: [
        0.694,
        0,
        0.722,
        {
            ic: 0.021
        }
    ],
    935: [
        0.694,
        0,
        0.667,
        {
            ic: 0.091
        }
    ],
    936: [
        0.694,
        0,
        0.778,
        {
            ic: 0.076
        }
    ],
    937: [
        0.716,
        0,
        0.722,
        {
            ic: 0.047
        }
    ],
    8211: [
        0.312,
        -0.236,
        0.5,
        {
            ic: 0.065
        }
    ],
    8212: [
        0.312,
        -0.236,
        1,
        {
            ic: 0.065
        }
    ],
    8213: [
        0.312,
        -0.236,
        1,
        {
            ic: 0.065
        }
    ],
    8215: [
        -0.038,
        0.114,
        0.5,
        {
            ic: 0.065
        }
    ],
    8216: [
        0.694,
        -0.471,
        0.278,
        {
            ic: 0.058
        }
    ],
    8217: [
        0.694,
        -0.471,
        0.278,
        {
            ic: 0.057
        }
    ],
    8220: [
        0.694,
        -0.471,
        0.5,
        {
            ic: 0.114
        }
    ],
    8221: [
        0.694,
        -0.471,
        0.5
    ],
    8260: [
        0.75,
        0.25,
        0.5,
        {
            ic: 0.1
        }
    ],
    8710: [
        0.694,
        0,
        0.833
    ]
};

},{}],"3QtnF":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.sansSerif = void 0;
var FontData_js_1 = require("../../FontData.js");
var sans_serif_js_1 = require("../../../common/fonts/tex/sans-serif.js");
exports.sansSerif = FontData_js_1.AddCSS(sans_serif_js_1.sansSerif, {
    913: {
        c: 'A'
    },
    914: {
        c: 'B'
    },
    917: {
        c: 'E'
    },
    918: {
        c: 'Z'
    },
    919: {
        c: 'H'
    },
    921: {
        c: 'I'
    },
    922: {
        c: 'K'
    },
    924: {
        c: 'M'
    },
    925: {
        c: 'N'
    },
    927: {
        c: 'O'
    },
    929: {
        c: 'P'
    },
    932: {
        c: 'T'
    },
    935: {
        c: 'X'
    },
    8213: {
        c: '\\2014'
    },
    8215: {
        c: '_'
    },
    8260: {
        c: '/'
    },
    8710: {
        c: '\\394'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/sans-serif.js":"17LFc"}],"17LFc":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.sansSerif = void 0;
exports.sansSerif = {
    33: [
        0.694,
        0,
        0.319
    ],
    34: [
        0.694,
        -0.471,
        0.5
    ],
    35: [
        0.694,
        0.194,
        0.833
    ],
    36: [
        0.75,
        0.056,
        0.5
    ],
    37: [
        0.75,
        0.056,
        0.833
    ],
    38: [
        0.716,
        0.022,
        0.758
    ],
    39: [
        0.694,
        -0.471,
        0.278
    ],
    40: [
        0.75,
        0.25,
        0.389
    ],
    41: [
        0.75,
        0.25,
        0.389
    ],
    42: [
        0.75,
        -0.306,
        0.5
    ],
    43: [
        0.583,
        0.082,
        0.778
    ],
    44: [
        0.098,
        0.125,
        0.278
    ],
    45: [
        0.259,
        -0.186,
        0.333
    ],
    46: [
        0.098,
        0,
        0.278
    ],
    47: [
        0.75,
        0.25,
        0.5
    ],
    58: [
        0.444,
        0,
        0.278
    ],
    59: [
        0.444,
        0.125,
        0.278
    ],
    61: [
        0.37,
        -0.13,
        0.778
    ],
    63: [
        0.704,
        0,
        0.472
    ],
    64: [
        0.704,
        0.011,
        0.667
    ],
    91: [
        0.75,
        0.25,
        0.289
    ],
    93: [
        0.75,
        0.25,
        0.289
    ],
    94: [
        0.694,
        -0.527,
        0.5
    ],
    95: [
        -0.038,
        0.114,
        0.5
    ],
    126: [
        0.327,
        -0.193,
        0.5
    ],
    305: [
        0.444,
        0,
        0.239
    ],
    567: [
        0.444,
        0.205,
        0.267
    ],
    768: [
        0.694,
        -0.527,
        0
    ],
    769: [
        0.694,
        -0.527,
        0
    ],
    770: [
        0.694,
        -0.527,
        0
    ],
    771: [
        0.677,
        -0.543,
        0
    ],
    772: [
        0.631,
        -0.552,
        0
    ],
    774: [
        0.694,
        -0.508,
        0
    ],
    775: [
        0.68,
        -0.576,
        0
    ],
    776: [
        0.68,
        -0.582,
        0
    ],
    778: [
        0.694,
        -0.527,
        0
    ],
    779: [
        0.694,
        -0.527,
        0
    ],
    780: [
        0.654,
        -0.487,
        0
    ],
    913: [
        0.694,
        0,
        0.667
    ],
    914: [
        0.694,
        0,
        0.667
    ],
    915: [
        0.691,
        0,
        0.542
    ],
    916: [
        0.694,
        0,
        0.833
    ],
    917: [
        0.691,
        0,
        0.597
    ],
    918: [
        0.694,
        0,
        0.611
    ],
    919: [
        0.694,
        0,
        0.708
    ],
    920: [
        0.716,
        0.021,
        0.778
    ],
    921: [
        0.694,
        0,
        0.278
    ],
    922: [
        0.694,
        0,
        0.694
    ],
    923: [
        0.694,
        0,
        0.611
    ],
    924: [
        0.694,
        0,
        0.875
    ],
    925: [
        0.694,
        0,
        0.708
    ],
    926: [
        0.688,
        0,
        0.667
    ],
    927: [
        0.715,
        0.022,
        0.736
    ],
    928: [
        0.691,
        0,
        0.708
    ],
    929: [
        0.694,
        0,
        0.639
    ],
    931: [
        0.694,
        0,
        0.722
    ],
    932: [
        0.688,
        0,
        0.681
    ],
    933: [
        0.716,
        0,
        0.778
    ],
    934: [
        0.694,
        0,
        0.722
    ],
    935: [
        0.694,
        0,
        0.667
    ],
    936: [
        0.694,
        0,
        0.778
    ],
    937: [
        0.716,
        0,
        0.722
    ],
    8211: [
        0.312,
        -0.236,
        0.5
    ],
    8212: [
        0.312,
        -0.236,
        1
    ],
    8213: [
        0.312,
        -0.236,
        1
    ],
    8215: [
        -0.038,
        0.114,
        0.5
    ],
    8216: [
        0.694,
        -0.471,
        0.278
    ],
    8217: [
        0.694,
        -0.471,
        0.278
    ],
    8220: [
        0.694,
        -0.471,
        0.5
    ],
    8221: [
        0.694,
        -0.471,
        0.5
    ],
    8260: [
        0.75,
        0.25,
        0.5
    ],
    8710: [
        0.694,
        0,
        0.833
    ]
};

},{}],"54tIO":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.scriptBold = void 0;
var script_bold_js_1 = require("../../../common/fonts/tex/script-bold.js");
Object.defineProperty(exports, "scriptBold", {
    enumerable: true,
    get: function() {
        return script_bold_js_1.scriptBold;
    }
});

},{"../../../common/fonts/tex/script-bold.js":"3KD4S"}],"3KD4S":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.scriptBold = void 0;
exports.scriptBold = {
};

},{}],"1gmo6":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.script = void 0;
var script_js_1 = require("../../../common/fonts/tex/script.js");
Object.defineProperty(exports, "script", {
    enumerable: true,
    get: function() {
        return script_js_1.script;
    }
});

},{"../../../common/fonts/tex/script.js":"18cyb"}],"18cyb":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.script = void 0;
exports.script = {
};

},{}],"7IxF0":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.smallop = void 0;
var FontData_js_1 = require("../../FontData.js");
var smallop_js_1 = require("../../../common/fonts/tex/smallop.js");
exports.smallop = FontData_js_1.AddCSS(smallop_js_1.smallop, {
    8260: {
        c: '/'
    },
    9001: {
        c: '\\27E8'
    },
    9002: {
        c: '\\27E9'
    },
    10072: {
        c: '\\2223'
    },
    10764: {
        c: '\\222C\\222C'
    },
    12296: {
        c: '\\27E8'
    },
    12297: {
        c: '\\27E9'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/smallop.js":"2CXs7"}],"2CXs7":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.smallop = void 0;
exports.smallop = {
    40: [
        0.85,
        0.349,
        0.458
    ],
    41: [
        0.85,
        0.349,
        0.458
    ],
    47: [
        0.85,
        0.349,
        0.578
    ],
    91: [
        0.85,
        0.349,
        0.417
    ],
    92: [
        0.85,
        0.349,
        0.578
    ],
    93: [
        0.85,
        0.349,
        0.417
    ],
    123: [
        0.85,
        0.349,
        0.583
    ],
    125: [
        0.85,
        0.349,
        0.583
    ],
    710: [
        0.744,
        -0.551,
        0.556
    ],
    732: [
        0.722,
        -0.597,
        0.556
    ],
    770: [
        0.744,
        -0.551,
        0
    ],
    771: [
        0.722,
        -0.597,
        0
    ],
    8214: [
        0.602,
        0,
        0.778
    ],
    8260: [
        0.85,
        0.349,
        0.578
    ],
    8593: [
        0.6,
        0,
        0.667
    ],
    8595: [
        0.6,
        0,
        0.667
    ],
    8657: [
        0.599,
        0,
        0.778
    ],
    8659: [
        0.6,
        0,
        0.778
    ],
    8719: [
        0.75,
        0.25,
        0.944
    ],
    8720: [
        0.75,
        0.25,
        0.944
    ],
    8721: [
        0.75,
        0.25,
        1.056
    ],
    8730: [
        0.85,
        0.35,
        1,
        {
            ic: 0.02
        }
    ],
    8739: [
        0.627,
        0.015,
        0.333
    ],
    8741: [
        0.627,
        0.015,
        0.556
    ],
    8747: [
        0.805,
        0.306,
        0.472,
        {
            ic: 0.138
        }
    ],
    8748: [
        0.805,
        0.306,
        0.819,
        {
            ic: 0.138
        }
    ],
    8749: [
        0.805,
        0.306,
        1.166,
        {
            ic: 0.138
        }
    ],
    8750: [
        0.805,
        0.306,
        0.472,
        {
            ic: 0.138
        }
    ],
    8896: [
        0.75,
        0.249,
        0.833
    ],
    8897: [
        0.75,
        0.249,
        0.833
    ],
    8898: [
        0.75,
        0.249,
        0.833
    ],
    8899: [
        0.75,
        0.249,
        0.833
    ],
    8968: [
        0.85,
        0.349,
        0.472
    ],
    8969: [
        0.85,
        0.349,
        0.472
    ],
    8970: [
        0.85,
        0.349,
        0.472
    ],
    8971: [
        0.85,
        0.349,
        0.472
    ],
    9001: [
        0.85,
        0.35,
        0.472
    ],
    9002: [
        0.85,
        0.35,
        0.472
    ],
    9168: [
        0.602,
        0,
        0.667
    ],
    10072: [
        0.627,
        0.015,
        0.333
    ],
    10216: [
        0.85,
        0.35,
        0.472
    ],
    10217: [
        0.85,
        0.35,
        0.472
    ],
    10752: [
        0.75,
        0.25,
        1.111
    ],
    10753: [
        0.75,
        0.25,
        1.111
    ],
    10754: [
        0.75,
        0.25,
        1.111
    ],
    10756: [
        0.75,
        0.249,
        0.833
    ],
    10758: [
        0.75,
        0.249,
        0.833
    ],
    10764: [
        0.805,
        0.306,
        1.638,
        {
            ic: 0.138
        }
    ],
    12296: [
        0.85,
        0.35,
        0.472
    ],
    12297: [
        0.85,
        0.35,
        0.472
    ]
};

},{}],"1UglD":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texCalligraphicBold = void 0;
var FontData_js_1 = require("../../FontData.js");
var tex_calligraphic_bold_js_1 = require("../../../common/fonts/tex/tex-calligraphic-bold.js");
exports.texCalligraphicBold = FontData_js_1.AddCSS(tex_calligraphic_bold_js_1.texCalligraphicBold, {
    305: {
        f: 'B'
    },
    567: {
        f: 'B'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/tex-calligraphic-bold.js":"3RqgA"}],"3RqgA":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texCalligraphicBold = void 0;
exports.texCalligraphicBold = {
    65: [
        0.751,
        0.049,
        0.921,
        {
            ic: 0.068,
            sk: 0.224
        }
    ],
    66: [
        0.705,
        0.017,
        0.748,
        {
            sk: 0.16
        }
    ],
    67: [
        0.703,
        0.02,
        0.613,
        {
            sk: 0.16
        }
    ],
    68: [
        0.686,
        0,
        0.892,
        {
            sk: 0.0958
        }
    ],
    69: [
        0.703,
        0.016,
        0.607,
        {
            ic: 0.02,
            sk: 0.128
        }
    ],
    70: [
        0.686,
        0.03,
        0.814,
        {
            ic: 0.116,
            sk: 0.128
        }
    ],
    71: [
        0.703,
        0.113,
        0.682,
        {
            sk: 0.128
        }
    ],
    72: [
        0.686,
        0.048,
        0.987,
        {
            sk: 0.128
        }
    ],
    73: [
        0.686,
        0,
        0.642,
        {
            ic: 0.104,
            sk: 0.0319
        }
    ],
    74: [
        0.686,
        0.114,
        0.779,
        {
            ic: 0.158,
            sk: 0.192
        }
    ],
    75: [
        0.703,
        0.017,
        0.871,
        {
            sk: 0.0639
        }
    ],
    76: [
        0.703,
        0.017,
        0.788,
        {
            sk: 0.16
        }
    ],
    77: [
        0.703,
        0.049,
        1.378,
        {
            sk: 0.16
        }
    ],
    78: [
        0.84,
        0.049,
        0.937,
        {
            ic: 0.168,
            sk: 0.0958
        }
    ],
    79: [
        0.703,
        0.017,
        0.906,
        {
            sk: 0.128
        }
    ],
    80: [
        0.686,
        0.067,
        0.81,
        {
            ic: 0.036,
            sk: 0.0958
        }
    ],
    81: [
        0.703,
        0.146,
        0.939,
        {
            sk: 0.128
        }
    ],
    82: [
        0.686,
        0.017,
        0.99,
        {
            sk: 0.0958
        }
    ],
    83: [
        0.703,
        0.016,
        0.696,
        {
            ic: 0.025,
            sk: 0.16
        }
    ],
    84: [
        0.72,
        0.069,
        0.644,
        {
            ic: 0.303,
            sk: 0.0319
        }
    ],
    85: [
        0.686,
        0.024,
        0.715,
        {
            ic: 0.056,
            sk: 0.0958
        }
    ],
    86: [
        0.686,
        0.077,
        0.737,
        {
            ic: 0.037,
            sk: 0.0319
        }
    ],
    87: [
        0.686,
        0.077,
        1.169,
        {
            ic: 0.037,
            sk: 0.0958
        }
    ],
    88: [
        0.686,
        0,
        0.817,
        {
            ic: 0.089,
            sk: 0.16
        }
    ],
    89: [
        0.686,
        0.164,
        0.759,
        {
            ic: 0.038,
            sk: 0.0958
        }
    ],
    90: [
        0.686,
        0,
        0.818,
        {
            ic: 0.035,
            sk: 0.16
        }
    ],
    305: [
        0.452,
        0.008,
        0.394,
        {
            sk: 0.0319
        }
    ],
    567: [
        0.451,
        0.201,
        0.439,
        {
            sk: 0.0958
        }
    ]
};

},{}],"krU9r":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texCalligraphic = void 0;
var tex_calligraphic_js_1 = require("../../../common/fonts/tex/tex-calligraphic.js");
Object.defineProperty(exports, "texCalligraphic", {
    enumerable: true,
    get: function() {
        return tex_calligraphic_js_1.texCalligraphic;
    }
});

},{"../../../common/fonts/tex/tex-calligraphic.js":"kTjYf"}],"kTjYf":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texCalligraphic = void 0;
exports.texCalligraphic = {
    65: [
        0.728,
        0.05,
        0.798,
        {
            ic: 0.021,
            sk: 0.194
        }
    ],
    66: [
        0.705,
        0.022,
        0.657,
        {
            sk: 0.139
        }
    ],
    67: [
        0.705,
        0.025,
        0.527,
        {
            sk: 0.139
        }
    ],
    68: [
        0.683,
        0,
        0.771,
        {
            sk: 0.0833
        }
    ],
    69: [
        0.705,
        0.022,
        0.528,
        {
            ic: 0.036,
            sk: 0.111
        }
    ],
    70: [
        0.683,
        0.032,
        0.719,
        {
            ic: 0.11,
            sk: 0.111
        }
    ],
    71: [
        0.704,
        0.119,
        0.595,
        {
            sk: 0.111
        }
    ],
    72: [
        0.683,
        0.048,
        0.845,
        {
            sk: 0.111
        }
    ],
    73: [
        0.683,
        0,
        0.545,
        {
            ic: 0.097,
            sk: 0.0278
        }
    ],
    74: [
        0.683,
        0.119,
        0.678,
        {
            ic: 0.161,
            sk: 0.167
        }
    ],
    75: [
        0.705,
        0.022,
        0.762,
        {
            sk: 0.0556
        }
    ],
    76: [
        0.705,
        0.022,
        0.69,
        {
            sk: 0.139
        }
    ],
    77: [
        0.705,
        0.05,
        1.201,
        {
            sk: 0.139
        }
    ],
    78: [
        0.789,
        0.05,
        0.82,
        {
            ic: 0.159,
            sk: 0.0833
        }
    ],
    79: [
        0.705,
        0.022,
        0.796,
        {
            sk: 0.111
        }
    ],
    80: [
        0.683,
        0.057,
        0.696,
        {
            ic: 0.037,
            sk: 0.0833
        }
    ],
    81: [
        0.705,
        0.131,
        0.817,
        {
            sk: 0.111
        }
    ],
    82: [
        0.682,
        0.022,
        0.848,
        {
            sk: 0.0833
        }
    ],
    83: [
        0.705,
        0.022,
        0.606,
        {
            ic: 0.036,
            sk: 0.139
        }
    ],
    84: [
        0.717,
        0.068,
        0.545,
        {
            ic: 0.288,
            sk: 0.0278
        }
    ],
    85: [
        0.683,
        0.028,
        0.626,
        {
            ic: 0.061,
            sk: 0.0833
        }
    ],
    86: [
        0.683,
        0.052,
        0.613,
        {
            ic: 0.045,
            sk: 0.0278
        }
    ],
    87: [
        0.683,
        0.053,
        0.988,
        {
            ic: 0.046,
            sk: 0.0833
        }
    ],
    88: [
        0.683,
        0,
        0.713,
        {
            ic: 0.094,
            sk: 0.139
        }
    ],
    89: [
        0.683,
        0.143,
        0.668,
        {
            ic: 0.046,
            sk: 0.0833
        }
    ],
    90: [
        0.683,
        0,
        0.725,
        {
            ic: 0.042,
            sk: 0.139
        }
    ]
};

},{}],"3yuwb":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texMathit = void 0;
var tex_mathit_js_1 = require("../../../common/fonts/tex/tex-mathit.js");
Object.defineProperty(exports, "texMathit", {
    enumerable: true,
    get: function() {
        return tex_mathit_js_1.texMathit;
    }
});

},{"../../../common/fonts/tex/tex-mathit.js":"5GLdZ"}],"5GLdZ":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texMathit = void 0;
exports.texMathit = {
    65: [
        0.716,
        0,
        0.743
    ],
    66: [
        0.683,
        0,
        0.704
    ],
    67: [
        0.705,
        0.021,
        0.716
    ],
    68: [
        0.683,
        0,
        0.755
    ],
    69: [
        0.68,
        0,
        0.678
    ],
    70: [
        0.68,
        0,
        0.653
    ],
    71: [
        0.705,
        0.022,
        0.774
    ],
    72: [
        0.683,
        0,
        0.743
    ],
    73: [
        0.683,
        0,
        0.386
    ],
    74: [
        0.683,
        0.021,
        0.525
    ],
    75: [
        0.683,
        0,
        0.769
    ],
    76: [
        0.683,
        0,
        0.627
    ],
    77: [
        0.683,
        0,
        0.897
    ],
    78: [
        0.683,
        0,
        0.743
    ],
    79: [
        0.704,
        0.022,
        0.767
    ],
    80: [
        0.683,
        0,
        0.678
    ],
    81: [
        0.704,
        0.194,
        0.767
    ],
    82: [
        0.683,
        0.022,
        0.729
    ],
    83: [
        0.705,
        0.022,
        0.562
    ],
    84: [
        0.677,
        0,
        0.716
    ],
    85: [
        0.683,
        0.022,
        0.743
    ],
    86: [
        0.683,
        0.022,
        0.743
    ],
    87: [
        0.683,
        0.022,
        0.999
    ],
    88: [
        0.683,
        0,
        0.743
    ],
    89: [
        0.683,
        0,
        0.743
    ],
    90: [
        0.683,
        0,
        0.613
    ],
    97: [
        0.442,
        0.011,
        0.511
    ],
    98: [
        0.694,
        0.011,
        0.46
    ],
    99: [
        0.441,
        0.01,
        0.46
    ],
    100: [
        0.694,
        0.011,
        0.511
    ],
    101: [
        0.442,
        0.01,
        0.46
    ],
    102: [
        0.705,
        0.204,
        0.307
    ],
    103: [
        0.442,
        0.205,
        0.46
    ],
    104: [
        0.694,
        0.011,
        0.511
    ],
    105: [
        0.656,
        0.01,
        0.307
    ],
    106: [
        0.656,
        0.204,
        0.307
    ],
    107: [
        0.694,
        0.011,
        0.46
    ],
    108: [
        0.694,
        0.011,
        0.256
    ],
    109: [
        0.442,
        0.011,
        0.818
    ],
    110: [
        0.442,
        0.011,
        0.562
    ],
    111: [
        0.442,
        0.011,
        0.511
    ],
    112: [
        0.442,
        0.194,
        0.511
    ],
    113: [
        0.442,
        0.194,
        0.46
    ],
    114: [
        0.442,
        0.011,
        0.422
    ],
    115: [
        0.442,
        0.011,
        0.409
    ],
    116: [
        0.626,
        0.011,
        0.332
    ],
    117: [
        0.441,
        0.011,
        0.537
    ],
    118: [
        0.443,
        0.01,
        0.46
    ],
    119: [
        0.443,
        0.011,
        0.664
    ],
    120: [
        0.442,
        0.011,
        0.464
    ],
    121: [
        0.441,
        0.205,
        0.486
    ],
    122: [
        0.442,
        0.011,
        0.409
    ]
};

},{}],"3ykbS":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texOldstyleBold = void 0;
var tex_oldstyle_bold_js_1 = require("../../../common/fonts/tex/tex-oldstyle-bold.js");
Object.defineProperty(exports, "texOldstyleBold", {
    enumerable: true,
    get: function() {
        return tex_oldstyle_bold_js_1.texOldstyleBold;
    }
});

},{"../../../common/fonts/tex/tex-oldstyle-bold.js":"7D4LP"}],"7D4LP":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texOldstyleBold = void 0;
exports.texOldstyleBold = {
    48: [
        0.46,
        0.017,
        0.575
    ],
    49: [
        0.461,
        0,
        0.575
    ],
    50: [
        0.46,
        0,
        0.575
    ],
    51: [
        0.461,
        0.211,
        0.575
    ],
    52: [
        0.469,
        0.194,
        0.575
    ],
    53: [
        0.461,
        0.211,
        0.575
    ],
    54: [
        0.66,
        0.017,
        0.575
    ],
    55: [
        0.476,
        0.211,
        0.575
    ],
    56: [
        0.661,
        0.017,
        0.575
    ],
    57: [
        0.461,
        0.21,
        0.575
    ],
    65: [
        0.751,
        0.049,
        0.921,
        {
            ic: 0.068,
            sk: 0.224
        }
    ],
    66: [
        0.705,
        0.017,
        0.748,
        {
            sk: 0.16
        }
    ],
    67: [
        0.703,
        0.02,
        0.613,
        {
            sk: 0.16
        }
    ],
    68: [
        0.686,
        0,
        0.892,
        {
            sk: 0.0958
        }
    ],
    69: [
        0.703,
        0.016,
        0.607,
        {
            ic: 0.02,
            sk: 0.128
        }
    ],
    70: [
        0.686,
        0.03,
        0.814,
        {
            ic: 0.116,
            sk: 0.128
        }
    ],
    71: [
        0.703,
        0.113,
        0.682,
        {
            sk: 0.128
        }
    ],
    72: [
        0.686,
        0.048,
        0.987,
        {
            sk: 0.128
        }
    ],
    73: [
        0.686,
        0,
        0.642,
        {
            ic: 0.104,
            sk: 0.0319
        }
    ],
    74: [
        0.686,
        0.114,
        0.779,
        {
            ic: 0.158,
            sk: 0.192
        }
    ],
    75: [
        0.703,
        0.017,
        0.871,
        {
            sk: 0.0639
        }
    ],
    76: [
        0.703,
        0.017,
        0.788,
        {
            sk: 0.16
        }
    ],
    77: [
        0.703,
        0.049,
        1.378,
        {
            sk: 0.16
        }
    ],
    78: [
        0.84,
        0.049,
        0.937,
        {
            ic: 0.168,
            sk: 0.0958
        }
    ],
    79: [
        0.703,
        0.017,
        0.906,
        {
            sk: 0.128
        }
    ],
    80: [
        0.686,
        0.067,
        0.81,
        {
            ic: 0.036,
            sk: 0.0958
        }
    ],
    81: [
        0.703,
        0.146,
        0.939,
        {
            sk: 0.128
        }
    ],
    82: [
        0.686,
        0.017,
        0.99,
        {
            sk: 0.0958
        }
    ],
    83: [
        0.703,
        0.016,
        0.696,
        {
            ic: 0.025,
            sk: 0.16
        }
    ],
    84: [
        0.72,
        0.069,
        0.644,
        {
            ic: 0.303,
            sk: 0.0319
        }
    ],
    85: [
        0.686,
        0.024,
        0.715,
        {
            ic: 0.056,
            sk: 0.0958
        }
    ],
    86: [
        0.686,
        0.077,
        0.737,
        {
            ic: 0.037,
            sk: 0.0319
        }
    ],
    87: [
        0.686,
        0.077,
        1.169,
        {
            ic: 0.037,
            sk: 0.0958
        }
    ],
    88: [
        0.686,
        0,
        0.817,
        {
            ic: 0.089,
            sk: 0.16
        }
    ],
    89: [
        0.686,
        0.164,
        0.759,
        {
            ic: 0.038,
            sk: 0.0958
        }
    ],
    90: [
        0.686,
        0,
        0.818,
        {
            ic: 0.035,
            sk: 0.16
        }
    ]
};

},{}],"6nuHk":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texOldstyle = void 0;
var tex_oldstyle_js_1 = require("../../../common/fonts/tex/tex-oldstyle.js");
Object.defineProperty(exports, "texOldstyle", {
    enumerable: true,
    get: function() {
        return tex_oldstyle_js_1.texOldstyle;
    }
});

},{"../../../common/fonts/tex/tex-oldstyle.js":"3eqbb"}],"3eqbb":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texOldstyle = void 0;
exports.texOldstyle = {
    48: [
        0.452,
        0.022,
        0.5
    ],
    49: [
        0.453,
        0,
        0.5
    ],
    50: [
        0.453,
        0,
        0.5
    ],
    51: [
        0.452,
        0.216,
        0.5
    ],
    52: [
        0.464,
        0.194,
        0.5
    ],
    53: [
        0.453,
        0.216,
        0.5
    ],
    54: [
        0.665,
        0.022,
        0.5
    ],
    55: [
        0.463,
        0.216,
        0.5
    ],
    56: [
        0.666,
        0.021,
        0.5
    ],
    57: [
        0.453,
        0.216,
        0.5
    ],
    65: [
        0.728,
        0.05,
        0.798,
        {
            ic: 0.021,
            sk: 0.194
        }
    ],
    66: [
        0.705,
        0.022,
        0.657,
        {
            sk: 0.139
        }
    ],
    67: [
        0.705,
        0.025,
        0.527,
        {
            sk: 0.139
        }
    ],
    68: [
        0.683,
        0,
        0.771,
        {
            sk: 0.0833
        }
    ],
    69: [
        0.705,
        0.022,
        0.528,
        {
            ic: 0.036,
            sk: 0.111
        }
    ],
    70: [
        0.683,
        0.032,
        0.719,
        {
            ic: 0.11,
            sk: 0.111
        }
    ],
    71: [
        0.704,
        0.119,
        0.595,
        {
            sk: 0.111
        }
    ],
    72: [
        0.683,
        0.048,
        0.845,
        {
            sk: 0.111
        }
    ],
    73: [
        0.683,
        0,
        0.545,
        {
            ic: 0.097,
            sk: 0.0278
        }
    ],
    74: [
        0.683,
        0.119,
        0.678,
        {
            ic: 0.161,
            sk: 0.167
        }
    ],
    75: [
        0.705,
        0.022,
        0.762,
        {
            sk: 0.0556
        }
    ],
    76: [
        0.705,
        0.022,
        0.69,
        {
            sk: 0.139
        }
    ],
    77: [
        0.705,
        0.05,
        1.201,
        {
            sk: 0.139
        }
    ],
    78: [
        0.789,
        0.05,
        0.82,
        {
            ic: 0.159,
            sk: 0.0833
        }
    ],
    79: [
        0.705,
        0.022,
        0.796,
        {
            sk: 0.111
        }
    ],
    80: [
        0.683,
        0.057,
        0.696,
        {
            ic: 0.037,
            sk: 0.0833
        }
    ],
    81: [
        0.705,
        0.131,
        0.817,
        {
            sk: 0.111
        }
    ],
    82: [
        0.682,
        0.022,
        0.848,
        {
            sk: 0.0833
        }
    ],
    83: [
        0.705,
        0.022,
        0.606,
        {
            ic: 0.036,
            sk: 0.139
        }
    ],
    84: [
        0.717,
        0.068,
        0.545,
        {
            ic: 0.288,
            sk: 0.0278
        }
    ],
    85: [
        0.683,
        0.028,
        0.626,
        {
            ic: 0.061,
            sk: 0.0833
        }
    ],
    86: [
        0.683,
        0.052,
        0.613,
        {
            ic: 0.045,
            sk: 0.0278
        }
    ],
    87: [
        0.683,
        0.053,
        0.988,
        {
            ic: 0.046,
            sk: 0.0833
        }
    ],
    88: [
        0.683,
        0,
        0.713,
        {
            ic: 0.094,
            sk: 0.139
        }
    ],
    89: [
        0.683,
        0.143,
        0.668,
        {
            ic: 0.046,
            sk: 0.0833
        }
    ],
    90: [
        0.683,
        0,
        0.725,
        {
            ic: 0.042,
            sk: 0.139
        }
    ]
};

},{}],"uR8Wj":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texSize3 = void 0;
var FontData_js_1 = require("../../FontData.js");
var tex_size3_js_1 = require("../../../common/fonts/tex/tex-size3.js");
exports.texSize3 = FontData_js_1.AddCSS(tex_size3_js_1.texSize3, {
    8260: {
        c: '/'
    },
    9001: {
        c: '\\27E8'
    },
    9002: {
        c: '\\27E9'
    },
    12296: {
        c: '\\27E8'
    },
    12297: {
        c: '\\27E9'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/tex-size3.js":"7na2G"}],"7na2G":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texSize3 = void 0;
exports.texSize3 = {
    40: [
        1.45,
        0.949,
        0.736
    ],
    41: [
        1.45,
        0.949,
        0.736
    ],
    47: [
        1.45,
        0.949,
        1.044
    ],
    91: [
        1.45,
        0.949,
        0.528
    ],
    92: [
        1.45,
        0.949,
        1.044
    ],
    93: [
        1.45,
        0.949,
        0.528
    ],
    123: [
        1.45,
        0.949,
        0.75
    ],
    125: [
        1.45,
        0.949,
        0.75
    ],
    710: [
        0.772,
        -0.564,
        1.444
    ],
    732: [
        0.749,
        -0.61,
        1.444
    ],
    770: [
        0.772,
        -0.564,
        0
    ],
    771: [
        0.749,
        -0.61,
        0
    ],
    8260: [
        1.45,
        0.949,
        1.044
    ],
    8730: [
        1.45,
        0.95,
        1,
        {
            ic: 0.02
        }
    ],
    8968: [
        1.45,
        0.949,
        0.583
    ],
    8969: [
        1.45,
        0.949,
        0.583
    ],
    8970: [
        1.45,
        0.949,
        0.583
    ],
    8971: [
        1.45,
        0.949,
        0.583
    ],
    9001: [
        1.45,
        0.95,
        0.75
    ],
    9002: [
        1.45,
        0.949,
        0.75
    ],
    10216: [
        1.45,
        0.95,
        0.75
    ],
    10217: [
        1.45,
        0.949,
        0.75
    ],
    12296: [
        1.45,
        0.95,
        0.75
    ],
    12297: [
        1.45,
        0.949,
        0.75
    ]
};

},{}],"5LFmS":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texSize4 = void 0;
var FontData_js_1 = require("../../FontData.js");
var tex_size4_js_1 = require("../../../common/fonts/tex/tex-size4.js");
exports.texSize4 = FontData_js_1.AddCSS(tex_size4_js_1.texSize4, {
    8260: {
        c: '/'
    },
    9001: {
        c: '\\27E8'
    },
    9002: {
        c: '\\27E9'
    },
    12296: {
        c: '\\27E8'
    },
    12297: {
        c: '\\27E9'
    },
    57685: {
        c: '\\E153\\E152'
    },
    57686: {
        c: '\\E151\\E150'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/tex-size4.js":"1NIiQ"}],"1NIiQ":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texSize4 = void 0;
exports.texSize4 = {
    40: [
        1.75,
        1.249,
        0.792
    ],
    41: [
        1.75,
        1.249,
        0.792
    ],
    47: [
        1.75,
        1.249,
        1.278
    ],
    91: [
        1.75,
        1.249,
        0.583
    ],
    92: [
        1.75,
        1.249,
        1.278
    ],
    93: [
        1.75,
        1.249,
        0.583
    ],
    123: [
        1.75,
        1.249,
        0.806
    ],
    125: [
        1.75,
        1.249,
        0.806
    ],
    710: [
        0.845,
        -0.561,
        1.889,
        {
            ic: 0.013
        }
    ],
    732: [
        0.823,
        -0.583,
        1.889
    ],
    770: [
        0.845,
        -0.561,
        0,
        {
            ic: 0.013
        }
    ],
    771: [
        0.823,
        -0.583,
        0
    ],
    8260: [
        1.75,
        1.249,
        1.278
    ],
    8730: [
        1.75,
        1.25,
        1,
        {
            ic: 0.02
        }
    ],
    8968: [
        1.75,
        1.249,
        0.639
    ],
    8969: [
        1.75,
        1.249,
        0.639
    ],
    8970: [
        1.75,
        1.249,
        0.639
    ],
    8971: [
        1.75,
        1.249,
        0.639
    ],
    9001: [
        1.75,
        1.248,
        0.806
    ],
    9002: [
        1.75,
        1.248,
        0.806
    ],
    9115: [
        1.154,
        0.655,
        0.875
    ],
    9116: [
        0.61,
        0.01,
        0.875
    ],
    9117: [
        1.165,
        0.644,
        0.875
    ],
    9118: [
        1.154,
        0.655,
        0.875
    ],
    9119: [
        0.61,
        0.01,
        0.875
    ],
    9120: [
        1.165,
        0.644,
        0.875
    ],
    9121: [
        1.154,
        0.645,
        0.667
    ],
    9122: [
        0.602,
        0,
        0.667
    ],
    9123: [
        1.155,
        0.644,
        0.667
    ],
    9124: [
        1.154,
        0.645,
        0.667
    ],
    9125: [
        0.602,
        0,
        0.667
    ],
    9126: [
        1.155,
        0.644,
        0.667
    ],
    9127: [
        0.899,
        0.01,
        0.889
    ],
    9128: [
        1.16,
        0.66,
        0.889
    ],
    9129: [
        0.01,
        0.899,
        0.889
    ],
    9130: [
        0.29,
        0.015,
        0.889
    ],
    9131: [
        0.899,
        0.01,
        0.889
    ],
    9132: [
        1.16,
        0.66,
        0.889
    ],
    9133: [
        0.01,
        0.899,
        0.889
    ],
    9143: [
        0.935,
        0.885,
        1.056
    ],
    10216: [
        1.75,
        1.248,
        0.806
    ],
    10217: [
        1.75,
        1.248,
        0.806
    ],
    12296: [
        1.75,
        1.248,
        0.806
    ],
    12297: [
        1.75,
        1.248,
        0.806
    ],
    57344: [
        0.625,
        0.014,
        1.056
    ],
    57345: [
        0.605,
        0.014,
        1.056,
        {
            ic: 0.02
        }
    ],
    57680: [
        0.12,
        0.213,
        0.45,
        {
            ic: 0.01
        }
    ],
    57681: [
        0.12,
        0.213,
        0.45,
        {
            ic: 0.024
        }
    ],
    57682: [
        0.333,
        0,
        0.45,
        {
            ic: 0.01
        }
    ],
    57683: [
        0.333,
        0,
        0.45,
        {
            ic: 0.024
        }
    ],
    57684: [
        0.32,
        0.2,
        0.4,
        {
            ic: 0.01
        }
    ],
    57685: [
        0.333,
        0,
        0.9,
        {
            ic: 0.01
        }
    ],
    57686: [
        0.12,
        0.213,
        0.9,
        {
            ic: 0.01
        }
    ]
};

},{}],"5y5Df":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texVariant = void 0;
var FontData_js_1 = require("../../FontData.js");
var tex_variant_js_1 = require("../../../common/fonts/tex/tex-variant.js");
exports.texVariant = FontData_js_1.AddCSS(tex_variant_js_1.texVariant, {
    1008: {
        c: '\\E009'
    },
    8463: {
        f: ''
    },
    8740: {
        c: '\\E006'
    },
    8742: {
        c: '\\E007'
    },
    8808: {
        c: '\\E00C'
    },
    8809: {
        c: '\\E00D'
    },
    8816: {
        c: '\\E011'
    },
    8817: {
        c: '\\E00E'
    },
    8840: {
        c: '\\E016'
    },
    8841: {
        c: '\\E018'
    },
    8842: {
        c: '\\E01A'
    },
    8843: {
        c: '\\E01B'
    },
    10887: {
        c: '\\E010'
    },
    10888: {
        c: '\\E00F'
    },
    10955: {
        c: '\\E017'
    },
    10956: {
        c: '\\E019'
    }
});

},{"../../FontData.js":"1ERs0","../../../common/fonts/tex/tex-variant.js":"2G08r"}],"2G08r":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.texVariant = void 0;
exports.texVariant = {
    710: [
        0.845,
        -0.561,
        2.333,
        {
            ic: 0.013
        }
    ],
    732: [
        0.899,
        -0.628,
        2.333
    ],
    770: [
        0.845,
        -0.561,
        0,
        {
            ic: 0.013
        }
    ],
    771: [
        0.899,
        -0.628,
        0
    ],
    1008: [
        0.434,
        0.006,
        0.667,
        {
            ic: 0.067
        }
    ],
    8463: [
        0.695,
        0.013,
        0.54,
        {
            ic: 0.022
        }
    ],
    8592: [
        0.437,
        -0.064,
        0.5
    ],
    8594: [
        0.437,
        -0.064,
        0.5
    ],
    8652: [
        0.514,
        0.014,
        1
    ],
    8708: [
        0.86,
        0.166,
        0.556
    ],
    8709: [
        0.587,
        0,
        0.778
    ],
    8722: [
        0.27,
        -0.23,
        0.5
    ],
    8726: [
        0.43,
        0.023,
        0.778
    ],
    8733: [
        0.472,
        -0.028,
        0.778
    ],
    8739: [
        0.43,
        0.023,
        0.222
    ],
    8740: [
        0.43,
        0.023,
        0.222,
        {
            ic: 0.018
        }
    ],
    8741: [
        0.431,
        0.023,
        0.389
    ],
    8742: [
        0.431,
        0.024,
        0.389,
        {
            ic: 0.018
        }
    ],
    8764: [
        0.365,
        -0.132,
        0.778
    ],
    8776: [
        0.481,
        -0.05,
        0.778
    ],
    8808: [
        0.752,
        0.284,
        0.778
    ],
    8809: [
        0.752,
        0.284,
        0.778
    ],
    8816: [
        0.919,
        0.421,
        0.778
    ],
    8817: [
        0.919,
        0.421,
        0.778
    ],
    8840: [
        0.828,
        0.33,
        0.778
    ],
    8841: [
        0.828,
        0.33,
        0.778
    ],
    8842: [
        0.634,
        0.255,
        0.778
    ],
    8843: [
        0.634,
        0.254,
        0.778
    ],
    8872: [
        0.694,
        0,
        0.611
    ],
    8901: [
        0.189,
        0,
        0.278
    ],
    8994: [
        0.378,
        -0.122,
        0.778
    ],
    8995: [
        0.378,
        -0.143,
        0.778
    ],
    9651: [
        0.575,
        0.02,
        0.722
    ],
    9661: [
        0.576,
        0.019,
        0.722
    ],
    10887: [
        0.801,
        0.303,
        0.778
    ],
    10888: [
        0.801,
        0.303,
        0.778
    ],
    10955: [
        0.752,
        0.332,
        0.778
    ],
    10956: [
        0.752,
        0.333,
        0.778
    ]
};

},{}],"3q9AU":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.delimiters = exports.VSIZES = exports.HDW3 = exports.HDW2 = exports.HDW1 = void 0;
var FontData_js_1 = require("../../FontData.js");
exports.HDW1 = [
    0.75,
    0.25,
    0.875
];
exports.HDW2 = [
    0.85,
    0.349,
    0.667
];
exports.HDW3 = [
    0.583,
    0.082,
    0.5
];
exports.VSIZES = [
    1,
    1.2,
    1.8,
    2.4,
    3
];
var DELIM2F = {
    c: 47,
    dir: FontData_js_1.V,
    sizes: exports.VSIZES
};
var DELIMAF = {
    c: 175,
    dir: FontData_js_1.H,
    sizes: [
        0.5
    ],
    stretch: [
        0,
        175
    ],
    HDW: [
        0.59,
        -0.544,
        0.5
    ]
};
var DELIM2C6 = {
    c: 710,
    dir: FontData_js_1.H,
    sizes: [
        0.5,
        0.556,
        1,
        1.444,
        1.889
    ]
};
var DELIM2DC = {
    c: 732,
    dir: FontData_js_1.H,
    sizes: [
        0.5,
        0.556,
        1,
        1.444,
        1.889
    ]
};
var DELIM2013 = {
    c: 8211,
    dir: FontData_js_1.H,
    sizes: [
        0.5
    ],
    stretch: [
        0,
        8211
    ],
    HDW: [
        0.285,
        -0.248,
        0.5
    ]
};
var DELIM2190 = {
    c: 8592,
    dir: FontData_js_1.H,
    sizes: [
        1
    ],
    stretch: [
        8592,
        8722
    ],
    HDW: exports.HDW3
};
var DELIM2192 = {
    c: 8594,
    dir: FontData_js_1.H,
    sizes: [
        1
    ],
    stretch: [
        0,
        8722,
        8594
    ],
    HDW: exports.HDW3
};
var DELIM2194 = {
    c: 8596,
    dir: FontData_js_1.H,
    sizes: [
        1
    ],
    stretch: [
        8592,
        8722,
        8594
    ],
    HDW: exports.HDW3
};
var DELIM21A4 = {
    c: 8612,
    dir: FontData_js_1.H,
    stretch: [
        8592,
        8722,
        8739
    ],
    HDW: exports.HDW3,
    min: 1.278
};
var DELIM21A6 = {
    c: 8614,
    dir: FontData_js_1.H,
    sizes: [
        1
    ],
    stretch: [
        8739,
        8722,
        8594
    ],
    HDW: exports.HDW3
};
var DELIM21D0 = {
    c: 8656,
    dir: FontData_js_1.H,
    sizes: [
        1
    ],
    stretch: [
        8656,
        61
    ],
    HDW: exports.HDW3
};
var DELIM21D2 = {
    c: 8658,
    dir: FontData_js_1.H,
    sizes: [
        1
    ],
    stretch: [
        0,
        61,
        8658
    ],
    HDW: exports.HDW3
};
var DELIM21D4 = {
    c: 8660,
    dir: FontData_js_1.H,
    sizes: [
        1
    ],
    stretch: [
        8656,
        61,
        8658
    ],
    HDW: exports.HDW3
};
var DELIM2212 = {
    c: 8722,
    dir: FontData_js_1.H,
    sizes: [
        0.778
    ],
    stretch: [
        0,
        8722
    ],
    HDW: exports.HDW3
};
var DELIM2223 = {
    c: 8739,
    dir: FontData_js_1.V,
    sizes: [
        1
    ],
    stretch: [
        0,
        8739
    ],
    HDW: [
        0.627,
        0.015,
        0.333
    ]
};
var DELIM23DC = {
    c: 9180,
    dir: FontData_js_1.H,
    sizes: [
        0.778,
        1
    ],
    schar: [
        8994,
        8994
    ],
    variants: [
        5,
        0
    ],
    stretch: [
        57680,
        57684,
        57681
    ],
    HDW: [
        0.32,
        0.2,
        0.5
    ]
};
var DELIM23DD = {
    c: 9181,
    dir: FontData_js_1.H,
    sizes: [
        0.778,
        1
    ],
    schar: [
        8995,
        8995
    ],
    variants: [
        5,
        0
    ],
    stretch: [
        57682,
        57684,
        57683
    ],
    HDW: [
        0.32,
        0.2,
        0.5
    ]
};
var DELIM23DE = {
    c: 9182,
    dir: FontData_js_1.H,
    stretch: [
        57680,
        57684,
        57681,
        57685
    ],
    HDW: [
        0.32,
        0.2,
        0.5
    ],
    min: 1.8
};
var DELIM23DF = {
    c: 9183,
    dir: FontData_js_1.H,
    stretch: [
        57682,
        57684,
        57683,
        57686
    ],
    HDW: [
        0.32,
        0.2,
        0.5
    ],
    min: 1.8
};
var DELIM27E8 = {
    c: 10216,
    dir: FontData_js_1.V,
    sizes: exports.VSIZES
};
var DELIM27E9 = {
    c: 10217,
    dir: FontData_js_1.V,
    sizes: exports.VSIZES
};
var DELIM2906 = {
    c: 10502,
    dir: FontData_js_1.H,
    stretch: [
        8656,
        61,
        8739
    ],
    HDW: exports.HDW3,
    min: 1.278
};
var DELIM2907 = {
    c: 10503,
    dir: FontData_js_1.H,
    stretch: [
        8872,
        61,
        8658
    ],
    HDW: exports.HDW3,
    min: 1.278
};
exports.delimiters = {
    40: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            9115,
            9116,
            9117
        ],
        HDW: [
            0.85,
            0.349,
            0.875
        ]
    },
    41: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            9118,
            9119,
            9120
        ],
        HDW: [
            0.85,
            0.349,
            0.875
        ]
    },
    45: DELIM2212,
    47: DELIM2F,
    61: {
        dir: FontData_js_1.H,
        sizes: [
            0.778
        ],
        stretch: [
            0,
            61
        ],
        HDW: exports.HDW3
    },
    91: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            9121,
            9122,
            9123
        ],
        HDW: exports.HDW2
    },
    92: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES
    },
    93: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            9124,
            9125,
            9126
        ],
        HDW: exports.HDW2
    },
    94: DELIM2C6,
    95: DELIM2013,
    123: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            9127,
            9130,
            9129,
            9128
        ],
        HDW: [
            0.85,
            0.349,
            0.889
        ]
    },
    124: {
        dir: FontData_js_1.V,
        sizes: [
            1
        ],
        stretch: [
            0,
            8739
        ],
        HDW: [
            0.75,
            0.25,
            0.333
        ]
    },
    125: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            9131,
            9130,
            9133,
            9132
        ],
        HDW: [
            0.85,
            0.349,
            0.889
        ]
    },
    126: DELIM2DC,
    175: DELIMAF,
    710: DELIM2C6,
    713: DELIMAF,
    732: DELIM2DC,
    770: DELIM2C6,
    771: DELIM2DC,
    818: DELIM2013,
    8211: DELIM2013,
    8212: DELIM2013,
    8213: DELIM2013,
    8214: {
        dir: FontData_js_1.V,
        sizes: [
            0.602,
            1
        ],
        schar: [
            0,
            8741
        ],
        variants: [
            1,
            0
        ],
        stretch: [
            0,
            8741
        ],
        HDW: [
            0.602,
            0,
            0.556
        ]
    },
    8215: DELIM2013,
    8254: DELIMAF,
    8407: DELIM2192,
    8592: DELIM2190,
    8593: {
        dir: FontData_js_1.V,
        sizes: [
            0.888
        ],
        stretch: [
            8593,
            9168
        ],
        HDW: [
            0.6,
            0,
            0.667
        ]
    },
    8594: DELIM2192,
    8595: {
        dir: FontData_js_1.V,
        sizes: [
            0.888
        ],
        stretch: [
            0,
            9168,
            8595
        ],
        HDW: [
            0.6,
            0,
            0.667
        ]
    },
    8596: DELIM2194,
    8597: {
        dir: FontData_js_1.V,
        sizes: [
            1.044
        ],
        stretch: [
            8593,
            9168,
            8595
        ],
        HDW: exports.HDW1
    },
    8606: {
        dir: FontData_js_1.H,
        sizes: [
            1
        ],
        stretch: [
            8606,
            8722
        ],
        HDW: exports.HDW3
    },
    8608: {
        dir: FontData_js_1.H,
        sizes: [
            1
        ],
        stretch: [
            0,
            8722,
            8608
        ],
        HDW: exports.HDW3
    },
    8612: DELIM21A4,
    8613: {
        dir: FontData_js_1.V,
        stretch: [
            8593,
            9168,
            8869
        ],
        HDW: exports.HDW1,
        min: 1.555
    },
    8614: DELIM21A6,
    8615: {
        dir: FontData_js_1.V,
        stretch: [
            8868,
            9168,
            8595
        ],
        HDW: exports.HDW1,
        min: 1.555
    },
    8624: {
        dir: FontData_js_1.V,
        sizes: [
            0.722
        ],
        stretch: [
            8624,
            9168
        ],
        HDW: exports.HDW1
    },
    8625: {
        dir: FontData_js_1.V,
        sizes: [
            0.722
        ],
        stretch: [
            8625,
            9168
        ],
        HDW: exports.HDW1
    },
    8636: {
        dir: FontData_js_1.H,
        sizes: [
            1
        ],
        stretch: [
            8636,
            8722
        ],
        HDW: exports.HDW3
    },
    8637: {
        dir: FontData_js_1.H,
        sizes: [
            1
        ],
        stretch: [
            8637,
            8722
        ],
        HDW: exports.HDW3
    },
    8638: {
        dir: FontData_js_1.V,
        sizes: [
            0.888
        ],
        stretch: [
            8638,
            9168
        ],
        HDW: exports.HDW1
    },
    8639: {
        dir: FontData_js_1.V,
        sizes: [
            0.888
        ],
        stretch: [
            8639,
            9168
        ],
        HDW: exports.HDW1
    },
    8640: {
        dir: FontData_js_1.H,
        sizes: [
            1
        ],
        stretch: [
            0,
            8722,
            8640
        ],
        HDW: exports.HDW3
    },
    8641: {
        dir: FontData_js_1.H,
        sizes: [
            1
        ],
        stretch: [
            0,
            8722,
            8641
        ],
        HDW: exports.HDW3
    },
    8642: {
        dir: FontData_js_1.V,
        sizes: [
            0.888
        ],
        stretch: [
            0,
            9168,
            8642
        ],
        HDW: exports.HDW1
    },
    8643: {
        dir: FontData_js_1.V,
        sizes: [
            0.888
        ],
        stretch: [
            0,
            9168,
            8643
        ],
        HDW: exports.HDW1
    },
    8656: DELIM21D0,
    8657: {
        dir: FontData_js_1.V,
        sizes: [
            0.888
        ],
        stretch: [
            8657,
            8214
        ],
        HDW: [
            0.599,
            0,
            0.778
        ]
    },
    8658: DELIM21D2,
    8659: {
        dir: FontData_js_1.V,
        sizes: [
            0.888
        ],
        stretch: [
            0,
            8214,
            8659
        ],
        HDW: [
            0.6,
            0,
            0.778
        ]
    },
    8660: DELIM21D4,
    8661: {
        dir: FontData_js_1.V,
        sizes: [
            1.044
        ],
        stretch: [
            8657,
            8214,
            8659
        ],
        HDW: [
            0.75,
            0.25,
            0.778
        ]
    },
    8666: {
        dir: FontData_js_1.H,
        sizes: [
            1
        ],
        stretch: [
            8666,
            8801
        ],
        HDW: [
            0.464,
            -0.036,
            0.5
        ]
    },
    8667: {
        dir: FontData_js_1.H,
        sizes: [
            1
        ],
        stretch: [
            0,
            8801,
            8667
        ],
        HDW: [
            0.464,
            -0.036,
            0.5
        ]
    },
    8722: DELIM2212,
    8725: DELIM2F,
    8730: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            57345,
            57344,
            9143
        ],
        fullExt: [
            0.65,
            2.3
        ],
        HDW: [
            0.85,
            0.35,
            1.056
        ]
    },
    8739: DELIM2223,
    8741: {
        dir: FontData_js_1.V,
        sizes: [
            1
        ],
        stretch: [
            0,
            8741
        ],
        HDW: [
            0.627,
            0.015,
            0.556
        ]
    },
    8968: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            9121,
            9122
        ],
        HDW: exports.HDW2
    },
    8969: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            9124,
            9125
        ],
        HDW: exports.HDW2
    },
    8970: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            0,
            9122,
            9123
        ],
        HDW: exports.HDW2
    },
    8971: {
        dir: FontData_js_1.V,
        sizes: exports.VSIZES,
        stretch: [
            0,
            9125,
            9126
        ],
        HDW: exports.HDW2
    },
    8978: DELIM23DC,
    8994: DELIM23DC,
    8995: DELIM23DD,
    9001: DELIM27E8,
    9002: DELIM27E9,
    9130: {
        dir: FontData_js_1.V,
        sizes: [
            0.32
        ],
        stretch: [
            9130,
            9130,
            9130
        ],
        HDW: [
            0.29,
            0.015,
            0.889
        ]
    },
    9135: DELIM2013,
    9136: {
        dir: FontData_js_1.V,
        sizes: [
            0.989
        ],
        stretch: [
            9127,
            9130,
            9133
        ],
        HDW: [
            0.75,
            0.25,
            0.889
        ]
    },
    9137: {
        dir: FontData_js_1.V,
        sizes: [
            0.989
        ],
        stretch: [
            9131,
            9130,
            9129
        ],
        HDW: [
            0.75,
            0.25,
            0.889
        ]
    },
    9140: {
        dir: FontData_js_1.H,
        stretch: [
            9484,
            8722,
            9488
        ],
        HDW: exports.HDW3,
        min: 1
    },
    9141: {
        dir: FontData_js_1.H,
        stretch: [
            9492,
            8722,
            9496
        ],
        HDW: exports.HDW3,
        min: 1
    },
    9168: {
        dir: FontData_js_1.V,
        sizes: [
            0.602,
            1
        ],
        schar: [
            0,
            8739
        ],
        variants: [
            1,
            0
        ],
        stretch: [
            0,
            8739
        ],
        HDW: [
            0.602,
            0,
            0.333
        ]
    },
    9180: DELIM23DC,
    9181: DELIM23DD,
    9182: DELIM23DE,
    9183: DELIM23DF,
    9184: {
        dir: FontData_js_1.H,
        stretch: [
            714,
            713,
            715
        ],
        HDW: [
            0.59,
            -0.544,
            0.5
        ],
        min: 1
    },
    9185: {
        dir: FontData_js_1.H,
        stretch: [
            715,
            713,
            714
        ],
        HDW: [
            0.59,
            -0.544,
            0.5
        ],
        min: 1
    },
    9472: DELIM2013,
    10072: DELIM2223,
    10216: DELIM27E8,
    10217: DELIM27E9,
    10222: {
        dir: FontData_js_1.V,
        sizes: [
            0.989
        ],
        stretch: [
            9127,
            9130,
            9129
        ],
        HDW: [
            0.75,
            0.25,
            0.889
        ]
    },
    10223: {
        dir: FontData_js_1.V,
        sizes: [
            0.989
        ],
        stretch: [
            9131,
            9130,
            9133
        ],
        HDW: [
            0.75,
            0.25,
            0.889
        ]
    },
    10229: DELIM2190,
    10230: DELIM2192,
    10231: DELIM2194,
    10232: DELIM21D0,
    10233: DELIM21D2,
    10234: DELIM21D4,
    10235: DELIM21A4,
    10236: DELIM21A6,
    10237: DELIM2906,
    10238: DELIM2907,
    10502: DELIM2906,
    10503: DELIM2907,
    10574: {
        dir: FontData_js_1.H,
        stretch: [
            8636,
            8722,
            8640
        ],
        HDW: exports.HDW3,
        min: 2
    },
    10575: {
        dir: FontData_js_1.V,
        stretch: [
            8638,
            9168,
            8642
        ],
        HDW: exports.HDW1,
        min: 1.776
    },
    10576: {
        dir: FontData_js_1.H,
        stretch: [
            8637,
            8722,
            8641
        ],
        HDW: exports.HDW3,
        min: 2
    },
    10577: {
        dir: FontData_js_1.V,
        stretch: [
            8639,
            9168,
            8643
        ],
        HDW: exports.HDW1,
        min: 0.5
    },
    10586: {
        dir: FontData_js_1.H,
        stretch: [
            8636,
            8722,
            8739
        ],
        HDW: exports.HDW3,
        min: 1.278
    },
    10587: {
        dir: FontData_js_1.H,
        stretch: [
            8739,
            8722,
            8640
        ],
        HDW: exports.HDW3,
        min: 1.278
    },
    10588: {
        dir: FontData_js_1.V,
        stretch: [
            8638,
            9168,
            8869
        ],
        HDW: exports.HDW1,
        min: 1.556
    },
    10589: {
        dir: FontData_js_1.V,
        stretch: [
            8868,
            9168,
            8642
        ],
        HDW: exports.HDW1,
        min: 1.556
    },
    10590: {
        dir: FontData_js_1.H,
        stretch: [
            8637,
            8722,
            8739
        ],
        HDW: exports.HDW3,
        min: 1.278
    },
    10591: {
        dir: FontData_js_1.H,
        stretch: [
            8739,
            8722,
            8641
        ],
        HDW: exports.HDW3,
        min: 1.278
    },
    10592: {
        dir: FontData_js_1.V,
        stretch: [
            8639,
            9168,
            8869
        ],
        HDW: exports.HDW1,
        min: 1.776
    },
    10593: {
        dir: FontData_js_1.V,
        stretch: [
            8868,
            9168,
            8643
        ],
        HDW: exports.HDW1,
        min: 1.776
    },
    12296: DELIM27E8,
    12297: DELIM27E9,
    65079: DELIM23DE,
    65080: DELIM23DF
};

},{"../../FontData.js":"7CKUF"}],"ulyjU":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.browserAdaptor = void 0;
var HTMLAdaptor_js_1 = require("./HTMLAdaptor.js");
function browserAdaptor() {
    return new HTMLAdaptor_js_1.HTMLAdaptor(window);
}
exports.browserAdaptor = browserAdaptor;

},{"./HTMLAdaptor.js":"7IS1r"}],"7IS1r":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.HTMLAdaptor = void 0;
var DOMAdaptor_js_1 = require("../core/DOMAdaptor.js");
var HTMLAdaptor1 = function(_super) {
    __extends(HTMLAdaptor2, _super);
    function HTMLAdaptor2(window) {
        var _this = _super.call(this, window.document) || this;
        _this.window = window;
        _this.parser = new window.DOMParser();
        return _this;
    }
    HTMLAdaptor2.prototype.parse = function(text, format) {
        if (format === void 0) format = 'text/html';
        return this.parser.parseFromString(text, format);
    };
    HTMLAdaptor2.prototype.create = function(kind, ns) {
        return ns ? this.document.createElementNS(ns, kind) : this.document.createElement(kind);
    };
    HTMLAdaptor2.prototype.text = function(text) {
        return this.document.createTextNode(text);
    };
    HTMLAdaptor2.prototype.head = function(doc) {
        return doc.head;
    };
    HTMLAdaptor2.prototype.body = function(doc) {
        return doc.body;
    };
    HTMLAdaptor2.prototype.root = function(doc) {
        return doc.documentElement;
    };
    HTMLAdaptor2.prototype.doctype = function(doc) {
        return "<!DOCTYPE " + doc.doctype.name + ">";
    };
    HTMLAdaptor2.prototype.tags = function(node, name, ns) {
        if (ns === void 0) ns = null;
        var nodes = ns ? node.getElementsByTagNameNS(ns, name) : node.getElementsByTagName(name);
        return Array.from(nodes);
    };
    HTMLAdaptor2.prototype.getElements = function(nodes, _document) {
        var e_1, _a;
        var containers = [];
        try {
            for(var nodes_1 = __values(nodes), nodes_1_1 = nodes_1.next(); !nodes_1_1.done; nodes_1_1 = nodes_1.next()){
                var node = nodes_1_1.value;
                if (typeof node === 'string') containers = containers.concat(Array.from(this.document.querySelectorAll(node)));
                else if (Array.isArray(node)) containers = containers.concat(Array.from(node));
                else if (node instanceof this.window.NodeList || node instanceof this.window.HTMLCollection) containers = containers.concat(Array.from(node));
                else containers.push(node);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (nodes_1_1 && !nodes_1_1.done && (_a = nodes_1.return)) _a.call(nodes_1);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        return containers;
    };
    HTMLAdaptor2.prototype.contains = function(container, node) {
        return container.contains(node);
    };
    HTMLAdaptor2.prototype.parent = function(node) {
        return node.parentNode;
    };
    HTMLAdaptor2.prototype.append = function(node, child) {
        return node.appendChild(child);
    };
    HTMLAdaptor2.prototype.insert = function(nchild, ochild) {
        return this.parent(ochild).insertBefore(nchild, ochild);
    };
    HTMLAdaptor2.prototype.remove = function(child) {
        return this.parent(child).removeChild(child);
    };
    HTMLAdaptor2.prototype.replace = function(nnode, onode) {
        return this.parent(onode).replaceChild(nnode, onode);
    };
    HTMLAdaptor2.prototype.clone = function(node) {
        return node.cloneNode(true);
    };
    HTMLAdaptor2.prototype.split = function(node, n) {
        return node.splitText(n);
    };
    HTMLAdaptor2.prototype.next = function(node) {
        return node.nextSibling;
    };
    HTMLAdaptor2.prototype.previous = function(node) {
        return node.previousSibling;
    };
    HTMLAdaptor2.prototype.firstChild = function(node) {
        return node.firstChild;
    };
    HTMLAdaptor2.prototype.lastChild = function(node) {
        return node.lastChild;
    };
    HTMLAdaptor2.prototype.childNodes = function(node) {
        return Array.from(node.childNodes);
    };
    HTMLAdaptor2.prototype.childNode = function(node, i) {
        return node.childNodes[i];
    };
    HTMLAdaptor2.prototype.kind = function(node) {
        var n = node.nodeType;
        return n === 1 || n === 3 || n === 8 ? node.nodeName.toLowerCase() : '';
    };
    HTMLAdaptor2.prototype.value = function(node) {
        return node.nodeValue || '';
    };
    HTMLAdaptor2.prototype.textContent = function(node) {
        return node.textContent;
    };
    HTMLAdaptor2.prototype.innerHTML = function(node) {
        return node.innerHTML;
    };
    HTMLAdaptor2.prototype.outerHTML = function(node) {
        return node.outerHTML;
    };
    HTMLAdaptor2.prototype.serializeXML = function(node) {
        var serializer = new this.window.XMLSerializer();
        return serializer.serializeToString(node);
    };
    HTMLAdaptor2.prototype.setAttribute = function(node, name, value, ns) {
        if (ns === void 0) ns = null;
        if (!ns) return node.setAttribute(name, value);
        name = ns.replace(/.*\//, '') + ':' + name.replace(/^.*:/, '');
        return node.setAttributeNS(ns, name, value);
    };
    HTMLAdaptor2.prototype.getAttribute = function(node, name) {
        return node.getAttribute(name);
    };
    HTMLAdaptor2.prototype.removeAttribute = function(node, name) {
        return node.removeAttribute(name);
    };
    HTMLAdaptor2.prototype.hasAttribute = function(node, name) {
        return node.hasAttribute(name);
    };
    HTMLAdaptor2.prototype.allAttributes = function(node) {
        return Array.from(node.attributes).map(function(x) {
            return {
                name: x.name,
                value: x.value
            };
        });
    };
    HTMLAdaptor2.prototype.addClass = function(node, name) {
        if (node.classList) node.classList.add(name);
        else node.className = (node.className + ' ' + name).trim();
    };
    HTMLAdaptor2.prototype.removeClass = function(node, name) {
        if (node.classList) node.classList.remove(name);
        else node.className = node.className.split(/ /).filter(function(c) {
            return c !== name;
        }).join(' ');
    };
    HTMLAdaptor2.prototype.hasClass = function(node, name) {
        if (node.classList) return node.classList.contains(name);
        return node.className.split(/ /).indexOf(name) >= 0;
    };
    HTMLAdaptor2.prototype.setStyle = function(node, name, value) {
        node.style[name] = value;
    };
    HTMLAdaptor2.prototype.getStyle = function(node, name) {
        return node.style[name];
    };
    HTMLAdaptor2.prototype.allStyles = function(node) {
        return node.style.cssText;
    };
    HTMLAdaptor2.prototype.fontSize = function(node) {
        var style = this.window.getComputedStyle(node);
        return parseFloat(style.fontSize);
    };
    HTMLAdaptor2.prototype.fontFamily = function(node) {
        var style = this.window.getComputedStyle(node);
        return style.fontFamily || '';
    };
    HTMLAdaptor2.prototype.nodeSize = function(node, em, local) {
        if (em === void 0) em = 1;
        if (local === void 0) local = false;
        if (local && node.getBBox) {
            var _a = node.getBBox(), width = _a.width, height = _a.height;
            return [
                width / em,
                height / em
            ];
        }
        return [
            node.offsetWidth / em,
            node.offsetHeight / em
        ];
    };
    HTMLAdaptor2.prototype.nodeBBox = function(node) {
        var _a = node.getBoundingClientRect(), left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;
        return {
            left: left,
            right: right,
            top: top,
            bottom: bottom
        };
    };
    return HTMLAdaptor2;
}(DOMAdaptor_js_1.AbstractDOMAdaptor);
exports.HTMLAdaptor = HTMLAdaptor1;

},{"../core/DOMAdaptor.js":"26Z2o"}],"26Z2o":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractDOMAdaptor = void 0;
var AbstractDOMAdaptor = function() {
    function AbstractDOMAdaptor1(document) {
        if (document === void 0) document = null;
        this.document = document;
    }
    AbstractDOMAdaptor1.prototype.node = function(kind, def, children, ns) {
        var e_1, _a;
        if (def === void 0) def = {
        };
        if (children === void 0) children = [];
        var node = this.create(kind, ns);
        this.setAttributes(node, def);
        try {
            for(var children_1 = __values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()){
                var child = children_1_1.value;
                this.append(node, child);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        return node;
    };
    AbstractDOMAdaptor1.prototype.setAttributes = function(node, def) {
        var e_2, _a, e_3, _b, e_4, _c;
        if (def.style && typeof def.style !== 'string') try {
            for(var _d = __values(Object.keys(def.style)), _e = _d.next(); !_e.done; _e = _d.next()){
                var key = _e.value;
                this.setStyle(node, key.replace(/-([a-z])/g, function(_m, c) {
                    return c.toUpperCase();
                }), def.style[key]);
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
        if (def.properties) try {
            for(var _f = __values(Object.keys(def.properties)), _g = _f.next(); !_g.done; _g = _f.next()){
                var key = _g.value;
                node[key] = def.properties[key];
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        try {
            for(var _h = __values(Object.keys(def)), _j = _h.next(); !_j.done; _j = _h.next()){
                var key = _j.value;
                if ((key !== 'style' || typeof def.style === 'string') && key !== 'properties') this.setAttribute(node, key, def[key]);
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_j && !_j.done && (_c = _h.return)) _c.call(_h);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
    };
    AbstractDOMAdaptor1.prototype.replace = function(nnode, onode) {
        this.insert(nnode, onode);
        this.remove(onode);
        return onode;
    };
    AbstractDOMAdaptor1.prototype.childNode = function(node, i) {
        return this.childNodes(node)[i];
    };
    AbstractDOMAdaptor1.prototype.allClasses = function(node) {
        var classes = this.getAttribute(node, 'class');
        return !classes ? [] : classes.replace(/  +/g, ' ').replace(/^ /, '').replace(/ $/, '').split(/ /);
    };
    return AbstractDOMAdaptor1;
}();
exports.AbstractDOMAdaptor = AbstractDOMAdaptor;

},{}],"AXdxh":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.RegisterHTMLHandler = void 0;
var mathjax_js_1 = require("../mathjax.js");
var HTMLHandler_js_1 = require("./html/HTMLHandler.js");
function RegisterHTMLHandler(adaptor) {
    var handler = new HTMLHandler_js_1.HTMLHandler(adaptor);
    mathjax_js_1.mathjax.handlers.register(handler);
    return handler;
}
exports.RegisterHTMLHandler = RegisterHTMLHandler;

},{"../mathjax.js":"7BASf","./html/HTMLHandler.js":"5aUGr"}],"5aUGr":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.HTMLHandler = void 0;
var Handler_js_1 = require("../../core/Handler.js");
var HTMLDocument_js_1 = require("./HTMLDocument.js");
var HTMLHandler1 = function(_super) {
    __extends(HTMLHandler2, _super);
    function HTMLHandler2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.documentClass = HTMLDocument_js_1.HTMLDocument;
        return _this;
    }
    HTMLHandler2.prototype.handlesDocument = function(document) {
        var adaptor = this.adaptor;
        if (typeof document === 'string') try {
            document = adaptor.parse(document, 'text/html');
        } catch (err) {
        }
        if (document instanceof adaptor.window.Document || document instanceof adaptor.window.HTMLElement || document instanceof adaptor.window.DocumentFragment) return true;
        return false;
    };
    HTMLHandler2.prototype.create = function(document, options) {
        var adaptor = this.adaptor;
        if (typeof document === 'string') document = adaptor.parse(document, 'text/html');
        else if (document instanceof adaptor.window.HTMLElement || document instanceof adaptor.window.DocumentFragment) {
            var child = document;
            document = adaptor.parse('', 'text/html');
            adaptor.append(adaptor.body(document), child);
        }
        return _super.prototype.create.call(this, document, options);
    };
    return HTMLHandler2;
}(Handler_js_1.AbstractHandler);
exports.HTMLHandler = HTMLHandler1;

},{"../../core/Handler.js":"5jJA5","./HTMLDocument.js":"30IWr"}],"5jJA5":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractHandler = void 0;
var MathDocument_js_1 = require("./MathDocument.js");
var DefaultMathDocument1 = function(_super) {
    __extends(DefaultMathDocument2, _super);
    function DefaultMathDocument2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return DefaultMathDocument2;
}(MathDocument_js_1.AbstractMathDocument);
var AbstractHandler = function() {
    function AbstractHandler1(adaptor, priority) {
        if (priority === void 0) priority = 5;
        this.documentClass = DefaultMathDocument1;
        this.adaptor = adaptor;
        this.priority = priority;
    }
    Object.defineProperty(AbstractHandler1.prototype, "name", {
        get: function() {
            return this.constructor.NAME;
        },
        enumerable: false,
        configurable: true
    });
    AbstractHandler1.prototype.handlesDocument = function(_document) {
        return false;
    };
    AbstractHandler1.prototype.create = function(document, options) {
        return new this.documentClass(document, this.adaptor, options);
    };
    AbstractHandler1.NAME = 'generic';
    return AbstractHandler1;
}();
exports.AbstractHandler = AbstractHandler;

},{"./MathDocument.js":"3DU7c"}],"3DU7c":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractMathDocument = exports.resetAllOptions = exports.resetOptions = exports.RenderList = void 0;
var Options_js_1 = require("../util/Options.js");
var InputJax_js_1 = require("./InputJax.js");
var OutputJax_js_1 = require("./OutputJax.js");
var MathList_js_1 = require("./MathList.js");
var MathItem_js_1 = require("./MathItem.js");
var MmlFactory_js_1 = require("../core/MmlTree/MmlFactory.js");
var BitField_js_1 = require("../util/BitField.js");
var PrioritizedList_js_1 = require("../util/PrioritizedList.js");
var RenderList1 = function(_super) {
    __extends(RenderList2, _super);
    function RenderList2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    RenderList2.create = function(actions) {
        var e_1, _a;
        var list = new this();
        try {
            for(var _b = __values(Object.keys(actions)), _c = _b.next(); !_c.done; _c = _b.next()){
                var id = _c.value;
                var _d = __read(this.action(id, actions[id]), 2), action = _d[0], priority = _d[1];
                if (priority) list.add(action, priority);
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        return list;
    };
    RenderList2.action = function(id, action) {
        var _a, _b, _c, _d;
        var renderDoc, renderMath;
        var convert = true;
        var priority = action[0];
        if (action.length === 1 || typeof action[1] === 'boolean') {
            action.length === 2 && (convert = action[1]);
            _a = __read(this.methodActions(id), 2), renderDoc = _a[0], renderMath = _a[1];
        } else if (typeof action[1] === 'string') {
            if (typeof action[2] === 'string') {
                action.length === 4 && (convert = action[3]);
                var _e = __read(action.slice(1), 2), method1 = _e[0], method2 = _e[1];
                _b = __read(this.methodActions(method1, method2), 2), renderDoc = _b[0], renderMath = _b[1];
            } else {
                action.length === 3 && (convert = action[2]);
                _c = __read(this.methodActions(action[1]), 2), renderDoc = _c[0], renderMath = _c[1];
            }
        } else {
            action.length === 4 && (convert = action[3]);
            _d = __read(action.slice(1), 2), renderDoc = _d[0], renderMath = _d[1];
        }
        return [
            {
                id: id,
                renderDoc: renderDoc,
                renderMath: renderMath,
                convert: convert
            },
            priority
        ];
    };
    RenderList2.methodActions = function(method1, method2) {
        if (method2 === void 0) method2 = method1;
        return [
            function(document) {
                method1 && document[method1]();
                return false;
            },
            function(math, document) {
                method2 && math[method2](document);
                return false;
            }
        ];
    };
    RenderList2.prototype.renderDoc = function(document, start) {
        var e_2, _a;
        if (start === void 0) start = MathItem_js_1.STATE.UNPROCESSED;
        try {
            for(var _b = __values(this.items), _c = _b.next(); !_c.done; _c = _b.next()){
                var item = _c.value;
                if (item.priority >= start) {
                    if (item.item.renderDoc(document)) return;
                }
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    };
    RenderList2.prototype.renderMath = function(math, document, start) {
        var e_3, _a;
        if (start === void 0) start = MathItem_js_1.STATE.UNPROCESSED;
        try {
            for(var _b = __values(this.items), _c = _b.next(); !_c.done; _c = _b.next()){
                var item = _c.value;
                if (item.priority >= start) {
                    if (item.item.renderMath(math, document)) return;
                }
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
    };
    RenderList2.prototype.renderConvert = function(math, document, end) {
        var e_4, _a;
        if (end === void 0) end = MathItem_js_1.STATE.LAST;
        try {
            for(var _b = __values(this.items), _c = _b.next(); !_c.done; _c = _b.next()){
                var item = _c.value;
                if (item.priority > end) return;
                if (item.item.convert) {
                    if (item.item.renderMath(math, document)) return;
                }
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
    };
    RenderList2.prototype.findID = function(id) {
        var e_5, _a;
        try {
            for(var _b = __values(this.items), _c = _b.next(); !_c.done; _c = _b.next()){
                var item = _c.value;
                if (item.item.id === id) return item.item;
            }
        } catch (e_5_1) {
            e_5 = {
                error: e_5_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_5) throw e_5.error;
            }
        }
        return null;
    };
    return RenderList2;
}(PrioritizedList_js_1.PrioritizedList);
exports.RenderList = RenderList1;
exports.resetOptions = {
    all: false,
    processed: false,
    inputJax: null,
    outputJax: null
};
exports.resetAllOptions = {
    all: true,
    processed: true,
    inputJax: [],
    outputJax: []
};
var DefaultInputJax1 = function(_super) {
    __extends(DefaultInputJax2, _super);
    function DefaultInputJax2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DefaultInputJax2.prototype.compile = function(_math) {
        return null;
    };
    return DefaultInputJax2;
}(InputJax_js_1.AbstractInputJax);
var DefaultOutputJax1 = function(_super) {
    __extends(DefaultOutputJax2, _super);
    function DefaultOutputJax2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DefaultOutputJax2.prototype.typeset = function(_math, _document) {
        if (_document === void 0) _document = null;
        return null;
    };
    DefaultOutputJax2.prototype.escaped = function(_math, _document) {
        return null;
    };
    return DefaultOutputJax2;
}(OutputJax_js_1.AbstractOutputJax);
var DefaultMathList1 = function(_super) {
    __extends(DefaultMathList2, _super);
    function DefaultMathList2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return DefaultMathList2;
}(MathList_js_1.AbstractMathList);
var DefaultMathItem1 = function(_super) {
    __extends(DefaultMathItem2, _super);
    function DefaultMathItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return DefaultMathItem2;
}(MathItem_js_1.AbstractMathItem);
var AbstractMathDocument = function() {
    function AbstractMathDocument1(document, adaptor, options) {
        var _this = this;
        var CLASS = this.constructor;
        this.document = document;
        this.options = Options_js_1.userOptions(Options_js_1.defaultOptions({
        }, CLASS.OPTIONS), options);
        this.math = new (this.options['MathList'] || DefaultMathList1)();
        this.renderActions = RenderList1.create(this.options['renderActions']);
        this.processed = new AbstractMathDocument1.ProcessBits();
        this.outputJax = this.options['OutputJax'] || new DefaultOutputJax1();
        var inputJax = this.options['InputJax'] || [
            new DefaultInputJax1()
        ];
        if (!Array.isArray(inputJax)) inputJax = [
            inputJax
        ];
        this.inputJax = inputJax;
        this.adaptor = adaptor;
        this.outputJax.setAdaptor(adaptor);
        this.inputJax.map(function(jax) {
            return jax.setAdaptor(adaptor);
        });
        this.mmlFactory = this.options['MmlFactory'] || new MmlFactory_js_1.MmlFactory();
        this.inputJax.map(function(jax) {
            return jax.setMmlFactory(_this.mmlFactory);
        });
        this.outputJax.initialize();
        this.inputJax.map(function(jax) {
            return jax.initialize();
        });
    }
    Object.defineProperty(AbstractMathDocument1.prototype, "kind", {
        get: function() {
            return this.constructor.KIND;
        },
        enumerable: false,
        configurable: true
    });
    AbstractMathDocument1.prototype.addRenderAction = function(id) {
        var action = [];
        for(var _i = 1; _i < arguments.length; _i++)action[_i - 1] = arguments[_i];
        var _a = __read(RenderList1.action(id, action), 2), fn = _a[0], p = _a[1];
        this.renderActions.add(fn, p);
    };
    AbstractMathDocument1.prototype.removeRenderAction = function(id) {
        var action = this.renderActions.findID(id);
        if (action) this.renderActions.remove(action);
    };
    AbstractMathDocument1.prototype.render = function() {
        this.renderActions.renderDoc(this);
        return this;
    };
    AbstractMathDocument1.prototype.rerender = function(start) {
        if (start === void 0) start = MathItem_js_1.STATE.RERENDER;
        this.state(start - 1);
        this.render();
        return this;
    };
    AbstractMathDocument1.prototype.convert = function(math, options) {
        if (options === void 0) options = {
        };
        var _a = Options_js_1.userOptions({
            format: this.inputJax[0].name,
            display: true,
            end: MathItem_js_1.STATE.LAST,
            em: 16,
            ex: 8,
            containerWidth: null,
            lineWidth: 1000000,
            scale: 1,
            family: ''
        }, options), format = _a.format, display = _a.display, end = _a.end, ex = _a.ex, em = _a.em, containerWidth = _a.containerWidth, lineWidth = _a.lineWidth, scale = _a.scale, family = _a.family;
        if (containerWidth === null) containerWidth = 80 * ex;
        var jax = this.inputJax.reduce(function(jax1, ijax) {
            return ijax.name === format ? ijax : jax1;
        }, null);
        var mitem = new this.options.MathItem(math, jax, display);
        mitem.start.node = this.adaptor.body(this.document);
        mitem.setMetrics(em, ex, containerWidth, lineWidth, scale);
        if (this.outputJax.options.mtextInheritFont) mitem.outputData.mtextFamily = family;
        if (this.outputJax.options.merrorInheritFont) mitem.outputData.merrorFamily = family;
        mitem.convert(this, end);
        return mitem.typesetRoot || mitem.root;
    };
    AbstractMathDocument1.prototype.findMath = function(_options) {
        if (_options === void 0) _options = null;
        this.processed.set('findMath');
        return this;
    };
    AbstractMathDocument1.prototype.compile = function() {
        var e_6, _a, e_7, _b;
        if (!this.processed.isSet('compile')) {
            var recompile = [];
            try {
                for(var _c = __values(this.math), _d = _c.next(); !_d.done; _d = _c.next()){
                    var math = _d.value;
                    this.compileMath(math);
                    if (math.inputData.recompile !== undefined) recompile.push(math);
                }
            } catch (e_6_1) {
                e_6 = {
                    error: e_6_1
                };
            } finally{
                try {
                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                } finally{
                    if (e_6) throw e_6.error;
                }
            }
            try {
                for(var recompile_1 = __values(recompile), recompile_1_1 = recompile_1.next(); !recompile_1_1.done; recompile_1_1 = recompile_1.next()){
                    var math = recompile_1_1.value;
                    var data = math.inputData.recompile;
                    math.state(data.state);
                    math.inputData.recompile = data;
                    this.compileMath(math);
                }
            } catch (e_7_1) {
                e_7 = {
                    error: e_7_1
                };
            } finally{
                try {
                    if (recompile_1_1 && !recompile_1_1.done && (_b = recompile_1.return)) _b.call(recompile_1);
                } finally{
                    if (e_7) throw e_7.error;
                }
            }
            this.processed.set('compile');
        }
        return this;
    };
    AbstractMathDocument1.prototype.compileMath = function(math) {
        try {
            math.compile(this);
        } catch (err) {
            if (err.retry || err.restart) throw err;
            this.options['compileError'](this, math, err);
            math.inputData['error'] = err;
        }
    };
    AbstractMathDocument1.prototype.compileError = function(math, err) {
        math.root = this.mmlFactory.create('math', null, [
            this.mmlFactory.create('merror', {
                'data-mjx-error': err.message,
                title: err.message
            }, [
                this.mmlFactory.create('mtext', null, [
                    this.mmlFactory.create('text').setText('Math input error')
                ])
            ])
        ]);
        if (math.display) math.root.attributes.set('display', 'block');
        math.inputData.error = err.message;
    };
    AbstractMathDocument1.prototype.typeset = function() {
        var e_8, _a;
        if (!this.processed.isSet('typeset')) {
            try {
                for(var _b = __values(this.math), _c = _b.next(); !_c.done; _c = _b.next()){
                    var math = _c.value;
                    try {
                        math.typeset(this);
                    } catch (err) {
                        if (err.retry || err.restart) throw err;
                        this.options['typesetError'](this, math, err);
                        math.outputData['error'] = err;
                    }
                }
            } catch (e_8_1) {
                e_8 = {
                    error: e_8_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_8) throw e_8.error;
                }
            }
            this.processed.set('typeset');
        }
        return this;
    };
    AbstractMathDocument1.prototype.typesetError = function(math, err) {
        math.typesetRoot = this.adaptor.node('mjx-container', {
            class: 'MathJax mjx-output-error',
            jax: this.outputJax.name
        }, [
            this.adaptor.node('span', {
                'data-mjx-error': err.message,
                title: err.message,
                style: {
                    color: 'red',
                    'background-color': 'yellow',
                    'line-height': 'normal'
                }
            }, [
                this.adaptor.text('Math output error')
            ])
        ]);
        if (math.display) this.adaptor.setAttributes(math.typesetRoot, {
            style: {
                display: 'block',
                margin: '1em 0',
                'text-align': 'center'
            }
        });
        math.outputData.error = err.message;
    };
    AbstractMathDocument1.prototype.getMetrics = function() {
        if (!this.processed.isSet('getMetrics')) {
            this.outputJax.getMetrics(this);
            this.processed.set('getMetrics');
        }
        return this;
    };
    AbstractMathDocument1.prototype.updateDocument = function() {
        var e_9, _a;
        if (!this.processed.isSet('updateDocument')) {
            try {
                for(var _b = __values(this.math.reversed()), _c = _b.next(); !_c.done; _c = _b.next()){
                    var math = _c.value;
                    math.updateDocument(this);
                }
            } catch (e_9_1) {
                e_9 = {
                    error: e_9_1
                };
            } finally{
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                } finally{
                    if (e_9) throw e_9.error;
                }
            }
            this.processed.set('updateDocument');
        }
        return this;
    };
    AbstractMathDocument1.prototype.removeFromDocument = function(_restore) {
        if (_restore === void 0) _restore = false;
        return this;
    };
    AbstractMathDocument1.prototype.state = function(state, restore) {
        var e_10, _a;
        if (restore === void 0) restore = false;
        try {
            for(var _b = __values(this.math), _c = _b.next(); !_c.done; _c = _b.next()){
                var math = _c.value;
                math.state(state, restore);
            }
        } catch (e_10_1) {
            e_10 = {
                error: e_10_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_10) throw e_10.error;
            }
        }
        if (state < MathItem_js_1.STATE.INSERTED) this.processed.clear('updateDocument');
        if (state < MathItem_js_1.STATE.TYPESET) {
            this.processed.clear('typeset');
            this.processed.clear('getMetrics');
        }
        if (state < MathItem_js_1.STATE.COMPILED) this.processed.clear('compile');
        return this;
    };
    AbstractMathDocument1.prototype.reset = function(options) {
        var _a;
        if (options === void 0) options = {
            processed: true
        };
        options = Options_js_1.userOptions(Object.assign({
        }, exports.resetOptions), options);
        options.all && Object.assign(options, exports.resetAllOptions);
        options.processed && this.processed.reset();
        options.inputJax && this.inputJax.forEach(function(jax) {
            return jax.reset.apply(jax, __spreadArray([], __read(options.inputJax)));
        });
        options.outputJax && (_a = this.outputJax).reset.apply(_a, __spreadArray([], __read(options.outputJax)));
        return this;
    };
    AbstractMathDocument1.prototype.clear = function() {
        this.reset();
        this.math.clear();
        return this;
    };
    AbstractMathDocument1.prototype.concat = function(list) {
        this.math.merge(list);
        return this;
    };
    AbstractMathDocument1.prototype.clearMathItemsWithin = function(containers) {
        var _a;
        (_a = this.math).remove.apply(_a, __spreadArray([], __read(this.getMathItemsWithin(containers))));
    };
    AbstractMathDocument1.prototype.getMathItemsWithin = function(elements) {
        var e_11, _a, e_12, _b;
        if (!Array.isArray(elements)) elements = [
            elements
        ];
        var adaptor = this.adaptor;
        var items = [];
        var containers = adaptor.getElements(elements, this.document);
        try {
            ITEMS: for(var _c = __values(this.math), _d = _c.next(); !_d.done; _d = _c.next()){
                var item = _d.value;
                try {
                    for(var containers_1 = (e_12 = void 0, __values(containers)), containers_1_1 = containers_1.next(); !containers_1_1.done; containers_1_1 = containers_1.next()){
                        var container = containers_1_1.value;
                        if (item.start.node && adaptor.contains(container, item.start.node)) {
                            items.push(item);
                            continue ITEMS;
                        }
                    }
                } catch (e_12_1) {
                    e_12 = {
                        error: e_12_1
                    };
                } finally{
                    try {
                        if (containers_1_1 && !containers_1_1.done && (_b = containers_1.return)) _b.call(containers_1);
                    } finally{
                        if (e_12) throw e_12.error;
                    }
                }
            }
        } catch (e_11_1) {
            e_11 = {
                error: e_11_1
            };
        } finally{
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            } finally{
                if (e_11) throw e_11.error;
            }
        }
        return items;
    };
    AbstractMathDocument1.KIND = 'MathDocument';
    AbstractMathDocument1.OPTIONS = {
        OutputJax: null,
        InputJax: null,
        MmlFactory: null,
        MathList: DefaultMathList1,
        MathItem: DefaultMathItem1,
        compileError: function(doc, math, err) {
            doc.compileError(math, err);
        },
        typesetError: function(doc, math, err) {
            doc.typesetError(math, err);
        },
        renderActions: Options_js_1.expandable({
            find: [
                MathItem_js_1.STATE.FINDMATH,
                'findMath',
                '',
                false
            ],
            compile: [
                MathItem_js_1.STATE.COMPILED
            ],
            metrics: [
                MathItem_js_1.STATE.METRICS,
                'getMetrics',
                '',
                false
            ],
            typeset: [
                MathItem_js_1.STATE.TYPESET
            ],
            update: [
                MathItem_js_1.STATE.INSERTED,
                'updateDocument',
                false
            ]
        })
    };
    AbstractMathDocument1.ProcessBits = BitField_js_1.BitFieldClass('findMath', 'compile', 'getMetrics', 'typeset', 'updateDocument');
    return AbstractMathDocument1;
}();
exports.AbstractMathDocument = AbstractMathDocument;

},{"../util/Options.js":"3Dh3w","./InputJax.js":"2OAtQ","./OutputJax.js":"21x1A","./MathList.js":"5XFrk","./MathItem.js":"4DW4E","../core/MmlTree/MmlFactory.js":"7NfXD","../util/BitField.js":"5oQoX","../util/PrioritizedList.js":"2BcDG"}],"5XFrk":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractMathList = void 0;
var LinkedList_js_1 = require("../util/LinkedList.js");
var AbstractMathList1 = function(_super) {
    __extends(AbstractMathList2, _super);
    function AbstractMathList2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AbstractMathList2.prototype.isBefore = function(a, b) {
        return a.start.i < b.start.i || a.start.i === b.start.i && a.start.n < b.start.n;
    };
    return AbstractMathList2;
}(LinkedList_js_1.LinkedList);
exports.AbstractMathList = AbstractMathList1;

},{"../util/LinkedList.js":"28Ot5"}],"28Ot5":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.LinkedList = exports.ListItem = exports.END = void 0;
exports.END = Symbol();
var ListItem = function() {
    function ListItem1(data) {
        if (data === void 0) data = null;
        this.next = null;
        this.prev = null;
        this.data = data;
    }
    return ListItem1;
}();
exports.ListItem = ListItem;
var LinkedList = function() {
    function LinkedList1() {
        var args = [];
        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
        this.list = new ListItem(exports.END);
        this.list.next = this.list.prev = this.list;
        this.push.apply(this, __spreadArray([], __read(args)));
    }
    LinkedList1.prototype.toArray = function() {
        return Array.from(this);
    };
    LinkedList1.prototype.isBefore = function(a, b) {
        return a < b;
    };
    LinkedList1.prototype.push = function() {
        var e_1, _a;
        var args = [];
        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
        try {
            for(var args_1 = __values(args), args_1_1 = args_1.next(); !args_1_1.done; args_1_1 = args_1.next()){
                var data = args_1_1.value;
                var item = new ListItem(data);
                item.next = this.list;
                item.prev = this.list.prev;
                this.list.prev = item;
                item.prev.next = item;
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (args_1_1 && !args_1_1.done && (_a = args_1.return)) _a.call(args_1);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        return this;
    };
    LinkedList1.prototype.pop = function() {
        var item = this.list.prev;
        if (item.data === exports.END) return null;
        this.list.prev = item.prev;
        item.prev.next = this.list;
        item.next = item.prev = null;
        return item.data;
    };
    LinkedList1.prototype.unshift = function() {
        var e_2, _a;
        var args = [];
        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];
        try {
            for(var _b = __values(args.slice(0).reverse()), _c = _b.next(); !_c.done; _c = _b.next()){
                var data = _c.value;
                var item = new ListItem(data);
                item.next = this.list.next;
                item.prev = this.list;
                this.list.next = item;
                item.next.prev = item;
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
        return this;
    };
    LinkedList1.prototype.shift = function() {
        var item = this.list.next;
        if (item.data === exports.END) return null;
        this.list.next = item.next;
        item.next.prev = this.list;
        item.next = item.prev = null;
        return item.data;
    };
    LinkedList1.prototype.remove = function() {
        var e_3, _a;
        var items = [];
        for(var _i = 0; _i < arguments.length; _i++)items[_i] = arguments[_i];
        var map = new Map();
        try {
            for(var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()){
                var item_1 = items_1_1.value;
                map.set(item_1, true);
            }
        } catch (e_3_1) {
            e_3 = {
                error: e_3_1
            };
        } finally{
            try {
                if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);
            } finally{
                if (e_3) throw e_3.error;
            }
        }
        var item = this.list.next;
        while(item.data !== exports.END){
            var next = item.next;
            if (map.has(item.data)) {
                item.prev.next = item.next;
                item.next.prev = item.prev;
                item.next = item.prev = null;
            }
            item = next;
        }
    };
    LinkedList1.prototype.clear = function() {
        this.list.next.prev = this.list.prev.next = null;
        this.list.next = this.list.prev = this.list;
        return this;
    };
    LinkedList1.prototype[Symbol.iterator] = function() {
        var current = this.list;
        return {
            next: function() {
                current = current.next;
                return current.data === exports.END ? {
                    value: null,
                    done: true
                } : {
                    value: current.data,
                    done: false
                };
            }
        };
    };
    LinkedList1.prototype.reversed = function() {
        var _a;
        var current = this.list;
        return _a = {
        }, _a[Symbol.iterator] = function() {
            return this;
        }, _a.next = function() {
            current = current.prev;
            return current.data === exports.END ? {
                value: null,
                done: true
            } : {
                value: current.data,
                done: false
            };
        }, _a.toArray = function() {
            return Array.from(this);
        }, _a;
    };
    LinkedList1.prototype.insert = function(data, isBefore) {
        if (isBefore === void 0) isBefore = null;
        if (isBefore === null) isBefore = this.isBefore.bind(this);
        var item = new ListItem(data);
        var cur = this.list.next;
        while(cur.data !== exports.END && isBefore(cur.data, item.data))cur = cur.next;
        item.prev = cur.prev;
        item.next = cur;
        cur.prev.next = cur.prev = item;
        return this;
    };
    LinkedList1.prototype.sort = function(isBefore) {
        var e_4, _a;
        if (isBefore === void 0) isBefore = null;
        if (isBefore === null) isBefore = this.isBefore.bind(this);
        var lists = [];
        try {
            for(var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()){
                var item = _c.value;
                lists.push(new LinkedList1(item));
            }
        } catch (e_4_1) {
            e_4 = {
                error: e_4_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_4) throw e_4.error;
            }
        }
        this.list.next = this.list.prev = this.list;
        while(lists.length > 1){
            var l1 = lists.shift();
            var l2 = lists.shift();
            l1.merge(l2, isBefore);
            lists.push(l1);
        }
        if (lists.length) this.list = lists[0].list;
        return this;
    };
    LinkedList1.prototype.merge = function(list, isBefore) {
        var _a, _b, _c, _d, _e;
        if (isBefore === void 0) isBefore = null;
        if (isBefore === null) isBefore = this.isBefore.bind(this);
        var lcur = this.list.next;
        var mcur = list.list.next;
        while(lcur.data !== exports.END && mcur.data !== exports.END)if (isBefore(mcur.data, lcur.data)) {
            _a = __read([
                lcur,
                mcur
            ], 2), mcur.prev.next = _a[0], lcur.prev.next = _a[1];
            _b = __read([
                lcur.prev,
                mcur.prev
            ], 2), mcur.prev = _b[0], lcur.prev = _b[1];
            _c = __read([
                list.list,
                this.list
            ], 2), this.list.prev.next = _c[0], list.list.prev.next = _c[1];
            _d = __read([
                list.list.prev,
                this.list.prev
            ], 2), this.list.prev = _d[0], list.list.prev = _d[1];
            _e = __read([
                mcur.next,
                lcur
            ], 2), lcur = _e[0], mcur = _e[1];
        } else lcur = lcur.next;
        if (mcur.data !== exports.END) {
            this.list.prev.next = list.list.next;
            list.list.next.prev = this.list.prev;
            list.list.prev.next = this.list;
            this.list.prev = list.list.prev;
            list.list.next = list.list.prev = list.list;
        }
        return this;
    };
    return LinkedList1;
}();
exports.LinkedList = LinkedList;

},{}],"7NfXD":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlFactory = void 0;
var NodeFactory_js_1 = require("../Tree/NodeFactory.js");
var MML_js_1 = require("./MML.js");
var MmlFactory1 = function(_super) {
    __extends(MmlFactory2, _super);
    function MmlFactory2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlFactory2.prototype, "MML", {
        get: function() {
            return this.node;
        },
        enumerable: false,
        configurable: true
    });
    MmlFactory2.defaultNodes = MML_js_1.MML;
    return MmlFactory2;
}(NodeFactory_js_1.AbstractNodeFactory);
exports.MmlFactory = MmlFactory1;

},{"../Tree/NodeFactory.js":"1uJSo","./MML.js":"F4GuK"}],"1uJSo":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AbstractNodeFactory = void 0;
var Factory_js_1 = require("./Factory.js");
var AbstractNodeFactory1 = function(_super) {
    __extends(AbstractNodeFactory2, _super);
    function AbstractNodeFactory2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AbstractNodeFactory2.prototype.create = function(kind, properties, children) {
        if (properties === void 0) properties = {
        };
        if (children === void 0) children = [];
        return this.node[kind](properties, children);
    };
    return AbstractNodeFactory2;
}(Factory_js_1.AbstractFactory);
exports.AbstractNodeFactory = AbstractNodeFactory1;

},{"./Factory.js":"3I6j8"}],"F4GuK":[function(require,module,exports) {
"use strict";
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MML = void 0;
var MmlNode_js_1 = require("./MmlNode.js");
var math_js_1 = require("./MmlNodes/math.js");
var mi_js_1 = require("./MmlNodes/mi.js");
var mn_js_1 = require("./MmlNodes/mn.js");
var mo_js_1 = require("./MmlNodes/mo.js");
var mtext_js_1 = require("./MmlNodes/mtext.js");
var mspace_js_1 = require("./MmlNodes/mspace.js");
var ms_js_1 = require("./MmlNodes/ms.js");
var mrow_js_1 = require("./MmlNodes/mrow.js");
var mfrac_js_1 = require("./MmlNodes/mfrac.js");
var msqrt_js_1 = require("./MmlNodes/msqrt.js");
var mroot_js_1 = require("./MmlNodes/mroot.js");
var mstyle_js_1 = require("./MmlNodes/mstyle.js");
var merror_js_1 = require("./MmlNodes/merror.js");
var mpadded_js_1 = require("./MmlNodes/mpadded.js");
var mphantom_js_1 = require("./MmlNodes/mphantom.js");
var mfenced_js_1 = require("./MmlNodes/mfenced.js");
var menclose_js_1 = require("./MmlNodes/menclose.js");
var maction_js_1 = require("./MmlNodes/maction.js");
var msubsup_js_1 = require("./MmlNodes/msubsup.js");
var munderover_js_1 = require("./MmlNodes/munderover.js");
var mmultiscripts_js_1 = require("./MmlNodes/mmultiscripts.js");
var mtable_js_1 = require("./MmlNodes/mtable.js");
var mtr_js_1 = require("./MmlNodes/mtr.js");
var mtd_js_1 = require("./MmlNodes/mtd.js");
var maligngroup_js_1 = require("./MmlNodes/maligngroup.js");
var malignmark_js_1 = require("./MmlNodes/malignmark.js");
var mglyph_js_1 = require("./MmlNodes/mglyph.js");
var semantics_js_1 = require("./MmlNodes/semantics.js");
var TeXAtom_js_1 = require("./MmlNodes/TeXAtom.js");
var mathchoice_js_1 = require("./MmlNodes/mathchoice.js");
exports.MML = (_a = {
}, _a[math_js_1.MmlMath.prototype.kind] = math_js_1.MmlMath, _a[mi_js_1.MmlMi.prototype.kind] = mi_js_1.MmlMi, _a[mn_js_1.MmlMn.prototype.kind] = mn_js_1.MmlMn, _a[mo_js_1.MmlMo.prototype.kind] = mo_js_1.MmlMo, _a[mtext_js_1.MmlMtext.prototype.kind] = mtext_js_1.MmlMtext, _a[mspace_js_1.MmlMspace.prototype.kind] = mspace_js_1.MmlMspace, _a[ms_js_1.MmlMs.prototype.kind] = ms_js_1.MmlMs, _a[mrow_js_1.MmlMrow.prototype.kind] = mrow_js_1.MmlMrow, _a[mrow_js_1.MmlInferredMrow.prototype.kind] = mrow_js_1.MmlInferredMrow, _a[mfrac_js_1.MmlMfrac.prototype.kind] = mfrac_js_1.MmlMfrac, _a[msqrt_js_1.MmlMsqrt.prototype.kind] = msqrt_js_1.MmlMsqrt, _a[mroot_js_1.MmlMroot.prototype.kind] = mroot_js_1.MmlMroot, _a[mstyle_js_1.MmlMstyle.prototype.kind] = mstyle_js_1.MmlMstyle, _a[merror_js_1.MmlMerror.prototype.kind] = merror_js_1.MmlMerror, _a[mpadded_js_1.MmlMpadded.prototype.kind] = mpadded_js_1.MmlMpadded, _a[mphantom_js_1.MmlMphantom.prototype.kind] = mphantom_js_1.MmlMphantom, _a[mfenced_js_1.MmlMfenced.prototype.kind] = mfenced_js_1.MmlMfenced, _a[menclose_js_1.MmlMenclose.prototype.kind] = menclose_js_1.MmlMenclose, _a[maction_js_1.MmlMaction.prototype.kind] = maction_js_1.MmlMaction, _a[msubsup_js_1.MmlMsub.prototype.kind] = msubsup_js_1.MmlMsub, _a[msubsup_js_1.MmlMsup.prototype.kind] = msubsup_js_1.MmlMsup, _a[msubsup_js_1.MmlMsubsup.prototype.kind] = msubsup_js_1.MmlMsubsup, _a[munderover_js_1.MmlMunder.prototype.kind] = munderover_js_1.MmlMunder, _a[munderover_js_1.MmlMover.prototype.kind] = munderover_js_1.MmlMover, _a[munderover_js_1.MmlMunderover.prototype.kind] = munderover_js_1.MmlMunderover, _a[mmultiscripts_js_1.MmlMmultiscripts.prototype.kind] = mmultiscripts_js_1.MmlMmultiscripts, _a[mmultiscripts_js_1.MmlMprescripts.prototype.kind] = mmultiscripts_js_1.MmlMprescripts, _a[mmultiscripts_js_1.MmlNone.prototype.kind] = mmultiscripts_js_1.MmlNone, _a[mtable_js_1.MmlMtable.prototype.kind] = mtable_js_1.MmlMtable, _a[mtr_js_1.MmlMlabeledtr.prototype.kind] = mtr_js_1.MmlMlabeledtr, _a[mtr_js_1.MmlMtr.prototype.kind] = mtr_js_1.MmlMtr, _a[mtd_js_1.MmlMtd.prototype.kind] = mtd_js_1.MmlMtd, _a[maligngroup_js_1.MmlMaligngroup.prototype.kind] = maligngroup_js_1.MmlMaligngroup, _a[malignmark_js_1.MmlMalignmark.prototype.kind] = malignmark_js_1.MmlMalignmark, _a[mglyph_js_1.MmlMglyph.prototype.kind] = mglyph_js_1.MmlMglyph, _a[semantics_js_1.MmlSemantics.prototype.kind] = semantics_js_1.MmlSemantics, _a[semantics_js_1.MmlAnnotation.prototype.kind] = semantics_js_1.MmlAnnotation, _a[semantics_js_1.MmlAnnotationXML.prototype.kind] = semantics_js_1.MmlAnnotationXML, _a[TeXAtom_js_1.TeXAtom.prototype.kind] = TeXAtom_js_1.TeXAtom, _a[mathchoice_js_1.MathChoice.prototype.kind] = mathchoice_js_1.MathChoice, _a[MmlNode_js_1.TextNode.prototype.kind] = MmlNode_js_1.TextNode, _a[MmlNode_js_1.XMLNode.prototype.kind] = MmlNode_js_1.XMLNode, _a);

},{"./MmlNode.js":"5Ogy3","./MmlNodes/math.js":"62X5t","./MmlNodes/mi.js":"1tgVO","./MmlNodes/mn.js":"3dMxu","./MmlNodes/mo.js":"6qwvK","./MmlNodes/mtext.js":"5l92R","./MmlNodes/mspace.js":"3ZGd1","./MmlNodes/ms.js":"31fdv","./MmlNodes/mrow.js":"48cRO","./MmlNodes/mfrac.js":"6SmIQ","./MmlNodes/msqrt.js":"5Xdis","./MmlNodes/mroot.js":"1s50t","./MmlNodes/mstyle.js":"2zxbM","./MmlNodes/merror.js":"jmsWv","./MmlNodes/mpadded.js":"5fmxq","./MmlNodes/mphantom.js":"2Gg3w","./MmlNodes/mfenced.js":"261m5","./MmlNodes/menclose.js":"SiTAZ","./MmlNodes/maction.js":"3xq2D","./MmlNodes/msubsup.js":"fGNSI","./MmlNodes/munderover.js":"K9G6l","./MmlNodes/mmultiscripts.js":"7uKSr","./MmlNodes/mtable.js":"5tWmh","./MmlNodes/mtr.js":"2SuAk","./MmlNodes/mtd.js":"3A7Nu","./MmlNodes/maligngroup.js":"4Oset","./MmlNodes/malignmark.js":"2qtXF","./MmlNodes/mglyph.js":"18HIf","./MmlNodes/semantics.js":"6vreT","./MmlNodes/TeXAtom.js":"hX4Kz","./MmlNodes/mathchoice.js":"4OgkS"}],"2zxbM":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMstyle = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var Attributes_js_1 = require("../Attributes.js");
var MmlMstyle1 = function(_super) {
    __extends(MmlMstyle2, _super);
    function MmlMstyle2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMstyle2.prototype, "kind", {
        get: function() {
            return 'mstyle';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMstyle2.prototype, "notParent", {
        get: function() {
            return this.childNodes[0] && this.childNodes[0].childNodes.length === 1;
        },
        enumerable: false,
        configurable: true
    });
    MmlMstyle2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        var scriptlevel = this.attributes.getExplicit('scriptlevel');
        if (scriptlevel != null) {
            scriptlevel = scriptlevel.toString();
            if (scriptlevel.match(/^\s*[-+]/)) level += parseInt(scriptlevel);
            else level = parseInt(scriptlevel);
        }
        var displaystyle = this.attributes.getExplicit('displaystyle');
        if (displaystyle != null) display = displaystyle === true;
        attributes = this.addInheritedAttributes(attributes, this.attributes.getAllAttributes());
        this.childNodes[0].setInheritedAttributes(attributes, display, level, prime);
    };
    MmlMstyle2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlLayoutNode.defaults), {
        scriptlevel: Attributes_js_1.INHERIT,
        displaystyle: Attributes_js_1.INHERIT,
        scriptsizemultiplier: 1 / Math.sqrt(2),
        scriptminsize: '8px',
        mathbackground: Attributes_js_1.INHERIT,
        mathcolor: Attributes_js_1.INHERIT,
        dir: Attributes_js_1.INHERIT,
        infixlinebreakstyle: 'before'
    });
    return MmlMstyle2;
}(MmlNode_js_1.AbstractMmlLayoutNode);
exports.MmlMstyle = MmlMstyle1;

},{"../MmlNode.js":"5Ogy3","../Attributes.js":"5plfh"}],"jmsWv":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMerror = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMerror1 = function(_super) {
    __extends(MmlMerror2, _super);
    function MmlMerror2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMerror2.prototype, "kind", {
        get: function() {
            return 'merror';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMerror2.prototype, "arity", {
        get: function() {
            return -1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMerror2.prototype, "linebreakContainer", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMerror2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults);
    return MmlMerror2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMerror = MmlMerror1;

},{"../MmlNode.js":"5Ogy3"}],"2Gg3w":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMphantom = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMphantom1 = function(_super) {
    __extends(MmlMphantom2, _super);
    function MmlMphantom2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.texclass = MmlNode_js_1.TEXCLASS.ORD;
        return _this;
    }
    Object.defineProperty(MmlMphantom2.prototype, "kind", {
        get: function() {
            return 'mphantom';
        },
        enumerable: false,
        configurable: true
    });
    MmlMphantom2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlLayoutNode.defaults);
    return MmlMphantom2;
}(MmlNode_js_1.AbstractMmlLayoutNode);
exports.MmlMphantom = MmlMphantom1;

},{"../MmlNode.js":"5Ogy3"}],"4Oset":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMaligngroup = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var Attributes_js_1 = require("../Attributes.js");
var MmlMaligngroup1 = function(_super) {
    __extends(MmlMaligngroup2, _super);
    function MmlMaligngroup2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMaligngroup2.prototype, "kind", {
        get: function() {
            return 'maligngroup';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMaligngroup2.prototype, "isSpacelike", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMaligngroup2.prototype.setChildInheritedAttributes = function(attributes, display, level, prime) {
        attributes = this.addInheritedAttributes(attributes, this.attributes.getAllAttributes());
        _super.prototype.setChildInheritedAttributes.call(this, attributes, display, level, prime);
    };
    MmlMaligngroup2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlLayoutNode.defaults), {
        groupalign: Attributes_js_1.INHERIT
    });
    return MmlMaligngroup2;
}(MmlNode_js_1.AbstractMmlLayoutNode);
exports.MmlMaligngroup = MmlMaligngroup1;

},{"../MmlNode.js":"5Ogy3","../Attributes.js":"5plfh"}],"2qtXF":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MmlMalignmark = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MmlMalignmark1 = function(_super) {
    __extends(MmlMalignmark2, _super);
    function MmlMalignmark2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MmlMalignmark2.prototype, "kind", {
        get: function() {
            return 'malignmark';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMalignmark2.prototype, "arity", {
        get: function() {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MmlMalignmark2.prototype, "isSpacelike", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MmlMalignmark2.defaults = __assign(__assign({
    }, MmlNode_js_1.AbstractMmlNode.defaults), {
        edge: 'left'
    });
    return MmlMalignmark2;
}(MmlNode_js_1.AbstractMmlNode);
exports.MmlMalignmark = MmlMalignmark1;

},{"../MmlNode.js":"5Ogy3"}],"4OgkS":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MathChoice = void 0;
var MmlNode_js_1 = require("../MmlNode.js");
var MathChoice1 = function(_super) {
    __extends(MathChoice2, _super);
    function MathChoice2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(MathChoice2.prototype, "kind", {
        get: function() {
            return 'MathChoice';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MathChoice2.prototype, "arity", {
        get: function() {
            return 4;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MathChoice2.prototype, "notParent", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    MathChoice2.prototype.setInheritedAttributes = function(attributes, display, level, prime) {
        var selection = display ? 0 : Math.max(0, Math.min(level, 2)) + 1;
        var child = this.childNodes[selection] || this.factory.create('mrow');
        this.parent.replaceChild(child, this);
        child.setInheritedAttributes(attributes, display, level, prime);
    };
    MathChoice2.defaults = __assign({
    }, MmlNode_js_1.AbstractMmlBaseNode.defaults);
    return MathChoice2;
}(MmlNode_js_1.AbstractMmlBaseNode);
exports.MathChoice = MathChoice1;

},{"../MmlNode.js":"5Ogy3"}],"5oQoX":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BitFieldClass = exports.BitField = void 0;
var BitField = function() {
    function BitField1() {
        this.bits = 0;
    }
    BitField1.allocate = function() {
        var e_1, _a;
        var names = [];
        for(var _i = 0; _i < arguments.length; _i++)names[_i] = arguments[_i];
        try {
            for(var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()){
                var name_1 = names_1_1.value;
                if (this.has(name_1)) throw new Error('Bit already allocated for ' + name_1);
                if (this.next === BitField1.MAXBIT) throw new Error('Maximum number of bits already allocated');
                this.names.set(name_1, this.next);
                this.next <<= 1;
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
    };
    BitField1.has = function(name) {
        return this.names.has(name);
    };
    BitField1.prototype.set = function(name) {
        this.bits |= this.getBit(name);
    };
    BitField1.prototype.clear = function(name) {
        this.bits &= ~this.getBit(name);
    };
    BitField1.prototype.isSet = function(name) {
        return !!(this.bits & this.getBit(name));
    };
    BitField1.prototype.reset = function() {
        this.bits = 0;
    };
    BitField1.prototype.getBit = function(name) {
        var bit = this.constructor.names.get(name);
        if (!bit) throw new Error('Unknown bit-field name: ' + name);
        return bit;
    };
    BitField1.MAXBIT = -2147483648;
    BitField1.next = 1;
    BitField1.names = new Map();
    return BitField1;
}();
exports.BitField = BitField;
function BitFieldClass() {
    var names = [];
    for(var _i = 0; _i < arguments.length; _i++)names[_i] = arguments[_i];
    var Bits1 = function(_super) {
        __extends(Bits2, _super);
        function Bits2() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return Bits2;
    }(BitField);
    Bits1.allocate.apply(Bits1, __spreadArray([], __read(names)));
    return Bits1;
}
exports.BitFieldClass = BitFieldClass;

},{}],"30IWr":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __assign = this && this.__assign || function() {
    __assign = Object.assign || function(t) {
        for(var s, i = 1, n = arguments.length; i < n; i++){
            s = arguments[i];
            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.HTMLDocument = void 0;
var MathDocument_js_1 = require("../../core/MathDocument.js");
var Options_js_1 = require("../../util/Options.js");
var HTMLMathItem_js_1 = require("./HTMLMathItem.js");
var HTMLMathList_js_1 = require("./HTMLMathList.js");
var HTMLDomStrings_js_1 = require("./HTMLDomStrings.js");
var MathItem_js_1 = require("../../core/MathItem.js");
var HTMLDocument1 = function(_super) {
    __extends(HTMLDocument2, _super);
    function HTMLDocument2(document, adaptor, options) {
        var _this = this;
        var _a = __read(Options_js_1.separateOptions(options, HTMLDomStrings_js_1.HTMLDomStrings.OPTIONS), 2), html = _a[0], dom = _a[1];
        _this = _super.call(this, document, adaptor, html) || this;
        _this.domStrings = _this.options['DomStrings'] || new HTMLDomStrings_js_1.HTMLDomStrings(dom);
        _this.domStrings.adaptor = adaptor;
        _this.styles = [];
        return _this;
    }
    HTMLDocument2.prototype.findPosition = function(N, index, delim, nodes) {
        var e_1, _a;
        var adaptor = this.adaptor;
        try {
            for(var _b = __values(nodes[N]), _c = _b.next(); !_c.done; _c = _b.next()){
                var list = _c.value;
                var _d = __read(list, 2), node = _d[0], n = _d[1];
                if (index <= n && adaptor.kind(node) === '#text') return {
                    node: node,
                    n: Math.max(index, 0),
                    delim: delim
                };
                index -= n;
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        return {
            node: null,
            n: 0,
            delim: delim
        };
    };
    HTMLDocument2.prototype.mathItem = function(item, jax, nodes) {
        var math = item.math;
        var start = this.findPosition(item.n, item.start.n, item.open, nodes);
        var end = this.findPosition(item.n, item.end.n, item.close, nodes);
        return new this.options.MathItem(math, jax, item.display, start, end);
    };
    HTMLDocument2.prototype.findMath = function(options) {
        var e_2, _a, e_3, _b, _c, e_4, _d, e_5, _e;
        if (!this.processed.isSet('findMath')) {
            this.adaptor.document = this.document;
            options = Options_js_1.userOptions({
                elements: this.options.elements || [
                    this.adaptor.body(this.document)
                ]
            }, options);
            try {
                for(var _f = __values(this.adaptor.getElements(options['elements'], this.document)), _g = _f.next(); !_g.done; _g = _f.next()){
                    var container = _g.value;
                    var _h = __read([
                        null,
                        null
                    ], 2), strings = _h[0], nodes = _h[1];
                    try {
                        for(var _j = (e_3 = void 0, __values(this.inputJax)), _k = _j.next(); !_k.done; _k = _j.next()){
                            var jax = _k.value;
                            var list = new this.options['MathList']();
                            if (jax.processStrings) {
                                if (strings === null) _c = __read(this.domStrings.find(container), 2), strings = _c[0], nodes = _c[1];
                                try {
                                    for(var _l = (e_4 = void 0, __values(jax.findMath(strings))), _m = _l.next(); !_m.done; _m = _l.next()){
                                        var math = _m.value;
                                        list.push(this.mathItem(math, jax, nodes));
                                    }
                                } catch (e_4_1) {
                                    e_4 = {
                                        error: e_4_1
                                    };
                                } finally{
                                    try {
                                        if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                                    } finally{
                                        if (e_4) throw e_4.error;
                                    }
                                }
                            } else try {
                                for(var _o = (e_5 = void 0, __values(jax.findMath(container))), _p = _o.next(); !_p.done; _p = _o.next()){
                                    var math = _p.value;
                                    var item = new this.options.MathItem(math.math, jax, math.display, math.start, math.end);
                                    list.push(item);
                                }
                            } catch (e_5_1) {
                                e_5 = {
                                    error: e_5_1
                                };
                            } finally{
                                try {
                                    if (_p && !_p.done && (_e = _o.return)) _e.call(_o);
                                } finally{
                                    if (e_5) throw e_5.error;
                                }
                            }
                            this.math.merge(list);
                        }
                    } catch (e_3_1) {
                        e_3 = {
                            error: e_3_1
                        };
                    } finally{
                        try {
                            if (_k && !_k.done && (_b = _j.return)) _b.call(_j);
                        } finally{
                            if (e_3) throw e_3.error;
                        }
                    }
                }
            } catch (e_2_1) {
                e_2 = {
                    error: e_2_1
                };
            } finally{
                try {
                    if (_g && !_g.done && (_a = _f.return)) _a.call(_f);
                } finally{
                    if (e_2) throw e_2.error;
                }
            }
            this.processed.set('findMath');
        }
        return this;
    };
    HTMLDocument2.prototype.updateDocument = function() {
        if (!this.processed.isSet('updateDocument')) {
            this.addPageElements();
            this.addStyleSheet();
            _super.prototype.updateDocument.call(this);
            this.processed.set('updateDocument');
        }
        return this;
    };
    HTMLDocument2.prototype.addPageElements = function() {
        var body = this.adaptor.body(this.document);
        var node = this.documentPageElements();
        if (node) this.adaptor.append(body, node);
    };
    HTMLDocument2.prototype.addStyleSheet = function() {
        var sheet = this.documentStyleSheet();
        var adaptor = this.adaptor;
        if (sheet && !adaptor.parent(sheet)) {
            var head = adaptor.head(this.document);
            var styles = this.findSheet(head, adaptor.getAttribute(sheet, 'id'));
            if (styles) adaptor.replace(sheet, styles);
            else adaptor.append(head, sheet);
        }
    };
    HTMLDocument2.prototype.findSheet = function(head, id) {
        var e_6, _a;
        if (id) try {
            for(var _b = __values(this.adaptor.tags(head, 'style')), _c = _b.next(); !_c.done; _c = _b.next()){
                var sheet = _c.value;
                if (this.adaptor.getAttribute(sheet, 'id') === id) return sheet;
            }
        } catch (e_6_1) {
            e_6 = {
                error: e_6_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_6) throw e_6.error;
            }
        }
        return null;
    };
    HTMLDocument2.prototype.removeFromDocument = function(restore) {
        var e_7, _a;
        if (restore === void 0) restore = false;
        if (this.processed.isSet('updateDocument')) try {
            for(var _b = __values(this.math), _c = _b.next(); !_c.done; _c = _b.next()){
                var math = _c.value;
                if (math.state() >= MathItem_js_1.STATE.INSERTED) math.state(MathItem_js_1.STATE.TYPESET, restore);
            }
        } catch (e_7_1) {
            e_7 = {
                error: e_7_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_7) throw e_7.error;
            }
        }
        this.processed.clear('updateDocument');
        return this;
    };
    HTMLDocument2.prototype.documentStyleSheet = function() {
        return this.outputJax.styleSheet(this);
    };
    HTMLDocument2.prototype.documentPageElements = function() {
        return this.outputJax.pageElements(this);
    };
    HTMLDocument2.prototype.addStyles = function(styles) {
        this.styles.push(styles);
    };
    HTMLDocument2.prototype.getStyles = function() {
        return this.styles;
    };
    HTMLDocument2.KIND = 'HTML';
    HTMLDocument2.OPTIONS = __assign(__assign({
    }, MathDocument_js_1.AbstractMathDocument.OPTIONS), {
        renderActions: Options_js_1.expandable(__assign(__assign({
        }, MathDocument_js_1.AbstractMathDocument.OPTIONS.renderActions), {
            styles: [
                MathItem_js_1.STATE.INSERTED + 1,
                '',
                'updateStyleSheet',
                false
            ]
        })),
        MathList: HTMLMathList_js_1.HTMLMathList,
        MathItem: HTMLMathItem_js_1.HTMLMathItem,
        DomStrings: null
    });
    return HTMLDocument2;
}(MathDocument_js_1.AbstractMathDocument);
exports.HTMLDocument = HTMLDocument1;

},{"../../core/MathDocument.js":"3DU7c","../../util/Options.js":"3Dh3w","./HTMLMathItem.js":"5SYZ5","./HTMLMathList.js":"1K6bN","./HTMLDomStrings.js":"RbNGD","../../core/MathItem.js":"4DW4E"}],"5SYZ5":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.HTMLMathItem = void 0;
var MathItem_js_1 = require("../../core/MathItem.js");
var HTMLMathItem1 = function(_super) {
    __extends(HTMLMathItem2, _super);
    function HTMLMathItem2(math, jax, display, start, end) {
        if (display === void 0) display = true;
        if (start === void 0) start = {
            node: null,
            n: 0,
            delim: ''
        };
        if (end === void 0) end = {
            node: null,
            n: 0,
            delim: ''
        };
        return _super.call(this, math, jax, display, start, end) || this;
    }
    Object.defineProperty(HTMLMathItem2.prototype, "adaptor", {
        get: function() {
            return this.inputJax.adaptor;
        },
        enumerable: false,
        configurable: true
    });
    HTMLMathItem2.prototype.updateDocument = function(_html) {
        if (this.state() < MathItem_js_1.STATE.INSERTED) {
            if (this.inputJax.processStrings) {
                var node = this.start.node;
                if (node === this.end.node) {
                    if (this.end.n && this.end.n < this.adaptor.value(this.end.node).length) this.adaptor.split(this.end.node, this.end.n);
                    if (this.start.n) node = this.adaptor.split(this.start.node, this.start.n);
                    this.adaptor.replace(this.typesetRoot, node);
                } else {
                    if (this.start.n) node = this.adaptor.split(node, this.start.n);
                    while(node !== this.end.node){
                        var next = this.adaptor.next(node);
                        this.adaptor.remove(node);
                        node = next;
                    }
                    this.adaptor.insert(this.typesetRoot, node);
                    if (this.end.n < this.adaptor.value(node).length) this.adaptor.split(node, this.end.n);
                    this.adaptor.remove(node);
                }
            } else this.adaptor.replace(this.typesetRoot, this.start.node);
            this.start.node = this.end.node = this.typesetRoot;
            this.start.n = this.end.n = 0;
            this.state(MathItem_js_1.STATE.INSERTED);
        }
    };
    HTMLMathItem2.prototype.updateStyleSheet = function(document) {
        document.addStyleSheet();
    };
    HTMLMathItem2.prototype.removeFromDocument = function(restore) {
        if (restore === void 0) restore = false;
        if (this.state() >= MathItem_js_1.STATE.TYPESET) {
            var adaptor = this.adaptor;
            var node = this.start.node;
            var math = adaptor.text('');
            if (restore) {
                var text = this.start.delim + this.math + this.end.delim;
                if (this.inputJax.processStrings) math = adaptor.text(text);
                else {
                    var doc = adaptor.parse(text, 'text/html');
                    math = adaptor.firstChild(adaptor.body(doc));
                }
            }
            if (adaptor.parent(node)) adaptor.replace(math, node);
            this.start.node = this.end.node = math;
            this.start.n = this.end.n = 0;
        }
    };
    return HTMLMathItem2;
}(MathItem_js_1.AbstractMathItem);
exports.HTMLMathItem = HTMLMathItem1;

},{"../../core/MathItem.js":"4DW4E"}],"1K6bN":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.HTMLMathList = void 0;
var MathList_js_1 = require("../../core/MathList.js");
var HTMLMathList1 = function(_super) {
    __extends(HTMLMathList2, _super);
    function HTMLMathList2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return HTMLMathList2;
}(MathList_js_1.AbstractMathList);
exports.HTMLMathList = HTMLMathList1;

},{"../../core/MathList.js":"5XFrk"}],"RbNGD":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.HTMLDomStrings = void 0;
var Options_js_1 = require("../../util/Options.js");
var HTMLDomStrings = function() {
    function HTMLDomStrings1(options) {
        if (options === void 0) options = null;
        var CLASS = this.constructor;
        this.options = Options_js_1.userOptions(Options_js_1.defaultOptions({
        }, CLASS.OPTIONS), options);
        this.init();
        this.getPatterns();
    }
    HTMLDomStrings1.prototype.init = function() {
        this.strings = [];
        this.string = '';
        this.snodes = [];
        this.nodes = [];
        this.stack = [];
    };
    HTMLDomStrings1.prototype.getPatterns = function() {
        var skip = Options_js_1.makeArray(this.options['skipHtmlTags']);
        var ignore = Options_js_1.makeArray(this.options['ignoreHtmlClass']);
        var process = Options_js_1.makeArray(this.options['processHtmlClass']);
        this.skipHtmlTags = new RegExp('^(?:' + skip.join('|') + ')$', 'i');
        this.ignoreHtmlClass = new RegExp('(?:^| )(?:' + ignore.join('|') + ')(?: |$)');
        this.processHtmlClass = new RegExp('(?:^| )(?:' + process + ')(?: |$)');
    };
    HTMLDomStrings1.prototype.pushString = function() {
        if (this.string.match(/\S/)) {
            this.strings.push(this.string);
            this.nodes.push(this.snodes);
        }
        this.string = '';
        this.snodes = [];
    };
    HTMLDomStrings1.prototype.extendString = function(node, text) {
        this.snodes.push([
            node,
            text.length
        ]);
        this.string += text;
    };
    HTMLDomStrings1.prototype.handleText = function(node, ignore) {
        if (!ignore) this.extendString(node, this.adaptor.value(node));
        return this.adaptor.next(node);
    };
    HTMLDomStrings1.prototype.handleTag = function(node, ignore) {
        if (!ignore) {
            var text = this.options['includeHtmlTags'][this.adaptor.kind(node)];
            this.extendString(node, text);
        }
        return this.adaptor.next(node);
    };
    HTMLDomStrings1.prototype.handleContainer = function(node, ignore) {
        this.pushString();
        var cname = this.adaptor.getAttribute(node, 'class') || '';
        var tname = this.adaptor.kind(node) || '';
        var process = this.processHtmlClass.exec(cname);
        var next = node;
        if (this.adaptor.firstChild(node) && !this.adaptor.getAttribute(node, 'data-MJX') && (process || !this.skipHtmlTags.exec(tname))) {
            if (this.adaptor.next(node)) this.stack.push([
                this.adaptor.next(node),
                ignore
            ]);
            next = this.adaptor.firstChild(node);
            ignore = (ignore || this.ignoreHtmlClass.exec(cname)) && !process;
        } else next = this.adaptor.next(node);
        return [
            next,
            ignore
        ];
    };
    HTMLDomStrings1.prototype.handleOther = function(node, _ignore) {
        this.pushString();
        return this.adaptor.next(node);
    };
    HTMLDomStrings1.prototype.find = function(node) {
        var _a, _b;
        this.init();
        var stop = this.adaptor.next(node);
        var ignore = false;
        var include = this.options['includeHtmlTags'];
        while(node && node !== stop){
            var kind = this.adaptor.kind(node);
            if (kind === '#text') node = this.handleText(node, ignore);
            else if (include.hasOwnProperty(kind)) node = this.handleTag(node, ignore);
            else if (kind) _a = __read(this.handleContainer(node, ignore), 2), node = _a[0], ignore = _a[1];
            else node = this.handleOther(node, ignore);
            if (!node && this.stack.length) {
                this.pushString();
                _b = __read(this.stack.pop(), 2), node = _b[0], ignore = _b[1];
            }
        }
        this.pushString();
        var result = [
            this.strings,
            this.nodes
        ];
        this.init();
        return result;
    };
    HTMLDomStrings1.OPTIONS = {
        skipHtmlTags: [
            'script',
            'noscript',
            'style',
            'textarea',
            'pre',
            'code',
            'annotation',
            'annotation-xml'
        ],
        includeHtmlTags: {
            br: '\n',
            wbr: '',
            '#comment': ''
        },
        ignoreHtmlClass: 'mathjax_ignore',
        processHtmlClass: 'mathjax_process'
    };
    return HTMLDomStrings1;
}();
exports.HTMLDomStrings = HTMLDomStrings;

},{"../../util/Options.js":"3Dh3w"}],"6NmSw":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AllPackages = void 0;
require("./base/BaseConfiguration.js");
require("./action/ActionConfiguration.js");
require("./ams/AmsConfiguration.js");
require("./amscd/AmsCdConfiguration.js");
require("./bbox/BboxConfiguration.js");
require("./boldsymbol/BoldsymbolConfiguration.js");
require("./braket/BraketConfiguration.js");
require("./bussproofs/BussproofsConfiguration.js");
require("./cancel/CancelConfiguration.js");
require("./color/ColorConfiguration.js");
require("./colorv2/ColorV2Configuration.js");
require("./configmacros/ConfigMacrosConfiguration.js");
require("./enclose/EncloseConfiguration.js");
require("./extpfeil/ExtpfeilConfiguration.js");
require("./html/HtmlConfiguration.js");
require("./mhchem/MhchemConfiguration.js");
require("./newcommand/NewcommandConfiguration.js");
require("./noerrors/NoErrorsConfiguration.js");
require("./noundefined/NoUndefinedConfiguration.js");
require("./physics/PhysicsConfiguration.js");
require("./tagformat/TagFormatConfiguration.js");
require("./textmacros/TextMacrosConfiguration.js");
require("./unicode/UnicodeConfiguration.js");
require("./verb/VerbConfiguration.js");
if (typeof MathJax !== 'undefined' && MathJax.loader) MathJax.loader.preLoad('[tex]/action', '[tex]/ams', '[tex]/amscd', '[tex]/bbox', '[tex]/boldsymbol', '[tex]/braket', '[tex]/bussproofs', '[tex]/cancel', '[tex]/color', '[tex]/colorv2', '[tex]/enclose', '[tex]/extpfeil', '[tex]/html', '[tex]/mhchem', '[tex]/newcommand', '[tex]/noerrors', '[tex]/noundefined', '[tex]/physics', '[tex]/unicode', '[tex]/verb', '[tex]/configmacros', '[tex]/tagformat', '[tex]/textmacros');
exports.AllPackages = [
    'base',
    'action',
    'ams',
    'amscd',
    'bbox',
    'boldsymbol',
    'braket',
    'bussproofs',
    'cancel',
    'color',
    'enclose',
    'extpfeil',
    'html',
    'mhchem',
    'newcommand',
    'noerrors',
    'noundefined',
    'unicode',
    'verb',
    'configmacros',
    'tagformat',
    'textmacros'
];

},{"./base/BaseConfiguration.js":"1cNwT","./action/ActionConfiguration.js":"3ZFFz","./ams/AmsConfiguration.js":"BCqpN","./amscd/AmsCdConfiguration.js":"1RYtu","./bbox/BboxConfiguration.js":"3HYmX","./boldsymbol/BoldsymbolConfiguration.js":"62aMJ","./braket/BraketConfiguration.js":"5pgc0","./bussproofs/BussproofsConfiguration.js":"3H65I","./cancel/CancelConfiguration.js":"1f4uU","./color/ColorConfiguration.js":"4jMfU","./colorv2/ColorV2Configuration.js":"7aDZm","./configmacros/ConfigMacrosConfiguration.js":"2qVuO","./enclose/EncloseConfiguration.js":"6Y8ys","./extpfeil/ExtpfeilConfiguration.js":"3AwGO","./html/HtmlConfiguration.js":"5tmBm","./mhchem/MhchemConfiguration.js":"36VJl","./newcommand/NewcommandConfiguration.js":"1uX21","./noerrors/NoErrorsConfiguration.js":"48oOa","./noundefined/NoUndefinedConfiguration.js":"58R12","./physics/PhysicsConfiguration.js":"2fReT","./tagformat/TagFormatConfiguration.js":"3wcIc","./textmacros/TextMacrosConfiguration.js":"2SwgW","./unicode/UnicodeConfiguration.js":"5b5dQ","./verb/VerbConfiguration.js":"1CmXk"}],"3ZFFz":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ActionConfiguration = exports.ActionMethods = void 0;
var Configuration_js_1 = require("../Configuration.js");
var TexParser_js_1 = require("../TexParser.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var BaseMethods_js_1 = require("../base/BaseMethods.js");
exports.ActionMethods = {
};
exports.ActionMethods.Macro = BaseMethods_js_1.default.Macro;
exports.ActionMethods.Toggle = function(parser, name) {
    var children = [];
    var arg;
    while((arg = parser.GetArgument(name)) !== '\\endtoggle')children.push(new TexParser_js_1.default(arg, parser.stack.env, parser.configuration).mml());
    parser.Push(parser.create('node', 'maction', children, {
        actiontype: 'toggle'
    }));
};
exports.ActionMethods.Mathtip = function(parser, name) {
    var arg = parser.ParseArg(name);
    var tip = parser.ParseArg(name);
    parser.Push(parser.create('node', 'maction', [
        arg,
        tip
    ], {
        actiontype: 'tooltip'
    }));
};
new SymbolMap_js_1.CommandMap('action-macros', {
    toggle: 'Toggle',
    mathtip: 'Mathtip',
    texttip: [
        'Macro',
        '\\mathtip{#1}{\\text{#2}}',
        2
    ]
}, exports.ActionMethods);
exports.ActionConfiguration = Configuration_js_1.Configuration.create('action', {
    handler: {
        macro: [
            'action-macros'
        ]
    }
});

},{"../Configuration.js":"2ZNEp","../TexParser.js":"RI8aV","../SymbolMap.js":"19zvT","../base/BaseMethods.js":"1F5Sh"}],"BCqpN":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AmsConfiguration = exports.AmsTags = void 0;
var Configuration_js_1 = require("../Configuration.js");
var AmsItems_js_1 = require("./AmsItems.js");
var Tags_js_1 = require("../Tags.js");
var AmsMethods_js_1 = require("./AmsMethods.js");
require("./AmsMappings.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var AmsTags1 = function(_super) {
    __extends(AmsTags2, _super);
    function AmsTags2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return AmsTags2;
}(Tags_js_1.AbstractTags);
exports.AmsTags = AmsTags1;
var init = function(config) {
    new SymbolMap_js_1.CommandMap(AmsMethods_js_1.NEW_OPS, {
    }, {
    });
    config.append(Configuration_js_1.Configuration.local({
        handler: {
            macro: [
                AmsMethods_js_1.NEW_OPS
            ]
        },
        priority: -1
    }));
};
exports.AmsConfiguration = Configuration_js_1.Configuration.create('ams', {
    handler: {
        delimiter: [
            'AMSsymbols-delimiter',
            'AMSmath-delimiter'
        ],
        macro: [
            'AMSsymbols-mathchar0mi',
            'AMSsymbols-mathchar0mo',
            'AMSsymbols-delimiter',
            'AMSsymbols-macros',
            'AMSmath-mathchar0mo',
            'AMSmath-macros',
            'AMSmath-delimiter'
        ],
        environment: [
            'AMSmath-environment'
        ]
    },
    items: (_a = {
    }, _a[AmsItems_js_1.MultlineItem.prototype.kind] = AmsItems_js_1.MultlineItem, _a),
    tags: {
        'ams': AmsTags1
    },
    init: init
});

},{"../Configuration.js":"2ZNEp","./AmsItems.js":"4ruD8","../Tags.js":"5I8xM","./AmsMethods.js":"Hvojo","./AmsMappings.js":"eguo6","../SymbolMap.js":"19zvT"}],"4ruD8":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MultlineItem = void 0;
var BaseItems_js_1 = require("../base/BaseItems.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var NodeUtil_js_1 = require("../NodeUtil.js");
var TexError_js_1 = require("../TexError.js");
var TexConstants_js_1 = require("../TexConstants.js");
var MultlineItem1 = function(_super) {
    __extends(MultlineItem2, _super);
    function MultlineItem2(factory) {
        var args = [];
        for(var _i = 1; _i < arguments.length; _i++)args[_i - 1] = arguments[_i];
        var _this = _super.call(this, factory) || this;
        _this.factory.configuration.tags.start('multline', true, args[0]);
        return _this;
    }
    Object.defineProperty(MultlineItem2.prototype, "kind", {
        get: function() {
            return 'multline';
        },
        enumerable: false,
        configurable: true
    });
    MultlineItem2.prototype.EndEntry = function() {
        if (this.table.length) ParseUtil_js_1.default.fixInitialMO(this.factory.configuration, this.nodes);
        var shove = this.getProperty('shove');
        var mtd = this.create('node', 'mtd', this.nodes, shove ? {
            columnalign: shove
        } : {
        });
        this.setProperty('shove', null);
        this.row.push(mtd);
        this.Clear();
    };
    MultlineItem2.prototype.EndRow = function() {
        if (this.row.length !== 1) throw new TexError_js_1.default('MultlineRowsOneCol', 'The rows within the %1 environment must have exactly one column', 'multline');
        var row = this.create('node', 'mtr', this.row);
        this.table.push(row);
        this.row = [];
    };
    MultlineItem2.prototype.EndTable = function() {
        _super.prototype.EndTable.call(this);
        if (this.table.length) {
            var m = this.table.length - 1, label = -1;
            if (!NodeUtil_js_1.default.getAttribute(NodeUtil_js_1.default.getChildren(this.table[0])[0], 'columnalign')) NodeUtil_js_1.default.setAttribute(NodeUtil_js_1.default.getChildren(this.table[0])[0], 'columnalign', TexConstants_js_1.TexConstant.Align.LEFT);
            if (!NodeUtil_js_1.default.getAttribute(NodeUtil_js_1.default.getChildren(this.table[m])[0], 'columnalign')) NodeUtil_js_1.default.setAttribute(NodeUtil_js_1.default.getChildren(this.table[m])[0], 'columnalign', TexConstants_js_1.TexConstant.Align.RIGHT);
            var tag = this.factory.configuration.tags.getTag();
            if (tag) {
                label = this.arraydef.side === TexConstants_js_1.TexConstant.Align.LEFT ? 0 : this.table.length - 1;
                var mtr = this.table[label];
                var mlabel = this.create('node', 'mlabeledtr', [
                    tag
                ].concat(NodeUtil_js_1.default.getChildren(mtr)));
                NodeUtil_js_1.default.copyAttributes(mtr, mlabel);
                this.table[label] = mlabel;
            }
        }
        this.factory.configuration.tags.end();
    };
    return MultlineItem2;
}(BaseItems_js_1.ArrayItem);
exports.MultlineItem = MultlineItem1;

},{"../base/BaseItems.js":"7vCsT","../ParseUtil.js":"17LUu","../NodeUtil.js":"If5yR","../TexError.js":"7EfV4","../TexConstants.js":"1hJzZ"}],"Hvojo":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.NEW_OPS = exports.AmsMethods = void 0;
var ParseUtil_js_1 = require("../ParseUtil.js");
var NodeUtil_js_1 = require("../NodeUtil.js");
var TexConstants_js_1 = require("../TexConstants.js");
var TexParser_js_1 = require("../TexParser.js");
var TexError_js_1 = require("../TexError.js");
var Symbol_js_1 = require("../Symbol.js");
var BaseMethods_js_1 = require("../base/BaseMethods.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
exports.AmsMethods = {
};
exports.AmsMethods.AmsEqnArray = function(parser, begin, numbered, taggable, align, spacing, style) {
    var args = parser.GetBrackets('\\begin{' + begin.getName() + '}');
    var array = BaseMethods_js_1.default.EqnArray(parser, begin, numbered, taggable, align, spacing, style);
    return ParseUtil_js_1.default.setArrayAlign(array, args);
};
exports.AmsMethods.AlignAt = function(parser, begin, numbered, taggable) {
    var name = begin.getName();
    var n, valign, align = '', spacing = [];
    if (!taggable) valign = parser.GetBrackets('\\begin{' + name + '}');
    n = parser.GetArgument('\\begin{' + name + '}');
    if (n.match(/[^0-9]/)) throw new TexError_js_1.default('PositiveIntegerArg', 'Argument to %1 must me a positive integer', '\\begin{' + name + '}');
    var count = parseInt(n, 10);
    while(count > 0){
        align += 'rl';
        spacing.push('0em 0em');
        count--;
    }
    var spaceStr = spacing.join(' ');
    if (taggable) return exports.AmsMethods.EqnArray(parser, begin, numbered, taggable, align, spaceStr);
    var array = exports.AmsMethods.EqnArray(parser, begin, numbered, taggable, align, spaceStr);
    return ParseUtil_js_1.default.setArrayAlign(array, valign);
};
exports.AmsMethods.Multline = function(parser, begin, numbered) {
    parser.Push(begin);
    ParseUtil_js_1.default.checkEqnEnv(parser);
    var item = parser.itemFactory.create('multline', numbered, parser.stack);
    item.arraydef = {
        displaystyle: true,
        rowspacing: '.5em',
        columnwidth: '100%',
        width: parser.options['multlineWidth'],
        side: parser.options['tagSide'],
        minlabelspacing: parser.options['tagIndent']
    };
    return item;
};
exports.NEW_OPS = 'ams-declare-ops';
exports.AmsMethods.HandleDeclareOp = function(parser, name) {
    var limits = parser.GetStar() ? '' : '\\nolimits\\SkipLimits';
    var cs = ParseUtil_js_1.default.trimSpaces(parser.GetArgument(name));
    if (cs.charAt(0) === '\\') cs = cs.substr(1);
    var op = parser.GetArgument(name);
    if (!op.match(/\\text/)) op = op.replace(/\*/g, '\\text{*}').replace(/-/g, '\\text{-}');
    parser.configuration.handlers.retrieve(exports.NEW_OPS).add(cs, new Symbol_js_1.Macro(cs, exports.AmsMethods.Macro, [
        '\\mathop{\\rm ' + op + '}' + limits
    ]));
};
exports.AmsMethods.HandleOperatorName = function(parser, name) {
    var limits = parser.GetStar() ? '' : '\\nolimits\\SkipLimits';
    var op = ParseUtil_js_1.default.trimSpaces(parser.GetArgument(name));
    if (!op.match(/\\text/)) op = op.replace(/\*/g, '\\text{*}').replace(/-/g, '\\text{-}');
    parser.string = '\\mathop{\\rm ' + op + '}' + limits + ' ' + parser.string.slice(parser.i);
    parser.i = 0;
};
exports.AmsMethods.SkipLimits = function(parser, _name) {
    var c = parser.GetNext(), i = parser.i;
    if (c === '\\' && ++parser.i && parser.GetCS() !== 'limits') parser.i = i;
};
exports.AmsMethods.MultiIntegral = function(parser, name, integral) {
    var next = parser.GetNext();
    if (next === '\\') {
        var i = parser.i;
        next = parser.GetArgument(name);
        parser.i = i;
        if (next === '\\limits') {
            if (name === '\\idotsint') integral = '\\!\\!\\mathop{\\,\\,' + integral + '}';
            else integral = '\\!\\!\\!\\mathop{\\,\\,\\,' + integral + '}';
        }
    }
    parser.string = integral + ' ' + parser.string.slice(parser.i);
    parser.i = 0;
};
exports.AmsMethods.xArrow = function(parser, name, chr, l, r) {
    var def = {
        width: '+' + ParseUtil_js_1.default.Em((l + r) / 18),
        lspace: ParseUtil_js_1.default.Em(l / 18)
    };
    var bot = parser.GetBrackets(name);
    var first = parser.ParseArg(name);
    var dstrut = parser.create('node', 'mspace', [], {
        depth: '.25em'
    });
    var arrow = parser.create('token', 'mo', {
        stretchy: true,
        texClass: MmlNode_js_1.TEXCLASS.REL
    }, String.fromCodePoint(chr));
    arrow = parser.create('node', 'mstyle', [
        arrow
    ], {
        scriptlevel: 0
    });
    var mml = parser.create('node', 'munderover', [
        arrow
    ]);
    var mpadded = parser.create('node', 'mpadded', [
        first,
        dstrut
    ], def);
    NodeUtil_js_1.default.setAttribute(mpadded, 'voffset', '-.2em');
    NodeUtil_js_1.default.setAttribute(mpadded, 'height', '-.2em');
    NodeUtil_js_1.default.setChild(mml, mml.over, mpadded);
    if (bot) {
        var bottom = new TexParser_js_1.default(bot, parser.stack.env, parser.configuration).mml();
        var bstrut = parser.create('node', 'mspace', [], {
            height: '.75em'
        });
        mpadded = parser.create('node', 'mpadded', [
            bottom,
            bstrut
        ], def);
        NodeUtil_js_1.default.setAttribute(mpadded, 'voffset', '.15em');
        NodeUtil_js_1.default.setAttribute(mpadded, 'depth', '-.15em');
        NodeUtil_js_1.default.setChild(mml, mml.under, mpadded);
    }
    NodeUtil_js_1.default.setProperty(mml, 'subsupOK', true);
    parser.Push(mml);
};
exports.AmsMethods.HandleShove = function(parser, _name, shove) {
    var top = parser.stack.Top();
    if (top.kind !== 'multline') throw new TexError_js_1.default('CommandOnlyAllowedInEnv', '%1 only allowed in %2 environment', parser.currentCS, 'multline');
    if (top.Size()) throw new TexError_js_1.default('CommandAtTheBeginingOfLine', '%1 must come at the beginning of the line', parser.currentCS);
    top.setProperty('shove', shove);
};
exports.AmsMethods.CFrac = function(parser, name) {
    var lr = ParseUtil_js_1.default.trimSpaces(parser.GetBrackets(name, ''));
    var num = parser.GetArgument(name);
    var den = parser.GetArgument(name);
    var lrMap = {
        l: TexConstants_js_1.TexConstant.Align.LEFT,
        r: TexConstants_js_1.TexConstant.Align.RIGHT,
        '': ''
    };
    var numNode = new TexParser_js_1.default('\\strut\\textstyle{' + num + '}', parser.stack.env, parser.configuration).mml();
    var denNode = new TexParser_js_1.default('\\strut\\textstyle{' + den + '}', parser.stack.env, parser.configuration).mml();
    var frac = parser.create('node', 'mfrac', [
        numNode,
        denNode
    ]);
    lr = lrMap[lr];
    if (lr == null) throw new TexError_js_1.default('IllegalAlign', 'Illegal alignment specified in %1', parser.currentCS);
    if (lr) NodeUtil_js_1.default.setProperties(frac, {
        numalign: lr,
        denomalign: lr
    });
    parser.Push(frac);
};
exports.AmsMethods.Genfrac = function(parser, name, left, right, thick, style) {
    if (left == null) left = parser.GetDelimiterArg(name);
    if (right == null) right = parser.GetDelimiterArg(name);
    if (thick == null) thick = parser.GetArgument(name);
    if (style == null) style = ParseUtil_js_1.default.trimSpaces(parser.GetArgument(name));
    var num = parser.ParseArg(name);
    var den = parser.ParseArg(name);
    var frac = parser.create('node', 'mfrac', [
        num,
        den
    ]);
    if (thick !== '') NodeUtil_js_1.default.setAttribute(frac, 'linethickness', thick);
    if (left || right) {
        NodeUtil_js_1.default.setProperty(frac, 'withDelims', true);
        frac = ParseUtil_js_1.default.fixedFence(parser.configuration, left, frac, right);
    }
    if (style !== '') {
        var styleDigit = parseInt(style, 10);
        var styleAlpha = [
            'D',
            'T',
            'S',
            'SS'
        ][styleDigit];
        if (styleAlpha == null) throw new TexError_js_1.default('BadMathStyleFor', 'Bad math style for %1', parser.currentCS);
        frac = parser.create('node', 'mstyle', [
            frac
        ]);
        if (styleAlpha === 'D') NodeUtil_js_1.default.setProperties(frac, {
            displaystyle: true,
            scriptlevel: 0
        });
        else NodeUtil_js_1.default.setProperties(frac, {
            displaystyle: false,
            scriptlevel: styleDigit - 1
        });
    }
    parser.Push(frac);
};
exports.AmsMethods.HandleTag = function(parser, name) {
    if (!parser.tags.currentTag.taggable && parser.tags.env) throw new TexError_js_1.default('CommandNotAllowedInEnv', '%1 not allowed in %2 environment', parser.currentCS, parser.tags.env);
    if (parser.tags.currentTag.tag) throw new TexError_js_1.default('MultipleCommand', 'Multiple %1', parser.currentCS);
    var star = parser.GetStar();
    var tagId = ParseUtil_js_1.default.trimSpaces(parser.GetArgument(name));
    parser.tags.tag(tagId, star);
};
exports.AmsMethods.HandleNoTag = BaseMethods_js_1.default.HandleNoTag;
exports.AmsMethods.HandleRef = BaseMethods_js_1.default.HandleRef;
exports.AmsMethods.Macro = BaseMethods_js_1.default.Macro;
exports.AmsMethods.Accent = BaseMethods_js_1.default.Accent;
exports.AmsMethods.Tilde = BaseMethods_js_1.default.Tilde;
exports.AmsMethods.Array = BaseMethods_js_1.default.Array;
exports.AmsMethods.Spacer = BaseMethods_js_1.default.Spacer;
exports.AmsMethods.NamedOp = BaseMethods_js_1.default.NamedOp;
exports.AmsMethods.EqnArray = BaseMethods_js_1.default.EqnArray;

},{"../ParseUtil.js":"17LUu","../NodeUtil.js":"If5yR","../TexConstants.js":"1hJzZ","../TexParser.js":"RI8aV","../TexError.js":"7EfV4","../Symbol.js":"1afRf","../base/BaseMethods.js":"1F5Sh","../../../core/MmlTree/MmlNode.js":"5Ogy3"}],"eguo6":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var AmsMethods_js_1 = require("./AmsMethods.js");
var sm = require("../SymbolMap.js");
var TexConstants_js_1 = require("../TexConstants.js");
var ParseMethods_js_1 = require("../ParseMethods.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var lengths_js_1 = require("../../../util/lengths.js");
var COLS = function(W) {
    var WW = [];
    for(var i = 0, m = W.length; i < m; i++)WW[i] = ParseUtil_js_1.default.Em(W[i]);
    return WW.join(' ');
};
new sm.CharacterMap('AMSmath-mathchar0mo', ParseMethods_js_1.default.mathchar0mo, {
    iiiint: [
        '\u2A0C',
        {
            texClass: MmlNode_js_1.TEXCLASS.OP
        }
    ]
});
new sm.CommandMap('AMSmath-macros', {
    mathring: [
        'Accent',
        '02DA'
    ],
    nobreakspace: 'Tilde',
    negmedspace: [
        'Spacer',
        lengths_js_1.MATHSPACE.negativemediummathspace
    ],
    negthickspace: [
        'Spacer',
        lengths_js_1.MATHSPACE.negativethickmathspace
    ],
    idotsint: [
        'MultiIntegral',
        '\\int\\cdots\\int'
    ],
    dddot: [
        'Accent',
        '20DB'
    ],
    ddddot: [
        'Accent',
        '20DC'
    ],
    sideset: [
        'Macro',
        "\\mathop{\\mathop{\\rlap{\\phantom{#3}}}\\nolimits#1\\!\\mathop{#3}\\nolimits#2}",
        3
    ],
    boxed: [
        'Macro',
        '\\fbox{$\\displaystyle{#1}$}',
        1
    ],
    tag: 'HandleTag',
    notag: 'HandleNoTag',
    eqref: [
        'HandleRef',
        true
    ],
    substack: [
        'Macro',
        '\\begin{subarray}{c}#1\\end{subarray}',
        1
    ],
    injlim: [
        'NamedOp',
        'inj&thinsp;lim'
    ],
    projlim: [
        'NamedOp',
        'proj&thinsp;lim'
    ],
    varliminf: [
        'Macro',
        '\\mathop{\\underline{\\mmlToken{mi}{lim}}}'
    ],
    varlimsup: [
        'Macro',
        '\\mathop{\\overline{\\mmlToken{mi}{lim}}}'
    ],
    varinjlim: [
        'Macro',
        '\\mathop{\\underrightarrow{\\mmlToken{mi}{lim}}}'
    ],
    varprojlim: [
        'Macro',
        '\\mathop{\\underleftarrow{\\mmlToken{mi}{lim}}}'
    ],
    DeclareMathOperator: 'HandleDeclareOp',
    operatorname: 'HandleOperatorName',
    SkipLimits: 'SkipLimits',
    genfrac: 'Genfrac',
    frac: [
        'Genfrac',
        '',
        '',
        '',
        ''
    ],
    tfrac: [
        'Genfrac',
        '',
        '',
        '',
        '1'
    ],
    dfrac: [
        'Genfrac',
        '',
        '',
        '',
        '0'
    ],
    binom: [
        'Genfrac',
        '(',
        ')',
        '0',
        ''
    ],
    tbinom: [
        'Genfrac',
        '(',
        ')',
        '0',
        '1'
    ],
    dbinom: [
        'Genfrac',
        '(',
        ')',
        '0',
        '0'
    ],
    cfrac: 'CFrac',
    shoveleft: [
        'HandleShove',
        TexConstants_js_1.TexConstant.Align.LEFT
    ],
    shoveright: [
        'HandleShove',
        TexConstants_js_1.TexConstant.Align.RIGHT
    ],
    xrightarrow: [
        'xArrow',
        8594,
        7,
        12
    ],
    xleftarrow: [
        'xArrow',
        8592,
        10,
        5
    ]
}, AmsMethods_js_1.AmsMethods);
new sm.EnvironmentMap('AMSmath-environment', ParseMethods_js_1.default.environment, {
    'eqnarray*': [
        'EqnArray',
        null,
        false,
        true,
        'rcl',
        '0 ' + lengths_js_1.em(lengths_js_1.MATHSPACE.thickmathspace),
        '.5em'
    ],
    align: [
        'EqnArray',
        null,
        true,
        true,
        'rlrlrlrlrlrl',
        COLS([
            0,
            2,
            0,
            2,
            0,
            2,
            0,
            2,
            0,
            2,
            0
        ])
    ],
    'align*': [
        'EqnArray',
        null,
        false,
        true,
        'rlrlrlrlrlrl',
        COLS([
            0,
            2,
            0,
            2,
            0,
            2,
            0,
            2,
            0,
            2,
            0
        ])
    ],
    multline: [
        'Multline',
        null,
        true
    ],
    'multline*': [
        'Multline',
        null,
        false
    ],
    split: [
        'EqnArray',
        null,
        false,
        false,
        'rl',
        COLS([
            0
        ])
    ],
    gather: [
        'EqnArray',
        null,
        true,
        true,
        'c'
    ],
    'gather*': [
        'EqnArray',
        null,
        false,
        true,
        'c'
    ],
    alignat: [
        'AlignAt',
        null,
        true,
        true
    ],
    'alignat*': [
        'AlignAt',
        null,
        false,
        true
    ],
    alignedat: [
        'AlignAt',
        null,
        false,
        false
    ],
    aligned: [
        'AmsEqnArray',
        null,
        null,
        null,
        'rlrlrlrlrlrl',
        COLS([
            0,
            2,
            0,
            2,
            0,
            2,
            0,
            2,
            0,
            2,
            0
        ]),
        '.5em',
        'D'
    ],
    gathered: [
        'AmsEqnArray',
        null,
        null,
        null,
        'c',
        null,
        '.5em',
        'D'
    ],
    subarray: [
        'Array',
        null,
        null,
        null,
        null,
        COLS([
            0
        ]),
        '0.1em',
        'S',
        1
    ],
    smallmatrix: [
        'Array',
        null,
        null,
        null,
        'c',
        COLS([
            1 / 3
        ]),
        '.2em',
        'S',
        1
    ],
    matrix: [
        'Array',
        null,
        null,
        null,
        'c'
    ],
    pmatrix: [
        'Array',
        null,
        '(',
        ')',
        'c'
    ],
    bmatrix: [
        'Array',
        null,
        '[',
        ']',
        'c'
    ],
    Bmatrix: [
        'Array',
        null,
        '\\{',
        '\\}',
        'c'
    ],
    vmatrix: [
        'Array',
        null,
        '\\vert',
        '\\vert',
        'c'
    ],
    Vmatrix: [
        'Array',
        null,
        '\\Vert',
        '\\Vert',
        'c'
    ],
    cases: [
        'Array',
        null,
        '\\{',
        '.',
        'll',
        null,
        '.2em',
        'T'
    ]
}, AmsMethods_js_1.AmsMethods);
new sm.DelimiterMap('AMSmath-delimiter', ParseMethods_js_1.default.delimiter, {
    '\\lvert': [
        '\u007C',
        {
            texClass: MmlNode_js_1.TEXCLASS.OPEN
        }
    ],
    '\\rvert': [
        '\u007C',
        {
            texClass: MmlNode_js_1.TEXCLASS.CLOSE
        }
    ],
    '\\lVert': [
        '\u2016',
        {
            texClass: MmlNode_js_1.TEXCLASS.OPEN
        }
    ],
    '\\rVert': [
        '\u2016',
        {
            texClass: MmlNode_js_1.TEXCLASS.CLOSE
        }
    ]
});
new sm.CharacterMap('AMSsymbols-mathchar0mi', ParseMethods_js_1.default.mathchar0mi, {
    digamma: '\u03DD',
    varkappa: '\u03F0',
    varGamma: [
        '\u0393',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    varDelta: [
        '\u0394',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    varTheta: [
        '\u0398',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    varLambda: [
        '\u039B',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    varXi: [
        '\u039E',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    varPi: [
        '\u03A0',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    varSigma: [
        '\u03A3',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    varUpsilon: [
        '\u03A5',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    varPhi: [
        '\u03A6',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    varPsi: [
        '\u03A8',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    varOmega: [
        '\u03A9',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC
        }
    ],
    beth: '\u2136',
    gimel: '\u2137',
    daleth: '\u2138',
    backprime: [
        '\u2035',
        {
            variantForm: true
        }
    ],
    hslash: '\u210F',
    varnothing: [
        '\u2205',
        {
            variantForm: true
        }
    ],
    blacktriangle: '\u25B4',
    triangledown: [
        '\u25BD',
        {
            variantForm: true
        }
    ],
    blacktriangledown: '\u25BE',
    square: '\u25FB',
    Box: '\u25FB',
    blacksquare: '\u25FC',
    lozenge: '\u25CA',
    Diamond: '\u25CA',
    blacklozenge: '\u29EB',
    circledS: [
        '\u24C8',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    bigstar: '\u2605',
    sphericalangle: '\u2222',
    measuredangle: '\u2221',
    nexists: '\u2204',
    complement: '\u2201',
    mho: '\u2127',
    eth: [
        '\u00F0',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    Finv: '\u2132',
    diagup: '\u2571',
    Game: '\u2141',
    diagdown: '\u2572',
    Bbbk: [
        '\u006B',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.DOUBLESTRUCK
        }
    ],
    yen: '\u00A5',
    circledR: '\u00AE',
    checkmark: '\u2713',
    maltese: '\u2720'
});
new sm.CharacterMap('AMSsymbols-mathchar0mo', ParseMethods_js_1.default.mathchar0mo, {
    dotplus: '\u2214',
    ltimes: '\u22C9',
    smallsetminus: [
        '\u2216',
        {
            variantForm: true
        }
    ],
    rtimes: '\u22CA',
    Cap: '\u22D2',
    doublecap: '\u22D2',
    leftthreetimes: '\u22CB',
    Cup: '\u22D3',
    doublecup: '\u22D3',
    rightthreetimes: '\u22CC',
    barwedge: '\u22BC',
    curlywedge: '\u22CF',
    veebar: '\u22BB',
    curlyvee: '\u22CE',
    doublebarwedge: '\u2A5E',
    boxminus: '\u229F',
    circleddash: '\u229D',
    boxtimes: '\u22A0',
    circledast: '\u229B',
    boxdot: '\u22A1',
    circledcirc: '\u229A',
    boxplus: '\u229E',
    centerdot: [
        '\u22C5',
        {
            variantForm: true
        }
    ],
    divideontimes: '\u22C7',
    intercal: '\u22BA',
    leqq: '\u2266',
    geqq: '\u2267',
    leqslant: '\u2A7D',
    geqslant: '\u2A7E',
    eqslantless: '\u2A95',
    eqslantgtr: '\u2A96',
    lesssim: '\u2272',
    gtrsim: '\u2273',
    lessapprox: '\u2A85',
    gtrapprox: '\u2A86',
    approxeq: '\u224A',
    lessdot: '\u22D6',
    gtrdot: '\u22D7',
    lll: '\u22D8',
    llless: '\u22D8',
    ggg: '\u22D9',
    gggtr: '\u22D9',
    lessgtr: '\u2276',
    gtrless: '\u2277',
    lesseqgtr: '\u22DA',
    gtreqless: '\u22DB',
    lesseqqgtr: '\u2A8B',
    gtreqqless: '\u2A8C',
    doteqdot: '\u2251',
    Doteq: '\u2251',
    eqcirc: '\u2256',
    risingdotseq: '\u2253',
    circeq: '\u2257',
    fallingdotseq: '\u2252',
    triangleq: '\u225C',
    backsim: '\u223D',
    thicksim: [
        '\u223C',
        {
            variantForm: true
        }
    ],
    backsimeq: '\u22CD',
    thickapprox: [
        '\u2248',
        {
            variantForm: true
        }
    ],
    subseteqq: '\u2AC5',
    supseteqq: '\u2AC6',
    Subset: '\u22D0',
    Supset: '\u22D1',
    sqsubset: '\u228F',
    sqsupset: '\u2290',
    preccurlyeq: '\u227C',
    succcurlyeq: '\u227D',
    curlyeqprec: '\u22DE',
    curlyeqsucc: '\u22DF',
    precsim: '\u227E',
    succsim: '\u227F',
    precapprox: '\u2AB7',
    succapprox: '\u2AB8',
    vartriangleleft: '\u22B2',
    lhd: '\u22B2',
    vartriangleright: '\u22B3',
    rhd: '\u22B3',
    trianglelefteq: '\u22B4',
    unlhd: '\u22B4',
    trianglerighteq: '\u22B5',
    unrhd: '\u22B5',
    vDash: [
        '\u22A8',
        {
            variantForm: true
        }
    ],
    Vdash: '\u22A9',
    Vvdash: '\u22AA',
    smallsmile: [
        '\u2323',
        {
            variantForm: true
        }
    ],
    shortmid: [
        '\u2223',
        {
            variantForm: true
        }
    ],
    smallfrown: [
        '\u2322',
        {
            variantForm: true
        }
    ],
    shortparallel: [
        '\u2225',
        {
            variantForm: true
        }
    ],
    bumpeq: '\u224F',
    between: '\u226C',
    Bumpeq: '\u224E',
    pitchfork: '\u22D4',
    varpropto: [
        '\u221D',
        {
            variantForm: true
        }
    ],
    backepsilon: '\u220D',
    blacktriangleleft: '\u25C2',
    blacktriangleright: '\u25B8',
    therefore: '\u2234',
    because: '\u2235',
    eqsim: '\u2242',
    vartriangle: [
        '\u25B3',
        {
            variantForm: true
        }
    ],
    Join: '\u22C8',
    nless: '\u226E',
    ngtr: '\u226F',
    nleq: '\u2270',
    ngeq: '\u2271',
    nleqslant: [
        '\u2A87',
        {
            variantForm: true
        }
    ],
    ngeqslant: [
        '\u2A88',
        {
            variantForm: true
        }
    ],
    nleqq: [
        '\u2270',
        {
            variantForm: true
        }
    ],
    ngeqq: [
        '\u2271',
        {
            variantForm: true
        }
    ],
    lneq: '\u2A87',
    gneq: '\u2A88',
    lneqq: '\u2268',
    gneqq: '\u2269',
    lvertneqq: [
        '\u2268',
        {
            variantForm: true
        }
    ],
    gvertneqq: [
        '\u2269',
        {
            variantForm: true
        }
    ],
    lnsim: '\u22E6',
    gnsim: '\u22E7',
    lnapprox: '\u2A89',
    gnapprox: '\u2A8A',
    nprec: '\u2280',
    nsucc: '\u2281',
    npreceq: [
        '\u22E0',
        {
            variantForm: true
        }
    ],
    nsucceq: [
        '\u22E1',
        {
            variantForm: true
        }
    ],
    precneqq: '\u2AB5',
    succneqq: '\u2AB6',
    precnsim: '\u22E8',
    succnsim: '\u22E9',
    precnapprox: '\u2AB9',
    succnapprox: '\u2ABA',
    nsim: '\u2241',
    ncong: '\u2247',
    nshortmid: [
        '\u2224',
        {
            variantForm: true
        }
    ],
    nshortparallel: [
        '\u2226',
        {
            variantForm: true
        }
    ],
    nmid: '\u2224',
    nparallel: '\u2226',
    nvdash: '\u22AC',
    nvDash: '\u22AD',
    nVdash: '\u22AE',
    nVDash: '\u22AF',
    ntriangleleft: '\u22EA',
    ntriangleright: '\u22EB',
    ntrianglelefteq: '\u22EC',
    ntrianglerighteq: '\u22ED',
    nsubseteq: '\u2288',
    nsupseteq: '\u2289',
    nsubseteqq: [
        '\u2288',
        {
            variantForm: true
        }
    ],
    nsupseteqq: [
        '\u2289',
        {
            variantForm: true
        }
    ],
    subsetneq: '\u228A',
    supsetneq: '\u228B',
    varsubsetneq: [
        '\u228A',
        {
            variantForm: true
        }
    ],
    varsupsetneq: [
        '\u228B',
        {
            variantForm: true
        }
    ],
    subsetneqq: '\u2ACB',
    supsetneqq: '\u2ACC',
    varsubsetneqq: [
        '\u2ACB',
        {
            variantForm: true
        }
    ],
    varsupsetneqq: [
        '\u2ACC',
        {
            variantForm: true
        }
    ],
    leftleftarrows: '\u21C7',
    rightrightarrows: '\u21C9',
    leftrightarrows: '\u21C6',
    rightleftarrows: '\u21C4',
    Lleftarrow: '\u21DA',
    Rrightarrow: '\u21DB',
    twoheadleftarrow: '\u219E',
    twoheadrightarrow: '\u21A0',
    leftarrowtail: '\u21A2',
    rightarrowtail: '\u21A3',
    looparrowleft: '\u21AB',
    looparrowright: '\u21AC',
    leftrightharpoons: '\u21CB',
    rightleftharpoons: [
        '\u21CC',
        {
            variantForm: true
        }
    ],
    curvearrowleft: '\u21B6',
    curvearrowright: '\u21B7',
    circlearrowleft: '\u21BA',
    circlearrowright: '\u21BB',
    Lsh: '\u21B0',
    Rsh: '\u21B1',
    upuparrows: '\u21C8',
    downdownarrows: '\u21CA',
    upharpoonleft: '\u21BF',
    upharpoonright: '\u21BE',
    downharpoonleft: '\u21C3',
    restriction: '\u21BE',
    multimap: '\u22B8',
    downharpoonright: '\u21C2',
    leftrightsquigarrow: '\u21AD',
    rightsquigarrow: '\u21DD',
    leadsto: '\u21DD',
    dashrightarrow: '\u21E2',
    dashleftarrow: '\u21E0',
    nleftarrow: '\u219A',
    nrightarrow: '\u219B',
    nLeftarrow: '\u21CD',
    nRightarrow: '\u21CF',
    nleftrightarrow: '\u21AE',
    nLeftrightarrow: '\u21CE'
});
new sm.DelimiterMap('AMSsymbols-delimiter', ParseMethods_js_1.default.delimiter, {
    '\\ulcorner': '\u231C',
    '\\urcorner': '\u231D',
    '\\llcorner': '\u231E',
    '\\lrcorner': '\u231F'
});
new sm.CommandMap('AMSsymbols-macros', {
    implies: [
        'Macro',
        '\\;\\Longrightarrow\\;'
    ],
    impliedby: [
        'Macro',
        '\\;\\Longleftarrow\\;'
    ]
}, AmsMethods_js_1.AmsMethods);

},{"./AmsMethods.js":"Hvojo","../SymbolMap.js":"19zvT","../TexConstants.js":"1hJzZ","../ParseMethods.js":"2Nz4D","../ParseUtil.js":"17LUu","../../../core/MmlTree/MmlNode.js":"5Ogy3","../../../util/lengths.js":"5EoCW"}],"1RYtu":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AmsCdConfiguration = void 0;
var Configuration_js_1 = require("../Configuration.js");
require("./AmsCdMappings.js");
exports.AmsCdConfiguration = Configuration_js_1.Configuration.create('amscd', {
    handler: {
        character: [
            'amscd_special'
        ],
        macro: [
            'amscd_macros'
        ],
        environment: [
            'amscd_environment'
        ]
    },
    options: {
        amscd: {
            colspace: '5pt',
            rowspace: '5pt',
            harrowsize: '2.75em',
            varrowsize: '1.75em',
            hideHorizontalLabels: false
        }
    }
});

},{"../Configuration.js":"2ZNEp","./AmsCdMappings.js":"705HI"}],"705HI":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var sm = require("../SymbolMap.js");
var ParseMethods_js_1 = require("../ParseMethods.js");
var AmsCdMethods_js_1 = require("./AmsCdMethods.js");
new sm.EnvironmentMap('amscd_environment', ParseMethods_js_1.default.environment, {
    CD: 'CD'
}, AmsCdMethods_js_1.default);
new sm.CommandMap('amscd_macros', {
    minCDarrowwidth: 'minCDarrowwidth',
    minCDarrowheight: 'minCDarrowheight'
}, AmsCdMethods_js_1.default);
new sm.MacroMap('amscd_special', {
    '@': 'arrow'
}, AmsCdMethods_js_1.default);

},{"../SymbolMap.js":"19zvT","../ParseMethods.js":"2Nz4D","./AmsCdMethods.js":"6mk2Y"}],"6mk2Y":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var TexParser_js_1 = require("../TexParser.js");
var BaseConfiguration_js_1 = require("../base/BaseConfiguration.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var NodeUtil_js_1 = require("../NodeUtil.js");
var AmsCdMethods = {
};
AmsCdMethods.CD = function(parser, begin) {
    parser.Push(begin);
    var item = parser.itemFactory.create('array');
    var options = parser.configuration.options.amscd;
    item.setProperties({
        minw: parser.stack.env.CD_minw || options.harrowsize,
        minh: parser.stack.env.CD_minh || options.varrowsize
    });
    item.arraydef = {
        columnalign: 'center',
        columnspacing: options.colspace,
        rowspacing: options.rowspace,
        displaystyle: true
    };
    return item;
};
AmsCdMethods.arrow = function(parser, name) {
    var c = parser.string.charAt(parser.i);
    if (!c.match(/[><VA.|=]/)) return BaseConfiguration_js_1.Other(parser, name);
    else parser.i++;
    var first = parser.stack.Top();
    if (!first.isKind('array') || first.Size()) {
        AmsCdMethods.cell(parser, name);
        first = parser.stack.Top();
    }
    var top = first;
    var arrowRow = top.table.length % 2 === 1;
    var n = (top.row.length + (arrowRow ? 0 : 1)) % 2;
    while(n){
        AmsCdMethods.cell(parser, name);
        n--;
    }
    var mml;
    var hdef = {
        minsize: top.getProperty('minw'),
        stretchy: true
    }, vdef = {
        minsize: top.getProperty('minh'),
        stretchy: true,
        symmetric: true,
        lspace: 0,
        rspace: 0
    };
    if (c === '.') ;
    else if (c === '|') mml = parser.create('token', 'mo', vdef, '\u2225');
    else if (c === '=') mml = parser.create('token', 'mo', hdef, '=');
    else {
        var arrow = {
            '>': '\u2192',
            '<': '\u2190',
            'V': '\u2193',
            'A': '\u2191'
        }[c];
        var a = parser.GetUpTo(name + c, c);
        var b = parser.GetUpTo(name + c, c);
        if (c === '>' || c === '<') {
            mml = parser.create('token', 'mo', hdef, arrow);
            if (!a) a = '\\kern ' + top.getProperty('minw');
            if (a || b) {
                var pad = {
                    width: '.67em',
                    lspace: '.33em'
                };
                mml = parser.create('node', 'munderover', [
                    mml
                ]);
                if (a) {
                    var nodeA = new TexParser_js_1.default(a, parser.stack.env, parser.configuration).mml();
                    var mpadded = parser.create('node', 'mpadded', [
                        nodeA
                    ], pad);
                    NodeUtil_js_1.default.setAttribute(mpadded, 'voffset', '.1em');
                    NodeUtil_js_1.default.setChild(mml, mml.over, mpadded);
                }
                if (b) {
                    var nodeB = new TexParser_js_1.default(b, parser.stack.env, parser.configuration).mml();
                    NodeUtil_js_1.default.setChild(mml, mml.under, parser.create('node', 'mpadded', [
                        nodeB
                    ], pad));
                }
                if (parser.configuration.options.amscd.hideHorizontalLabels) mml = parser.create('node', 'mpadded', mml, {
                    depth: 0,
                    height: '.67em'
                });
            }
        } else {
            var arrowNode = parser.create('token', 'mo', vdef, arrow);
            mml = arrowNode;
            if (a || b) {
                mml = parser.create('node', 'mrow');
                if (a) NodeUtil_js_1.default.appendChildren(mml, [
                    new TexParser_js_1.default('\\scriptstyle\\llap{' + a + '}', parser.stack.env, parser.configuration).mml()
                ]);
                arrowNode.texClass = MmlNode_js_1.TEXCLASS.ORD;
                NodeUtil_js_1.default.appendChildren(mml, [
                    arrowNode
                ]);
                if (b) NodeUtil_js_1.default.appendChildren(mml, [
                    new TexParser_js_1.default('\\scriptstyle\\rlap{' + b + '}', parser.stack.env, parser.configuration).mml()
                ]);
            }
        }
    }
    if (mml) parser.Push(mml);
    AmsCdMethods.cell(parser, name);
};
AmsCdMethods.cell = function(parser, name) {
    var top = parser.stack.Top();
    if ((top.table || []).length % 2 === 0 && (top.row || []).length === 0) parser.Push(parser.create('node', 'mpadded', [], {
        height: '8.5pt',
        depth: '2pt'
    }));
    parser.Push(parser.itemFactory.create('cell').setProperties({
        isEntry: true,
        name: name
    }));
};
AmsCdMethods.minCDarrowwidth = function(parser, name) {
    parser.stack.env.CD_minw = parser.GetDimen(name);
};
AmsCdMethods.minCDarrowheight = function(parser, name) {
    parser.stack.env.CD_minh = parser.GetDimen(name);
};
exports.default = AmsCdMethods;

},{"../TexParser.js":"RI8aV","../base/BaseConfiguration.js":"1cNwT","../../../core/MmlTree/MmlNode.js":"5Ogy3","../NodeUtil.js":"If5yR"}],"3HYmX":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BboxConfiguration = exports.BboxMethods = void 0;
var Configuration_js_1 = require("../Configuration.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var TexError_js_1 = require("../TexError.js");
exports.BboxMethods = {
};
exports.BboxMethods.BBox = function(parser, name) {
    var bbox = parser.GetBrackets(name, '');
    var math = parser.ParseArg(name);
    var parts = bbox.split(/,/);
    var def, background, style;
    for(var i = 0, m = parts.length; i < m; i++){
        var part = parts[i].trim();
        var match = part.match(/^(\.\d+|\d+(\.\d*)?)(pt|em|ex|mu|px|in|cm|mm)$/);
        if (match) {
            if (def) throw new TexError_js_1.default('MultipleBBoxProperty', '%1 specified twice in %2', 'Padding', name);
            var pad = BBoxPadding(match[1] + match[3]);
            if (pad) def = {
                height: '+' + pad,
                depth: '+' + pad,
                lspace: pad,
                width: '+' + 2 * parseInt(match[1], 10) + match[3]
            };
        } else if (part.match(/^([a-z0-9]+|\#[0-9a-f]{6}|\#[0-9a-f]{3})$/i)) {
            if (background) throw new TexError_js_1.default('MultipleBBoxProperty', '%1 specified twice in %2', 'Background', name);
            background = part;
        } else if (part.match(/^[-a-z]+:/i)) {
            if (style) throw new TexError_js_1.default('MultipleBBoxProperty', '%1 specified twice in %2', 'Style', name);
            style = BBoxStyle(part);
        } else if (part !== '') throw new TexError_js_1.default('InvalidBBoxProperty', '"%1" doesn\'t look like a color, a padding dimension, or a style', part);
    }
    if (def) math = parser.create('node', 'mpadded', [
        math
    ], def);
    if (background || style) {
        def = {
        };
        if (background) Object.assign(def, {
            mathbackground: background
        });
        if (style) Object.assign(def, {
            style: style
        });
        math = parser.create('node', 'mstyle', [
            math
        ], def);
    }
    parser.Push(math);
};
var BBoxStyle = function(styles) {
    return styles;
};
var BBoxPadding = function(pad) {
    return pad;
};
new SymbolMap_js_1.CommandMap('bbox', {
    bbox: 'BBox'
}, exports.BboxMethods);
exports.BboxConfiguration = Configuration_js_1.Configuration.create('bbox', {
    handler: {
        macro: [
            'bbox'
        ]
    }
});

},{"../Configuration.js":"2ZNEp","../SymbolMap.js":"19zvT","../TexError.js":"7EfV4"}],"62aMJ":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BoldsymbolConfiguration = exports.rewriteBoldTokens = exports.createBoldToken = exports.BoldsymbolMethods = void 0;
var Configuration_js_1 = require("../Configuration.js");
var NodeUtil_js_1 = require("../NodeUtil.js");
var TexConstants_js_1 = require("../TexConstants.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var NodeFactory_js_1 = require("../NodeFactory.js");
var BOLDVARIANT = {
};
BOLDVARIANT[TexConstants_js_1.TexConstant.Variant.NORMAL] = TexConstants_js_1.TexConstant.Variant.BOLD;
BOLDVARIANT[TexConstants_js_1.TexConstant.Variant.ITALIC] = TexConstants_js_1.TexConstant.Variant.BOLDITALIC;
BOLDVARIANT[TexConstants_js_1.TexConstant.Variant.FRAKTUR] = TexConstants_js_1.TexConstant.Variant.BOLDFRAKTUR;
BOLDVARIANT[TexConstants_js_1.TexConstant.Variant.SCRIPT] = TexConstants_js_1.TexConstant.Variant.BOLDSCRIPT;
BOLDVARIANT[TexConstants_js_1.TexConstant.Variant.SANSSERIF] = TexConstants_js_1.TexConstant.Variant.BOLDSANSSERIF;
BOLDVARIANT['-tex-calligraphic'] = '-tex-bold-calligraphic';
BOLDVARIANT['-tex-oldstyle'] = '-tex-bold-oldstyle';
BOLDVARIANT['-tex-mathit'] = TexConstants_js_1.TexConstant.Variant.BOLDITALIC;
exports.BoldsymbolMethods = {
};
exports.BoldsymbolMethods.Boldsymbol = function(parser, name) {
    var boldsymbol = parser.stack.env['boldsymbol'];
    parser.stack.env['boldsymbol'] = true;
    var mml = parser.ParseArg(name);
    parser.stack.env['boldsymbol'] = boldsymbol;
    parser.Push(mml);
};
new SymbolMap_js_1.CommandMap('boldsymbol', {
    boldsymbol: 'Boldsymbol'
}, exports.BoldsymbolMethods);
function createBoldToken(factory, kind, def, text) {
    var token = NodeFactory_js_1.NodeFactory.createToken(factory, kind, def, text);
    if (kind !== 'mtext' && factory.configuration.parser.stack.env['boldsymbol']) {
        NodeUtil_js_1.default.setProperty(token, 'fixBold', true);
        factory.configuration.addNode('fixBold', token);
    }
    return token;
}
exports.createBoldToken = createBoldToken;
function rewriteBoldTokens(arg) {
    var e_1, _a;
    try {
        for(var _b = __values(arg.data.getList('fixBold')), _c = _b.next(); !_c.done; _c = _b.next()){
            var node = _c.value;
            if (NodeUtil_js_1.default.getProperty(node, 'fixBold')) {
                var variant = NodeUtil_js_1.default.getAttribute(node, 'mathvariant');
                if (variant == null) NodeUtil_js_1.default.setAttribute(node, 'mathvariant', TexConstants_js_1.TexConstant.Variant.BOLD);
                else NodeUtil_js_1.default.setAttribute(node, 'mathvariant', BOLDVARIANT[variant] || variant);
                NodeUtil_js_1.default.removeProperties(node, 'fixBold');
            }
        }
    } catch (e_1_1) {
        e_1 = {
            error: e_1_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        } finally{
            if (e_1) throw e_1.error;
        }
    }
}
exports.rewriteBoldTokens = rewriteBoldTokens;
exports.BoldsymbolConfiguration = Configuration_js_1.Configuration.create('boldsymbol', {
    handler: {
        macro: [
            'boldsymbol'
        ]
    },
    nodes: {
        'token': createBoldToken
    },
    postprocessors: [
        rewriteBoldTokens
    ]
});

},{"../Configuration.js":"2ZNEp","../NodeUtil.js":"If5yR","../TexConstants.js":"1hJzZ","../SymbolMap.js":"19zvT","../NodeFactory.js":"5UK8M"}],"5pgc0":[function(require,module,exports) {
"use strict";
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BraketConfiguration = void 0;
var Configuration_js_1 = require("../Configuration.js");
var BraketItems_js_1 = require("./BraketItems.js");
require("./BraketMappings.js");
exports.BraketConfiguration = Configuration_js_1.Configuration.create('braket', {
    handler: {
        character: [
            'Braket-characters'
        ],
        macro: [
            'Braket-macros'
        ]
    },
    items: (_a = {
    }, _a[BraketItems_js_1.BraketItem.prototype.kind] = BraketItems_js_1.BraketItem, _a)
});

},{"../Configuration.js":"2ZNEp","./BraketItems.js":"5Kfu5","./BraketMappings.js":"12frC"}],"5Kfu5":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BraketItem = void 0;
var StackItem_js_1 = require("../StackItem.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var BraketItem1 = function(_super) {
    __extends(BraketItem2, _super);
    function BraketItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(BraketItem2.prototype, "kind", {
        get: function() {
            return 'braket';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BraketItem2.prototype, "isOpen", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    BraketItem2.prototype.checkItem = function(item) {
        if (item.isKind('close')) return [
            [
                this.factory.create('mml', this.toMml())
            ],
            true
        ];
        if (item.isKind('mml')) {
            this.Push(item.toMml());
            if (this.getProperty('single')) return [
                [
                    this.toMml()
                ],
                true
            ];
            return StackItem_js_1.BaseItem.fail;
        }
        return _super.prototype.checkItem.call(this, item);
    };
    BraketItem2.prototype.toMml = function() {
        var inner = _super.prototype.toMml.call(this);
        var open = this.getProperty('open');
        var close = this.getProperty('close');
        if (this.getProperty('stretchy')) return ParseUtil_js_1.default.fenced(this.factory.configuration, open, inner, close);
        var attrs = {
            fence: true,
            stretchy: false,
            symmetric: true,
            texClass: MmlNode_js_1.TEXCLASS.OPEN
        };
        var openNode = this.create('token', 'mo', attrs, open);
        attrs.texClass = MmlNode_js_1.TEXCLASS.CLOSE;
        var closeNode = this.create('token', 'mo', attrs, close);
        var mrow = this.create('node', 'mrow', [
            openNode,
            inner,
            closeNode
        ], {
            open: open,
            close: close,
            texClass: MmlNode_js_1.TEXCLASS.INNER
        });
        return mrow;
    };
    return BraketItem2;
}(StackItem_js_1.BaseItem);
exports.BraketItem = BraketItem1;

},{"../StackItem.js":"5A1jm","../../../core/MmlTree/MmlNode.js":"5Ogy3","../ParseUtil.js":"17LUu"}],"12frC":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var SymbolMap_js_1 = require("../SymbolMap.js");
var BraketMethods_js_1 = require("./BraketMethods.js");
new SymbolMap_js_1.CommandMap('Braket-macros', {
    bra: [
        'Macro',
        '{\\langle {#1} \\vert}',
        1
    ],
    ket: [
        'Macro',
        '{\\vert {#1} \\rangle}',
        1
    ],
    braket: [
        'Braket',
        '\u27E8',
        '\u27E9',
        false,
        Infinity
    ],
    'set': [
        'Braket',
        '{',
        '}',
        false,
        1
    ],
    Bra: [
        'Macro',
        '{\\left\\langle {#1} \\right\\vert}',
        1
    ],
    Ket: [
        'Macro',
        '{\\left\\vert {#1} \\right\\rangle}',
        1
    ],
    Braket: [
        'Braket',
        '\u27E8',
        '\u27E9',
        true,
        Infinity
    ],
    Set: [
        'Braket',
        '{',
        '}',
        true,
        1
    ],
    ketbra: [
        'Macro',
        '{\\vert {#1} \\rangle\\langle {#2} \\vert}',
        2
    ],
    Ketbra: [
        'Macro',
        '{\\left\\vert {#1} \\right\\rangle\\left\\langle {#2} \\right\\vert}',
        2
    ],
    '|': 'Bar'
}, BraketMethods_js_1.default);
new SymbolMap_js_1.MacroMap('Braket-characters', {
    '|': 'Bar'
}, BraketMethods_js_1.default);

},{"../SymbolMap.js":"19zvT","./BraketMethods.js":"5F1vE"}],"5F1vE":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var BaseMethods_js_1 = require("../base/BaseMethods.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var TexError_js_1 = require("../TexError.js");
var BraketMethods = {
};
BraketMethods.Macro = BaseMethods_js_1.default.Macro;
BraketMethods.Braket = function(parser, _name, open, close, stretchy, barmax) {
    var next = parser.GetNext();
    if (next === '') throw new TexError_js_1.default('MissingArgFor', 'Missing argument for %1', parser.currentCS);
    var single = true;
    if (next === '{') {
        parser.i++;
        single = false;
    }
    parser.Push(parser.itemFactory.create('braket').setProperties({
        barmax: barmax,
        barcount: 0,
        open: open,
        close: close,
        stretchy: stretchy,
        single: single
    }));
};
BraketMethods.Bar = function(parser, name) {
    var c = name === '|' ? '|' : '\u2225';
    var top = parser.stack.Top();
    if (top.kind !== 'braket' || top.getProperty('barcount') >= top.getProperty('barmax')) {
        var mml = parser.create('token', 'mo', {
            texClass: MmlNode_js_1.TEXCLASS.ORD,
            stretchy: false
        }, c);
        parser.Push(mml);
        return;
    }
    if (c === '|' && parser.GetNext() === '|') {
        parser.i++;
        c = '\u2225';
    }
    var stretchy = top.getProperty('stretchy');
    if (!stretchy) {
        var node_1 = parser.create('token', 'mo', {
            stretchy: false,
            braketbar: true
        }, c);
        parser.Push(node_1);
        return;
    }
    var node = parser.create('node', 'TeXAtom', [], {
        texClass: MmlNode_js_1.TEXCLASS.CLOSE
    });
    parser.Push(node);
    top.setProperty('barcount', top.getProperty('barcount') + 1);
    node = parser.create('token', 'mo', {
        stretchy: true,
        braketbar: true
    }, c);
    parser.Push(node);
    node = parser.create('node', 'TeXAtom', [], {
        texClass: MmlNode_js_1.TEXCLASS.OPEN
    });
    parser.Push(node);
};
exports.default = BraketMethods;

},{"../base/BaseMethods.js":"1F5Sh","../../../core/MmlTree/MmlNode.js":"5Ogy3","../TexError.js":"7EfV4"}],"3H65I":[function(require,module,exports) {
"use strict";
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BussproofsConfiguration = void 0;
var Configuration_js_1 = require("../Configuration.js");
var BussproofsItems_js_1 = require("./BussproofsItems.js");
var BussproofsUtil_js_1 = require("./BussproofsUtil.js");
require("./BussproofsMappings.js");
exports.BussproofsConfiguration = Configuration_js_1.Configuration.create('bussproofs', {
    handler: {
        macro: [
            'Bussproofs-macros'
        ],
        environment: [
            'Bussproofs-environments'
        ]
    },
    items: (_a = {
    }, _a[BussproofsItems_js_1.ProofTreeItem.prototype.kind] = BussproofsItems_js_1.ProofTreeItem, _a),
    preprocessors: [
        [
            BussproofsUtil_js_1.saveDocument,
            1
        ]
    ],
    postprocessors: [
        [
            BussproofsUtil_js_1.clearDocument,
            3
        ],
        [
            BussproofsUtil_js_1.makeBsprAttributes,
            2
        ],
        [
            BussproofsUtil_js_1.balanceRules,
            1
        ]
    ]
});

},{"../Configuration.js":"2ZNEp","./BussproofsItems.js":"3QRn0","./BussproofsUtil.js":"5mYh0","./BussproofsMappings.js":"ZJLCt"}],"3QRn0":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ProofTreeItem = void 0;
var TexError_js_1 = require("../TexError.js");
var StackItem_js_1 = require("../StackItem.js");
var Stack_js_1 = require("../Stack.js");
var BussproofsUtil = require("./BussproofsUtil.js");
var ProofTreeItem1 = function(_super) {
    __extends(ProofTreeItem2, _super);
    function ProofTreeItem2() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.leftLabel = null;
        _this.rigthLabel = null;
        _this.innerStack = new Stack_js_1.default(_this.factory, {
        }, true);
        return _this;
    }
    Object.defineProperty(ProofTreeItem2.prototype, "kind", {
        get: function() {
            return 'proofTree';
        },
        enumerable: false,
        configurable: true
    });
    ProofTreeItem2.prototype.checkItem = function(item) {
        if (item.isKind('end') && item.getName() === 'prooftree') {
            var node = this.toMml();
            BussproofsUtil.setProperty(node, 'proof', true);
            return [
                [
                    this.factory.create('mml', node),
                    item
                ],
                true
            ];
        }
        if (item.isKind('stop')) throw new TexError_js_1.default('EnvMissingEnd', 'Missing \\end{%1}', this.getName());
        this.innerStack.Push(item);
        return StackItem_js_1.BaseItem.fail;
    };
    ProofTreeItem2.prototype.toMml = function() {
        var tree = _super.prototype.toMml.call(this);
        var start = this.innerStack.Top();
        if (start.isKind('start') && !start.Size()) return tree;
        this.innerStack.Push(this.factory.create('stop'));
        var prefix = this.innerStack.Top().toMml();
        return this.create('node', 'mrow', [
            prefix,
            tree
        ], {
        });
    };
    return ProofTreeItem2;
}(StackItem_js_1.BaseItem);
exports.ProofTreeItem = ProofTreeItem1;

},{"../TexError.js":"7EfV4","../StackItem.js":"5A1jm","../Stack.js":"1W2vG","./BussproofsUtil.js":"5mYh0"}],"5mYh0":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.clearDocument = exports.saveDocument = exports.makeBsprAttributes = exports.removeProperty = exports.getProperty = exports.setProperty = exports.balanceRules = void 0;
var NodeUtil_js_1 = require("../NodeUtil.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var doc = null;
var item = null;
var getBBox = function(node) {
    item.root = node;
    var width = doc.outputJax.getBBox(item, doc).w;
    return width;
};
var getRule = function(node) {
    var i = 0;
    while(node && !NodeUtil_js_1.default.isType(node, 'mtable')){
        if (NodeUtil_js_1.default.isType(node, 'text')) return null;
        if (NodeUtil_js_1.default.isType(node, 'mrow')) {
            node = node.childNodes[0];
            i = 0;
            continue;
        }
        node = node.parent.childNodes[i];
        i++;
    }
    return node;
};
var getPremises = function(rule, direction) {
    return rule.childNodes[direction === 'up' ? 1 : 0].childNodes[0].childNodes[0].childNodes[0].childNodes[0];
};
var getPremise = function(premises, n) {
    return premises.childNodes[n].childNodes[0].childNodes[0];
};
var firstPremise = function(premises) {
    return getPremise(premises, 0);
};
var lastPremise = function(premises) {
    return getPremise(premises, premises.childNodes.length - 1);
};
var getConclusion = function(rule, direction) {
    return rule.childNodes[direction === 'up' ? 0 : 1].childNodes[0].childNodes[0].childNodes[0];
};
var getColumn = function(inf) {
    while(inf && !NodeUtil_js_1.default.isType(inf, 'mtd'))inf = inf.parent;
    return inf;
};
var nextSibling = function(inf) {
    return inf.parent.childNodes[inf.parent.childNodes.indexOf(inf) + 1];
};
var previousSibling = function(inf) {
    return inf.parent.childNodes[inf.parent.childNodes.indexOf(inf) - 1];
};
var getParentInf = function(inf) {
    while(inf && exports.getProperty(inf, 'inference') == null)inf = inf.parent;
    return inf;
};
var getSpaces = function(inf, rule, right) {
    if (right === void 0) right = false;
    var result = 0;
    if (inf === rule) return result;
    if (inf !== rule.parent) {
        var children_1 = inf.childNodes;
        var index_1 = right ? children_1.length - 1 : 0;
        if (NodeUtil_js_1.default.isType(children_1[index_1], 'mspace')) result += getBBox(children_1[index_1]);
        inf = rule.parent;
    }
    if (inf === rule) return result;
    var children = inf.childNodes;
    var index = right ? children.length - 1 : 0;
    if (children[index] !== rule) result += getBBox(children[index]);
    return result;
};
var adjustValue = function(inf, right) {
    if (right === void 0) right = false;
    var rule = getRule(inf);
    var conc = getConclusion(rule, exports.getProperty(rule, 'inferenceRule'));
    var w = getSpaces(inf, rule, right);
    var x = getBBox(rule);
    var y = getBBox(conc);
    return w + (x - y) / 2;
};
var addSpace = function(config, inf, space, right) {
    if (right === void 0) right = false;
    if (exports.getProperty(inf, 'inferenceRule') || exports.getProperty(inf, 'labelledRule')) {
        var mrow = config.nodeFactory.create('node', 'mrow');
        inf.parent.replaceChild(mrow, inf);
        mrow.setChildren([
            inf
        ]);
        moveProperties(inf, mrow);
        inf = mrow;
    }
    var index = right ? inf.childNodes.length - 1 : 0;
    var mspace = inf.childNodes[index];
    if (NodeUtil_js_1.default.isType(mspace, 'mspace')) {
        NodeUtil_js_1.default.setAttribute(mspace, 'width', ParseUtil_js_1.default.Em(ParseUtil_js_1.default.dimen2em(NodeUtil_js_1.default.getAttribute(mspace, 'width')) + space));
        return;
    }
    mspace = config.nodeFactory.create('node', 'mspace', [], {
        width: ParseUtil_js_1.default.Em(space)
    });
    if (right) {
        inf.appendChild(mspace);
        return;
    }
    mspace.parent = inf;
    inf.childNodes.unshift(mspace);
};
var moveProperties = function(src, dest) {
    var props = [
        'inference',
        'proof',
        'maxAdjust',
        'labelledRule'
    ];
    props.forEach(function(x) {
        var value = exports.getProperty(src, x);
        if (value != null) {
            exports.setProperty(dest, x, value);
            exports.removeProperty(src, x);
        }
    });
};
var adjustSequents = function(config) {
    var sequents = config.nodeLists['sequent'];
    if (!sequents) return;
    for(var i = sequents.length - 1, seq = void 0; seq = sequents[i]; i--){
        if (exports.getProperty(seq, 'sequentProcessed')) {
            exports.removeProperty(seq, 'sequentProcessed');
            continue;
        }
        var collect = [];
        var inf = getParentInf(seq);
        if (exports.getProperty(inf, 'inference') !== 1) continue;
        collect.push(seq);
        while(exports.getProperty(inf, 'inference') === 1){
            inf = getRule(inf);
            var premise = firstPremise(getPremises(inf, exports.getProperty(inf, 'inferenceRule')));
            var sequent = exports.getProperty(premise, 'inferenceRule') ? getConclusion(premise, exports.getProperty(premise, 'inferenceRule')) : premise;
            if (exports.getProperty(sequent, 'sequent')) {
                seq = sequent.childNodes[0];
                collect.push(seq);
                exports.setProperty(seq, 'sequentProcessed', true);
            }
            inf = premise;
        }
        adjustSequentPairwise(config, collect);
    }
};
var addSequentSpace = function(config, sequent, position, direction, width) {
    var mspace = config.nodeFactory.create('node', 'mspace', [], {
        width: ParseUtil_js_1.default.Em(width)
    });
    if (direction === 'left') {
        var row = sequent.childNodes[position].childNodes[0];
        mspace.parent = row;
        row.childNodes.unshift(mspace);
    } else sequent.childNodes[position].appendChild(mspace);
    exports.setProperty(sequent.parent, 'sequentAdjust_' + direction, width);
};
var adjustSequentPairwise = function(config, sequents) {
    var top = sequents.pop();
    while(sequents.length){
        var bottom = sequents.pop();
        var _a1 = __read(compareSequents(top, bottom), 2), left = _a1[0], right = _a1[1];
        if (exports.getProperty(top.parent, 'axiom')) {
            addSequentSpace(config, left < 0 ? top : bottom, 0, 'left', Math.abs(left));
            addSequentSpace(config, right < 0 ? top : bottom, 2, 'right', Math.abs(right));
        }
        top = bottom;
    }
};
var compareSequents = function(top, bottom) {
    var tr = getBBox(top.childNodes[2]);
    var br = getBBox(bottom.childNodes[2]);
    var tl = getBBox(top.childNodes[0]);
    var bl = getBBox(bottom.childNodes[0]);
    var dl = tl - bl;
    var dr = tr - br;
    return [
        dl,
        dr
    ];
};
var balanceRules = function(arg) {
    var e_1, _a2;
    item = new arg.document.options.MathItem('', null, arg.math.display);
    var config = arg.data;
    adjustSequents(config);
    var inferences = config.nodeLists['inference'] || [];
    try {
        for(var inferences_1 = __values(inferences), inferences_1_1 = inferences_1.next(); !inferences_1_1.done; inferences_1_1 = inferences_1.next()){
            var inf = inferences_1_1.value;
            var isProof = exports.getProperty(inf, 'proof');
            var rule = getRule(inf);
            var premises = getPremises(rule, exports.getProperty(rule, 'inferenceRule'));
            var premiseF = firstPremise(premises);
            if (exports.getProperty(premiseF, 'inference')) {
                var adjust_1 = adjustValue(premiseF);
                if (adjust_1) {
                    addSpace(config, premiseF, -adjust_1);
                    var w_1 = getSpaces(inf, rule, false);
                    addSpace(config, inf, adjust_1 - w_1);
                }
            }
            var premiseL = lastPremise(premises);
            if (exports.getProperty(premiseL, 'inference') == null) continue;
            var adjust = adjustValue(premiseL, true);
            addSpace(config, premiseL, -adjust, true);
            var w = getSpaces(inf, rule, true);
            var maxAdjust = exports.getProperty(inf, 'maxAdjust');
            if (maxAdjust != null) adjust = Math.max(adjust, maxAdjust);
            var column = void 0;
            if (isProof || !(column = getColumn(inf))) {
                addSpace(config, exports.getProperty(inf, 'proof') ? inf : inf.parent, adjust - w, true);
                continue;
            }
            var sibling = nextSibling(column);
            if (sibling) {
                var pos = config.nodeFactory.create('node', 'mspace', [], {
                    width: adjust - w + 'em'
                });
                sibling.appendChild(pos);
                inf.removeProperty('maxAdjust');
                continue;
            }
            var parentRule = getParentInf(column);
            if (!parentRule) continue;
            adjust = exports.getProperty(parentRule, 'maxAdjust') ? Math.max(exports.getProperty(parentRule, 'maxAdjust'), adjust) : adjust;
            exports.setProperty(parentRule, 'maxAdjust', adjust);
        }
    } catch (e_1_1) {
        e_1 = {
            error: e_1_1
        };
    } finally{
        try {
            if (inferences_1_1 && !inferences_1_1.done && (_a2 = inferences_1.return)) _a2.call(inferences_1);
        } finally{
            if (e_1) throw e_1.error;
        }
    }
};
exports.balanceRules = balanceRules;
var property_prefix = 'bspr_';
var blacklistedProperties = (_a = {
}, _a[property_prefix + 'maxAdjust'] = true, _a);
var setProperty = function(node, property, value) {
    NodeUtil_js_1.default.setProperty(node, property_prefix + property, value);
};
exports.setProperty = setProperty;
var getProperty = function(node, property) {
    return NodeUtil_js_1.default.getProperty(node, property_prefix + property);
};
exports.getProperty = getProperty;
var removeProperty = function(node, property) {
    node.removeProperty(property_prefix + property);
};
exports.removeProperty = removeProperty;
var makeBsprAttributes = function(arg) {
    arg.data.root.walkTree(function(mml, _data) {
        var attr = [];
        mml.getPropertyNames().forEach(function(x) {
            if (!blacklistedProperties[x] && x.match(RegExp('^' + property_prefix))) attr.push(x + ':' + mml.getProperty(x));
        });
        if (attr.length) NodeUtil_js_1.default.setAttribute(mml, 'semantics', attr.join(';'));
    });
};
exports.makeBsprAttributes = makeBsprAttributes;
var saveDocument = function(arg) {
    doc = arg.document;
    if (!('getBBox' in doc.outputJax)) throw Error('The bussproofs extension requires an output jax with a getBBox() method');
};
exports.saveDocument = saveDocument;
var clearDocument = function(_arg) {
    doc = null;
};
exports.clearDocument = clearDocument;

},{"../NodeUtil.js":"If5yR","../ParseUtil.js":"17LUu"}],"ZJLCt":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var BussproofsMethods_js_1 = require("./BussproofsMethods.js");
var ParseMethods_js_1 = require("../ParseMethods.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
new SymbolMap_js_1.CommandMap('Bussproofs-macros', {
    AxiomC: 'Axiom',
    UnaryInfC: [
        'Inference',
        1
    ],
    BinaryInfC: [
        'Inference',
        2
    ],
    TrinaryInfC: [
        'Inference',
        3
    ],
    QuaternaryInfC: [
        'Inference',
        4
    ],
    QuinaryInfC: [
        'Inference',
        5
    ],
    RightLabel: [
        'Label',
        'right'
    ],
    LeftLabel: [
        'Label',
        'left'
    ],
    AXC: 'Axiom',
    UIC: [
        'Inference',
        1
    ],
    BIC: [
        'Inference',
        2
    ],
    TIC: [
        'Inference',
        3
    ],
    RL: [
        'Label',
        'right'
    ],
    LL: [
        'Label',
        'left'
    ],
    noLine: [
        'SetLine',
        'none',
        false
    ],
    singleLine: [
        'SetLine',
        'solid',
        false
    ],
    solidLine: [
        'SetLine',
        'solid',
        false
    ],
    dashedLine: [
        'SetLine',
        'dashed',
        false
    ],
    alwaysNoLine: [
        'SetLine',
        'none',
        true
    ],
    alwaysSingleLine: [
        'SetLine',
        'solid',
        true
    ],
    alwaysSolidLine: [
        'SetLine',
        'solid',
        true
    ],
    alwaysDashedLine: [
        'SetLine',
        'dashed',
        true
    ],
    rootAtTop: [
        'RootAtTop',
        true
    ],
    alwaysRootAtTop: [
        'RootAtTop',
        true
    ],
    rootAtBottom: [
        'RootAtTop',
        false
    ],
    alwaysRootAtBottom: [
        'RootAtTop',
        false
    ],
    fCenter: 'FCenter',
    Axiom: 'AxiomF',
    UnaryInf: [
        'InferenceF',
        1
    ],
    BinaryInf: [
        'InferenceF',
        2
    ],
    TrinaryInf: [
        'InferenceF',
        3
    ],
    QuaternaryInf: [
        'InferenceF',
        4
    ],
    QuinaryInf: [
        'InferenceF',
        5
    ]
}, BussproofsMethods_js_1.default);
new SymbolMap_js_1.EnvironmentMap('Bussproofs-environments', ParseMethods_js_1.default.environment, {
    prooftree: [
        'Prooftree',
        null,
        false
    ]
}, BussproofsMethods_js_1.default);

},{"./BussproofsMethods.js":"6eBFc","../ParseMethods.js":"2Nz4D","../SymbolMap.js":"19zvT"}],"6eBFc":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
var TexError_js_1 = require("../TexError.js");
var TexParser_js_1 = require("../TexParser.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var BussproofsUtil = require("./BussproofsUtil.js");
var BussproofsMethods = {
};
BussproofsMethods.Prooftree = function(parser, begin) {
    parser.Push(begin);
    var newItem = parser.itemFactory.create('proofTree').setProperties({
        name: begin.getName(),
        line: 'solid',
        currentLine: 'solid',
        rootAtTop: false
    });
    return newItem;
};
BussproofsMethods.Axiom = function(parser, name) {
    var top = parser.stack.Top();
    if (top.kind !== 'proofTree') throw new TexError_js_1.default('IllegalProofCommand', 'Proof commands only allowed in prooftree environment.');
    var content = paddedContent(parser, parser.GetArgument(name));
    BussproofsUtil.setProperty(content, 'axiom', true);
    top.Push(content);
};
var paddedContent = function(parser, content) {
    var nodes = ParseUtil_js_1.default.internalMath(parser, ParseUtil_js_1.default.trimSpaces(content), 0);
    if (!nodes[0].childNodes[0].childNodes.length) return parser.create('node', 'mrow', []);
    var lpad = parser.create('node', 'mspace', [], {
        width: '.5ex'
    });
    var rpad = parser.create('node', 'mspace', [], {
        width: '.5ex'
    });
    return parser.create('node', 'mrow', __spreadArray(__spreadArray([
        lpad
    ], __read(nodes)), [
        rpad
    ]));
};
BussproofsMethods.Inference = function(parser, name, n) {
    var top = parser.stack.Top();
    if (top.kind !== 'proofTree') throw new TexError_js_1.default('IllegalProofCommand', 'Proof commands only allowed in prooftree environment.');
    if (top.Size() < n) throw new TexError_js_1.default('BadProofTree', 'Proof tree badly specified.');
    var rootAtTop = top.getProperty('rootAtTop');
    var childCount = n === 1 && !top.Peek()[0].childNodes.length ? 0 : n;
    var children = [];
    do {
        if (children.length) children.unshift(parser.create('node', 'mtd', [], {
        }));
        children.unshift(parser.create('node', 'mtd', [
            top.Pop()
        ], {
            'rowalign': rootAtTop ? 'top' : 'bottom'
        }));
        n--;
    }while (n > 0)
    var row = parser.create('node', 'mtr', children, {
    });
    var table = parser.create('node', 'mtable', [
        row
    ], {
        framespacing: '0 0'
    });
    var conclusion = paddedContent(parser, parser.GetArgument(name));
    var style = top.getProperty('currentLine');
    if (style !== top.getProperty('line')) top.setProperty('currentLine', top.getProperty('line'));
    var rule = createRule(parser, table, [
        conclusion
    ], top.getProperty('left'), top.getProperty('right'), style, rootAtTop);
    top.setProperty('left', null);
    top.setProperty('right', null);
    BussproofsUtil.setProperty(rule, 'inference', childCount);
    parser.configuration.addNode('inference', rule);
    top.Push(rule);
};
function createRule(parser, premise, conclusions, left, right, style, rootAtTop) {
    var upper = parser.create('node', 'mtr', [
        parser.create('node', 'mtd', [
            premise
        ], {
        })
    ], {
    });
    var lower = parser.create('node', 'mtr', [
        parser.create('node', 'mtd', conclusions, {
        })
    ], {
    });
    var rule = parser.create('node', 'mtable', rootAtTop ? [
        lower,
        upper
    ] : [
        upper,
        lower
    ], {
        align: 'top 2',
        rowlines: style,
        framespacing: '0 0'
    });
    BussproofsUtil.setProperty(rule, 'inferenceRule', rootAtTop ? 'up' : 'down');
    var leftLabel, rightLabel;
    if (left) {
        leftLabel = parser.create('node', 'mpadded', [
            left
        ], {
            height: '+.5em',
            width: '+.5em',
            voffset: '-.15em'
        });
        BussproofsUtil.setProperty(leftLabel, 'prooflabel', 'left');
    }
    if (right) {
        rightLabel = parser.create('node', 'mpadded', [
            right
        ], {
            height: '+.5em',
            width: '+.5em',
            voffset: '-.15em'
        });
        BussproofsUtil.setProperty(rightLabel, 'prooflabel', 'right');
    }
    var children, label;
    if (left && right) {
        children = [
            leftLabel,
            rule,
            rightLabel
        ];
        label = 'both';
    } else if (left) {
        children = [
            leftLabel,
            rule
        ];
        label = 'left';
    } else if (right) {
        children = [
            rule,
            rightLabel
        ];
        label = 'right';
    } else return rule;
    rule = parser.create('node', 'mrow', children);
    BussproofsUtil.setProperty(rule, 'labelledRule', label);
    return rule;
}
BussproofsMethods.Label = function(parser, name, side) {
    var top = parser.stack.Top();
    if (top.kind !== 'proofTree') throw new TexError_js_1.default('IllegalProofCommand', 'Proof commands only allowed in prooftree environment.');
    var content = ParseUtil_js_1.default.internalMath(parser, parser.GetArgument(name), 0);
    var label = content.length > 1 ? parser.create('node', 'mrow', content, {
    }) : content[0];
    top.setProperty(side, label);
};
BussproofsMethods.SetLine = function(parser, _name, style, always) {
    var top = parser.stack.Top();
    if (top.kind !== 'proofTree') throw new TexError_js_1.default('IllegalProofCommand', 'Proof commands only allowed in prooftree environment.');
    top.setProperty('currentLine', style);
    if (always) top.setProperty('line', style);
};
BussproofsMethods.RootAtTop = function(parser, _name, where) {
    var top = parser.stack.Top();
    if (top.kind !== 'proofTree') throw new TexError_js_1.default('IllegalProofCommand', 'Proof commands only allowed in prooftree environment.');
    top.setProperty('rootAtTop', where);
};
BussproofsMethods.AxiomF = function(parser, name) {
    var top = parser.stack.Top();
    if (top.kind !== 'proofTree') throw new TexError_js_1.default('IllegalProofCommand', 'Proof commands only allowed in prooftree environment.');
    var line = parseFCenterLine(parser, name);
    BussproofsUtil.setProperty(line, 'axiom', true);
    top.Push(line);
};
function parseFCenterLine(parser, name) {
    var dollar = parser.GetNext();
    if (dollar !== '$') throw new TexError_js_1.default('IllegalUseOfCommand', 'Use of %1 does not match it\'s definition.', name);
    parser.i++;
    var axiom = parser.GetUpTo(name, '$');
    if (axiom.indexOf('\\fCenter') === -1) throw new TexError_js_1.default('IllegalUseOfCommand', 'Missing \\fCenter in %1.', name);
    var _a = __read(axiom.split('\\fCenter'), 2), prem = _a[0], conc = _a[1];
    var premise = new TexParser_js_1.default(prem, parser.stack.env, parser.configuration).mml();
    var conclusion = new TexParser_js_1.default(conc, parser.stack.env, parser.configuration).mml();
    var fcenter = new TexParser_js_1.default('\\fCenter', parser.stack.env, parser.configuration).mml();
    var left = parser.create('node', 'mtd', [
        premise
    ], {
    });
    var middle = parser.create('node', 'mtd', [
        fcenter
    ], {
    });
    var right = parser.create('node', 'mtd', [
        conclusion
    ], {
    });
    var row = parser.create('node', 'mtr', [
        left,
        middle,
        right
    ], {
    });
    var table = parser.create('node', 'mtable', [
        row
    ], {
        columnspacing: '.5ex',
        columnalign: 'center 2'
    });
    BussproofsUtil.setProperty(table, 'sequent', true);
    parser.configuration.addNode('sequent', row);
    return table;
}
BussproofsMethods.FCenter = function(_parser, _name) {
};
BussproofsMethods.InferenceF = function(parser, name, n) {
    var top = parser.stack.Top();
    if (top.kind !== 'proofTree') throw new TexError_js_1.default('IllegalProofCommand', 'Proof commands only allowed in prooftree environment.');
    if (top.Size() < n) throw new TexError_js_1.default('BadProofTree', 'Proof tree badly specified.');
    var rootAtTop = top.getProperty('rootAtTop');
    var childCount = n === 1 && !top.Peek()[0].childNodes.length ? 0 : n;
    var children = [];
    do {
        if (children.length) children.unshift(parser.create('node', 'mtd', [], {
        }));
        children.unshift(parser.create('node', 'mtd', [
            top.Pop()
        ], {
            'rowalign': rootAtTop ? 'top' : 'bottom'
        }));
        n--;
    }while (n > 0)
    var row = parser.create('node', 'mtr', children, {
    });
    var table = parser.create('node', 'mtable', [
        row
    ], {
        framespacing: '0 0'
    });
    var conclusion = parseFCenterLine(parser, name);
    var style = top.getProperty('currentLine');
    if (style !== top.getProperty('line')) top.setProperty('currentLine', top.getProperty('line'));
    var rule = createRule(parser, table, [
        conclusion
    ], top.getProperty('left'), top.getProperty('right'), style, rootAtTop);
    top.setProperty('left', null);
    top.setProperty('right', null);
    BussproofsUtil.setProperty(rule, 'inference', childCount);
    parser.configuration.addNode('inference', rule);
    top.Push(rule);
};
exports.default = BussproofsMethods;

},{"../TexError.js":"7EfV4","../TexParser.js":"RI8aV","../ParseUtil.js":"17LUu","./BussproofsUtil.js":"5mYh0"}],"1f4uU":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CancelConfiguration = exports.CancelMethods = void 0;
var Configuration_js_1 = require("../Configuration.js");
var TexConstants_js_1 = require("../TexConstants.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var EncloseConfiguration_js_1 = require("../enclose/EncloseConfiguration.js");
exports.CancelMethods = {
};
exports.CancelMethods.Cancel = function(parser, name, notation) {
    var attr = parser.GetBrackets(name, '');
    var math = parser.ParseArg(name);
    var def = ParseUtil_js_1.default.keyvalOptions(attr, EncloseConfiguration_js_1.ENCLOSE_OPTIONS);
    def['notation'] = notation;
    parser.Push(parser.create('node', 'menclose', [
        math
    ], def));
};
exports.CancelMethods.CancelTo = function(parser, name) {
    var attr = parser.GetBrackets(name, '');
    var value = parser.ParseArg(name);
    var math = parser.ParseArg(name);
    var def = ParseUtil_js_1.default.keyvalOptions(attr, EncloseConfiguration_js_1.ENCLOSE_OPTIONS);
    def['notation'] = [
        TexConstants_js_1.TexConstant.Notation.UPDIAGONALSTRIKE,
        TexConstants_js_1.TexConstant.Notation.UPDIAGONALARROW,
        TexConstants_js_1.TexConstant.Notation.NORTHEASTARROW
    ].join(' ');
    value = parser.create('node', 'mpadded', [
        value
    ], {
        depth: '-.1em',
        height: '+.1em',
        voffset: '.1em'
    });
    parser.Push(parser.create('node', 'msup', [
        parser.create('node', 'menclose', [
            math
        ], def),
        value
    ]));
};
new SymbolMap_js_1.CommandMap('cancel', {
    cancel: [
        'Cancel',
        TexConstants_js_1.TexConstant.Notation.UPDIAGONALSTRIKE
    ],
    bcancel: [
        'Cancel',
        TexConstants_js_1.TexConstant.Notation.DOWNDIAGONALSTRIKE
    ],
    xcancel: [
        'Cancel',
        TexConstants_js_1.TexConstant.Notation.UPDIAGONALSTRIKE + ' ' + TexConstants_js_1.TexConstant.Notation.DOWNDIAGONALSTRIKE
    ],
    cancelto: 'CancelTo'
}, exports.CancelMethods);
exports.CancelConfiguration = Configuration_js_1.Configuration.create('cancel', {
    handler: {
        macro: [
            'cancel'
        ]
    }
});

},{"../Configuration.js":"2ZNEp","../TexConstants.js":"1hJzZ","../SymbolMap.js":"19zvT","../ParseUtil.js":"17LUu","../enclose/EncloseConfiguration.js":"6Y8ys"}],"6Y8ys":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.EncloseConfiguration = exports.EncloseMethods = exports.ENCLOSE_OPTIONS = void 0;
var Configuration_js_1 = require("../Configuration.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
exports.ENCLOSE_OPTIONS = {
    'data-arrowhead': 1,
    color: 1,
    mathcolor: 1,
    background: 1,
    mathbackground: 1,
    'data-padding': 1,
    'data-thickness': 1
};
exports.EncloseMethods = {
};
exports.EncloseMethods.Enclose = function(parser, name) {
    var notation = parser.GetArgument(name).replace(/,/g, ' ');
    var attr = parser.GetBrackets(name, '');
    var math = parser.ParseArg(name);
    var def = ParseUtil_js_1.default.keyvalOptions(attr, exports.ENCLOSE_OPTIONS);
    def.notation = notation;
    parser.Push(parser.create('node', 'menclose', [
        math
    ], def));
};
new SymbolMap_js_1.CommandMap('enclose', {
    enclose: 'Enclose'
}, exports.EncloseMethods);
exports.EncloseConfiguration = Configuration_js_1.Configuration.create('enclose', {
    handler: {
        macro: [
            'enclose'
        ]
    }
});

},{"../Configuration.js":"2ZNEp","../SymbolMap.js":"19zvT","../ParseUtil.js":"17LUu"}],"4jMfU":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ColorConfiguration = void 0;
var SymbolMap_js_1 = require("../SymbolMap.js");
var Configuration_js_1 = require("../Configuration.js");
var ColorMethods_js_1 = require("./ColorMethods.js");
var ColorUtil_js_1 = require("./ColorUtil.js");
new SymbolMap_js_1.CommandMap('color', {
    color: 'Color',
    textcolor: 'TextColor',
    definecolor: 'DefineColor',
    colorbox: 'ColorBox',
    fcolorbox: 'FColorBox'
}, ColorMethods_js_1.ColorMethods);
var config = function(_config, jax) {
    jax.parseOptions.packageData.set('color', {
        model: new ColorUtil_js_1.ColorModel()
    });
};
exports.ColorConfiguration = Configuration_js_1.Configuration.create('color', {
    handler: {
        macro: [
            'color'
        ]
    },
    options: {
        color: {
            padding: '5px',
            borderWidth: '2px'
        }
    },
    config: config
});

},{"../SymbolMap.js":"19zvT","../Configuration.js":"2ZNEp","./ColorMethods.js":"4CHUs","./ColorUtil.js":"6O1Ek"}],"4CHUs":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ColorMethods = void 0;
var NodeUtil_js_1 = require("../NodeUtil.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
function padding(colorPadding) {
    var pad = "+" + colorPadding;
    var unit = colorPadding.replace(/^.*?([a-z]*)$/, '$1');
    var pad2 = 2 * parseFloat(pad);
    return {
        width: "+" + pad2 + unit,
        height: pad,
        depth: pad,
        lspace: colorPadding
    };
}
exports.ColorMethods = {
};
exports.ColorMethods.Color = function(parser, name) {
    var model = parser.GetBrackets(name, '');
    var colorDef = parser.GetArgument(name);
    var colorModel = parser.configuration.packageData.get('color').model;
    var color = colorModel.getColor(model, colorDef);
    var style = parser.itemFactory.create('style').setProperties({
        styles: {
            mathcolor: color
        }
    });
    parser.stack.env['color'] = color;
    parser.Push(style);
};
exports.ColorMethods.TextColor = function(parser, name) {
    var model = parser.GetBrackets(name, '');
    var colorDef = parser.GetArgument(name);
    var colorModel = parser.configuration.packageData.get('color').model;
    var color = colorModel.getColor(model, colorDef);
    var old = parser.stack.env['color'];
    parser.stack.env['color'] = color;
    var math = parser.ParseArg(name);
    if (old) parser.stack.env['color'] = old;
    else delete parser.stack.env['color'];
    var node = parser.create('node', 'mstyle', [
        math
    ], {
        mathcolor: color
    });
    parser.Push(node);
};
exports.ColorMethods.DefineColor = function(parser, name) {
    var cname = parser.GetArgument(name);
    var model = parser.GetArgument(name);
    var def = parser.GetArgument(name);
    var colorModel = parser.configuration.packageData.get('color').model;
    colorModel.defineColor(model, cname, def);
};
exports.ColorMethods.ColorBox = function(parser, name) {
    var cname = parser.GetArgument(name);
    var math = ParseUtil_js_1.default.internalMath(parser, parser.GetArgument(name));
    var colorModel = parser.configuration.packageData.get('color').model;
    var node = parser.create('node', 'mpadded', math, {
        mathbackground: colorModel.getColor('named', cname)
    });
    NodeUtil_js_1.default.setProperties(node, padding(parser.options.color.padding));
    parser.Push(node);
};
exports.ColorMethods.FColorBox = function(parser, name) {
    var fname = parser.GetArgument(name);
    var cname = parser.GetArgument(name);
    var math = ParseUtil_js_1.default.internalMath(parser, parser.GetArgument(name));
    var options = parser.options.color;
    var colorModel = parser.configuration.packageData.get('color').model;
    var node = parser.create('node', 'mpadded', math, {
        mathbackground: colorModel.getColor('named', cname),
        style: "border: " + options.borderWidth + " solid " + colorModel.getColor('named', fname)
    });
    NodeUtil_js_1.default.setProperties(node, padding(options.padding));
    parser.Push(node);
};

},{"../NodeUtil.js":"If5yR","../ParseUtil.js":"17LUu"}],"6O1Ek":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ColorModel = void 0;
var TexError_js_1 = require("../TexError.js");
var ColorConstants_js_1 = require("./ColorConstants.js");
var ColorModelProcessors = new Map();
var ColorModel = function() {
    function ColorModel1() {
        this.userColors = new Map();
    }
    ColorModel1.prototype.normalizeColor = function(model, def) {
        if (!model || model === 'named') return def;
        if (ColorModelProcessors.has(model)) {
            var modelProcessor = ColorModelProcessors.get(model);
            return modelProcessor(def);
        }
        throw new TexError_js_1.default('UndefinedColorModel', 'Color model \'%1\' not defined', model);
    };
    ColorModel1.prototype.getColor = function(model, def) {
        if (!model || model === 'named') return this.getColorByName(def);
        return this.normalizeColor(model, def);
    };
    ColorModel1.prototype.getColorByName = function(name) {
        if (this.userColors.has(name)) return this.userColors.get(name);
        if (ColorConstants_js_1.COLORS.has(name)) return ColorConstants_js_1.COLORS.get(name);
        return name;
    };
    ColorModel1.prototype.defineColor = function(model, name, def) {
        var normalized = this.normalizeColor(model, def);
        this.userColors.set(name, normalized);
    };
    return ColorModel1;
}();
exports.ColorModel = ColorModel;
ColorModelProcessors.set('rgb', function(rgb) {
    var e_1, _a;
    var rgbParts = rgb.trim().split(/\s*,\s*/);
    var RGB = '#';
    if (rgbParts.length !== 3) throw new TexError_js_1.default('ModelArg1', 'Color values for the %1 model require 3 numbers', 'rgb');
    try {
        for(var rgbParts_1 = __values(rgbParts), rgbParts_1_1 = rgbParts_1.next(); !rgbParts_1_1.done; rgbParts_1_1 = rgbParts_1.next()){
            var rgbPart = rgbParts_1_1.value;
            if (!rgbPart.match(/^(\d+(\.\d*)?|\.\d+)$/)) throw new TexError_js_1.default('InvalidDecimalNumber', 'Invalid decimal number');
            var n = parseFloat(rgbPart);
            if (n < 0 || n > 1) throw new TexError_js_1.default('ModelArg2', 'Color values for the %1 model must be between %2 and %3', 'rgb', '0', '1');
            var pn = Math.floor(n * 255).toString(16);
            if (pn.length < 2) pn = '0' + pn;
            RGB += pn;
        }
    } catch (e_1_1) {
        e_1 = {
            error: e_1_1
        };
    } finally{
        try {
            if (rgbParts_1_1 && !rgbParts_1_1.done && (_a = rgbParts_1.return)) _a.call(rgbParts_1);
        } finally{
            if (e_1) throw e_1.error;
        }
    }
    return RGB;
});
ColorModelProcessors.set('RGB', function(rgb) {
    var e_2, _a;
    var rgbParts = rgb.trim().split(/\s*,\s*/);
    var RGB = '#';
    if (rgbParts.length !== 3) throw new TexError_js_1.default('ModelArg1', 'Color values for the %1 model require 3 numbers', 'RGB');
    try {
        for(var rgbParts_2 = __values(rgbParts), rgbParts_2_1 = rgbParts_2.next(); !rgbParts_2_1.done; rgbParts_2_1 = rgbParts_2.next()){
            var rgbPart = rgbParts_2_1.value;
            if (!rgbPart.match(/^\d+$/)) throw new TexError_js_1.default('InvalidNumber', 'Invalid number');
            var n = parseInt(rgbPart);
            if (n > 255) throw new TexError_js_1.default('ModelArg2', 'Color values for the %1 model must be between %2 and %3', 'RGB', '0', '255');
            var pn = n.toString(16);
            if (pn.length < 2) pn = '0' + pn;
            RGB += pn;
        }
    } catch (e_2_1) {
        e_2 = {
            error: e_2_1
        };
    } finally{
        try {
            if (rgbParts_2_1 && !rgbParts_2_1.done && (_a = rgbParts_2.return)) _a.call(rgbParts_2);
        } finally{
            if (e_2) throw e_2.error;
        }
    }
    return RGB;
});
ColorModelProcessors.set('gray', function(gray) {
    if (!gray.match(/^\s*(\d+(\.\d*)?|\.\d+)\s*$/)) throw new TexError_js_1.default('InvalidDecimalNumber', 'Invalid decimal number');
    var n = parseFloat(gray);
    if (n < 0 || n > 1) throw new TexError_js_1.default('ModelArg2', 'Color values for the %1 model must be between %2 and %3', 'gray', '0', '1');
    var pn = Math.floor(n * 255).toString(16);
    if (pn.length < 2) pn = '0' + pn;
    return "#" + pn + pn + pn;
});

},{"../TexError.js":"7EfV4","./ColorConstants.js":"4uXBe"}],"4uXBe":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.COLORS = void 0;
exports.COLORS = new Map([
    [
        'Apricot',
        '#FBB982'
    ],
    [
        'Aquamarine',
        '#00B5BE'
    ],
    [
        'Bittersweet',
        '#C04F17'
    ],
    [
        'Black',
        '#221E1F'
    ],
    [
        'Blue',
        '#2D2F92'
    ],
    [
        'BlueGreen',
        '#00B3B8'
    ],
    [
        'BlueViolet',
        '#473992'
    ],
    [
        'BrickRed',
        '#B6321C'
    ],
    [
        'Brown',
        '#792500'
    ],
    [
        'BurntOrange',
        '#F7921D'
    ],
    [
        'CadetBlue',
        '#74729A'
    ],
    [
        'CarnationPink',
        '#F282B4'
    ],
    [
        'Cerulean',
        '#00A2E3'
    ],
    [
        'CornflowerBlue',
        '#41B0E4'
    ],
    [
        'Cyan',
        '#00AEEF'
    ],
    [
        'Dandelion',
        '#FDBC42'
    ],
    [
        'DarkOrchid',
        '#A4538A'
    ],
    [
        'Emerald',
        '#00A99D'
    ],
    [
        'ForestGreen',
        '#009B55'
    ],
    [
        'Fuchsia',
        '#8C368C'
    ],
    [
        'Goldenrod',
        '#FFDF42'
    ],
    [
        'Gray',
        '#949698'
    ],
    [
        'Green',
        '#00A64F'
    ],
    [
        'GreenYellow',
        '#DFE674'
    ],
    [
        'JungleGreen',
        '#00A99A'
    ],
    [
        'Lavender',
        '#F49EC4'
    ],
    [
        'LimeGreen',
        '#8DC73E'
    ],
    [
        'Magenta',
        '#EC008C'
    ],
    [
        'Mahogany',
        '#A9341F'
    ],
    [
        'Maroon',
        '#AF3235'
    ],
    [
        'Melon',
        '#F89E7B'
    ],
    [
        'MidnightBlue',
        '#006795'
    ],
    [
        'Mulberry',
        '#A93C93'
    ],
    [
        'NavyBlue',
        '#006EB8'
    ],
    [
        'OliveGreen',
        '#3C8031'
    ],
    [
        'Orange',
        '#F58137'
    ],
    [
        'OrangeRed',
        '#ED135A'
    ],
    [
        'Orchid',
        '#AF72B0'
    ],
    [
        'Peach',
        '#F7965A'
    ],
    [
        'Periwinkle',
        '#7977B8'
    ],
    [
        'PineGreen',
        '#008B72'
    ],
    [
        'Plum',
        '#92268F'
    ],
    [
        'ProcessBlue',
        '#00B0F0'
    ],
    [
        'Purple',
        '#99479B'
    ],
    [
        'RawSienna',
        '#974006'
    ],
    [
        'Red',
        '#ED1B23'
    ],
    [
        'RedOrange',
        '#F26035'
    ],
    [
        'RedViolet',
        '#A1246B'
    ],
    [
        'Rhodamine',
        '#EF559F'
    ],
    [
        'RoyalBlue',
        '#0071BC'
    ],
    [
        'RoyalPurple',
        '#613F99'
    ],
    [
        'RubineRed',
        '#ED017D'
    ],
    [
        'Salmon',
        '#F69289'
    ],
    [
        'SeaGreen',
        '#3FBC9D'
    ],
    [
        'Sepia',
        '#671800'
    ],
    [
        'SkyBlue',
        '#46C5DD'
    ],
    [
        'SpringGreen',
        '#C6DC67'
    ],
    [
        'Tan',
        '#DA9D76'
    ],
    [
        'TealBlue',
        '#00AEB3'
    ],
    [
        'Thistle',
        '#D883B7'
    ],
    [
        'Turquoise',
        '#00B4CE'
    ],
    [
        'Violet',
        '#58429B'
    ],
    [
        'VioletRed',
        '#EF58A0'
    ],
    [
        'White',
        '#FFFFFF'
    ],
    [
        'WildStrawberry',
        '#EE2967'
    ],
    [
        'Yellow',
        '#FFF200'
    ],
    [
        'YellowGreen',
        '#98CC70'
    ],
    [
        'YellowOrange',
        '#FAA21A'
    ], 
]);

},{}],"7aDZm":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ColorConfiguration = exports.ColorV2Methods = void 0;
var SymbolMap_js_1 = require("../SymbolMap.js");
var Configuration_js_1 = require("../Configuration.js");
exports.ColorV2Methods = {
    Color: function(parser, name) {
        var color = parser.GetArgument(name);
        var old = parser.stack.env['color'];
        parser.stack.env['color'] = color;
        var math = parser.ParseArg(name);
        if (old) parser.stack.env['color'] = old;
        else delete parser.stack.env['color'];
        var node = parser.create('node', 'mstyle', [
            math
        ], {
            mathcolor: color
        });
        parser.Push(node);
    }
};
new SymbolMap_js_1.CommandMap('colorv2', {
    color: 'Color'
}, exports.ColorV2Methods);
exports.ColorConfiguration = Configuration_js_1.Configuration.create('colorv2', {
    handler: {
        macro: [
            'colorv2'
        ]
    }
});

},{"../SymbolMap.js":"19zvT","../Configuration.js":"2ZNEp"}],"2qVuO":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ConfigMacrosConfiguration = void 0;
var Configuration_js_1 = require("../Configuration.js");
var Options_js_1 = require("../../../util/Options.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var ParseMethods_js_1 = require("../ParseMethods.js");
var Symbol_js_1 = require("../Symbol.js");
var NewcommandMethods_js_1 = require("../newcommand/NewcommandMethods.js");
var NewcommandItems_js_1 = require("../newcommand/NewcommandItems.js");
var MACROSMAP = 'configmacros-map';
var ENVIRONMENTMAP = 'configmacros-env-map';
function configmacrosInit(config) {
    new SymbolMap_js_1.CommandMap(MACROSMAP, {
    }, {
    });
    new SymbolMap_js_1.EnvironmentMap(ENVIRONMENTMAP, ParseMethods_js_1.default.environment, {
    }, {
    });
    config.append(Configuration_js_1.Configuration.local({
        handler: {
            macro: [
                MACROSMAP
            ],
            environment: [
                ENVIRONMENTMAP
            ]
        },
        priority: 3
    }));
}
function configmacrosConfig(_config, jax) {
    configMacros(jax);
    configEnvironments(jax);
}
function configMacros(jax) {
    var e_1, _a1;
    var handler = jax.parseOptions.handlers.retrieve(MACROSMAP);
    var macros = jax.parseOptions.options.macros;
    try {
        for(var _b = __values(Object.keys(macros)), _c = _b.next(); !_c.done; _c = _b.next()){
            var cs = _c.value;
            var def = typeof macros[cs] === 'string' ? [
                macros[cs]
            ] : macros[cs];
            var macro = Array.isArray(def[2]) ? new Symbol_js_1.Macro(cs, NewcommandMethods_js_1.default.MacroWithTemplate, def.slice(0, 2).concat(def[2])) : new Symbol_js_1.Macro(cs, NewcommandMethods_js_1.default.Macro, def);
            handler.add(cs, macro);
        }
    } catch (e_1_1) {
        e_1 = {
            error: e_1_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a1 = _b.return)) _a1.call(_b);
        } finally{
            if (e_1) throw e_1.error;
        }
    }
}
function configEnvironments(jax) {
    var e_2, _a1;
    var handler = jax.parseOptions.handlers.retrieve(ENVIRONMENTMAP);
    var environments = jax.parseOptions.options.environments;
    try {
        for(var _b = __values(Object.keys(environments)), _c = _b.next(); !_c.done; _c = _b.next()){
            var env = _c.value;
            handler.add(env, new Symbol_js_1.Macro(env, NewcommandMethods_js_1.default.BeginEnv, [
                true
            ].concat(environments[env])));
        }
    } catch (e_2_1) {
        e_2 = {
            error: e_2_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a1 = _b.return)) _a1.call(_b);
        } finally{
            if (e_2) throw e_2.error;
        }
    }
}
exports.ConfigMacrosConfiguration = Configuration_js_1.Configuration.create('configmacros', {
    init: configmacrosInit,
    config: configmacrosConfig,
    items: (_a = {
    }, _a[NewcommandItems_js_1.BeginEnvItem.prototype.kind] = NewcommandItems_js_1.BeginEnvItem, _a),
    options: {
        macros: Options_js_1.expandable({
        }),
        environments: Options_js_1.expandable({
        })
    }
});

},{"../Configuration.js":"2ZNEp","../../../util/Options.js":"3Dh3w","../SymbolMap.js":"19zvT","../ParseMethods.js":"2Nz4D","../Symbol.js":"1afRf","../newcommand/NewcommandMethods.js":"4jWoq","../newcommand/NewcommandItems.js":"3wPUF"}],"4jWoq":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var TexError_js_1 = require("../TexError.js");
var sm = require("../SymbolMap.js");
var BaseMethods_js_1 = require("../base/BaseMethods.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var NewcommandUtil_js_1 = require("./NewcommandUtil.js");
var NewcommandMethods = {
};
NewcommandMethods.NewCommand = function(parser, name) {
    var cs = ParseUtil_js_1.default.trimSpaces(parser.GetArgument(name));
    var n = parser.GetBrackets(name);
    var opt = parser.GetBrackets(name);
    var def = parser.GetArgument(name);
    if (cs.charAt(0) === '\\') cs = cs.substr(1);
    if (!cs.match(/^(.|[a-z]+)$/i)) throw new TexError_js_1.default('IllegalControlSequenceName', 'Illegal control sequence name for %1', name);
    if (n) {
        n = ParseUtil_js_1.default.trimSpaces(n);
        if (!n.match(/^[0-9]+$/)) throw new TexError_js_1.default('IllegalParamNumber', 'Illegal number of parameters specified in %1', name);
    }
    NewcommandUtil_js_1.default.addMacro(parser, cs, NewcommandMethods.Macro, [
        def,
        n,
        opt
    ]);
};
NewcommandMethods.NewEnvironment = function(parser, name) {
    var env = ParseUtil_js_1.default.trimSpaces(parser.GetArgument(name));
    var n = parser.GetBrackets(name);
    var opt = parser.GetBrackets(name);
    var bdef = parser.GetArgument(name);
    var edef = parser.GetArgument(name);
    if (n) {
        n = ParseUtil_js_1.default.trimSpaces(n);
        if (!n.match(/^[0-9]+$/)) throw new TexError_js_1.default('IllegalParamNumber', 'Illegal number of parameters specified in %1', name);
    }
    NewcommandUtil_js_1.default.addEnvironment(parser, env, NewcommandMethods.BeginEnv, [
        true,
        bdef,
        edef,
        n,
        opt
    ]);
};
NewcommandMethods.MacroDef = function(parser, name) {
    var cs = NewcommandUtil_js_1.default.GetCSname(parser, name);
    var params = NewcommandUtil_js_1.default.GetTemplate(parser, name, '\\' + cs);
    var def = parser.GetArgument(name);
    !(params instanceof Array) ? NewcommandUtil_js_1.default.addMacro(parser, cs, NewcommandMethods.Macro, [
        def,
        params
    ]) : NewcommandUtil_js_1.default.addMacro(parser, cs, NewcommandMethods.MacroWithTemplate, [
        def
    ].concat(params));
};
NewcommandMethods.Let = function(parser, name) {
    var cs = NewcommandUtil_js_1.default.GetCSname(parser, name);
    var c = parser.GetNext();
    if (c === '=') {
        parser.i++;
        c = parser.GetNext();
    }
    var handlers = parser.configuration.handlers;
    if (c === '\\') {
        name = NewcommandUtil_js_1.default.GetCSname(parser, name);
        var macro_1 = handlers.get('delimiter').lookup('\\' + name);
        if (macro_1) {
            NewcommandUtil_js_1.default.addDelimiter(parser, '\\' + cs, macro_1.char, macro_1.attributes);
            return;
        }
        var map_1 = handlers.get('macro').applicable(name);
        if (!map_1) return;
        if (map_1 instanceof sm.MacroMap) {
            var macro_2 = map_1.lookup(name);
            NewcommandUtil_js_1.default.addMacro(parser, cs, macro_2.func, macro_2.args, macro_2.symbol);
            return;
        }
        macro_1 = map_1.lookup(name);
        var newArgs = NewcommandUtil_js_1.default.disassembleSymbol(cs, macro_1);
        var method = function(p, _cs) {
            var rest = [];
            for(var _i = 2; _i < arguments.length; _i++)rest[_i - 2] = arguments[_i];
            var symb = NewcommandUtil_js_1.default.assembleSymbol(rest);
            return map_1.parser(p, symb);
        };
        NewcommandUtil_js_1.default.addMacro(parser, cs, method, newArgs);
        return;
    }
    parser.i++;
    var macro = handlers.get('delimiter').lookup(c);
    if (macro) {
        NewcommandUtil_js_1.default.addDelimiter(parser, '\\' + cs, macro.char, macro.attributes);
        return;
    }
    NewcommandUtil_js_1.default.addMacro(parser, cs, NewcommandMethods.Macro, [
        c
    ]);
};
NewcommandMethods.MacroWithTemplate = function(parser, name, text, n) {
    var params = [];
    for(var _i = 4; _i < arguments.length; _i++)params[_i - 4] = arguments[_i];
    var argCount = parseInt(n, 10);
    if (argCount) {
        var args = [];
        parser.GetNext();
        if (params[0] && !NewcommandUtil_js_1.default.MatchParam(parser, params[0])) throw new TexError_js_1.default('MismatchUseDef', 'Use of %1 doesn\'t match its definition', name);
        for(var i = 0; i < argCount; i++)args.push(NewcommandUtil_js_1.default.GetParameter(parser, name, params[i + 1]));
        text = ParseUtil_js_1.default.substituteArgs(parser, args, text);
    }
    parser.string = ParseUtil_js_1.default.addArgs(parser, text, parser.string.slice(parser.i));
    parser.i = 0;
    if ((++parser.macroCount) > parser.configuration.options['maxMacros']) throw new TexError_js_1.default('MaxMacroSub1', "MathJax maximum macro substitution count exceeded; is here a recursive macro call?");
};
NewcommandMethods.BeginEnv = function(parser, begin, bdef, edef, n, def) {
    if (begin.getProperty('end') && parser.stack.env['closing'] === begin.getName()) {
        delete parser.stack.env['closing'];
        var rest = parser.string.slice(parser.i);
        parser.string = edef;
        parser.i = 0;
        parser.Parse();
        parser.string = rest;
        parser.i = 0;
        return parser.itemFactory.create('end').setProperty('name', begin.getName());
    }
    if (n) {
        var args = [];
        if (def != null) {
            var optional = parser.GetBrackets('\\begin{' + begin.getName() + '}');
            args.push(optional == null ? def : optional);
        }
        for(var i = args.length; i < n; i++)args.push(parser.GetArgument('\\begin{' + begin.getName() + '}'));
        bdef = ParseUtil_js_1.default.substituteArgs(parser, args, bdef);
        edef = ParseUtil_js_1.default.substituteArgs(parser, [], edef);
    }
    parser.string = ParseUtil_js_1.default.addArgs(parser, bdef, parser.string.slice(parser.i));
    parser.i = 0;
    return parser.itemFactory.create('beginEnv').setProperty('name', begin.getName());
};
NewcommandMethods.Macro = BaseMethods_js_1.default.Macro;
exports.default = NewcommandMethods;

},{"../TexError.js":"7EfV4","../SymbolMap.js":"19zvT","../base/BaseMethods.js":"1F5Sh","../ParseUtil.js":"17LUu","./NewcommandUtil.js":"kfC4S"}],"kfC4S":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var ParseUtil_js_1 = require("../ParseUtil.js");
var TexError_js_1 = require("../TexError.js");
var Symbol_js_1 = require("../Symbol.js");
var NewcommandUtil;
(function(NewcommandUtil1) {
    function disassembleSymbol(name, symbol) {
        var newArgs = [
            name,
            symbol.char
        ];
        if (symbol.attributes) for(var key in symbol.attributes){
            newArgs.push(key);
            newArgs.push(symbol.attributes[key]);
        }
        return newArgs;
    }
    NewcommandUtil1.disassembleSymbol = disassembleSymbol;
    function assembleSymbol(args) {
        var name = args[0];
        var char = args[1];
        var attrs = {
        };
        for(var i = 2; i < args.length; i = i + 2)attrs[args[i]] = args[i + 1];
        return new Symbol_js_1.Symbol(name, char, attrs);
    }
    NewcommandUtil1.assembleSymbol = assembleSymbol;
    function GetCSname(parser, cmd) {
        var c = parser.GetNext();
        if (c !== '\\') throw new TexError_js_1.default('MissingCS', '%1 must be followed by a control sequence', cmd);
        var cs = ParseUtil_js_1.default.trimSpaces(parser.GetArgument(cmd));
        return cs.substr(1);
    }
    NewcommandUtil1.GetCSname = GetCSname;
    function GetTemplate(parser, cmd, cs) {
        var c = parser.GetNext();
        var params = [];
        var n = 0;
        var i = parser.i;
        while(parser.i < parser.string.length){
            c = parser.GetNext();
            if (c === '#') {
                if (i !== parser.i) params[n] = parser.string.substr(i, parser.i - i);
                c = parser.string.charAt(++parser.i);
                if (!c.match(/^[1-9]$/)) throw new TexError_js_1.default('CantUseHash2', 'Illegal use of # in template for %1', cs);
                if (parseInt(c) !== ++n) throw new TexError_js_1.default('SequentialParam', 'Parameters for %1 must be numbered sequentially', cs);
                i = parser.i + 1;
            } else if (c === '{') {
                if (i !== parser.i) params[n] = parser.string.substr(i, parser.i - i);
                if (params.length > 0) return [
                    n.toString()
                ].concat(params);
                else return n;
            }
            parser.i++;
        }
        throw new TexError_js_1.default('MissingReplacementString', 'Missing replacement string for definition of %1', cmd);
    }
    NewcommandUtil1.GetTemplate = GetTemplate;
    function GetParameter(parser, name, param) {
        if (param == null) return parser.GetArgument(name);
        var i = parser.i;
        var j = 0;
        var hasBraces = 0;
        while(parser.i < parser.string.length){
            var c = parser.string.charAt(parser.i);
            if (c === '{') {
                if (parser.i === i) hasBraces = 1;
                parser.GetArgument(name);
                j = parser.i - i;
            } else if (MatchParam(parser, param)) {
                if (hasBraces) {
                    i++;
                    j -= 2;
                }
                return parser.string.substr(i, j);
            } else if (c === '\\') {
                parser.i++;
                j++;
                hasBraces = 0;
                var match = parser.string.substr(parser.i).match(/[a-z]+|./i);
                if (match) {
                    parser.i += match[0].length;
                    j = parser.i - i;
                }
            } else {
                parser.i++;
                j++;
                hasBraces = 0;
            }
        }
        throw new TexError_js_1.default('RunawayArgument', 'Runaway argument for %1?', name);
    }
    NewcommandUtil1.GetParameter = GetParameter;
    function MatchParam(parser, param) {
        if (parser.string.substr(parser.i, param.length) !== param) return 0;
        if (param.match(/\\[a-z]+$/i) && parser.string.charAt(parser.i + param.length).match(/[a-z]/i)) return 0;
        parser.i += param.length;
        return 1;
    }
    NewcommandUtil1.MatchParam = MatchParam;
    function addDelimiter(parser, cs, char, attr) {
        var handlers = parser.configuration.handlers;
        var handler = handlers.retrieve(NewcommandUtil1.NEW_DELIMITER);
        handler.add(cs, new Symbol_js_1.Symbol(cs, char, attr));
    }
    NewcommandUtil1.addDelimiter = addDelimiter;
    function addMacro(parser, cs, func, attr, symbol) {
        if (symbol === void 0) symbol = '';
        var handlers = parser.configuration.handlers;
        var handler = handlers.retrieve(NewcommandUtil1.NEW_COMMAND);
        handler.add(cs, new Symbol_js_1.Macro(symbol ? symbol : cs, func, attr));
    }
    NewcommandUtil1.addMacro = addMacro;
    function addEnvironment(parser, env, func, attr) {
        var handlers = parser.configuration.handlers;
        var handler = handlers.retrieve(NewcommandUtil1.NEW_ENVIRONMENT);
        handler.add(env, new Symbol_js_1.Macro(env, func, attr));
    }
    NewcommandUtil1.addEnvironment = addEnvironment;
    NewcommandUtil1.NEW_DELIMITER = 'new-Delimiter';
    NewcommandUtil1.NEW_COMMAND = 'new-Command';
    NewcommandUtil1.NEW_ENVIRONMENT = 'new-Environment';
})(NewcommandUtil || (NewcommandUtil = {
}));
exports.default = NewcommandUtil;

},{"../ParseUtil.js":"17LUu","../TexError.js":"7EfV4","../Symbol.js":"1afRf"}],"3wPUF":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BeginEnvItem = void 0;
var TexError_js_1 = require("../TexError.js");
var StackItem_js_1 = require("../StackItem.js");
var BeginEnvItem1 = function(_super) {
    __extends(BeginEnvItem2, _super);
    function BeginEnvItem2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(BeginEnvItem2.prototype, "kind", {
        get: function() {
            return 'beginEnv';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BeginEnvItem2.prototype, "isOpen", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    BeginEnvItem2.prototype.checkItem = function(item) {
        if (item.isKind('end')) {
            if (item.getName() !== this.getName()) throw new TexError_js_1.default('EnvBadEnd', '\\begin{%1} ended with \\end{%2}', this.getName(), item.getName());
            return [
                [
                    this.factory.create('mml', this.toMml())
                ],
                true
            ];
        }
        if (item.isKind('stop')) throw new TexError_js_1.default('EnvMissingEnd', 'Missing \\end{%1}', this.getName());
        return _super.prototype.checkItem.call(this, item);
    };
    return BeginEnvItem2;
}(StackItem_js_1.BaseItem);
exports.BeginEnvItem = BeginEnvItem1;

},{"../TexError.js":"7EfV4","../StackItem.js":"5A1jm"}],"3AwGO":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ExtpfeilConfiguration = exports.ExtpfeilMethods = void 0;
var Configuration_js_1 = require("../Configuration.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var AmsMethods_js_1 = require("../ams/AmsMethods.js");
var NewcommandUtil_js_1 = require("../newcommand/NewcommandUtil.js");
var NewcommandConfiguration_js_1 = require("../newcommand/NewcommandConfiguration.js");
var TexError_js_1 = require("../TexError.js");
exports.ExtpfeilMethods = {
};
exports.ExtpfeilMethods.xArrow = AmsMethods_js_1.AmsMethods.xArrow;
exports.ExtpfeilMethods.NewExtArrow = function(parser, name) {
    var cs = parser.GetArgument(name);
    var space = parser.GetArgument(name);
    var chr = parser.GetArgument(name);
    if (!cs.match(/^\\([a-z]+|.)$/i)) throw new TexError_js_1.default('NewextarrowArg1', 'First argument to %1 must be a control sequence name', name);
    if (!space.match(/^(\d+),(\d+)$/)) throw new TexError_js_1.default('NewextarrowArg2', 'Second argument to %1 must be two integers separated by a comma', name);
    if (!chr.match(/^(\d+|0x[0-9A-F]+)$/i)) throw new TexError_js_1.default('NewextarrowArg3', 'Third argument to %1 must be a unicode character number', name);
    cs = cs.substr(1);
    var spaces = space.split(',');
    NewcommandUtil_js_1.default.addMacro(parser, cs, exports.ExtpfeilMethods.xArrow, [
        parseInt(chr),
        parseInt(spaces[0]),
        parseInt(spaces[1])
    ]);
};
new SymbolMap_js_1.CommandMap('extpfeil', {
    xtwoheadrightarrow: [
        'xArrow',
        8608,
        12,
        16
    ],
    xtwoheadleftarrow: [
        'xArrow',
        8606,
        17,
        13
    ],
    xmapsto: [
        'xArrow',
        8614,
        6,
        7
    ],
    xlongequal: [
        'xArrow',
        61,
        7,
        7
    ],
    xtofrom: [
        'xArrow',
        8644,
        12,
        12
    ],
    Newextarrow: 'NewExtArrow'
}, exports.ExtpfeilMethods);
var init = function(config) {
    NewcommandConfiguration_js_1.NewcommandConfiguration.init(config);
};
exports.ExtpfeilConfiguration = Configuration_js_1.Configuration.create('extpfeil', {
    handler: {
        macro: [
            'extpfeil'
        ]
    },
    init: init
});

},{"../Configuration.js":"2ZNEp","../SymbolMap.js":"19zvT","../ams/AmsMethods.js":"Hvojo","../newcommand/NewcommandUtil.js":"kfC4S","../newcommand/NewcommandConfiguration.js":"1uX21","../TexError.js":"7EfV4"}],"1uX21":[function(require,module,exports) {
"use strict";
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.NewcommandConfiguration = void 0;
var Configuration_js_1 = require("../Configuration.js");
var NewcommandItems_js_1 = require("./NewcommandItems.js");
var NewcommandUtil_js_1 = require("./NewcommandUtil.js");
require("./NewcommandMappings.js");
var ParseMethods_js_1 = require("../ParseMethods.js");
var sm = require("../SymbolMap.js");
var init = function(config) {
    new sm.DelimiterMap(NewcommandUtil_js_1.default.NEW_DELIMITER, ParseMethods_js_1.default.delimiter, {
    });
    new sm.CommandMap(NewcommandUtil_js_1.default.NEW_COMMAND, {
    }, {
    });
    new sm.EnvironmentMap(NewcommandUtil_js_1.default.NEW_ENVIRONMENT, ParseMethods_js_1.default.environment, {
    }, {
    });
    config.append(Configuration_js_1.Configuration.local({
        handler: {
            character: [],
            delimiter: [
                NewcommandUtil_js_1.default.NEW_DELIMITER
            ],
            macro: [
                NewcommandUtil_js_1.default.NEW_DELIMITER,
                NewcommandUtil_js_1.default.NEW_COMMAND
            ],
            environment: [
                NewcommandUtil_js_1.default.NEW_ENVIRONMENT
            ]
        },
        priority: -1
    }));
};
exports.NewcommandConfiguration = Configuration_js_1.Configuration.create('newcommand', {
    handler: {
        macro: [
            'Newcommand-macros'
        ]
    },
    items: (_a = {
    }, _a[NewcommandItems_js_1.BeginEnvItem.prototype.kind] = NewcommandItems_js_1.BeginEnvItem, _a),
    options: {
        maxMacros: 1000
    },
    init: init
});

},{"../Configuration.js":"2ZNEp","./NewcommandItems.js":"3wPUF","./NewcommandUtil.js":"kfC4S","./NewcommandMappings.js":"6Hw6W","../ParseMethods.js":"2Nz4D","../SymbolMap.js":"19zvT"}],"6Hw6W":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var NewcommandMethods_js_1 = require("./NewcommandMethods.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
new SymbolMap_js_1.CommandMap('Newcommand-macros', {
    newcommand: 'NewCommand',
    renewcommand: 'NewCommand',
    newenvironment: 'NewEnvironment',
    renewenvironment: 'NewEnvironment',
    def: 'MacroDef',
    'let': 'Let'
}, NewcommandMethods_js_1.default);

},{"./NewcommandMethods.js":"4jWoq","../SymbolMap.js":"19zvT"}],"5tmBm":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.HtmlConfiguration = void 0;
var Configuration_js_1 = require("../Configuration.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var HtmlMethods_js_1 = require("./HtmlMethods.js");
new SymbolMap_js_1.CommandMap('html_macros', {
    href: 'Href',
    'class': 'Class',
    style: 'Style',
    cssId: 'Id'
}, HtmlMethods_js_1.default);
exports.HtmlConfiguration = Configuration_js_1.Configuration.create('html', {
    handler: {
        macro: [
            'html_macros'
        ]
    }
});

},{"../Configuration.js":"2ZNEp","../SymbolMap.js":"19zvT","./HtmlMethods.js":"2JAor"}],"2JAor":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var NodeUtil_js_1 = require("../NodeUtil.js");
var HtmlMethods = {
};
HtmlMethods.Href = function(parser, name) {
    var url = parser.GetArgument(name);
    var arg = GetArgumentMML(parser, name);
    NodeUtil_js_1.default.setAttribute(arg, 'href', url);
    parser.Push(arg);
};
HtmlMethods.Class = function(parser, name) {
    var CLASS = parser.GetArgument(name);
    var arg = GetArgumentMML(parser, name);
    var oldClass = NodeUtil_js_1.default.getAttribute(arg, 'class');
    if (oldClass) CLASS = oldClass + ' ' + CLASS;
    NodeUtil_js_1.default.setAttribute(arg, 'class', CLASS);
    parser.Push(arg);
};
HtmlMethods.Style = function(parser, name) {
    var style = parser.GetArgument(name);
    var arg = GetArgumentMML(parser, name);
    var oldStyle = NodeUtil_js_1.default.getAttribute(arg, 'style');
    if (oldStyle) {
        if (style.charAt(style.length - 1) !== ';') style += ';';
        style = oldStyle + ' ' + style;
    }
    NodeUtil_js_1.default.setAttribute(arg, 'style', style);
    parser.Push(arg);
};
HtmlMethods.Id = function(parser, name) {
    var ID = parser.GetArgument(name);
    var arg = GetArgumentMML(parser, name);
    NodeUtil_js_1.default.setAttribute(arg, 'id', ID);
    parser.Push(arg);
};
var GetArgumentMML = function(parser, name) {
    var arg = parser.ParseArg(name);
    if (!NodeUtil_js_1.default.isInferred(arg)) return arg;
    var children = NodeUtil_js_1.default.getChildren(arg);
    if (children.length === 1) return children[0];
    var mrow = parser.create('node', 'mrow');
    NodeUtil_js_1.default.copyChildren(arg, mrow);
    NodeUtil_js_1.default.copyAttributes(arg, mrow);
    return mrow;
};
exports.default = HtmlMethods;

},{"../NodeUtil.js":"If5yR"}],"36VJl":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MhchemConfiguration = void 0;
var Configuration_js_1 = require("../Configuration.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var TexError_js_1 = require("../TexError.js");
var BaseMethods_js_1 = require("../base/BaseMethods.js");
var AmsMethods_js_1 = require("../ams/AmsMethods.js");
var mhchemParser_js_1 = require("./mhchemparser/mhchemParser.js");
var MhchemMethods = {
};
MhchemMethods.Macro = BaseMethods_js_1.default.Macro;
MhchemMethods.xArrow = AmsMethods_js_1.AmsMethods.xArrow;
MhchemMethods.Machine = function(parser, name, machine) {
    try {
        var arg = parser.GetArgument(name);
        var tex = mhchemParser_js_1.mhchemParser.toTex(arg, machine);
        parser.string = tex + parser.string.substr(parser.i);
        parser.i = 0;
    } catch (err) {
        throw new TexError_js_1.default(err[0], err[1], err.slice(2));
    }
};
new SymbolMap_js_1.CommandMap('mhchem', {
    ce: [
        'Machine',
        'ce'
    ],
    pu: [
        'Machine',
        'pu'
    ],
    longrightleftharpoons: [
        'Macro',
        '\\stackrel{\\textstyle{-}\\!\\!{\\rightharpoonup}}{\\smash{{\\leftharpoondown}\\!\\!{-}}}'
    ],
    longRightleftharpoons: [
        'Macro',
        '\\stackrel{\\textstyle{-}\\!\\!{\\rightharpoonup}}{\\smash{\\leftharpoondown}}'
    ],
    longLeftrightharpoons: [
        'Macro',
        '\\stackrel{\\textstyle\\vphantom{{-}}{\\rightharpoonup}}{\\smash{{\\leftharpoondown}\\!\\!{-}}}'
    ],
    longleftrightarrows: [
        'Macro',
        '\\stackrel{\\longrightarrow}{\\smash{\\longleftarrow}\\Rule{0px}{.25em}{0px}}'
    ],
    tripledash: [
        'Macro',
        '\\vphantom{-}\\raise2mu{\\kern2mu\\tiny\\text{-}\\kern1mu\\text{-}\\kern1mu\\text{-}\\kern2mu}'
    ],
    xrightarrow: [
        'xArrow',
        8594,
        5,
        6
    ],
    xleftarrow: [
        'xArrow',
        8592,
        7,
        3
    ],
    xleftrightarrow: [
        'xArrow',
        8596,
        6,
        6
    ],
    xrightleftharpoons: [
        'xArrow',
        8652,
        5,
        7
    ],
    xRightleftharpoons: [
        'xArrow',
        8652,
        5,
        7
    ],
    xLeftrightharpoons: [
        'xArrow',
        8652,
        5,
        7
    ]
}, MhchemMethods);
exports.MhchemConfiguration = Configuration_js_1.Configuration.create('mhchem', {
    handler: {
        macro: [
            'mhchem'
        ]
    }
});

},{"../Configuration.js":"2ZNEp","../SymbolMap.js":"19zvT","../TexError.js":"7EfV4","../base/BaseMethods.js":"1F5Sh","../ams/AmsMethods.js":"Hvojo","./mhchemparser/mhchemParser.js":"1jt1l"}],"1jt1l":[function(require,module,exports) {
"use strict";
/*!
 *************************************************************************
 *
 *  mhchemParser.ts
 *  4.0.0
 *
 *  Parser for the \ce command and \pu command for MathJax and Co.
 *
 *  mhchem's \ce is a tool for writing beautiful chemical equations easily.
 *  mhchem's \pu is a tool for writing physical units easily.
 *
 *  ----------------------------------------------------------------------
 *
 *  Copyright (c) 2015-2021 Martin Hensel
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *
 *  ----------------------------------------------------------------------
 *
 *  https://github.com/mhchem/mhchemParser
 *
 */ Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.mhchemParser = void 0;
var mhchemParser = function() {
    function mhchemParser1() {
    }
    mhchemParser1.toTex = function(input, type) {
        return _mhchemTexify.go(_mhchemParser.go(input, type), type !== "tex");
    };
    return mhchemParser1;
}();
exports.mhchemParser = mhchemParser;
function mhchemCreateTransitions(o) {
    var pattern, state;
    var transitions = {
    };
    for(pattern in o)for(state in o[pattern]){
        var stateArray = state.split("|");
        o[pattern][state].stateArray = stateArray;
        for(var i = 0; i < stateArray.length; i++)transitions[stateArray[i]] = [];
    }
    for(pattern in o)for(state in o[pattern]){
        var stateArray = o[pattern][state].stateArray || [];
        for(var i = 0; i < stateArray.length; i++){
            var p = o[pattern][state];
            p.action_ = [].concat(p.action_);
            for(var k = 0; k < p.action_.length; k++)if (typeof p.action_[k] === "string") p.action_[k] = {
                type_: p.action_[k]
            };
            var patternArray = pattern.split("|");
            for(var j = 0; j < patternArray.length; j++)if (stateArray[i] === '*') {
                var t = void 0;
                for(t in transitions)transitions[t].push({
                    pattern: patternArray[j],
                    task: p
                });
            } else transitions[stateArray[i]].push({
                pattern: patternArray[j],
                task: p
            });
        }
    }
    return transitions;
}
var _mhchemParser = {
    go: function(input, stateMachine) {
        if (!input) return [];
        if (stateMachine === undefined) stateMachine = 'ce';
        var state = '0';
        var buffer = {
        };
        buffer['parenthesisLevel'] = 0;
        input = input.replace(/\n/g, " ");
        input = input.replace(/[\u2212\u2013\u2014\u2010]/g, "-");
        input = input.replace(/[\u2026]/g, "...");
        var lastInput;
        var watchdog = 10;
        var output = [];
        while(true){
            if (lastInput !== input) {
                watchdog = 10;
                lastInput = input;
            } else watchdog--;
            var machine = _mhchemParser.stateMachines[stateMachine];
            var t = machine.transitions[state] || machine.transitions['*'];
            iterateTransitions: for(var i = 0; i < t.length; i++){
                var matches = _mhchemParser.patterns.match_(t[i].pattern, input);
                if (matches) {
                    var task = t[i].task;
                    for(var iA = 0; iA < task.action_.length; iA++){
                        var o = void 0;
                        if (machine.actions[task.action_[iA].type_]) o = machine.actions[task.action_[iA].type_](buffer, matches.match_, task.action_[iA].option);
                        else if (_mhchemParser.actions[task.action_[iA].type_]) o = _mhchemParser.actions[task.action_[iA].type_](buffer, matches.match_, task.action_[iA].option);
                        else throw [
                            "MhchemBugA",
                            "mhchem bug A. Please report. (" + task.action_[iA].type_ + ")"
                        ];
                        _mhchemParser.concatArray(output, o);
                    }
                    state = task.nextState || state;
                    if (input.length > 0) {
                        if (!task.revisit) input = matches.remainder;
                        if (!task.toContinue) break iterateTransitions;
                    } else return output;
                }
            }
            if (watchdog <= 0) throw [
                "MhchemBugU",
                "mhchem bug U. Please report."
            ];
        }
    },
    concatArray: function(a, b) {
        if (b) {
            if (Array.isArray(b)) for(var iB = 0; iB < b.length; iB++)a.push(b[iB]);
            else a.push(b);
        }
    },
    patterns: {
        patterns: {
            'empty': /^$/,
            'else': /^./,
            'else2': /^./,
            'space': /^\s/,
            'space A': /^\s(?=[A-Z\\$])/,
            'space$': /^\s$/,
            'a-z': /^[a-z]/,
            'x': /^x/,
            'x$': /^x$/,
            'i$': /^i$/,
            'letters': /^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,
            '\\greek': /^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,
            'one lowercase latin letter $': /^(?:([a-z])(?:$|[^a-zA-Z]))$/,
            '$one lowercase latin letter$ $': /^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,
            'one lowercase greek letter $': /^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,
            'digits': /^[0-9]+/,
            '-9.,9': /^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,
            '-9.,9 no missing 0': /^[+\-]?[0-9]+(?:[.,][0-9]+)?/,
            '(-)(9.,9)(e)(99)': function(input) {
                var match = input.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);
                if (match && match[0]) return {
                    match_: match.slice(1),
                    remainder: input.substr(match[0].length)
                };
                return null;
            },
            '(-)(9)^(-9)': /^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/,
            'state of aggregation $': function(input) {
                var a = _mhchemParser.patterns.findObserveGroups(input, "", /^\([a-z]{1,3}(?=[\),])/, ")", "");
                if (a && a.remainder.match(/^($|[\s,;\)\]\}])/)) return a;
                var match = input.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);
                if (match) return {
                    match_: match[0],
                    remainder: input.substr(match[0].length)
                };
                return null;
            },
            '_{(state of aggregation)}$': /^_\{(\([a-z]{1,3}\))\}/,
            '{[(': /^(?:\\\{|\[|\()/,
            ')]}': /^(?:\)|\]|\\\})/,
            ', ': /^[,;]\s*/,
            ',': /^[,;]/,
            '.': /^[.]/,
            '. __* ': /^([.\u22C5\u00B7\u2022]|[*])\s*/,
            '...': /^\.\.\.(?=$|[^.])/,
            '^{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "^{", "", "", "}");
            },
            '^($...$)': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "^", "$", "$", "");
            },
            '^a': /^\^([0-9]+|[^\\_])/,
            '^\\x{}{}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "^", /^\\[a-zA-Z]+\{/, "}", "", "", "{", "}", "", true);
            },
            '^\\x{}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "^", /^\\[a-zA-Z]+\{/, "}", "");
            },
            '^\\x': /^\^(\\[a-zA-Z]+)\s*/,
            '^(-1)': /^\^(-?\d+)/,
            '\'': /^'/,
            '_{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "_{", "", "", "}");
            },
            '_($...$)': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "_", "$", "$", "");
            },
            '_9': /^_([+\-]?[0-9]+|[^\\])/,
            '_\\x{}{}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "_", /^\\[a-zA-Z]+\{/, "}", "", "", "{", "}", "", true);
            },
            '_\\x{}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "_", /^\\[a-zA-Z]+\{/, "}", "");
            },
            '_\\x': /^_(\\[a-zA-Z]+)\s*/,
            '^_': /^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,
            '{}': /^\{\}/,
            '{...}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "", "{", "}", "");
            },
            '{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "{", "", "", "}");
            },
            '$...$': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "", "$", "$", "");
            },
            '${(...)}$__$(...)$': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "${", "", "", "}$") || _mhchemParser.patterns.findObserveGroups(input, "$", "", "", "$");
            },
            '=<>': /^[=<>]/,
            '#': /^[#\u2261]/,
            '+': /^\+/,
            '-$': /^-(?=[\s_},;\]/]|$|\([a-z]+\))/,
            '-9': /^-(?=[0-9])/,
            '- orbital overlap': /^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,
            '-': /^-/,
            'pm-operator': /^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,
            'operator': /^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,
            'arrowUpDown': /^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,
            '\\bond{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "\\bond{", "", "", "}");
            },
            '->': /^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,
            'CMT': /^[CMT](?=\[)/,
            '[(...)]': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "[", "", "", "]");
            },
            '1st-level escape': /^(&|\\\\|\\hline)\s*/,
            '\\,': /^(?:\\[,\ ;:])/,
            '\\x{}{}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "", /^\\[a-zA-Z]+\{/, "}", "", "", "{", "}", "", true);
            },
            '\\x{}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "", /^\\[a-zA-Z]+\{/, "}", "");
            },
            '\\ca': /^\\ca(?:\s+|(?![a-zA-Z]))/,
            '\\x': /^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,
            'orbital': /^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,
            'others': /^[\/~|]/,
            '\\frac{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "\\frac{", "", "", "}", "{", "", "", "}");
            },
            '\\overset{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "\\overset{", "", "", "}", "{", "", "", "}");
            },
            '\\underset{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "\\underset{", "", "", "}", "{", "", "", "}");
            },
            '\\underbrace{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "\\underbrace{", "", "", "}_", "{", "", "", "}");
            },
            '\\color{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "\\color{", "", "", "}");
            },
            '\\color{(...)}{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "\\color{", "", "", "}", "{", "", "", "}") || _mhchemParser.patterns.findObserveGroups(input, "\\color", "\\", "", /^(?=\{)/, "{", "", "", "}");
            },
            '\\ce{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "\\ce{", "", "", "}");
            },
            '\\pu{(...)}': function(input) {
                return _mhchemParser.patterns.findObserveGroups(input, "\\pu{", "", "", "}");
            },
            'oxidation$': /^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,
            'd-oxidation$': /^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,
            'roman numeral': /^[IVX]+/,
            '1/2$': /^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,
            'amount': function(input) {
                var match;
                match = input.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/);
                if (match) return {
                    match_: match[0],
                    remainder: input.substr(match[0].length)
                };
                var a = _mhchemParser.patterns.findObserveGroups(input, "", "$", "$", "");
                if (a) {
                    match = a.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/);
                    if (match) return {
                        match_: match[0],
                        remainder: input.substr(match[0].length)
                    };
                }
                return null;
            },
            'amount2': function(input) {
                return this['amount'](input);
            },
            '(KV letters),': /^(?:[A-Z][a-z]{0,2}|i)(?=,)/,
            'formula$': function(input) {
                if (input.match(/^\([a-z]+\)$/)) return null;
                var match = input.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);
                if (match) return {
                    match_: match[0],
                    remainder: input.substr(match[0].length)
                };
                return null;
            },
            'uprightEntities': /^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,
            '/': /^\s*(\/)\s*/,
            '//': /^\s*(\/\/)\s*/,
            '*': /^\s*[*.]\s*/
        },
        findObserveGroups: function(input, begExcl, begIncl, endIncl, endExcl, beg2Excl, beg2Incl, end2Incl, end2Excl, combine) {
            var _match = function(input1, pattern) {
                if (typeof pattern === "string") {
                    if (input1.indexOf(pattern) !== 0) return null;
                    return pattern;
                } else {
                    var match_1 = input1.match(pattern);
                    if (!match_1) return null;
                    return match_1[0];
                }
            };
            var _findObserveGroups = function(input1, i, endChars) {
                var braces = 0;
                while(i < input1.length){
                    var a = input1.charAt(i);
                    var match_2 = _match(input1.substr(i), endChars);
                    if (match_2 !== null && braces === 0) return {
                        endMatchBegin: i,
                        endMatchEnd: i + match_2.length
                    };
                    else if (a === "{") braces++;
                    else if (a === "}") {
                        if (braces === 0) throw [
                            "ExtraCloseMissingOpen",
                            "Extra close brace or missing open brace"
                        ];
                        else braces--;
                    }
                    i++;
                }
                if (braces > 0) return null;
                return null;
            };
            var match = _match(input, begExcl);
            if (match === null) return null;
            input = input.substr(match.length);
            match = _match(input, begIncl);
            if (match === null) return null;
            var e = _findObserveGroups(input, match.length, endIncl || endExcl);
            if (e === null) return null;
            var match1 = input.substring(0, endIncl ? e.endMatchEnd : e.endMatchBegin);
            if (!(beg2Excl || beg2Incl)) return {
                match_: match1,
                remainder: input.substr(e.endMatchEnd)
            };
            else {
                var group2 = this.findObserveGroups(input.substr(e.endMatchEnd), beg2Excl, beg2Incl, end2Incl, end2Excl);
                if (group2 === null) return null;
                var matchRet = [
                    match1,
                    group2.match_
                ];
                return {
                    match_: combine ? matchRet.join("") : matchRet,
                    remainder: group2.remainder
                };
            }
        },
        match_: function(m, input) {
            var pattern = _mhchemParser.patterns.patterns[m];
            if (pattern === undefined) throw [
                "MhchemBugP",
                "mhchem bug P. Please report. (" + m + ")"
            ];
            else if (typeof pattern === "function") return _mhchemParser.patterns.patterns[m](input);
            else {
                var match = input.match(pattern);
                if (match) {
                    if (match.length > 2) return {
                        match_: match.slice(1),
                        remainder: input.substr(match[0].length)
                    };
                    else return {
                        match_: match[1] || match[0],
                        remainder: input.substr(match[0].length)
                    };
                }
                return null;
            }
        }
    },
    actions: {
        'a=': function(buffer, m) {
            buffer.a = (buffer.a || "") + m;
            return undefined;
        },
        'b=': function(buffer, m) {
            buffer.b = (buffer.b || "") + m;
            return undefined;
        },
        'p=': function(buffer, m) {
            buffer.p = (buffer.p || "") + m;
            return undefined;
        },
        'o=': function(buffer, m) {
            buffer.o = (buffer.o || "") + m;
            return undefined;
        },
        'q=': function(buffer, m) {
            buffer.q = (buffer.q || "") + m;
            return undefined;
        },
        'd=': function(buffer, m) {
            buffer.d = (buffer.d || "") + m;
            return undefined;
        },
        'rm=': function(buffer, m) {
            buffer.rm = (buffer.rm || "") + m;
            return undefined;
        },
        'text=': function(buffer, m) {
            buffer.text_ = (buffer.text_ || "") + m;
            return undefined;
        },
        'insert': function(_buffer, _m, a) {
            return {
                type_: a
            };
        },
        'insert+p1': function(_buffer, m, a) {
            return {
                type_: a,
                p1: m
            };
        },
        'insert+p1+p2': function(_buffer, m, a) {
            return {
                type_: a,
                p1: m[0],
                p2: m[1]
            };
        },
        'copy': function(_buffer, m) {
            return m;
        },
        'write': function(_buffer, _m, a) {
            return a;
        },
        'rm': function(_buffer, m) {
            return {
                type_: 'rm',
                p1: m
            };
        },
        'text': function(_buffer, m) {
            return _mhchemParser.go(m, 'text');
        },
        'tex-math': function(_buffer, m) {
            return _mhchemParser.go(m, 'tex-math');
        },
        'tex-math tight': function(_buffer, m) {
            return _mhchemParser.go(m, 'tex-math tight');
        },
        'bond': function(_buffer, m, k) {
            return {
                type_: 'bond',
                kind_: k || m
            };
        },
        'color0-output': function(_buffer, m) {
            return {
                type_: 'color0',
                color: m
            };
        },
        'ce': function(_buffer, m) {
            return _mhchemParser.go(m, 'ce');
        },
        'pu': function(_buffer, m) {
            return _mhchemParser.go(m, 'pu');
        },
        '1/2': function(_buffer, m) {
            var ret = [];
            if (m.match(/^[+\-]/)) {
                ret.push(m.substr(0, 1));
                m = m.substr(1);
            }
            var n = m.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);
            n[1] = n[1].replace(/\$/g, "");
            ret.push({
                type_: 'frac',
                p1: n[1],
                p2: n[2]
            });
            if (n[3]) {
                n[3] = n[3].replace(/\$/g, "");
                ret.push({
                    type_: 'tex-math',
                    p1: n[3]
                });
            }
            return ret;
        },
        '9,9': function(_buffer, m) {
            return _mhchemParser.go(m, '9,9');
        }
    },
    stateMachines: {
        'tex': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '0': {
                        action_: 'copy'
                    }
                },
                '\\ce{(...)}': {
                    '0': {
                        action_: [
                            {
                                type_: 'write',
                                option: "{"
                            },
                            'ce',
                            {
                                type_: 'write',
                                option: "}"
                            }
                        ]
                    }
                },
                '\\pu{(...)}': {
                    '0': {
                        action_: [
                            {
                                type_: 'write',
                                option: "{"
                            },
                            'pu',
                            {
                                type_: 'write',
                                option: "}"
                            }
                        ]
                    }
                },
                'else': {
                    '0': {
                        action_: 'copy'
                    }
                }
            }),
            actions: {
            }
        },
        'ce': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: 'output'
                    }
                },
                'else': {
                    '0|1|2': {
                        action_: 'beginsWithBond=false',
                        revisit: true,
                        toContinue: true
                    }
                },
                'oxidation$': {
                    '0': {
                        action_: 'oxidation-output'
                    }
                },
                'CMT': {
                    'r': {
                        action_: 'rdt=',
                        nextState: 'rt'
                    },
                    'rd': {
                        action_: 'rqt=',
                        nextState: 'rdt'
                    }
                },
                'arrowUpDown': {
                    '0|1|2|as': {
                        action_: [
                            'sb=false',
                            'output',
                            'operator'
                        ],
                        nextState: '1'
                    }
                },
                'uprightEntities': {
                    '0|1|2': {
                        action_: [
                            'o=',
                            'output'
                        ],
                        nextState: '1'
                    }
                },
                'orbital': {
                    '0|1|2|3': {
                        action_: 'o=',
                        nextState: 'o'
                    }
                },
                '->': {
                    '0|1|2|3': {
                        action_: 'r=',
                        nextState: 'r'
                    },
                    'a|as': {
                        action_: [
                            'output',
                            'r='
                        ],
                        nextState: 'r'
                    },
                    '*': {
                        action_: [
                            'output',
                            'r='
                        ],
                        nextState: 'r'
                    }
                },
                '+': {
                    'o': {
                        action_: 'd= kv',
                        nextState: 'd'
                    },
                    'd|D': {
                        action_: 'd=',
                        nextState: 'd'
                    },
                    'q': {
                        action_: 'd=',
                        nextState: 'qd'
                    },
                    'qd|qD': {
                        action_: 'd=',
                        nextState: 'qd'
                    },
                    'dq': {
                        action_: [
                            'output',
                            'd='
                        ],
                        nextState: 'd'
                    },
                    '3': {
                        action_: [
                            'sb=false',
                            'output',
                            'operator'
                        ],
                        nextState: '0'
                    }
                },
                'amount': {
                    '0|2': {
                        action_: 'a=',
                        nextState: 'a'
                    }
                },
                'pm-operator': {
                    '0|1|2|a|as': {
                        action_: [
                            'sb=false',
                            'output',
                            {
                                type_: 'operator',
                                option: '\\pm'
                            }
                        ],
                        nextState: '0'
                    }
                },
                'operator': {
                    '0|1|2|a|as': {
                        action_: [
                            'sb=false',
                            'output',
                            'operator'
                        ],
                        nextState: '0'
                    }
                },
                '-$': {
                    'o|q': {
                        action_: [
                            'charge or bond',
                            'output'
                        ],
                        nextState: 'qd'
                    },
                    'd': {
                        action_: 'd=',
                        nextState: 'd'
                    },
                    'D': {
                        action_: [
                            'output',
                            {
                                type_: 'bond',
                                option: "-"
                            }
                        ],
                        nextState: '3'
                    },
                    'q': {
                        action_: 'd=',
                        nextState: 'qd'
                    },
                    'qd': {
                        action_: 'd=',
                        nextState: 'qd'
                    },
                    'qD|dq': {
                        action_: [
                            'output',
                            {
                                type_: 'bond',
                                option: "-"
                            }
                        ],
                        nextState: '3'
                    }
                },
                '-9': {
                    '3|o': {
                        action_: [
                            'output',
                            {
                                type_: 'insert',
                                option: 'hyphen'
                            }
                        ],
                        nextState: '3'
                    }
                },
                '- orbital overlap': {
                    'o': {
                        action_: [
                            'output',
                            {
                                type_: 'insert',
                                option: 'hyphen'
                            }
                        ],
                        nextState: '2'
                    },
                    'd': {
                        action_: [
                            'output',
                            {
                                type_: 'insert',
                                option: 'hyphen'
                            }
                        ],
                        nextState: '2'
                    }
                },
                '-': {
                    '0|1|2': {
                        action_: [
                            {
                                type_: 'output',
                                option: 1
                            },
                            'beginsWithBond=true',
                            {
                                type_: 'bond',
                                option: "-"
                            }
                        ],
                        nextState: '3'
                    },
                    '3': {
                        action_: {
                            type_: 'bond',
                            option: "-"
                        }
                    },
                    'a': {
                        action_: [
                            'output',
                            {
                                type_: 'insert',
                                option: 'hyphen'
                            }
                        ],
                        nextState: '2'
                    },
                    'as': {
                        action_: [
                            {
                                type_: 'output',
                                option: 2
                            },
                            {
                                type_: 'bond',
                                option: "-"
                            }
                        ],
                        nextState: '3'
                    },
                    'b': {
                        action_: 'b='
                    },
                    'o': {
                        action_: {
                            type_: '- after o/d',
                            option: false
                        },
                        nextState: '2'
                    },
                    'q': {
                        action_: {
                            type_: '- after o/d',
                            option: false
                        },
                        nextState: '2'
                    },
                    'd|qd|dq': {
                        action_: {
                            type_: '- after o/d',
                            option: true
                        },
                        nextState: '2'
                    },
                    'D|qD|p': {
                        action_: [
                            'output',
                            {
                                type_: 'bond',
                                option: "-"
                            }
                        ],
                        nextState: '3'
                    }
                },
                'amount2': {
                    '1|3': {
                        action_: 'a=',
                        nextState: 'a'
                    }
                },
                'letters': {
                    '0|1|2|3|a|as|b|p|bp|o': {
                        action_: 'o=',
                        nextState: 'o'
                    },
                    'q|dq': {
                        action_: [
                            'output',
                            'o='
                        ],
                        nextState: 'o'
                    },
                    'd|D|qd|qD': {
                        action_: 'o after d',
                        nextState: 'o'
                    }
                },
                'digits': {
                    'o': {
                        action_: 'q=',
                        nextState: 'q'
                    },
                    'd|D': {
                        action_: 'q=',
                        nextState: 'dq'
                    },
                    'q': {
                        action_: [
                            'output',
                            'o='
                        ],
                        nextState: 'o'
                    },
                    'a': {
                        action_: 'o=',
                        nextState: 'o'
                    }
                },
                'space A': {
                    'b|p|bp': {
                        action_: []
                    }
                },
                'space': {
                    'a': {
                        action_: [],
                        nextState: 'as'
                    },
                    '0': {
                        action_: 'sb=false'
                    },
                    '1|2': {
                        action_: 'sb=true'
                    },
                    'r|rt|rd|rdt|rdq': {
                        action_: 'output',
                        nextState: '0'
                    },
                    '*': {
                        action_: [
                            'output',
                            'sb=true'
                        ],
                        nextState: '1'
                    }
                },
                '1st-level escape': {
                    '1|2': {
                        action_: [
                            'output',
                            {
                                type_: 'insert+p1',
                                option: '1st-level escape'
                            }
                        ]
                    },
                    '*': {
                        action_: [
                            'output',
                            {
                                type_: 'insert+p1',
                                option: '1st-level escape'
                            }
                        ],
                        nextState: '0'
                    }
                },
                '[(...)]': {
                    'r|rt': {
                        action_: 'rd=',
                        nextState: 'rd'
                    },
                    'rd|rdt': {
                        action_: 'rq=',
                        nextState: 'rdq'
                    }
                },
                '...': {
                    'o|d|D|dq|qd|qD': {
                        action_: [
                            'output',
                            {
                                type_: 'bond',
                                option: "..."
                            }
                        ],
                        nextState: '3'
                    },
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 1
                            },
                            {
                                type_: 'insert',
                                option: 'ellipsis'
                            }
                        ],
                        nextState: '1'
                    }
                },
                '. __* ': {
                    '*': {
                        action_: [
                            'output',
                            {
                                type_: 'insert',
                                option: 'addition compound'
                            }
                        ],
                        nextState: '1'
                    }
                },
                'state of aggregation $': {
                    '*': {
                        action_: [
                            'output',
                            'state of aggregation'
                        ],
                        nextState: '1'
                    }
                },
                '{[(': {
                    'a|as|o': {
                        action_: [
                            'o=',
                            'output',
                            'parenthesisLevel++'
                        ],
                        nextState: '2'
                    },
                    '0|1|2|3': {
                        action_: [
                            'o=',
                            'output',
                            'parenthesisLevel++'
                        ],
                        nextState: '2'
                    },
                    '*': {
                        action_: [
                            'output',
                            'o=',
                            'output',
                            'parenthesisLevel++'
                        ],
                        nextState: '2'
                    }
                },
                ')]}': {
                    '0|1|2|3|b|p|bp|o': {
                        action_: [
                            'o=',
                            'parenthesisLevel--'
                        ],
                        nextState: 'o'
                    },
                    'a|as|d|D|q|qd|qD|dq': {
                        action_: [
                            'output',
                            'o=',
                            'parenthesisLevel--'
                        ],
                        nextState: 'o'
                    }
                },
                ', ': {
                    '*': {
                        action_: [
                            'output',
                            'comma'
                        ],
                        nextState: '0'
                    }
                },
                '^_': {
                    '*': {
                        action_: []
                    }
                },
                '^{(...)}|^($...$)': {
                    '0|1|2|as': {
                        action_: 'b=',
                        nextState: 'b'
                    },
                    'p': {
                        action_: 'b=',
                        nextState: 'bp'
                    },
                    '3|o': {
                        action_: 'd= kv',
                        nextState: 'D'
                    },
                    'q': {
                        action_: 'd=',
                        nextState: 'qD'
                    },
                    'd|D|qd|qD|dq': {
                        action_: [
                            'output',
                            'd='
                        ],
                        nextState: 'D'
                    }
                },
                '^a|^\\x{}{}|^\\x{}|^\\x|\'': {
                    '0|1|2|as': {
                        action_: 'b=',
                        nextState: 'b'
                    },
                    'p': {
                        action_: 'b=',
                        nextState: 'bp'
                    },
                    '3|o': {
                        action_: 'd= kv',
                        nextState: 'd'
                    },
                    'q': {
                        action_: 'd=',
                        nextState: 'qd'
                    },
                    'd|qd|D|qD': {
                        action_: 'd='
                    },
                    'dq': {
                        action_: [
                            'output',
                            'd='
                        ],
                        nextState: 'd'
                    }
                },
                '_{(state of aggregation)}$': {
                    'd|D|q|qd|qD|dq': {
                        action_: [
                            'output',
                            'q='
                        ],
                        nextState: 'q'
                    }
                },
                '_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x': {
                    '0|1|2|as': {
                        action_: 'p=',
                        nextState: 'p'
                    },
                    'b': {
                        action_: 'p=',
                        nextState: 'bp'
                    },
                    '3|o': {
                        action_: 'q=',
                        nextState: 'q'
                    },
                    'd|D': {
                        action_: 'q=',
                        nextState: 'dq'
                    },
                    'q|qd|qD|dq': {
                        action_: [
                            'output',
                            'q='
                        ],
                        nextState: 'q'
                    }
                },
                '=<>': {
                    '0|1|2|3|a|as|o|q|d|D|qd|qD|dq': {
                        action_: [
                            {
                                type_: 'output',
                                option: 2
                            },
                            'bond'
                        ],
                        nextState: '3'
                    }
                },
                '#': {
                    '0|1|2|3|a|as|o': {
                        action_: [
                            {
                                type_: 'output',
                                option: 2
                            },
                            {
                                type_: 'bond',
                                option: "#"
                            }
                        ],
                        nextState: '3'
                    }
                },
                '{}': {
                    '*': {
                        action_: {
                            type_: 'output',
                            option: 1
                        },
                        nextState: '1'
                    }
                },
                '{...}': {
                    '0|1|2|3|a|as|b|p|bp': {
                        action_: 'o=',
                        nextState: 'o'
                    },
                    'o|d|D|q|qd|qD|dq': {
                        action_: [
                            'output',
                            'o='
                        ],
                        nextState: 'o'
                    }
                },
                '$...$': {
                    'a': {
                        action_: 'a='
                    },
                    '0|1|2|3|as|b|p|bp|o': {
                        action_: 'o=',
                        nextState: 'o'
                    },
                    'as|o': {
                        action_: 'o='
                    },
                    'q|d|D|qd|qD|dq': {
                        action_: [
                            'output',
                            'o='
                        ],
                        nextState: 'o'
                    }
                },
                '\\bond{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 2
                            },
                            'bond'
                        ],
                        nextState: "3"
                    }
                },
                '\\frac{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 1
                            },
                            'frac-output'
                        ],
                        nextState: '3'
                    }
                },
                '\\overset{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 2
                            },
                            'overset-output'
                        ],
                        nextState: '3'
                    }
                },
                '\\underset{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 2
                            },
                            'underset-output'
                        ],
                        nextState: '3'
                    }
                },
                '\\underbrace{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 2
                            },
                            'underbrace-output'
                        ],
                        nextState: '3'
                    }
                },
                '\\color{(...)}{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 2
                            },
                            'color-output'
                        ],
                        nextState: '3'
                    }
                },
                '\\color{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 2
                            },
                            'color0-output'
                        ]
                    }
                },
                '\\ce{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 2
                            },
                            'ce'
                        ],
                        nextState: '3'
                    }
                },
                '\\,': {
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 1
                            },
                            'copy'
                        ],
                        nextState: '1'
                    }
                },
                '\\pu{(...)}': {
                    '*': {
                        action_: [
                            'output',
                            {
                                type_: 'write',
                                option: "{"
                            },
                            'pu',
                            {
                                type_: 'write',
                                option: "}"
                            }
                        ],
                        nextState: '3'
                    }
                },
                '\\x{}{}|\\x{}|\\x': {
                    '0|1|2|3|a|as|b|p|bp|o|c0': {
                        action_: [
                            'o=',
                            'output'
                        ],
                        nextState: '3'
                    },
                    '*': {
                        action_: [
                            'output',
                            'o=',
                            'output'
                        ],
                        nextState: '3'
                    }
                },
                'others': {
                    '*': {
                        action_: [
                            {
                                type_: 'output',
                                option: 1
                            },
                            'copy'
                        ],
                        nextState: '3'
                    }
                },
                'else2': {
                    'a': {
                        action_: 'a to o',
                        nextState: 'o',
                        revisit: true
                    },
                    'as': {
                        action_: [
                            'output',
                            'sb=true'
                        ],
                        nextState: '1',
                        revisit: true
                    },
                    'r|rt|rd|rdt|rdq': {
                        action_: [
                            'output'
                        ],
                        nextState: '0',
                        revisit: true
                    },
                    '*': {
                        action_: [
                            'output',
                            'copy'
                        ],
                        nextState: '3'
                    }
                }
            }),
            actions: {
                'o after d': function(buffer, m) {
                    var ret;
                    if ((buffer.d || "").match(/^[0-9]+$/)) {
                        var tmp = buffer.d;
                        buffer.d = undefined;
                        ret = this['output'](buffer);
                        buffer.b = tmp;
                    } else ret = this['output'](buffer);
                    _mhchemParser.actions['o='](buffer, m);
                    return ret;
                },
                'd= kv': function(buffer, m) {
                    buffer.d = m;
                    buffer.dType = 'kv';
                    return undefined;
                },
                'charge or bond': function(buffer, m) {
                    if (buffer['beginsWithBond']) {
                        var ret = [];
                        _mhchemParser.concatArray(ret, this['output'](buffer));
                        _mhchemParser.concatArray(ret, _mhchemParser.actions['bond'](buffer, m, "-"));
                        return ret;
                    } else {
                        buffer.d = m;
                        return undefined;
                    }
                },
                '- after o/d': function(buffer, m, isAfterD) {
                    var c1 = _mhchemParser.patterns.match_('orbital', buffer.o || "");
                    var c2 = _mhchemParser.patterns.match_('one lowercase greek letter $', buffer.o || "");
                    var c3 = _mhchemParser.patterns.match_('one lowercase latin letter $', buffer.o || "");
                    var c4 = _mhchemParser.patterns.match_('$one lowercase latin letter$ $', buffer.o || "");
                    var hyphenFollows = m === "-" && (c1 && c1.remainder === "" || c2 || c3 || c4);
                    if (hyphenFollows && !buffer.a && !buffer.b && !buffer.p && !buffer.d && !buffer.q && !c1 && c3) buffer.o = '$' + buffer.o + '$';
                    var ret = [];
                    if (hyphenFollows) {
                        _mhchemParser.concatArray(ret, this['output'](buffer));
                        ret.push({
                            type_: 'hyphen'
                        });
                    } else {
                        c1 = _mhchemParser.patterns.match_('digits', buffer.d || "");
                        if (isAfterD && c1 && c1.remainder === '') {
                            _mhchemParser.concatArray(ret, _mhchemParser.actions['d='](buffer, m));
                            _mhchemParser.concatArray(ret, this['output'](buffer));
                        } else {
                            _mhchemParser.concatArray(ret, this['output'](buffer));
                            _mhchemParser.concatArray(ret, _mhchemParser.actions['bond'](buffer, m, "-"));
                        }
                    }
                    return ret;
                },
                'a to o': function(buffer) {
                    buffer.o = buffer.a;
                    buffer.a = undefined;
                    return undefined;
                },
                'sb=true': function(buffer) {
                    buffer.sb = true;
                    return undefined;
                },
                'sb=false': function(buffer) {
                    buffer.sb = false;
                    return undefined;
                },
                'beginsWithBond=true': function(buffer) {
                    buffer['beginsWithBond'] = true;
                    return undefined;
                },
                'beginsWithBond=false': function(buffer) {
                    buffer['beginsWithBond'] = false;
                    return undefined;
                },
                'parenthesisLevel++': function(buffer) {
                    buffer['parenthesisLevel']++;
                    return undefined;
                },
                'parenthesisLevel--': function(buffer) {
                    buffer['parenthesisLevel']--;
                    return undefined;
                },
                'state of aggregation': function(_buffer, m) {
                    return {
                        type_: 'state of aggregation',
                        p1: _mhchemParser.go(m, 'o')
                    };
                },
                'comma': function(buffer, m) {
                    var a = m.replace(/\s*$/, '');
                    var withSpace = a !== m;
                    if (withSpace && buffer['parenthesisLevel'] === 0) return {
                        type_: 'comma enumeration L',
                        p1: a
                    };
                    else return {
                        type_: 'comma enumeration M',
                        p1: a
                    };
                },
                'output': function(buffer, _m, entityFollows) {
                    var ret;
                    if (!buffer.r) {
                        ret = [];
                        if (!buffer.a && !buffer.b && !buffer.p && !buffer.o && !buffer.q && !buffer.d && !entityFollows) ;
                        else {
                            if (buffer.sb) ret.push({
                                type_: 'entitySkip'
                            });
                            if (!buffer.o && !buffer.q && !buffer.d && !buffer.b && !buffer.p && entityFollows !== 2) {
                                buffer.o = buffer.a;
                                buffer.a = undefined;
                            } else if (!buffer.o && !buffer.q && !buffer.d && (buffer.b || buffer.p)) {
                                buffer.o = buffer.a;
                                buffer.d = buffer.b;
                                buffer.q = buffer.p;
                                buffer.a = buffer.b = buffer.p = undefined;
                            } else {
                                if (buffer.o && buffer.dType === 'kv' && _mhchemParser.patterns.match_('d-oxidation$', buffer.d || "")) buffer.dType = 'oxidation';
                                else if (buffer.o && buffer.dType === 'kv' && !buffer.q) buffer.dType = undefined;
                            }
                            ret.push({
                                type_: 'chemfive',
                                a: _mhchemParser.go(buffer.a, 'a'),
                                b: _mhchemParser.go(buffer.b, 'bd'),
                                p: _mhchemParser.go(buffer.p, 'pq'),
                                o: _mhchemParser.go(buffer.o, 'o'),
                                q: _mhchemParser.go(buffer.q, 'pq'),
                                d: _mhchemParser.go(buffer.d, buffer.dType === 'oxidation' ? 'oxidation' : 'bd'),
                                dType: buffer.dType
                            });
                        }
                    } else {
                        var rd = void 0;
                        if (buffer.rdt === 'M') rd = _mhchemParser.go(buffer.rd, 'tex-math');
                        else if (buffer.rdt === 'T') rd = [
                            {
                                type_: 'text',
                                p1: buffer.rd || ""
                            }
                        ];
                        else rd = _mhchemParser.go(buffer.rd, 'ce');
                        var rq = void 0;
                        if (buffer.rqt === 'M') rq = _mhchemParser.go(buffer.rq, 'tex-math');
                        else if (buffer.rqt === 'T') rq = [
                            {
                                type_: 'text',
                                p1: buffer.rq || ""
                            }
                        ];
                        else rq = _mhchemParser.go(buffer.rq, 'ce');
                        ret = {
                            type_: 'arrow',
                            r: buffer.r,
                            rd: rd,
                            rq: rq
                        };
                    }
                    for(var p in buffer)if (p !== 'parenthesisLevel' && p !== 'beginsWithBond') delete buffer[p];
                    return ret;
                },
                'oxidation-output': function(_buffer, m) {
                    var ret = [
                        "{"
                    ];
                    _mhchemParser.concatArray(ret, _mhchemParser.go(m, 'oxidation'));
                    ret.push("}");
                    return ret;
                },
                'frac-output': function(_buffer, m) {
                    return {
                        type_: 'frac-ce',
                        p1: _mhchemParser.go(m[0], 'ce'),
                        p2: _mhchemParser.go(m[1], 'ce')
                    };
                },
                'overset-output': function(_buffer, m) {
                    return {
                        type_: 'overset',
                        p1: _mhchemParser.go(m[0], 'ce'),
                        p2: _mhchemParser.go(m[1], 'ce')
                    };
                },
                'underset-output': function(_buffer, m) {
                    return {
                        type_: 'underset',
                        p1: _mhchemParser.go(m[0], 'ce'),
                        p2: _mhchemParser.go(m[1], 'ce')
                    };
                },
                'underbrace-output': function(_buffer, m) {
                    return {
                        type_: 'underbrace',
                        p1: _mhchemParser.go(m[0], 'ce'),
                        p2: _mhchemParser.go(m[1], 'ce')
                    };
                },
                'color-output': function(_buffer, m) {
                    return {
                        type_: 'color',
                        color1: m[0],
                        color2: _mhchemParser.go(m[1], 'ce')
                    };
                },
                'r=': function(buffer, m) {
                    buffer.r = m;
                    return undefined;
                },
                'rdt=': function(buffer, m) {
                    buffer.rdt = m;
                    return undefined;
                },
                'rd=': function(buffer, m) {
                    buffer.rd = m;
                    return undefined;
                },
                'rqt=': function(buffer, m) {
                    buffer.rqt = m;
                    return undefined;
                },
                'rq=': function(buffer, m) {
                    buffer.rq = m;
                    return undefined;
                },
                'operator': function(_buffer, m, p1) {
                    return {
                        type_: 'operator',
                        kind_: p1 || m
                    };
                }
            }
        },
        'a': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: []
                    }
                },
                '1/2$': {
                    '0': {
                        action_: '1/2'
                    }
                },
                'else': {
                    '0': {
                        action_: [],
                        nextState: '1',
                        revisit: true
                    }
                },
                '${(...)}$__$(...)$': {
                    '*': {
                        action_: 'tex-math tight',
                        nextState: '1'
                    }
                },
                ',': {
                    '*': {
                        action_: {
                            type_: 'insert',
                            option: 'commaDecimal'
                        }
                    }
                },
                'else2': {
                    '*': {
                        action_: 'copy'
                    }
                }
            }),
            actions: {
            }
        },
        'o': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: []
                    }
                },
                '1/2$': {
                    '0': {
                        action_: '1/2'
                    }
                },
                'else': {
                    '0': {
                        action_: [],
                        nextState: '1',
                        revisit: true
                    }
                },
                'letters': {
                    '*': {
                        action_: 'rm'
                    }
                },
                '\\ca': {
                    '*': {
                        action_: {
                            type_: 'insert',
                            option: 'circa'
                        }
                    }
                },
                '\\pu{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'write',
                                option: "{"
                            },
                            'pu',
                            {
                                type_: 'write',
                                option: "}"
                            }
                        ]
                    }
                },
                '\\x{}{}|\\x{}|\\x': {
                    '*': {
                        action_: 'copy'
                    }
                },
                '${(...)}$__$(...)$': {
                    '*': {
                        action_: 'tex-math'
                    }
                },
                '{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'write',
                                option: "{"
                            },
                            'text',
                            {
                                type_: 'write',
                                option: "}"
                            }
                        ]
                    }
                },
                'else2': {
                    '*': {
                        action_: 'copy'
                    }
                }
            }),
            actions: {
            }
        },
        'text': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: 'output'
                    }
                },
                '{...}': {
                    '*': {
                        action_: 'text='
                    }
                },
                '${(...)}$__$(...)$': {
                    '*': {
                        action_: 'tex-math'
                    }
                },
                '\\greek': {
                    '*': {
                        action_: [
                            'output',
                            'rm'
                        ]
                    }
                },
                '\\pu{(...)}': {
                    '*': {
                        action_: [
                            'output',
                            {
                                type_: 'write',
                                option: "{"
                            },
                            'pu',
                            {
                                type_: 'write',
                                option: "}"
                            }
                        ]
                    }
                },
                '\\,|\\x{}{}|\\x{}|\\x': {
                    '*': {
                        action_: [
                            'output',
                            'copy'
                        ]
                    }
                },
                'else': {
                    '*': {
                        action_: 'text='
                    }
                }
            }),
            actions: {
                'output': function(buffer) {
                    if (buffer.text_) {
                        var ret = {
                            type_: 'text',
                            p1: buffer.text_
                        };
                        for(var p in buffer)delete buffer[p];
                        return ret;
                    }
                    return undefined;
                }
            }
        },
        'pq': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: []
                    }
                },
                'state of aggregation $': {
                    '*': {
                        action_: 'state of aggregation'
                    }
                },
                'i$': {
                    '0': {
                        action_: [],
                        nextState: '!f',
                        revisit: true
                    }
                },
                '(KV letters),': {
                    '0': {
                        action_: 'rm',
                        nextState: '0'
                    }
                },
                'formula$': {
                    '0': {
                        action_: [],
                        nextState: 'f',
                        revisit: true
                    }
                },
                '1/2$': {
                    '0': {
                        action_: '1/2'
                    }
                },
                'else': {
                    '0': {
                        action_: [],
                        nextState: '!f',
                        revisit: true
                    }
                },
                '${(...)}$__$(...)$': {
                    '*': {
                        action_: 'tex-math'
                    }
                },
                '{(...)}': {
                    '*': {
                        action_: 'text'
                    }
                },
                'a-z': {
                    'f': {
                        action_: 'tex-math'
                    }
                },
                'letters': {
                    '*': {
                        action_: 'rm'
                    }
                },
                '-9.,9': {
                    '*': {
                        action_: '9,9'
                    }
                },
                ',': {
                    '*': {
                        action_: {
                            type_: 'insert+p1',
                            option: 'comma enumeration S'
                        }
                    }
                },
                '\\color{(...)}{(...)}': {
                    '*': {
                        action_: 'color-output'
                    }
                },
                '\\color{(...)}': {
                    '*': {
                        action_: 'color0-output'
                    }
                },
                '\\ce{(...)}': {
                    '*': {
                        action_: 'ce'
                    }
                },
                '\\pu{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'write',
                                option: "{"
                            },
                            'pu',
                            {
                                type_: 'write',
                                option: "}"
                            }
                        ]
                    }
                },
                '\\,|\\x{}{}|\\x{}|\\x': {
                    '*': {
                        action_: 'copy'
                    }
                },
                'else2': {
                    '*': {
                        action_: 'copy'
                    }
                }
            }),
            actions: {
                'state of aggregation': function(_buffer, m) {
                    return {
                        type_: 'state of aggregation subscript',
                        p1: _mhchemParser.go(m, 'o')
                    };
                },
                'color-output': function(_buffer, m) {
                    return {
                        type_: 'color',
                        color1: m[0],
                        color2: _mhchemParser.go(m[1], 'pq')
                    };
                }
            }
        },
        'bd': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: []
                    }
                },
                'x$': {
                    '0': {
                        action_: [],
                        nextState: '!f',
                        revisit: true
                    }
                },
                'formula$': {
                    '0': {
                        action_: [],
                        nextState: 'f',
                        revisit: true
                    }
                },
                'else': {
                    '0': {
                        action_: [],
                        nextState: '!f',
                        revisit: true
                    }
                },
                '-9.,9 no missing 0': {
                    '*': {
                        action_: '9,9'
                    }
                },
                '.': {
                    '*': {
                        action_: {
                            type_: 'insert',
                            option: 'electron dot'
                        }
                    }
                },
                'a-z': {
                    'f': {
                        action_: 'tex-math'
                    }
                },
                'x': {
                    '*': {
                        action_: {
                            type_: 'insert',
                            option: 'KV x'
                        }
                    }
                },
                'letters': {
                    '*': {
                        action_: 'rm'
                    }
                },
                '\'': {
                    '*': {
                        action_: {
                            type_: 'insert',
                            option: 'prime'
                        }
                    }
                },
                '${(...)}$__$(...)$': {
                    '*': {
                        action_: 'tex-math'
                    }
                },
                '{(...)}': {
                    '*': {
                        action_: 'text'
                    }
                },
                '\\color{(...)}{(...)}': {
                    '*': {
                        action_: 'color-output'
                    }
                },
                '\\color{(...)}': {
                    '*': {
                        action_: 'color0-output'
                    }
                },
                '\\ce{(...)}': {
                    '*': {
                        action_: 'ce'
                    }
                },
                '\\pu{(...)}': {
                    '*': {
                        action_: [
                            {
                                type_: 'write',
                                option: "{"
                            },
                            'pu',
                            {
                                type_: 'write',
                                option: "}"
                            }
                        ]
                    }
                },
                '\\,|\\x{}{}|\\x{}|\\x': {
                    '*': {
                        action_: 'copy'
                    }
                },
                'else2': {
                    '*': {
                        action_: 'copy'
                    }
                }
            }),
            actions: {
                'color-output': function(_buffer, m) {
                    return {
                        type_: 'color',
                        color1: m[0],
                        color2: _mhchemParser.go(m[1], 'bd')
                    };
                }
            }
        },
        'oxidation': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: []
                    }
                },
                'roman numeral': {
                    '*': {
                        action_: 'roman-numeral'
                    }
                },
                '${(...)}$__$(...)$': {
                    '*': {
                        action_: 'tex-math'
                    }
                },
                'else': {
                    '*': {
                        action_: 'copy'
                    }
                }
            }),
            actions: {
                'roman-numeral': function(_buffer, m) {
                    return {
                        type_: 'roman numeral',
                        p1: m
                    };
                }
            }
        },
        'tex-math': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: 'output'
                    }
                },
                '\\ce{(...)}': {
                    '*': {
                        action_: [
                            'output',
                            'ce'
                        ]
                    }
                },
                '\\pu{(...)}': {
                    '*': {
                        action_: [
                            'output',
                            {
                                type_: 'write',
                                option: "{"
                            },
                            'pu',
                            {
                                type_: 'write',
                                option: "}"
                            }
                        ]
                    }
                },
                '{...}|\\,|\\x{}{}|\\x{}|\\x': {
                    '*': {
                        action_: 'o='
                    }
                },
                'else': {
                    '*': {
                        action_: 'o='
                    }
                }
            }),
            actions: {
                'output': function(buffer) {
                    if (buffer.o) {
                        var ret = {
                            type_: 'tex-math',
                            p1: buffer.o
                        };
                        for(var p in buffer)delete buffer[p];
                        return ret;
                    }
                    return undefined;
                }
            }
        },
        'tex-math tight': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: 'output'
                    }
                },
                '\\ce{(...)}': {
                    '*': {
                        action_: [
                            'output',
                            'ce'
                        ]
                    }
                },
                '\\pu{(...)}': {
                    '*': {
                        action_: [
                            'output',
                            {
                                type_: 'write',
                                option: "{"
                            },
                            'pu',
                            {
                                type_: 'write',
                                option: "}"
                            }
                        ]
                    }
                },
                '{...}|\\,|\\x{}{}|\\x{}|\\x': {
                    '*': {
                        action_: 'o='
                    }
                },
                '-|+': {
                    '*': {
                        action_: 'tight operator'
                    }
                },
                'else': {
                    '*': {
                        action_: 'o='
                    }
                }
            }),
            actions: {
                'tight operator': function(buffer, m) {
                    buffer.o = (buffer.o || "") + "{" + m + "}";
                    return undefined;
                },
                'output': function(buffer) {
                    if (buffer.o) {
                        var ret = {
                            type_: 'tex-math',
                            p1: buffer.o
                        };
                        for(var p in buffer)delete buffer[p];
                        return ret;
                    }
                    return undefined;
                }
            }
        },
        '9,9': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: []
                    }
                },
                ',': {
                    '*': {
                        action_: 'comma'
                    }
                },
                'else': {
                    '*': {
                        action_: 'copy'
                    }
                }
            }),
            actions: {
                'comma': function() {
                    return {
                        type_: 'commaDecimal'
                    };
                }
            }
        },
        'pu': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: 'output'
                    }
                },
                'space$': {
                    '*': {
                        action_: [
                            'output',
                            'space'
                        ]
                    }
                },
                '{[(|)]}': {
                    '0|a': {
                        action_: 'copy'
                    }
                },
                '(-)(9)^(-9)': {
                    '0': {
                        action_: 'number^',
                        nextState: 'a'
                    }
                },
                '(-)(9.,9)(e)(99)': {
                    '0': {
                        action_: 'enumber',
                        nextState: 'a'
                    }
                },
                'space': {
                    '0|a': {
                        action_: []
                    }
                },
                'pm-operator': {
                    '0|a': {
                        action_: {
                            type_: 'operator',
                            option: '\\pm'
                        },
                        nextState: '0'
                    }
                },
                'operator': {
                    '0|a': {
                        action_: 'copy',
                        nextState: '0'
                    }
                },
                '//': {
                    'd': {
                        action_: 'o=',
                        nextState: '/'
                    }
                },
                '/': {
                    'd': {
                        action_: 'o=',
                        nextState: '/'
                    }
                },
                '{...}|else': {
                    '0|d': {
                        action_: 'd=',
                        nextState: 'd'
                    },
                    'a': {
                        action_: [
                            'space',
                            'd='
                        ],
                        nextState: 'd'
                    },
                    '/|q': {
                        action_: 'q=',
                        nextState: 'q'
                    }
                }
            }),
            actions: {
                'enumber': function(_buffer, m) {
                    var ret = [];
                    if (m[0] === "+-" || m[0] === "+/-") ret.push("\\pm ");
                    else if (m[0]) ret.push(m[0]);
                    if (m[1]) {
                        _mhchemParser.concatArray(ret, _mhchemParser.go(m[1], 'pu-9,9'));
                        if (m[2]) {
                            if (m[2].match(/[,.]/)) _mhchemParser.concatArray(ret, _mhchemParser.go(m[2], 'pu-9,9'));
                            else ret.push(m[2]);
                        }
                        if (m[3] || m[4]) {
                            if (m[3] === "e" || m[4] === "*") ret.push({
                                type_: 'cdot'
                            });
                            else ret.push({
                                type_: 'times'
                            });
                        }
                    }
                    if (m[5]) ret.push("10^{" + m[5] + "}");
                    return ret;
                },
                'number^': function(_buffer, m) {
                    var ret = [];
                    if (m[0] === "+-" || m[0] === "+/-") ret.push("\\pm ");
                    else if (m[0]) ret.push(m[0]);
                    _mhchemParser.concatArray(ret, _mhchemParser.go(m[1], 'pu-9,9'));
                    ret.push("^{" + m[2] + "}");
                    return ret;
                },
                'operator': function(_buffer, m, p1) {
                    return {
                        type_: 'operator',
                        kind_: p1 || m
                    };
                },
                'space': function() {
                    return {
                        type_: 'pu-space-1'
                    };
                },
                'output': function(buffer) {
                    var ret;
                    var md = _mhchemParser.patterns.match_('{(...)}', buffer.d || "");
                    if (md && md.remainder === '') buffer.d = md.match_;
                    var mq = _mhchemParser.patterns.match_('{(...)}', buffer.q || "");
                    if (mq && mq.remainder === '') buffer.q = mq.match_;
                    if (buffer.d) {
                        buffer.d = buffer.d.replace(/\u00B0C|\^oC|\^{o}C/g, "{}^{\\circ}C");
                        buffer.d = buffer.d.replace(/\u00B0F|\^oF|\^{o}F/g, "{}^{\\circ}F");
                    }
                    if (buffer.q) {
                        buffer.q = buffer.q.replace(/\u00B0C|\^oC|\^{o}C/g, "{}^{\\circ}C");
                        buffer.q = buffer.q.replace(/\u00B0F|\^oF|\^{o}F/g, "{}^{\\circ}F");
                        var b5 = {
                            d: _mhchemParser.go(buffer.d, 'pu'),
                            q: _mhchemParser.go(buffer.q, 'pu')
                        };
                        if (buffer.o === '//') ret = {
                            type_: 'pu-frac',
                            p1: b5.d,
                            p2: b5.q
                        };
                        else {
                            ret = b5.d;
                            if (b5.d.length > 1 || b5.q.length > 1) ret.push({
                                type_: ' / '
                            });
                            else ret.push({
                                type_: '/'
                            });
                            _mhchemParser.concatArray(ret, b5.q);
                        }
                    } else ret = _mhchemParser.go(buffer.d, 'pu-2');
                    for(var p in buffer)delete buffer[p];
                    return ret;
                }
            }
        },
        'pu-2': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '*': {
                        action_: 'output'
                    }
                },
                '*': {
                    '*': {
                        action_: [
                            'output',
                            'cdot'
                        ],
                        nextState: '0'
                    }
                },
                '\\x': {
                    '*': {
                        action_: 'rm='
                    }
                },
                'space': {
                    '*': {
                        action_: [
                            'output',
                            'space'
                        ],
                        nextState: '0'
                    }
                },
                '^{(...)}|^(-1)': {
                    '1': {
                        action_: '^(-1)'
                    }
                },
                '-9.,9': {
                    '0': {
                        action_: 'rm=',
                        nextState: '0'
                    },
                    '1': {
                        action_: '^(-1)',
                        nextState: '0'
                    }
                },
                '{...}|else': {
                    '*': {
                        action_: 'rm=',
                        nextState: '1'
                    }
                }
            }),
            actions: {
                'cdot': function() {
                    return {
                        type_: 'tight cdot'
                    };
                },
                '^(-1)': function(buffer, m) {
                    buffer.rm += "^{" + m + "}";
                    return undefined;
                },
                'space': function() {
                    return {
                        type_: 'pu-space-2'
                    };
                },
                'output': function(buffer) {
                    var ret = [];
                    if (buffer.rm) {
                        var mrm = _mhchemParser.patterns.match_('{(...)}', buffer.rm || "");
                        if (mrm && mrm.remainder === '') ret = _mhchemParser.go(mrm.match_, 'pu');
                        else ret = {
                            type_: 'rm',
                            p1: buffer.rm
                        };
                    }
                    for(var p in buffer)delete buffer[p];
                    return ret;
                }
            }
        },
        'pu-9,9': {
            transitions: mhchemCreateTransitions({
                'empty': {
                    '0': {
                        action_: 'output-0'
                    },
                    'o': {
                        action_: 'output-o'
                    }
                },
                ',': {
                    '0': {
                        action_: [
                            'output-0',
                            'comma'
                        ],
                        nextState: 'o'
                    }
                },
                '.': {
                    '0': {
                        action_: [
                            'output-0',
                            'copy'
                        ],
                        nextState: 'o'
                    }
                },
                'else': {
                    '*': {
                        action_: 'text='
                    }
                }
            }),
            actions: {
                'comma': function() {
                    return {
                        type_: 'commaDecimal'
                    };
                },
                'output-0': function(buffer) {
                    var ret = [];
                    buffer.text_ = buffer.text_ || "";
                    if (buffer.text_.length > 4) {
                        var a = buffer.text_.length % 3;
                        if (a === 0) a = 3;
                        for(var i = buffer.text_.length - 3; i > 0; i -= 3){
                            ret.push(buffer.text_.substr(i, 3));
                            ret.push({
                                type_: '1000 separator'
                            });
                        }
                        ret.push(buffer.text_.substr(0, a));
                        ret.reverse();
                    } else ret.push(buffer.text_);
                    for(var p in buffer)delete buffer[p];
                    return ret;
                },
                'output-o': function(buffer) {
                    var ret = [];
                    buffer.text_ = buffer.text_ || "";
                    if (buffer.text_.length > 4) {
                        var a = buffer.text_.length - 3;
                        var i = void 0;
                        for(i = 0; i < a; i += 3){
                            ret.push(buffer.text_.substr(i, 3));
                            ret.push({
                                type_: '1000 separator'
                            });
                        }
                        ret.push(buffer.text_.substr(i));
                    } else ret.push(buffer.text_);
                    for(var p in buffer)delete buffer[p];
                    return ret;
                }
            }
        }
    }
};
var _mhchemTexify = {
    go: function(input, addOuterBraces) {
        if (!input) return "";
        var res = "";
        var cee = false;
        for(var i = 0; i < input.length; i++){
            var inputi = input[i];
            if (typeof inputi === "string") res += inputi;
            else {
                res += _mhchemTexify._go2(inputi);
                if (inputi.type_ === '1st-level escape') cee = true;
            }
        }
        if (addOuterBraces && !cee && res) res = "{" + res + "}";
        return res;
    },
    _goInner: function(input) {
        return _mhchemTexify.go(input, false);
    },
    _go2: function(buf) {
        var res;
        switch(buf.type_){
            case 'chemfive':
                res = "";
                var b5 = {
                    a: _mhchemTexify._goInner(buf.a),
                    b: _mhchemTexify._goInner(buf.b),
                    p: _mhchemTexify._goInner(buf.p),
                    o: _mhchemTexify._goInner(buf.o),
                    q: _mhchemTexify._goInner(buf.q),
                    d: _mhchemTexify._goInner(buf.d)
                };
                if (b5.a) {
                    if (b5.a.match(/^[+\-]/)) b5.a = "{" + b5.a + "}";
                    res += b5.a + "\\,";
                }
                if (b5.b || b5.p) {
                    res += "{\\vphantom{X}}";
                    res += "^{\\hphantom{" + (b5.b || "") + "}}_{\\hphantom{" + (b5.p || "") + "}}";
                    res += "{\\vphantom{X}}";
                    res += "^{\\smash[t]{\\vphantom{2}}\\llap{" + (b5.b || "") + "}}";
                    res += "_{\\vphantom{2}\\llap{\\smash[t]{" + (b5.p || "") + "}}}";
                }
                if (b5.o) {
                    if (b5.o.match(/^[+\-]/)) b5.o = "{" + b5.o + "}";
                    res += b5.o;
                }
                if (buf.dType === 'kv') {
                    if (b5.d || b5.q) res += "{\\vphantom{X}}";
                    if (b5.d) res += "^{" + b5.d + "}";
                    if (b5.q) res += "_{\\smash[t]{" + b5.q + "}}";
                } else if (buf.dType === 'oxidation') {
                    if (b5.d) {
                        res += "{\\vphantom{X}}";
                        res += "^{" + b5.d + "}";
                    }
                    if (b5.q) {
                        res += "{\\vphantom{X}}";
                        res += "_{\\smash[t]{" + b5.q + "}}";
                    }
                } else {
                    if (b5.q) {
                        res += "{\\vphantom{X}}";
                        res += "_{\\smash[t]{" + b5.q + "}}";
                    }
                    if (b5.d) {
                        res += "{\\vphantom{X}}";
                        res += "^{" + b5.d + "}";
                    }
                }
                break;
            case 'rm':
                res = "\\mathrm{" + buf.p1 + "}";
                break;
            case 'text':
                if (buf.p1.match(/[\^_]/)) {
                    buf.p1 = buf.p1.replace(" ", "~").replace("-", "\\text{-}");
                    res = "\\mathrm{" + buf.p1 + "}";
                } else res = "\\text{" + buf.p1 + "}";
                break;
            case 'roman numeral':
                res = "\\mathrm{" + buf.p1 + "}";
                break;
            case 'state of aggregation':
                res = "\\mskip2mu " + _mhchemTexify._goInner(buf.p1);
                break;
            case 'state of aggregation subscript':
                res = "\\mskip1mu " + _mhchemTexify._goInner(buf.p1);
                break;
            case 'bond':
                res = _mhchemTexify._getBond(buf.kind_);
                if (!res) throw [
                    "MhchemErrorBond",
                    "mhchem Error. Unknown bond type (" + buf.kind_ + ")"
                ];
                break;
            case 'frac':
                var c = "\\frac{" + buf.p1 + "}{" + buf.p2 + "}";
                res = "\\mathchoice{\\textstyle" + c + "}{" + c + "}{" + c + "}{" + c + "}";
                break;
            case 'pu-frac':
                var d = "\\frac{" + _mhchemTexify._goInner(buf.p1) + "}{" + _mhchemTexify._goInner(buf.p2) + "}";
                res = "\\mathchoice{\\textstyle" + d + "}{" + d + "}{" + d + "}{" + d + "}";
                break;
            case 'tex-math':
                res = buf.p1 + " ";
                break;
            case 'frac-ce':
                res = "\\frac{" + _mhchemTexify._goInner(buf.p1) + "}{" + _mhchemTexify._goInner(buf.p2) + "}";
                break;
            case 'overset':
                res = "\\overset{" + _mhchemTexify._goInner(buf.p1) + "}{" + _mhchemTexify._goInner(buf.p2) + "}";
                break;
            case 'underset':
                res = "\\underset{" + _mhchemTexify._goInner(buf.p1) + "}{" + _mhchemTexify._goInner(buf.p2) + "}";
                break;
            case 'underbrace':
                res = "\\underbrace{" + _mhchemTexify._goInner(buf.p1) + "}_{" + _mhchemTexify._goInner(buf.p2) + "}";
                break;
            case 'color':
                res = "{\\color{" + buf.color1 + "}{" + _mhchemTexify._goInner(buf.color2) + "}}";
                break;
            case 'color0':
                res = "\\color{" + buf.color + "}";
                break;
            case 'arrow':
                var b6 = {
                    rd: _mhchemTexify._goInner(buf.rd),
                    rq: _mhchemTexify._goInner(buf.rq)
                };
                var arrow = _mhchemTexify._getArrow(buf.r);
                if (b6.rd || b6.rq) {
                    if (buf.r === "<=>" || buf.r === "<=>>" || buf.r === "<<=>" || buf.r === "<-->") {
                        arrow = "\\long" + arrow;
                        if (b6.rd) arrow = "\\overset{" + b6.rd + "}{" + arrow + "}";
                        if (b6.rq) {
                            if (buf.r === "<-->") arrow = "\\underset{\\lower2mu{" + b6.rq + "}}{" + arrow + "}";
                            else arrow = "\\underset{\\lower6mu{" + b6.rq + "}}{" + arrow + "}";
                        }
                        arrow = " {}\\mathrel{" + arrow + "}{} ";
                    } else {
                        if (b6.rq) arrow += "[{" + b6.rq + "}]";
                        arrow += "{" + b6.rd + "}";
                        arrow = " {}\\mathrel{\\x" + arrow + "}{} ";
                    }
                } else arrow = " {}\\mathrel{\\long" + arrow + "}{} ";
                res = arrow;
                break;
            case 'operator':
                res = _mhchemTexify._getOperator(buf.kind_);
                break;
            case '1st-level escape':
                res = buf.p1 + " ";
                break;
            case 'space':
                res = " ";
                break;
            case 'entitySkip':
                res = "~";
                break;
            case 'pu-space-1':
                res = "~";
                break;
            case 'pu-space-2':
                res = "\\mkern3mu ";
                break;
            case '1000 separator':
                res = "\\mkern2mu ";
                break;
            case 'commaDecimal':
                res = "{,}";
                break;
            case 'comma enumeration L':
                res = "{" + buf.p1 + "}\\mkern6mu ";
                break;
            case 'comma enumeration M':
                res = "{" + buf.p1 + "}\\mkern3mu ";
                break;
            case 'comma enumeration S':
                res = "{" + buf.p1 + "}\\mkern1mu ";
                break;
            case 'hyphen':
                res = "\\text{-}";
                break;
            case 'addition compound':
                res = "\\,{\\cdot}\\,";
                break;
            case 'electron dot':
                res = "\\mkern1mu \\bullet\\mkern1mu ";
                break;
            case 'KV x':
                res = "{\\times}";
                break;
            case 'prime':
                res = "\\prime ";
                break;
            case 'cdot':
                res = "\\cdot ";
                break;
            case 'tight cdot':
                res = "\\mkern1mu{\\cdot}\\mkern1mu ";
                break;
            case 'times':
                res = "\\times ";
                break;
            case 'circa':
                res = "{\\sim}";
                break;
            case '^':
                res = "uparrow";
                break;
            case 'v':
                res = "downarrow";
                break;
            case 'ellipsis':
                res = "\\ldots ";
                break;
            case '/':
                res = "/";
                break;
            case ' / ':
                res = "\\,/\\,";
                break;
            default:
                assertNever(buf);
                throw [
                    "MhchemBugT",
                    "mhchem bug T. Please report."
                ];
        }
        return res;
    },
    _getArrow: function(a) {
        switch(a){
            case "->":
                return "rightarrow";
            case "\u2192":
                return "rightarrow";
            case "\u27F6":
                return "rightarrow";
            case "<-":
                return "leftarrow";
            case "<->":
                return "leftrightarrow";
            case "<-->":
                return "leftrightarrows";
            case "<=>":
                return "rightleftharpoons";
            case "\u21CC":
                return "rightleftharpoons";
            case "<=>>":
                return "Rightleftharpoons";
            case "<<=>":
                return "Leftrightharpoons";
            default:
                assertNever(a);
                throw [
                    "MhchemBugT",
                    "mhchem bug T. Please report."
                ];
        }
    },
    _getBond: function(a) {
        switch(a){
            case "-":
                return "{-}";
            case "1":
                return "{-}";
            case "=":
                return "{=}";
            case "2":
                return "{=}";
            case "#":
                return "{\\equiv}";
            case "3":
                return "{\\equiv}";
            case "~":
                return "{\\tripledash}";
            case "~-":
                return "{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";
            case "~=":
                return "{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";
            case "~--":
                return "{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";
            case "-~-":
                return "{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";
            case "...":
                return "{{\\cdot}{\\cdot}{\\cdot}}";
            case "....":
                return "{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";
            case "->":
                return "{\\rightarrow}";
            case "<-":
                return "{\\leftarrow}";
            case "<":
                return "{<}";
            case ">":
                return "{>}";
            default:
                assertNever(a);
                throw [
                    "MhchemBugT",
                    "mhchem bug T. Please report."
                ];
        }
    },
    _getOperator: function(a) {
        switch(a){
            case "+":
                return " {}+{} ";
            case "-":
                return " {}-{} ";
            case "=":
                return " {}={} ";
            case "<":
                return " {}<{} ";
            case ">":
                return " {}>{} ";
            case "<<":
                return " {}\\ll{} ";
            case ">>":
                return " {}\\gg{} ";
            case "\\pm":
                return " {}\\pm{} ";
            case "\\approx":
                return " {}\\approx{} ";
            case "$\\approx$":
                return " {}\\approx{} ";
            case "v":
                return " \\downarrow{} ";
            case "(v)":
                return " \\downarrow{} ";
            case "^":
                return " \\uparrow{} ";
            case "(^)":
                return " \\uparrow{} ";
            default:
                assertNever(a);
                throw [
                    "MhchemBugT",
                    "mhchem bug T. Please report."
                ];
        }
    }
};
function assertNever(a) {
}

},{}],"48oOa":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.NoErrorsConfiguration = void 0;
var Configuration_js_1 = require("../Configuration.js");
function noErrors(factory, message, _id, expr) {
    var mtext = factory.create('token', 'mtext', {
    }, expr.replace(/\n/g, ' '));
    var error = factory.create('node', 'merror', [
        mtext
    ], {
        'data-mjx-error': message,
        title: message
    });
    return error;
}
exports.NoErrorsConfiguration = Configuration_js_1.Configuration.create('noerrors', {
    nodes: {
        'error': noErrors
    }
});

},{"../Configuration.js":"2ZNEp"}],"58R12":[function(require,module,exports) {
"use strict";
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.NoUndefinedConfiguration = void 0;
var Configuration_js_1 = require("../Configuration.js");
function noUndefined(parser, name) {
    var e_1, _a;
    var textNode = parser.create('text', '\\' + name);
    var options = parser.options.noundefined || {
    };
    var def = {
    };
    try {
        for(var _b = __values([
            'color',
            'background',
            'size'
        ]), _c = _b.next(); !_c.done; _c = _b.next()){
            var id = _c.value;
            if (options[id]) def['math' + id] = options[id];
        }
    } catch (e_1_1) {
        e_1 = {
            error: e_1_1
        };
    } finally{
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        } finally{
            if (e_1) throw e_1.error;
        }
    }
    parser.Push(parser.create('node', 'mtext', [], def, textNode));
}
exports.NoUndefinedConfiguration = Configuration_js_1.Configuration.create('noundefined', {
    fallback: {
        macro: noUndefined
    },
    options: {
        noundefined: {
            color: 'red',
            background: '',
            size: ''
        }
    },
    priority: 3
});

},{"../Configuration.js":"2ZNEp"}],"2fReT":[function(require,module,exports) {
"use strict";
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.PhysicsConfiguration = void 0;
var Configuration_js_1 = require("../Configuration.js");
var PhysicsItems_js_1 = require("./PhysicsItems.js");
require("./PhysicsMappings.js");
exports.PhysicsConfiguration = Configuration_js_1.Configuration.create('physics', {
    handler: {
        macro: [
            'Physics-automatic-bracing-macros',
            'Physics-vector-macros',
            'Physics-vector-chars',
            'Physics-derivative-macros',
            'Physics-expressions-macros',
            'Physics-quick-quad-macros',
            'Physics-bra-ket-macros',
            'Physics-matrix-macros'
        ],
        character: [
            'Physics-characters'
        ],
        environment: [
            'Physics-aux-envs'
        ]
    },
    items: (_a = {
    }, _a[PhysicsItems_js_1.AutoOpen.prototype.kind] = PhysicsItems_js_1.AutoOpen, _a)
});

},{"../Configuration.js":"2ZNEp","./PhysicsItems.js":"5iXMj","./PhysicsMappings.js":"5XPEV"}],"5iXMj":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.AutoOpen = void 0;
var StackItem_js_1 = require("../StackItem.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var TexParser_js_1 = require("../TexParser.js");
var AutoOpen1 = function(_super) {
    __extends(AutoOpen2, _super);
    function AutoOpen2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(AutoOpen2.prototype, "kind", {
        get: function() {
            return 'auto open';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AutoOpen2.prototype, "isOpen", {
        get: function() {
            return true;
        },
        enumerable: false,
        configurable: true
    });
    AutoOpen2.prototype.toMml = function() {
        var parser = this.factory.configuration.parser;
        var right = this.getProperty('right');
        if (this.getProperty('smash')) {
            var mml_1 = _super.prototype.toMml.call(this);
            var smash = parser.create('node', 'mpadded', [
                mml_1
            ], {
                height: 0,
                depth: 0
            });
            this.Clear();
            this.Push(parser.create('node', 'TeXAtom', [
                smash
            ]));
        }
        if (right) this.Push(new TexParser_js_1.default(right, parser.stack.env, parser.configuration).mml());
        var mml = _super.prototype.toMml.call(this);
        return ParseUtil_js_1.default.fenced(this.factory.configuration, this.getProperty('open'), mml, this.getProperty('close'), this.getProperty('big'));
    };
    AutoOpen2.prototype.checkItem = function(item) {
        var close = item.getProperty('autoclose');
        if (close && close === this.getProperty('close')) {
            if (this.getProperty('ignore')) {
                this.Clear();
                return [
                    [],
                    true
                ];
            }
            return [
                [
                    this.toMml()
                ],
                true
            ];
        }
        return _super.prototype.checkItem.call(this, item);
    };
    return AutoOpen2;
}(StackItem_js_1.BaseItem);
exports.AutoOpen = AutoOpen1;

},{"../StackItem.js":"5A1jm","../ParseUtil.js":"17LUu","../TexParser.js":"RI8aV"}],"5XPEV":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var SymbolMap_js_1 = require("../SymbolMap.js");
var PhysicsMethods_js_1 = require("./PhysicsMethods.js");
var TexConstants_js_1 = require("../TexConstants.js");
var ParseMethods_js_1 = require("../ParseMethods.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
new SymbolMap_js_1.CommandMap('Physics-automatic-bracing-macros', {
    'quantity': 'Quantity',
    'qty': 'Quantity',
    'pqty': [
        'Quantity',
        '(',
        ')',
        true
    ],
    'bqty': [
        'Quantity',
        '[',
        ']',
        true
    ],
    'vqty': [
        'Quantity',
        '|',
        '|',
        true
    ],
    'Bqty': [
        'Quantity',
        '{',
        '}',
        true
    ],
    'absolutevalue': [
        'Quantity',
        '|',
        '|',
        true
    ],
    'abs': [
        'Quantity',
        '|',
        '|',
        true
    ],
    'norm': [
        'Quantity',
        '\\|',
        '\\|',
        true
    ],
    'evaluated': 'Eval',
    'eval': 'Eval',
    'order': [
        'Quantity',
        '(',
        ')',
        true,
        'O',
        TexConstants_js_1.TexConstant.Variant.CALLIGRAPHIC
    ],
    'commutator': 'Commutator',
    'comm': 'Commutator',
    'anticommutator': [
        'Commutator',
        '\\{',
        '\\}'
    ],
    'acomm': [
        'Commutator',
        '\\{',
        '\\}'
    ],
    'poissonbracket': [
        'Commutator',
        '\\{',
        '\\}'
    ],
    'pb': [
        'Commutator',
        '\\{',
        '\\}'
    ]
}, PhysicsMethods_js_1.default);
new SymbolMap_js_1.CharacterMap('Physics-vector-chars', ParseMethods_js_1.default.mathchar0mi, {
    dotproduct: [
        '\u22C5',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.BOLD
        }
    ],
    vdot: [
        '\u22C5',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.BOLD
        }
    ],
    crossproduct: '\u00D7',
    cross: '\u00D7',
    cp: '\u00D7',
    gradientnabla: [
        '\u2207',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.BOLD
        }
    ],
    real: [
        '\u211C',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ],
    imaginary: [
        '\u2111',
        {
            mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL
        }
    ]
});
new SymbolMap_js_1.CommandMap('Physics-vector-macros', {
    'vectorbold': 'VectorBold',
    'vb': 'VectorBold',
    'vectorarrow': [
        'StarMacro',
        1,
        '\\vec{\\vb',
        '{#1}}'
    ],
    'va': [
        'StarMacro',
        1,
        '\\vec{\\vb',
        '{#1}}'
    ],
    'vectorunit': [
        'StarMacro',
        1,
        '\\hat{\\vb',
        '{#1}}'
    ],
    'vu': [
        'StarMacro',
        1,
        '\\hat{\\vb',
        '{#1}}'
    ],
    'gradient': [
        'OperatorApplication',
        '\\gradientnabla',
        '(',
        '['
    ],
    'grad': [
        'OperatorApplication',
        '\\gradientnabla',
        '(',
        '['
    ],
    'divergence': [
        'VectorOperator',
        '\\gradientnabla\\vdot',
        '(',
        '['
    ],
    'div': [
        'VectorOperator',
        '\\gradientnabla\\vdot',
        '(',
        '['
    ],
    'curl': [
        'VectorOperator',
        '\\gradientnabla\\crossproduct',
        '(',
        '['
    ],
    'laplacian': [
        'OperatorApplication',
        '\\nabla^2',
        '(',
        '['
    ]
}, PhysicsMethods_js_1.default);
new SymbolMap_js_1.CommandMap('Physics-expressions-macros', {
    'sin': 'Expression',
    'sinh': 'Expression',
    'arcsin': 'Expression',
    'asin': 'Expression',
    'cos': 'Expression',
    'cosh': 'Expression',
    'arccos': 'Expression',
    'acos': 'Expression',
    'tan': 'Expression',
    'tanh': 'Expression',
    'arctan': 'Expression',
    'atan': 'Expression',
    'csc': 'Expression',
    'csch': 'Expression',
    'arccsc': 'Expression',
    'acsc': 'Expression',
    'sec': 'Expression',
    'sech': 'Expression',
    'arcsec': 'Expression',
    'asec': 'Expression',
    'cot': 'Expression',
    'coth': 'Expression',
    'arccot': 'Expression',
    'acot': 'Expression',
    'exp': [
        'Expression',
        false
    ],
    'log': 'Expression',
    'ln': 'Expression',
    'det': [
        'Expression',
        false
    ],
    'Pr': [
        'Expression',
        false
    ],
    'tr': [
        'Expression',
        false
    ],
    'trace': [
        'Expression',
        false,
        'tr'
    ],
    'Tr': [
        'Expression',
        false
    ],
    'Trace': [
        'Expression',
        false,
        'Tr'
    ],
    'rank': 'NamedFn',
    'erf': [
        'Expression',
        false
    ],
    'Res': [
        'OperatorApplication',
        '{\\rm Res}',
        '(',
        '[',
        '{'
    ],
    'principalvalue': [
        'OperatorApplication',
        '{\\cal P}'
    ],
    'pv': [
        'OperatorApplication',
        '{\\cal P}'
    ],
    'PV': [
        'OperatorApplication',
        '{\\rm P.V.}'
    ],
    'Re': [
        'OperatorApplication',
        '{\\rm Re}',
        '{'
    ],
    'Im': [
        'OperatorApplication',
        '{\\rm Im}',
        '{'
    ],
    'sine': [
        'NamedFn',
        'sin'
    ],
    'hypsine': [
        'NamedFn',
        'sinh'
    ],
    'arcsine': [
        'NamedFn',
        'arcsin'
    ],
    'asine': [
        'NamedFn',
        'asin'
    ],
    'cosine': [
        'NamedFn',
        'cos'
    ],
    'hypcosine': [
        'NamedFn',
        'cosh'
    ],
    'arccosine': [
        'NamedFn',
        'arccos'
    ],
    'acosine': [
        'NamedFn',
        'acos'
    ],
    'tangent': [
        'NamedFn',
        'tan'
    ],
    'hyptangent': [
        'NamedFn',
        'tanh'
    ],
    'arctangent': [
        'NamedFn',
        'arctan'
    ],
    'atangent': [
        'NamedFn',
        'atan'
    ],
    'cosecant': [
        'NamedFn',
        'csc'
    ],
    'hypcosecant': [
        'NamedFn',
        'csch'
    ],
    'arccosecant': [
        'NamedFn',
        'arccsc'
    ],
    'acosecant': [
        'NamedFn',
        'acsc'
    ],
    'secant': [
        'NamedFn',
        'sec'
    ],
    'hypsecant': [
        'NamedFn',
        'sech'
    ],
    'arcsecant': [
        'NamedFn',
        'arcsec'
    ],
    'asecant': [
        'NamedFn',
        'asec'
    ],
    'cotangent': [
        'NamedFn',
        'cot'
    ],
    'hypcotangent': [
        'NamedFn',
        'coth'
    ],
    'arccotangent': [
        'NamedFn',
        'arccot'
    ],
    'acotangent': [
        'NamedFn',
        'acot'
    ],
    'exponential': [
        'NamedFn',
        'exp'
    ],
    'logarithm': [
        'NamedFn',
        'log'
    ],
    'naturallogarithm': [
        'NamedFn',
        'ln'
    ],
    'determinant': [
        'NamedFn',
        'det'
    ],
    'Probability': [
        'NamedFn',
        'Pr'
    ]
}, PhysicsMethods_js_1.default);
new SymbolMap_js_1.CommandMap('Physics-quick-quad-macros', {
    'qqtext': 'Qqtext',
    'qq': 'Qqtext',
    'qcomma': [
        'Macro',
        '\\qqtext*{,}'
    ],
    'qc': [
        'Macro',
        '\\qqtext*{,}'
    ],
    'qcc': [
        'Qqtext',
        'c.c.'
    ],
    'qif': [
        'Qqtext',
        'if'
    ],
    'qthen': [
        'Qqtext',
        'then'
    ],
    'qelse': [
        'Qqtext',
        'else'
    ],
    'qotherwise': [
        'Qqtext',
        'otherwise'
    ],
    'qunless': [
        'Qqtext',
        'unless'
    ],
    'qgiven': [
        'Qqtext',
        'given'
    ],
    'qusing': [
        'Qqtext',
        'using'
    ],
    'qassume': [
        'Qqtext',
        'assume'
    ],
    'qsince,': [
        'Qqtext',
        'since,'
    ],
    'qlet': [
        'Qqtext',
        'let'
    ],
    'qfor': [
        'Qqtext',
        'for'
    ],
    'qall': [
        'Qqtext',
        'all'
    ],
    'qeven': [
        'Qqtext',
        'even'
    ],
    'qodd': [
        'Qqtext',
        'odd'
    ],
    'qinteger': [
        'Qqtext',
        'integer'
    ],
    'qand': [
        'Qqtext',
        'and'
    ],
    'qor': [
        'Qqtext',
        'or'
    ],
    'qas': [
        'Qqtext',
        'as'
    ],
    'qin': [
        'Qqtext',
        'in'
    ]
}, PhysicsMethods_js_1.default);
new SymbolMap_js_1.CommandMap('Physics-derivative-macros', {
    'flatfrac': [
        'Macro',
        '\\left.#1\\middle/#2\\right.',
        2
    ],
    'differential': [
        'Differential',
        '{\\rm d}'
    ],
    'dd': [
        'Differential',
        '{\\rm d}'
    ],
    'variation': [
        'Differential',
        '\\delta'
    ],
    'var': [
        'Differential',
        '\\delta'
    ],
    'derivative': [
        'Derivative',
        2,
        '{\\rm d}'
    ],
    'dv': [
        'Derivative',
        2,
        '{\\rm d}'
    ],
    'partialderivative': [
        'Derivative',
        3,
        '\\partial'
    ],
    'pderivative': [
        'Derivative',
        3,
        '\\partial'
    ],
    'pdv': [
        'Derivative',
        3,
        '\\partial'
    ],
    'functionalderivative': [
        'Derivative',
        2,
        '\\delta'
    ],
    'fderivative': [
        'Derivative',
        2,
        '\\delta'
    ],
    'fdv': [
        'Derivative',
        2,
        '\\delta'
    ]
}, PhysicsMethods_js_1.default);
new SymbolMap_js_1.CommandMap('Physics-bra-ket-macros', {
    'bra': 'Bra',
    'ket': 'Ket',
    'innerproduct': 'BraKet',
    'braket': 'BraKet',
    'outerproduct': 'KetBra',
    'dyad': 'KetBra',
    'ketbra': 'KetBra',
    'op': 'KetBra',
    'expectationvalue': 'Expectation',
    'expval': 'Expectation',
    'ev': 'Expectation',
    'matrixelement': 'MatrixElement',
    'matrixel': 'MatrixElement',
    'mel': 'MatrixElement'
}, PhysicsMethods_js_1.default);
new SymbolMap_js_1.CommandMap('Physics-matrix-macros', {
    'matrixquantity': 'MatrixQuantity',
    'mqty': 'MatrixQuantity',
    'pmqty': [
        'Macro',
        '\\mqty(#1)',
        1
    ],
    'Pmqty': [
        'Macro',
        '\\mqty*(#1)',
        1
    ],
    'bmqty': [
        'Macro',
        '\\mqty[#1]',
        1
    ],
    'vmqty': [
        'Macro',
        '\\mqty|#1|',
        1
    ],
    'smallmatrixquantity': [
        'MatrixQuantity',
        true
    ],
    'smqty': [
        'MatrixQuantity',
        true
    ],
    'spmqty': [
        'Macro',
        '\\smqty(#1)',
        1
    ],
    'sPmqty': [
        'Macro',
        '\\smqty*(#1)',
        1
    ],
    'sbmqty': [
        'Macro',
        '\\smqty[#1]',
        1
    ],
    'svmqty': [
        'Macro',
        '\\smqty|#1|',
        1
    ],
    'matrixdeterminant': [
        'Macro',
        '\\vmqty{#1}',
        1
    ],
    'mdet': [
        'Macro',
        '\\vmqty{#1}',
        1
    ],
    'smdet': [
        'Macro',
        '\\svmqty{#1}',
        1
    ],
    'identitymatrix': 'IdentityMatrix',
    'imat': 'IdentityMatrix',
    'xmatrix': 'XMatrix',
    'xmat': 'XMatrix',
    'zeromatrix': [
        'Macro',
        '\\xmat{0}{#1}{#2}',
        2
    ],
    'zmat': [
        'Macro',
        '\\xmat{0}{#1}{#2}',
        2
    ],
    'paulimatrix': 'PauliMatrix',
    'pmat': 'PauliMatrix',
    'diagonalmatrix': 'DiagonalMatrix',
    'dmat': 'DiagonalMatrix',
    'antidiagonalmatrix': [
        'DiagonalMatrix',
        true
    ],
    'admat': [
        'DiagonalMatrix',
        true
    ]
}, PhysicsMethods_js_1.default);
new SymbolMap_js_1.EnvironmentMap('Physics-aux-envs', ParseMethods_js_1.default.environment, {
    smallmatrix: [
        'Array',
        null,
        null,
        null,
        'c',
        '0.333em',
        '.2em',
        'S',
        1
    ]
}, PhysicsMethods_js_1.default);
new SymbolMap_js_1.MacroMap('Physics-characters', {
    '|': [
        'AutoClose',
        MmlNode_js_1.TEXCLASS.ORD
    ],
    ')': 'AutoClose',
    ']': 'AutoClose'
}, PhysicsMethods_js_1.default);

},{"../SymbolMap.js":"19zvT","./PhysicsMethods.js":"2U9hp","../TexConstants.js":"1hJzZ","../ParseMethods.js":"2Nz4D","../../../core/MmlTree/MmlNode.js":"5Ogy3"}],"2U9hp":[function(require,module,exports) {
"use strict";
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
var BaseMethods_js_1 = require("../base/BaseMethods.js");
var TexParser_js_1 = require("../TexParser.js");
var TexError_js_1 = require("../TexError.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var NodeUtil_js_1 = require("../NodeUtil.js");
var NodeFactory_js_1 = require("../NodeFactory.js");
var PhysicsMethods = {
};
var pairs = {
    '(': ')',
    '[': ']',
    '{': '}',
    '|': '|'
};
var biggs = /^(b|B)i(g{1,2})$/;
PhysicsMethods.Quantity = function(parser, name, open, close, arg, named, variant) {
    if (open === void 0) open = '(';
    if (close === void 0) close = ')';
    if (arg === void 0) arg = false;
    if (named === void 0) named = '';
    if (variant === void 0) variant = '';
    var star = arg ? parser.GetStar() : false;
    var next = parser.GetNext();
    var position = parser.i;
    var big = null;
    if (next === '\\') {
        parser.i++;
        big = parser.GetCS();
        if (!big.match(biggs)) {
            var empty = parser.create('node', 'mrow');
            parser.Push(ParseUtil_js_1.default.fenced(parser.configuration, open, empty, close));
            parser.i = position;
            return;
        }
        next = parser.GetNext();
    }
    var right = pairs[next];
    if (arg && next !== '{') throw new TexError_js_1.default('MissingArgFor', 'Missing argument for %1', parser.currentCS);
    if (!right) {
        var empty = parser.create('node', 'mrow');
        parser.Push(ParseUtil_js_1.default.fenced(parser.configuration, open, empty, close));
        parser.i = position;
        return;
    }
    if (named) {
        var mml = parser.create('token', 'mi', {
            texClass: MmlNode_js_1.TEXCLASS.OP
        }, named);
        if (variant) NodeUtil_js_1.default.setAttribute(mml, 'mathvariant', variant);
        parser.Push(parser.itemFactory.create('fn', mml));
    }
    if (next === '{') {
        var argument = parser.GetArgument(name);
        next = arg ? open : '\\{';
        right = arg ? close : '\\}';
        argument = star ? next + ' ' + argument + ' ' + right : big ? '\\' + big + 'l' + next + ' ' + argument + ' ' + '\\' + big + 'r' + right : '\\left' + next + ' ' + argument + ' ' + '\\right' + right;
        parser.Push(new TexParser_js_1.default(argument, parser.stack.env, parser.configuration).mml());
        return;
    }
    if (arg) {
        next = open;
        right = close;
    }
    parser.i++;
    parser.Push(parser.itemFactory.create('auto open').setProperties({
        open: next,
        close: right,
        big: big
    }));
};
PhysicsMethods.Eval = function(parser, name) {
    var star = parser.GetStar();
    var next = parser.GetNext();
    if (next === '{') {
        var arg = parser.GetArgument(name);
        var replace = '\\left. ' + (star ? '\\smash{' + arg + '}' : arg) + ' ' + '\\vphantom{\\int}\\right|';
        parser.string = parser.string.slice(0, parser.i) + replace + parser.string.slice(parser.i);
        return;
    }
    if (next === '(' || next === '[') {
        parser.i++;
        parser.Push(parser.itemFactory.create('auto open').setProperties({
            open: next,
            close: '|',
            smash: star,
            right: '\\vphantom{\\int}'
        }));
        return;
    }
    throw new TexError_js_1.default('MissingArgFor', 'Missing argument for %1', parser.currentCS);
};
PhysicsMethods.Commutator = function(parser, name, open, close) {
    if (open === void 0) open = '[';
    if (close === void 0) close = ']';
    var star = parser.GetStar();
    var next = parser.GetNext();
    var big = null;
    if (next === '\\') {
        parser.i++;
        big = parser.GetCS();
        if (!big.match(biggs)) throw new TexError_js_1.default('MissingArgFor', 'Missing argument for %1', parser.currentCS);
        next = parser.GetNext();
    }
    if (next !== '{') throw new TexError_js_1.default('MissingArgFor', 'Missing argument for %1', parser.currentCS);
    var arg1 = parser.GetArgument(name);
    var arg2 = parser.GetArgument(name);
    var argument = arg1 + ',' + arg2;
    argument = star ? open + ' ' + argument + ' ' + close : big ? '\\' + big + 'l' + open + ' ' + argument + ' ' + '\\' + big + 'r' + close : '\\left' + open + ' ' + argument + ' ' + '\\right' + close;
    parser.Push(new TexParser_js_1.default(argument, parser.stack.env, parser.configuration).mml());
};
var latinCap = [
    65,
    90
];
var latinSmall = [
    97,
    122
];
var greekCap = [
    913,
    937
];
var greekSmall = [
    945,
    969
];
var digits = [
    48,
    57
];
function inRange(value, range) {
    return value >= range[0] && value <= range[1];
}
function createVectorToken(factory, kind, def, text) {
    var parser = factory.configuration.parser;
    var token = NodeFactory_js_1.NodeFactory.createToken(factory, kind, def, text);
    var code = text.codePointAt(0);
    if (text.length === 1 && !parser.stack.env.font && parser.stack.env.vectorFont && (inRange(code, latinCap) || inRange(code, latinSmall) || inRange(code, greekCap) || inRange(code, digits) || inRange(code, greekSmall) && parser.stack.env.vectorStar || NodeUtil_js_1.default.getAttribute(token, 'accent'))) NodeUtil_js_1.default.setAttribute(token, 'mathvariant', parser.stack.env.vectorFont);
    return token;
}
PhysicsMethods.VectorBold = function(parser, name) {
    var star = parser.GetStar();
    var arg = parser.GetArgument(name);
    var oldToken = parser.configuration.nodeFactory.get('token');
    var oldFont = parser.stack.env.font;
    delete parser.stack.env.font;
    parser.configuration.nodeFactory.set('token', createVectorToken);
    parser.stack.env.vectorFont = star ? 'bold-italic' : 'bold';
    parser.stack.env.vectorStar = star;
    var node = new TexParser_js_1.default(arg, parser.stack.env, parser.configuration).mml();
    if (oldFont) parser.stack.env.font = oldFont;
    delete parser.stack.env.vectorFont;
    delete parser.stack.env.vectorStar;
    parser.configuration.nodeFactory.set('token', oldToken);
    parser.Push(node);
};
PhysicsMethods.StarMacro = function(parser, name, argcount) {
    var parts = [];
    for(var _i = 3; _i < arguments.length; _i++)parts[_i - 3] = arguments[_i];
    var star = parser.GetStar();
    var args = [];
    if (argcount) for(var i = args.length; i < argcount; i++)args.push(parser.GetArgument(name));
    var macro = parts.join(star ? '*' : '');
    macro = ParseUtil_js_1.default.substituteArgs(parser, args, macro);
    parser.string = ParseUtil_js_1.default.addArgs(parser, macro, parser.string.slice(parser.i));
    parser.i = 0;
    if ((++parser.macroCount) > parser.configuration.options['maxMacros']) throw new TexError_js_1.default('MaxMacroSub1', "MathJax maximum macro substitution count exceeded; is there a recursive macro call?");
};
var vectorApplication = function(parser, kind, name, operator, fences) {
    var op = new TexParser_js_1.default(operator, parser.stack.env, parser.configuration).mml();
    parser.Push(parser.itemFactory.create(kind, op));
    var left = parser.GetNext();
    var right = pairs[left];
    if (!right) return;
    var lfence = '', rfence = '', arg = '';
    var enlarge = fences.indexOf(left) !== -1;
    if (left === '{') {
        arg = parser.GetArgument(name);
        lfence = enlarge ? '\\left\\{' : '';
        rfence = enlarge ? '\\right\\}' : '';
        var macro = lfence + ' ' + arg + ' ' + rfence;
        parser.string = macro + parser.string.slice(parser.i);
        parser.i = 0;
        return;
    }
    if (!enlarge) return;
    parser.i++;
    parser.Push(parser.itemFactory.create('auto open').setProperties({
        open: left,
        close: right
    }));
};
PhysicsMethods.OperatorApplication = function(parser, name, operator) {
    var fences = [];
    for(var _i = 3; _i < arguments.length; _i++)fences[_i - 3] = arguments[_i];
    vectorApplication(parser, 'fn', name, operator, fences);
};
PhysicsMethods.VectorOperator = function(parser, name, operator) {
    var fences = [];
    for(var _i = 3; _i < arguments.length; _i++)fences[_i - 3] = arguments[_i];
    vectorApplication(parser, 'mml', name, operator, fences);
};
PhysicsMethods.Expression = function(parser, name, opt, id) {
    if (opt === void 0) opt = true;
    if (id === void 0) id = '';
    id = id || name.slice(1);
    var exp = opt ? parser.GetBrackets(name) : null;
    var mml = parser.create('token', 'mi', {
        texClass: MmlNode_js_1.TEXCLASS.OP
    }, id);
    if (exp) {
        var sup = new TexParser_js_1.default(exp, parser.stack.env, parser.configuration).mml();
        mml = parser.create('node', 'msup', [
            mml,
            sup
        ]);
    }
    parser.Push(parser.itemFactory.create('fn', mml));
    if (parser.GetNext() !== '(') return;
    parser.i++;
    parser.Push(parser.itemFactory.create('auto open').setProperties({
        open: '(',
        close: ')'
    }));
};
PhysicsMethods.Qqtext = function(parser, name, text) {
    var star = parser.GetStar();
    var arg = text ? text : parser.GetArgument(name);
    var replace = (star ? '' : '\\quad') + '\\text{' + arg + '}\\quad ';
    parser.string = parser.string.slice(0, parser.i) + replace + parser.string.slice(parser.i);
};
PhysicsMethods.Differential = function(parser, name, op) {
    var optArg = parser.GetBrackets(name);
    var power = optArg != null ? '^{' + optArg + '}' : ' ';
    var parens = parser.GetNext() === '(';
    var braces = parser.GetNext() === '{';
    var macro = op + power;
    if (!(parens || braces)) {
        macro += parser.GetArgument(name, true) || '';
        var mml = new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml();
        parser.Push(mml);
        return;
    }
    if (braces) {
        macro += parser.GetArgument(name);
        var mml = new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml();
        parser.Push(parser.create('node', 'TeXAtom', [
            mml
        ], {
            texClass: MmlNode_js_1.TEXCLASS.OP
        }));
        return;
    }
    parser.Push(new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml());
    parser.i++;
    parser.Push(parser.itemFactory.create('auto open').setProperties({
        open: '(',
        close: ')'
    }));
};
PhysicsMethods.Derivative = function(parser, name, argMax, op) {
    var star = parser.GetStar();
    var optArg = parser.GetBrackets(name);
    var argCounter = 1;
    var args = [];
    args.push(parser.GetArgument(name));
    while(parser.GetNext() === '{' && argCounter < argMax){
        args.push(parser.GetArgument(name));
        argCounter++;
    }
    var ignore = false;
    var power1 = ' ';
    var power2 = ' ';
    if (argMax > 2 && args.length > 2) {
        power1 = '^{' + (args.length - 1) + '}';
        ignore = true;
    } else if (optArg != null) {
        if (argMax > 2 && args.length > 1) ignore = true;
        power1 = '^{' + optArg + '}';
        power2 = power1;
    }
    var frac = star ? '\\flatfrac' : '\\frac';
    var first = args.length > 1 ? args[0] : '';
    var second = args.length > 1 ? args[1] : args[0];
    var rest = '';
    for(var i = 2, arg = void 0; arg = args[i]; i++)rest += op + ' ' + arg;
    var macro = frac + '{' + op + power1 + first + '}' + '{' + op + ' ' + second + power2 + ' ' + rest + '}';
    parser.Push(new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml());
    if (parser.GetNext() === '(') {
        parser.i++;
        parser.Push(parser.itemFactory.create('auto open').setProperties({
            open: '(',
            close: ')',
            ignore: ignore
        }));
    }
};
PhysicsMethods.Bra = function(parser, name) {
    var starBra = parser.GetStar();
    var bra = parser.GetArgument(name);
    var ket = '';
    var hasKet = false;
    var starKet = false;
    if (parser.GetNext() === '\\') {
        var saveI = parser.i;
        parser.i++;
        var cs = parser.GetCS();
        var symbol = parser.lookup('macro', cs);
        if (symbol && symbol.symbol === 'ket') {
            hasKet = true;
            saveI = parser.i;
            starKet = parser.GetStar();
            if (parser.GetNext() === '{') ket = parser.GetArgument(cs, true);
            else {
                parser.i = saveI;
                starKet = false;
            }
        } else parser.i = saveI;
    }
    var macro = '';
    if (hasKet) macro = starBra || starKet ? "\\langle{" + bra + "}\\vert{" + ket + "}\\rangle" : "\\left\\langle{" + bra + "}\\middle\\vert{" + ket + "}\\right\\rangle";
    else macro = starBra || starKet ? "\\langle{" + bra + "}\\vert" : "\\left\\langle{" + bra + "}\\right\\vert{" + ket + "}";
    parser.Push(new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml());
};
PhysicsMethods.Ket = function(parser, name) {
    var star = parser.GetStar();
    var ket = parser.GetArgument(name);
    var macro = star ? "\\vert{" + ket + "}\\rangle" : "\\left\\vert{" + ket + "}\\right\\rangle";
    parser.Push(new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml());
};
PhysicsMethods.BraKet = function(parser, name) {
    var star = parser.GetStar();
    var bra = parser.GetArgument(name);
    var ket = null;
    if (parser.GetNext() === '{') ket = parser.GetArgument(name, true);
    var macro = '';
    if (ket == null) macro = star ? "\\langle{" + bra + "}\\vert{" + bra + "}\\rangle" : "\\left\\langle{" + bra + "}\\middle\\vert{" + bra + "}\\right\\rangle";
    else macro = star ? "\\langle{" + bra + "}\\vert{" + ket + "}\\rangle" : "\\left\\langle{" + bra + "}\\middle\\vert{" + ket + "}\\right\\rangle";
    parser.Push(new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml());
};
PhysicsMethods.KetBra = function(parser, name) {
    var star = parser.GetStar();
    var ket = parser.GetArgument(name);
    var bra = null;
    if (parser.GetNext() === '{') bra = parser.GetArgument(name, true);
    var macro = '';
    if (bra == null) macro = star ? "\\vert{" + ket + "}\\rangle\\!\\langle{" + ket + "}\\vert" : "\\left\\vert{" + ket + "}\\middle\\rangle\\!\\middle\\langle{" + ket + "}\\right\\vert";
    else macro = star ? "\\vert{" + ket + "}\\rangle\\!\\langle{" + bra + "}\\vert" : "\\left\\vert{" + ket + "}\\middle\\rangle\\!\\middle\\langle{" + bra + "}\\right\\vert";
    parser.Push(new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml());
};
function outputBraket(_a, star1, star2) {
    var _b = __read(_a, 3), arg1 = _b[0], arg2 = _b[1], arg3 = _b[2];
    return star1 && star2 ? "\\left\\langle{" + arg1 + "}\\middle\\vert{" + arg2 + "}\\middle\\vert{" + arg3 + "}\\right\\rangle" : star1 ? "\\langle{" + arg1 + "}\\vert{" + arg2 + "}\\vert{" + arg3 + "}\\rangle" : "\\left\\langle{" + arg1 + "}\\right\\vert{" + arg2 + "}\\left\\vert{" + arg3 + "}\\right\\rangle";
}
PhysicsMethods.Expectation = function(parser, name) {
    var star1 = parser.GetStar();
    var star2 = star1 && parser.GetStar();
    var arg1 = parser.GetArgument(name);
    var arg2 = null;
    if (parser.GetNext() === '{') arg2 = parser.GetArgument(name, true);
    var macro = arg1 && arg2 ? outputBraket([
        arg2,
        arg1,
        arg2
    ], star1, star2) : star1 ? "\\langle {" + arg1 + "} \\rangle" : "\\left\\langle {" + arg1 + "} \\right\\rangle";
    parser.Push(new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml());
};
PhysicsMethods.MatrixElement = function(parser, name) {
    var star1 = parser.GetStar();
    var star2 = star1 && parser.GetStar();
    var arg1 = parser.GetArgument(name);
    var arg2 = parser.GetArgument(name);
    var arg3 = parser.GetArgument(name);
    var macro = outputBraket([
        arg1,
        arg2,
        arg3
    ], star1, star2);
    parser.Push(new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml());
};
PhysicsMethods.MatrixQuantity = function(parser, name, small) {
    var star = parser.GetStar();
    var next = parser.GetNext();
    var array = small ? 'smallmatrix' : 'array';
    var arg = '';
    var open = '';
    var close = '';
    switch(next){
        case '{':
            arg = parser.GetArgument(name);
            break;
        case '(':
            parser.i++;
            open = star ? '\\lgroup' : '(';
            close = star ? '\\rgroup' : ')';
            arg = parser.GetUpTo(name, ')');
            break;
        case '[':
            parser.i++;
            open = '[';
            close = ']';
            arg = parser.GetUpTo(name, ']');
            break;
        case '|':
            parser.i++;
            open = '|';
            close = '|';
            arg = parser.GetUpTo(name, '|');
            break;
        default:
            open = '(';
            close = ')';
            break;
    }
    var macro = (open ? '\\left' : '') + open + '\\begin{' + array + '}{} ' + arg + '\\end{' + array + '}' + (open ? '\\right' : '') + close;
    parser.Push(new TexParser_js_1.default(macro, parser.stack.env, parser.configuration).mml());
};
PhysicsMethods.IdentityMatrix = function(parser, name) {
    var arg = parser.GetArgument(name);
    var size = parseInt(arg, 10);
    if (isNaN(size)) throw new TexError_js_1.default('InvalidNumber', 'Invalid number');
    if (size <= 1) {
        parser.string = '1' + parser.string.slice(parser.i);
        parser.i = 0;
        return;
    }
    var zeros = Array(size).fill('0');
    var columns = [];
    for(var i = 0; i < size; i++){
        var row = zeros.slice();
        row[i] = '1';
        columns.push(row.join(' & '));
    }
    parser.string = columns.join('\\\\ ') + parser.string.slice(parser.i);
    parser.i = 0;
};
PhysicsMethods.XMatrix = function(parser, name) {
    var star = parser.GetStar();
    var arg1 = parser.GetArgument(name);
    var arg2 = parser.GetArgument(name);
    var arg3 = parser.GetArgument(name);
    var n = parseInt(arg2, 10);
    var m = parseInt(arg3, 10);
    if (isNaN(n) || isNaN(m) || m.toString() !== arg3 || n.toString() !== arg2) throw new TexError_js_1.default('InvalidNumber', 'Invalid number');
    n = n < 1 ? 1 : n;
    m = m < 1 ? 1 : m;
    if (!star) {
        var row = Array(m).fill(arg1).join(' & ');
        var matrix_1 = Array(n).fill(row).join('\\\\ ');
        parser.string = matrix_1 + parser.string.slice(parser.i);
        parser.i = 0;
        return;
    }
    var matrix = '';
    if (n === 1 && m === 1) matrix = arg1;
    else if (n === 1) {
        var row = [];
        for(var i = 1; i <= m; i++)row.push(arg1 + "_{" + i + "}");
        matrix = row.join(' & ');
    } else if (m === 1) {
        var row = [];
        for(var i = 1; i <= n; i++)row.push(arg1 + "_{" + i + "}");
        matrix = row.join('\\\\ ');
    } else {
        var rows = [];
        for(var i = 1; i <= n; i++){
            var row = [];
            for(var j = 1; j <= m; j++)row.push(arg1 + "_{{" + i + "}{" + j + "}}");
            rows.push(row.join(' & '));
        }
        matrix = rows.join('\\\\ ');
    }
    parser.string = matrix + parser.string.slice(parser.i);
    parser.i = 0;
    return;
};
PhysicsMethods.PauliMatrix = function(parser, name) {
    var arg = parser.GetArgument(name);
    var matrix = arg.slice(1);
    switch(arg[0]){
        case '0':
            matrix += ' 1 & 0\\\\ 0 & 1';
            break;
        case '1':
        case 'x':
            matrix += ' 0 & 1\\\\ 1 & 0';
            break;
        case '2':
        case 'y':
            matrix += ' 0 & -i\\\\ i & 0';
            break;
        case '3':
        case 'z':
            matrix += ' 1 & 0\\\\ 0 & -1';
            break;
        default:
    }
    parser.string = matrix + parser.string.slice(parser.i);
    parser.i = 0;
};
PhysicsMethods.DiagonalMatrix = function(parser, name, anti) {
    if (parser.GetNext() !== '{') return;
    var startI = parser.i;
    parser.GetArgument(name);
    var endI = parser.i;
    parser.i = startI + 1;
    var elements = [];
    var element = '';
    var currentI = parser.i;
    while(currentI < endI){
        try {
            element = parser.GetUpTo(name, ',');
        } catch (e) {
            parser.i = endI;
            elements.push(parser.string.slice(currentI, endI - 1));
            break;
        }
        if (parser.i >= endI) {
            elements.push(parser.string.slice(currentI, endI));
            break;
        }
        currentI = parser.i;
        elements.push(element);
    }
    parser.string = makeDiagMatrix(elements, anti) + parser.string.slice(endI);
    parser.i = 0;
};
function makeDiagMatrix(elements, anti) {
    var length = elements.length;
    var matrix = [];
    for(var i = 0; i < length; i++)matrix.push(Array(anti ? length - i : i + 1).join('&') + '\\mqty{' + elements[i] + '}');
    return matrix.join('\\\\ ');
}
PhysicsMethods.AutoClose = function(parser, fence, _texclass) {
    var mo = parser.create('token', 'mo', {
        stretchy: false
    }, fence);
    var item = parser.itemFactory.create('mml', mo).setProperties({
        autoclose: fence
    });
    parser.Push(item);
};
PhysicsMethods.Macro = BaseMethods_js_1.default.Macro;
PhysicsMethods.NamedFn = BaseMethods_js_1.default.NamedFn;
PhysicsMethods.Array = BaseMethods_js_1.default.Array;
exports.default = PhysicsMethods;

},{"../base/BaseMethods.js":"1F5Sh","../TexParser.js":"RI8aV","../TexError.js":"7EfV4","../../../core/MmlTree/MmlNode.js":"5Ogy3","../ParseUtil.js":"17LUu","../NodeUtil.js":"If5yR","../NodeFactory.js":"5UK8M"}],"3wcIc":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.TagFormatConfiguration = exports.tagformatConfig = void 0;
var Configuration_js_1 = require("../Configuration.js");
var Tags_js_1 = require("../Tags.js");
var tagID = 0;
function tagformatConfig(config, jax) {
    var tags = jax.parseOptions.options.tags;
    if (tags !== 'base' && config.tags.hasOwnProperty(tags)) Tags_js_1.TagsFactory.add(tags, config.tags[tags]);
    var TagClass = Tags_js_1.TagsFactory.create(jax.parseOptions.options.tags).constructor;
    var TagFormat1 = function(_super) {
        __extends(TagFormat2, _super);
        function TagFormat2() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        TagFormat2.prototype.formatNumber = function(n) {
            return jax.parseOptions.options.tagformat.number(n);
        };
        TagFormat2.prototype.formatTag = function(tag) {
            return jax.parseOptions.options.tagformat.tag(tag);
        };
        TagFormat2.prototype.formatId = function(id) {
            return jax.parseOptions.options.tagformat.id(id);
        };
        TagFormat2.prototype.formatUrl = function(id, base) {
            return jax.parseOptions.options.tagformat.url(id, base);
        };
        return TagFormat2;
    }(TagClass);
    tagID++;
    var tagName = 'configTags-' + tagID;
    Tags_js_1.TagsFactory.add(tagName, TagFormat1);
    jax.parseOptions.options.tags = tagName;
}
exports.tagformatConfig = tagformatConfig;
exports.TagFormatConfiguration = Configuration_js_1.Configuration.create('tagformat', {
    config: [
        tagformatConfig,
        10
    ],
    options: {
        tagformat: {
            number: function(n) {
                return n.toString();
            },
            tag: function(tag) {
                return '(' + tag + ')';
            },
            id: function(id) {
                return 'mjx-eqn:' + id.replace(/\s/g, '_');
            },
            url: function(id, base) {
                return base + '#' + encodeURIComponent(id);
            }
        }
    }
});

},{"../Configuration.js":"2ZNEp","../Tags.js":"5I8xM"}],"2SwgW":[function(require,module,exports) {
"use strict";
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.TextMacrosConfiguration = exports.textBase = void 0;
var Configuration_js_1 = require("../Configuration.js");
var ParseOptions_js_1 = require("../ParseOptions.js");
var Tags_js_1 = require("../Tags.js");
var BaseItems_js_1 = require("../base/BaseItems.js");
var TextParser_js_1 = require("./TextParser.js");
var TextMacrosMethods_js_1 = require("./TextMacrosMethods.js");
require("./TextMacrosMappings.js");
exports.textBase = Configuration_js_1.Configuration.local({
    handler: {
        character: [
            'command',
            'text-special'
        ],
        macro: [
            'text-macros'
        ]
    },
    fallback: {
        character: function(parser, c) {
            parser.text += c;
        },
        macro: function(parser, name) {
            var texParser = parser.texParser;
            var macro = texParser.lookup('macro', name);
            if (macro && macro._func !== TextMacrosMethods_js_1.TextMacrosMethods.Macro) parser.Error('MathMacro', '%1 is only supported in math mode', '\\' + name);
            texParser.parse('macro', [
                parser,
                name
            ]);
        }
    },
    items: (_a = {
    }, _a[BaseItems_js_1.StartItem.prototype.kind] = BaseItems_js_1.StartItem, _a[BaseItems_js_1.StopItem.prototype.kind] = BaseItems_js_1.StopItem, _a[BaseItems_js_1.MmlItem.prototype.kind] = BaseItems_js_1.MmlItem, _a[BaseItems_js_1.StyleItem.prototype.kind] = BaseItems_js_1.StyleItem, _a)
});
function internalMath(parser, text, level, mathvariant) {
    var config = parser.configuration.packageData.get('textmacros');
    if (!(parser instanceof TextParser_js_1.TextParser)) config.texParser = parser;
    return [
        new TextParser_js_1.TextParser(text, mathvariant ? {
            mathvariant: mathvariant
        } : {
        }, config.parseOptions, level).mml()
    ];
}
exports.TextMacrosConfiguration = Configuration_js_1.Configuration.create('textmacros', {
    config: function(_config, jax) {
        var textConf = new Configuration_js_1.ParserConfiguration([]);
        textConf.append(exports.textBase);
        textConf.init();
        var parseOptions = new ParseOptions_js_1.default(textConf, []);
        parseOptions.options = jax.parseOptions.options;
        textConf.config(jax);
        Tags_js_1.TagsFactory.addTags(textConf.tags);
        parseOptions.tags = Tags_js_1.TagsFactory.getDefault();
        parseOptions.tags.configuration = parseOptions;
        parseOptions.packageData = jax.parseOptions.packageData;
        parseOptions.packageData.set('textmacros', {
            parseOptions: parseOptions,
            jax: jax,
            texParser: null
        });
        parseOptions.options.internalMath = internalMath;
    },
    preprocessors: [
        function(data) {
            var config = data.data.packageData.get('textmacros');
            config.parseOptions.nodeFactory.setMmlFactory(config.jax.mmlFactory);
        }
    ]
});

},{"../Configuration.js":"2ZNEp","../ParseOptions.js":"7bnKU","../Tags.js":"5I8xM","../base/BaseItems.js":"7vCsT","./TextParser.js":"2RsaP","./TextMacrosMethods.js":"2tRDD","./TextMacrosMappings.js":"40Tm7"}],"2RsaP":[function(require,module,exports) {
"use strict";
var __extends = this && this.__extends || function() {
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || ({
            __proto__: []
        }) instanceof Array && function(d1, b1) {
            d1.__proto__ = b1;
        } || function(d1, b1) {
            for(var p in b1)if (Object.prototype.hasOwnProperty.call(b1, p)) d1[p] = b1[p];
        };
        return extendStatics(d, b);
    };
    return function(d, b) {
        if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
            this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
}();
var __values = this && this.__values || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = this && this.__read || function(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while((n === void 0 || (n--) > 0) && !(r = i.next()).done)ar.push(r.value);
    } catch (error) {
        e = {
            error: error
        };
    } finally{
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        } finally{
            if (e) throw e.error;
        }
    }
    return ar;
};
var __spreadArray = this && this.__spreadArray || function(to, from) {
    for(var i = 0, il = from.length, j = to.length; i < il; i++, j++)to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.TextParser = void 0;
var TexParser_js_1 = require("../TexParser.js");
var TexError_js_1 = require("../TexError.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var MmlNode_js_1 = require("../../../core/MmlTree/MmlNode.js");
var NodeUtil_js_1 = require("../NodeUtil.js");
var BaseItems_js_1 = require("../base/BaseItems.js");
var TextParser1 = function(_super) {
    __extends(TextParser2, _super);
    function TextParser2(text, env, configuration, level) {
        var _this = _super.call(this, text, env, configuration) || this;
        _this.level = level;
        return _this;
    }
    Object.defineProperty(TextParser2.prototype, "texParser", {
        get: function() {
            return this.configuration.packageData.get('textmacros').texParser;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextParser2.prototype, "tags", {
        get: function() {
            return this.texParser.tags;
        },
        enumerable: false,
        configurable: true
    });
    TextParser2.prototype.mml = function() {
        return this.level != null ? this.create('node', 'mstyle', this.nodes, {
            displaystyle: false,
            scriptlevel: this.level
        }) : this.nodes.length === 1 ? this.nodes[0] : this.create('node', 'mrow', this.nodes);
    };
    TextParser2.prototype.Parse = function() {
        this.text = '';
        this.nodes = [];
        this.envStack = [];
        _super.prototype.Parse.call(this);
    };
    TextParser2.prototype.saveText = function() {
        if (this.text) {
            var mathvariant = this.stack.env.mathvariant;
            var text = ParseUtil_js_1.default.internalText(this, this.text, mathvariant ? {
                mathvariant: mathvariant
            } : {
            });
            this.text = '';
            this.Push(text);
        }
    };
    TextParser2.prototype.Push = function(mml) {
        if (this.text) this.saveText();
        if (mml instanceof BaseItems_js_1.StopItem) return _super.prototype.Push.call(this, mml);
        if (mml instanceof BaseItems_js_1.StyleItem) {
            this.stack.env.mathcolor = this.stack.env.color;
            return;
        }
        if (mml instanceof MmlNode_js_1.AbstractMmlNode) {
            this.addAttributes(mml);
            this.nodes.push(mml);
        }
    };
    TextParser2.prototype.PushMath = function(mml) {
        var e_1, _a;
        var env = this.stack.env;
        try {
            for(var _b = __values([
                'mathsize',
                'mathcolor'
            ]), _c = _b.next(); !_c.done; _c = _b.next()){
                var name_1 = _c.value;
                if (env[name_1] && !mml.attributes.getExplicit(name_1)) {
                    if (!mml.isToken && !mml.isKind('mstyle')) mml = this.create('node', 'mstyle', [
                        mml
                    ]);
                    NodeUtil_js_1.default.setAttribute(mml, name_1, env[name_1]);
                }
            }
        } catch (e_1_1) {
            e_1 = {
                error: e_1_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_1) throw e_1.error;
            }
        }
        if (mml.isInferred) mml = this.create('node', 'mrow', mml.childNodes);
        this.nodes.push(mml);
    };
    TextParser2.prototype.addAttributes = function(mml) {
        var e_2, _a;
        var env = this.stack.env;
        if (!mml.isToken) return;
        try {
            for(var _b = __values([
                'mathsize',
                'mathcolor',
                'mathvariant'
            ]), _c = _b.next(); !_c.done; _c = _b.next()){
                var name_2 = _c.value;
                if (env[name_2] && !mml.attributes.getExplicit(name_2)) NodeUtil_js_1.default.setAttribute(mml, name_2, env[name_2]);
            }
        } catch (e_2_1) {
            e_2 = {
                error: e_2_1
            };
        } finally{
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            } finally{
                if (e_2) throw e_2.error;
            }
        }
    };
    TextParser2.prototype.ParseTextArg = function(name, env) {
        var text = this.GetArgument(name);
        env = Object.assign(Object.assign({
        }, this.stack.env), env);
        return new TextParser2(text, env, this.configuration).mml();
    };
    TextParser2.prototype.ParseArg = function(name) {
        return new TextParser2(this.GetArgument(name), this.stack.env, this.configuration).mml();
    };
    TextParser2.prototype.Error = function(id, message) {
        var args = [];
        for(var _i = 2; _i < arguments.length; _i++)args[_i - 2] = arguments[_i];
        throw new (TexError_js_1.default.bind.apply(TexError_js_1.default, __spreadArray([
            void 0,
            id,
            message
        ], __read(args))))();
    };
    return TextParser2;
}(TexParser_js_1.default);
exports.TextParser = TextParser1;

},{"../TexParser.js":"RI8aV","../TexError.js":"7EfV4","../ParseUtil.js":"17LUu","../../../core/MmlTree/MmlNode.js":"5Ogy3","../NodeUtil.js":"If5yR","../base/BaseItems.js":"7vCsT"}],"2tRDD":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.TextMacrosMethods = void 0;
var TexParser_js_1 = require("../TexParser.js");
var Retries_js_1 = require("../../../util/Retries.js");
var BaseMethods_js_1 = require("../base/BaseMethods.js");
exports.TextMacrosMethods = {
    Comment: function(parser, _c) {
        while(parser.i < parser.string.length && parser.string.charAt(parser.i) !== '\n')parser.i++;
        parser.i++;
    },
    Math: function(parser, open) {
        parser.saveText();
        var i = parser.i;
        var j, c;
        var braces = 0;
        while(c = parser.GetNext()){
            j = parser.i++;
            switch(c){
                case '\\':
                    var cs = parser.GetCS();
                    if (cs === ')') c = '\\(';
                case '$':
                    if (braces === 0 && open === c) {
                        var config = parser.texParser.configuration;
                        var mml = new TexParser_js_1.default(parser.string.substr(i, j - i), parser.stack.env, config).mml();
                        parser.PushMath(mml);
                        return;
                    }
                    break;
                case '{':
                    braces++;
                    break;
                case '}':
                    if (braces === 0) parser.Error('ExtraCloseMissingOpen', 'Extra close brace or missing open brace');
                    braces--;
                    break;
            }
        }
        parser.Error('MathNotTerminated', 'Math-mode is not properly terminated');
    },
    MathModeOnly: function(parser, c) {
        parser.Error('MathModeOnly', '\'%1\' allowed only in math mode', c);
    },
    Misplaced: function(parser, c) {
        parser.Error('Misplaced', '\'%1\' can not be used here', c);
    },
    OpenBrace: function(parser, _c) {
        var env = parser.stack.env;
        parser.envStack.push(env);
        parser.stack.env = Object.assign({
        }, env);
    },
    CloseBrace: function(parser, _c) {
        if (parser.envStack.length) {
            parser.saveText();
            parser.stack.env = parser.envStack.pop();
        } else parser.Error('ExtraCloseMissingOpen', 'Extra close brace or missing open brace');
    },
    OpenQuote: function(parser, c) {
        if (parser.string.charAt(parser.i) === c) {
            parser.text += '\u201C';
            parser.i++;
        } else parser.text += '\u2018';
    },
    CloseQuote: function(parser, c) {
        if (parser.string.charAt(parser.i) === c) {
            parser.text += '\u201D';
            parser.i++;
        } else parser.text += '\u2019';
    },
    Tilde: function(parser, _c) {
        parser.text += '\u00A0';
    },
    Space: function(parser, _c) {
        parser.text += ' ';
        while(parser.GetNext().match(/\s/))parser.i++;
    },
    SelfQuote: function(parser, name) {
        parser.text += name.substr(1);
    },
    Insert: function(parser, _name, c) {
        parser.text += c;
    },
    Accent: function(parser, name, c) {
        var base = parser.ParseArg(name);
        var accent = parser.create('token', 'mo', {
        }, c);
        parser.addAttributes(accent);
        parser.Push(parser.create('node', 'mover', [
            base,
            accent
        ]));
    },
    Emph: function(parser, name) {
        var variant = parser.stack.env.mathvariant === '-tex-mathit' ? 'normal' : '-tex-mathit';
        parser.Push(parser.ParseTextArg(name, {
            mathvariant: variant
        }));
    },
    SetFont: function(parser, _name, variant) {
        parser.saveText();
        parser.stack.env.mathvariant = variant;
    },
    SetSize: function(parser, _name, size) {
        parser.saveText();
        parser.stack.env.mathsize = size;
    },
    CheckAutoload: function(parser, name) {
        var autoload = parser.configuration.packageData.get('autoload');
        var texParser = parser.texParser;
        name = name.slice(1);
        var macro = texParser.lookup('macro', name);
        if (!macro || autoload && macro._func === autoload.Autoload) {
            texParser.parse('macro', [
                texParser,
                name
            ]);
            if (!macro) return;
            Retries_js_1.retryAfter(Promise.resolve());
        }
        texParser.parse('macro', [
            parser,
            name
        ]);
    },
    Macro: BaseMethods_js_1.default.Macro,
    Spacer: BaseMethods_js_1.default.Spacer,
    Hskip: BaseMethods_js_1.default.Hskip,
    rule: BaseMethods_js_1.default.rule,
    Rule: BaseMethods_js_1.default.Rule,
    HandleRef: BaseMethods_js_1.default.HandleRef
};

},{"../TexParser.js":"RI8aV","../../../util/Retries.js":"6iIJ2","../base/BaseMethods.js":"1F5Sh"}],"40Tm7":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
var SymbolMap_js_1 = require("../SymbolMap.js");
var TexConstants_js_1 = require("../TexConstants.js");
var TextMacrosMethods_js_1 = require("./TextMacrosMethods.js");
var lengths_js_1 = require("../../../util/lengths.js");
new SymbolMap_js_1.MacroMap('text-special', {
    '$': 'Math',
    '%': 'Comment',
    '^': 'MathModeOnly',
    '_': 'MathModeOnly',
    '&': 'Misplaced',
    '#': 'Misplaced',
    '~': 'Tilde',
    ' ': 'Space',
    '\t': 'Space',
    '\r': 'Space',
    '\n': 'Space',
    '\u00A0': 'Tilde',
    '{': 'OpenBrace',
    '}': 'CloseBrace',
    '`': 'OpenQuote',
    '\'': 'CloseQuote'
}, TextMacrosMethods_js_1.TextMacrosMethods);
new SymbolMap_js_1.CommandMap('text-macros', {
    '(': 'Math',
    '$': 'SelfQuote',
    '_': 'SelfQuote',
    '%': 'SelfQuote',
    '{': 'SelfQuote',
    '}': 'SelfQuote',
    ' ': 'SelfQuote',
    '&': 'SelfQuote',
    '#': 'SelfQuote',
    '\\': 'SelfQuote',
    '\'': [
        'Accent',
        '\u00B4'
    ],
    '\u2019': [
        'Accent',
        '\u00B4'
    ],
    '`': [
        'Accent',
        '\u0060'
    ],
    '\u2018': [
        'Accent',
        '\u0060'
    ],
    '^': [
        'Accent',
        '^'
    ],
    '\"': [
        'Accent',
        '\u00A8'
    ],
    '~': [
        'Accent',
        '~'
    ],
    '=': [
        'Accent',
        '\u00AF'
    ],
    '.': [
        'Accent',
        '\u02D9'
    ],
    'u': [
        'Accent',
        '\u02D8'
    ],
    'v': [
        'Accent',
        '\u02C7'
    ],
    emph: 'Emph',
    rm: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.NORMAL
    ],
    mit: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.ITALIC
    ],
    oldstyle: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.OLDSTYLE
    ],
    cal: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.CALLIGRAPHIC
    ],
    it: [
        'SetFont',
        '-tex-mathit'
    ],
    bf: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.BOLD
    ],
    bbFont: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.DOUBLESTRUCK
    ],
    scr: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.SCRIPT
    ],
    frak: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.FRAKTUR
    ],
    sf: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.SANSSERIF
    ],
    tt: [
        'SetFont',
        TexConstants_js_1.TexConstant.Variant.MONOSPACE
    ],
    tiny: [
        'SetSize',
        0.5
    ],
    Tiny: [
        'SetSize',
        0.6
    ],
    scriptsize: [
        'SetSize',
        0.7
    ],
    small: [
        'SetSize',
        0.85
    ],
    normalsize: [
        'SetSize',
        1
    ],
    large: [
        'SetSize',
        1.2
    ],
    Large: [
        'SetSize',
        1.44
    ],
    LARGE: [
        'SetSize',
        1.73
    ],
    huge: [
        'SetSize',
        2.07
    ],
    Huge: [
        'SetSize',
        2.49
    ],
    Bbb: [
        'Macro',
        '{\\bbFont #1}',
        1
    ],
    textrm: [
        'Macro',
        '{\\rm #1}',
        1
    ],
    textit: [
        'Macro',
        '{\\it #1}',
        1
    ],
    textbf: [
        'Macro',
        '{\\bf #1}',
        1
    ],
    textsf: [
        'Macro',
        '{\\sf #1}',
        1
    ],
    texttt: [
        'Macro',
        '{\\tt #1}',
        1
    ],
    dagger: [
        'Insert',
        '\u2020'
    ],
    ddagger: [
        'Insert',
        '\u2021'
    ],
    S: [
        'Insert',
        '\u00A7'
    ],
    ',': [
        'Spacer',
        lengths_js_1.MATHSPACE.thinmathspace
    ],
    ':': [
        'Spacer',
        lengths_js_1.MATHSPACE.mediummathspace
    ],
    '>': [
        'Spacer',
        lengths_js_1.MATHSPACE.mediummathspace
    ],
    ';': [
        'Spacer',
        lengths_js_1.MATHSPACE.thickmathspace
    ],
    '!': [
        'Spacer',
        lengths_js_1.MATHSPACE.negativethinmathspace
    ],
    enspace: [
        'Spacer',
        0.5
    ],
    quad: [
        'Spacer',
        1
    ],
    qquad: [
        'Spacer',
        2
    ],
    thinspace: [
        'Spacer',
        lengths_js_1.MATHSPACE.thinmathspace
    ],
    negthinspace: [
        'Spacer',
        lengths_js_1.MATHSPACE.negativethinmathspace
    ],
    hskip: 'Hskip',
    hspace: 'Hskip',
    kern: 'Hskip',
    mskip: 'Hskip',
    mspace: 'Hskip',
    mkern: 'Hskip',
    rule: 'rule',
    Rule: [
        'Rule'
    ],
    Space: [
        'Rule',
        'blank'
    ],
    color: 'CheckAutoload',
    textcolor: 'CheckAutoload',
    colorbox: 'CheckAutoload',
    fcolorbox: 'CheckAutoload',
    href: 'CheckAutoload',
    style: 'CheckAutoload',
    class: 'CheckAutoload',
    cssId: 'CheckAutoload',
    unicode: 'CheckAutoload',
    ref: [
        'HandleRef',
        false
    ],
    eqref: [
        'HandleRef',
        true
    ]
}, TextMacrosMethods_js_1.TextMacrosMethods);

},{"../SymbolMap.js":"19zvT","../TexConstants.js":"1hJzZ","./TextMacrosMethods.js":"2tRDD","../../../util/lengths.js":"5EoCW"}],"5b5dQ":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.UnicodeConfiguration = exports.UnicodeMethods = void 0;
var Configuration_js_1 = require("../Configuration.js");
var TexError_js_1 = require("../TexError.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var ParseUtil_js_1 = require("../ParseUtil.js");
var NodeUtil_js_1 = require("../NodeUtil.js");
var Entities_js_1 = require("../../../util/Entities.js");
exports.UnicodeMethods = {
};
var UnicodeCache = {
};
exports.UnicodeMethods.Unicode = function(parser, name) {
    var HD = parser.GetBrackets(name);
    var HDsplit = null;
    var font = null;
    if (HD) {
        if (HD.replace(/ /g, '').match(/^(\d+(\.\d*)?|\.\d+),(\d+(\.\d*)?|\.\d+)$/)) {
            HDsplit = HD.replace(/ /g, '').split(/,/);
            font = parser.GetBrackets(name);
        } else font = HD;
    }
    var n = ParseUtil_js_1.default.trimSpaces(parser.GetArgument(name)).replace(/^0x/, 'x');
    if (!n.match(/^(x[0-9A-Fa-f]+|[0-9]+)$/)) throw new TexError_js_1.default('BadUnicode', 'Argument to \\unicode must be a number');
    var N = parseInt(n.match(/^x/) ? '0' + n : n);
    if (!UnicodeCache[N]) UnicodeCache[N] = [
        800,
        200,
        font,
        N
    ];
    else if (!font) font = UnicodeCache[N][2];
    if (HDsplit) {
        UnicodeCache[N][0] = Math.floor(parseFloat(HDsplit[0]) * 1000);
        UnicodeCache[N][1] = Math.floor(parseFloat(HDsplit[1]) * 1000);
    }
    var variant = parser.stack.env.font;
    var def = {
    };
    if (font) {
        UnicodeCache[N][2] = def.fontfamily = font.replace(/'/g, '\'');
        if (variant) {
            if (variant.match(/bold/)) def.fontweight = 'bold';
            if (variant.match(/italic|-mathit/)) def.fontstyle = 'italic';
        }
    } else if (variant) def.mathvariant = variant;
    var node = parser.create('token', 'mtext', def, Entities_js_1.numeric(n));
    NodeUtil_js_1.default.setProperty(node, 'unicode', true);
    parser.Push(node);
};
new SymbolMap_js_1.CommandMap('unicode', {
    unicode: 'Unicode'
}, exports.UnicodeMethods);
exports.UnicodeConfiguration = Configuration_js_1.Configuration.create('unicode', {
    handler: {
        macro: [
            'unicode'
        ]
    }
});

},{"../Configuration.js":"2ZNEp","../TexError.js":"7EfV4","../SymbolMap.js":"19zvT","../ParseUtil.js":"17LUu","../NodeUtil.js":"If5yR","../../../util/Entities.js":"4kMub"}],"1CmXk":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.VerbConfiguration = exports.VerbMethods = void 0;
var Configuration_js_1 = require("../Configuration.js");
var TexConstants_js_1 = require("../TexConstants.js");
var SymbolMap_js_1 = require("../SymbolMap.js");
var TexError_js_1 = require("../TexError.js");
exports.VerbMethods = {
};
exports.VerbMethods.Verb = function(parser, name) {
    var c = parser.GetNext();
    var start = ++parser.i;
    if (c === '') throw new TexError_js_1.default('MissingArgFor', 'Missing argument for %1', name);
    while(parser.i < parser.string.length && parser.string.charAt(parser.i) !== c)parser.i++;
    if (parser.i === parser.string.length) throw new TexError_js_1.default('NoClosingDelim', 'Can\'t find closing delimiter for %1', parser.currentCS);
    var text = parser.string.slice(start, parser.i).replace(/ /g, '\u00A0');
    parser.i++;
    parser.Push(parser.create('token', 'mtext', {
        mathvariant: TexConstants_js_1.TexConstant.Variant.MONOSPACE
    }, text));
};
new SymbolMap_js_1.CommandMap('verb', {
    verb: 'Verb'
}, exports.VerbMethods);
exports.VerbConfiguration = Configuration_js_1.Configuration.create('verb', {
    handler: {
        macro: [
            'verb'
        ]
    }
});

},{"../Configuration.js":"2ZNEp","../TexConstants.js":"1hJzZ","../SymbolMap.js":"19zvT","../TexError.js":"7EfV4"}]},["39Mbm","5rkFb"], "5rkFb", "parcelRequire0bf0")

//# sourceMappingURL=index.3fafb3e2.js.map
